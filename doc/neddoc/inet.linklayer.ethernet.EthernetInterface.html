<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      <link rel="stylesheet" type="text/css" href="style.css" />
   </head>
   <body onload="if (top.frames['componentsframe'] == undefined) { s = window.location.toString(); window.location = 'index.html?p=' + s.substring(s.lastIndexOf('/')+1); }">
<h2 class="comptitle">Compound Module <i>EthernetInterface</i></h2>
<b>Package:</b> inet.linklayer.ethernet<br/><b>File: <a href="src-linklayer-ethernet-EthernetInterface.ned.html">src/linklayer/ethernet/EthernetInterface.ned</a></b><br/>
<p>Ethernet network interface. Complements <a href="inet.linklayer.ethernet.EtherMAC.html">EtherMAC</a> and <a href="inet.linklayer.ethernet.EtherEncap.html">EtherEncap</a>
with an output queue for QoS and RED support.</p>
<img src="inet.linklayer.ethernet.EthernetInterface-type.png" ismap="yes" usemap="#type-diagram"/><map name="type-diagram">
<area shape="rect" href="inet.base.IHook.html" title="IHook" alt="IHook" coords="-6,130,171,165">
<area shape="rect" href="inet.base.IHook.html" title="IHook" alt="IHook" coords="190,115,345,150">
<area shape="rect" href="inet.linklayer.ITrafficConditioner.html" title="ITrafficConditioner" alt="ITrafficConditioner" coords="266,178,322,237">
<area shape="rect" href="inet.linklayer.ITrafficConditioner.html" title="ITrafficConditioner" alt="ITrafficConditioner" coords="29,178,82,237">
<area shape="rect" href="inet.linklayer.ethernet.EtherQoSQueue.html" title="EtherQoSQueue" alt="EtherQoSQueue" coords="89,283,137,342">
<area shape="rect" href="inet.linklayer.IEtherMAC.html" title="IEtherMAC" alt="IEtherMAC" coords="164,341,208,400">
<area shape="rect" href="inet.linklayer.ethernet.EtherEncap.html" title="EtherEncap" alt="EtherEncap" coords="164,225,208,284">
</map>
<h3 class="subtitle">Usage diagram:</h3>
<p>The following diagram shows usage relationships between types.
Unresolved types are missing from the diagram.</p>
<img src="inet.linklayer.ethernet.EthernetInterface-usage.png" ismap="yes" usemap="#usage-diagram"/><map name="usage-diagram"><area shape="rect" id="node1" href="inet.linklayer.ethernet.EthernetInterface.html" title="Compound Module EthernetInterface" alt="" coords="273,6,396,34">
<area shape="rect" id="node2" href="inet.linklayer.IEtherMAC.html" title="Module Interface IEtherMAC" alt="" coords="5,83,91,111">
<area shape="rect" id="node4" href="ned.IdealChannel.html" title="Channel IdealChannel" alt="" coords="115,83,213,111">
<area shape="rect" id="node6" href="inet.base.IHook.html" title="Module Interface IHook" alt="" coords="237,83,309,111">
<area shape="rect" id="node8" href="inet.linklayer.ITrafficConditioner.html" title="Module Interface ITrafficConditioner" alt="" coords="333,83,461,111">
<area shape="rect" id="node10" href="inet.linklayer.ethernet.EtherQoSQueue.html" title="Compound Module EtherQoSQueue" alt="" coords="485,83,603,111">
<area shape="rect" id="node12" href="inet.linklayer.ethernet.EtherEncap.html" title="Simple Module EtherEncap" alt="" coords="627,83,717,111">
</map>
<h3 class="subtitle">Inheritance diagram:</h3>
<p>The following diagram shows inheritance relationships for this type.
Unresolved types are missing from the diagram.</p>
<img src="inet.linklayer.ethernet.EthernetInterface-inheritance.png" ismap="yes" usemap="#inheritance-diagram"/><map name="inheritance-diagram"><area shape="rect" id="node1" href="inet.linklayer.ethernet.EthernetInterface.html" title="Compound Module EthernetInterface" alt="" coords="5,83,128,111">
<area shape="rect" id="node2" href="inet.linklayer.IWiredNic.html" title="Module Interface IWiredNic" alt="" coords="27,6,107,34">
</map>
<h3 class="subtitle">Parameters:</h3>
<table class="paramstable">
   <tr>
      <th class="name">Name</th>
      <th class="type">Type</th>
      <th class="defaultvalue">Default value</th>
      <th class="description">Description</th>
   </tr>
<tr class="local">
   <td>csmacdSupport</td>
   <td>
      <i>bool</i>
   </td>
   <td>false</td>
   <td>
<p>by default CSMA/CD is turned off, so only point-to-point duplex links are supported.</p>
   </td>
</tr>
<tr class="local">
   <td>useSNAP</td>
   <td>
      <i>bool</i>
   </td>
   <td>false</td>
   <td>
<p>use EtherFrameWithSNAP instead EthernetIIFrame</p>
   </td>
</tr>
<tr class="local">
   <td>macType</td>
   <td>
      <i>string</i>
   </td>
   <td>csmacdSupport ? "EtherMAC" : "EtherMACFullDuplex"</td>
   <td>
<p><a href="inet.linklayer.ethernet.EtherMAC.html">EtherMAC</a> or <a href="inet.linklayer.ethernet.EtherMACFullDuplex.html">EtherMACFullDuplex</a></p>
   </td>
</tr>
<tr class="local">
   <td>queueType</td>
   <td>
      <i>string</i>
   </td>
   <td>""</td>
   <td>
<p><a href="inet.linklayer.queue.DropTailQueue.html">DropTailQueue</a>, or a Diffserv queue; set to "" for use of an internal queue</p>
   </td>
</tr>
<tr class="local">
   <td>ingressTCType</td>
   <td>
      <i>string</i>
   </td>
   <td>""</td>
   <td>
<p>a module type implementing <a href="inet.linklayer.ITrafficConditioner.html">ITrafficConditioner</a> for optional traffic conditioning of incoming traffic</p>
   </td>
</tr>
<tr class="local">
   <td>egressTCType</td>
   <td>
      <i>string</i>
   </td>
   <td>""</td>
   <td>
<p>a module type implementing <a href="inet.linklayer.ITrafficConditioner.html">ITrafficConditioner</a> for optional traffic conditioning of outgoing traffic</p>
   </td>
</tr>
<tr class="local">
   <td>numOutputHooks</td>
   <td>
      <i>int</i>
   </td>
   <td>0</td>
   <td>   </td>
</tr>
<tr class="local">
   <td>numInputHooks</td>
   <td>
      <i>int</i>
   </td>
   <td>0</td>
   <td>   </td>
</tr>
</table>
<h3 class="subtitle">Properties:</h3>
<table class="propertiestable">
   <tr>
      <th class="name">Name</th>
      <th class="value">Value</th>
      <th class="description">Description</th>
   </tr>
<tr>
   <td>display</td>
   <td><i>i=block/ifcard;bgl=2</i></td>
   <td></td>
</tr>
</table>
<h3 class="subtitle">Gates:</h3>
<table class="gatestable">
   <tr>
      <th class="name">Name</th>
      <th class="type">Direction</th>
      <th class="gatesize">Size</th>
      <th class="description">Description</th>
   </tr>
<tr class="local">
   <td>upperLayerIn</xsl:if></td>
   <td><i>input</i></td>
   <td></td>   <td></td>
</tr>
<tr class="local">
   <td>upperLayerOut</xsl:if></td>
   <td><i>output</i></td>
   <td></td>   <td></td>
</tr>
<tr class="local">
   <td>phys</xsl:if></td>
   <td><i>inout</i></td>
   <td></td>   <td></td>
</tr>
</table>
<h3 class="subtitle">Unassigned submodule parameters:</h3>
<table class="deepparamstable">
   <tr>
      <th class="name">Name</th>
      <th class="type">Type</th>
      <th class="defaultvalue">Default value</th>
      <th class="description">Description</th>
   </tr>
<tr>
   <td><a href="inet.linklayer.ethernet.EtherQoSQueue.html">queue</a>.<a href="inet.linklayer.queue.DropTailQueue.html">pauseQueue</a>.frameCapacity</td>
   <td>
      <i>int</i>
   </td>
   <td>100</td>
   <td>   </td>
</tr>
<tr>
   <td><a href="inet.linklayer.IEtherMAC.html">mac</a>.promiscuous</td>
   <td>
      <i>bool</i>
   </td>
   <td></td>
   <td>
<p>if true, all packets are received, otherwise only the
ones with matching destination MAC address</p>
   </td>
</tr>
<tr>
   <td><a href="inet.linklayer.IEtherMAC.html">mac</a>.address</td>
   <td>
      <i>string</i>
   </td>
   <td></td>
   <td>
<p>MAC address as hex string (12 hex digits), or
"auto". "auto" values will be replaced by
a generated MAC address in init stage 0.</p>
   </td>
</tr>
<tr>
   <td><a href="inet.linklayer.IEtherMAC.html">mac</a>.duplexMode</td>
   <td>
      <i>bool</i>
   </td>
   <td></td>
   <td>
<p>selects full-duplex (true) or half-duplex (false) operation</p>
   </td>
</tr>
<tr>
   <td><a href="inet.linklayer.IEtherMAC.html">mac</a>.mtu</td>
   <td>
      <i>int</i>
   </td>
   <td></td>
   <td>   </td>
</tr>
</table>
<h3 class="subtitle">Source code:</h3>
<pre class="src"><span style="color: #808080; font-style: italic; ">//
// Ethernet network interface. Complements ~EtherMAC and ~EtherEncap
// with an output queue for QoS and RED support.
//
</span><span style="color: #800000; font-weight: bold; ">module</span><span style="color: #000000; "> </span><span style="color: #000000; ">EthernetInterface</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">like</span><span style="color: #000000; "> </span><span style="color: #000000; ">IWiredNic</span><span style="color: #000000; ">
{
    </span><span style="color: #800000; font-weight: bold; ">parameters</span><span style="color: #000000; ">:
        </span><span style="color: #000080; font-weight: bold; ">bool</span><span style="color: #000000; "> </span><span style="color: #000000; ">csmacdSupport</span><span style="color: #000000; "> = </span><span style="color: #800000; font-weight: bold; ">default</span><span style="color: #000000; ">(</span><span style="color: #008000; ">false</span><span style="color: #000000; ">);  </span><span style="color: #808080; font-style: italic; ">// by default CSMA/CD is turned off, so only point-to-point duplex links are supported.
</span><span style="color: #000000; ">        </span><span style="color: #000080; font-weight: bold; ">bool</span><span style="color: #000000; "> </span><span style="color: #000000; ">useSNAP</span><span style="color: #000000; "> = </span><span style="color: #800000; font-weight: bold; ">default</span><span style="color: #000000; ">(</span><span style="color: #008000; ">false</span><span style="color: #000000; ">);  </span><span style="color: #808080; font-style: italic; ">// use EtherFrameWithSNAP instead EthernetIIFrame
</span><span style="color: #000000; ">        </span><span style="color: #000080; font-weight: bold; ">string</span><span style="color: #000000; "> </span><span style="color: #000000; ">macType</span><span style="color: #000000; "> = </span><span style="color: #800000; font-weight: bold; ">default</span><span style="color: #000000; ">(</span><span style="color: #000000; ">csmacdSupport</span><span style="color: #000000; "> ? </span><span style="color: #008000; ">&quot;EtherMAC&quot;</span><span style="color: #000000; "> : </span><span style="color: #008000; ">&quot;EtherMACFullDuplex&quot;</span><span style="color: #000000; ">); </span><span style="color: #808080; font-style: italic; ">// ~EtherMAC or ~EtherMACFullDuplex
</span><span style="color: #000000; ">        </span><span style="color: #000080; font-weight: bold; ">string</span><span style="color: #000000; "> </span><span style="color: #000000; ">queueType</span><span style="color: #000000; "> = </span><span style="color: #800000; font-weight: bold; ">default</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">); </span><span style="color: #808080; font-style: italic; ">// ~DropTailQueue, or a Diffserv queue; set to &quot;&quot; for use of an internal queue
</span><span style="color: #000000; ">        </span><span style="color: #000080; font-weight: bold; ">string</span><span style="color: #000000; "> </span><span style="color: #000000; ">ingressTCType</span><span style="color: #000000; "> = </span><span style="color: #800000; font-weight: bold; ">default</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">); </span><span style="color: #808080; font-style: italic; ">// a module type implementing ~ITrafficConditioner for optional traffic conditioning of incoming traffic
</span><span style="color: #000000; ">        </span><span style="color: #000080; font-weight: bold; ">string</span><span style="color: #000000; "> </span><span style="color: #000000; ">egressTCType</span><span style="color: #000000; "> = </span><span style="color: #800000; font-weight: bold; ">default</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">); </span><span style="color: #808080; font-style: italic; ">// a module type implementing ~ITrafficConditioner for optional traffic conditioning of outgoing traffic
</span><span style="color: #000000; ">        </span><span style="color: #000080; font-weight: bold; ">int</span><span style="color: #000000; "> </span><span style="color: #000000; ">numOutputHooks</span><span style="color: #000000; "> = </span><span style="color: #800000; font-weight: bold; ">default</span><span style="color: #000000; ">(</span><span style="color: #008000; ">0</span><span style="color: #000000; ">);
        </span><span style="color: #000080; font-weight: bold; ">int</span><span style="color: #000000; "> </span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; "> = </span><span style="color: #800000; font-weight: bold; ">default</span><span style="color: #000000; ">(</span><span style="color: #008000; ">0</span><span style="color: #000000; ">);
        </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;i=block/ifcard;bgl=2&quot;</span><span style="color: #000000; ">);
    </span><span style="color: #800000; font-weight: bold; ">gates</span><span style="color: #000000; ">:
        </span><span style="color: #000080; font-weight: bold; ">input</span><span style="color: #000000; "> </span><span style="color: #000000; ">upperLayerIn</span><span style="color: #000000; ">;
        </span><span style="color: #000080; font-weight: bold; ">output</span><span style="color: #000000; "> </span><span style="color: #000000; ">upperLayerOut</span><span style="color: #000000; ">;
        </span><span style="color: #000080; font-weight: bold; ">inout</span><span style="color: #000000; "> </span><span style="color: #000000; ">phys</span><span style="color: #000000; "> </span><span style="color: #000000; font-weight: bold; ">@labels</span><span style="color: #000000; ">(</span><span style="color: #000000; ">EtherFrame</span><span style="color: #000000; ">);
    </span><span style="color: #800000; font-weight: bold; ">submodules</span><span style="color: #000000; ">:
        </span><span style="color: #000000; ">outputHook</span><span style="color: #000000; ">[</span><span style="color: #000000; ">numOutputHooks</span><span style="color: #000000; ">]: &lt;</span><span style="color: #800000; font-weight: bold; ">default</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;Nop&quot;</span><span style="color: #000000; ">)&gt; </span><span style="color: #800000; font-weight: bold; ">like</span><span style="color: #000000; "> </span><span style="color: #000000; ">IHook</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numOutputHooks</span><span style="color: #000000; ">&gt;</span><span style="color: #008000; ">0</span><span style="color: #000000; "> {
            </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;p=80,98&quot;</span><span style="color: #000000; ">);
        }
        </span><span style="color: #000000; ">inputHook</span><span style="color: #000000; ">[</span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; ">]: &lt;</span><span style="color: #800000; font-weight: bold; ">default</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;Nop&quot;</span><span style="color: #000000; ">)&gt; </span><span style="color: #800000; font-weight: bold; ">like</span><span style="color: #000000; "> </span><span style="color: #000000; ">IHook</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; ">&gt;</span><span style="color: #008000; ">0</span><span style="color: #000000; "> {
            </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;p=265,83&quot;</span><span style="color: #000000; ">);
        }
        </span><span style="color: #000000; ">ingressTC</span><span style="color: #000000; ">: &lt;</span><span style="color: #000000; ">ingressTCType</span><span style="color: #000000; ">&gt; </span><span style="color: #800000; font-weight: bold; ">like</span><span style="color: #000000; "> </span><span style="color: #000000; ">ITrafficConditioner</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">ingressTCType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; "> {
            </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;p=292,158&quot;</span><span style="color: #000000; ">);
        }
        </span><span style="color: #000000; ">egressTC</span><span style="color: #000000; ">: &lt;</span><span style="color: #000000; ">egressTCType</span><span style="color: #000000; ">&gt; </span><span style="color: #800000; font-weight: bold; ">like</span><span style="color: #000000; "> </span><span style="color: #000000; ">ITrafficConditioner</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">egressTCType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; "> {
            </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;p=53,158&quot;</span><span style="color: #000000; ">);
        }
        </span><span style="color: #000000; ">queue</span><span style="color: #000000; ">: </span><span style="color: #000000; ">EtherQoSQueue</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">queueType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; "> {
            </span><span style="color: #800000; font-weight: bold; ">parameters</span><span style="color: #000000; ">:
                </span><span style="color: #000000; ">dataQueueType</span><span style="color: #000000; "> = </span><span style="color: #000000; ">queueType</span><span style="color: #000000; ">;
                </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;p=107,263;q=l2queue&quot;</span><span style="color: #000000; ">);
        }
        </span><span style="color: #000000; ">mac</span><span style="color: #000000; ">: &lt;</span><span style="color: #000000; ">macType</span><span style="color: #000000; ">&gt; </span><span style="color: #800000; font-weight: bold; ">like</span><span style="color: #000000; "> </span><span style="color: #000000; ">IEtherMAC</span><span style="color: #000000; "> {
            </span><span style="color: #800000; font-weight: bold; ">parameters</span><span style="color: #000000; ">:
                </span><span style="color: #000000; ">queueModule</span><span style="color: #000000; "> = (</span><span style="color: #000000; ">queueType</span><span style="color: #000000; "> == </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; "> ? </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; "> : </span><span style="color: #008000; ">&quot;queue&quot;</span><span style="color: #000000; ">);
                </span><span style="color: #000000; ">txQueueLimit</span><span style="color: #000000; "> = (</span><span style="color: #000000; ">queueType</span><span style="color: #000000; "> == </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; "> ? </span><span style="color: #008000; ">10000</span><span style="color: #000000; "> : </span><span style="color: #008000; ">1</span><span style="color: #000000; ">); </span><span style="color: #808080; font-style: italic; ">// queue sends one packet at a time
</span><span style="color: #000000; ">                </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;p=182,321&quot;</span><span style="color: #000000; ">);
        }
        </span><span style="color: #000000; ">encap</span><span style="color: #000000; ">: </span><span style="color: #000000; ">EtherEncap</span><span style="color: #000000; "> {
            </span><span style="color: #800000; font-weight: bold; ">parameters</span><span style="color: #000000; ">:
                </span><span style="color: #000000; ">useSNAP</span><span style="color: #000000; "> = </span><span style="color: #000000; ">useSNAP</span><span style="color: #000000; ">;
                </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;p=182,205&quot;</span><span style="color: #000000; ">);
        }
    </span><span style="color: #800000; font-weight: bold; ">connections</span><span style="color: #000000; ">:
        </span><span style="color: #000000; ">encap</span><span style="color: #000000; ">.</span><span style="color: #000000; ">lowerLayerOut</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">queue</span><span style="color: #000000; ">.</span><span style="color: #000000; ">in</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">queueType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;
        </span><span style="color: #000000; ">queue</span><span style="color: #000000; ">.</span><span style="color: #000000; ">out</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">mac</span><span style="color: #000000; ">.</span><span style="color: #000000; ">upperLayerIn</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">queueType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;
        </span><span style="color: #000000; ">encap</span><span style="color: #000000; ">.</span><span style="color: #000000; ">lowerLayerOut</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">mac</span><span style="color: #000000; ">.</span><span style="color: #000000; ">upperLayerIn</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">queueType</span><span style="color: #000000; "> == </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;
        </span><span style="color: #000000; ">encap</span><span style="color: #000000; ">.</span><span style="color: #000000; ">lowerLayerIn</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">&lt;--</span><span style="color: #000000; "> </span><span style="color: #000000; ">mac</span><span style="color: #000000; ">.</span><span style="color: #000000; ">upperLayerOut</span><span style="color: #000000; ">;
        </span><span style="color: #000000; ">mac</span><span style="color: #000000; ">.</span><span style="color: #000000; ">phys</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">&lt;--&gt;</span><span style="color: #000000; "> { </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;m=s&quot;</span><span style="color: #000000; ">); } </span><span style="color: #800000; font-weight: bold; ">&lt;--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">phys</span><span style="color: #000000; ">;

        </span><span style="color: #808080; font-style: italic; ">// chain input hooks
</span><span style="color: #000000; ">        </span><span style="color: #800000; font-weight: bold; ">for</span><span style="color: #000000; "> </span><span style="color: #000000; ">i</span><span style="color: #000000; ">=</span><span style="color: #008000; ">0</span><span style="color: #000000; ">..</span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; ">-</span><span style="color: #008000; ">2</span><span style="color: #000000; "> {
            </span><span style="color: #000000; ">inputHook</span><span style="color: #000000; ">[</span><span style="color: #000000; ">i</span><span style="color: #000000; ">].</span><span style="color: #000000; ">out</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">inputHook</span><span style="color: #000000; ">[</span><span style="color: #000000; ">i</span><span style="color: #000000; ">+</span><span style="color: #008000; ">1</span><span style="color: #000000; ">].</span><span style="color: #000000; ">in</span><span style="color: #000000; ">;
        }

        </span><span style="color: #808080; font-style: italic; ">// no input hooks, no ingressTC
</span><span style="color: #000000; ">        </span><span style="color: #000000; ">encap</span><span style="color: #000000; ">.</span><span style="color: #000000; ">upperLayerOut</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> { </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;m=n&quot;</span><span style="color: #000000; ">); } </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">upperLayerOut</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; "> == </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">ingressTCType</span><span style="color: #000000; "> == </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;

        </span><span style="color: #808080; font-style: italic; ">// no input hooks, there is ingressTC
</span><span style="color: #000000; ">        </span><span style="color: #000000; ">encap</span><span style="color: #000000; ">.</span><span style="color: #000000; ">upperLayerOut</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">ingressTC</span><span style="color: #000000; ">.</span><span style="color: #000000; ">in</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; "> == </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">ingressTCType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;
        </span><span style="color: #000000; ">ingressTC</span><span style="color: #000000; ">.</span><span style="color: #000000; ">out</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> { </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;m=n&quot;</span><span style="color: #000000; ">); } </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">upperLayerOut</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; "> == </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">ingressTCType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;

        </span><span style="color: #808080; font-style: italic; ">// there are input hooks, no ingressTC
</span><span style="color: #000000; ">        </span><span style="color: #000000; ">encap</span><span style="color: #000000; ">.</span><span style="color: #000000; ">upperLayerOut</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">inputHook</span><span style="color: #000000; ">[</span><span style="color: #008000; ">0</span><span style="color: #000000; ">].</span><span style="color: #000000; ">in</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; "> &gt; </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">ingressTCType</span><span style="color: #000000; "> == </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;
        </span><span style="color: #000000; ">inputHook</span><span style="color: #000000; ">[</span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; ">-</span><span style="color: #008000; ">1</span><span style="color: #000000; ">].</span><span style="color: #000000; ">out</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> { </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;m=n&quot;</span><span style="color: #000000; ">); } </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">upperLayerOut</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; "> &gt; </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">ingressTCType</span><span style="color: #000000; "> == </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;

        </span><span style="color: #808080; font-style: italic; ">// there are input hooks, there is ingressTC
</span><span style="color: #000000; ">        </span><span style="color: #000000; ">encap</span><span style="color: #000000; ">.</span><span style="color: #000000; ">upperLayerOut</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">ingressTC</span><span style="color: #000000; ">.</span><span style="color: #000000; ">in</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; "> &gt; </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">ingressTCType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;
        </span><span style="color: #000000; ">ingressTC</span><span style="color: #000000; ">.</span><span style="color: #000000; ">out</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">inputHook</span><span style="color: #000000; ">[</span><span style="color: #008000; ">0</span><span style="color: #000000; ">].</span><span style="color: #000000; ">in</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; "> &gt; </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">ingressTCType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;
        </span><span style="color: #000000; ">inputHook</span><span style="color: #000000; ">[</span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; ">-</span><span style="color: #008000; ">1</span><span style="color: #000000; ">].</span><span style="color: #000000; ">out</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> { </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;m=n&quot;</span><span style="color: #000000; ">); } </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">upperLayerOut</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; "> &gt; </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">ingressTCType</span><span style="color: #000000; "> == </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;

        </span><span style="color: #808080; font-style: italic; ">// chain output hooks
</span><span style="color: #000000; ">        </span><span style="color: #800000; font-weight: bold; ">for</span><span style="color: #000000; "> </span><span style="color: #000000; ">i</span><span style="color: #000000; ">=</span><span style="color: #008000; ">0</span><span style="color: #000000; ">..</span><span style="color: #000000; ">numOutputHooks</span><span style="color: #000000; ">-</span><span style="color: #008000; ">2</span><span style="color: #000000; "> {
            </span><span style="color: #000000; ">outputHook</span><span style="color: #000000; ">[</span><span style="color: #000000; ">i</span><span style="color: #000000; ">].</span><span style="color: #000000; ">out</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">outputHook</span><span style="color: #000000; ">[</span><span style="color: #000000; ">i</span><span style="color: #000000; ">+</span><span style="color: #008000; ">1</span><span style="color: #000000; ">].</span><span style="color: #000000; ">in</span><span style="color: #000000; ">;
        }

        </span><span style="color: #808080; font-style: italic; ">// no output hooks, no egressTC
</span><span style="color: #000000; ">        </span><span style="color: #000000; ">upperLayerIn</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> { </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;m=n&quot;</span><span style="color: #000000; ">); } </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">encap</span><span style="color: #000000; ">.</span><span style="color: #000000; ">upperLayerIn</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numOutputHooks</span><span style="color: #000000; "> == </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">egressTCType</span><span style="color: #000000; "> == </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;

        </span><span style="color: #808080; font-style: italic; ">// no output hooks, there is egressTC
</span><span style="color: #000000; ">        </span><span style="color: #000000; ">upperLayerIn</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> { </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;m=n&quot;</span><span style="color: #000000; ">); } </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">egressTC</span><span style="color: #000000; ">.</span><span style="color: #000000; ">in</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numOutputHooks</span><span style="color: #000000; "> == </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">egressTCType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;
        </span><span style="color: #000000; ">egressTC</span><span style="color: #000000; ">.</span><span style="color: #000000; ">out</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">encap</span><span style="color: #000000; ">.</span><span style="color: #000000; ">upperLayerIn</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numOutputHooks</span><span style="color: #000000; "> == </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">egressTCType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;

        </span><span style="color: #808080; font-style: italic; ">// there are output hooks, no egressTC
</span><span style="color: #000000; ">        </span><span style="color: #000000; ">upperLayerIn</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> { </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;m=n&quot;</span><span style="color: #000000; ">); } </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">outputHook</span><span style="color: #000000; ">[</span><span style="color: #008000; ">0</span><span style="color: #000000; ">].</span><span style="color: #000000; ">in</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numOutputHooks</span><span style="color: #000000; "> &gt; </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">egressTCType</span><span style="color: #000000; "> == </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;
        </span><span style="color: #000000; ">outputHook</span><span style="color: #000000; ">[</span><span style="color: #000000; ">numOutputHooks</span><span style="color: #000000; ">-</span><span style="color: #008000; ">1</span><span style="color: #000000; ">].</span><span style="color: #000000; ">out</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">encap</span><span style="color: #000000; ">.</span><span style="color: #000000; ">upperLayerIn</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numOutputHooks</span><span style="color: #000000; "> &gt; </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">egressTCType</span><span style="color: #000000; "> == </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;

        </span><span style="color: #808080; font-style: italic; ">// there are output hooks, there is egressTC
</span><span style="color: #000000; ">        </span><span style="color: #000000; ">upperLayerIn</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> { </span><span style="color: #000000; font-weight: bold; ">@display</span><span style="color: #000000; ">(</span><span style="color: #008000; ">&quot;m=n&quot;</span><span style="color: #000000; ">); } </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">outputHook</span><span style="color: #000000; ">[</span><span style="color: #008000; ">0</span><span style="color: #000000; ">].</span><span style="color: #000000; ">in</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numOutputHooks</span><span style="color: #000000; "> &gt; </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">egressTCType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;
        </span><span style="color: #000000; ">outputHook</span><span style="color: #000000; ">[</span><span style="color: #000000; ">numInputHooks</span><span style="color: #000000; ">-</span><span style="color: #008000; ">1</span><span style="color: #000000; ">].</span><span style="color: #000000; ">out</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">egressTC</span><span style="color: #000000; ">.</span><span style="color: #000000; ">in</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numOutputHooks</span><span style="color: #000000; "> &gt; </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">egressTCType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;
        </span><span style="color: #000000; ">egressTC</span><span style="color: #000000; ">.</span><span style="color: #000000; ">out</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">--&gt;</span><span style="color: #000000; "> </span><span style="color: #000000; ">encap</span><span style="color: #000000; ">.</span><span style="color: #000000; ">upperLayerIn</span><span style="color: #000000; "> </span><span style="color: #800000; font-weight: bold; ">if</span><span style="color: #000000; "> </span><span style="color: #000000; ">numOutputHooks</span><span style="color: #000000; "> &gt; </span><span style="color: #008000; ">0</span><span style="color: #000000; "> &amp;&amp; </span><span style="color: #000000; ">egressTCType</span><span style="color: #000000; "> != </span><span style="color: #008000; ">&quot;&quot;</span><span style="color: #000000; ">;
}

</span></pre>
   </body>
</html>
