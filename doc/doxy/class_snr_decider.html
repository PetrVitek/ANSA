<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: SnrDecider Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_snr_decider.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">SnrDecider Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="SnrDecider" --><!-- doxytag: inherits="BasicDecider" -->
<p>a simple snr decider...  
 <a href="class_snr_decider.html#details">More...</a></p>

<p><code>#include &lt;SnrDecider.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for SnrDecider:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_snr_decider.png" usemap="#SnrDecider_map" alt=""/>
  <map id="SnrDecider_map" name="SnrDecider_map">
<area href="class_basic_decider.html" title="Module to decide whether a frame is received correctly or is lost due to bit errors, interference..." alt="BasicDecider" shape="rect" coords="0,112,120,136"/>
<area href="class_basic_module.html" title="Base class for all simple modules of a host that want to have access to the NotificationBoard module..." alt="BasicModule" shape="rect" coords="0,56,120,80"/>
<area href="class_i_notifiable.html" alt="INotifiable" shape="rect" coords="0,0,120,24"/>
<area href="class_err_and_coll_decider.html" title="decider module for the GilbertElliotSnr module" alt="ErrAndCollDecider" shape="rect" coords="0,224,120,248"/>
</map>
 </div></div>

<p><a href="class_snr_decider-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_snr_decider.html#a77cd186866d79c7ca1b56a5433a0f5b7">initialize</a> (int)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization of the module and some variables.  <a href="#a77cd186866d79c7ca1b56a5433a0f5b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_snr_decider.html#a4c795f28df74941eeeab18e8dc8034a4">snrOverThreshold</a> (<a class="el" href="_snr_list_8h.html#a241b5e7c9575e932988a55f7a5012a61">SnrList</a> &amp;) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_snr_decider.html#affd51bd42b5411df2f8f6c115614d387">handleLowerMsg</a> (AirFrame *, <a class="el" href="_snr_list_8h.html#a241b5e7c9575e932988a55f7a5012a61">SnrList</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">In this function the decision whether a frame is received correctly or not is made.  <a href="#affd51bd42b5411df2f8f6c115614d387"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_snr_decider.html#a2d47dd55aad40c384d4c831f54a7c3a4">snrThresholdLevel</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Level for decision [mW].  <a href="#a2d47dd55aad40c384d4c831f54a7c3a4"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>a simple snr decider... </p>
<p>This decider simply takes a look at the sduList contained in the received PhySDU packet and checks whether one of the mentioned snr levels is lower than the snrThresholdLevel which has to be read in at the beginning of a simulation. (suggestion: from the omnetpp.ini file!)</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Marc Löbbers, Andreas Koepke </dd></dl>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="affd51bd42b5411df2f8f6c115614d387"></a><!-- doxytag: member="SnrDecider::handleLowerMsg" ref="affd51bd42b5411df2f8f6c115614d387" args="(AirFrame *, SnrList &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SnrDecider::handleLowerMsg </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_snr_list_8h.html#a241b5e7c9575e932988a55f7a5012a61">SnrList</a> &amp;&#160;</td>
          <td class="paramname"><em>snrList</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>In this function the decision whether a frame is received correctly or not is made. </p>
<p>Redefine this function if you want to process messages from the channel before they are forwarded to upper layers</p>
<p>In this function it has to be decided whether this message got lost or not. This can be done with a simple SNR threshold or with transformations of SNR into bit error probabilities...</p>
<p>If you want to forward the message to upper layers please use <a class="el" href="class_basic_decider.html#af138c784173f1f4099d25d59e1bde3e7">sendUp</a> which will decapsulate the MAC frame before sending </p>

<p>Reimplemented from <a class="el" href="class_basic_decider.html#a72b05862a5c56775a22b52eaa30eab90">BasicDecider</a>.</p>

<p>Reimplemented in <a class="el" href="class_err_and_coll_decider.html#aee1da91d3d0a44bd00edc9ac58b600a8">ErrAndCollDecider</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_snr_decider.html#a4c795f28df74941eeeab18e8dc8034a4">snrOverThreshold</a>(receivedList))
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Message handed on to Mac\n&quot;</span>;
        <a class="code" href="class_basic_decider.html#af138c784173f1f4099d25d59e1bde3e7" title="Sends a message to the upper layer.">sendUp</a>(af);
    }
    <span class="keywordflow">else</span>
    {
        <span class="keyword">delete</span> af;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a77cd186866d79c7ca1b56a5433a0f5b7"></a><!-- doxytag: member="SnrDecider::initialize" ref="a77cd186866d79c7ca1b56a5433a0f5b7" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SnrDecider::initialize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialization of the module and some variables. </p>
<p>First we have to initialize the module from which we derived ours, in this case <a class="el" href="class_basic_module.html" title="Base class for all simple modules of a host that want to have access to the NotificationBoard module...">BasicModule</a>.</p>
<p>Then we have to intialize the gates and - if necessary - some own variables. </p>

<p>Reimplemented from <a class="el" href="class_basic_decider.html#a533578bad02397c1818503f1d5beb736">BasicDecider</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_snr_decider.html#a77cd186866d79c7ca1b56a5433a0f5b7" title="Initialization of the module and some variables.">BasicDecider::initialize</a>(stage);

    <span class="keywordflow">if</span> (stage == 0)
    {
        <a class="code" href="class_snr_decider.html#a2d47dd55aad40c384d4c831f54a7c3a4" title="Level for decision [mW].">snrThresholdLevel</a> = <a class="code" href="class_f_w_math.html#af308407856d9835b103f2421e373ee28">FWMath::dBm2mW</a>(par(<span class="stringliteral">&quot;snrThresholdLevel&quot;</span>));
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4c795f28df74941eeeab18e8dc8034a4"></a><!-- doxytag: member="SnrDecider::snrOverThreshold" ref="a4c795f28df74941eeeab18e8dc8034a4" args="(SnrList &amp;) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SnrDecider::snrOverThreshold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_snr_list_8h.html#a241b5e7c9575e932988a55f7a5012a61">SnrList</a> &amp;&#160;</td>
          <td class="paramname"><em>snrlist</em></td><td>)</td>
          <td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks the received sduList (from the PhySDU header) if it contains an snr level above the threshold </p>

<p>Referenced by <a class="el" href="class_snr_decider.html#affd51bd42b5411df2f8f6c115614d387">handleLowerMsg()</a>, and <a class="el" href="class_err_and_coll_decider.html#aee1da91d3d0a44bd00edc9ac58b600a8">ErrAndCollDecider::handleLowerMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//check the entries in the sduList if a level is lower than the</span>
    <span class="comment">//acceptable minimum:</span>

    <span class="comment">//check</span>
    <span class="keywordflow">for</span> (SnrList::const_iterator iter = snrlist.begin(); iter != snrlist.end(); iter++)
    {
        <span class="keywordflow">if</span> (iter-&gt;snr &lt;= <a class="code" href="class_snr_decider.html#a2d47dd55aad40c384d4c831f54a7c3a4" title="Level for decision [mW].">snrThresholdLevel</a>)
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Message got lost. MessageSnr: &quot;</span> &lt;&lt; iter-&gt;
                snr &lt;&lt; <span class="stringliteral">&quot; Threshold: &quot;</span> &lt;&lt; <a class="code" href="class_snr_decider.html#a2d47dd55aad40c384d4c831f54a7c3a4" title="Level for decision [mW].">snrThresholdLevel</a> &lt;&lt; endl;
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a2d47dd55aad40c384d4c831f54a7c3a4"></a><!-- doxytag: member="SnrDecider::snrThresholdLevel" ref="a2d47dd55aad40c384d4c831f54a7c3a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_snr_decider.html#a2d47dd55aad40c384d4c831f54a7c3a4">SnrDecider::snrThresholdLevel</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Level for decision [mW]. </p>
<p>When a packet contains an snr level higher than snrThresholdLevel it will be considered as lost. This parameter has to be specified at the beginning of a simulation (omnetpp.ini) in dBm. </p>

<p>Referenced by <a class="el" href="class_snr_decider.html#a77cd186866d79c7ca1b56a5433a0f5b7">initialize()</a>, and <a class="el" href="class_snr_decider.html#a4c795f28df74941eeeab18e8dc8034a4">snrOverThreshold()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_snr_decider_8h.html">SnrDecider.h</a></li>
<li><a class="el" href="_snr_decider_8cc.html">SnrDecider.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_snr_decider.html">SnrDecider</a>      </li>
      <li class="footer">Generated on Fri Nov 18 2011 12:47:16 for INET Framework for OMNeT++/OMNEST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
