<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: SCTPAssociation Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_s_c_t_p_association.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">SCTPAssociation Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="SCTPAssociation" -->
<p><code>#include &lt;SCTPAssociation.h&gt;</code></p>

<p><a href="class_s_c_t_p_association-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html">calcBytesToSend</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_c_t_p_association_1_1congestion_control_functions.html">congestionControlFunctions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_c_t_p_association_1_1counter.html">counter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html">streamSchedulingFunctions</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation</a> (<a class="el" href="class_s_c_t_p.html">SCTP</a> *mod, int32 <a class="el" href="class_s_c_t_p_association.html#aba709e2f773752366d1c291c4fb360c8">appGateIndex</a>, int32 <a class="el" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">~SCTPAssociation</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *pathId, const bool firstPass=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ab0faa9ccd46630cfab7a2bc75fb1d52d">sendOnAllPaths</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *firstPath)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a681a359c388e9b7f38250ceb3626515e">indicationName</a> (const int32 code)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aba709e2f773752366d1c291c4fb360c8">appGateIndex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ad4d5508473d61c1cf6212bee9f683c04">listen</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a1629df451ef1ce00b8c32cb9688013b0">StartTesting</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html">SCTPAssociation::streamSchedulingFunctions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a7409afe335d1b8850a82f757172725fe">SSFunctions</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a> (cMessage *timer, const simtime_t &amp;timeout)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_association.html">SCTPAssociation</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a460894500fa0ffbff9cd62ef59db7475">initAssociation</a> (SCTPOpenCommand *openCmd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a41c4711e6ff504c121e879d6295d33f9">tsnIsDuplicate</a> (const uint32 tsn) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a4d95d83c20353ab76d47d04a240ef61a">advanceCtsna</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a99fbda3fe957b452899203d4e0f151a0">updateGapList</a> (const uint32 tsn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a6d86b97308eef3f43f93ca939a3d1a52">removeFromGapList</a> (const uint32 removedTsn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a45de5f3a74bba48af92b248edd9c9312">makeRoomForTsn</a> (const uint32 tsn, const uint32 length, const bool uBit)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck</a> (SCTPInitChunk *initchunk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a3ef5a4494cd7b59c44f44d6ed385e9de">sendCookieEcho</a> (SCTPInitAckChunk *initackchunk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ad277c3986a8173ffe41289f72765ceba">sendCookieAck</a> (const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;dest)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#afc5f06d167b937c0d1267047960bc354">sendHeartbeat</a> (const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a4693aa8d9ce24d9bf798cb7feefd1085">sendHeartbeatAck</a> (const SCTPHeartbeatChunk *heartbeatChunk, const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;src, const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;dest)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a8ceae356355ca537907cabf469c813af">sendSack</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck</a> (const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;dest)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a30c6da407b37844471cbd5c69918ae52">sendShutdownComplete</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SCTPSackChunk *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a0054d12cb552f7417b97c7e671231905">createSack</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aec407e9c2c1b4d0c604d8d65e78706e8">retransmitInit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ae9ffc855fcb6cfd50fb34a03beaa2d39">retransmitCookieEcho</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aa28d6c19ab622ed5564596c7f300aea4">retransmitShutdown</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a0c70dd4b41af917ecbaebd2850a808e0">retransmitShutdownAck</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a> (<a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpmsg, const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;dest, const bool qs=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a97c8a5a61cce6ed20af47887e551ddaf">sendToIP</a> (<a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpmsg, const bool qs=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a9db796beec52580f1356bd95e6f5fa2c">recordInPathVectors</a> (<a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *pMsg, const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;rDest)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ad26d83ea266011e34ebfbc56f7ee1e75">scheduleSack</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aed61141642771b6e3c6cc759f2e1f513">signalConnectionTimeout</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a9093fdb20d9c289d699376be9b3b80ba">scheduleTimeout</a> (cMessage *msg, const simtime_t &amp;timeout)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a0ff3903cc411815054282811157db2ba">cancelEvent</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a35a8d95a64b2977c79bf24b1353c0c8e">sendToApp</a> (cPacket *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a> (const int32 code, const int32 value=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a155c31414d0e2115eccd2fbb0a966dab">sendDataArrivedNotification</a> (uint16 sid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a64c5bcff1fa7a6f01d7e969d21b70dd5">putInDeliveryQ</a> (uint16 sid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a372875420182ac696a9cf72971ab5eab">printConnBrief</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a1780a25bb9890ee2c0510735299b1bf1">addPath</a> (const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a54a47746095fa64e6976d22bdbb8e884">getNextPath</a> (const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *oldPath) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ae066012288ac9da1c4c986d3cf5df717">getNextAddress</a> (const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *oldPath) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ab4f6847bb20adea148ebf8cf2a071871">getNextDestination</a> (<a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *<a class="el" href="structchunk.html">chunk</a>) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a47401fe3a9b36c629785c65886c19efd">bytesAllowedToSend</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path, const bool firstPass)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aee07b10bc3e9c1999e15c025d5e7db5f">pathStatusIndication</a> (const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path, const bool <a class="el" href="class_s_c_t_p_association.html#a47d58d9bc82ddd0a073a7f8c7d321872">status</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ae691d69b908141f2b120ce25f824b683">allPathsInactive</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SCTPDataChunk *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a30445facc61cdf6ef4362b02a244eb2c">transformDataChunk</a> (<a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *<a class="el" href="structchunk.html">chunk</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ae6298a23676ec2a10036aa66ed6af7b3">makeVarFromMsg</a> (SCTPDataChunk *datachunk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#af82770db14bde55545184d74ffc6ea75">streamScheduler</a> (bool peek)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ae6aa9f8b9a817bb3caddb96c68b2b9c5">initStreams</a> (uint32 inStreams, uint32 outStreams)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a38fd6b713baffb261f409aec60a3c279">numUsableStreams</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a5f8be6b52ad2164e96fd19799dfd8e01">process_QUEUE_MSGS_LIMIT</a> (const SCTPCommand *sctpCommand)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a0bce41a300c3dfdab9d2ca190d5790d3">process_QUEUE_BYTES_LIMIT</a> (const SCTPCommand *sctpCommand)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a8270ebaccc92eb00ffae041a8406b094">getOutstandingBytes</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks</a> (const uint32 tsna, <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path, simtime_t &amp;rttEstimation)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SCTPDataMsg *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a2e74a9f71f01b08567f70511f6172ac7">peekOutboundDataMsg</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#adca537bdf50592f25eff5a09e730bec3">peekAbandonedChunk</a> (const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a52141caf8994688922c957e8ddee864f">getOutboundDataChunk</a> (const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path, const int32 availableSpace, const int32 availableCwnd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SCTPDataMsg *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a5bccfb8217d1cbb22a629856f96755ad">dequeueOutboundDataMsg</a> (const int32 availableSpace, const int32 availableCwnd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#afcdda96737a59959b556a07031d9ad98">nextChunkFitsIntoPacket</a> (int32 <a class="el" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a92d70f8d0215630944fc1101378589ce">putInTransmissionQ</a> (uint32 tsn, <a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *<a class="el" href="structchunk.html">chunk</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ab385b4edb0ddac6e69aa350df14b480a">pmStartPathManagement</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a5015c5c13fbe8608b1370a85fc06806f">pmDataIsSentOn</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a0fc1eef21b0fbadd97e0b4739213d35e">pmClearPathCounter</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a02104ef95fcdab0f90cc9b03da82a675">pmRttMeasurement</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path, const simtime_t &amp;rttEstimation)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a24959906501442490b4767253bbd658c">disposeOf</a> (<a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpmsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ab70d01d19820a5a16547e439b142d5fe">tsnWasReneged</a> (<a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *<a class="el" href="structchunk.html">chunk</a>, const int type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a3458ef456e7d907d1cf712d28e7212d7">printOutstandingTsns</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a27ab7a3f0d7e82a5b48f47e39e53dd23">initCCParameters</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a7235e0a24b1d8a8cc70eedda6adb081f">updateFastRecoveryStatus</a> (const uint32 lastTsnAck)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ade798497e9cb468bf8f4759e9b8e9840">cwndUpdateAfterSack</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a9a5de305f7873c84ef644dce513964cd">cwndUpdateAfterCwndTimeout</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a53665e3333a5e7b2aae79a65b9a1482b">cwndUpdateAfterRtxTimeout</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#af5c86c86388313edeeff8434266a85cd">cwndUpdateMaxBurst</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a356510e0d2cfb8c6770c72f29634cb93">cwndUpdateBytesAcked</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path, const uint32 ackedBytes, const bool ctsnaAdvanced)</td></tr>
<tr><td colspan="2"><div class="groupHeader">FSM transitions: analysing events and executing state transitions</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a946f737e0ae27932aba2899aa24d2660">preanalyseAppCommandEvent</a> (int32 commandCode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a> (const <a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered</a> (int32 <a class="el" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Processing app commands. Invoked from processAppCommand().</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE</a> (<a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;event, SCTPCommand *sctpCommand, cPacket *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a5cc7381e91d34e5c13a4b97eb02f9b7e">process_OPEN_PASSIVE</a> (<a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;event, SCTPCommand *sctpCommand, cPacket *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND</a> (<a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;event, SCTPCommand *sctpCommand, cPacket *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a6c53aeb97e7132e5f09869f886e5807e">process_CLOSE</a> (<a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a0604d2735afd938650aa540e1ed7b9d1">process_ABORT</a> (<a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aa60a2e245739ecf7a4085a3e240a3730">process_STATUS</a> (<a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;event, SCTPCommand *sctpCommand, cPacket *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ae086afec043034fc936b270b71c1e6f4">process_RECEIVE_REQUEST</a> (<a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;event, SCTPCommand *sctpCommand)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a1f578c7e75df4066f4aaf34b8f195f6f">process_PRIMARY</a> (<a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;event, SCTPCommand *sctpCommand)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Processing SCTP message arrivals. Invoked from processSCTPMessage().</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message</a> (<a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpseg, const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;src, const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;dest)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived</a> (SCTPInitChunk *initChunk, int32 sport, int32 dport)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived</a> (SCTPInitAckChunk *initAckChunk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a0dc1cc0159627680652582a01a4417f2">processCookieEchoArrived</a> (SCTPCookieEchoChunk *cookieEcho, <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a6d4b0efb4884a96e406c42797456d241">processCookieAckArrived</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived</a> (SCTPDataChunk *dataChunk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived</a> (SCTPSackChunk *sackChunk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a1f4d814724e79e184655050a48ee1c25">processHeartbeatAckArrived</a> (SCTPHeartbeatAckChunk *heartbeatack, <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Processing timeouts. Invoked from processTimer().</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#acb89ca4bcc84239541171327977762e9">process_TIMEOUT_HEARTBEAT</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ac2468daebc456147e6568b99650165ca">process_TIMEOUT_HEARTBEAT_INTERVAL</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path, bool force)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ae94a9d41597adc5806db8c60f27ab45d">process_TIMEOUT_INIT_REXMIT</a> (<a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a7fd942b2be59aa1fa843cd5a7b710731">process_TIMEOUT_PROBING</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a6866e326d923a8915cdbb3d80802c527">process_TIMEOUT_SHUTDOWN</a> (<a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a3cb6d23f3c34f789d2b1c5945d0d0a76">updateCounters</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td colspan="2"><h2><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a0a8dc40e502998018163df5cbe68d837">printSegmentBrief</a> (<a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpmsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a63a1d0b48db0d4d129635336591f37fc">eventName</a> (const int32 event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a2e63afca29fd3f5d2dedb4f05fb1015f">tsnLt</a> (const uint32 tsn1, const uint32 tsn2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a74cd3a867ee886b15439c1ca53bbf57d">tsnLe</a> (const uint32 tsn1, const uint32 tsn2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a7bb25b61e8c968e460210fd7794037b3">tsnGe</a> (const uint32 tsn1, const uint32 tsn2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a2aee269f079e6749ddc839137c157043">tsnGt</a> (const uint32 tsn1, const uint32 tsn2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a5d5d64e51be4d13ccb13286b5a6ab7a4">tsnBetween</a> (const uint32 tsn1, const uint32 midtsn, const uint32 tsn2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a04381d198b1e78fb563d5e460c40c6a5">ssnGt</a> (const uint16 ssn1, const uint16 ssn2)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_s_c_t_p_association_8h.html#a83ecc618606af11f87a228a6ab74049b">AddressVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#af44c3fdaaff9c48fdbb45aac6d6ad082">localAddressList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_s_c_t_p_association_8h.html#a83ecc618606af11f87a228a6ab74049b">AddressVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a746e4867059fcd11838ab601a6f5fea1">remoteAddressList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aa66d26fc71717ca6158c03a212cc4071">numberOfRemoteAddresses</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a47d58d9bc82ddd0a073a7f8c7d321872">status</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#adf21f02ef10ae8d3d032337332b5f50f">initTsn</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a5ca011cb3142dfcd423f4083855a7460">initPeerTsn</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ac5b54b2f8fbba401964d30c71e25118f">sackFrequency</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a29f900c7ca380c1671bb957109fc338b">sackPeriod</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s_c_t_p_association_1_1congestion_control_functions.html">CCFunctions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a3d6c3997389c261a61cc57543111973b">ccModule</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a28d421b793ab5db3b09737c0f9f4b905">advRwnd</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a904881907985d7c23d7dc3cf630834aa">cumTsnAck</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a1f249bde274ec0e4949023a2a3a3e4e7">sendQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a136b47892a6e405c494f055dc50eaec6">numGapBlocks</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_state_variables.html">SCTPStateVariables</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html">BytesToBeSent</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p.html">SCTP</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cFSM *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_association.html#a3125d2965827dcc6d069b57afc6aae1f">SCTPPathMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s_c_t_p_association_1_1counter.html">QueueCounter</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_queue.html">SCTPQueue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_queue.html">SCTPQueue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_association.html#a3aa0e9ecd0c7903f8cd31c534fc275a3">SCTPSendStreamMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_association.html#a85b1fe666641fe7bacf93bc9a1e7c396">SCTPReceiveStreamMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a80374427a755802cd7687c7a77b26e9c">receiveStreams</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_algorithm.html">SCTPAlgorithm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html">SSFunctions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a9988effc78d17db9b32a8d6a976c2288">ssFunctions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a4b6cafcaa2a8ec5379637f837ca5550a">ssModule</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>, <br class="typebreak"/>
<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a3125d2965827dcc6d069b57afc6aae1f">SCTPPathMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>, <br class="typebreak"/>
uint32 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ab91d1355239405c85b553695f9e95677">CounterMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="struct_s_c_t_p_association_1_1counter.html">SCTPAssociation::counter</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a5350d5de77e6821ebc5c5d651194cc46">QueueCounter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html">SCTPAssociation::calcBytesToSend</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a21751b802c53fc41b3ccf505db26f7b4">BytesToBeSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="struct_s_c_t_p_association_1_1congestion_control_functions.html">SCTPAssociation::congestionControlFunctions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a6ee72cef0c1d97195008e3deb5ba16b1">CCFunctions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; uint32, <br class="typebreak"/>
<a class="el" href="class_s_c_t_p_send_stream.html">SCTPSendStream</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a3aa0e9ecd0c7903f8cd31c534fc275a3">SCTPSendStreamMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; uint32, <br class="typebreak"/>
<a class="el" href="class_s_c_t_p_receive_stream.html">SCTPReceiveStream</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a85b1fe666641fe7bacf93bc9a1e7c396">SCTPReceiveStreamMap</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a164799c396a6e3b931854cc4af513ff4">makeDataVarFromDataMsg</a> (SCTPDataMsg *datMsg, <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a8b00fc2f2bcb1cb805a62316a15db984">choosePathForRetransmission</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a3525db7c8ed37b6e45ae4a65e9af8968">timeForSack</a> (bool &amp;sackOnly, bool &amp;sackWithData)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a753567499c04f5e4b55cb92790e4c96a">recordCwndUpdate</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a297f87caf9d5e3b6cf596a5e44381061">handleChunkReportedAsAcked</a> (uint32 &amp;highestNewAck, simtime_t &amp;rttEstimation, <a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *myChunk, <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *sackPath)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a01a9c50a325baf1ebf3d25972a776393">handleChunkReportedAsMissing</a> (const SCTPSackChunk *sackChunk, const uint32 highestNewAck, <a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *myChunk, const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *sackPath)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aded774353d79ba7bdf53651ddc178609">moveChunkToOtherPath</a> (<a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *<a class="el" href="structchunk.html">chunk</a>, <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *newPath)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a2178e3130838480b58adc77639d7862c">decreaseOutstandingBytes</a> (<a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *<a class="el" href="structchunk.html">chunk</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aaf93ca861bf56525302bb2b661bdd4df">increaseOutstandingBytes</a> (<a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *<a class="el" href="structchunk.html">chunk</a>, <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#acfd176cf104a2ded703649339cf4a9bb">calculateBytesToSendOnPath</a> (const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *pathVar)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a3f5a43f961e2cc691da4546762e28498">storePacket</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *pathVar, <a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpMsg, const uint16 chunksAdded, const uint16 dataChunksAdded, const uint32 packetBytes, const bool authAdded)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ac39737ee344fd4a8475b7efee8c47c31">loadPacket</a> (<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *pathVar, <a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> **sctpMsg, uint16 *chunksAdded, uint16 *dataChunksAdded, uint32 *packetBytes, bool *authAdded)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ac9f7ef76b3f23b83b5c4c261bf4df4ae">ackChunk</a> (<a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *<a class="el" href="structchunk.html">chunk</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a7970990bafb546026b91ab011eb956af">unackChunk</a> (<a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *<a class="el" href="structchunk.html">chunk</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#abab3867be074dea5acf98169c67efc78">chunkHasBeenAcked</a> (const <a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *<a class="el" href="structchunk.html">chunk</a>) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ae416cce3f20124c0f320c3deb744caab">chunkHasBeenAcked</a> (const uint32 tsn) const </td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ad11e2cf06b73d0b6c92bf90d9052f984">SCTP</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a940cc2bde58bd842d11b28b3d09130dc">SCTPPathVariables</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a0874a47246477bd7cf4029a73666bd3c">getFsmState</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_state_variables.html">SCTPStateVariables</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a498e92afc35c39fd74f61408d08443ba">getState</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_queue.html">SCTPQueue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a12c000086b06013248658c78a502d90a">getTransmissionQueue</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_queue.html">SCTPQueue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a381530dc6d6a89ddc864791026b1af59">getRetransmissionQueue</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_algorithm.html">SCTPAlgorithm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a2f8247f14c80f45cbfa9e269dbf52545">getSctpAlgorithm</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p.html">SCTP</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#adacca069df6aab5b3a093e0575204bf8">getSctpMain</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cFSM *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a120222f3dccce018fec459e9374d1ee3">getFsm</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a611d859e2eb953ea8d43048c13916aca">getInitTimer</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a6029bb9f35f1d6b0779d6811ce1ed0cb">getShutdownTimer</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#af51bc7f5f485cce416dccb77ae694765">getSackTimer</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a1460f83f7b50fee1f47fe7b4bf6744be">processSCTPMessage</a> (<a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpmsg, const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;srcAddr, const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;destAddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand</a> (cPacket *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a48840034dca5052abf481f6a5753f923">removePath</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a2f3fe366971313c0f290ded66a233059">removePath</a> (const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#aea681826347f6fc208c91c5c0f5227bc">deleteStreams</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a> (cMessage *timer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a1e5b14c2f164752dcf7b6a16f654be9d">stopTimers</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a> (const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;pathId) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a120c72df6657d2ef5038d61881ff11c4">printSctpPathMap</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a> (const int32 <a class="el" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_c_t_p_association.html#ac82674b30b7b244de6a54e79d967a1d8">chunkToInt</a> (const char *type)</td></tr>
</table>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a21751b802c53fc41b3ccf505db26f7b4"></a><!-- doxytag: member="SCTPAssociation::BytesToBeSent" ref="a21751b802c53fc41b3ccf505db26f7b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html">SCTPAssociation::calcBytesToSend</a>  <a class="el" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html">SCTPAssociation::BytesToBeSent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6ee72cef0c1d97195008e3deb5ba16b1"></a><!-- doxytag: member="SCTPAssociation::CCFunctions" ref="a6ee72cef0c1d97195008e3deb5ba16b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_s_c_t_p_association_1_1congestion_control_functions.html">SCTPAssociation::congestionControlFunctions</a>  <a class="el" href="struct_s_c_t_p_association_1_1congestion_control_functions.html">SCTPAssociation::CCFunctions</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab91d1355239405c85b553695f9e95677"></a><!-- doxytag: member="SCTPAssociation::CounterMap" ref="ab91d1355239405c85b553695f9e95677" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>, uint32&gt; <a class="el" href="class_s_c_t_p_association.html#ab91d1355239405c85b553695f9e95677">SCTPAssociation::CounterMap</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5350d5de77e6821ebc5c5d651194cc46"></a><!-- doxytag: member="SCTPAssociation::QueueCounter" ref="a5350d5de77e6821ebc5c5d651194cc46" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_s_c_t_p_association_1_1counter.html">SCTPAssociation::counter</a>  <a class="el" href="struct_s_c_t_p_association_1_1counter.html">SCTPAssociation::QueueCounter</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3125d2965827dcc6d069b57afc6aae1f"></a><!-- doxytag: member="SCTPAssociation::SCTPPathMap" ref="a3125d2965827dcc6d069b57afc6aae1f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>,<a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>*&gt; <a class="el" href="class_s_c_t_p_association.html#a3125d2965827dcc6d069b57afc6aae1f">SCTPAssociation::SCTPPathMap</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a85b1fe666641fe7bacf93bc9a1e7c396"></a><!-- doxytag: member="SCTPAssociation::SCTPReceiveStreamMap" ref="a85b1fe666641fe7bacf93bc9a1e7c396" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;uint32, <a class="el" href="class_s_c_t_p_receive_stream.html">SCTPReceiveStream</a>*&gt; <a class="el" href="class_s_c_t_p_association.html#a85b1fe666641fe7bacf93bc9a1e7c396">SCTPAssociation::SCTPReceiveStreamMap</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3aa0e9ecd0c7903f8cd31c534fc275a3"></a><!-- doxytag: member="SCTPAssociation::SCTPSendStreamMap" ref="a3aa0e9ecd0c7903f8cd31c534fc275a3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;uint32, <a class="el" href="class_s_c_t_p_send_stream.html">SCTPSendStream</a>*&gt; <a class="el" href="class_s_c_t_p_association.html#a3aa0e9ecd0c7903f8cd31c534fc275a3">SCTPAssociation::SCTPSendStreamMap</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7409afe335d1b8850a82f757172725fe"></a><!-- doxytag: member="SCTPAssociation::SSFunctions" ref="a7409afe335d1b8850a82f757172725fe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html">SCTPAssociation::streamSchedulingFunctions</a>  <a class="el" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html">SCTPAssociation::SSFunctions</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad1984a2e17a73629a51334904745086f"></a><!-- doxytag: member="SCTPAssociation::SCTPAssociation" ref="ad1984a2e17a73629a51334904745086f" args="(SCTP *mod, int32 appGateIndex, int32 assocId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SCTPAssociation::SCTPAssociation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p.html">SCTP</a> *&#160;</td>
          <td class="paramname"><em>mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>appGateIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>assocId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructor. </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ====== Initialize variables ===========================================</span>
    <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>                            = _module;
    <a class="code" href="class_s_c_t_p_association.html#aba709e2f773752366d1c291c4fb360c8">appGateIndex</a>                        = _appGateIndex;
    <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>                             = _assocId;
    <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>                           = 0;
    <a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>                          = 0;
    <a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>                           = 0;
    <a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>                            = 0;
    <a class="code" href="class_s_c_t_p_association.html#aa66d26fc71717ca6158c03a212cc4071">numberOfRemoteAddresses</a>             = 0;
    <a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a>                      = <a class="code" href="_s_c_t_p_association_8h.html#a34c7c7c047d941065871d33ce7f97bc3">SCTP_DEFAULT_INBOUND_STREAMS</a>;
    <a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a>                     = <a class="code" href="_s_c_t_p_association_8h.html#af09cc91ff86473911040f475082ff0de">SCTP_DEFAULT_OUTBOUND_STREAMS</a>;
    <span class="comment">// queues and algorithm will be created on active or passive open</span>
    <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>                       = NULL;
    <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>                     = NULL;
    <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>                       = NULL;
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>                               = NULL;
    <a class="code" href="class_s_c_t_p_association.html#a29f900c7ca380c1671bb957109fc338b">sackPeriod</a>                          = <a class="code" href="_s_c_t_p_association_8h.html#a5f8211f50dea40fa08f410e3631eb1fe">SACK_DELAY</a>;
<span class="comment">/*</span>
<span class="comment">    totalCwndAdjustmentTime         = simTime();</span>
<span class="comment">    lastTotalSSthresh                   = ~0;</span>
<span class="comment">    lastTotalCwnd                       = ~0;*/</span>

    <a class="code" href="class_s_c_t_p_association.html#a904881907985d7c23d7dc3cf630834aa">cumTsnAck</a>                           = NULL;
    <a class="code" href="class_s_c_t_p_association.html#a1f249bde274ec0e4949023a2a3a3e4e7">sendQueue</a>                           = NULL;
    <a class="code" href="class_s_c_t_p_association.html#a136b47892a6e405c494f055dc50eaec6">numGapBlocks</a>                        = NULL;

    <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a> = 0;
    <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aab189302bf40c67f2eec631bcd7de51f">bookedSumSendStreams</a> = 0;
    <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aa860967a47451b6ea090f0c3b81156de">roomSumRcvStreams</a>      = 0;
    <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a>                         = <span class="keyword">false</span>;
    <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a>                        = <span class="keyword">false</span>;
    <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a>                   = 0;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationBase::SCTPAssociation(): new assocId=&quot;</span>
              &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a> &lt;&lt; endl;

    <span class="comment">// ====== FSM ============================================================</span>
    <span class="keywordtype">char</span> fsmName[64];
    snprintf(fsmName, <span class="keyword">sizeof</span>(fsmName), <span class="stringliteral">&quot;fsm-%d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a> = <span class="keyword">new</span> cFSM();
    <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;setName(fsmName);
    <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;setState(<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>);


    <span class="comment">// ====== Path Info ======================================================</span>
    SCTPPathInfo* pinfo = <span class="keyword">new</span> SCTPPathInfo(<span class="stringliteral">&quot;pathInfo&quot;</span>);
    pinfo-&gt;setRemoteAddress(<a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>(<span class="stringliteral">&quot;0.0.0.0&quot;</span>));

    <span class="comment">// ====== Timers =========================================================</span>
    <span class="keywordtype">char</span> timerName[128];
    snprintf(timerName, <span class="keyword">sizeof</span>(timerName), <span class="stringliteral">&quot;T1_INIT of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    <a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a> = <span class="keyword">new</span> cMessage(timerName);
    snprintf(timerName, <span class="keyword">sizeof</span>(timerName), <span class="stringliteral">&quot;T2_SHUTDOWN of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    <a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a> = <span class="keyword">new</span> cMessage(timerName);
    snprintf(timerName, <span class="keyword">sizeof</span>(timerName), <span class="stringliteral">&quot;T5_SHUTDOWN_GUARD of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    <a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a> = <span class="keyword">new</span> cMessage(timerName);
    snprintf(timerName, <span class="keyword">sizeof</span>(timerName), <span class="stringliteral">&quot;SACK_TIMER of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    <a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a> = <span class="keyword">new</span> cMessage(timerName);

    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a35089977465533256142ee442021b18d">testTimeout</a> &gt; 0){
        <a class="code" href="class_s_c_t_p_association.html#a1629df451ef1ce00b8c32cb9688013b0">StartTesting</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;StartTesting&quot;</span>);
        <a class="code" href="class_s_c_t_p_association.html#a1629df451ef1ce00b8c32cb9688013b0">StartTesting</a>-&gt;setContextPointer(<span class="keyword">this</span>);
        <a class="code" href="class_s_c_t_p_association.html#a1629df451ef1ce00b8c32cb9688013b0">StartTesting</a>-&gt;setControlInfo(pinfo-&gt;dup());
        <a class="code" href="class_s_c_t_p_association.html#a9093fdb20d9c289d699376be9b3b80ba">scheduleTimeout</a>(<a class="code" href="class_s_c_t_p_association.html#a1629df451ef1ce00b8c32cb9688013b0">StartTesting</a>, <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a35089977465533256142ee442021b18d">testTimeout</a>);
    }
    <a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>-&gt;setContextPointer(<span class="keyword">this</span>);
    <a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>-&gt;setContextPointer(<span class="keyword">this</span>);
    <a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>-&gt;setContextPointer(<span class="keyword">this</span>);
    <a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>-&gt;setContextPointer(<span class="keyword">this</span>);

    <a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>-&gt;setControlInfo(pinfo);
    <a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>-&gt;setControlInfo(pinfo-&gt;dup());
    <a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>-&gt;setControlInfo(pinfo-&gt;dup());
    <a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>-&gt;setControlInfo(pinfo-&gt;dup());

    <span class="comment">// ====== Output vectors =================================================</span>
    <span class="keywordtype">char</span> vectorName[128];
    snprintf(vectorName, <span class="keyword">sizeof</span>(vectorName), <span class="stringliteral">&quot;Advertised Receiver Window %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    <a class="code" href="class_s_c_t_p_association.html#a28d421b793ab5db3b09737c0f9f4b905">advRwnd</a> = <span class="keyword">new</span> cOutVector(vectorName);

    <span class="comment">// ====== Stream scheduling ==============================================</span>
    <a class="code" href="class_s_c_t_p_association.html#a4b6cafcaa2a8ec5379637f837ca5550a">ssModule</a> = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;ssModule&quot;</span>);
    <span class="keywordflow">switch</span> (<a class="code" href="class_s_c_t_p_association.html#a4b6cafcaa2a8ec5379637f837ca5550a">ssModule</a>)
    {
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a75eb0a6ff44280b6261fbc9a3b0cee9ca9e805af736d9be20caf33f5ec0dc1d47">ROUND_ROBIN</a>:
            <a class="code" href="class_s_c_t_p_association.html#a9988effc78d17db9b32a8d6a976c2288">ssFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html#a5796699025095f8e6c57aaff4b5d3538">ssInitStreams</a>    = &amp;<a class="code" href="class_s_c_t_p_association.html#ae6aa9f8b9a817bb3caddb96c68b2b9c5">SCTPAssociation::initStreams</a>;
            <a class="code" href="class_s_c_t_p_association.html#a9988effc78d17db9b32a8d6a976c2288">ssFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html#ad1b6db0c49758dcf9cb642afec4ea4a7">ssGetNextSid</a>     = &amp;<a class="code" href="class_s_c_t_p_association.html#af82770db14bde55545184d74ffc6ea75">SCTPAssociation::streamScheduler</a>;
            <a class="code" href="class_s_c_t_p_association.html#a9988effc78d17db9b32a8d6a976c2288">ssFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html#a4a2658a2c708281402b52571029ec7f7">ssUsableStreams</a>  = &amp;<a class="code" href="class_s_c_t_p_association.html#a38fd6b713baffb261f409aec60a3c279">SCTPAssociation::numUsableStreams</a>;
            <span class="keywordflow">break</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1529624d1f17663c5729ec2fe5fb3a28"></a><!-- doxytag: member="SCTPAssociation::~SCTPAssociation" ref="a1529624d1f17663c5729ec2fe5fb3a28" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SCTPAssociation::~SCTPAssociation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destructor. </p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Destructor SCTPAssociation&quot;</span> &lt;&lt; endl;

    <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>;
    <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>;
    <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>;
    <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>;

    <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#a28d421b793ab5db3b09737c0f9f4b905">advRwnd</a>;
    <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#a904881907985d7c23d7dc3cf630834aa">cumTsnAck</a>;
    <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#a136b47892a6e405c494f055dc50eaec6">numGapBlocks</a>;
    <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#a1f249bde274ec0e4949023a2a3a3e4e7">sendQueue</a>;


    <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>;
    <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>;
    <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ac9f7ef76b3f23b83b5c4c261bf4df4ae"></a><!-- doxytag: member="SCTPAssociation::ackChunk" ref="ac9f7ef76b3f23b83b5c4c261bf4df4ae" args="(SCTPDataVariables *chunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::ackChunk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td>
          <td class="paramname"><em>chunk</em></td><td>)</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks()</a>, and <a class="el" href="class_s_c_t_p_association.html#a297f87caf9d5e3b6cf596a5e44381061">handleChunkReportedAsAcked()</a>.</p>
<div class="fragment"><pre class="fragment">                                                       {
            chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a6c09db8c77fdfceda4b5386f14093b8e">hasBeenAcked</a> = <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a1780a25bb9890ee2c0510735299b1bf1"></a><!-- doxytag: member="SCTPAssociation::addPath" ref="a1780a25bb9890ee2c0510735299b1bf1" args="(const IPvXAddress &amp;addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::addPath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;Add Path remote address: &quot;</span>&lt;&lt;addr&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    SCTPPathMap::iterator i = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.find(addr);
    <span class="keywordflow">if</span> (i==<a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end())
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;__LINE__&lt;&lt;<span class="stringliteral">&quot; get new path for &quot;</span>&lt;&lt;addr&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
        <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_association.html#a940cc2bde58bd842d11b28b3d09130dc">SCTPPathVariables</a>(addr, <span class="keyword">this</span>);
        <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>[addr] = path;
        <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>[addr]    = 0;
        <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>[addr] = 0;
        <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a767e2849d053dd45d294d8678b8daed9">roomRetransQ</a>[addr] = 0;
    }
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;path added\n&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4d95d83c20353ab76d47d04a240ef61a"></a><!-- doxytag: member="SCTPAssociation::advanceCtsna" ref="a4d95d83c20353ab76d47d04a240ef61a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::advanceCtsna </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    int32 listLength, counter;

    ev&lt;&lt;<span class="stringliteral">&quot;Entering advanceCtsna(ctsna now ==&quot;</span>&lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;;

    listLength = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>;

    <span class="comment">/* if there are no fragments, we cannot advance the ctsna */</span>
    <span class="keywordflow">if</span> (listLength == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    counter = 0;

    <span class="keywordflow">while</span>(counter &lt; listLength)
    {
        <span class="comment">/* if we take out a fragment here, we need to modify either counter or list_length */</span>

        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a> + 1 == <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[0])
        {
            <span class="comment">/* BINGO ! */</span>
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[0];
            <span class="comment">/* we can take out a maximum of list_length fragments */</span>
            counter++;
            <span class="keywordflow">for</span> (uint32 i=1; i&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>; i++)
            {
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i-1] = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i];
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i-1] = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i];
            }

        }
        <span class="keywordflow">else</span>
        {
            ev&lt;&lt;<span class="stringliteral">&quot;Entering advanceCtsna(when leaving: ctsna==&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }

    }    <span class="comment">/* end while */</span>

    ev&lt;&lt;<span class="stringliteral">&quot;Entering advanceCtsna(when leaving: ctsna==&quot;</span>&lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae691d69b908141f2b120ce25f824b683"></a><!-- doxytag: member="SCTPAssociation::allPathsInactive" ref="ae691d69b908141f2b120ce25f824b683" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::allPathsInactive </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#acb89ca4bcc84239541171327977762e9">process_TIMEOUT_HEARTBEAT()</a>, <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>, and <a class="el" href="class_s_c_t_p_association.html#a3cb6d23f3c34f789d2b1c5945d0d0a76">updateCounters()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span>(SCTPPathMap::const_iterator it = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin(); it != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); it++) {
        <span class="keywordflow">if</span> (it-&gt;second-&gt;activePath) {
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a47401fe3a9b36c629785c65886c19efd"></a><!-- doxytag: member="SCTPAssociation::bytesAllowedToSend" ref="a47401fe3a9b36c629785c65886c19efd" args="(SCTPPathVariables *path, const bool firstPass)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::bytesAllowedToSend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>firstPass</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    assert(path != NULL);

    <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a>         = <span class="keyword">false</span>;
    <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a>        = <span class="keyword">false</span>;
    <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a> = 0;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesAllowedToSend(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;):&quot;</span>
              &lt;&lt; <span class="stringliteral">&quot; osb=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &lt;&lt; endl;

    <span class="comment">// ====== First transmission =============================================</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a6bd6ae8cce21386df977220128383b02">firstDataSent</a>) {
        <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a> = <span class="keyword">true</span>;
    }

    <span class="comment">// ====== Transmission allowed by peer&#39;s receiver window? ================</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a56e6edeafb32e19e42da2889d4a16202">peerWindowFull</a>)
    {
        <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> == 0) {
            <span class="comment">// Zero Window Probing</span>
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesAllowedToSend(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;): zeroWindowProbing&quot;</span> &lt;&lt; endl;
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0f8385151a29c83819ff5c1756ab359b">zeroWindowProbing</a> = <span class="keyword">true</span>;
            <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a> = <span class="keyword">true</span>;
        }
    }

    <span class="comment">// ====== Retransmissions ================================================</span>
    <span class="keywordflow">else</span> {
        CounterMap::const_iterator it = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>.find(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesAllowedToSend(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;): bytes in transQ=&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;
        <span class="keywordflow">if</span> (it-&gt;second &gt; 0) {
            <span class="keyword">const</span> int32 allowance = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> - path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a>;
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesAllowedToSend(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;): cwnd-osb=&quot;</span> &lt;&lt; allowance &lt;&lt; endl;
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a> &lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>) {
                <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a>;
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesAllowedToSend(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;): rwnd&lt;pmtu&quot;</span> &lt;&lt; endl;
                <span class="keywordflow">return</span>;
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (allowance &gt; 0) {
                CounterMap::const_iterator bit = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>.find(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
                <span class="keywordflow">if</span> (bit-&gt;second &gt; (uint32)allowance) {
                    <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a> = allowance;
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesAllowedToSend(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;): cwnd does not allow all RTX&quot;</span> &lt;&lt; endl;
                    <span class="keywordflow">return</span>;  <span class="comment">// More bytes available than allowed -&gt; just return what is allowed.</span>
                }
                <span class="keywordflow">else</span> {
                    <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a> = bit-&gt;second;
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesAllowedToSend(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;): cwnd allows more than those &quot;</span>
                                 &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a> &lt;&lt; <span class="stringliteral">&quot; bytes for retransmission&quot;</span> &lt;&lt; endl;
                }
            }
            <span class="keywordflow">else</span> {  <span class="comment">// You may retransmit one packet</span>
                <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a> = <span class="keyword">true</span>;
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesAllowedToSend(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;): allowance&lt;=0: retransmit one packet&quot;</span> &lt;&lt; endl;
            }
        }

        <span class="comment">// ====== New transmissions ===========================================</span>
        <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a> &amp;&amp; !<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a>) {
            <span class="keywordflow">if</span> ((path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> &lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>) &amp;&amp;
                 (!<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a56e6edeafb32e19e42da2889d4a16202">peerWindowFull</a>)) {
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesAllowedToSend(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;):&quot;</span>
                          &lt;&lt; <span class="stringliteral">&quot; bookedSumSendStreams=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aab189302bf40c67f2eec631bcd7de51f">bookedSumSendStreams</a>
                          &lt;&lt; <span class="stringliteral">&quot; bytes.bytesToSend=&quot;</span>      &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a> &lt;&lt; endl;
                <span class="keyword">const</span> int32 allowance = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> - path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> - <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a>;
                <span class="keywordflow">if</span> (allowance &gt; 0) {
                    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aab189302bf40c67f2eec631bcd7de51f">bookedSumSendStreams</a> &gt; (uint32)allowance) {
                        <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a> = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> - path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a>;
                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesAllowedToSend(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;): bytesToSend are limited by cwnd: &quot;</span>
                                  &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a> &lt;&lt; endl;
                    }
                    <span class="keywordflow">else</span> {
                        <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a> += <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aab189302bf40c67f2eec631bcd7de51f">bookedSumSendStreams</a>;
                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesAllowedToSend(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;): send all stored bytes: &quot;</span>
                                  &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a> &lt;&lt; endl;
                    }
                }
            }
        }
    }

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesAllowedToSend(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;):&quot;</span>
              &lt;&lt; <span class="stringliteral">&quot; osb=&quot;</span>  &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a>
              &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>
              &lt;&lt; <span class="stringliteral">&quot; bytes.packet=&quot;</span> &lt;&lt; (<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a> ? <span class="stringliteral">&quot;YES!&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>)
              &lt;&lt; <span class="stringliteral">&quot; bytes.chunk=&quot;</span>     &lt;&lt; (<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a>    ? <span class="stringliteral">&quot;YES!&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>)
              &lt;&lt; <span class="stringliteral">&quot; bytes.bytesToSend=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a> &lt;&lt; endl;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acfd176cf104a2ded703649339cf4a9bb"></a><!-- doxytag: member="SCTPAssociation::calculateBytesToSendOnPath" ref="acfd176cf104a2ded703649339cf4a9bb" args="(const SCTPPathVariables *pathVar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 SCTPAssociation::calculateBytesToSendOnPath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>pathVar</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    int32                    bytesToSend;
    <span class="keyword">const</span> SCTPDataMsg* datMsg = <a class="code" href="class_s_c_t_p_association.html#a2e74a9f71f01b08567f70511f6172ac7">peekOutboundDataMsg</a>();
    <span class="keywordflow">if</span>(datMsg != NULL) {
        <span class="keyword">const</span> uint32 ums = datMsg-&gt;getBooksize();        <span class="comment">// Get user message size</span>
            <span class="keyword">const</span> uint32 num = (uint32)floor((<span class="keywordtype">double</span>)(pathVar-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> - 32) / (ums + <a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>));
            <span class="keywordflow">if</span> (num * ums &gt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a>) {
                <span class="comment">// Receiver cannot handle data yet</span>
                bytesToSend = 0;
            }
            <span class="keywordflow">else</span> {
                <span class="comment">// Receiver will accept data</span>
                bytesToSend = num * ums;
            }
    }
    <span class="keywordflow">else</span> {
        bytesToSend = 0;
    }
    <span class="keywordflow">return</span>(bytesToSend);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0ff3903cc411815054282811157db2ba"></a><!-- doxytag: member="SCTPAssociation::cancelEvent" ref="a0ff3903cc411815054282811157db2ba" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* SCTPAssociation::cancelEvent </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: cancel a timer </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer()</a>.</p>
<div class="fragment"><pre class="fragment">                                                    {
            <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;cancelEvent(msg);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a8b00fc2f2bcb1cb805a62316a15db984"></a><!-- doxytag: member="SCTPAssociation::choosePathForRetransmission" ref="a8b00fc2f2bcb1cb805a62316a15db984" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> * SCTPAssociation::choosePathForRetransmission </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32               <a class="code" href="_s_c_t_p_association_8h.html#afdb84bd44c7cbd3fc9cbe1e3bf07d948">max</a>    = 0;
    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* temp = NULL;

    <span class="keywordflow">for</span> (SCTPPathMap::iterator iterator = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin(); iterator != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); ++iterator) {
        <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>*          path = iterator-&gt;second;
        CounterMap::const_iterator tq     = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>.find(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
        <span class="keywordflow">if</span> ((tq != <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>.end()) &amp;&amp; (tq-&gt;second &gt; max)) {
            max = tq-&gt;second;
            temp = path;
        }
    }
    <span class="keywordflow">return</span> temp;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abab3867be074dea5acf98169c67efc78"></a><!-- doxytag: member="SCTPAssociation::chunkHasBeenAcked" ref="abab3867be074dea5acf98169c67efc78" args="(const SCTPDataVariables *chunk) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::chunkHasBeenAcked </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td>
          <td class="paramname"><em>chunk</em></td><td>)</td>
          <td> const<code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ade798497e9cb468bf8f4759e9b8e9840">cwndUpdateAfterSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks()</a>, <a class="el" href="class_s_c_t_p_association.html#a52141caf8994688922c957e8ddee864f">getOutboundDataChunk()</a>, <a class="el" href="class_s_c_t_p_association.html#a01a9c50a325baf1ebf3d25972a776393">handleChunkReportedAsMissing()</a>, <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>, <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>, and <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                            {
            <span class="keywordflow">return</span>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a6c09db8c77fdfceda4b5386f14093b8e">hasBeenAcked</a>);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ae416cce3f20124c0f320c3deb744caab"></a><!-- doxytag: member="SCTPAssociation::chunkHasBeenAcked" ref="ae416cce3f20124c0f320c3deb744caab" args="(const uint32 tsn) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::chunkHasBeenAcked </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn</em></td><td>)</td>
          <td> const<code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                              {
            <span class="keyword">const</span> <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* <a class="code" href="structchunk.html">chunk</a> = <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#a2834802fcd42c759e97cd1e450ad1d06">getChunk</a>(tsn);
            <span class="keywordflow">if</span>(chunk) {
                <span class="keywordflow">return</span>(<a class="code" href="class_s_c_t_p_association.html#abab3867be074dea5acf98169c67efc78">chunkHasBeenAcked</a>(chunk));
            }
            <span class="keywordflow">return</span>(<span class="keyword">false</span>);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ac82674b30b7b244de6a54e79d967a1d8"></a><!-- doxytag: member="SCTPAssociation::chunkToInt" ref="ac82674b30b7b244de6a54e79d967a1d8" args="(const char *type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 SCTPAssociation::chunkToInt </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;DATA&quot;</span>)==0) <span class="keywordflow">return</span> 0;
    <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;INIT&quot;</span>)==0) <span class="keywordflow">return</span> 1;
    <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;INIT_ACK&quot;</span>)==0) <span class="keywordflow">return</span> 2;
    <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;SACK&quot;</span>)==0) <span class="keywordflow">return</span> 3;
    <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;HEARTBEAT&quot;</span>)==0) <span class="keywordflow">return</span> 4;
    <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;HEARTBEAT_ACK&quot;</span>)==0) <span class="keywordflow">return</span> 5;
    <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;ABORT&quot;</span>)==0) <span class="keywordflow">return</span> 6;
    <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;SHUTDOWN&quot;</span>)==0) <span class="keywordflow">return</span> 7;
    <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;SHUTDOWN_ACK&quot;</span>)==0) <span class="keywordflow">return</span> 8;
    <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;ERRORTYPE&quot;</span>)==0) <span class="keywordflow">return</span> 9;
    <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;COOKIE_ECHO&quot;</span>)==0) <span class="keywordflow">return</span> 10;
    <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;COOKIE_ACK&quot;</span>)==0) <span class="keywordflow">return</span> 11;
    <span class="keywordflow">if</span> (strcmp(type, <span class="stringliteral">&quot;SHUTDOWN_COMPLETE&quot;</span>)==0) <span class="keywordflow">return</span> 14;
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;ChunkConversion not successful\n&quot;</span>;
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae6315c7df4b1537e0b8374583492a0be"></a><!-- doxytag: member="SCTPAssociation::cloneAssociation" ref="ae6315c7df4b1537e0b8374583492a0be" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_association.html">SCTPAssociation</a> * SCTPAssociation::cloneAssociation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: clone a listening association. Used for forking. </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_association.html">SCTPAssociation</a>* assoc = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation</a>(<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>,<a class="code" href="class_s_c_t_p_association.html#aba709e2f773752366d1c291c4fb360c8">appGateIndex</a>,<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    <span class="keyword">const</span> <span class="keywordtype">char</span>* queueClass = <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;getClassName();
    assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a> = check_and_cast&lt;<a class="code" href="class_s_c_t_p_queue.html">SCTPQueue</a> *&gt;(createOne(queueClass));
    assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a> = check_and_cast&lt;<a class="code" href="class_s_c_t_p_queue.html">SCTPQueue</a> *&gt;(createOne(queueClass));

    <span class="keyword">const</span> <span class="keywordtype">char</span>* sctpAlgorithmClass = <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>-&gt;getClassName();
    assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a> = check_and_cast&lt;<a class="code" href="class_s_c_t_p_algorithm.html">SCTPAlgorithm</a> *&gt;(createOne(sctpAlgorithmClass));
    assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>-&gt;<a class="code" href="class_s_c_t_p_algorithm.html#aaef644b59f18aa40cea754616c8f9f61">setAssociation</a>(assoc);
    assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>-&gt;<a class="code" href="class_s_c_t_p_algorithm.html#a2061a42140d0acd50454a93799f58974">initialize</a>();
    assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a> = assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>-&gt;<a class="code" href="class_s_c_t_p_algorithm.html#aaca16656400d64a60d3f29e838c08ca1">createStateVariables</a>();

    assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9f45fb5b9a76bdf0ada04c3ed9920215">active</a> = <span class="keyword">false</span>;
    assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab5bac08be4a3710fe623e93aa65e74ff">fork</a> = <span class="keyword">true</span>;
    assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a> = <a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>;
    assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a> = <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>;
    assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#af44c3fdaaff9c48fdbb45aac6d6ad082">localAddressList</a> = <a class="code" href="class_s_c_t_p_association.html#af44c3fdaaff9c48fdbb45aac6d6ad082">localAddressList</a>;

    FSM_Goto((*assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>);
    <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a84f317375ec11a83b15062a0d77694d3">printInfoConnMap</a>();
    <span class="keywordflow">return</span> assoc;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0054d12cb552f7417b97c7e671231905"></a><!-- doxytag: member="SCTPAssociation::createSack" ref="a0054d12cb552f7417b97c7e671231905" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SCTPSackChunk * SCTPAssociation::createSack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>, and <a class="el" href="class_s_c_t_p_association.html#a8ceae356355ca537907cabf469c813af">sendSack()</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32 key=0, arwnd=0;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;SCTPAssociationUtil:createSACK localAddress=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>&lt;&lt;<span class="stringliteral">&quot;  remoteAddress=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot; localRwnd=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a>&lt;&lt;<span class="stringliteral">&quot; queuedBytes=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    <span class="keywordflow">if</span> ((int32)(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a> - <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>) &lt;= 0)
    {
        arwnd = 0;
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aba85e5f43e22032f2f883effbd7a8f92">swsLimit</a> &gt; 0)
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20b24275e45b18df329a7254563e306d">swsAvoidanceInvoked</a> = <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a> - <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a> &lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aba85e5f43e22032f2f883effbd7a8f92">swsLimit</a> || <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20b24275e45b18df329a7254563e306d">swsAvoidanceInvoked</a> == <span class="keyword">true</span>)
    {
        arwnd = 1;
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aba85e5f43e22032f2f883effbd7a8f92">swsLimit</a> &gt; 0)
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20b24275e45b18df329a7254563e306d">swsAvoidanceInvoked</a> = <span class="keyword">true</span>;
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;arwnd=1; createSack : SWS Avoidance ACTIVE !!!\n&quot;</span>;
    }
    <span class="keywordflow">else</span>
    {
        arwnd = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a> - <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>;
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;simTime()&lt;&lt;<span class="stringliteral">&quot; arwnd = &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a>&lt;&lt;<span class="stringliteral">&quot; - &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>&lt;&lt;<span class="stringliteral">&quot; = &quot;</span>&lt;&lt;arwnd&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    }
    <a class="code" href="class_s_c_t_p_association.html#a28d421b793ab5db3b09737c0f9f4b905">advRwnd</a>-&gt;record(arwnd);
    SCTPSackChunk* sackChunk=<span class="keyword">new</span> SCTPSackChunk(<span class="stringliteral">&quot;SACK&quot;</span>);
    sackChunk-&gt;setChunkType(<a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a689bf9c7470080fd0180eb7f5c293bd4">SACK</a>);
    sackChunk-&gt;setCumTsnAck(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>);
    sackChunk-&gt;setA_rwnd(arwnd);
    uint32 numGaps=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>;
    uint32 numDups=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a04e8711ebb60bf950f99a98e6eb5cbc9">dupList</a>.size();
    uint16 sackLength=<a class="code" href="_s_c_t_p_association_8h.html#ad4c0ed05112e2eae28cc210916cd3fdd">SCTP_SACK_CHUNK_LENGTH</a> + numGaps*4 + numDups*4;
    uint32 mtu = <a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(remoteAddr)-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>;

    <span class="keywordflow">if</span> (sackLength &gt; mtu-32) <span class="comment">// FIXME</span>
    {
        <span class="keywordflow">if</span> (<a class="code" href="_s_c_t_p_association_8h.html#ad4c0ed05112e2eae28cc210916cd3fdd">SCTP_SACK_CHUNK_LENGTH</a> + numGaps*4 &gt; mtu-32)
        {
            numDups = 0;
            numGaps = (uint32)((mtu-32-<a class="code" href="_s_c_t_p_association_8h.html#ad4c0ed05112e2eae28cc210916cd3fdd">SCTP_SACK_CHUNK_LENGTH</a>)/4);
        }
        <span class="keywordflow">else</span>
        {
            numDups = (uint32)((mtu-32-<a class="code" href="_s_c_t_p_association_8h.html#ad4c0ed05112e2eae28cc210916cd3fdd">SCTP_SACK_CHUNK_LENGTH</a> - numGaps*4)/4);
        }
        sackLength=<a class="code" href="_s_c_t_p_association_8h.html#ad4c0ed05112e2eae28cc210916cd3fdd">SCTP_SACK_CHUNK_LENGTH</a> + numGaps*4 + numDups*4;
    }
    sackChunk-&gt;setNumGaps(numGaps);
    sackChunk-&gt;setNumDupTsns(numDups);
    sackChunk-&gt;setBitLength(sackLength*8);

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;Sack arwnd=&quot;</span>&lt;&lt;sackChunk-&gt;getA_rwnd()&lt;&lt;<span class="stringliteral">&quot; ctsnAck=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>&lt;&lt;<span class="stringliteral">&quot; numGaps=&quot;</span>&lt;&lt;numGaps&lt;&lt;<span class="stringliteral">&quot; numDups=&quot;</span>&lt;&lt;numDups&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    <span class="keywordflow">if</span> (numGaps &gt; 0)
    {
        sackChunk-&gt;setGapStartArraySize(numGaps);
        sackChunk-&gt;setGapStopArraySize(numGaps);

        uint32 last = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>;
        <span class="keywordflow">for</span> (key=0; key&lt;numGaps; key++)
        {
            <span class="comment">// ====== Validity check ===========================================</span>
            assert(<a class="code" href="class_s_c_t_p_association.html#a2aee269f079e6749ddc839137c157043">tsnGt</a>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[key], last + 1));
            assert(<a class="code" href="class_s_c_t_p_association.html#a7bb25b61e8c968e460210fd7794037b3">tsnGe</a>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[key], <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[key]));
            last = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[key];

            sackChunk-&gt;setGapStart(key, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[key]);
            sackChunk-&gt;setGapStop(key, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[key]);
        }
    }
    <span class="keywordflow">if</span> (numDups &gt; 0)
    {
        sackChunk-&gt;setDupTsnsArraySize(numDups);
        key=0;
        <span class="keywordflow">for</span>(std::list&lt;uint32&gt;::iterator iter=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a04e8711ebb60bf950f99a98e6eb5cbc9">dupList</a>.begin(); iter!=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a04e8711ebb60bf950f99a98e6eb5cbc9">dupList</a>.end(); iter++)
        {
            sackChunk-&gt;setDupTsns(key, (*iter));
            key++;
            <span class="keywordflow">if</span> (key == numDups)
                <span class="keywordflow">break</span>;
        }
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a04e8711ebb60bf950f99a98e6eb5cbc9">dupList</a>.clear();
    }
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;endl;
    <span class="keywordflow">for</span> (uint32 i=0; i&lt;numGaps; i++)
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;sackChunk-&gt;getGapStart(i)&lt;&lt;<span class="stringliteral">&quot; - &quot;</span>&lt;&lt;sackChunk-&gt;getGapStop(i)&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;send &quot;</span>&lt;&lt;sackChunk-&gt;getName()&lt;&lt;<span class="stringliteral">&quot; from &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>&lt;&lt;<span class="stringliteral">&quot; to &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9f057ad775e7e3187bc6f522820b0ac2">lastDataSourceAddress</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    <span class="keywordflow">return</span> sackChunk;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9a5de305f7873c84ef644dce513964cd"></a><!-- doxytag: member="SCTPAssociation::cwndUpdateAfterCwndTimeout" ref="a9a5de305f7873c84ef644dce513964cd" args="(SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::cwndUpdateAfterCwndTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// When the association does not transmit data on a given transport address</span>
    <span class="comment">// within an RTO, the cwnd of the transport address SHOULD be adjusted to 2*MTU.</span>

        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tCC [cwndUpdateAfterCwndTimeout]\t&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                  &lt;&lt; <span class="stringliteral">&quot;\tsst=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>;
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> = (int32)<a class="code" href="_s_c_t_p_association_8h.html#ad61931b1ae6b8e5bb714e2e6744f4470">min</a>(4 * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>, <a class="code" href="_s_c_t_p_association_8h.html#afdb84bd44c7cbd3fc9cbe1e3bf07d948">max</a>(2 * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>, 4380));
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;\t=&gt;\tsst=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &lt;&lt; endl;
    <a class="code" href="class_s_c_t_p_association.html#a753567499c04f5e4b55cb92790e4c96a">recordCwndUpdate</a>(path);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a53665e3333a5e7b2aae79a65b9a1482b"></a><!-- doxytag: member="SCTPAssociation::cwndUpdateAfterRtxTimeout" ref="a53665e3333a5e7b2aae79a65b9a1482b" args="(SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::cwndUpdateAfterRtxTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tCC [cwndUpdateAfterRtxTimeout]\t&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                    &lt;&lt; <span class="stringliteral">&quot;\tsst=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>;

        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> = (int32)<a class="code" href="_s_c_t_p_association_8h.html#afdb84bd44c7cbd3fc9cbe1e3bf07d948">max</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> / 2, 4 * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>);
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>;

        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;\t=&gt;\tsst=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &lt;&lt; endl;
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a857673312c2f810885b9d8394eece558">partialBytesAcked</a>         = 0;
    <a class="code" href="class_s_c_t_p_association.html#a753567499c04f5e4b55cb92790e4c96a">recordCwndUpdate</a>(path);

    <span class="comment">// Leave Fast Recovery mode</span>
    <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a9b17b4f078d72955719c8052701e90fd">fastRecoveryActive</a> == <span class="keyword">true</span>) {
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a9b17b4f078d72955719c8052701e90fd">fastRecoveryActive</a>     = <span class="keyword">false</span>;
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#abc1e62f4d74471fcb495fec933bc4a45">fastRecoveryExitPoint</a> = 0;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ade798497e9cb468bf8f4759e9b8e9840"></a><!-- doxytag: member="SCTPAssociation::cwndUpdateAfterSack" ref="ade798497e9cb468bf8f4759e9b8e9840" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::cwndUpdateAfterSack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (SCTPPathMap::iterator iter = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin(); iter != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); iter++) {
        <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = iter-&gt;second;
        <span class="keywordflow">if</span>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a9b17b4f078d72955719c8052701e90fd">fastRecoveryActive</a> == <span class="keyword">false</span>) {

            <span class="comment">// ====== Retransmission required -&gt; reduce congestion window ======</span>
            <span class="keywordflow">if</span>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad26e872a5b7a170d5585fdc51d2c2f92">requiresRtx</a>) {
                <span class="keywordtype">double</span> decreaseFactor = 0.5;

                      <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tCC [cwndUpdateAfterSack]\t&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                                 &lt;&lt; <span class="stringliteral">&quot;\tsst=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>;

                      path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> = <a class="code" href="_s_c_t_p_association_8h.html#afdb84bd44c7cbd3fc9cbe1e3bf07d948">max</a>((int32)path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> - (int32)rint(decreaseFactor * (<span class="keywordtype">double</span>)path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>),
                                                  4 * (int32)path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>);
                      path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a>;

                      <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;\t=&gt;\tsst=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &lt;&lt; endl;
                 <a class="code" href="class_s_c_t_p_association.html#a753567499c04f5e4b55cb92790e4c96a">recordCwndUpdate</a>(path);
                 path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a857673312c2f810885b9d8394eece558">partialBytesAcked</a> = 0;


                 <span class="comment">// ====== Fast Recovery ========================================</span>
                 <span class="keywordflow">if</span>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8e59e86d19565705ea4e9d0aadb9500d">fastRecoverySupported</a>) {
                    uint32 highestAckOnPath = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c4c403bd391f0be75e1b71254828274">lastTsnAck</a>;
                    <span class="keywordflow">for</span>(SCTPQueue::PayloadQueue::iterator pq = <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.begin();
                         pq != <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.end(); pq++) {
                         <span class="keywordflow">if</span>( (<a class="code" href="class_s_c_t_p_association.html#abab3867be074dea5acf98169c67efc78">chunkHasBeenAcked</a>(pq-&gt;second) == <span class="keyword">true</span>) &amp;&amp;
                              (<a class="code" href="class_s_c_t_p_association.html#a2aee269f079e6749ddc839137c157043">tsnGt</a>(pq-&gt;second-&gt;tsn, highestAckOnPath)) &amp;&amp;
                              (pq-&gt;second-&gt;getLastDestinationPath() == path) ) {
                             <span class="comment">// T.D. 21.11.09: Only take care of TSNs on the same path!</span>
                             highestAckOnPath = pq-&gt;second-&gt;tsn;
                         }
                    }
                    <span class="comment">/* this can ONLY become TRUE, when Fast Recovery IS supported */</span>
                    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a9b17b4f078d72955719c8052701e90fd">fastRecoveryActive</a>         = <span class="keyword">true</span>;
                    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#abc1e62f4d74471fcb495fec933bc4a45">fastRecoveryExitPoint</a>  = highestAckOnPath;
                    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#abd845c8984b1b61f14c24f853bdcbede">fastRecoveryEnteringTime</a> = simTime();

                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tCC [cwndUpdateAfterSack] Entering Fast Recovery on path &quot;</span>
                              &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                              &lt;&lt; <span class="stringliteral">&quot;, exit point is &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#abc1e62f4d74471fcb495fec933bc4a45">fastRecoveryExitPoint</a> &lt;&lt; endl;
                }
            }
        }
        <span class="keywordflow">else</span> {
            <span class="keywordflow">for</span> (SCTPPathMap::iterator iter = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin(); iter != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); iter++) {
                <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = iter-&gt;second;
                <span class="keywordflow">if</span>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a9b17b4f078d72955719c8052701e90fd">fastRecoveryActive</a>) {
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tCC [cwndUpdateAfterSack] Still in Fast Recovery on path &quot;</span>
                              &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                              &lt;&lt; <span class="stringliteral">&quot;, exit point is &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#abc1e62f4d74471fcb495fec933bc4a45">fastRecoveryExitPoint</a> &lt;&lt; endl;
                }
            }
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a356510e0d2cfb8c6770c72f29634cb93"></a><!-- doxytag: member="SCTPAssociation::cwndUpdateBytesAcked" ref="a356510e0d2cfb8c6770c72f29634cb93" args="(SCTPPathVariables *path, const uint32 ackedBytes, const bool ctsnaAdvanced)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::cwndUpdateBytesAcked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>ackedBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>ctsnaAdvanced</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simulation.getSimTime() &lt;&lt; <span class="stringliteral">&quot;====&gt; cwndUpdateBytesAcked:&quot;</span>
              &lt;&lt; <span class="stringliteral">&quot; path=&quot;</span>                     &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
              &lt;&lt; <span class="stringliteral">&quot; ackedBytes=&quot;</span>           &lt;&lt; ackedBytes
              &lt;&lt; <span class="stringliteral">&quot; ctsnaAdvanced=&quot;</span>        &lt;&lt; ((ctsnaAdvanced == <span class="keyword">true</span>) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>)
              &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span>                     &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>
              &lt;&lt; <span class="stringliteral">&quot; ssthresh=&quot;</span>                 &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a>
              &lt;&lt; <span class="stringliteral">&quot; ackedBytes=&quot;</span>           &lt;&lt; ackedBytes
              &lt;&lt; <span class="stringliteral">&quot; pathOsbBeforeUpdate=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae759ba7c806cc1317ddeaa3238716aad">outstandingBytesBeforeUpdate</a>
              &lt;&lt; <span class="stringliteral">&quot; pathOsb=&quot;</span>                  &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a>
              &lt;&lt; endl;

    <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a9b17b4f078d72955719c8052701e90fd">fastRecoveryActive</a> == <span class="keyword">false</span>) {
        <span class="comment">// T.D. 21.11.09: Increasing cwnd is only allowed when not being in</span>
        <span class="comment">//                      Fast Recovery mode!</span>

        <span class="comment">// ====== Slow Start ==================================================</span>
        <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &lt;= path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a>)  {
            <span class="comment">// ------ Clear PartialBytesAcked counter --------------------------</span>
            path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a857673312c2f810885b9d8394eece558">partialBytesAcked</a> = 0;

            <span class="comment">// ------ Increase Congestion Window -------------------------------</span>
            <span class="keywordflow">if</span> ((ctsnaAdvanced == <span class="keyword">true</span>) &amp;&amp;
                 (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae759ba7c806cc1317ddeaa3238716aad">outstandingBytesBeforeUpdate</a> &gt;= path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>)) {
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tCC [cwndUpdateBytesAcked-SlowStart]\t&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                              &lt;&lt; <span class="stringliteral">&quot;\tsst=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &lt;&lt; <span class="stringliteral">&quot; acked=&quot;</span> &lt;&lt; ackedBytes;

                    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> += (int32)<a class="code" href="_s_c_t_p_association_8h.html#ad61931b1ae6b8e5bb714e2e6744f4470">min</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>, ackedBytes);

                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;\t=&gt;\tsst=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &lt;&lt; endl;
                <a class="code" href="class_s_c_t_p_association.html#a753567499c04f5e4b55cb92790e4c96a">recordCwndUpdate</a>(path);
            }

            <span class="comment">// ------ No need to increase Congestion Window --------------------</span>
            <span class="keywordflow">else</span> {
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tCC &quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;Not increasing cwnd of path &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot; in slow start:\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;ctsnaAdvanced=&quot;</span>       &lt;&lt; ((ctsnaAdvanced == <span class="keyword">true</span>) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;cwnd=&quot;</span>                    &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>                              &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;ssthresh=&quot;</span>                &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a>                          &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;ackedBytes=&quot;</span>              &lt;&lt; ackedBytes                              &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;pathOsbBeforeUpdate=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae759ba7c806cc1317ddeaa3238716aad">outstandingBytesBeforeUpdate</a> &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;pathOsb=&quot;</span>                 &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a>              &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;(pathOsbBeforeUpdate &gt;= path-&gt;cwnd)=&quot;</span>
                        &lt;&lt; (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae759ba7c806cc1317ddeaa3238716aad">outstandingBytesBeforeUpdate</a> &gt;= path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>) &lt;&lt; endl;
            }
        }

        <span class="comment">// ====== Congestion Avoidance ========================================</span>
        <span class="keywordflow">else</span>
        {
            <span class="comment">// ------ Increase PartialBytesAcked counter -----------------------</span>
            path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a857673312c2f810885b9d8394eece558">partialBytesAcked</a> += ackedBytes;

            <span class="keywordtype">double</span> increaseFactor = 1.0;

            <span class="comment">// ------ Increase Congestion Window -------------------------------</span>
            <span class="keywordflow">if</span> ( (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a857673312c2f810885b9d8394eece558">partialBytesAcked</a> &gt;= path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>) &amp;&amp;
                  (ctsnaAdvanced == <span class="keyword">true</span>) &amp;&amp;
                  (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae759ba7c806cc1317ddeaa3238716aad">outstandingBytesBeforeUpdate</a> &gt;= path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>) ) {
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tCC [cwndUpdateBytesAcked-CgAvoidance]\t&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                              &lt;&lt; <span class="stringliteral">&quot;\tsst=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &lt;&lt; <span class="stringliteral">&quot; acked=&quot;</span> &lt;&lt; ackedBytes;

                    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> += (int32)rint(increaseFactor * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>);

                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;\t=&gt;\tsst=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &lt;&lt; endl;
                <a class="code" href="class_s_c_t_p_association.html#a753567499c04f5e4b55cb92790e4c96a">recordCwndUpdate</a>(path);
                path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a857673312c2f810885b9d8394eece558">partialBytesAcked</a> =
                    ((path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a857673312c2f810885b9d8394eece558">partialBytesAcked</a>) ?
                        (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a857673312c2f810885b9d8394eece558">partialBytesAcked</a> - path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>) : 0);
            }

            <span class="comment">// ------ No need to increase Congestion Window -------------------</span>
            <span class="keywordflow">else</span> {
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tCC &quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;Not increasing cwnd of path &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot; in congestion avoidance: &quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;ctsnaAdvanced=&quot;</span>       &lt;&lt; ((ctsnaAdvanced == <span class="keyword">true</span>) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;cwnd=&quot;</span>                    &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>                              &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;ssthresh=&quot;</span>                &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a>                          &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;ackedBytes=&quot;</span>              &lt;&lt; ackedBytes                              &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;pathOsbBeforeUpdate=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae759ba7c806cc1317ddeaa3238716aad">outstandingBytesBeforeUpdate</a> &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;pathOsb=&quot;</span>                 &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a>              &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;(pathOsbBeforeUpdate &gt;= path-&gt;cwnd)=&quot;</span>
                            &lt;&lt; (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae759ba7c806cc1317ddeaa3238716aad">outstandingBytesBeforeUpdate</a> &gt;= path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>)            &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;partialBytesAcked=&quot;</span>   &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a857673312c2f810885b9d8394eece558">partialBytesAcked</a>                 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                        &lt;&lt; <span class="stringliteral">&quot;(path-&gt;partialBytesAcked &gt;= path-&gt;cwnd)=&quot;</span>
                            &lt;&lt; (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a857673312c2f810885b9d8394eece558">partialBytesAcked</a> &gt;= path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>) &lt;&lt; endl;
            }
        }

        <span class="comment">// ====== Reset PartialBytesAcked counter if no more outstanding bytes</span>
        <span class="keywordflow">if</span>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> == 0) {
            path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a857673312c2f810885b9d8394eece558">partialBytesAcked</a> = 0;
        }
    }
    <span class="keywordflow">else</span> {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tCC &quot;</span>
                &lt;&lt; <span class="stringliteral">&quot;Not increasing cwnd of path &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                &lt;&lt; <span class="stringliteral">&quot; during Fast Recovery&quot;</span> &lt;&lt; endl;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af5c86c86388313edeeff8434266a85cd"></a><!-- doxytag: member="SCTPAssociation::cwndUpdateMaxBurst" ref="af5c86c86388313edeeff8434266a85cd" args="(SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::cwndUpdateMaxBurst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordflow">if</span>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &gt; ((path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> + <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa9fd5385ee9beba279f069309e9b0018">maxBurst</a> * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>))) {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime()      &lt;&lt; <span class="stringliteral">&quot;:\tCC [cwndUpdateMaxBurst]\t&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                    &lt;&lt; <span class="stringliteral">&quot;\tsst=&quot;</span>       &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>
                    &lt;&lt; <span class="stringliteral">&quot;\tosb=&quot;</span>       &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a>
                    &lt;&lt; <span class="stringliteral">&quot;\tmaxBurst=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa9fd5385ee9beba279f069309e9b0018">maxBurst</a> * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> &lt;&lt; endl;

            path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> + (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa9fd5385ee9beba279f069309e9b0018">maxBurst</a> * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>);
            <a class="code" href="class_s_c_t_p_association.html#a753567499c04f5e4b55cb92790e4c96a">recordCwndUpdate</a>(path);

            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;\t=&gt;\tsst=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &lt;&lt; endl;
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2178e3130838480b58adc77639d7862c"></a><!-- doxytag: member="SCTPAssociation::decreaseOutstandingBytes" ref="a2178e3130838480b58adc77639d7862c" args="(SCTPDataVariables *chunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::decreaseOutstandingBytes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td>
          <td class="paramname"><em>chunk</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks()</a>, <a class="el" href="class_s_c_t_p_association.html#a297f87caf9d5e3b6cf596a5e44381061">handleChunkReportedAsAcked()</a>, <a class="el" href="class_s_c_t_p_association.html#a01a9c50a325baf1ebf3d25972a776393">handleChunkReportedAsMissing()</a>, <a class="el" href="class_s_c_t_p_association.html#aded774353d79ba7bdf53651ddc178609">moveChunkToOtherPath()</a>, and <a class="el" href="class_s_c_t_p_association.html#ab70d01d19820a5a16547e439b142d5fe">tsnWasReneged()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* lastPath = chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>();

    assert(lastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> &gt;= chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>);
    lastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> -= chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9a4b261bb104828e3d1c14f89cdc3a6d">outstandingBytes</a> -= chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;
    assert((int64)<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9a4b261bb104828e3d1c14f89cdc3a6d">outstandingBytes</a> &gt;= 0);

    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a> = <span class="keyword">false</span>;

    CounterMap::iterator iterator = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a767e2849d053dd45d294d8678b8daed9">roomRetransQ</a>.find(lastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
        iterator-&gt;second -= <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a> + <a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);

}
</pre></div>
</div>
</div>
<a class="anchor" id="aea681826347f6fc208c91c5c0f5227bc"></a><!-- doxytag: member="SCTPAssociation::deleteStreams" ref="aea681826347f6fc208c91c5c0f5227bc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::deleteStreams </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">SCTP::removeAssociation()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (SCTPSendStreamMap::iterator it=<a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.begin(); it != <a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.end(); it++)
    {
        it-&gt;second-&gt;deleteQueue();
    }
    <span class="keywordflow">for</span> (SCTPReceiveStreamMap::iterator it=<a class="code" href="class_s_c_t_p_association.html#a80374427a755802cd7687c7a77b26e9c">receiveStreams</a>.begin(); it != <a class="code" href="class_s_c_t_p_association.html#a80374427a755802cd7687c7a77b26e9c">receiveStreams</a>.end(); it++)
    {
        <span class="keyword">delete</span> it-&gt;second;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8bc32c70b39e641735ba4f73c00480ae"></a><!-- doxytag: member="SCTPAssociation::dequeueAckedChunks" ref="a8bc32c70b39e641735ba4f73c00480ae" args="(const uint32 tsna, SCTPPathVariables *path, simtime_t &amp;rttEstimation)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 SCTPAssociation::dequeueAckedChunks </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsna</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t &amp;&#160;</td>
          <td class="paramname"><em>rttEstimation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, and <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html">SCTP::AssocStat</a>* assocStat                   = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#ac0d7608e4fb9d3d5cc41d98ac2cd66de">getAssocStat</a>(<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    uint32            newlyAckedBytes            = 0;
    uint64            sendBufferBeforeUpdate = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa67f68583efc7ce652e777d055e87165">sendBuffer</a>;

    <span class="comment">// Set it ridiculously high</span>
    rttEstimation = MAXTIME;

    <span class="comment">// Are there chunks in the retransmission queue ? If Yes -&gt; check for dequeue.</span>
    SCTPQueue::PayloadQueue::iterator iterator = <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.begin();
    <span class="keywordflow">while</span> (iterator != <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.end()) {
        <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* <a class="code" href="structchunk.html">chunk</a> = iterator-&gt;second;
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a7bb25b61e8c968e460210fd7794037b3">tsnGe</a>(tsna, chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>)) {
            <span class="comment">// Dequeue chunk, cause it has been acked</span>
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#a2834802fcd42c759e97cd1e450ad1d06">getChunk</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>)) {
                <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#a2f9d71c42968c65fcc38e685c681dcf5">removeMsg</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>);
                chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a29289f62fc4878819b3b5ba132bf2c80">enqueuedInTransmissionQ</a> = <span class="keyword">false</span>;
                CounterMap::iterator q = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>.find(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af39b432c96285a2e9cd0d0320d091d7c">getNextDestination</a>());
                q-&gt;second -= <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8+<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
                CounterMap::iterator qb = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>.find(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af39b432c96285a2e9cd0d0320d091d7c">getNextDestination</a>());
                qb-&gt;second -= chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;
            }

            chunk = <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#a9cdeb09d2be1a260809687f439c47a0e">getAndExtractChunk</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>);
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa67f68583efc7ce652e777d055e87165">sendBuffer</a> -= chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8;

            <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* lastPath = chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>();
            assert(lastPath != NULL);

            <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#abab3867be074dea5acf98169c67efc78">chunkHasBeenAcked</a>(chunk)) {
                newlyAckedBytes += (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>);

                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;: CumAcked TSN &quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>
                          &lt;&lt; <span class="stringliteral">&quot; on path &quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aab8ca4e56deac9cab60e83c2fa7c2c6f">getLastDestination</a>() &lt;&lt; endl;

                lastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a44069a398db868dd42e80fa32bea5706">newlyAckedBytes</a> += (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>);

                <span class="comment">// T.D. 05.12.09: CumAck affects lastPath -&gt; reset its T3 timer later.</span>
                lastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8a2d22841d029151804bfa961d3b3e1a">newCumAck</a> = <span class="keyword">true</span>;
            }


            <span class="keywordflow">if</span>(assocStat) {
                assocStat-&gt;<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#acc55fd8a06afd95c5fd58930e5537cf2">ackedBytes</a> += chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8;
            }

            <span class="keywordflow">if</span> ((<a class="code" href="class_s_c_t_p_association.html#abab3867be074dea5acf98169c67efc78">chunkHasBeenAcked</a>(chunk) == <span class="keyword">false</span>) &amp;&amp; (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a>)) {
                <a class="code" href="class_s_c_t_p_association.html#ac9f7ef76b3f23b83b5c4c261bf4df4ae">ackChunk</a>(chunk);
                <span class="keywordflow">if</span> ((chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af9410192fb1add58020e8c9fd14928c1">numberOfTransmissions</a> == 1) &amp;&amp; (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>() == sackPath)) {
                    <span class="keyword">const</span> simtime_t timeDifference = simTime() - chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a347b1c461d332be999051c3d1f0abaa1">sendTime</a>;
                    <span class="keywordflow">if</span> ((timeDifference &lt; rttEstimation) || (rttEstimation == MAXTIME)) {
                        rttEstimation = timeDifference;
                    }
                }
                <a class="code" href="class_s_c_t_p_association.html#a2178e3130838480b58adc77639d7862c">decreaseOutstandingBytes</a>(chunk);
            }
            <span class="keywordflow">if</span> (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aaafb0500520fdd9936987be73f6a27ae">userData</a> != NULL) {
                <span class="keyword">delete</span> chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aaafb0500520fdd9936987be73f6a27ae">userData</a>;
            }
            <span class="keyword">delete</span> chunk;
        }
        <span class="keywordflow">else</span> {
            <span class="keywordflow">break</span>;
        }
        iterator = <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.begin();
    }

    <span class="keywordflow">if</span>(sendBufferBeforeUpdate != <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa67f68583efc7ce652e777d055e87165">sendBuffer</a> &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa67f68583efc7ce652e777d055e87165">sendBuffer</a> &lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4a45a11cb5d50f9d7cb1799fa105dedb">sendQueueLimit</a>) {
        <span class="comment">// T.D. 06.02.2010: Just send SCTP_I_SENDQUEUE_ABATED once, after all newly acked</span>
        <span class="comment">//                        chunks have been dequeued.</span>
        <span class="comment">// I.R. only send indication if the sendBuffer size has dropped below the sendQueueLimit</span>
        assert(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7214666b7e6034940d7f2de8ecac9dc5">lastSendQueueAbated</a> &lt; simTime());
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9944dafac700403ebec699e66ca34d03">appSendAllowed</a> = <span class="keyword">true</span>;
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tSCTP_I_SENDQUEUE_ABATED(&quot;</span>
                  &lt;&lt; sendBufferBeforeUpdate - <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa67f68583efc7ce652e777d055e87165">sendBuffer</a> &lt;&lt; <span class="stringliteral">&quot;) to refill buffer &quot;</span>
                  &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa67f68583efc7ce652e777d055e87165">sendBuffer</a> &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4a45a11cb5d50f9d7cb1799fa105dedb">sendQueueLimit</a> &lt;&lt; endl;
        <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a4ed59ad366001ebd94844599c3ed76ec">SCTP_I_SENDQUEUE_ABATED</a>, sendBufferBeforeUpdate - <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa67f68583efc7ce652e777d055e87165">sendBuffer</a>);
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7214666b7e6034940d7f2de8ecac9dc5">lastSendQueueAbated</a> = simTime();
    }

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;dequeueAckedChunks(): newlyAckedBytes=&quot;</span> &lt;&lt; newlyAckedBytes
              &lt;&lt; <span class="stringliteral">&quot;, rttEstimation=&quot;</span> &lt;&lt; rttEstimation &lt;&lt; endl;

    <span class="keywordflow">return</span> (newlyAckedBytes);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5bccfb8217d1cbb22a629856f96755ad"></a><!-- doxytag: member="SCTPAssociation::dequeueOutboundDataMsg" ref="a5bccfb8217d1cbb22a629856f96755ad" args="(const int32 availableSpace, const int32 availableCwnd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SCTPDataMsg * SCTPAssociation::dequeueOutboundDataMsg </td>
          <td>(</td>
          <td class="paramtype">const int32&#160;</td>
          <td class="paramname"><em>availableSpace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32&#160;</td>
          <td class="paramname"><em>availableCwnd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    SCTPDataMsg* datMsg=NULL;
    int32 nextStream = -1;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;dequeueOutboundDataMsg: &quot;</span> &lt;&lt; availableSpace &lt;&lt;<span class="stringliteral">&quot; bytes left to be sent&quot;</span> &lt;&lt; endl;
    <span class="comment">/* Only change stream if we don&#39;t have to finish a fragmented message */</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7afc09bdeea747f08bd02cb60f9d4828">lastMsgWasFragment</a>)
        nextStream = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a65115dee13a7bb06bf17e24ac33ff4c4">lastStreamScheduled</a>;
    <span class="keywordflow">else</span>
        nextStream = (this-&gt;*<a class="code" href="class_s_c_t_p_association.html#a9988effc78d17db9b32a8d6a976c2288">ssFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html#ad1b6db0c49758dcf9cb642afec4ea4a7">ssGetNextSid</a>)(<span class="keyword">false</span>);

    <span class="keywordflow">if</span> (nextStream == -1)
        <span class="keywordflow">return</span> NULL;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;dequeueOutboundDataMsg: now stream &quot;</span>&lt;&lt; nextStream &lt;&lt; endl;

    <span class="keywordflow">for</span> (SCTPSendStreamMap::iterator iter=<a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.begin(); iter!=<a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.end(); ++iter)
    {
        <span class="keywordflow">if</span> ((int32)iter-&gt;first==nextStream)
        {
            <a class="code" href="class_s_c_t_p_send_stream.html">SCTPSendStream</a>* stream=iter-&gt;second;
            cQueue* streamQ = NULL;

            <span class="keywordflow">if</span> (!stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#a819f071b624d554ee5c7d54417bc3a31">getUnorderedStreamQ</a>()-&gt;empty())
            {
                streamQ = stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#a819f071b624d554ee5c7d54417bc3a31">getUnorderedStreamQ</a>();
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;DequeueOutboundDataMsg() found chunks in stream &quot;</span>&lt;&lt;iter-&gt;first&lt;&lt;<span class="stringliteral">&quot; unordered queue, queue size=&quot;</span>&lt;&lt;stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#a819f071b624d554ee5c7d54417bc3a31">getUnorderedStreamQ</a>()-&gt;getLength()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#ac278c3ed4a46cba2cd4744113886e003">getStreamQ</a>()-&gt;empty())
            {
                streamQ = stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#ac278c3ed4a46cba2cd4744113886e003">getStreamQ</a>();
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;DequeueOutboundDataMsg() found chunks in stream &quot;</span>&lt;&lt;iter-&gt;first&lt;&lt;<span class="stringliteral">&quot; ordered queue, queue size=&quot;</span>&lt;&lt;stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#ac278c3ed4a46cba2cd4744113886e003">getStreamQ</a>()-&gt;getLength()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
            }

            <span class="keywordflow">if</span> (streamQ)
            {
                int32 b=<a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>( (check_and_cast&lt;SCTPSimpleMessage*&gt;(((SCTPDataMsg*)streamQ-&gt;front())-&gt;getEncapsulatedPacket())-&gt;getByteLength()+<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>));

                <span class="comment">/* check if chunk found in queue has to be fragmented */</span>
                <span class="keywordflow">if</span> (b &gt; (int32)<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20d0d3d8a1e728ac8742eba28856799f">assocPmtu</a> - <a class="code" href="_s_c_t_p_association_8h.html#a294612afcb62d33531f390a08f0c3209">IP_HEADER_LENGTH</a> - <a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>)
                {
                    <span class="comment">/* START FRAGMENTATION */</span>
                    SCTPDataMsg* datMsgQueued = (SCTPDataMsg*)streamQ-&gt;pop();
                    SCTPSimpleMessage *datMsgQueuedSimple = check_and_cast&lt;SCTPSimpleMessage*&gt;(datMsgQueued-&gt;getEncapsulatedPacket());

                    SCTPDataMsg* datMsgLastFragment = NULL;
                    uint32 offset = 0;

                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;Fragmentation: chunk &quot;</span> &lt;&lt; &amp;datMsgQueued &lt;&lt; <span class="stringliteral">&quot;, size = &quot;</span> &lt;&lt; datMsgQueued-&gt;getByteLength() &lt;&lt; endl;

                    <span class="keywordflow">while</span> (datMsgQueued)
                    {
                        <span class="comment">/* detemine size of fragment, either max payload or what&#39;s left */</span>
                        uint32 msgbytes = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20d0d3d8a1e728ac8742eba28856799f">assocPmtu</a> - <a class="code" href="_s_c_t_p_association_8h.html#a294612afcb62d33531f390a08f0c3209">IP_HEADER_LENGTH</a> - <a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a> - <a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>;
                        <span class="keywordflow">if</span> (msgbytes &gt; datMsgQueuedSimple-&gt;getDataLen() - offset)
                            msgbytes = datMsgQueuedSimple-&gt;getDataLen() - offset;

                        <span class="comment">/* new DATA msg */</span>
                        SCTPDataMsg* datMsgFragment = <span class="keyword">new</span> SCTPDataMsg();
                        datMsgFragment-&gt;setSid(datMsgQueued-&gt;getSid());
                        datMsgFragment-&gt;setPpid(datMsgQueued-&gt;getPpid());
                        datMsgFragment-&gt;setInitialDestination(datMsgQueued-&gt;getInitialDestination());
                        datMsgFragment-&gt;setEnqueuingTime(datMsgQueued-&gt;getEnqueuingTime());
                        datMsgFragment-&gt;setMsgNum(datMsgQueued-&gt;getMsgNum());
                        datMsgFragment-&gt;setOrdered(datMsgQueued-&gt;getOrdered());
                        datMsgFragment-&gt;setExpiryTime(datMsgQueued-&gt;getExpiryTime());
                        datMsgFragment-&gt;setRtx(datMsgQueued-&gt;getRtx());
                        datMsgFragment-&gt;setFragment(<span class="keyword">true</span>);
                            datMsgFragment-&gt;setBooksize(msgbytes + <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5cdefe133e1a8c71203aa26631ed09c7">header</a>);

                        <span class="comment">/* is this the first fragment? */</span>
                        <span class="keywordflow">if</span> (offset == 0)
                            datMsgFragment-&gt;setBBit(<span class="keyword">true</span>);

                        <span class="comment">/* new msg */</span>
                        SCTPSimpleMessage *datMsgFragmentSimple = <span class="keyword">new</span> SCTPSimpleMessage();

                        datMsgFragmentSimple-&gt;setName(datMsgQueuedSimple-&gt;getName());
                        datMsgFragmentSimple-&gt;setCreationTime(datMsgQueuedSimple-&gt;getCreationTime());

                        datMsgFragmentSimple-&gt;setDataArraySize(msgbytes);
                        datMsgFragmentSimple-&gt;setDataLen(msgbytes);
                        datMsgFragmentSimple-&gt;setByteLength(msgbytes);

                        <span class="comment">/* copy data */</span>
                        <span class="keywordflow">for</span> (uint32 i = offset; i &lt; offset + msgbytes; i++)
                            datMsgFragmentSimple-&gt;setData(i - offset, datMsgQueuedSimple-&gt;getData(i));

                        offset += msgbytes;
                        datMsgFragment-&gt;encapsulate(datMsgFragmentSimple);

                        <span class="comment">/* insert fragment into queue */</span>
                        <span class="keywordflow">if</span> (!streamQ-&gt;empty())
                        {
                            <span class="keywordflow">if</span> (!datMsgLastFragment)
                            {
                                <span class="comment">/* insert first fragment at the begining of the queue*/</span>
                                streamQ-&gt;insertBefore((SCTPDataMsg*)streamQ-&gt;front(), datMsgFragment);
                            }
                            <span class="keywordflow">else</span>
                            {
                                <span class="comment">/* insert fragment after last inserted   */</span>
                                streamQ-&gt;insertAfter(datMsgLastFragment, datMsgFragment);
                            }
                        }
                        <span class="keywordflow">else</span>
                            streamQ-&gt;insert(datMsgFragment);

                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aee5ec4417497e5bba3cf95f79f902da6">queuedMessages</a>++;
                        <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a> += <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(datMsgFragment-&gt;getByteLength() + <a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
                        <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aab189302bf40c67f2eec631bcd7de51f">bookedSumSendStreams</a> += datMsgFragment-&gt;getBooksize();
                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;Fragmentation: fragment &quot;</span> &lt;&lt; &amp;datMsgFragment &lt;&lt; <span class="stringliteral">&quot; created, length = &quot;</span> &lt;&lt; datMsgFragmentSimple-&gt;getByteLength() &lt;&lt; <span class="stringliteral">&quot;, queue size = &quot;</span> &lt;&lt; streamQ-&gt;getLength() &lt;&lt; endl;

                        datMsgLastFragment = datMsgFragment;

                        <span class="comment">/* all fragments done? */</span>
                        <span class="keywordflow">if</span> (datMsgQueuedSimple-&gt;getDataLen() == offset)
                        {
                            datMsgFragment-&gt;setEBit(<span class="keyword">true</span>);

                            <span class="comment">/* remove original element */</span>
                            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;Fragmentation: delete &quot;</span> &lt;&lt; &amp;datMsgQueued &lt;&lt; endl;
                            <span class="comment">//streamQ-&gt;pop();</span>
                            <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a> -= <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(datMsgQueued-&gt;getByteLength() + <a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
                            <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aab189302bf40c67f2eec631bcd7de51f">bookedSumSendStreams</a> -= datMsgQueued-&gt;getBooksize();
                            <span class="keyword">delete</span> datMsgQueued;
                            datMsgQueued = NULL;
                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aee5ec4417497e5bba3cf95f79f902da6">queuedMessages</a>--;
                        }
                    }

                    <span class="comment">/* the next chunk returned will always be a fragment */</span>
                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7afc09bdeea747f08bd02cb60f9d4828">lastMsgWasFragment</a> = <span class="keyword">true</span>;

                    b=<a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>( (check_and_cast&lt;SCTPSimpleMessage*&gt;(((SCTPDataMsg*)streamQ-&gt;front())-&gt;getEncapsulatedPacket())-&gt;getBitLength()/8+<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>));
                    <span class="comment">/* FRAGMENTATION DONE */</span>
                }

                <span class="keywordflow">if</span> ((b &lt;= availableSpace) &amp;&amp;
                     ( (int32)((SCTPDataMsg*)streamQ-&gt;front())-&gt;getBooksize() &lt;= availableCwnd)) {
                    datMsg = (SCTPDataMsg*)streamQ-&gt;pop();
                    <span class="comment">/*if (!state-&gt;appSendAllowed &amp;&amp; streamQ-&gt;getLength()&lt;=state-&gt;sendQueueLimit)</span>
<span class="comment">                    {</span>
<span class="comment">                        state-&gt;appSendAllowed = true;</span>
<span class="comment">                        sendIndicationToApp(SCTP_I_SENDQUEUE_ABATED);</span>
<span class="comment">                    }*/</span>
                    <a class="code" href="class_s_c_t_p_association.html#a1f249bde274ec0e4949023a2a3a3e4e7">sendQueue</a>-&gt;record(streamQ-&gt;getLength());

                    <span class="keywordflow">if</span> (!datMsg-&gt;getFragment())
                    {
                        datMsg-&gt;setBBit(<span class="keyword">true</span>);
                        datMsg-&gt;setEBit(<span class="keyword">true</span>);
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7afc09bdeea747f08bd02cb60f9d4828">lastMsgWasFragment</a> = <span class="keyword">false</span>;
                    }
                    <span class="keywordflow">else</span>
                    {
                        <span class="keywordflow">if</span> (datMsg-&gt;getEBit())
                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7afc09bdeea747f08bd02cb60f9d4828">lastMsgWasFragment</a> = <span class="keyword">false</span>;
                        <span class="keywordflow">else</span>
                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7afc09bdeea747f08bd02cb60f9d4828">lastMsgWasFragment</a> = <span class="keyword">true</span>;
                    }

                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;DequeueOutboundDataMsg() found chunk (&quot;</span>&lt;&lt;&amp;datMsg&lt;&lt;<span class="stringliteral">&quot;) in the stream queue &quot;</span>&lt;&lt;&amp;iter-&gt;first&lt;&lt;<span class="stringliteral">&quot;(&quot;</span>&lt;&lt;streamQ&lt;&lt;<span class="stringliteral">&quot;) queue size=&quot;</span>&lt;&lt;streamQ-&gt;getLength()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
                 }
            }
            <span class="keywordflow">break</span>;
        }
    }
    <span class="keywordflow">if</span> (datMsg != NULL)
    {
        <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a> -= <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>( (check_and_cast&lt;SCTPSimpleMessage*&gt;(datMsg-&gt;getEncapsulatedPacket())-&gt;getBitLength()/8+<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>));
        <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aab189302bf40c67f2eec631bcd7de51f">bookedSumSendStreams</a> -= datMsg-&gt;getBooksize();
    }
    <span class="keywordflow">return</span> (datMsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a24959906501442490b4767253bbd658c"></a><!-- doxytag: member="SCTPAssociation::disposeOf" ref="a24959906501442490b4767253bbd658c" args="(SCTPMessage *sctpmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::disposeOf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *&#160;</td>
          <td class="paramname"><em>sctpmsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>.</p>
<div class="fragment"><pre class="fragment">{
    SCTPChunk* <a class="code" href="structchunk.html">chunk</a>;
    uint32 numberOfChunks = sctpmsg-&gt;<a class="code" href="class_s_c_t_p_message.html#a6f20de2280586794996c56c77bf5c479">getChunksArraySize</a>();
    <span class="keywordflow">if</span> (numberOfChunks&gt;0)
    <span class="keywordflow">for</span> (uint32 i=0; i&lt;numberOfChunks; i++)
    {
        chunk = (SCTPChunk*)(sctpmsg-&gt;<a class="code" href="class_s_c_t_p_message.html#aa0f9b611f85c4e718a400e9f7379f4b8">removeChunk</a>());
        <span class="keywordflow">if</span> (chunk-&gt;getChunkType()==<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea9d7d6f31868d66330397c967c4afd2d2">DATA</a>)
            <span class="keyword">delete</span> (SCTPSimpleMessage*)chunk-&gt;decapsulate();
        <span class="keyword">delete</span> chunk;
    }
    <span class="keyword">delete</span> sctpmsg;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a63a1d0b48db0d4d129635336591f37fc"></a><!-- doxytag: member="SCTPAssociation::eventName" ref="a63a1d0b48db0d4d129635336591f37fc" args="(const int32 event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * SCTPAssociation::eventName </td>
          <td>(</td>
          <td class="paramtype">const int32&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: returns name of SCTP_E_xxx constants </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition()</a>, and <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#define CASE(x) case x: s=#x+7; break</span>
<span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* s = <span class="stringliteral">&quot;unknown&quot;</span>;
    <span class="keywordflow">switch</span> (event) {
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda9f1fd7fc777cc9fcb87a49cd64412c70">SCTP_E_OPEN_PASSIVE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab1a4ad21616e72e2d7c4bef4b392d674">SCTP_E_ASSOCIATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2c57d6cd31d0e760c9562ab7d2d24532">SCTP_E_SHUTDOWN</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf772922ac461dd670204bcd480536cec">SCTP_E_CLOSE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda8ec7f7bcc1dae63ce49ba1c29227bebe">SCTP_E_SEND</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab8aa9b5c31869bf157aa993cea077747">SCTP_E_RCV_INIT</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab8c4ae7bdc1d15fd08dbe454cdbf0fcb">SCTP_E_RCV_VALID_COOKIE_ECHO</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddabad36afdf7219f94be14abb8fe080640">SCTP_E_RCV_INIT_ACK</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2f2d1da65ad0c265e5733999458898fb">SCTP_E_RCV_COOKIE_ACK</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda7712aa29c30d8415b4a4f8bcf27036dd">SCTP_E_RCV_SHUTDOWN</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda1ba625b5ddb58a87dc16748b4eef0282">SCTP_E_RCV_SHUTDOWN_ACK</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda57e8e0f4353663385300b7746ec16d6a">SCTP_E_RCV_SHUTDOWN_COMPLETE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda1397882140b1aae3cf3cb56ff2c6c9ff">SCTP_E_TIMEOUT_INIT_TIMER</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda9e719b2a4959d6ef63faee85c6470e31">SCTP_E_TIMEOUT_SHUTDOWN_TIMER</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda189e654159bcd1d6e97d07e2c2eca5d9">SCTP_E_TIMEOUT_RTX_TIMER</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaff2b88a373201fe023541b0e00a48749">SCTP_E_TIMEOUT_HEARTBEAT_TIMER</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda914409a350944272bbd72083b6b5281b">SCTP_E_RECEIVE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda365f70144611ac4229ac712c9fde06f0">SCTP_E_DUP_RECEIVED</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda1ab4fe49257ab6212a8dd336e4d07991">SCTP_E_PRIMARY</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda982447e78039f557e892297768866518">SCTP_E_QUEUE_MSGS_LIMIT</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda3d83eea39de6b7b191caae724ae5146e">SCTP_E_QUEUE_BYTES_LIMIT</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda861e58ca6562ffbfe4884eec2e704431">SCTP_E_NO_MORE_OUTSTANDING</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab4914b4201fb0cd1643109f690a59782">SCTP_E_IGNORE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda6ad094e0a90c2dc8a41628f621d27ca0">SCTP_E_DELIVERED</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda65d6eeb62214f93d929739b4f81cd01c">SCTP_E_SEND_SHUTDOWN_ACK</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda309375f495c30e879128bda85711a6b9">SCTP_E_STOP_SENDING</a>);
    }
    <span class="keywordflow">return</span> s;
<span class="preprocessor">#undef CASE</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a120222f3dccce018fec459e9374d1ee3"></a><!-- doxytag: member="SCTPAssociation::getFsm" ref="a120222f3dccce018fec459e9374d1ee3" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cFSM* SCTPAssociation::getFsm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>; };
</pre></div>
</div>
</div>
<a class="anchor" id="a0874a47246477bd7cf4029a73666bd3c"></a><!-- doxytag: member="SCTPAssociation::getFsmState" ref="a0874a47246477bd7cf4029a73666bd3c" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 SCTPAssociation::getFsmState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState(); };
</pre></div>
</div>
</div>
<a class="anchor" id="a611d859e2eb953ea8d43048c13916aca"></a><!-- doxytag: member="SCTPAssociation::getInitTimer" ref="a611d859e2eb953ea8d43048c13916aca" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* SCTPAssociation::getInitTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>; };
</pre></div>
</div>
</div>
<a class="anchor" id="ae066012288ac9da1c4c986d3cf5df717"></a><!-- doxytag: member="SCTPAssociation::getNextAddress" ref="ae066012288ac9da1c4c986d3cf5df717" args="(const SCTPPathVariables *oldPath) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&amp; SCTPAssociation::getNextAddress </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>oldPath</em></td><td>)</td>
          <td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                                                         {
            <span class="keyword">const</span> <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* nextPath = <a class="code" href="class_s_c_t_p_association.html#a54a47746095fa64e6976d22bdbb8e884">getNextPath</a>(oldPath);
            <span class="keywordflow">if</span>(nextPath != NULL) {
                <span class="keywordflow">return</span>(nextPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
            }
            <span class="keywordflow">return</span>(<a class="code" href="class_s_c_t_p_data_variables.html#ae82232420916f1378e2d4862148b342b">SCTPDataVariables::zeroAddress</a>);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ab4f6847bb20adea148ebf8cf2a071871"></a><!-- doxytag: member="SCTPAssociation::getNextDestination" ref="ab4f6847bb20adea148ebf8cf2a071871" args="(SCTPDataVariables *chunk) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> * SCTPAssociation::getNextDestination </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td>
          <td class="paramname"><em>chunk</em></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a01a9c50a325baf1ebf3d25972a776393">handleChunkReportedAsMissing()</a>, and <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* next;
    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* last;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Running getNextDestination()&quot;</span> &lt;&lt; endl;
    <span class="keywordflow">if</span> (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af9410192fb1add58020e8c9fd14928c1">numberOfTransmissions</a> == 0) {
        <span class="keywordflow">if</span> (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a24112a5f40c053aa671d3279afd415ad">getInitialDestinationPath</a>() == NULL) {
            next = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#afaefe95090e09d43d24794cf47a1ec0c">getPrimaryPath</a>();
        }
        <span class="keywordflow">else</span> {
            next = chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a24112a5f40c053aa671d3279afd415ad">getInitialDestinationPath</a>();
        }
    }
    <span class="keywordflow">else</span> {
        <span class="keywordflow">if</span> (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ab5595233870d7a9b0dc74b020ae7c9a1">hasBeenFastRetransmitted</a>) {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Chunk is scheduled for FastRetransmission. Next destination = &quot;</span>
                      &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aab8ca4e56deac9cab60e83c2fa7c2c6f">getLastDestination</a>() &lt;&lt; endl;
            <span class="keywordflow">return</span>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>());
        }
        <span class="comment">// If this is a retransmission, we should choose another, active path.</span>
        last = chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>();
        next = <a class="code" href="class_s_c_t_p_association.html#a54a47746095fa64e6976d22bdbb8e884">getNextPath</a>(last);
        <span class="keywordflow">if</span>( (next == NULL) || (next-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#afb5df73d90e27abfe7ca3108beb051f6">confirmed</a> == <span class="keyword">false</span>) ) {
            next = last;
        }
    }

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;getNextDestination(): chunk was last sent to &quot;</span> &lt;&lt; last-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
              &lt;&lt; <span class="stringliteral">&quot;, will next be sent to path &quot;</span> &lt;&lt; next-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; endl;
    <span class="keywordflow">return</span> (next);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a54a47746095fa64e6976d22bdbb8e884"></a><!-- doxytag: member="SCTPAssociation::getNextPath" ref="a54a47746095fa64e6976d22bdbb8e884" args="(const SCTPPathVariables *oldPath) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> * SCTPAssociation::getNextPath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>oldPath</em></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ab4f6847bb20adea148ebf8cf2a071871">getNextDestination()</a>, <a class="el" href="class_s_c_t_p_association.html#acb89ca4bcc84239541171327977762e9">process_TIMEOUT_HEARTBEAT()</a>, <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>, and <a class="el" href="class_s_c_t_p_association.html#a3cb6d23f3c34f789d2b1c5945d0d0a76">updateCounters()</a>.</p>
<div class="fragment"><pre class="fragment">{
    int32 hit = 0;
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.size() &gt; 1) {
        <span class="keywordflow">for</span> (SCTPPathMap::const_iterator iterator = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin();
              iterator != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); iterator++) {
            <span class="keywordflow">if</span> (iterator-&gt;second == oldPath) {
                <span class="keywordflow">if</span> (++hit == 1) {
                    <span class="keywordflow">continue</span>;
                }
                <span class="keywordflow">else</span> {
                    <span class="keywordflow">break</span>;
                }
            }
            <span class="keywordflow">if</span> (iterator-&gt;second-&gt;activePath) {
                <span class="keywordflow">return</span> iterator-&gt;second;
            }
        }
    }
    <span class="keywordflow">return</span>(NULL);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52141caf8994688922c957e8ddee864f"></a><!-- doxytag: member="SCTPAssociation::getOutboundDataChunk" ref="a52141caf8994688922c957e8ddee864f" args="(const SCTPPathVariables *path, const int32 availableSpace, const int32 availableCwnd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> * SCTPAssociation::getOutboundDataChunk </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32&#160;</td>
          <td class="paramname"><em>availableSpace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32&#160;</td>
          <td class="paramname"><em>availableCwnd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">/* are there chunks in the transmission queue ? If Yes -&gt; dequeue and return it */</span>
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;getOutboundDataChunk(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;):&quot;</span>
              &lt;&lt; <span class="stringliteral">&quot; availableSpace=&quot;</span> &lt;&lt; availableSpace
              &lt;&lt; <span class="stringliteral">&quot; availableCwnd=&quot;</span>  &lt;&lt; availableCwnd
              &lt;&lt; endl;
    <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.empty()) {
        <span class="keywordflow">for</span>(SCTPQueue::PayloadQueue::iterator it = <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.begin();
             it != <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.end(); it++) {
            <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* <a class="code" href="structchunk.html">chunk</a> = it-&gt;second;
            <span class="keywordflow">if</span>( (<a class="code" href="class_s_c_t_p_association.html#abab3867be074dea5acf98169c67efc78">chunkHasBeenAcked</a>(chunk) == <span class="keyword">false</span>) &amp;&amp;
                 (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ac7fecde61de64ef7a37e20a6a95c5d33">getNextDestinationPath</a>() == path) ) {
                <span class="keyword">const</span> int32 len = <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8+<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;getOutboundDataChunk() found chunk &quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>
                          &lt;&lt;<span class="stringliteral">&quot; in the transmission queue, length=&quot;</span> &lt;&lt; len &lt;&lt; endl;
                <span class="keywordflow">if</span> ((len &lt;= availableSpace) &amp;&amp;
                     ((int32)chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a> &lt;= availableCwnd)) {
                    <span class="comment">// T.D. 05.01.2010: The bookkeeping counters may only be decreased when</span>
                    <span class="comment">//                        this chunk is actually dequeued. Therefore, the check</span>
                    <span class="comment">//                        for &quot;chunkHasBeenAcked==false&quot; has been moved into the</span>
                    <span class="comment">//                        &quot;if&quot; statement above!</span>
                    <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.erase(it);
                    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a29289f62fc4878819b3b5ba132bf2c80">enqueuedInTransmissionQ</a> = <span class="keyword">false</span>;
                    CounterMap::iterator i = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>.find(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
                    i-&gt;second -= <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8+<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
                    CounterMap::iterator ib = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>.find(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
                    ib-&gt;second -= chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;
                    <span class="keywordflow">return</span> chunk;
                }
            }
        }
    }
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8270ebaccc92eb00ffae041a8406b094"></a><!-- doxytag: member="SCTPAssociation::getOutstandingBytes" ref="a8270ebaccc92eb00ffae041a8406b094" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 SCTPAssociation::getOutstandingBytes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a6c53aeb97e7132e5f09869f886e5807e">process_CLOSE()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>
<div class="fragment"><pre class="fragment">{
    int32 osb = 0;
    <span class="keywordflow">for</span> (SCTPPathMap::const_iterator pm = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin(); pm != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); pm++) {
        osb += pm-&gt;second-&gt;outstandingBytes;
    }
    <span class="keywordflow">return</span> osb;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abf49f9153557168b42e7b63eba81d849"></a><!-- doxytag: member="SCTPAssociation::getPath" ref="abf49f9153557168b42e7b63eba81d849" args="(const IPvXAddress &amp;pathId) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* SCTPAssociation::getPath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>pathId</em></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a0054d12cb552f7417b97c7e671231905">createSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a1f578c7e75df4066f4aaf34b8f195f6f">process_PRIMARY()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND()</a>, <a class="el" href="class_s_c_t_p_association.html#aa60a2e245739ecf7a4085a3e240a3730">process_STATUS()</a>, <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a1f4d814724e79e184655050a48ee1c25">processHeartbeatAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, <a class="el" href="class_s_c_t_p_association.html#a9db796beec52580f1356bd95e6f5fa2c">recordInPathVectors()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>, and <a class="el" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                           {
            SCTPPathMap::const_iterator iterator = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.find(pathId);
            <span class="keywordflow">if</span> (iterator !=<a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end()) {
                <span class="keywordflow">return</span> iterator-&gt;second;
            }
            <span class="keywordflow">return</span> NULL;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a381530dc6d6a89ddc864791026b1af59"></a><!-- doxytag: member="SCTPAssociation::getRetransmissionQueue" ref="a381530dc6d6a89ddc864791026b1af59" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_queue.html">SCTPQueue</a>* SCTPAssociation::getRetransmissionQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">SCTP::removeAssociation()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>; };
</pre></div>
</div>
</div>
<a class="anchor" id="af51bc7f5f485cce416dccb77ae694765"></a><!-- doxytag: member="SCTPAssociation::getSackTimer" ref="af51bc7f5f485cce416dccb77ae694765" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* SCTPAssociation::getSackTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>; };
</pre></div>
</div>
</div>
<a class="anchor" id="a2f8247f14c80f45cbfa9e269dbf52545"></a><!-- doxytag: member="SCTPAssociation::getSctpAlgorithm" ref="a2f8247f14c80f45cbfa9e269dbf52545" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_algorithm.html">SCTPAlgorithm</a>* SCTPAssociation::getSctpAlgorithm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>; };
</pre></div>
</div>
</div>
<a class="anchor" id="adacca069df6aab5b3a093e0575204bf8"></a><!-- doxytag: member="SCTPAssociation::getSctpMain" ref="adacca069df6aab5b3a093e0575204bf8" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p.html">SCTP</a>* SCTPAssociation::getSctpMain </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_path_variables.html#ad374aa007507de709b8467da3cda8a48">SCTPPathVariables::SCTPPathVariables()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>; };
</pre></div>
</div>
</div>
<a class="anchor" id="a6029bb9f35f1d6b0779d6811ce1ed0cb"></a><!-- doxytag: member="SCTPAssociation::getShutdownTimer" ref="a6029bb9f35f1d6b0779d6811ce1ed0cb" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* SCTPAssociation::getShutdownTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>; };
</pre></div>
</div>
</div>
<a class="anchor" id="a498e92afc35c39fd74f61408d08443ba"></a><!-- doxytag: member="SCTPAssociation::getState" ref="a498e92afc35c39fd74f61408d08443ba" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_state_variables.html">SCTPStateVariables</a>* SCTPAssociation::getState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>; };
</pre></div>
</div>
</div>
<a class="anchor" id="a12c000086b06013248658c78a502d90a"></a><!-- doxytag: member="SCTPAssociation::getTransmissionQueue" ref="a12c000086b06013248658c78a502d90a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_queue.html">SCTPQueue</a>* SCTPAssociation::getTransmissionQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">SCTP::removeAssociation()</a>, and <a class="el" href="class_s_c_t_p_algorithm.html#aaef644b59f18aa40cea754616c8f9f61">SCTPAlgorithm::setAssociation()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>; };
</pre></div>
</div>
</div>
<a class="anchor" id="a297f87caf9d5e3b6cf596a5e44381061"></a><!-- doxytag: member="SCTPAssociation::handleChunkReportedAsAcked" ref="a297f87caf9d5e3b6cf596a5e44381061" args="(uint32 &amp;highestNewAck, simtime_t &amp;rttEstimation, SCTPDataVariables *myChunk, SCTPPathVariables *sackPath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::handleChunkReportedAsAcked </td>
          <td>(</td>
          <td class="paramtype">uint32 &amp;&#160;</td>
          <td class="paramname"><em>highestNewAck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t &amp;&#160;</td>
          <td class="paramname"><em>rttEstimation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td>
          <td class="paramname"><em>myChunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>sackPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* myChunkLastPath = myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>();
    <span class="keywordflow">if</span> ( (myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af9410192fb1add58020e8c9fd14928c1">numberOfTransmissions</a> == 1) &amp;&amp;
          (myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ac25b1776cd86480fba00adf7ffc3d281">hasBeenReneged</a> == <span class="keyword">false</span>) ) {
        <span class="keywordflow">if</span> (myChunkLastPath == sackPath) {
            <span class="keyword">const</span> simtime_t timeDifference = simTime() - myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a347b1c461d332be999051c3d1f0abaa1">sendTime</a>;
            <span class="keywordflow">if</span>((timeDifference &lt; rttEstimation) || (rttEstimation == -1.0)) {
                rttEstimation = timeDifference;
            }
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime()          &lt;&lt; <span class="stringliteral">&quot; processSackArrived: computed rtt time diff == &quot;</span>
                      &lt;&lt; timeDifference &lt;&lt; <span class="stringliteral">&quot; for TSN &quot;</span>&lt;&lt; myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> &lt;&lt; endl;
        }
    }
    <span class="keywordflow">if</span> ( (myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aaa76f0b0c8c7a31a466f08b1c1f917eb">hasBeenAbandoned</a> == <span class="keyword">false</span>)    &amp;&amp;
          (myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ac25b1776cd86480fba00adf7ffc3d281">hasBeenReneged</a> == <span class="keyword">false</span>) ) {
        myChunkLastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a44069a398db868dd42e80fa32bea5706">newlyAckedBytes</a> += (myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>);

        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;: GapAcked TSN &quot;</span> &lt;&lt; myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>
                  &lt;&lt; <span class="stringliteral">&quot; on path &quot;</span> &lt;&lt; myChunkLastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; endl;

        <span class="keywordflow">if</span> (myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> &gt; highestNewAck) {
            highestNewAck = myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>;
        }
        <a class="code" href="class_s_c_t_p_association.html#ac9f7ef76b3f23b83b5c4c261bf4df4ae">ackChunk</a>(myChunk);
        <span class="keywordflow">if</span> (myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a>) {
            <a class="code" href="class_s_c_t_p_association.html#a2178e3130838480b58adc77639d7862c">decreaseOutstandingBytes</a>(myChunk);
        }
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#a2834802fcd42c759e97cd1e450ad1d06">getChunk</a>(myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>)) {      <span class="comment">// I.R. 02.01.07</span>
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Found TSN &quot;</span> &lt;&lt; myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> &lt;&lt; <span class="stringliteral">&quot; in transmissionQ -&gt; remote it&quot;</span> &lt;&lt; endl;
            <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#a2f9d71c42968c65fcc38e685c681dcf5">removeMsg</a>(myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>);
            myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a29289f62fc4878819b3b5ba132bf2c80">enqueuedInTransmissionQ</a> = <span class="keyword">false</span>;
            CounterMap::iterator q = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>.find(myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af39b432c96285a2e9cd0d0320d091d7c">getNextDestination</a>());
            q-&gt;second -= <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8+<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
            CounterMap::iterator qb = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>.find(myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af39b432c96285a2e9cd0d0320d091d7c">getNextDestination</a>());
            qb-&gt;second -= myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;
        }
        myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0311c740e321088d6ba6626816993e86">gapReports</a> = 0;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a01a9c50a325baf1ebf3d25972a776393"></a><!-- doxytag: member="SCTPAssociation::handleChunkReportedAsMissing" ref="a01a9c50a325baf1ebf3d25972a776393" args="(const SCTPSackChunk *sackChunk, const uint32 highestNewAck, SCTPDataVariables *myChunk, const SCTPPathVariables *sackPath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::handleChunkReportedAsMissing </td>
          <td>(</td>
          <td class="paramtype">const SCTPSackChunk *&#160;</td>
          <td class="paramname"><em>sackChunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>highestNewAck</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td>
          <td class="paramname"><em>myChunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>sackPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* myChunkLastPath = myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>();
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;TSN &quot;</span> &lt;&lt; myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> &lt;&lt; <span class="stringliteral">&quot; is missing in gap reports (last &quot;</span>
              &lt;&lt; myChunkLastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;) &quot;</span>;
    <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#abab3867be074dea5acf98169c67efc78">chunkHasBeenAcked</a>(myChunk)) {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;has not been acked, highestNewAck=&quot;</span> &lt;&lt; highestNewAck
                  &lt;&lt; <span class="stringliteral">&quot; countsAsOutstanding=&quot;</span> &lt;&lt; myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a> &lt;&lt; endl;
        <span class="keyword">const</span> uint32 chunkReportedAsMissing = (highestNewAck &gt; myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>) ? 1 : 0;
        <span class="keywordflow">if</span> (chunkReportedAsMissing &gt; 0) {
            <span class="comment">// T.D. 15.04.09: Increase gapReports by chunkReportedAsMissing.</span>
            <span class="comment">// Fixed bug here: gapReports += chunkReportedAsMissing instead of gapReports = chunkReportedAsMissing.</span>
            <span class="comment">/*</span>
<span class="comment">            printf(&quot;GapReports for TSN %u [ret=%d,fast=%s] at t=%s:  %d --&gt; %d by %d\n&quot;,</span>
<span class="comment">                        myChunk-&gt;tsn,</span>
<span class="comment">                        myChunk-&gt;numberOfRetransmissions,</span>
<span class="comment">                        (myChunk-&gt;hasBeenFastRetransmitted == true) ? &quot;YES&quot; : &quot;no&quot;,</span>
<span class="comment">                        simTime().str().c_str(),</span>
<span class="comment">                        myChunk-&gt;gapReports,</span>
<span class="comment">                        myChunk-&gt;gapReports + chunkReportedAsMissing,</span>
<span class="comment">                        chunkReportedAsMissing);</span>
<span class="comment">            */</span>
            myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0311c740e321088d6ba6626816993e86">gapReports</a> += chunkReportedAsMissing;

            myChunkLastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#af4324130b5f8f8b69167824aaac5f97d">gapNAcksInLastSACK</a>++;

            <span class="keywordflow">if</span> (myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0311c740e321088d6ba6626816993e86">gapReports</a> &gt;= <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1e7737c5f6c7fa4c3faa782f0078a9b7">numGapReports</a>) {
                <span class="keywordtype">bool</span> fastRtx = <span class="keyword">false</span>;
                fastRtx = ((myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ab5595233870d7a9b0dc74b020ae7c9a1">hasBeenFastRetransmitted</a> == <span class="keyword">false</span>) &amp;&amp;
                              (myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a7670756ef2a46e2f2185a047d19a3c03">numberOfRetransmissions</a> == 0));
                <span class="keywordflow">if</span> (fastRtx) {

                    <span class="comment">// ====== Add chunk to transmission queue ========</span>
                    SCTPQueue::PayloadQueue::iterator it = <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.find(myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>);
                    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#a2834802fcd42c759e97cd1e450ad1d06">getChunk</a>(myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>) == NULL) {
                        <a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html">SCTP::AssocStat</a>* assocStat = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#ac0d7608e4fb9d3d5cc41d98ac2cd66de">getAssocStat</a>(<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
                        <span class="keywordflow">if</span>(assocStat) {
                            assocStat-&gt;<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a375a63659531c9124b90e7dfa527d34b">numFastRtx</a>++;
                        }
                        myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ab5595233870d7a9b0dc74b020ae7c9a1">hasBeenFastRetransmitted</a> = <span class="keyword">true</span>;

                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;: Fast RTX for TSN &quot;</span>
                                  &lt;&lt; myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> &lt;&lt; <span class="stringliteral">&quot; on path &quot;</span> &lt;&lt; myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aab8ca4e56deac9cab60e83c2fa7c2c6f">getLastDestination</a>() &lt;&lt; endl;
                        myChunkLastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae6fd6147ac0475508eb44ae76c518cda">numberOfFastRetransmissions</a>++;

                        myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ade6f850289ebac0c4d7964a96fc754f5">setNextDestination</a>(<a class="code" href="class_s_c_t_p_association.html#ab4f6847bb20adea148ebf8cf2a071871">getNextDestination</a>(myChunk));
                        <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* myChunkNextPath = myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ac7fecde61de64ef7a37e20a6a95c5d33">getNextDestinationPath</a>();
                        assert(myChunkNextPath != NULL);

                        <span class="keywordflow">if</span> (myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a>) {
                            <a class="code" href="class_s_c_t_p_association.html#a2178e3130838480b58adc77639d7862c">decreaseOutstandingBytes</a>(myChunk);
                        }
                        <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#a198854d52d738bb77bb031ffe863b5be">checkAndInsertChunk</a>(myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>, myChunk)) {
                            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Fast RTX: cannot add message/chunk (TSN=&quot;</span>
                                      &lt;&lt; myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> &lt;&lt; <span class="stringliteral">&quot;) to the transmissionQ&quot;</span> &lt;&lt; endl;
                        }
                        <span class="keywordflow">else</span>    {
                            myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a29289f62fc4878819b3b5ba132bf2c80">enqueuedInTransmissionQ</a> = <span class="keyword">true</span>;
                            CounterMap::iterator q = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>.find(myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af39b432c96285a2e9cd0d0320d091d7c">getNextDestination</a>());
                            q-&gt;second += <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8+<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
                            CounterMap::iterator qb = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>.find(myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af39b432c96285a2e9cd0d0320d091d7c">getNextDestination</a>());
                            qb-&gt;second += myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;
                        }
                        myChunkNextPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad26e872a5b7a170d5585fdc51d2c2f92">requiresRtx</a> = <span class="keyword">true</span>;
                        <span class="keywordflow">if</span>(myChunkNextPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec0ed38b47b0e04b90dd7ccf70a03bcb">findLowestTSN</a> == <span class="keyword">true</span>) {
                            <span class="comment">// TD 08.12.09: fixed detection of lowest TSN retransmitted</span>
                            myChunkNextPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a298953666d258498705f8fcf888b5f6a">lowestTSNRetransmitted</a> = <span class="keyword">true</span>;
                        }
                    }
                }
            }
        }
        <span class="keywordflow">else</span> {
            myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ab5595233870d7a9b0dc74b020ae7c9a1">hasBeenFastRetransmitted</a> = <span class="keyword">false</span>;
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;TSN &quot;</span> &lt;&lt; myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> &lt;&lt; <span class="stringliteral">&quot; countsAsOutstanding=&quot;</span>
                        &lt;&lt; myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a> &lt;&lt; endl;
            <span class="keywordflow">if</span> (highestNewAck &gt; myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>) {
                myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0311c740e321088d6ba6626816993e86">gapReports</a>++;
            }
            myChunkLastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2168b109c4ea38df8f6c48d9e020e5c9">gapAcksInLastSACK</a>++;
        }
        myChunkLastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec0ed38b47b0e04b90dd7ccf70a03bcb">findLowestTSN</a> = <span class="keyword">false</span>;
    }
    <span class="keywordflow">else</span> {
        <span class="comment">// Reneging, type 1:</span>
        <span class="comment">// A chunk in the gap blocks has been un-acked =&gt; reneg it.</span>
                    <a class="code" href="class_s_c_t_p_association.html#ab70d01d19820a5a16547e439b142d5fe">tsnWasReneged</a>(myChunk,
                                      1);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaf93ca861bf56525302bb2b661bdd4df"></a><!-- doxytag: member="SCTPAssociation::increaseOutstandingBytes" ref="aaf93ca861bf56525302bb2b661bdd4df" args="(SCTPDataVariables *chunk, SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::increaseOutstandingBytes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> += chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9a4b261bb104828e3d1c14f89cdc3a6d">outstandingBytes</a> += chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;

    CounterMap::iterator iterator = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a767e2849d053dd45d294d8678b8daed9">roomRetransQ</a>.find(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
        iterator-&gt;second += <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a> + <a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a681a359c388e9b7f38250ceb3626515e"></a><!-- doxytag: member="SCTPAssociation::indicationName" ref="a681a359c388e9b7f38250ceb3626515e" args="(const int32 code)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * SCTPAssociation::indicationName </td>
          <td>(</td>
          <td class="paramtype">const int32&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: returns name of SCTP_I_xxx constants </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp()</a>, and <a class="el" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#define CASE(x) case x: s=#x+7; break</span>
<span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* s = <span class="stringliteral">&quot;unknown&quot;</span>;
    <span class="keywordflow">switch</span> (code) {
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a1eb9f18f68a700c545427ba5231a9dc4">SCTP_I_DATA</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a723241390fabc3b46cb79e9f5541b01b">SCTP_I_DATA_NOTIFICATION</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a6b85de91f4bd3609fc7bcd7994101a3d">SCTP_I_ESTABLISHED</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3adcb0d50416fbeb73876eba7d7b8ee930">SCTP_I_PEER_CLOSED</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3ace58e516838fe8c15ac9ce67f4f4409c">SCTP_I_CLOSED</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a16f2119f34b440b981e5f1e6386ac018">SCTP_I_CONNECTION_REFUSED</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3aee8733c691e3dbeea6dc2f701bcf027b">SCTP_I_CONNECTION_RESET</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3ab114530461e728f84d5db50dd5670620">SCTP_I_TIMED_OUT</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3abbf25758d570841736d12727b53ff2be">SCTP_I_STATUS</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a72ee49d265f6c75166038f085a52a1bf">SCTP_I_ABORT</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a21bb0580e0fb02c3a89d63062a14b88b">SCTP_I_SHUTDOWN_RECEIVED</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a781cc2063dc1656c84a04fde2991e2d2">SCTP_I_SEND_MSG</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a75904bee9e03f629a2657337857f4e52">SCTP_I_SENDQUEUE_FULL</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a4ed59ad366001ebd94844599c3ed76ec">SCTP_I_SENDQUEUE_ABATED</a>);
    }
    <span class="keywordflow">return</span> s;
<span class="preprocessor">#undef CASE</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a460894500fa0ffbff9cd62ef59db7475"></a><!-- doxytag: member="SCTPAssociation::initAssociation" ref="a460894500fa0ffbff9cd62ef59db7475" args="(SCTPOpenCommand *openCmd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::initAssociation </td>
          <td>(</td>
          <td class="paramtype">SCTPOpenCommand *&#160;</td>
          <td class="paramname"><em>openCmd</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: creates send/receive queues and sctpAlgorithm </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE()</a>, and <a class="el" href="class_s_c_t_p_association.html#a5cc7381e91d34e5c13a4b97eb02f9b7e">process_OPEN_PASSIVE()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;SCTPAssociationUtil:initAssociation\n&quot;</span>;
    <span class="comment">// create send/receive queues</span>
    <span class="keyword">const</span> <span class="keywordtype">char</span> *queueClass = openCmd-&gt;getQueueClass();
    <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a> = check_and_cast&lt;<a class="code" href="class_s_c_t_p_queue.html">SCTPQueue</a> *&gt;(createOne(queueClass));

    <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a> = check_and_cast&lt;<a class="code" href="class_s_c_t_p_queue.html">SCTPQueue</a> *&gt;(createOne(queueClass));
    <a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a> = openCmd-&gt;getOutboundStreams();
    <span class="comment">// create algorithm</span>
    <span class="keyword">const</span> <span class="keywordtype">char</span> *sctpAlgorithmClass = openCmd-&gt;getSctpAlgorithmClass();
    <span class="keywordflow">if</span> (!sctpAlgorithmClass || !sctpAlgorithmClass[0])
        sctpAlgorithmClass = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;sctpAlgorithmClass&quot;</span>);
    <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a> = check_and_cast&lt;<a class="code" href="class_s_c_t_p_algorithm.html">SCTPAlgorithm</a> *&gt;(createOne(sctpAlgorithmClass));
    <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>-&gt;<a class="code" href="class_s_c_t_p_algorithm.html#aaef644b59f18aa40cea754616c8f9f61">setAssociation</a>(<span class="keyword">this</span>);
    <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>-&gt;<a class="code" href="class_s_c_t_p_algorithm.html#a2061a42140d0acd50454a93799f58974">initialize</a>();
    <span class="comment">// create state block</span>
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a> = <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>-&gt;<a class="code" href="class_s_c_t_p_algorithm.html#aaca16656400d64a60d3f29e838c08ca1">createStateVariables</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a27ab7a3f0d7e82a5b48f47e39e53dd23"></a><!-- doxytag: member="SCTPAssociation::initCCParameters" ref="a27ab7a3f0d7e82a5b48f47e39e53dd23" args="(SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::initCCParameters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>SCTPCCFunctions </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ab385b4edb0ddac6e69aa350df14b480a">pmStartPathManagement()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>
<div class="fragment"><pre class="fragment">{
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> = (int32)<a class="code" href="_s_c_t_p_association_8h.html#ad61931b1ae6b8e5bb714e2e6744f4470">min</a>(4 * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>, <a class="code" href="_s_c_t_p_association_8h.html#afdb84bd44c7cbd3fc9cbe1e3bf07d948">max</a>(2 * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>, 4380));
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a>;
    <a class="code" href="class_s_c_t_p_association.html#a753567499c04f5e4b55cb92790e4c96a">recordCwndUpdate</a>(path);

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tCC [initCCParameters]\t&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
              &lt;&lt; <span class="stringliteral">&quot;\tsst=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &lt;&lt; endl;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae6aa9f8b9a817bb3caddb96c68b2b9c5"></a><!-- doxytag: member="SCTPAssociation::initStreams" ref="ae6aa9f8b9a817bb3caddb96c68b2b9c5" args="(uint32 inStreams, uint32 outStreams)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::initStreams </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>inStreams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>outStreams</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32 i;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;initStreams instreams=&quot;</span>&lt;&lt;inStreams&lt;&lt;<span class="stringliteral">&quot;  outstream=&quot;</span>&lt;&lt;outStreams&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a80374427a755802cd7687c7a77b26e9c">receiveStreams</a>.size()==0 &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.size()==0)
    {
        <span class="keywordflow">for</span> (i=0; i&lt;inStreams; i++)
        {
            <a class="code" href="class_s_c_t_p_receive_stream.html">SCTPReceiveStream</a>* rcvStream = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_receive_stream.html">SCTPReceiveStream</a>();

            this-&gt;<a class="code" href="class_s_c_t_p_association.html#a80374427a755802cd7687c7a77b26e9c">receiveStreams</a>[i]=rcvStream;
            rcvStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#aee666080c3b845aee5f48240d8a166d8">setStreamId</a>(i);
            this-&gt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aaf9ea2f913888ba783ae161088669ea6">numMsgsReq</a>[i]=0;
        }
        <span class="keywordflow">for</span> (i=0; i&lt;outStreams; i++)
        {
            <a class="code" href="class_s_c_t_p_send_stream.html">SCTPSendStream</a>* sendStream = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_send_stream.html">SCTPSendStream</a>(i);
            this-&gt;<a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>[i]=sendStream;
            sendStream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#a5f711176e3de3acd57f0aa3a6052f8e7">setStreamId</a>(i);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac39737ee344fd4a8475b7efee8c47c31"></a><!-- doxytag: member="SCTPAssociation::loadPacket" ref="ac39737ee344fd4a8475b7efee8c47c31" args="(SCTPPathVariables *pathVar, SCTPMessage **sctpMsg, uint16 *chunksAdded, uint16 *dataChunksAdded, uint32 *packetBytes, bool *authAdded)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::loadPacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>pathVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> **&#160;</td>
          <td class="paramname"><em>sctpMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16 *&#160;</td>
          <td class="paramname"><em>chunksAdded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16 *&#160;</td>
          <td class="paramname"><em>dataChunksAdded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&#160;</td>
          <td class="paramname"><em>packetBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>authAdded</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    *sctpMsg = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a71c1bdd09aeb8aca87c5ba84d591f6fa">sctpMsg</a>;
    *chunksAdded = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab43a9559edb781b07cff616804a628db">chunksAdded</a>;
    *dataChunksAdded = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a057e2c2320dafa606c1f092a9fb66db9">dataChunksAdded</a>;
    *packetBytes = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a74a0620b592f25bb21ee68452dbb8740">packetBytes</a>;
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;loadPacket: path=&quot;</span> &lt;&lt; pathVar-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot; osb=&quot;</span> &lt;&lt; pathVar-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; pathVar-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> + <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a74a0620b592f25bb21ee68452dbb8740">packetBytes</a> &lt;&lt; endl;
    pathVar-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> += <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a74a0620b592f25bb21ee68452dbb8740">packetBytes</a>;
    <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aab189302bf40c67f2eec631bcd7de51f">bookedSumSendStreams</a> -= <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a74a0620b592f25bb21ee68452dbb8740">packetBytes</a>;

    <span class="keywordflow">for</span> (uint16 i = 0; i &lt; (*sctpMsg)-&gt;getChunksArraySize(); i++)
        <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.find(((SCTPDataChunk*)(*sctpMsg)-&gt;getChunks(i))-&gt;getTsn())-&gt;second-&gt;countsAsOutstanding = <span class="keyword">true</span>;

}
</pre></div>
</div>
</div>
<a class="anchor" id="a164799c396a6e3b931854cc4af513ff4"></a><!-- doxytag: member="SCTPAssociation::makeDataVarFromDataMsg" ref="a164799c396a6e3b931854cc4af513ff4" args="(SCTPDataMsg *datMsg, SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> * SCTPAssociation::makeDataVarFromDataMsg </td>
          <td>(</td>
          <td class="paramtype">SCTPDataMsg *&#160;</td>
          <td class="paramname"><em>datMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* datVar = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>();

    datMsg-&gt;setInitialDestination(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ac1c4dfcec113a6eecaf4214b19c0eab2">setInitialDestination</a>(path);

    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a686aefff3b5cfc16ce1bfb7ed19d63de">bbit</a>                            = datMsg-&gt;getBBit();
    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad6905d87d02a21b9716f87c002d8297b">ebit</a>                            = datMsg-&gt;getEBit();
    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aa381bd2154d7b6846ae8fe7694b96a27">enqueuingTime</a>               = datMsg-&gt;getEnqueuingTime();
    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a6c7a768cb1d61bdce6b7c3ddef9dc9b3">expiryTime</a>                  = datMsg-&gt;getExpiryTime();
    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a960213e567faeed87d9ce98e993177a4">ppid</a>                            = datMsg-&gt;getPpid();
    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>                             = datMsg-&gt;getBitLength();
    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aa3c89c48c0c3ab5cc9b73d7ff525f67e">sid</a>                             = datMsg-&gt;getSid();
    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a2f4e77f21b44ba30acf304159ffa0089">allowedNoRetransmissions</a> = datMsg-&gt;getRtx();
    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>                        = datMsg-&gt;getBooksize();

    <span class="comment">// ------ Stream handling ---------------------------------------</span>
    SCTPSendStreamMap::iterator iterator = <a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.find(datMsg-&gt;getSid());
    <a class="code" href="class_s_c_t_p_send_stream.html">SCTPSendStream</a>*              stream  = iterator-&gt;second;
    uint32                           nextSSN     = stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#ac4f169c12b71546da5bedb3dfd465188">getNextStreamSeqNum</a>();
    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aaafb0500520fdd9936987be73f6a27ae">userData</a> = datMsg-&gt;decapsulate();
    <span class="keywordflow">if</span> (datMsg-&gt;getOrdered()) {
        <span class="comment">// ------ Ordered mode: assign SSN ---------</span>
        <span class="keywordflow">if</span> (datMsg-&gt;getEBit())
        {
            datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a518f7b638f4184fc01c4bdd20d641601">ssn</a> = nextSSN++;
        }
        <span class="keywordflow">else</span>
        {
            datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a518f7b638f4184fc01c4bdd20d641601">ssn</a> = nextSSN;
        }

        datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a8a53863ea46d99a486027459aed60c49">ordered</a> = <span class="keyword">true</span>;
        <span class="keywordflow">if</span> (nextSSN &gt; 65535) {
            stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#aa6f228a1b43a70e3022e559ad7b709c1">setNextStreamSeqNum</a>(0);
        }
        <span class="keywordflow">else</span> {
            stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#aa6f228a1b43a70e3022e559ad7b709c1">setNextStreamSeqNum</a>(nextSSN);
        }
    }
    <span class="keywordflow">else</span> {
        <span class="comment">// ------ Ordered mode: no SSN needed ------</span>
        datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a518f7b638f4184fc01c4bdd20d641601">ssn</a>      = 0;
        datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a8a53863ea46d99a486027459aed60c49">ordered</a> = <span class="keyword">false</span>;
    }


    <span class="keywordflow">return</span>(datVar);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a45de5f3a74bba48af92b248edd9c9312"></a><!-- doxytag: member="SCTPAssociation::makeRoomForTsn" ref="a45de5f3a74bba48af92b248edd9c9312" args="(const uint32 tsn, const uint32 length, const bool uBit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::makeRoomForTsn </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>uBit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_queue.html">SCTPQueue</a>* stream, dStream;
    uint32 sum  = 0;
    uint32 comp = 0;
    <span class="keywordtype">bool</span>     delQ = <span class="keyword">false</span>;
    uint32 high = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#af02f163ebe6c28c874d7734bbc2a31bf">highestTsnStored</a>;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;makeRoomForTsn: tsn=&quot;</span> &lt;&lt; tsn
              &lt;&lt; <span class="stringliteral">&quot;, length=&quot;</span> &lt;&lt; length &lt;&lt; <span class="stringliteral">&quot; high=&quot;</span> &lt;&lt; high &lt;&lt; endl;
    <span class="keywordflow">while</span> ((sum &lt; length) &amp;&amp; (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a>&gt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c4c403bd391f0be75e1b71254828274">lastTsnAck</a>)) {
        comp = sum;
        <span class="keywordflow">for</span> (SCTPReceiveStreamMap::iterator iter = <a class="code" href="class_s_c_t_p_association.html#a80374427a755802cd7687c7a77b26e9c">receiveStreams</a>.begin();
              iter!=<a class="code" href="class_s_c_t_p_association.html#a80374427a755802cd7687c7a77b26e9c">receiveStreams</a>.end(); iter++) {
            <span class="keywordflow">if</span> (tsn &gt; high) {
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="keywordflow">if</span> (uBit) {
                stream = iter-&gt;second-&gt;getUnorderedQ();
            }
            <span class="keywordflow">else</span> {
                stream = iter-&gt;second-&gt;getOrderedQ();
            }
            <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* <a class="code" href="structchunk.html">chunk</a> = stream-&gt;<a class="code" href="class_s_c_t_p_queue.html#a2834802fcd42c759e97cd1e450ad1d06">getChunk</a>(high);
            <span class="keywordflow">if</span> (chunk == NULL) {      <span class="comment">//12.06.08</span>
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; high &lt;&lt; <span class="stringliteral">&quot; not found in orderedQ. Try deliveryQ&quot;</span> &lt;&lt; endl;
                stream = iter-&gt;second-&gt;getDeliveryQ();
                chunk = stream-&gt;<a class="code" href="class_s_c_t_p_queue.html#a2834802fcd42c759e97cd1e450ad1d06">getChunk</a>(high);
                delQ = <span class="keyword">true</span>;
            }
            <span class="keywordflow">if</span> (chunk != NULL) {
                sum+=chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>;
                <span class="keywordflow">if</span> (stream-&gt;<a class="code" href="class_s_c_t_p_queue.html#ad3cf7f62b5553eb2b2a9b8417d756568">deleteMsg</a>(high)) {
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; high &lt;&lt; <span class="stringliteral">&quot; found and deleted&quot;</span> &lt;&lt; endl;

                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>-=chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8; <span class="comment">//12.06.08</span>
                    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a04381d198b1e78fb563d5e460c40c6a5">ssnGt</a>(iter-&gt;second-&gt;getExpectedStreamSeqNum(),chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a518f7b638f4184fc01c4bdd20d641601">ssn</a>)) {
                        iter-&gt;second-&gt;setExpectedStreamSeqNum(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a518f7b638f4184fc01c4bdd20d641601">ssn</a>);
                    }
                }
                <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aa860967a47451b6ea090f0c3b81156de">roomSumRcvStreams</a> -= <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8 + <a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
                <span class="keywordflow">if</span> (high == <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a>) {
                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a>--;
                }
                <a class="code" href="class_s_c_t_p_association.html#a6d86b97308eef3f43f93ca939a3d1a52">removeFromGapList</a>(high);

                <span class="keywordflow">if</span> (tsn &gt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a>) {
                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a> = tsn;
                }
                high--;
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">else</span> {
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;TSN &quot;</span> &lt;&lt; high &lt;&lt; <span class="stringliteral">&quot; not found in stream &quot;</span>
                          &lt;&lt; iter-&gt;second-&gt;getStreamId() &lt;&lt; endl;
            }
        }

        <span class="keywordflow">if</span> (comp == sum) {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; high &lt;&lt; <span class="stringliteral">&quot; not found in any stream&quot;</span> &lt;&lt; endl;
            high--;
        }
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#af02f163ebe6c28c874d7734bbc2a31bf">highestTsnStored</a> = high;

        <span class="keywordflow">if</span> (tsn &gt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a>) {
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae6298a23676ec2a10036aa66ed6af7b3"></a><!-- doxytag: member="SCTPAssociation::makeVarFromMsg" ref="ae6298a23676ec2a10036aa66ed6af7b3" args="(SCTPDataChunk *datachunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> * SCTPAssociation::makeVarFromMsg </td>
          <td>(</td>
          <td class="paramtype">SCTPDataChunk *&#160;</td>
          <td class="paramname"><em>datachunk</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* <a class="code" href="structchunk.html">chunk</a> = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>();

    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a686aefff3b5cfc16ce1bfb7ed19d63de">bbit</a> = dataChunk-&gt;getBBit();
    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad6905d87d02a21b9716f87c002d8297b">ebit</a> = dataChunk-&gt;getEBit();
    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aa3c89c48c0c3ab5cc9b73d7ff525f67e">sid</a>  = dataChunk-&gt;getSid();
    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a518f7b638f4184fc01c4bdd20d641601">ssn</a>  = dataChunk-&gt;getSsn();
    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a960213e567faeed87d9ce98e993177a4">ppid</a> = dataChunk-&gt;getPpid();
    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>  = dataChunk-&gt;getTsn();
    <span class="keywordflow">if</span> (!dataChunk-&gt;getUBit()) {
        chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a8a53863ea46d99a486027459aed60c49">ordered</a> = <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span> {
        chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a8a53863ea46d99a486027459aed60c49">ordered</a> = <span class="keyword">false</span>;
    }
    SCTPSimpleMessage* smsg=check_and_cast&lt;SCTPSimpleMessage*&gt;(dataChunk-&gt;decapsulate());

    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aaafb0500520fdd9936987be73f6a27ae">userData</a> = smsg;
    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a> = smsg-&gt;getDataLen()*8;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;makeVarFromMsg: queuedBytes has been increased to &quot;</span>
              &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a> &lt;&lt; endl;
    <span class="keywordflow">return</span> chunk;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aded774353d79ba7bdf53651ddc178609"></a><!-- doxytag: member="SCTPAssociation::moveChunkToOtherPath" ref="aded774353d79ba7bdf53651ddc178609" args="(SCTPDataVariables *chunk, SCTPPathVariables *newPath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::moveChunkToOtherPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>newPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ====== Prepare next destination =======================================</span>
    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* lastPath = chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>();
    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ab5595233870d7a9b0dc74b020ae7c9a1">hasBeenFastRetransmitted</a> = <span class="keyword">false</span>;
    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0311c740e321088d6ba6626816993e86">gapReports</a>                     = 0;
    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ade6f850289ebac0c4d7964a96fc754f5">setNextDestination</a>(newPath);
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;: Timer-Based RTX for TSN &quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>
              &lt;&lt; <span class="stringliteral">&quot;: lastDestination=&quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aab8ca4e56deac9cab60e83c2fa7c2c6f">getLastDestination</a>()
              &lt;&lt; <span class="stringliteral">&quot; nextDestination=&quot;</span>  &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af39b432c96285a2e9cd0d0320d091d7c">getNextDestination</a>() &lt;&lt; endl;

    <span class="comment">// ======= Remove chunk&#39;s booksize from outstanding bytes ================</span>
    <span class="comment">// T.D. 12.02.2010: This case may happen when using sender queue control!</span>
    <span class="keywordflow">if</span>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a>) {
        assert(lastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> &gt;= chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>);
        lastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> -= chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;
        assert((int32)lastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> &gt;= 0);
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9a4b261bb104828e3d1c14f89cdc3a6d">outstandingBytes</a> -= chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;
        assert((int64)<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9a4b261bb104828e3d1c14f89cdc3a6d">outstandingBytes</a> &gt;= 0);
        chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a> = <span class="keyword">false</span>;
        <span class="comment">// T.D. 12.02.2010: No Timer-Based RTX is necessary any more when there</span>
        <span class="comment">//                        are no outstanding bytes!</span>
        <span class="keywordflow">if</span>(lastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> == 0) {
            <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(lastPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>);
        }
    }


    <span class="comment">// ====== Perform bookkeeping ============================================</span>
    <span class="comment">// Check, if chunk_ptr-&gt;tsn is already in transmission queue.</span>
    <span class="comment">// This can happen in case multiple timeouts occur in succession.</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#a198854d52d738bb77bb031ffe863b5be">checkAndInsertChunk</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>, chunk)) {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;TSN &quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> &lt;&lt; <span class="stringliteral">&quot; already in transmissionQ&quot;</span> &lt;&lt; endl;
        <span class="keywordflow">return</span>;
    }
    <span class="keywordflow">else</span> {
        chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a29289f62fc4878819b3b5ba132bf2c80">enqueuedInTransmissionQ</a> = <span class="keyword">true</span>;
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Inserting TSN &quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> &lt;&lt; <span class="stringliteral">&quot; into transmissionQ&quot;</span> &lt;&lt; endl;
        CounterMap::iterator q = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>.find(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af39b432c96285a2e9cd0d0320d091d7c">getNextDestination</a>());
        q-&gt;second += <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8+<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
        CounterMap::iterator qb = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>.find(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af39b432c96285a2e9cd0d0320d091d7c">getNextDestination</a>());
        qb-&gt;second += chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;

        <span class="keywordflow">if</span> (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a>) {
            <a class="code" href="class_s_c_t_p_association.html#a2178e3130838480b58adc77639d7862c">decreaseOutstandingBytes</a>(chunk);
        }
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a> += (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>);
    }
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a> &gt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a2e17d3f84ea047804988bfb5959e906f">initialPeerRwnd</a>) {
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a2e17d3f84ea047804988bfb5959e906f">initialPeerRwnd</a>;
    }
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;T3 Timeout: Chunk (TSN=&quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>
                &lt;&lt; <span class="stringliteral">&quot;) has been requeued in transmissionQ, rwnd was set to &quot;</span>
                &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a> &lt;&lt; endl;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afcdda96737a59959b556a07031d9ad98"></a><!-- doxytag: member="SCTPAssociation::nextChunkFitsIntoPacket" ref="afcdda96737a59959b556a07031d9ad98" args="(int32 bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::nextChunkFitsIntoPacket </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    int32 nextStream = -1;
    <a class="code" href="class_s_c_t_p_send_stream.html">SCTPSendStream</a>* stream;

    <span class="comment">/* Only change stream if we don&#39;t have to finish a fragmented message */</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7afc09bdeea747f08bd02cb60f9d4828">lastMsgWasFragment</a>)
        nextStream = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a65115dee13a7bb06bf17e24ac33ff4c4">lastStreamScheduled</a>;
    <span class="keywordflow">else</span>
        nextStream = (this-&gt;*<a class="code" href="class_s_c_t_p_association.html#a9988effc78d17db9b32a8d6a976c2288">ssFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html#ad1b6db0c49758dcf9cb642afec4ea4a7">ssGetNextSid</a>)(<span class="keyword">true</span>);

    <span class="keywordflow">if</span> (nextStream == -1)
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    stream = <a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.find(nextStream)-&gt;second;

    <span class="keywordflow">if</span> (stream)
    {
        cQueue* streamQ = NULL;

        <span class="keywordflow">if</span> (!stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#a819f071b624d554ee5c7d54417bc3a31">getUnorderedStreamQ</a>()-&gt;empty())
            streamQ = stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#a819f071b624d554ee5c7d54417bc3a31">getUnorderedStreamQ</a>();
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#ac278c3ed4a46cba2cd4744113886e003">getStreamQ</a>()-&gt;empty())
            streamQ = stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#ac278c3ed4a46cba2cd4744113886e003">getStreamQ</a>();

        <span class="keywordflow">if</span> (streamQ)
        {
            int32 b=<a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>( (check_and_cast&lt;SCTPSimpleMessage*&gt;(((SCTPDataMsg*)streamQ-&gt;front())-&gt;getEncapsulatedPacket())-&gt;getByteLength()+<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>));

            <span class="comment">/* Check if next message would be fragmented */</span>
            <span class="keywordflow">if</span> (b &gt; (int32) <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20d0d3d8a1e728ac8742eba28856799f">assocPmtu</a> - <a class="code" href="_s_c_t_p_association_8h.html#a294612afcb62d33531f390a08f0c3209">IP_HEADER_LENGTH</a> - <a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>)
            {
                <span class="comment">/* Test if fragment fits */</span>
                <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a> &gt;= (int32) <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20d0d3d8a1e728ac8742eba28856799f">assocPmtu</a> - <a class="code" href="_s_c_t_p_association_8h.html#a294612afcb62d33531f390a08f0c3209">IP_HEADER_LENGTH</a> - <a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a> - <a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>)
                    <span class="keywordflow">return</span> <span class="keyword">true</span>;
                <span class="keywordflow">else</span>
                    <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }

            <span class="comment">/* Message doesn&#39;t need to be fragmented, just try if it fits */</span>
            <span class="keywordflow">if</span> (b &lt;= <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>)
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            <span class="keywordflow">else</span>
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a38fd6b713baffb261f409aec60a3c279"></a><!-- doxytag: member="SCTPAssociation::numUsableStreams" ref="a38fd6b713baffb261f409aec60a3c279" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 SCTPAssociation::numUsableStreams </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>.</p>
<div class="fragment"><pre class="fragment">{
    int32 count=0;

    <span class="keywordflow">for</span> (SCTPSendStreamMap::iterator iter=<a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.begin(); iter!=<a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.end(); iter++)
        <span class="keywordflow">if</span> (iter-&gt;second-&gt;getStreamQ()-&gt;length()&gt;0 || iter-&gt;second-&gt;getUnorderedStreamQ()-&gt;length()&gt;0)
        {
            count++;
        }
    <span class="keywordflow">return</span> count;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aee07b10bc3e9c1999e15c025d5e7db5f"></a><!-- doxytag: member="SCTPAssociation::pathStatusIndication" ref="aee07b10bc3e9c1999e15c025d5e7db5f" args="(const SCTPPathVariables *path, const bool status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::pathStatusIndication </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a0fc1eef21b0fbadd97e0b4739213d35e">pmClearPathCounter()</a>, <a class="el" href="class_s_c_t_p_association.html#acb89ca4bcc84239541171327977762e9">process_TIMEOUT_HEARTBEAT()</a>, <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>, and <a class="el" href="class_s_c_t_p_association.html#a3cb6d23f3c34f789d2b1c5945d0d0a76">updateCounters()</a>.</p>
<div class="fragment"><pre class="fragment">{
    cPacket* msg = <span class="keyword">new</span> cPacket(<span class="stringliteral">&quot;StatusInfo&quot;</span>);
    msg-&gt;setKind(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3abbf25758d570841736d12727b53ff2be">SCTP_I_STATUS</a>);
    SCTPStatusInfo* cmd = <span class="keyword">new</span> SCTPStatusInfo();
    cmd-&gt;setPathId(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
    cmd-&gt;setAssocId(<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    cmd-&gt;setActive(<a class="code" href="class_s_c_t_p_association.html#a47d58d9bc82ddd0a073a7f8c7d321872">status</a>);
    msg-&gt;setControlInfo(cmd);
    <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#a47d58d9bc82ddd0a073a7f8c7d321872">status</a>) {
        SCTP::AssocStatMap::iterator iter=<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a43c9f3107b99f1c969a4d5ca9c168bd3">assocStatMap</a>.find(<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
        iter-&gt;second.numPathFailures++;
    }
    <a class="code" href="class_s_c_t_p_association.html#a35a8d95a64b2977c79bf24b1353c0c8e">sendToApp</a>(msg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="adca537bdf50592f25eff5a09e730bec3"></a><!-- doxytag: member="SCTPAssociation::peekAbandonedChunk" ref="adca537bdf50592f25eff5a09e730bec3" args="(const SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> * SCTPAssociation::peekAbandonedChunk </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Are there chunks in the retransmission queue? If Yes -&gt; dequeue and return it.</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.empty())
    {
        <span class="keywordflow">for</span>(SCTPQueue::PayloadQueue::iterator it = <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.begin();
             it != <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.end(); it++) {
            <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* <a class="code" href="structchunk.html">chunk</a> = it-&gt;second;
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;peek Chunk &quot;</span>&lt;&lt;chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
            <span class="keywordflow">if</span> (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>() == path &amp;&amp; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aaa76f0b0c8c7a31a466f08b1c1f917eb">hasBeenAbandoned</a>) {
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;peekAbandonedChunk() found chunk in the retransmission queue\n&quot;</span>;
                <span class="keywordflow">return</span> chunk;
            }
        }
    }
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2e74a9f71f01b08567f70511f6172ac7"></a><!-- doxytag: member="SCTPAssociation::peekOutboundDataMsg" ref="a2e74a9f71f01b08567f70511f6172ac7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SCTPDataMsg * SCTPAssociation::peekOutboundDataMsg </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#acfd176cf104a2ded703649339cf4a9bb">calculateBytesToSendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    SCTPDataMsg* datMsg=NULL;
    int32 nextStream = -1;
    nextStream = (this-&gt;*<a class="code" href="class_s_c_t_p_association.html#a9988effc78d17db9b32a8d6a976c2288">ssFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html#ad1b6db0c49758dcf9cb642afec4ea4a7">ssGetNextSid</a>)(<span class="keyword">true</span>);

    <span class="keywordflow">if</span> (nextStream == -1)
    {

        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;peekOutboundDataMsg(): no valid stream found -&gt; returning NULL !\n&quot;</span>;

        <span class="keywordflow">return</span> NULL;
    }


    <span class="keywordflow">for</span> (SCTPSendStreamMap::iterator iter=<a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.begin(); iter!=<a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.end(); ++iter)
    {
        <span class="keywordflow">if</span> ((int32)iter-&gt;first==nextStream)
        {
            <a class="code" href="class_s_c_t_p_send_stream.html">SCTPSendStream</a>* stream=iter-&gt;second;
            <span class="keywordflow">if</span> (!stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#a819f071b624d554ee5c7d54417bc3a31">getUnorderedStreamQ</a>()-&gt;empty())
            {
                    <span class="keywordflow">return</span> (datMsg);

            }
            <span class="keywordflow">if</span> (!stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#ac278c3ed4a46cba2cd4744113886e003">getStreamQ</a>()-&gt;empty())
            {
                    <span class="keywordflow">return</span> (datMsg);

            }
        }
    }
    <span class="keywordflow">return</span> NULL;

}
</pre></div>
</div>
</div>
<a class="anchor" id="a7471310ea5aa0cca813d1452f70bf218"></a><!-- doxytag: member="SCTPAssociation::performStateTransition" ref="a7471310ea5aa0cca813d1452f70bf218" args="(const SCTPEventCode &amp;event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::performStateTransition </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implemements the pure <a class="el" href="class_s_c_t_p.html">SCTP</a> state machine </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>, <a class="el" href="class_s_c_t_p_association.html#a6d4b0efb4884a96e406c42797456d241">processCookieAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a0dc1cc0159627680652582a01a4417f2">processCookieEchoArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, <a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp()</a>, <a class="el" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown()</a>, and <a class="el" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;performStateTransition\n&quot;</span>;
    <span class="keywordflow">if</span> (event==<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab4914b4201fb0cd1643109f690a59782">SCTP_E_IGNORE</a>)   <span class="comment">// e.g. discarded segment</span>
    {
        ev &lt;&lt; <span class="stringliteral">&quot;Staying in state: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()) &lt;&lt; <span class="stringliteral">&quot; (no FSM event)\n&quot;</span>;
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }

    <span class="comment">// state machine</span>
    int32 oldState = <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState();
    <span class="keywordflow">switch</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState())
    {
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>:
            <span class="keywordflow">switch</span> (event)
            {
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda9f1fd7fc777cc9fcb87a49cd64412c70">SCTP_E_OPEN_PASSIVE</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab1a4ad21616e72e2d7c4bef4b392d674">SCTP_E_ASSOCIATE</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8af21d78f3ce1dc469572320cb1e192cc3">SCTP_S_COOKIE_WAIT</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab8aa9b5c31869bf157aa993cea077747">SCTP_E_RCV_INIT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab8c4ae7bdc1d15fd08dbe454cdbf0fcb">SCTP_E_RCV_VALID_COOKIE_ECHO</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>); <span class="keywordflow">break</span>;
                    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf772922ac461dd670204bcd480536cec">SCTP_E_CLOSE</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">default</span>:;
            }
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8af21d78f3ce1dc469572320cb1e192cc3">SCTP_S_COOKIE_WAIT</a>:
            <span class="keywordflow">switch</span> (event)
            {
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddabad36afdf7219f94be14abb8fe080640">SCTP_E_RCV_INIT_ACK</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab8c4ae7bdc1d15fd08dbe454cdbf0fcb">SCTP_E_RCV_VALID_COOKIE_ECHO</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">default</span>:;
            }
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a>:
            <span class="keywordflow">switch</span> (event)
            {
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2f2d1da65ad0c265e5733999458898fb">SCTP_E_RCV_COOKIE_ACK</a>:FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">default</span>:;
            }
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>:
            <span class="keywordflow">switch</span> (event)
            {
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda8ec7f7bcc1dae63ce49ba1c29227bebe">SCTP_E_SEND</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2c57d6cd31d0e760c9562ab7d2d24532">SCTP_E_SHUTDOWN</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a606ae3dac26b5e28d7f5060705e273c6">SCTP_S_SHUTDOWN_PENDING</a>);    <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda309375f495c30e879128bda85711a6b9">SCTP_E_STOP_SENDING</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a606ae3dac26b5e28d7f5060705e273c6">SCTP_S_SHUTDOWN_PENDING</a>); <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab6ab9d382caab3e8ddc90ba57c9b7ac2">stopSending</a> = <span class="keyword">true</span>; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a66dc15b846de9c6aaa9516479481cdaf">lastTSN</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae8ae55483bf42be31814339345133587">nextTSN</a>-1; <span class="keywordflow">break</span>;    <span class="comment">//I.R.</span>
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda7712aa29c30d8415b4a4f8bcf27036dd">SCTP_E_RCV_SHUTDOWN</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf772922ac461dd670204bcd480536cec">SCTP_E_CLOSE</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">default</span>:;
            }
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a606ae3dac26b5e28d7f5060705e273c6">SCTP_S_SHUTDOWN_PENDING</a>:
            <span class="keywordflow">switch</span> (event)
            {
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda861e58ca6562ffbfe4884eec2e704431">SCTP_E_NO_MORE_OUTSTANDING</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a0ec4d7400f71ce88a8bbce0e66c97f55">SCTP_S_SHUTDOWN_SENT</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda7712aa29c30d8415b4a4f8bcf27036dd">SCTP_E_RCV_SHUTDOWN</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda1ba625b5ddb58a87dc16748b4eef0282">SCTP_E_RCV_SHUTDOWN_ACK</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">default</span>:;
            }
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>:
            <span class="keywordflow">switch</span> (event)
            {
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda861e58ca6562ffbfe4884eec2e704431">SCTP_E_NO_MORE_OUTSTANDING</a>:
                            FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8afed5af0cf4b3fce20325548b0b75961f">SCTP_S_SHUTDOWN_ACK_SENT</a>);
                    <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2c57d6cd31d0e760c9562ab7d2d24532">SCTP_E_SHUTDOWN</a>: <a class="code" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>); <span class="comment">/*FSM_Goto((*fsm), SCTP_S_SHUTDOWN_ACK_SENT);*/</span> <span class="keywordflow">break</span>;
                <span class="keywordflow">default</span>:;
            }
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a0ec4d7400f71ce88a8bbce0e66c97f55">SCTP_S_SHUTDOWN_SENT</a>:
            <span class="keywordflow">switch</span> (event)
            {
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda1ba625b5ddb58a87dc16748b4eef0282">SCTP_E_RCV_SHUTDOWN_ACK</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda7712aa29c30d8415b4a4f8bcf27036dd">SCTP_E_RCV_SHUTDOWN</a>: <a class="code" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>); FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8afed5af0cf4b3fce20325548b0b75961f">SCTP_S_SHUTDOWN_ACK_SENT</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">default</span>:;
            }
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8afed5af0cf4b3fce20325548b0b75961f">SCTP_S_SHUTDOWN_ACK_SENT</a>:
            <span class="keywordflow">switch</span> (event)
            {
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaa70358352df351a6de85965ba69a2323">SCTP_E_RCV_ABORT</a>: FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda57e8e0f4353663385300b7746ec16d6a">SCTP_E_RCV_SHUTDOWN_COMPLETE</a>:      FSM_Goto((*<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>), <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>); <span class="keywordflow">break</span>;
                <span class="keywordflow">default</span>:;
            }
            <span class="keywordflow">break</span>;

    }

    <span class="keywordflow">if</span> (oldState!=<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState())
    {
        ev &lt;&lt; <span class="stringliteral">&quot;Transition: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(oldState) &lt;&lt; <span class="stringliteral">&quot; --&gt; &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()) &lt;&lt; <span class="stringliteral">&quot;    (event was: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a63a1d0b48db0d4d129635336591f37fc">eventName</a>(event) &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(oldState) &lt;&lt; <span class="stringliteral">&quot; --&gt; &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()) &lt;&lt; <span class="stringliteral">&quot;  (on &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a63a1d0b48db0d4d129635336591f37fc">eventName</a>(event) &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;
        <a class="code" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState());
    }
    <span class="keywordflow">else</span>
    {
        ev&lt;&lt; <span class="stringliteral">&quot;Staying in state: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()) &lt;&lt; <span class="stringliteral">&quot; (event was: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a63a1d0b48db0d4d129635336591f37fc">eventName</a>(event) &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;
    }
    <span class="keywordflow">if</span> (event==<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a> &amp;&amp; oldState==<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()==<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>)
        <span class="keywordflow">return</span> <span class="keyword">true</span>;

    <span class="keywordflow">if</span> (oldState!=<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()==<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>)
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;return false because oldState=&quot;</span>&lt;&lt;oldState&lt;&lt;<span class="stringliteral">&quot; and new state is closed\n&quot;</span>;
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">else</span>
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0fc1eef21b0fbadd97e0b4739213d35e"></a><!-- doxytag: member="SCTPAssociation::pmClearPathCounter" ref="a0fc1eef21b0fbadd97e0b4739213d35e" args="(SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::pmClearPathCounter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1f4d814724e79e184655050a48ee1c25">processHeartbeatAckArrived()</a>, and <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a> = 0;
    <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec73d49b9720a1448d063e211ccefda0">activePath</a> == <span class="keyword">false</span>) {
        <span class="comment">/* notify the application */</span>
        <a class="code" href="class_s_c_t_p_association.html#aee07b10bc3e9c1999e15c025d5e7db5f">pathStatusIndication</a>(path, <span class="keyword">true</span>);
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Path &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                  &lt;&lt; <span class="stringliteral">&quot; state changes from INACTIVE to ACTIVE !!!&quot;</span> &lt;&lt; endl;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5015c5c13fbe8608b1370a85fc06806f"></a><!-- doxytag: member="SCTPAssociation::pmDataIsSentOn" ref="a5015c5c13fbe8608b1370a85fc06806f" args="(SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::pmDataIsSentOn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">/* restart hb_timer on this path */</span>
    <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>);
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a443c8e2a234674a5b8bb385831bf147f">enableHeartbeats</a>)
    {
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8ea7a908e771155785f375bc4bb05661">heartbeatTimeout</a> = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a> + (double)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;hbInterval&quot;</span>);
        <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>, path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8ea7a908e771155785f375bc4bb05661">heartbeatTimeout</a>);
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Restarting HB timer on path &quot;</span>&lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                  &lt;&lt; <span class="stringliteral">&quot; to expire at time &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8ea7a908e771155785f375bc4bb05661">heartbeatTimeout</a> &lt;&lt; endl;
    }

    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a51b69ce98294df53f826541717c0b2bd">cwndTimeout</a> = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>;
    <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7696cc66ad659fbd0259cdc91808117a">CwndTimer</a>);
    <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7696cc66ad659fbd0259cdc91808117a">CwndTimer</a>, path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a51b69ce98294df53f826541717c0b2bd">cwndTimeout</a>);

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Restarting CWND timer on path &quot;</span>&lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
              &lt;&lt; <span class="stringliteral">&quot; to expire at time &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a51b69ce98294df53f826541717c0b2bd">cwndTimeout</a> &lt;&lt; endl;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a02104ef95fcdab0f90cc9b03da82a675"></a><!-- doxytag: member="SCTPAssociation::pmRttMeasurement" ref="a02104ef95fcdab0f90cc9b03da82a675" args="(SCTPPathVariables *path, const simtime_t &amp;rttEstimation)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::pmRttMeasurement </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const simtime_t &amp;&#160;</td>
          <td class="paramname"><em>rttEstimation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1f4d814724e79e184655050a48ee1c25">processHeartbeatAckArrived()</a>, and <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (rttEstimation &lt; MAXTIME) {
        <span class="keywordflow">if</span> (simTime() &gt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#addd9854620d83632deb90ab177416ed7">updateTime</a>) {
            <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#addd9854620d83632deb90ab177416ed7">updateTime</a> == SIMTIME_ZERO) {
                path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a570d5d2f28369483f6dca824643d4959">rttvar</a>  = rttEstimation.dbl() / 2;
                path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae266c152e209421111fd4948dd539dd5">srtt</a>    = rttEstimation;
                path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a> = 3.0 * rttEstimation.dbl();
                path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a> = <a class="code" href="_s_c_t_p_association_8h.html#afdb84bd44c7cbd3fc9cbe1e3bf07d948">max</a>(<a class="code" href="_s_c_t_p_association_8h.html#ad61931b1ae6b8e5bb714e2e6744f4470">min</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>.dbl(), (double)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;rtoMax&quot;</span>)),
                                          (<span class="keywordtype">double</span>)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(&quot;rtoMin&quot;));
            }
            else {
                path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a570d5d2f28369483f6dca824643d4959">rttvar</a>  = (1.0 - (double)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;rtoBeta&quot;</span>)) * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a570d5d2f28369483f6dca824643d4959">rttvar</a>.dbl() +
                                         (double)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;rtoBeta&quot;</span>) * fabs(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae266c152e209421111fd4948dd539dd5">srtt</a>.dbl() - rttEstimation.dbl());
                path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae266c152e209421111fd4948dd539dd5">srtt</a>    = (1.0 - (double)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;rtoAlpha&quot;</span>)) * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae266c152e209421111fd4948dd539dd5">srtt</a>.dbl() +
                                         (double)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;rtoAlpha&quot;</span>) * rttEstimation.dbl();
                path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a> = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae266c152e209421111fd4948dd539dd5">srtt</a>.dbl() + 4.0 * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a570d5d2f28369483f6dca824643d4959">rttvar</a>.dbl();
                path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a> = <a class="code" href="_s_c_t_p_association_8h.html#afdb84bd44c7cbd3fc9cbe1e3bf07d948">max</a>(<a class="code" href="_s_c_t_p_association_8h.html#ad61931b1ae6b8e5bb714e2e6744f4470">min</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>.dbl(), (double)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;rtoMax&quot;</span>)),
                                          (<span class="keywordtype">double</span>)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(&quot;rtoMin&quot;));
            }
<span class="comment">/*</span>
<span class="comment">            std::cout &lt;&lt; simTime() &lt;&lt; &quot;: Updating timer values for path &quot; &lt;&lt; path-&gt;remoteAddress &lt;&lt; &quot;:&quot;</span>
<span class="comment">                      &lt;&lt; &quot; RTO=&quot;              &lt;&lt; path-&gt;pathRto</span>
<span class="comment">                      &lt;&lt; &quot; rttEstimation=&quot; &lt;&lt; rttEstimation</span>
<span class="comment">                      &lt;&lt; &quot; SRTT=&quot;             &lt;&lt; path-&gt;srtt</span>
<span class="comment">                      &lt;&lt; &quot; --&gt;  RTTVAR=&quot;      &lt;&lt; path-&gt;rttvar &lt;&lt; endl;</span>
<span class="comment">*/</span>
            <span class="comment">// RFC 2960, sect. 6.3.1: new RTT measurements SHOULD be made no more</span>
            <span class="comment">//                                than once per round-trip.</span>
            path-&gt;updateTime = simTime() + path-&gt;srtt;
            path-&gt;statisticsPathRTO-&gt;record(path-&gt;pathRto);
            path-&gt;statisticsPathRTT-&gt;record(rttEstimation);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab385b4edb0ddac6e69aa350df14b480a"></a><!-- doxytag: member="SCTPAssociation::pmStartPathManagement" ref="ab385b4edb0ddac6e69aa350df14b480a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::pmStartPathManagement </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flow control </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_routing_table_access.html">RoutingTableAccess</a> routingTableAccess;
    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path;
    int32 i=0;
    <span class="comment">/* populate path structures !!! */</span>
    <span class="comment">/* set a high start value...this is appropriately decreased later (below) */</span>
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20d0d3d8a1e728ac8742eba28856799f">assocPmtu</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a>;
    <span class="keywordflow">for</span>(SCTPPathMap::iterator piter=<a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin(); piter!=<a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); piter++)
    {
        path=piter-&gt;second;
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a> = 0;
        <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *rtie = routingTableAccess.<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>()-&gt;<a class="code" href="class_i_routing_table.html#a0dda4a87779a949284ccead75001fa30">getInterfaceForDestAddr</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>.<a class="code" href="class_i_pv_x_address.html#a00acd2be0fc0f254afb2eb7540a4ea6e">get4</a>());
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> = rtie-&gt;<a class="code" href="class_interface_entry.html#adbe3ede6fb4652fbfc4abbe2c924cc3b">getMTU</a>();
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Path MTU of Interface &quot;</span>&lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> &lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
        <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> &lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20d0d3d8a1e728ac8742eba28856799f">assocPmtu</a>)
        {
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20d0d3d8a1e728ac8742eba28856799f">assocPmtu</a> = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>;
        }
        <a class="code" href="class_s_c_t_p_association.html#a27ab7a3f0d7e82a5b48f47e39e53dd23">initCCParameters</a>(path);
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a> = (double)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;rtoInitial&quot;</span>);
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae266c152e209421111fd4948dd539dd5">srtt</a> = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>;
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a570d5d2f28369483f6dca824643d4959">rttvar</a> = SIMTIME_ZERO;
        <span class="comment">/* from now on we may have one update per RTO/SRTT */</span>
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#addd9854620d83632deb90ab177416ed7">updateTime</a> = SIMTIME_ZERO;


        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a857673312c2f810885b9d8394eece558">partialBytesAcked</a> = 0;
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> = 0;
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec73d49b9720a1448d063e211ccefda0">activePath</a> = <span class="keyword">true</span>;
        <span class="comment">// Timer probably not running, but stop it anyway I.R.</span>
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>);

        <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> == <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a6270b0edb7777931a33ff8662288bf25">initialPrimaryPath</a> &amp;&amp; !path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#afb5df73d90e27abfe7ca3108beb051f6">confirmed</a>) {
            path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#afb5df73d90e27abfe7ca3108beb051f6">confirmed</a> = <span class="keyword">true</span>;
        }
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;getFullPath()&lt;&lt;<span class="stringliteral">&quot; numberOfLocalAddresses=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7b2aedff06029b67f2861a902e1bcf54">localAddresses</a>.size()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
             path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8ea7a908e771155785f375bc4bb05661">heartbeatTimeout</a>= (double)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;hbInterval&quot;</span>)+i*path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>;
             <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>);
             <a class="code" href="class_s_c_t_p_association.html#afc5f06d167b937c0d1267047960bc354">sendHeartbeat</a>(path);
             <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>, path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8ea7a908e771155785f375bc4bb05661">heartbeatTimeout</a>);
             <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a>, path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7d1aef839313bbde64bfb12f4ddb3852">heartbeatIntervalTimeout</a>);
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a44bb5884f543cbf4672d0dadfa04dae4">statisticsPathRTO</a>-&gt;record(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>);
        i++;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a946f737e0ae27932aba2899aa24d2660"></a><!-- doxytag: member="SCTPAssociation::preanalyseAppCommandEvent" ref="a946f737e0ae27932aba2899aa24d2660" args="(int32 commandCode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> SCTPAssociation::preanalyseAppCommandEvent </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>commandCode</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Maps app command codes (msg kind of app command msgs) to SCTP_E_xxx event codes </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">switch</span> (commandCode) {
    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea408002f9592dcab6ceb60f683bee7e83">SCTP_C_ASSOCIATE</a>:           <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab1a4ad21616e72e2d7c4bef4b392d674">SCTP_E_ASSOCIATE</a>;
    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea4660ef9a2685b60b3aa2388461c43deb">SCTP_C_OPEN_PASSIVE</a>:        <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda9f1fd7fc777cc9fcb87a49cd64412c70">SCTP_E_OPEN_PASSIVE</a>;
    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463eacb34da0d2a8bc9071c353d5e92ab0d94">SCTP_C_SEND</a>:                <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda8ec7f7bcc1dae63ce49ba1c29227bebe">SCTP_E_SEND</a>;
    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea36c1bad836563c7468a9877491b1db5d">SCTP_C_CLOSE</a>:               <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf772922ac461dd670204bcd480536cec">SCTP_E_CLOSE</a>;
    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea7d45ef3a5ccaa811a5edd77a342bc3b0">SCTP_C_ABORT</a>:               <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>;
    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea2ba582af18939c296a16e1b083e74397">SCTP_C_RECEIVE</a>:             <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda914409a350944272bbd72083b6b5281b">SCTP_E_RECEIVE</a>;
    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea7c99f40fe26cf98c3275ca9c38bd98a3">SCTP_C_SEND_UNORDERED</a>:      <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda8ec7f7bcc1dae63ce49ba1c29227bebe">SCTP_E_SEND</a>;
    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea6b3b36984ab51a0714609ca913bbb54f">SCTP_C_SEND_ORDERED</a>:        <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda8ec7f7bcc1dae63ce49ba1c29227bebe">SCTP_E_SEND</a>;
    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea642be41f281aef49b9cb8402278be2f7">SCTP_C_PRIMARY</a>:             <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda1ab4fe49257ab6212a8dd336e4d07991">SCTP_E_PRIMARY</a>;
    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea4fe02c6f134855267e6f95cf92fadee1">SCTP_C_QUEUE_MSGS_LIMIT</a>:    <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda982447e78039f557e892297768866518">SCTP_E_QUEUE_MSGS_LIMIT</a>;
    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463eac6ae02fe564dd3a68214528a0b25eeb7">SCTP_C_QUEUE_BYTES_LIMIT</a>:   <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda3d83eea39de6b7b191caae724ae5146e">SCTP_E_QUEUE_BYTES_LIMIT</a>;
    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463ea349e117c148f5b223ecef4d8334b7077">SCTP_C_SHUTDOWN</a>:            <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2c57d6cd31d0e760c9562ab7d2d24532">SCTP_E_SHUTDOWN</a>;
    <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_command_8h.html#a5ec9c6f1ed5e1ef36d79227bcb81463eaaf691bde7e4b92ce33b4579760761a62">SCTP_C_NO_OUTSTANDING</a>:      <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda65d6eeb62214f93d929739b4f81cd01c">SCTP_E_SEND_SHUTDOWN_ACK</a>;
    <span class="keywordflow">default</span>:
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;commandCode=&quot;</span>&lt;&lt;commandCode&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
        opp_error(<span class="stringliteral">&quot;Unknown message kind in app command&quot;</span>);
                      <span class="keywordflow">return</span> (<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a>)0; <span class="comment">// to satisfy compiler</span>
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a372875420182ac696a9cf72971ab5eab"></a><!-- doxytag: member="SCTPAssociation::printConnBrief" ref="a372875420182ac696a9cf72971ab5eab" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::printConnBrief </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: prints local/remote addr/port and app gate index/assocId </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1460f83f7b50fee1f47fe7b4bf6744be">processSCTPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Connection &quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a> &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a> &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a> &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>;
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;  on app[&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aba709e2f773752366d1c291c4fb360c8">appGateIndex</a> &lt;&lt; <span class="stringliteral">&quot;],assocId=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>;
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;  in &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3458ef456e7d907d1cf712d28e7212d7"></a><!-- doxytag: member="SCTPAssociation::printOutstandingTsns" ref="a3458ef456e7d907d1cf712d28e7212d7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::printOutstandingTsns </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a120c72df6657d2ef5038d61881ff11c4"></a><!-- doxytag: member="SCTPAssociation::printSctpPathMap" ref="a120c72df6657d2ef5038d61881ff11c4" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::printSctpPathMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, and <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt;<span class="stringliteral">&quot;SCTP PathMap:&quot;</span> &lt;&lt; endl;
    <span class="keywordflow">for</span> (SCTPPathMap::const_iterator iterator = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin();
          iterator != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); ++iterator) {
        <span class="keyword">const</span> <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = iterator-&gt;second;
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot; - &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;:  osb=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a>
                  &lt;&lt; <span class="stringliteral">&quot; cwnd=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a> &lt;&lt; endl;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0a8dc40e502998018163df5cbe68d837"></a><!-- doxytag: member="SCTPAssociation::printSegmentBrief" ref="a0a8dc40e502998018163df5cbe68d837" args="(SCTPMessage *sctpmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::printSegmentBrief </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *&#160;</td>
          <td class="paramname"><em>sctpmsg</em></td><td>)</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: prints important header fields </p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; sctpmsg-&gt;getSrcPort() &lt;&lt; <span class="stringliteral">&quot; &gt; &quot;</span>;
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; sctpmsg-&gt;getDestPort() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span>;
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;initTag &quot;</span>&lt;&lt; sctpmsg-&gt;getTag() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0604d2735afd938650aa540e1ed7b9d1"></a><!-- doxytag: member="SCTPAssociation::process_ABORT" ref="a0604d2735afd938650aa540e1ed7b9d1" args="(SCTPEventCode &amp;event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_ABORT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationEventProc:process_ABORT; assoc=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a> &lt;&lt; endl;
    <span class="keywordflow">switch</span>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()) {
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>:
            <a class="code" href="class_s_c_t_p_association.html#ab0faa9ccd46630cfab7a2bc75fb1d52d">sendOnAllPaths</a>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#afaefe95090e09d43d24794cf47a1ec0c">getPrimaryPath</a>());
            <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
            <span class="keywordflow">break</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="adf53e2f26b7881391b481c3716783cc9"></a><!-- doxytag: member="SCTPAssociation::process_ASSOCIATE" ref="adf53e2f26b7881391b481c3716783cc9" args="(SCTPEventCode &amp;event, SCTPCommand *sctpCommand, cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_ASSOCIATE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SCTPCommand *&#160;</td>
          <td class="paramname"><em>sctpCommand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a> lAddr, rAddr;

    SCTPOpenCommand *openCmd = check_and_cast&lt;SCTPOpenCommand *&gt;(sctpCommand);

    ev&lt;&lt;<span class="stringliteral">&quot;SCTPAssociationEventProc:process_ASSOCIATE\n&quot;</span>;

    <span class="keywordflow">switch</span>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState())
    {
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>:
        <a class="code" href="class_s_c_t_p_association.html#a460894500fa0ffbff9cd62ef59db7475">initAssociation</a>(openCmd);
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9f45fb5b9a76bdf0ada04c3ed9920215">active</a> = <span class="keyword">true</span>;
        <a class="code" href="class_s_c_t_p_association.html#af44c3fdaaff9c48fdbb45aac6d6ad082">localAddressList</a> = openCmd-&gt;getLocalAddresses();
        lAddr = openCmd-&gt;getLocalAddresses().front();
        <span class="keywordflow">if</span> (!(openCmd-&gt;getRemoteAddresses().empty()))
        {
            <a class="code" href="class_s_c_t_p_association.html#a746e4867059fcd11838ab601a6f5fea1">remoteAddressList</a> = openCmd-&gt;getRemoteAddresses();
            rAddr = openCmd-&gt;getRemoteAddresses().front();
        }
        <span class="keywordflow">else</span>
            rAddr = openCmd-&gt;getRemoteAddr();
        <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a> = openCmd-&gt;getLocalPort();
        <a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a> = openCmd-&gt;getRemotePort();
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#adcb6627c45d909e52eba1e3ff4e05b29">numRequests</a> = openCmd-&gt;getNumRequests();
        <span class="keywordflow">if</span> (rAddr.<a class="code" href="class_i_pv_x_address.html#aa3534408a9aa5e4cb3fc141597d0ed1e">isUnspecified</a>() || <a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>==0)
        opp_error(<span class="stringliteral">&quot;Error processing command OPEN_ACTIVE: remote address and port must be specified&quot;</span>);

        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>==0)
        {
        <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a> = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#acf8131c6cb5ae94bc2b49b3305b51304">getEphemeralPort</a>();
        }
        ev &lt;&lt; <span class="stringliteral">&quot;OPEN: &quot;</span> &lt;&lt; lAddr &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a> &lt;&lt; <span class="stringliteral">&quot; --&gt; &quot;</span> &lt;&lt; rAddr &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

        <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a2ee4aaa2e36516a679b8c4a0748ecd9a">updateSockPair</a>(<span class="keyword">this</span>, lAddr, rAddr, <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>, remotePort);
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a> = (long)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;arwnd&quot;</span>);
        <a class="code" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit</a>();
        <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>,<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a>);
        <span class="keywordflow">break</span>;

    <span class="keywordflow">default</span>:
        opp_error(<span class="stringliteral">&quot;Error processing command OPEN_ACTIVE: connection already exists&quot;</span>);
    }

}
</pre></div>
</div>
</div>
<a class="anchor" id="a6c53aeb97e7132e5f09869f886e5807e"></a><!-- doxytag: member="SCTPAssociation::process_CLOSE" ref="a6c53aeb97e7132e5f09869f886e5807e" args="(SCTPEventCode &amp;event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_CLOSE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationEventProc:process_CLOSE; assoc=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a> &lt;&lt; endl;
    <span class="keywordflow">switch</span>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()) {
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>:
            <a class="code" href="class_s_c_t_p_association.html#ab0faa9ccd46630cfab7a2bc75fb1d52d">sendOnAllPaths</a>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#afaefe95090e09d43d24794cf47a1ec0c">getPrimaryPath</a>());
            <a class="code" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown</a>();
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>:
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a8270ebaccc92eb00ffae041a8406b094">getOutstandingBytes</a>() == 0) {
                <a class="code" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
            }
            <span class="keywordflow">break</span>;
     }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5cc7381e91d34e5c13a4b97eb02f9b7e"></a><!-- doxytag: member="SCTPAssociation::process_OPEN_PASSIVE" ref="a5cc7381e91d34e5c13a4b97eb02f9b7e" args="(SCTPEventCode &amp;event, SCTPCommand *sctpCommand, cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_OPEN_PASSIVE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SCTPCommand *&#160;</td>
          <td class="paramname"><em>sctpCommand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a> lAddr;
    int16 <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>;

    SCTPOpenCommand *openCmd = check_and_cast&lt;SCTPOpenCommand *&gt;(sctpCommand);

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;SCTPAssociationEventProc:process_OPEN_PASSIVE\n&quot;</span>;

    <span class="keywordflow">switch</span>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState())
    {
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>:
            <a class="code" href="class_s_c_t_p_association.html#a460894500fa0ffbff9cd62ef59db7475">initAssociation</a>(openCmd);
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab5bac08be4a3710fe623e93aa65e74ff">fork</a> = openCmd-&gt;getFork();
            <a class="code" href="class_s_c_t_p_association.html#af44c3fdaaff9c48fdbb45aac6d6ad082">localAddressList</a> = openCmd-&gt;getLocalAddresses();
            sctpEV3&lt;&lt;<span class="stringliteral">&quot;process_OPEN_PASSIVE: number of local addresses=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#af44c3fdaaff9c48fdbb45aac6d6ad082">localAddressList</a>.size()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
            lAddr = openCmd-&gt;getLocalAddresses().front();
            localPort = openCmd-&gt;getLocalPort();
            <a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a> = openCmd-&gt;getInboundStreams();
            <a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a> = openCmd-&gt;getOutboundStreams();
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a> = (long)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;arwnd&quot;</span>);
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#adcb6627c45d909e52eba1e3ff4e05b29">numRequests</a> = openCmd-&gt;getNumRequests();
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac841a6063c1f2d092f82c64cd67534b6">messagesToPush</a> = openCmd-&gt;getMessagesToPush();

            <span class="keywordflow">if</span> (localPort==0)
                opp_error(<span class="stringliteral">&quot;Error processing command OPEN_PASSIVE: local port must be specified&quot;</span>);
            sctpEV3 &lt;&lt; <span class="stringliteral">&quot;Assoc &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>&lt;&lt;<span class="stringliteral">&quot;::Starting to listen on: &quot;</span> &lt;&lt; lAddr &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; localPort &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

            <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a2ee4aaa2e36516a679b8c4a0748ecd9a">updateSockPair</a>(<span class="keyword">this</span>, lAddr, <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>(), localPort, 0);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:
        opp_error(<span class="stringliteral">&quot;Error processing command OPEN_PASSIVE: connection already exists&quot;</span>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1f578c7e75df4066f4aaf34b8f195f6f"></a><!-- doxytag: member="SCTPAssociation::process_PRIMARY" ref="a1f578c7e75df4066f4aaf34b8f195f6f" args="(SCTPEventCode &amp;event, SCTPCommand *sctpCommand)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_PRIMARY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SCTPCommand *&#160;</td>
          <td class="paramname"><em>sctpCommand</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    SCTPPathInfo *pinfo = check_and_cast&lt;SCTPPathInfo *&gt;(sctpCommand);
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5b32a3dfde58166c98ee2c0d074d28b0">setPrimaryPath</a>(<a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(pinfo-&gt;getRemoteAddress()));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0bce41a300c3dfdab9d2ca190d5790d3"></a><!-- doxytag: member="SCTPAssociation::process_QUEUE_BYTES_LIMIT" ref="a0bce41a300c3dfdab9d2ca190d5790d3" args="(const SCTPCommand *sctpCommand)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_QUEUE_BYTES_LIMIT </td>
          <td>(</td>
          <td class="paramtype">const SCTPCommand *&#160;</td>
          <td class="paramname"><em>sctpCommand</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> SCTPInfo* qinfo = check_and_cast&lt;<span class="keyword">const</span> SCTPInfo*&gt;(sctpCommand);
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4a45a11cb5d50f9d7cb1799fa105dedb">sendQueueLimit</a> = qinfo-&gt;getText();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5f8be6b52ad2164e96fd19799dfd8e01"></a><!-- doxytag: member="SCTPAssociation::process_QUEUE_MSGS_LIMIT" ref="a5f8be6b52ad2164e96fd19799dfd8e01" args="(const SCTPCommand *sctpCommand)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_QUEUE_MSGS_LIMIT </td>
          <td>(</td>
          <td class="paramtype">const SCTPCommand *&#160;</td>
          <td class="paramname"><em>sctpCommand</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Queue Management </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> SCTPInfo* qinfo = check_and_cast&lt;<span class="keyword">const</span> SCTPInfo*&gt;(sctpCommand);
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37fa23a9f841d820bc9e5114e76c5823">queueLimit</a> = qinfo-&gt;getText();
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;state-&gt;queueLimit set to &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37fa23a9f841d820bc9e5114e76c5823">queueLimit</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a042415b8feb32a392938f9a844bc4aca"></a><!-- doxytag: member="SCTPAssociation::process_RCV_Message" ref="a042415b8feb32a392938f9a844bc4aca" args="(SCTPMessage *sctpseg, const IPvXAddress &amp;src, const IPvXAddress &amp;dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::process_RCV_Message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *&#160;</td>
          <td class="paramname"><em>sctpseg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1460f83f7b50fee1f47fe7b4bf6744be">processSCTPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ====== Header checks ==================================================</span>
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; getFullPath()  &lt;&lt; <span class="stringliteral">&quot; SCTPAssociationRcvMessage:process_RCV_Message&quot;</span>
              &lt;&lt; <span class="stringliteral">&quot; localAddr=&quot;</span>  &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>
              &lt;&lt; <span class="stringliteral">&quot; remoteAddr=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a> &lt;&lt; endl;
    <span class="keywordflow">if</span> ((sctpmsg-&gt;hasBitError() || !sctpmsg-&gt;getChecksumOk()))
    {
        <span class="keywordflow">if</span> (((SCTPChunk*)(sctpmsg-&gt;getChunks(0)))-&gt;getChunkType() == <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12abb473557985d30fdf16d2525388e3a22">INIT_ACK</a>) {
            <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>);
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;InitAck with bit-error. Retransmit Init&quot;</span> &lt;&lt; endl;
            <a class="code" href="class_s_c_t_p_association.html#aec407e9c2c1b4d0c604d8d65e78706e8">retransmitInit</a>();
            <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>,<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a>);
        }
        <span class="keywordflow">if</span> (((SCTPChunk*)(sctpmsg-&gt;getChunks(0)))-&gt;getChunkType() == <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a8cb5544ff09ee0b2ae1f1171de9597bd">COOKIE_ACK</a>) {
            <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>);
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;CookieAck with bit-error. Retransmit CookieEcho&quot;</span> &lt;&lt; endl;
            <a class="code" href="class_s_c_t_p_association.html#ae9ffc855fcb6cfd50fb34a03beaa2d39">retransmitCookieEcho</a>();
            <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>,<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a>);
        }
    }

    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path      = <a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(src);
    <span class="keyword">const</span> uint16 srcPort         = sctpmsg-&gt;getDestPort();
    <span class="keyword">const</span> uint16 destPort        = sctpmsg-&gt;getSrcPort();
    <span class="keyword">const</span> uint32 numberOfChunks = sctpmsg-&gt;getChunksArraySize();
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;numberOfChunks=&quot;</span> &lt;&lt;numberOfChunks &lt;&lt; endl;

    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a6417b860ec08633082497392bdb40325">sctpmsg</a> = (<a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>*)sctpmsg-&gt;<a class="code" href="class_s_c_t_p_message.html#ab91514d12e81048f59d545f2aaeacd47">dup</a>();

    <span class="comment">// ====== Handle chunks ==================================================</span>
    <span class="keywordtype">bool</span> trans              = <span class="keyword">true</span>;
    <span class="keywordtype">bool</span> sendAllowed        = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> dupReceived        = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> dataChunkReceived  = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> dataChunkDelivered = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> shutdownCalled     = <span class="keyword">false</span>;
    <span class="keywordflow">for</span> (uint32 i = 0; i &lt; numberOfChunks; i++) {
        <span class="keyword">const</span> SCTPChunk* header = (<span class="keyword">const</span> SCTPChunk*)(sctpmsg-&gt;removeChunk());
        <span class="keyword">const</span> uint8       type  = header-&gt;getChunkType();

        <span class="keywordflow">if</span> ((type != <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a0cb1b2c6a7db1f1084886c98909a3f36">INIT</a>) &amp;&amp;
             (type != <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a781ad2788df9e25c59a70894c7832096">ABORT</a>) &amp;&amp;
             (type != <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a511842f389362e9f11f52a88556455f1">ERRORTYPE</a>) &amp;&amp;
             (sctpmsg-&gt;getTag() != <a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>)) {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot; VTag &quot;</span>&lt;&lt; sctpmsg-&gt;getTag() &lt;&lt; <span class="stringliteral">&quot; incorrect. Should be &quot;</span>
                      &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a> &lt;&lt; <span class="stringliteral">&quot; localVTag=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a> &lt;&lt; endl;
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }

        <span class="keywordflow">switch</span> (type) {
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a0cb1b2c6a7db1f1084886c98909a3f36">INIT</a>:
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationRcvMessage: INIT received&quot;</span> &lt;&lt; endl;
            SCTPInitChunk* initChunk;
            initChunk = check_and_cast&lt;SCTPInitChunk*&gt;(header);
            <span class="keywordflow">if</span> ((initChunk-&gt;getNoInStreams() != 0) &amp;&amp;
                 (initChunk-&gt;getNoOutStreams() != 0) &amp;&amp;
                 (initChunk-&gt;getInitTag() != 0)) {
                trans = <a class="code" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived</a>(initChunk, srcPort, destPort);
            }
            i = numberOfChunks-1;
            <span class="keyword">delete</span> initChunk;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12abb473557985d30fdf16d2525388e3a22">INIT_ACK</a>:
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationRcvMessage: INIT_ACK received&quot;</span> &lt;&lt; endl;
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8af21d78f3ce1dc469572320cb1e192cc3">SCTP_S_COOKIE_WAIT</a>) {
                SCTPInitAckChunk* initAckChunk;
                initAckChunk = check_and_cast&lt;SCTPInitAckChunk*&gt;(header);
                <span class="keywordflow">if</span> ((initAckChunk-&gt;getNoInStreams() != 0) &amp;&amp;
                    (initAckChunk-&gt;getNoOutStreams() != 0) &amp;&amp;
                    (initAckChunk-&gt;getInitTag() != 0)) {
                    trans = <a class="code" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived</a>(initAckChunk);
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (initAckChunk-&gt;getInitTag() == 0) {
                    <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
                    <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">removeAssociation</a>(<span class="keyword">this</span>);
                }
                i = numberOfChunks-1;
                <span class="keyword">delete</span> initAckChunk;
            }
            <span class="keywordflow">else</span> {
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;INIT_ACK will be ignored&quot;</span> &lt;&lt; endl;
            }
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12ac6c3901afa866152be0e645c2c38f471">COOKIE_ECHO</a>:
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationRcvMessage: COOKIE_ECHO received&quot;</span> &lt;&lt; endl;
            SCTPCookieEchoChunk* cookieEchoChunk;
            cookieEchoChunk = check_and_cast&lt;SCTPCookieEchoChunk*&gt;(header);
            trans = <a class="code" href="class_s_c_t_p_association.html#a0dc1cc0159627680652582a01a4417f2">processCookieEchoArrived</a>(cookieEchoChunk,src);
            <span class="keyword">delete</span> cookieEchoChunk;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a8cb5544ff09ee0b2ae1f1171de9597bd">COOKIE_ACK</a>:
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationRcvMessage: COOKIE_ACK received&quot;</span> &lt;&lt; endl;
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a>) {
                SCTPCookieAckChunk* cookieAckChunk;
                cookieAckChunk = check_and_cast&lt;SCTPCookieAckChunk*&gt;(header);
                trans = <a class="code" href="class_s_c_t_p_association.html#a6d4b0efb4884a96e406c42797456d241">processCookieAckArrived</a>();
                <span class="keyword">delete</span> cookieAckChunk;
            }
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea9d7d6f31868d66330397c967c4afd2d2">DATA</a>:
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationRcvMessage: DATA received&quot;</span> &lt;&lt; endl;
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a>) {
                trans = <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2f2d1da65ad0c265e5733999458898fb">SCTP_E_RCV_COOKIE_ACK</a>);
            }
            <span class="keywordflow">if</span> (!(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a> || <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8afed5af0cf4b3fce20325548b0b75961f">SCTP_S_SHUTDOWN_ACK_SENT</a>)) {
                SCTPDataChunk* dataChunk;
                dataChunk = check_and_cast&lt;SCTPDataChunk*&gt;(header);
                <span class="keywordflow">if</span> ((dataChunk-&gt;getByteLength()- 16) &gt; 0) {
                    <span class="keyword">const</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> <span class="keyword">event</span> = <a class="code" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived</a>(dataChunk);
                    <span class="keywordflow">if</span> (event == <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda6ad094e0a90c2dc8a41628f621d27ca0">SCTP_E_DELIVERED</a>) {
                        dataChunkReceived    = <span class="keyword">true</span>;
                        dataChunkDelivered = <span class="keyword">true</span>;
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae92fceb56eefd5079a1c5e103d8448a7">sackAllowed</a> = <span class="keyword">true</span>;
                    }
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda8ec7f7bcc1dae63ce49ba1c29227bebe">SCTP_E_SEND</a> || event==<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab4914b4201fb0cd1643109f690a59782">SCTP_E_IGNORE</a>) {
                        dataChunkReceived    = <span class="keyword">true</span>;
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae92fceb56eefd5079a1c5e103d8448a7">sackAllowed</a> = <span class="keyword">true</span>;
                    }
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event==<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda365f70144611ac4229ac712c9fde06f0">SCTP_E_DUP_RECEIVED</a>) {
                        dupReceived = <span class="keyword">true</span>;
                    }
                }
                <span class="keywordflow">else</span> {
                    <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
                    <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">removeAssociation</a>(<span class="keyword">this</span>);
                }
                <span class="keyword">delete</span> dataChunk;
            }
            trans = <span class="keyword">true</span>;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a689bf9c7470080fd0180eb7f5c293bd4">SACK</a>:
        {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationRcvMessage: SACK received&quot;</span> &lt;&lt; endl;
            <span class="keyword">const</span> int32 scount = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a>;
            SCTPSackChunk* sackChunk;
            sackChunk = check_and_cast&lt;SCTPSackChunk*&gt;(header);
            <a class="code" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived</a>(sackChunk);
            trans           = <span class="keyword">true</span>;
            sendAllowed = <span class="keyword">true</span>;
            <span class="keyword">delete</span> sackChunk;
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a8270ebaccc92eb00ffae041a8406b094">getOutstandingBytes</a>()==0 &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af665b72b717ec39ba1a01364769e2db0">getQueueSize</a>()==0 &amp;&amp; scount==0) {
                <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a606ae3dac26b5e28d7f5060705e273c6">SCTP_S_SHUTDOWN_PENDING</a>) {
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;No more packets: send SHUTDOWN&quot;</span> &lt;&lt; endl;
                    <a class="code" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown</a>();
                    trans               = <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda861e58ca6562ffbfe4884eec2e704431">SCTP_E_NO_MORE_OUTSTANDING</a>);
                    shutdownCalled = <span class="keyword">true</span>;
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>) {
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;No more outstanding&quot;</span> &lt;&lt; endl;
                    <a class="code" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
                }
            }
            <span class="keywordflow">break</span>;
        }
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a781ad2788df9e25c59a70894c7832096">ABORT</a>:
            SCTPAbortChunk* abortChunk;
            abortChunk = check_and_cast&lt;SCTPAbortChunk*&gt;(header);
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationRcvMessage: ABORT with T-Bit &quot;</span>
                      &lt;&lt; abortChunk-&gt;getT_Bit() &lt;&lt; <span class="stringliteral">&quot; received&quot;</span> &lt;&lt; endl;
            <span class="keywordflow">if</span> (sctpmsg-&gt;getTag() == <a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a> || sctpmsg-&gt;getTag() == <a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>) {
                <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a72ee49d265f6c75166038f085a52a1bf">SCTP_I_ABORT</a>);
                trans = <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>);
            }
            <span class="keyword">delete</span> abortChunk;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a0f286b0bbc1ee4f20be5136a55cf8923">HEARTBEAT</a>:
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationRcvMessage: HEARTBEAT received&quot;</span> &lt;&lt; endl;
            SCTPHeartbeatChunk* heartbeatChunk;
            heartbeatChunk = check_and_cast&lt;SCTPHeartbeatChunk*&gt;(header);
            <span class="keywordflow">if</span> (!(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>)) {
                <a class="code" href="class_s_c_t_p_association.html#a4693aa8d9ce24d9bf798cb7feefd1085">sendHeartbeatAck</a>(heartbeatChunk, dest, src);
            }
            trans = <span class="keyword">true</span>;
            <span class="keyword">delete</span> heartbeatChunk;
            <span class="keywordflow">if</span> (path) {
                path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac9cdb40c8aec7bbd7c7708c1e7485f66">numberOfHeartbeatsRcvd</a>++;
                path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a88c80132d92e98a79778522ddaa6518a">pathRcvdHb</a>-&gt;record(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac9cdb40c8aec7bbd7c7708c1e7485f66">numberOfHeartbeatsRcvd</a>);
            }
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a5621dd83f6f32ee90c0d505867c67b71">HEARTBEAT_ACK</a>:
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationRcvMessage: HEARTBEAT_ACK received&quot;</span> &lt;&lt; endl;
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a>) {
                trans = <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2f2d1da65ad0c265e5733999458898fb">SCTP_E_RCV_COOKIE_ACK</a>);
            }
            SCTPHeartbeatAckChunk* heartbeatAckChunk;
            heartbeatAckChunk = check_and_cast&lt;SCTPHeartbeatAckChunk*&gt;(header);
            <span class="keywordflow">if</span> (path) {
                <a class="code" href="class_s_c_t_p_association.html#a1f4d814724e79e184655050a48ee1c25">processHeartbeatAckArrived</a>(heartbeatAckChunk, path);
            }
            trans = <span class="keyword">true</span>;
            <span class="keyword">delete</span> heartbeatAckChunk;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a7690b021f467450541d8d89123429d40">SHUTDOWN</a>:
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationRcvMessage: SHUTDOWN received&quot;</span> &lt;&lt; endl;
            SCTPShutdownChunk* shutdownChunk;
            shutdownChunk = check_and_cast&lt;SCTPShutdownChunk*&gt;(header);
            <span class="keywordflow">if</span> (shutdownChunk-&gt;getCumTsnAck()&gt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c4c403bd391f0be75e1b71254828274">lastTsnAck</a>) {
                simtime_t rttEstimation = MAXTIME;
                <a class="code" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks</a>(shutdownChunk-&gt;getCumTsnAck(),
                                         <a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>), rttEstimation);
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c4c403bd391f0be75e1b71254828274">lastTsnAck</a> = shutdownChunk-&gt;getCumTsnAck();
            }
            trans = <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda7712aa29c30d8415b4a4f8bcf27036dd">SCTP_E_RCV_SHUTDOWN</a>);
            <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a21bb0580e0fb02c3a89d63062a14b88b">SCTP_I_SHUTDOWN_RECEIVED</a>);
            trans = <span class="keyword">true</span>;
            <span class="keyword">delete</span> shutdownChunk;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a7f11b152058ba8f4656266d735a50c4b">SHUTDOWN_ACK</a>:
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationRcvMessage: SHUTDOWN_ACK received&quot;</span> &lt;&lt; endl;
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()!=<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>) {
                SCTPShutdownAckChunk* shutdownAckChunk;
                shutdownAckChunk = check_and_cast&lt;SCTPShutdownAckChunk*&gt;(header);
                <a class="code" href="class_s_c_t_p_association.html#a30c6da407b37844471cbd5c69918ae52">sendShutdownComplete</a>();
                <a class="code" href="class_s_c_t_p_association.html#a1e5b14c2f164752dcf7b6a16f654be9d">stopTimers</a>();
                <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>);
                <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>);
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;state=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()) &lt;&lt; endl;
                <span class="keywordflow">if</span> ((<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a0ec4d7400f71ce88a8bbce0e66c97f55">SCTP_S_SHUTDOWN_SENT</a>) ||
                     (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8afed5af0cf4b3fce20325548b0b75961f">SCTP_S_SHUTDOWN_ACK_SENT</a>)) {
                    trans = <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda1ba625b5ddb58a87dc16748b4eef0282">SCTP_E_RCV_SHUTDOWN_ACK</a>);
                    <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3ace58e516838fe8c15ac9ce67f4f4409c">SCTP_I_CLOSED</a>);
                    <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab71f05d4300e0fd95bd5e371c3615979">shutdownChunk</a>;
                }
                <span class="keyword">delete</span> shutdownAckChunk;
            }
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a1ac9ae29771c5095efe16ce822d561d7">SHUTDOWN_COMPLETE</a>:
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;Shutdown Complete arrived&quot;</span> &lt;&lt; endl;
            SCTPShutdownCompleteChunk* shutdownCompleteChunk;
            shutdownCompleteChunk = check_and_cast&lt;SCTPShutdownCompleteChunk*&gt;(header);
            trans = <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda57e8e0f4353663385300b7746ec16d6a">SCTP_E_RCV_SHUTDOWN_COMPLETE</a>);
            <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3adcb0d50416fbeb73876eba7d7b8ee930">SCTP_I_PEER_CLOSED</a>);     <span class="comment">// necessary for NAT-Rendezvous</span>
            <span class="keywordflow">if</span> (trans == <span class="keyword">true</span>) {
                <a class="code" href="class_s_c_t_p_association.html#a1e5b14c2f164752dcf7b6a16f654be9d">stopTimers</a>();
            }
            <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>);
            <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>);
            <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c69e50746d1c61b284521df08bfeeff">shutdownAckChunk</a>;
            <span class="keyword">delete</span> shutdownCompleteChunk;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>: <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;different type&quot;</span> &lt;&lt; endl;
            <span class="keywordflow">break</span>;
        }

        <span class="keywordflow">if</span> (i==numberOfChunks-1 &amp;&amp; (dataChunkReceived || dupReceived)) {
            sendAllowed=<span class="keyword">true</span>;
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; sendAllowed=true; scheduleSack&quot;</span> &lt;&lt; endl;
            <a class="code" href="class_s_c_t_p_association.html#ad26d83ea266011e34ebfbc56f7ee1e75">scheduleSack</a>();
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a0ec4d7400f71ce88a8bbce0e66c97f55">SCTP_S_SHUTDOWN_SENT</a> &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acd712e40d2abba82caa4acb46a16fc8b">ackState</a>&gt;=<a class="code" href="class_s_c_t_p_association.html#ac5b54b2f8fbba401964d30c71e25118f">sackFrequency</a>) {
                <a class="code" href="class_s_c_t_p_association.html#a8ceae356355ca537907cabf469c813af">sendSack</a>();
            }
        }

        <span class="comment">// Send any new DATA chunks, SACK chunks, HEARTBEAT chunks etc.</span>
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationRcvMessage: send new data? state=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState())
                  &lt;&lt; <span class="stringliteral">&quot; sendAllowed=&quot;</span>        &lt;&lt; sendAllowed
                  &lt;&lt; <span class="stringliteral">&quot; shutdownCalled=&quot;</span> &lt;&lt; shutdownCalled &lt;&lt; endl;
        <span class="keywordflow">if</span> (((<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>) ||
              (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a606ae3dac26b5e28d7f5060705e273c6">SCTP_S_SHUTDOWN_PENDING</a>) ||
              (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>)) &amp;&amp;
             (sendAllowed) &amp;&amp;
             (!shutdownCalled)) {
            <a class="code" href="class_s_c_t_p_association.html#ab0faa9ccd46630cfab7a2bc75fb1d52d">sendOnAllPaths</a>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#afaefe95090e09d43d24794cf47a1ec0c">getPrimaryPath</a>());
        }
    }

    <span class="comment">// ====== Clean-up =======================================================</span>
    <a class="code" href="class_s_c_t_p_association.html#a24959906501442490b4767253bbd658c">disposeOf</a>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a6417b860ec08633082497392bdb40325">sctpmsg</a>);
    <span class="keywordflow">return</span> trans;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae086afec043034fc936b270b71c1e6f4"></a><!-- doxytag: member="SCTPAssociation::process_RECEIVE_REQUEST" ref="ae086afec043034fc936b270b71c1e6f4" args="(SCTPEventCode &amp;event, SCTPCommand *sctpCommand)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_RECEIVE_REQUEST </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SCTPCommand *&#160;</td>
          <td class="paramname"><em>sctpCommand</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
     SCTPSendCommand *sendCommand = check_and_cast&lt;SCTPSendCommand *&gt;(sctpCommand);
    <span class="keywordflow">if</span> ((uint32)sendCommand-&gt;getSid() &gt; <a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a> || sendCommand-&gt;getSid() &lt; 0)
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;Application tries to read from invalid stream id....\n&quot;</span>;
    }
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aaf9ea2f913888ba783ae161088669ea6">numMsgsReq</a>[sendCommand-&gt;getSid()]+= sendCommand-&gt;getNumMsgs();
    <a class="code" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7eb1c9af2610929a04cb744b97af93c8"></a><!-- doxytag: member="SCTPAssociation::process_SEND" ref="a7eb1c9af2610929a04cb744b97af93c8" args="(SCTPEventCode &amp;event, SCTPCommand *sctpCommand, cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_SEND </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SCTPCommand *&#160;</td>
          <td class="paramname"><em>sctpCommand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    SCTPSendCommand* sendCommand = check_and_cast&lt;SCTPSendCommand*&gt;(sctpCommand);

    <span class="keywordflow">if</span>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() != <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>) {
        <span class="comment">// TD 12.03.2009: since SCTP_S_ESTABLISHED is the only case, the</span>
        <span class="comment">// switch(...)-block has been removed for enhanced readability.</span>
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;process_SEND: state is not SCTP_S_ESTABLISHED -&gt; returning&quot;</span> &lt;&lt; endl;
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;process_SEND:&quot;</span>
              &lt;&lt; <span class="stringliteral">&quot; assocId=&quot;</span>      &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>
              &lt;&lt; <span class="stringliteral">&quot; localAddr=&quot;</span>    &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>
              &lt;&lt; <span class="stringliteral">&quot; remoteAddr=&quot;</span>   &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>
              &lt;&lt; <span class="stringliteral">&quot; cmdRemoteAddr=&quot;</span>&lt;&lt; sendCommand-&gt;getRemoteAddr()
              &lt;&lt; <span class="stringliteral">&quot; cmdPrimary=&quot;</span>   &lt;&lt; (sendCommand-&gt;getPrimary() ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>)
              &lt;&lt; <span class="stringliteral">&quot; appGateIndex=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aba709e2f773752366d1c291c4fb360c8">appGateIndex</a>
              &lt;&lt; <span class="stringliteral">&quot; streamId=&quot;</span>     &lt;&lt; sendCommand-&gt;getSid() &lt;&lt; endl;

    SCTPSimpleMessage* smsg = check_and_cast&lt;SCTPSimpleMessage*&gt;((msg-&gt;decapsulate()));
    SCTP::AssocStatMap::iterator iter = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a43c9f3107b99f1c969a4d5ca9c168bd3">assocStatMap</a>.find(<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    iter-&gt;second.sentBytes += smsg-&gt;getBitLength() / 8;

  <span class="comment">// ------ Prepare SCTPDataMsg -----------------------------------------</span>
  <span class="keyword">const</span> uint32 streamId       = sendCommand-&gt;getSid();
  <span class="keyword">const</span> uint32 sendUnordered = sendCommand-&gt;getSendUnordered();
  <span class="keyword">const</span> uint32 ppid           = sendCommand-&gt;getPpid();
  <a class="code" href="class_s_c_t_p_send_stream.html">SCTPSendStream</a>* stream = NULL;
  SCTPSendStreamMap::iterator associter = <a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.find(streamId);
  <span class="keywordflow">if</span> (associter != <a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.end()) {
     stream = associter-&gt;second;
  }
  <span class="keywordflow">else</span> {
     opp_error(<span class="stringliteral">&quot;stream with id %d not found&quot;</span>, streamId);
  }

  <span class="keywordtype">char</span> name[64];
  snprintf(name, <span class="keyword">sizeof</span>(name), <span class="stringliteral">&quot;SDATA-%d-%d&quot;</span>, streamId, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a53f16f4ee6a644577c8df76bdfabec46">msgNum</a>);
  smsg-&gt;setName(name);

  SCTPDataMsg* datMsg = <span class="keyword">new</span> SCTPDataMsg();
  datMsg-&gt;encapsulate(smsg);
  datMsg-&gt;setSid(streamId);
  datMsg-&gt;setPpid(ppid);
  datMsg-&gt;setEnqueuingTime(simulation.getSimTime());

  <span class="comment">// ------ Set initial destination address -----------------------------</span>
  <span class="keywordflow">if</span> (sendCommand-&gt;getPrimary()) {
     <span class="keywordflow">if</span> (sendCommand-&gt;getRemoteAddr() == <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>(<span class="stringliteral">&quot;0.0.0.0&quot;</span>)) {
            datMsg-&gt;setInitialDestination(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
     }
     <span class="keywordflow">else</span> {
        datMsg-&gt;setInitialDestination(sendCommand-&gt;getRemoteAddr());
     }
  }
  <span class="keywordflow">else</span> {
     datMsg-&gt;setInitialDestination(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a056eda43969ce7da3949443a1a8fcfa3">getPrimaryPathIndex</a>());
  }

  <span class="comment">// ------ Optional padding and size calculations ----------------------</span>
     datMsg-&gt;setBooksize(smsg-&gt;getBitLength() / 8 + <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5cdefe133e1a8c71203aa26631ed09c7">header</a>);
     <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a> += <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(smsg-&gt;getBitLength() / 8 + <a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
     <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aab189302bf40c67f2eec631bcd7de51f">bookedSumSendStreams</a> += datMsg-&gt;getBooksize();
     <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa67f68583efc7ce652e777d055e87165">sendBuffer</a> += smsg-&gt;getByteLength();

  datMsg-&gt;setMsgNum(++<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a53f16f4ee6a644577c8df76bdfabec46">msgNum</a>);

  <span class="comment">// ------ Ordered/Unordered modes -------------------------------------</span>
  <span class="keywordflow">if</span> (sendUnordered == 1) {
     datMsg-&gt;setOrdered(<span class="keyword">false</span>);
     stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#a819f071b624d554ee5c7d54417bc3a31">getUnorderedStreamQ</a>()-&gt;insert(datMsg);
  }
  <span class="keywordflow">else</span> {
     datMsg-&gt;setOrdered(<span class="keyword">true</span>);
     stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#ac278c3ed4a46cba2cd4744113886e003">getStreamQ</a>()-&gt;insert(datMsg);

     <span class="keywordflow">if</span> ((<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9944dafac700403ebec699e66ca34d03">appSendAllowed</a>)        &amp;&amp;
          (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4a45a11cb5d50f9d7cb1799fa105dedb">sendQueueLimit</a> &gt; 0) &amp;&amp;
          ((uint64)<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa67f68583efc7ce652e777d055e87165">sendBuffer</a> &gt;= <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4a45a11cb5d50f9d7cb1799fa105dedb">sendQueueLimit</a>) ) {
        <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a75904bee9e03f629a2657337857f4e52">SCTP_I_SENDQUEUE_FULL</a>);
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9944dafac700403ebec699e66ca34d03">appSendAllowed</a> = <span class="keyword">false</span>;
     }
     <a class="code" href="class_s_c_t_p_association.html#a1f249bde274ec0e4949023a2a3a3e4e7">sendQueue</a>-&gt;record(stream-&gt;<a class="code" href="class_s_c_t_p_send_stream.html#ac278c3ed4a46cba2cd4744113886e003">getStreamQ</a>()-&gt;getLength());
  }

  <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aee5ec4417497e5bba3cf95f79f902da6">queuedMessages</a>++;
  <span class="keywordflow">if</span> ((<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37fa23a9f841d820bc9e5114e76c5823">queueLimit</a> &gt; 0) &amp;&amp; (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aee5ec4417497e5bba3cf95f79f902da6">queuedMessages</a> &gt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37fa23a9f841d820bc9e5114e76c5823">queueLimit</a>)) {
     <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3fe954a9fd21fd90abbb9258fc285afe">queueUpdate</a> = <span class="keyword">false</span>;
  }
  <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;process_SEND:&quot;</span>
             &lt;&lt; <span class="stringliteral">&quot; last=&quot;</span>         &lt;&lt; sendCommand-&gt;getLast()
             &lt;&lt;<span class="stringliteral">&quot;    queueLimit=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37fa23a9f841d820bc9e5114e76c5823">queueLimit</a> &lt;&lt; endl;

  <span class="comment">// ------ Call sendCommandInvoked() to send message -------------------</span>
  <span class="comment">// sendCommandInvoked() itself will call sendOnAllPaths() ...</span>
  <span class="keywordflow">if</span> (sendCommand-&gt;getLast() == <span class="keyword">true</span>) {
     <span class="keywordflow">if</span> (sendCommand-&gt;getPrimary()) {
        <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>-&gt;<a class="code" href="class_s_c_t_p_algorithm.html#a533d56c5b058b605c61d813339987e39">sendCommandInvoked</a>(NULL);
     }
     <span class="keywordflow">else</span> {
        <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>-&gt;<a class="code" href="class_s_c_t_p_algorithm.html#a533d56c5b058b605c61d813339987e39">sendCommandInvoked</a>(<a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(datMsg-&gt;getInitialDestination()));
     }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa60a2e245739ecf7a4085a3e240a3730"></a><!-- doxytag: member="SCTPAssociation::process_STATUS" ref="aa60a2e245739ecf7a4085a3e240a3730" args="(SCTPEventCode &amp;event, SCTPCommand *sctpCommand, cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_STATUS </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SCTPCommand *&#160;</td>
          <td class="paramname"><em>sctpCommand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    SCTPStatusInfo *statusInfo = <span class="keyword">new</span> SCTPStatusInfo();
    statusInfo-&gt;setState(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState());
    statusInfo-&gt;setStateName(<a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()));
    statusInfo-&gt;setPathId(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
    statusInfo-&gt;setActive(<a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>)-&gt;activePath);
    msg-&gt;setControlInfo(statusInfo);
    <a class="code" href="class_s_c_t_p_association.html#a35a8d95a64b2977c79bf24b1353c0c8e">sendToApp</a>(msg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="acb89ca4bcc84239541171327977762e9"></a><!-- doxytag: member="SCTPAssociation::process_TIMEOUT_HEARTBEAT" ref="acb89ca4bcc84239541171327977762e9" args="(SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_TIMEOUT_HEARTBEAT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> oldState;

    <span class="comment">/* check if error counters must be increased */</span>
      <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec73d49b9720a1448d063e211ccefda0">activePath</a>)
      {
             <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad68b7cf6b6d43185ca00ba427e6d42ba">errorCount</a>++;
             path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a>++;

             <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;HB timeout timer expired for path &quot;</span>&lt;&lt;path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>&lt;&lt;<span class="stringliteral">&quot; --&gt; Increase Error Counters (Assoc: &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad68b7cf6b6d43185ca00ba427e6d42ba">errorCount</a>&lt;&lt;<span class="stringliteral">&quot;, Path: &quot;</span>&lt;&lt;path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a>&lt;&lt;<span class="stringliteral">&quot;)\n&quot;</span>;
      }

    <span class="comment">/* RTO must be doubled for this path ! */</span>
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a> = (simtime_t)<a class="code" href="_s_c_t_p_association_8h.html#ad61931b1ae6b8e5bb714e2e6744f4470">min</a>(2 * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>.dbl(), <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;rtoMax&quot;</span>));
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a44bb5884f543cbf4672d0dadfa04dae4">statisticsPathRTO</a>-&gt;record(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>);
    <span class="comment">/* check if any thresholds are exceeded, and if so, check if ULP must be notified */</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad68b7cf6b6d43185ca00ba427e6d42ba">errorCount</a> &gt; (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;assocMaxRetrans&quot;</span>))
    {
        <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3afc5424e52a8919715c5f0433afcdd3b5">SCTP_I_CONN_LOST</a>);
        <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
        <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">removeAssociation</a>(<span class="keyword">this</span>);
        <span class="keywordflow">return</span>;
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">/* set path state to INACTIVE, if the path error counter is exceeded */</span>
        <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a> &gt;   (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;pathMaxRetrans&quot;</span>))
        {
            oldState = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec73d49b9720a1448d063e211ccefda0">activePath</a>;
            path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec73d49b9720a1448d063e211ccefda0">activePath</a> = <span class="keyword">false</span>;
            <span class="keywordflow">if</span> (path == <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#afaefe95090e09d43d24794cf47a1ec0c">getPrimaryPath</a>()) {
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5b32a3dfde58166c98ee2c0d074d28b0">setPrimaryPath</a>(<a class="code" href="class_s_c_t_p_association.html#a54a47746095fa64e6976d22bdbb8e884">getNextPath</a>(path));
            }
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;pathErrorCount now &quot;</span>&lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a>
                      &lt;&lt; <span class="stringliteral">&quot;; PP now &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a056eda43969ce7da3949443a1a8fcfa3">getPrimaryPathIndex</a>() &lt;&lt; endl;
        }
        <span class="comment">/* then: we can check, if all paths are INACTIVE ! */</span>
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#ae691d69b908141f2b120ce25f824b683">allPathsInactive</a>())
        {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;sctp_do_hb_to_timer() : ALL PATHS INACTIVE --&gt; closing ASSOC\n&quot;</span>;
            <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3afc5424e52a8919715c5f0433afcdd3b5">SCTP_I_CONN_LOST</a>);
            <span class="keywordflow">return</span>;

        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec73d49b9720a1448d063e211ccefda0">activePath</a> == <span class="keyword">false</span> &amp;&amp; oldState == <span class="keyword">true</span>)
        {
            <span class="comment">/* notify the application, in case the PATH STATE has changed from ACTIVE to INACTIVE */</span>
            <a class="code" href="class_s_c_t_p_association.html#aee07b10bc3e9c1999e15c025d5e7db5f">pathStatusIndication</a>(path, <span class="keyword">false</span>);
        }

    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac2468daebc456147e6568b99650165ca"></a><!-- doxytag: member="SCTPAssociation::process_TIMEOUT_HEARTBEAT_INTERVAL" ref="ac2468daebc456147e6568b99650165ca" args="(SCTPPathVariables *path, bool force)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_TIMEOUT_HEARTBEAT_INTERVAL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;HB Interval timer expired -- sending new HB REQ on path &quot;</span>&lt;&lt;path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    <span class="comment">/* restart hb_send_timer on this path */</span>
    <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a>);
    <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>);
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7d1aef839313bbde64bfb12f4ddb3852">heartbeatIntervalTimeout</a> = (double)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;hbInterval&quot;</span>) +  path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>;
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8ea7a908e771155785f375bc4bb05661">heartbeatTimeout</a> = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>;
    <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a>, path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7d1aef839313bbde64bfb12f4ddb3852">heartbeatIntervalTimeout</a>);
    <span class="keywordflow">if</span> ((simTime() - path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a57ce948271655a42d047708102b5c7e4">lastAckTime</a> &gt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7d1aef839313bbde64bfb12f4ddb3852">heartbeatIntervalTimeout</a>/2) || path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aef4eb456f3a0da1e92d670e13cae325a">forceHb</a>)
    {
        <a class="code" href="class_s_c_t_p_association.html#afc5f06d167b937c0d1267047960bc354">sendHeartbeat</a>(path);
        <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>, path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8ea7a908e771155785f375bc4bb05661">heartbeatTimeout</a>);

        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aef4eb456f3a0da1e92d670e13cae325a">forceHb</a> = <span class="keyword">false</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae94a9d41597adc5806db8c60f27ab45d"></a><!-- doxytag: member="SCTPAssociation::process_TIMEOUT_INIT_REXMIT" ref="ae94a9d41597adc5806db8c60f27ab45d" args="(SCTPEventCode &amp;event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_TIMEOUT_INIT_REXMIT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (++<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4b4a00ea47be687ea159b82507339cdb">initRetransCounter</a> &gt; (int32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;maxInitRetrans&quot;</span>))
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Retransmission count during connection setup exceeds &quot;</span> &lt;&lt; (int32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;maxInitRetrans&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;, giving up\n&quot;</span>;
        <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3ace58e516838fe8c15ac9ce67f4f4409c">SCTP_I_CLOSED</a>);
        <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
        <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">removeAssociation</a>(<span class="keyword">this</span>);
        <span class="keywordflow">return</span>;
    }
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt; <span class="stringliteral">&quot;Performing retransmission #&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4b4a00ea47be687ea159b82507339cdb">initRetransCounter</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
    <span class="keywordflow">switch</span>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState())
    {
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8af21d78f3ce1dc469572320cb1e192cc3">SCTP_S_COOKIE_WAIT</a>: <a class="code" href="class_s_c_t_p_association.html#aec407e9c2c1b4d0c604d8d65e78706e8">retransmitInit</a>(); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a>: <a class="code" href="class_s_c_t_p_association.html#ae9ffc855fcb6cfd50fb34a03beaa2d39">retransmitCookieEcho</a>(); <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:     opp_error(<span class="stringliteral">&quot;Internal error: INIT-REXMIT timer expired while in state %s&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()));
    }
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a> *= 2;
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a> &gt; <a class="code" href="_s_c_t_p_association_8h.html#a899e0c5a9422a556e99f7ad0aea9ab8e">SCTP_TIMEOUT_INIT_REXMIT_MAX</a>)
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a> = <a class="code" href="_s_c_t_p_association_8h.html#a899e0c5a9422a556e99f7ad0aea9ab8e">SCTP_TIMEOUT_INIT_REXMIT_MAX</a>;
    <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>,<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7fd942b2be59aa1fa843cd5a7b710731"></a><!-- doxytag: member="SCTPAssociation::process_TIMEOUT_PROBING" ref="a7fd942b2be59aa1fa843cd5a7b710731" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_TIMEOUT_PROBING </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab0e373e70c4541d7f64666e98e99e7d3"></a><!-- doxytag: member="SCTPAssociation::process_TIMEOUT_RTX" ref="ab0e373e70c4541d7f64666e98e99e7d3" args="(SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 SCTPAssociation::process_TIMEOUT_RTX </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Processing retransmission timeout ...&quot;</span> &lt;&lt; endl;

    <span class="comment">// ====== Increase the RTO (by doubling it) ==============================</span>
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a> = <a class="code" href="_s_c_t_p_association_8h.html#ad61931b1ae6b8e5bb714e2e6744f4470">min</a>(2 * path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>.dbl(), <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;rtoMax&quot;</span>));
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a44bb5884f543cbf4672d0dadfa04dae4">statisticsPathRTO</a>-&gt;record(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>);
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Schedule T3 based retransmission for path &quot;</span>&lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; endl;

    <span class="comment">// ====== Update congestion window =======================================</span>
    (this-&gt;*<a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#a295dbbfc4f7566e89d9b93a11d82d26e">ccUpdateAfterRtxTimeout</a>)(path);


    <span class="comment">// ====== Error Counter Handling =========================================</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0f8385151a29c83819ff5c1756ab359b">zeroWindowProbing</a>) {
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad68b7cf6b6d43185ca00ba427e6d42ba">errorCount</a>++;
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a>++;
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;RTX-Timeout: errorCount increased to &quot;</span>&lt;&lt;path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a>&lt;&lt;<span class="stringliteral">&quot;  state-&gt;errorCount=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad68b7cf6b6d43185ca00ba427e6d42ba">errorCount</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    }
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad68b7cf6b6d43185ca00ba427e6d42ba">errorCount</a> &gt;= (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;assocMaxRetrans&quot;</span>)) {
        <span class="comment">/* error counter exceeded terminate the association -- create an SCTPC_EV_CLOSE event and send it to myself */</span>

        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;process_TIMEOUT_RTX : ASSOC ERROR COUNTER EXCEEDED, closing ASSOC&quot;</span> &lt;&lt; endl;
        <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3afc5424e52a8919715c5f0433afcdd3b5">SCTP_I_CONN_LOST</a>);
        <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
        <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">removeAssociation</a>(<span class="keyword">this</span>);
        <span class="keywordflow">return</span> 0;

    }
    <span class="keywordflow">else</span> {
        <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a> &gt; (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;pathMaxRetrans&quot;</span>)) {
            <span class="keywordtype">bool</span> notifyUlp = <span class="keyword">false</span>;

            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;pathErrorCount exceeded\n&quot;</span>;
            <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec73d49b9720a1448d063e211ccefda0">activePath</a>) {
                <span class="comment">/* tell the source */</span>
                notifyUlp = <span class="keyword">true</span>;
            }
            path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec73d49b9720a1448d063e211ccefda0">activePath</a> = <span class="keyword">false</span>;
            <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> == <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a056eda43969ce7da3949443a1a8fcfa3">getPrimaryPathIndex</a>()) {
                <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* nextPath = <a class="code" href="class_s_c_t_p_association.html#a54a47746095fa64e6976d22bdbb8e884">getNextPath</a>(path);
                <span class="keywordflow">if</span> (nextPath != NULL) {
                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5b32a3dfde58166c98ee2c0d074d28b0">setPrimaryPath</a>(nextPath);
                }
            }
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;process_TIMEOUT_RTX(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                      &lt;&lt; <span class="stringliteral">&quot;) : PATH ERROR COUNTER EXCEEDED, path status is INACTIVE&quot;</span> &lt;&lt; endl;
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#ae691d69b908141f2b120ce25f824b683">allPathsInactive</a>()) {
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;process_TIMEOUT_RTX: ALL PATHS INACTIVE --&gt; connection LOST!&quot;</span> &lt;&lt; endl;
                <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3afc5424e52a8919715c5f0433afcdd3b5">SCTP_I_CONN_LOST</a>);
                <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
                <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">removeAssociation</a>(<span class="keyword">this</span>);
                <span class="keywordflow">return</span> 0;
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (notifyUlp) {
                <span class="comment">// Send notification to the application</span>
                <a class="code" href="class_s_c_t_p_association.html#aee07b10bc3e9c1999e15c025d5e7db5f">pathStatusIndication</a>(path, <span class="keyword">false</span>);
            }
        }
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;process_TIMEOUT_RTX(&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                  &lt;&lt; <span class="stringliteral">&quot;) : PATH ERROR COUNTER now &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a> &lt;&lt; endl;
    }


    <span class="comment">// ====== Do Retransmission ==============================================</span>
    <span class="comment">// dequeue all chunks not acked so far and put them in the TransmissionQ</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.empty()) {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Still &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.size()
                  &lt;&lt; <span class="stringliteral">&quot; chunks in retransmissionQ&quot;</span> &lt;&lt; endl;

        <span class="keywordflow">for</span> (SCTPQueue::PayloadQueue::iterator iterator = <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.begin();
            iterator != <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.end(); iterator++) {
            <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* <a class="code" href="structchunk.html">chunk</a> = iterator-&gt;second;
            assert(chunk != NULL);

            <span class="comment">// ====== Insert chunks into TransmissionQ ============================</span>
            <span class="comment">// Only insert chunks that were sent to the path that has timed out</span>
            <span class="keywordflow">if</span> ( ((<a class="code" href="class_s_c_t_p_association.html#abab3867be074dea5acf98169c67efc78">chunkHasBeenAcked</a>(chunk) == <span class="keyword">false</span> &amp;&amp; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a>) || chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ac25b1776cd86480fba00adf7ffc3d281">hasBeenReneged</a>) &amp;&amp;
                  (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>() == path) ) {
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;: Timer-Based RTX for TSN &quot;</span>
                          &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> &lt;&lt; <span class="stringliteral">&quot; on path &quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aab8ca4e56deac9cab60e83c2fa7c2c6f">getLastDestination</a>() &lt;&lt; endl;
                chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>()-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2b7ee405351a9463919c483bce4539b5">numberOfTimerBasedRetransmissions</a>++;
                SCTP::AssocStatMap::iterator iter = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a43c9f3107b99f1c969a4d5ca9c168bd3">assocStatMap</a>.find(<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
                iter-&gt;second.numT3Rtx++;

                <a class="code" href="class_s_c_t_p_association.html#aded774353d79ba7bdf53651ddc178609">moveChunkToOtherPath</a>(chunk, <a class="code" href="class_s_c_t_p_association.html#ab4f6847bb20adea148ebf8cf2a071871">getNextDestination</a>(chunk));
            }
        }
    }


    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* nextPath = <a class="code" href="class_s_c_t_p_association.html#a54a47746095fa64e6976d22bdbb8e884">getNextPath</a>(path);
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;TimeoutRTX: sendOnAllPaths()&quot;</span> &lt;&lt; endl;
    <a class="code" href="class_s_c_t_p_association.html#ab0faa9ccd46630cfab7a2bc75fb1d52d">sendOnAllPaths</a>(nextPath);

    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6866e326d923a8915cdbb3d80802c527"></a><!-- doxytag: member="SCTPAssociation::process_TIMEOUT_SHUTDOWN" ref="a6866e326d923a8915cdbb3d80802c527" args="(SCTPEventCode &amp;event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::process_TIMEOUT_SHUTDOWN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> &amp;&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{

    <span class="keywordflow">if</span> (++<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad68b7cf6b6d43185ca00ba427e6d42ba">errorCount</a> &gt; (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;assocMaxRetrans&quot;</span>))
    {
        <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3afc5424e52a8919715c5f0433afcdd3b5">SCTP_I_CONN_LOST</a>);
        <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
        <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">removeAssociation</a>(<span class="keyword">this</span>);
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Performing shutdown retransmission. Assoc error count now &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad68b7cf6b6d43185ca00ba427e6d42ba">errorCount</a>&lt;&lt;<span class="stringliteral">&quot; \n&quot;</span>;
    <span class="keywordflow">if</span>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a0ec4d7400f71ce88a8bbce0e66c97f55">SCTP_S_SHUTDOWN_SENT</a>)
    {
        <a class="code" href="class_s_c_t_p_association.html#aa28d6c19ab622ed5564596c7f300aea4">retransmitShutdown</a>();
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8afed5af0cf4b3fce20325548b0b75961f">SCTP_S_SHUTDOWN_ACK_SENT</a>)
        <a class="code" href="class_s_c_t_p_association.html#a0c70dd4b41af917ecbaebd2850a808e0">retransmitShutdownAck</a>();

    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a> *= 2;
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a> &gt; <a class="code" href="_s_c_t_p_association_8h.html#a899e0c5a9422a556e99f7ad0aea9ab8e">SCTP_TIMEOUT_INIT_REXMIT_MAX</a>)
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a> = <a class="code" href="_s_c_t_p_association_8h.html#a899e0c5a9422a556e99f7ad0aea9ab8e">SCTP_TIMEOUT_INIT_REXMIT_MAX</a>;
    <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>,<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad14a311c7f07f7377a1a3422d0e6fc6c"></a><!-- doxytag: member="SCTPAssociation::processAppCommand" ref="ad14a311c7f07f7377a1a3422d0e6fc6c" args="(cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::processAppCommand </td>
          <td>(</td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Process commands from the application. Normally returns true. A return value of false means that the connection structure must be deleted by the caller (<a class="el" href="class_s_c_t_p.html">SCTP</a>). </p>

<p>Referenced by <a class="el" href="class_s_c_t_p.html#a305de6ada20d2db21ddd19ad19cac3a1">SCTP::handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_association.html#a372875420182ac696a9cf72971ab5eab">printConnBrief</a>();

    <span class="comment">// first do actions</span>
    SCTPCommand *sctpCommand = (SCTPCommand *)(msg-&gt;removeControlInfo());
    <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> <span class="keyword">event</span> = <a class="code" href="class_s_c_t_p_association.html#a946f737e0ae27932aba2899aa24d2660">preanalyseAppCommandEvent</a>(msg-&gt;getKind());

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;App command: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a63a1d0b48db0d4d129635336591f37fc">eventName</a>(event) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
    <span class="keywordflow">switch</span> (event)
    {
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab1a4ad21616e72e2d7c4bef4b392d674">SCTP_E_ASSOCIATE</a>: <a class="code" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE</a>(event, sctpCommand, msg); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda9f1fd7fc777cc9fcb87a49cd64412c70">SCTP_E_OPEN_PASSIVE</a>: <a class="code" href="class_s_c_t_p_association.html#a5cc7381e91d34e5c13a4b97eb02f9b7e">process_OPEN_PASSIVE</a>(event, sctpCommand, msg); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda8ec7f7bcc1dae63ce49ba1c29227bebe">SCTP_E_SEND</a>: <a class="code" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND</a>(event, sctpCommand, msg); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf772922ac461dd670204bcd480536cec">SCTP_E_CLOSE</a>: <a class="code" href="class_s_c_t_p_association.html#a6c53aeb97e7132e5f09869f886e5807e">process_CLOSE</a>(event); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf572b3caeca60173cd35ff6438fc30f8">SCTP_E_ABORT</a>: <a class="code" href="class_s_c_t_p_association.html#a0604d2735afd938650aa540e1ed7b9d1">process_ABORT</a>(event); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda914409a350944272bbd72083b6b5281b">SCTP_E_RECEIVE</a>: <a class="code" href="class_s_c_t_p_association.html#ae086afec043034fc936b270b71c1e6f4">process_RECEIVE_REQUEST</a>(event, sctpCommand); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda1ab4fe49257ab6212a8dd336e4d07991">SCTP_E_PRIMARY</a>: <a class="code" href="class_s_c_t_p_association.html#a1f578c7e75df4066f4aaf34b8f195f6f">process_PRIMARY</a>(event, sctpCommand); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda3d83eea39de6b7b191caae724ae5146e">SCTP_E_QUEUE_BYTES_LIMIT</a>: <a class="code" href="class_s_c_t_p_association.html#a0bce41a300c3dfdab9d2ca190d5790d3">process_QUEUE_BYTES_LIMIT</a>(sctpCommand); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda982447e78039f557e892297768866518">SCTP_E_QUEUE_MSGS_LIMIT</a>:    <a class="code" href="class_s_c_t_p_association.html#a5f8be6b52ad2164e96fd19799dfd8e01">process_QUEUE_MSGS_LIMIT</a>(sctpCommand); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2c57d6cd31d0e760c9562ab7d2d24532">SCTP_E_SHUTDOWN</a>: <span class="comment">/*sendShutdown*/</span>
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;SCTP_E_SHUTDOWN in state &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a2ef7cd11f293a67b65d0c9cf0eee90a2">stateName</a>(<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState())&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()==<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>) {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;send shutdown ack\n&quot;</span>;
                <a class="code" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
                }
            <span class="keywordflow">break</span>;  <span class="comment">//I.R.</span>
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda309375f495c30e879128bda85711a6b9">SCTP_E_STOP_SENDING</a>: <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda65d6eeb62214f93d929739b4f81cd01c">SCTP_E_SEND_SHUTDOWN_ACK</a>:
                <span class="comment">/*if (fsm-&gt;getState()==SCTP_S_SHUTDOWN_RECEIVED &amp;&amp; getOutstandingBytes()==0</span>
<span class="comment">                    &amp;&amp; qCounter.roomSumSendStreams==0 &amp;&amp; transmissionQ-&gt;getQueueSize()==0)</span>
<span class="comment">                {</span>
<span class="comment">                    sendShutdownAck(state-&gt;primaryPathIndex);</span>
<span class="comment">                }*/</span>
                <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>: opp_error(<span class="stringliteral">&quot;wrong event code&quot;</span>);
    }
    <span class="keyword">delete</span> sctpCommand;
    <span class="comment">// then state transitions</span>
    <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(event);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6d4b0efb4884a96e406c42797456d241"></a><!-- doxytag: member="SCTPAssociation::processCookieAckArrived" ref="a6d4b0efb4884a96e406c42797456d241" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::processCookieAckArrived </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> trans=<span class="keyword">false</span>;

    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a>)
    {
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>);
        trans=<a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda2f2d1da65ad0c265e5733999458898fb">SCTP_E_RCV_COOKIE_ACK</a>);
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a977478bfadd7d0296a7a805ec9e56a95">cookieChunk</a>-&gt;getCookieArraySize()==0)
        {
                <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a977478bfadd7d0296a7a805ec9e56a95">cookieChunk</a>-&gt;getStateCookie();
        }
        <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a977478bfadd7d0296a7a805ec9e56a95">cookieChunk</a>;
        <span class="keywordflow">return</span> trans;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;State=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    <span class="keywordflow">return</span> trans;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0dc1cc0159627680652582a01a4417f2"></a><!-- doxytag: member="SCTPAssociation::processCookieEchoArrived" ref="a0dc1cc0159627680652582a01a4417f2" args="(SCTPCookieEchoChunk *cookieEcho, IPvXAddress addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::processCookieEchoArrived </td>
          <td>(</td>
          <td class="paramtype">SCTPCookieEchoChunk *&#160;</td>
          <td class="paramname"><em>cookieEcho</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> trans = <span class="keyword">false</span>;
    SCTPCookie* cookie = check_and_cast&lt;SCTPCookie*&gt;(cookieEcho-&gt;getStateCookie());
    <span class="keywordflow">if</span> (cookie-&gt;getCreationTime()+(int32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;validCookieLifetime&quot;</span>)&lt;simTime())
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;stale Cookie: sendAbort\n&quot;</span>;
        <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
        <span class="keyword">delete</span> cookie;
        <span class="keywordflow">return</span> trans;
    }
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>)
    {
        <span class="keywordflow">if</span> (cookie-&gt;getLocalTag()!=<a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a> || cookie-&gt;getPeerTag() != <a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>)
        {
            <span class="keywordtype">bool</span> same=<span class="keyword">true</span>;
            <span class="keywordflow">for</span> (int32 i=0; i&lt;32; i++)
            {
                <span class="keywordflow">if</span> (cookie-&gt;getLocalTieTag(i)!=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae69a3b5689a645e53211833683509972">localTieTag</a>[i])
                {
                    same = <span class="keyword">false</span>;
                    <span class="keywordflow">break</span>;
                }
                <span class="keywordflow">if</span> (cookie-&gt;getPeerTieTag(i)!=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a524b3dbfe700d9d54e23186893490422">peerTieTag</a>[i])
                {
                    same = <span class="keyword">false</span>;
                    <span class="keywordflow">break</span>;
                }
            }
            <span class="keywordflow">if</span> (!same)
            {
                <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
                <span class="keyword">delete</span> cookie;
                <span class="keywordflow">return</span> trans;
            }
        }
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;State is CLOSED, Cookie_Ack has to be sent\n&quot;</span>;
        trans=<a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab8c4ae7bdc1d15fd08dbe454cdbf0fcb">SCTP_E_RCV_VALID_COOKIE_ECHO</a>);
        <span class="keywordflow">if</span> (trans)
            <a class="code" href="class_s_c_t_p_association.html#ad277c3986a8173ffe41289f72765ceba">sendCookieAck</a>(addr);<span class="comment">//send to address</span>
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a> || <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8af21d78f3ce1dc469572320cb1e192cc3">SCTP_S_COOKIE_WAIT</a> || <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a>)
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;State is not CLOSED, but COOKIE_ECHO received. Compare the Tags\n&quot;</span>;
        <span class="comment">// case A: Peer restarted, retrieve information from cookie</span>
        <span class="keywordflow">if</span> (cookie-&gt;getLocalTag()!=<a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a> &amp;&amp; cookie-&gt;getPeerTag() != <a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a> )
        {
            <span class="keywordtype">bool</span> same=<span class="keyword">true</span>;
            <span class="keywordflow">for</span> (int32 i=0; i&lt;32; i++)
            {
                <span class="keywordflow">if</span> (cookie-&gt;getLocalTieTag(i)!=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae69a3b5689a645e53211833683509972">localTieTag</a>[i])
                {
                    same = <span class="keyword">false</span>;
                    <span class="keywordflow">break</span>;
                }
                <span class="keywordflow">if</span> (cookie-&gt;getPeerTieTag(i)!=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a524b3dbfe700d9d54e23186893490422">peerTieTag</a>[i])
                {
                    same = <span class="keyword">false</span>;
                    <span class="keywordflow">break</span>;
                }
            }
            <span class="keywordflow">if</span> (same)
            {
                <a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a> = cookie-&gt;getLocalTag();
                <a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a> = cookie-&gt;getPeerTag();
                <a class="code" href="class_s_c_t_p_association.html#ad277c3986a8173ffe41289f72765ceba">sendCookieAck</a>(addr);
            }
        }
        <span class="comment">// case B: Setup collision, retrieve information from cookie</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cookie-&gt;getPeerTag()==<a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a> &amp;&amp; (cookie-&gt;getLocalTag()!=<a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a> || cookie-&gt;getLocalTag()==0))
        {
            <a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a> = cookie-&gt;getLocalTag();
            <a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a> = cookie-&gt;getPeerTag();
            <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab8c4ae7bdc1d15fd08dbe454cdbf0fcb">SCTP_E_RCV_VALID_COOKIE_ECHO</a>);
            <a class="code" href="class_s_c_t_p_association.html#ad277c3986a8173ffe41289f72765ceba">sendCookieAck</a>(addr);
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cookie-&gt;getPeerTag()==<a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a> &amp;&amp; cookie-&gt;getLocalTag()==<a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>)
        {
            <a class="code" href="class_s_c_t_p_association.html#ad277c3986a8173ffe41289f72765ceba">sendCookieAck</a>(addr); <span class="comment">//send to address src</span>
        }
        trans=<span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;State=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
        trans = <span class="keyword">true</span>;
    }
    <span class="keyword">delete</span> cookie;
    <span class="keywordflow">return</span> trans;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4a28f10181c8a7af088e504c76242b7c"></a><!-- doxytag: member="SCTPAssociation::processDataArrived" ref="a4a28f10181c8a7af088e504c76242b7c" args="(SCTPDataChunk *dataChunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> SCTPAssociation::processDataArrived </td>
          <td>(</td>
          <td class="paramtype">SCTPDataChunk *&#160;</td>
          <td class="paramname"><em>dataChunk</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span>                     checkCtsnaChange = <span class="keyword">false</span>;
    <span class="keyword">const</span> uint32         tsn                    = dataChunk-&gt;getTsn();
    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path                 = <a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);

    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a>       = <span class="keyword">false</span>;
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5cc697d3b68b64aca76152385d5cb6f0">lastTsnReceived</a>        = tsn;
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9f057ad775e7e3187bc6f522820b0ac2">lastDataSourceAddress</a> = <a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot; SCTPAssociation::processDataArrived TSN=&quot;</span> &lt;&lt; tsn &lt;&lt; endl;
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac4fe3e23a3de7f0b27d9c897c706c416">pathRcvdTSN</a>-&gt;record(tsn);

    SCTPSimpleMessage* smsg = check_and_cast &lt;SCTPSimpleMessage*&gt;(dataChunk-&gt;decapsulate());
    dataChunk-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>*8);
    dataChunk-&gt;encapsulate(smsg);
    <span class="keyword">const</span> uint32 payloadLength = dataChunk-&gt;getBitLength()/8-<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>;
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;state-&gt;bytesRcvd=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a63d6881509cd0a115838e7c7e9c8c87f">bytesRcvd</a> &lt;&lt; endl;
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a63d6881509cd0a115838e7c7e9c8c87f">bytesRcvd</a>+=payloadLength;
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;state-&gt;bytesRcvd now=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a63d6881509cd0a115838e7c7e9c8c87f">bytesRcvd</a> &lt;&lt; endl;
    SCTP::AssocStatMap::iterator iter=<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a43c9f3107b99f1c969a4d5ca9c168bd3">assocStatMap</a>.find(<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    iter-&gt;second.rcvdBytes+=dataChunk-&gt;getBitLength()/8-<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>;

    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a> == 0) {
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>;
    }
    <span class="keywordflow">else</span> {
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>-1];
    }
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5d87341e572a5fa3688aa9616cae8a39">stopReceiving</a>) {
        <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab4914b4201fb0cd1643109f690a59782">SCTP_E_IGNORE</a>;
    }

    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a74cd3a867ee886b15439c1ca53bbf57d">tsnLe</a>(tsn, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>)) {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Duplicate TSN &quot;</span> &lt;&lt; tsn &lt;&lt; <span class="stringliteral">&quot; (smaller than CumAck)&quot;</span> &lt;&lt; endl;
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a04e8711ebb60bf950f99a98e6eb5cbc9">dupList</a>.push_back(tsn);
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a04e8711ebb60bf950f99a98e6eb5cbc9">dupList</a>.unique();
            <span class="keyword">delete</span> check_and_cast &lt;SCTPSimpleMessage*&gt;(dataChunk-&gt;decapsulate());
            <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda365f70144611ac4229ac712c9fde06f0">SCTP_E_DUP_RECEIVED</a>;
    }


    <span class="keywordflow">if</span> ((int32)(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a>-<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>) &lt;= 0) {
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a2aee269f079e6749ddc839137c157043">tsnGt</a>(tsn, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a>)) {
            <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab4914b4201fb0cd1643109f690a59782">SCTP_E_IGNORE</a>;
        }
        <span class="comment">// changed 06.07.05 I.R.</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((!<a class="code" href="class_s_c_t_p_association.html#a41c4711e6ff504c121e879d6295d33f9">tsnIsDuplicate</a>(tsn)) &amp;&amp;
                    (tsn &lt; state-&gt;highestTsnStored)) {
            <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#a45de5f3a74bba48af92b248edd9c9312">makeRoomForTsn</a>(tsn, dataChunk-&gt;getBitLength()-<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>*8, dataChunk-&gt;getUBit())) {
                <span class="keyword">delete</span> check_and_cast &lt;SCTPSimpleMessage*&gt;(dataChunk-&gt;decapsulate());
                <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab4914b4201fb0cd1643109f690a59782">SCTP_E_IGNORE</a>;
            }
        }
    }
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a2aee269f079e6749ddc839137c157043">tsnGt</a>(tsn, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a>)) {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;highestTsnReceived=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a>
                  &lt;&lt; <span class="stringliteral">&quot; tsn=&quot;</span> &lt;&lt; tsn &lt;&lt; endl;
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#af02f163ebe6c28c874d7734bbc2a31bf">highestTsnStored</a> = tsn;
        <span class="keywordflow">if</span> (tsn == <a class="code" href="class_s_c_t_p_association.html#a5ca011cb3142dfcd423f4083855a7460">initPeerTsn</a>) {
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a> = tsn;
        }
        <span class="keywordflow">else</span> {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Update fragment list&quot;</span> &lt;&lt; endl;
            checkCtsnaChange = <a class="code" href="class_s_c_t_p_association.html#a99fbda3fe957b452899203d4e0f151a0">updateGapList</a>(tsn);
        }
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a> = <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a41c4711e6ff504c121e879d6295d33f9">tsnIsDuplicate</a>(tsn)) {
        <span class="comment">// TSN value is duplicate within a fragment</span>
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Duplicate TSN &quot;</span> &lt;&lt; tsn &lt;&lt; <span class="stringliteral">&quot; (copy)&quot;</span> &lt;&lt; endl;
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a04e8711ebb60bf950f99a98e6eb5cbc9">dupList</a>.push_back(tsn);
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a04e8711ebb60bf950f99a98e6eb5cbc9">dupList</a>.unique();
        <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab4914b4201fb0cd1643109f690a59782">SCTP_E_IGNORE</a>;
    }
    <span class="keywordflow">else</span> {
        checkCtsnaChange = <a class="code" href="class_s_c_t_p_association.html#a99fbda3fe957b452899203d4e0f151a0">updateGapList</a>(tsn);
    }
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20b24275e45b18df329a7254563e306d">swsAvoidanceInvoked</a>) {
        <span class="comment">// swsAvoidanceInvoked =&gt; schedule a SACK to be sent at once in this case</span>
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;swsAvoidanceInvoked&quot;</span> &lt;&lt; endl;
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acd712e40d2abba82caa4acb46a16fc8b">ackState</a> = <a class="code" href="class_s_c_t_p_association.html#ac5b54b2f8fbba401964d30c71e25118f">sackFrequency</a>;
    }

    <span class="keywordflow">if</span> (checkCtsnaChange) {
        <a class="code" href="class_s_c_t_p_association.html#a4d95d83c20353ab76d47d04a240ef61a">advanceCtsna</a>();
    }
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;cTsnAck=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>
              &lt;&lt; <span class="stringliteral">&quot; highestTsnReceived=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a> &lt;&lt; endl;

    <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> <span class="keyword">event</span> = <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda8ec7f7bcc1dae63ce49ba1c29227bebe">SCTP_E_SEND</a>;
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a>) {
        SCTPReceiveStreamMap::iterator iter = <a class="code" href="class_s_c_t_p_association.html#a80374427a755802cd7687c7a77b26e9c">receiveStreams</a>.find(dataChunk-&gt;getSid());
        <span class="keyword">const</span> <span class="keywordtype">int</span> ret = iter-&gt;second-&gt;enqueueNewDataChunk(<a class="code" href="class_s_c_t_p_association.html#ae6298a23676ec2a10036aa66ed6af7b3">makeVarFromMsg</a>(dataChunk));
        <span class="keywordflow">if</span> (ret &gt; 0) {
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>+=payloadLength;

            <span class="keyword">event</span> = <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda6ad094e0a90c2dc8a41628f621d27ca0">SCTP_E_DELIVERED</a>;
            <span class="keywordflow">if</span> (ret &lt; 3) {
                <a class="code" href="class_s_c_t_p_association.html#a155c31414d0e2115eccd2fbb0a966dab">sendDataArrivedNotification</a>(dataChunk-&gt;getSid());
                <a class="code" href="class_s_c_t_p_association.html#a64c5bcff1fa7a6f01d7e969d21b70dd5">putInDeliveryQ</a>(dataChunk-&gt;getSid());
            }
        }
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a> = <span class="keyword">false</span>;
    }

    <span class="keywordflow">return</span>(event);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1f4d814724e79e184655050a48ee1c25"></a><!-- doxytag: member="SCTPAssociation::processHeartbeatAckArrived" ref="a1f4d814724e79e184655050a48ee1c25" args="(SCTPHeartbeatAckChunk *heartbeatack, SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> SCTPAssociation::processHeartbeatAckArrived </td>
          <td>(</td>
          <td class="paramtype">SCTPHeartbeatAckChunk *&#160;</td>
          <td class="paramname"><em>heartbeatack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>.</p>
<div class="fragment"><pre class="fragment">{
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#af24b6bffabfd4c9b91288b66db995759">numberOfHeartbeatAcksRcvd</a>++;
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a64e6491684dd4c25207bef10a216f0ab">pathRcvdHbAck</a>-&gt;record(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#af24b6bffabfd4c9b91288b66db995759">numberOfHeartbeatAcksRcvd</a>);
    <span class="comment">/* hb-ack goes to pathmanagement, reset error counters, stop timeout timer */</span>
    <span class="keyword">const</span> <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a> addr          = hback-&gt;getRemoteAddr();
    <span class="keyword">const</span> simtime_t hbTimeField = hback-&gt;getTimeField();
    <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>);
    <span class="comment">/* assume a valid RTT measurement on this path */</span>
    simtime_t rttEstimation = simTime() - hbTimeField;
    <a class="code" href="class_s_c_t_p_association.html#a02104ef95fcdab0f90cc9b03da82a675">pmRttMeasurement</a>(path, rttEstimation);
    <a class="code" href="class_s_c_t_p_association.html#a0fc1eef21b0fbadd97e0b4739213d35e">pmClearPathCounter</a>(path);
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#afb5df73d90e27abfe7ca3108beb051f6">confirmed</a> = <span class="keyword">true</span>;
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a57ce948271655a42d047708102b5c7e4">lastAckTime</a> = simTime();
    <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae9cc9a0892d63b98a38c6c1efd4753af">primaryPathCandidate</a> == <span class="keyword">true</span>) {
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5b32a3dfde58166c98ee2c0d074d28b0">setPrimaryPath</a>(<a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(addr));
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae9cc9a0892d63b98a38c6c1efd4753af">primaryPathCandidate</a> = <span class="keyword">false</span>;
        <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> &lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20d0d3d8a1e728ac8742eba28856799f">assocPmtu</a>) {
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20d0d3d8a1e728ac8742eba28856799f">assocPmtu</a> = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>;
        }
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a>;
        <a class="code" href="class_s_c_t_p_association.html#a753567499c04f5e4b55cb92790e4c96a">recordCwndUpdate</a>(path);
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8ea7a908e771155785f375bc4bb05661">heartbeatTimeout</a> = (double)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;hbInterval&quot;</span>) + path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>;
    }

    <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec73d49b9720a1448d063e211ccefda0">activePath</a> == <span class="keyword">false</span>) {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;HB ACK arrived activePath=false. remoteAddress=&quot;</span> &lt;&lt;path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                  &lt;&lt; <span class="stringliteral">&quot; initialPP=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a6270b0edb7777931a33ff8662288bf25">initialPrimaryPath</a> &lt;&lt; endl;
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec73d49b9720a1448d063e211ccefda0">activePath</a> = <span class="keyword">true</span>;
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a96e740d1f0d386449c13853fadff56b1">reactivatePrimaryPath</a> &amp;&amp; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> == <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a6270b0edb7777931a33ff8662288bf25">initialPrimaryPath</a>) {
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5b32a3dfde58166c98ee2c0d074d28b0">setPrimaryPath</a>(path);
        }
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;primaryPath now &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a056eda43969ce7da3949443a1a8fcfa3">getPrimaryPathIndex</a>() &lt;&lt; endl;
    }
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Received HB ACK chunk...resetting error counters on path &quot;</span> &lt;&lt; addr
              &lt;&lt;<span class="stringliteral">&quot;, rttEstimation=&quot;</span> &lt;&lt; rttEstimation &lt;&lt; endl;
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a> = 0;
    <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab4914b4201fb0cd1643109f690a59782">SCTP_E_IGNORE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa72dc267f9e5e18957f7e1c0d942195f"></a><!-- doxytag: member="SCTPAssociation::processInitAckArrived" ref="aa72dc267f9e5e18957f7e1c0d942195f" args="(SCTPInitAckChunk *initAckChunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::processInitAckArrived </td>
          <td>(</td>
          <td class="paramtype">SCTPInitAckChunk *&#160;</td>
          <td class="paramname"><em>initAckChunk</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> trans = <span class="keyword">false</span>;
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8af21d78f3ce1dc469572320cb1e192cc3">SCTP_S_COOKIE_WAIT</a>)
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;State is COOKIE_WAIT, Cookie_Echo has to be sent\n&quot;</span>;
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>);
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a> = <a class="code" href="_s_c_t_p_association_8h.html#ad0253f70ce80e86b5da3240da37f4334">SCTP_TIMEOUT_INIT_REXMIT</a>;
        trans=<a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddabad36afdf7219f94be14abb8fe080640">SCTP_E_RCV_INIT_ACK</a>);
        <span class="comment">//delete state-&gt;initChunk; will be deleted when state ESTABLISHED is entered</span>
        <span class="keywordflow">if</span> (trans)
        {
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a6270b0edb7777931a33ff8662288bf25">initialPrimaryPath</a> = <a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>;
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5b32a3dfde58166c98ee2c0d074d28b0">setPrimaryPath</a>(<a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>));
            <a class="code" href="class_s_c_t_p_association.html#a5ca011cb3142dfcd423f4083855a7460">initPeerTsn</a>=initAckChunk-&gt;getInitTSN();
            <a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>= initAckChunk-&gt;getInitTag();
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a> = <a class="code" href="class_s_c_t_p_association.html#a5ca011cb3142dfcd423f4083855a7460">initPeerTsn</a> - 1;
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a2e17d3f84ea047804988bfb5959e906f">initialPeerRwnd</a> = initAckChunk-&gt;getA_rwnd();
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a2e17d3f84ea047804988bfb5959e906f">initialPeerRwnd</a>;
            <a class="code" href="class_s_c_t_p_association.html#a746e4867059fcd11838ab601a6f5fea1">remoteAddressList</a>.clear();
            <a class="code" href="class_s_c_t_p_association.html#aa66d26fc71717ca6158c03a212cc4071">numberOfRemoteAddresses</a> =initAckChunk-&gt;getAddressesArraySize();
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;number of remote addresses in initAck=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa66d26fc71717ca6158c03a212cc4071">numberOfRemoteAddresses</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
            <span class="keywordflow">for</span> (uint32 j=0; j&lt;<a class="code" href="class_s_c_t_p_association.html#aa66d26fc71717ca6158c03a212cc4071">numberOfRemoteAddresses</a>; j++)
            {
                <span class="keywordflow">if</span> (initAckChunk-&gt;getAddresses(j).isIPv6())
                    <span class="keywordflow">continue</span>;
                <span class="keywordflow">for</span> (AddressVector::iterator k=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7b2aedff06029b67f2861a902e1bcf54">localAddresses</a>.begin(); k!=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7b2aedff06029b67f2861a902e1bcf54">localAddresses</a>.end(); ++k)
                {
                    <span class="keywordflow">if</span> (!((*k).isUnspecified()))
                    {
                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;addPath &quot;</span>&lt;&lt;initAckChunk-&gt;getAddresses(j)&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
                        <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a34e3e284fe397118d5e69b56e497ed45">addRemoteAddress</a>(<span class="keyword">this</span>,(*k), initAckChunk-&gt;getAddresses(j));
                        this-&gt;<a class="code" href="class_s_c_t_p_association.html#a746e4867059fcd11838ab601a6f5fea1">remoteAddressList</a>.push_back(initAckChunk-&gt;getAddresses(j));
                        <a class="code" href="class_s_c_t_p_association.html#a1780a25bb9890ee2c0510735299b1bf1">addPath</a>(initAckChunk-&gt;getAddresses(j));
                    }
                }
            }
            SCTPPathMap::iterator ite=<a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.find(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
            <span class="keywordflow">if</span> (ite==<a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end())
            {
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;__LINE__&lt;&lt;<span class="stringliteral">&quot; get new path for &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
                <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_association.html#a940cc2bde58bd842d11b28b3d09130dc">SCTPPathVariables</a>(remoteAddr, <span class="keyword">this</span>);
                <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>[<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>] = path;
                <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>[<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>]  = 0;
                <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a767e2849d053dd45d294d8678b8daed9">roomRetransQ</a>[<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>] = 0;
                <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>[<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>] = 0;
            }
            <a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a>   = ((initAckChunk-&gt;getNoOutStreams()&lt;<a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a>)?initAckChunk-&gt;getNoOutStreams():<a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a>);
            <a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a> = ((initAckChunk-&gt;getNoInStreams()&lt;<a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a>)?initAckChunk-&gt;getNoInStreams():<a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a>);
            (this-&gt;*<a class="code" href="class_s_c_t_p_association.html#a9988effc78d17db9b32a8d6a976c2288">ssFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html#a5796699025095f8e6c57aaff4b5d3538">ssInitStreams</a>)(<a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a>, <a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a>);
            <a class="code" href="class_s_c_t_p_association.html#a3ef5a4494cd7b59c44f44d6ed385e9de">sendCookieEcho</a>(initAckChunk);
        }
        <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a>);
    }
    <span class="keywordflow">else</span>
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;State=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    <a class="code" href="class_s_c_t_p_association.html#a120c72df6657d2ef5038d61881ff11c4">printSctpPathMap</a>();
    <span class="keywordflow">return</span> trans;
}
</pre></div>
</div>
</div>
<a class="anchor" id="add502b430991fe297800a08dd62c569d"></a><!-- doxytag: member="SCTPAssociation::processInitArrived" ref="add502b430991fe297800a08dd62c569d" args="(SCTPInitChunk *initChunk, int32 sport, int32 dport)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::processInitArrived </td>
          <td>(</td>
          <td class="paramtype">SCTPInitChunk *&#160;</td>
          <td class="paramname"><em>initChunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>sport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>dport</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Process incoming <a class="el" href="class_s_c_t_p.html">SCTP</a> packets. Invoked from process_RCV_Message </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_association.html">SCTPAssociation</a>* assoc;
    <span class="keywordtype">char</span> timerName[128];
    <span class="keywordtype">bool</span> trans = <span class="keyword">false</span>;
    <a class="code" href="class_interface_table_access.html">InterfaceTableAccess</a> interfaceTableAccess;
    <a class="code" href="_s_c_t_p_association_8h.html#a83ecc618606af11f87a228a6ab74049b">AddressVector</a> adv;
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;processInitArrived\n&quot;</span>;
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>)
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;fork=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab5bac08be4a3710fe623e93aa65e74ff">fork</a>&lt;&lt;<span class="stringliteral">&quot; initReceived=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac8337c67683db37ec84abbd26674c880">initReceived</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab5bac08be4a3710fe623e93aa65e74ff">fork</a> &amp;&amp; !<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac8337c67683db37ec84abbd26674c880">initReceived</a>)
        {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;cloneAssociation\n&quot;</span>;
            assoc = <a class="code" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation</a>();
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;addForkedAssociation\n&quot;</span>;
            <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a8e139c401cbd596810592e62be90a21e">addForkedAssociation</a>(<span class="keyword">this</span>, assoc, <a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>, <a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>, srcPort, destPort);

            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Connection forked: this connection got new assocId=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>
                <span class="stringliteral">&quot;spinoff keeps LISTENing with assocId=&quot;</span> &lt;&lt; assoc-&gt;<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
            snprintf(timerName, <span class="keyword">sizeof</span>(timerName), <span class="stringliteral">&quot;T2_SHUTDOWN of assoc %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
            <a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>-&gt;setName(timerName);
            snprintf(timerName, <span class="keyword">sizeof</span>(timerName), <span class="stringliteral">&quot;T5_SHUTDOWN_GUARD of assoc %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
            <a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>-&gt;setName(timerName);
            snprintf(timerName, <span class="keyword">sizeof</span>(timerName), <span class="stringliteral">&quot;SACK_TIMER of assoc %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
            <a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>-&gt;setName(timerName);
            snprintf(timerName, <span class="keyword">sizeof</span>(timerName), <span class="stringliteral">&quot;T1_INIT of assoc %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
            <a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>-&gt;setName(timerName);
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a2ee4aaa2e36516a679b8c4a0748ecd9a">updateSockPair</a>(<span class="keyword">this</span>, <a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>, <a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>, srcPort, destPort);

        }
        <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac8337c67683db37ec84abbd26674c880">initReceived</a>)
        {
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac8337c67683db37ec84abbd26674c880">initReceived</a> = <span class="keyword">true</span>;
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a6270b0edb7777931a33ff8662288bf25">initialPrimaryPath</a> = <a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>;
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5b32a3dfde58166c98ee2c0d074d28b0">setPrimaryPath</a>(<a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>));
            <span class="keywordflow">if</span> (initchunk-&gt;getAddressesArraySize()==0)
            {
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;__LINE__&lt;&lt;<span class="stringliteral">&quot; get new path for &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
                <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* rPath = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_association.html#a940cc2bde58bd842d11b28b3d09130dc">SCTPPathVariables</a>(remoteAddr, <span class="keyword">this</span>);
                <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>[rPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>] = rPath;
                <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>[rPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>]     = 0;
                <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>[rPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>] = 0;
                <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a767e2849d053dd45d294d8678b8daed9">roomRetransQ</a>[rPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>] = 0;
            }
            <a class="code" href="class_s_c_t_p_association.html#a5ca011cb3142dfcd423f4083855a7460">initPeerTsn</a>=initchunk-&gt;getInitTSN();
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a> = <a class="code" href="class_s_c_t_p_association.html#a5ca011cb3142dfcd423f4083855a7460">initPeerTsn</a> - 1;
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a2e17d3f84ea047804988bfb5959e906f">initialPeerRwnd</a> = initchunk-&gt;getA_rwnd();
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a2e17d3f84ea047804988bfb5959e906f">initialPeerRwnd</a>;
            <a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>= initchunk-&gt;getInitTag();
            <a class="code" href="class_s_c_t_p_association.html#aa66d26fc71717ca6158c03a212cc4071">numberOfRemoteAddresses</a> =initchunk-&gt;getAddressesArraySize();
            <a class="code" href="class_i_interface_table.html">IInterfaceTable</a> *ift = interfaceTableAccess.<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7b2aedff06029b67f2861a902e1bcf54">localAddresses</a>.clear();
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#af44c3fdaaff9c48fdbb45aac6d6ad082">localAddressList</a>.front() == <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>(<span class="stringliteral">&quot;0.0.0.0&quot;</span>))
            {
                <span class="keywordflow">for</span> (int32 i=0; i&lt;ift-&gt;<a class="code" href="class_i_interface_table.html#a2b0ce46cd92da6f64fc363410dc71904">getNumInterfaces</a>(); ++i)
                {
                    <span class="keywordflow">if</span> (ift-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i)-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()!=NULL)
                    {
                        adv.push_back(ift-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i)-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aec8ebefd03acad479ac89d31d7228331">getIPAddress</a>());
                    }
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ift-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i)-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()!=NULL)
                    {
                        adv.push_back(ift-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i)-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#a908a45071d8685ebbb01f73bb086525b">getAddress</a>(0));
                    }
                }
            }
            <span class="keywordflow">else</span>
            {
                adv = <a class="code" href="class_s_c_t_p_association.html#af44c3fdaaff9c48fdbb45aac6d6ad082">localAddressList</a>;
            }
            uint32 rlevel = <a class="code" href="common_8cc.html#a6f8b246051a225410fd4eba9aa2a9f54">getLevel</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
            <span class="keywordflow">if</span> (rlevel&gt;0)
                <span class="keywordflow">for</span> (AddressVector::iterator i=adv.begin(); i!=adv.end(); ++i)
                {
                    <span class="keywordflow">if</span> (<a class="code" href="common_8cc.html#a6f8b246051a225410fd4eba9aa2a9f54">getLevel</a>((*i))&gt;=rlevel)
                    {
                        <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#aeb3f468f36416f953ab7e647540f75e4">addLocalAddress</a>(<span class="keyword">this</span>, (*i));
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7b2aedff06029b67f2861a902e1bcf54">localAddresses</a>.push_back((*i));
                    }
                }
            <span class="keywordflow">for</span> (uint32 j=0; j&lt;initchunk-&gt;getAddressesArraySize(); j++)
            {
                <span class="comment">// skip IPv6 because we can&#39;t send to them yet</span>
                <span class="keywordflow">if</span> (initchunk-&gt;getAddresses(j).isIPv6())
                    <span class="keywordflow">continue</span>;
                <span class="comment">// set path variables for this pathlocalAddresses</span>
                <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(initchunk-&gt;getAddresses(j)))
                {
                    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_association.html#a940cc2bde58bd842d11b28b3d09130dc">SCTPPathVariables</a>(initchunk-&gt;getAddresses(j), <span class="keyword">this</span>);
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;__LINE__&lt;&lt;<span class="stringliteral">&quot; get new path for &quot;</span>&lt;&lt;initchunk-&gt;getAddresses(j)&lt;&lt;<span class="stringliteral">&quot; ptr=&quot;</span>&lt;&lt;path&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
                    <span class="keywordflow">for</span> (AddressVector::iterator k=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7b2aedff06029b67f2861a902e1bcf54">localAddresses</a>.begin(); k!=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7b2aedff06029b67f2861a902e1bcf54">localAddresses</a>.end(); ++k)
                    {
                        <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a34e3e284fe397118d5e69b56e497ed45">addRemoteAddress</a>(<span class="keyword">this</span>,(*k), initchunk-&gt;getAddresses(j));
                        this-&gt;<a class="code" href="class_s_c_t_p_association.html#a746e4867059fcd11838ab601a6f5fea1">remoteAddressList</a>.push_back(initchunk-&gt;getAddresses(j));
                    }
                    <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>[path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>] = path;
                    <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>[path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>]     = 0;
                    <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>[path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>] = 0;
                    <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a767e2849d053dd45d294d8678b8daed9">roomRetransQ</a>[path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>] = 0;
                }
            }
            SCTPPathMap::iterator ite=<a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.find(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
            <span class="keywordflow">if</span> (ite==<a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end())
            {
                <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_association.html#a940cc2bde58bd842d11b28b3d09130dc">SCTPPathVariables</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>, <span class="keyword">this</span>);
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;__LINE__&lt;&lt;<span class="stringliteral">&quot; get new path for &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>&lt;&lt;<span class="stringliteral">&quot; ptr=&quot;</span>&lt;&lt;path&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
                <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>[<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>] = path;
                <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>[<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>]  = 0;
                <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>[<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>] = 0;
                <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a767e2849d053dd45d294d8678b8daed9">roomRetransQ</a>[<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>] = 0;
            }
            trans = <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab8aa9b5c31869bf157aa993cea077747">SCTP_E_RCV_INIT</a>);
            <span class="keywordflow">if</span> (trans) {
                <a class="code" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck</a>(initchunk);
            }
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>)
        {
            trans=<a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab8aa9b5c31869bf157aa993cea077747">SCTP_E_RCV_INIT</a>);
            <span class="keywordflow">if</span> (trans) {
                <a class="code" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck</a>(initchunk);
            }
        }
        <span class="keywordflow">else</span> {
            trans = <span class="keyword">true</span>;
        }
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8af21d78f3ce1dc469572320cb1e192cc3">SCTP_S_COOKIE_WAIT</a>) <span class="comment">//INIT-Collision</span>
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;INIT collision: send Init-Ack\n&quot;</span>;
        <a class="code" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck</a>(initchunk);
        trans=<span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a> || <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>)
    {
        <span class="comment">// check, whether a new address has been added</span>
        <span class="keywordtype">bool</span> addressPresent = <span class="keyword">false</span>;
        <span class="keywordflow">for</span> (uint32 j=0; j&lt;initchunk-&gt;getAddressesArraySize(); j++)
        {
            <span class="keywordflow">if</span> (initchunk-&gt;getAddresses(j).isIPv6())
                <span class="keywordflow">continue</span>;
            <span class="keywordflow">for</span> (AddressVector::iterator k=<a class="code" href="class_s_c_t_p_association.html#a746e4867059fcd11838ab601a6f5fea1">remoteAddressList</a>.begin(); k!=<a class="code" href="class_s_c_t_p_association.html#a746e4867059fcd11838ab601a6f5fea1">remoteAddressList</a>.end(); ++k)
            {
                <span class="keywordflow">if</span> ((*k)==(initchunk-&gt;getAddresses(j)))
                {
                    addressPresent = <span class="keyword">true</span>;
                    <span class="keywordflow">break</span>;
                }
            }
            <span class="keywordflow">if</span> (!addressPresent)
            {
                <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }
        }
        <a class="code" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck</a>(initchunk);
        trans=<span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8afed5af0cf4b3fce20325548b0b75961f">SCTP_S_SHUTDOWN_ACK_SENT</a>)
        trans = <span class="keyword">true</span>;
    <a class="code" href="class_s_c_t_p_association.html#a120c72df6657d2ef5038d61881ff11c4">printSctpPathMap</a>();
    <span class="keywordflow">return</span> trans;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a814dc2552ad0e6710552757416f0bf93"></a><!-- doxytag: member="SCTPAssociation::processSackArrived" ref="a814dc2552ad0e6710552757416f0bf93" args="(SCTPSackChunk *sackChunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> SCTPAssociation::processSackArrived </td>
          <td>(</td>
          <td class="paramtype">SCTPSackChunk *&#160;</td>
          <td class="paramname"><em>sackChunk</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>.</p>
<div class="fragment"><pre class="fragment">{
    simtime_t            rttEstimation            = MAXTIME;
    <span class="keywordtype">bool</span>                     ctsnaAdvanced            = <span class="keyword">false</span>;
    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path                       = <a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);    <span class="comment">// Path for *this* SACK!</span>
    <span class="keyword">const</span> uint64         arwnd                    = sackChunk-&gt;getA_rwnd();
    <span class="keyword">const</span> uint32         tsna                         = sackChunk-&gt;getCumTsnAck();
    uint32               highestNewAck            = tsna;   <span class="comment">// Highest newly acked TSN</span>
    <span class="keyword">const</span> uint16         numGaps                      = sackChunk-&gt;getNumGaps();
    <span class="keywordtype">bool</span>                     getChunkFastFirstTime = <span class="keyword">true</span>;

    <span class="comment">// ====== Print some information =========================================</span>
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;##### SACK Processing: TSNa=&quot;</span> &lt;&lt; tsna &lt;&lt; <span class="stringliteral">&quot; #####&quot;</span> &lt;&lt; endl;
    <span class="keywordflow">for</span>(SCTPPathMap::iterator piter = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin(); piter != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); piter++) {
        <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* myPath = piter-&gt;second;
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Path &quot;</span> &lt;&lt; myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;:\t&quot;</span>
                  &lt;&lt; <span class="stringliteral">&quot;outstanding=&quot;</span>          &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                  &lt;&lt; <span class="stringliteral">&quot;T3scheduled=&quot;</span>          &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>-&gt;getArrivalTime() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>
                  &lt;&lt; (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>-&gt;isScheduled() ? <span class="stringliteral">&quot;[ok]&quot;</span> : <span class="stringliteral">&quot;[NOT SCHEDULED]&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>
                  &lt;&lt; endl;
    }



    <span class="comment">// ====== Initialize some variables ======================================</span>
    <span class="keywordflow">for</span>(SCTPPathMap::iterator piter = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin(); piter != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); piter++) {
        <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* myPath = piter-&gt;second;
        <span class="comment">// T.D. 26.03.09: Remember outstanding bytes before this update</span>
        <span class="comment">// Values are necessary for updating the congestion window!</span>
        myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae759ba7c806cc1317ddeaa3238716aad">outstandingBytesBeforeUpdate</a> = myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a>;     <span class="comment">// T.D. 14.11.09: Bugfix - copy from myPath, not from path!</span>
        myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad26e872a5b7a170d5585fdc51d2c2f92">requiresRtx</a>                      = <span class="keyword">false</span>;
        myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a298953666d258498705f8fcf888b5f6a">lowestTSNRetransmitted</a>       = <span class="keyword">false</span>;
        myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec0ed38b47b0e04b90dd7ccf70a03bcb">findLowestTSN</a>                    = <span class="keyword">true</span>;
        myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2168b109c4ea38df8f6c48d9e020e5c9">gapAcksInLastSACK</a>                = 0;
        myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#af4324130b5f8f8b69167824aaac5f97d">gapNAcksInLastSACK</a>               = 0;
        myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a44069a398db868dd42e80fa32bea5706">newlyAckedBytes</a>                  = 0;
        <span class="keywordflow">if</span> (myPath == path) {
            myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a57ce948271655a42d047708102b5c7e4">lastAckTime</a> = simTime();
        }
    }


    <span class="comment">// ====== Zero Window Probing ============================================</span>
    <span class="keywordflow">if</span> ( (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0f8385151a29c83819ff5c1756ab359b">zeroWindowProbing</a>) &amp;&amp; (arwnd &gt; 0) ) {
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0f8385151a29c83819ff5c1756ab359b">zeroWindowProbing</a> = <span class="keyword">false</span>;
    }


    <span class="comment">// #######################################################################</span>
    <span class="comment">// #### Processing of CumAck                                                         ####</span>
    <span class="comment">// #######################################################################</span>

    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a2aee269f079e6749ddc839137c157043">tsnGt</a>(tsna, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c4c403bd391f0be75e1b71254828274">lastTsnAck</a>)) {    <span class="comment">// Handle new CumAck</span>
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;===== Handling new CumAck for TSN &quot;</span> &lt;&lt; tsna &lt;&lt; <span class="stringliteral">&quot; =====&quot;</span> &lt;&lt; endl;


        <span class="comment">// We have got new chunks acked, and our cum ack point is advanced ...</span>
        <span class="comment">// Depending on the parameter osbWithHeader ackedBytes are with or without the header bytes.</span>
        <span class="comment">// T.D. 23.03.09: path-&gt;newlyAckedBytes is updated in dequeueAckedChunks()!</span>
        <a class="code" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks</a>(tsna, path, rttEstimation); <span class="comment">// chunks with tsn between lastTsnAck and tsna are removed from the transmissionQ and the retransmissionQ; outstandingBytes are decreased</span>

        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c4c403bd391f0be75e1b71254828274">lastTsnAck</a> = tsna;
        ctsnaAdvanced = <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a2e63afca29fd3f5d2dedb4f05fb1015f">tsnLt</a>(tsna, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c4c403bd391f0be75e1b71254828274">lastTsnAck</a>)) {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Stale CumAck (&quot;</span> &lt;&lt; tsna &lt;&lt; <span class="stringliteral">&quot; &lt; &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c4c403bd391f0be75e1b71254828274">lastTsnAck</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>
                  &lt;&lt; endl;
        <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab4914b4201fb0cd1643109f690a59782">SCTP_E_IGNORE</a>;
    }


    <span class="comment">// ====== Handle reneging ================================================</span>
    <span class="keywordflow">if</span> ((numGaps == 0) &amp;&amp; (<a class="code" href="class_s_c_t_p_association.html#a2e63afca29fd3f5d2dedb4f05fb1015f">tsnLt</a>(tsna, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a491c96f05a527dd616f163958176f9a8">highestTsnAcked</a>))) {
        <span class="comment">// Reneging, type 0:</span>
        <span class="comment">// In a previous SACK, chunks up to highestTsnAcked have been acked.</span>
        <span class="comment">// This SACK contains a CumAck &lt; highestTsnAcked</span>
        <span class="comment">//      =&gt; rereg TSNs from CumAck+1 to highestTsnAcked</span>
        <span class="comment">//      =&gt; new highestTsnAcked = CumAck</span>
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;numGaps=0 &amp;&amp; tsna &quot;</span> &lt;&lt; tsna
                  &lt;&lt; <span class="stringliteral">&quot; &lt; highestTsnAcked &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a491c96f05a527dd616f163958176f9a8">highestTsnAcked</a> &lt;&lt; endl;
        uint32 i = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a491c96f05a527dd616f163958176f9a8">highestTsnAcked</a>;
        <span class="keywordflow">while</span> (i &gt;= tsna + 1) {
            <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* myChunk = <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#a2834802fcd42c759e97cd1e450ad1d06">getChunk</a>(i);
            <span class="keywordflow">if</span>(myChunk) {
                <span class="keywordflow">if</span>(<a class="code" href="class_s_c_t_p_association.html#abab3867be074dea5acf98169c67efc78">chunkHasBeenAcked</a>(myChunk)) {
                    <a class="code" href="class_s_c_t_p_association.html#ab70d01d19820a5a16547e439b142d5fe">tsnWasReneged</a>(myChunk,
                                      0);
                }
            }
            i--;
        }
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a491c96f05a527dd616f163958176f9a8">highestTsnAcked</a> = tsna;
    }


    <span class="comment">// #######################################################################</span>
    <span class="comment">// #### Processing of GapAcks                                                        ####</span>
    <span class="comment">// #######################################################################</span>

    <span class="keywordflow">if</span> ((numGaps &gt; 0) &amp;&amp; (!<a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.empty()) ) {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;===== Handling GapAcks after CumTSNAck &quot;</span> &lt;&lt; tsna &lt;&lt; <span class="stringliteral">&quot; =====&quot;</span> &lt;&lt; endl;
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;We got &quot;</span> &lt;&lt; numGaps &lt;&lt; <span class="stringliteral">&quot; gap reports&quot;</span> &lt;&lt; endl;

        <span class="comment">// We got fragment reports... check for newly acked chunks.</span>
        <span class="keyword">const</span> uint32 queuedChunks = <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.size();
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Number of chunks in retransmissionQ: &quot;</span> &lt;&lt; queuedChunks
                  &lt;&lt;<span class="stringliteral">&quot; highestGapStop: &quot;</span>  &lt;&lt; sackChunk-&gt;getGapStop(numGaps-1)
                  &lt;&lt;<span class="stringliteral">&quot; highestTsnAcked: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a491c96f05a527dd616f163958176f9a8">highestTsnAcked</a> &lt;&lt; endl;

        <span class="comment">// ====== Handle reneging =============================================</span>
        <span class="comment">// highest gapStop smaller than highestTsnAcked: there might have been reneging</span>
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a2e63afca29fd3f5d2dedb4f05fb1015f">tsnLt</a>(sackChunk-&gt;getGapStop(numGaps-1), <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a491c96f05a527dd616f163958176f9a8">highestTsnAcked</a>)) {
            <span class="comment">// Reneging, type 2:</span>
            <span class="comment">// In a previous SACK, chunks up to highestTsnAcked have been acked.</span>
            <span class="comment">// This SACK contains a last gap ack &lt; highestTsnAcked</span>
            <span class="comment">//      =&gt; rereg TSNs from last gap ack to highestTsnAcked</span>
            <span class="comment">//      =&gt; new highestTsnAcked = last gap ack</span>
            uint32 i = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a491c96f05a527dd616f163958176f9a8">highestTsnAcked</a>;
            <span class="keywordflow">while</span> (i &gt;= sackChunk-&gt;getGapStop(numGaps - 1) + 1) {
                <span class="comment">// ====== Looking up TSN in retransmission queue ================</span>
                <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* myChunk = <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#a2834802fcd42c759e97cd1e450ad1d06">getChunk</a>(i);
                <span class="keywordflow">if</span>(myChunk) {
                    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#abab3867be074dea5acf98169c67efc78">chunkHasBeenAcked</a>(myChunk)) {
                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;TSN &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; was found. It has been un-acked.&quot;</span> &lt;&lt; endl;
                        <a class="code" href="class_s_c_t_p_association.html#ab70d01d19820a5a16547e439b142d5fe">tsnWasReneged</a>(myChunk,
                                          2);
                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;highestTsnAcked now &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a491c96f05a527dd616f163958176f9a8">highestTsnAcked</a> &lt;&lt; endl;
                    }
                }
                <span class="keywordflow">else</span> {
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;TSN &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; not found in retransmissionQ&quot;</span> &lt;&lt; endl;
                }
                i--;
            }
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a491c96f05a527dd616f163958176f9a8">highestTsnAcked</a> = sackChunk-&gt;getGapStop(numGaps - 1);
        }

        <span class="comment">// ====== Looking for changes in the gap reports ======================</span>
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Looking for changes in gap reports&quot;</span> &lt;&lt; endl;
        <span class="keywordflow">for</span> (int32 key = 0;key &lt; numGaps; key++) {
            <span class="keyword">const</span> uint32 lo = sackChunk-&gt;getGapStart(key);
            <span class="keyword">const</span> uint32 hi = sackChunk-&gt;getGapStop(key);


            <span class="comment">// ====== Iterate over TSNs in gap reports =========================</span>
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Examine TSNs between &quot;</span> &lt;&lt; lo &lt;&lt; <span class="stringliteral">&quot; and &quot;</span> &lt;&lt; hi &lt;&lt; endl;
            <span class="keywordflow">for</span> (uint32 pos = lo; pos &lt;= hi; pos++) {
                <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* myChunk = <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#adf2bf9c28c55c2b9145a0c57b6f52792">getChunkFast</a>(pos, getChunkFastFirstTime);
                <span class="keywordflow">if</span> (myChunk) {
                    <span class="keywordflow">if</span>(<a class="code" href="class_s_c_t_p_association.html#abab3867be074dea5acf98169c67efc78">chunkHasBeenAcked</a>(myChunk) == <span class="keyword">false</span>) {
                        <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* myChunkLastPath = myChunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>();
                        assert(myChunkLastPath != NULL);
                        <span class="comment">// T.D. 02.02.2010: This chunk has been acked newly.</span>
                        <span class="comment">//                        Let&#39;s process this new acknowledgement!</span>
                        <a class="code" href="class_s_c_t_p_association.html#a297f87caf9d5e3b6cf596a5e44381061">handleChunkReportedAsAcked</a>(highestNewAck, rttEstimation, myChunk,
                                                            path <span class="comment">/* i.e. the SACK path for RTT measurement! */</span>);
                    }
                }
            }
        }
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a491c96f05a527dd616f163958176f9a8">highestTsnAcked</a> = sackChunk-&gt;getGapStop(numGaps-1);

        <span class="comment">// ====== Examine chunks between the gap reports ======================</span>
        <span class="comment">// They might have to be retransmitted or they could have been removed</span>
        uint32 lo = tsna;
        <span class="keywordflow">for</span> (int32 key = 0; key &lt; numGaps; key++) {
            <span class="keyword">const</span> uint32 hi = sackChunk-&gt;getGapStart(key);
            <span class="keywordflow">for</span> (uint32 pos = lo+1; pos &lt;= hi - 1; pos++) {
                <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* myChunk = <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#adf2bf9c28c55c2b9145a0c57b6f52792">getChunkFast</a>(pos, getChunkFastFirstTime);
                <span class="keywordflow">if</span>(myChunk) {
                    <a class="code" href="class_s_c_t_p_association.html#a01a9c50a325baf1ebf3d25972a776393">handleChunkReportedAsMissing</a>(sackChunk, highestNewAck, myChunk,
                                                          path <span class="comment">/* i.e. the SACK path for RTT measurement! */</span>);
                }
                <span class="keywordflow">else</span> {
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;TSN &quot;</span> &lt;&lt; pos &lt;&lt; <span class="stringliteral">&quot; not found in retransmissionQ&quot;</span> &lt;&lt; endl;
                }
            }
            lo = sackChunk-&gt;getGapStop(key);
        }


        <span class="comment">// ====== Validity checks =============================================</span>
    }


    <span class="comment">// ====== Update Fast Recovery status, according to SACK =================</span>
    <a class="code" href="class_s_c_t_p_association.html#a7235e0a24b1d8a8cc70eedda6adb081f">updateFastRecoveryStatus</a>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c4c403bd391f0be75e1b71254828274">lastTsnAck</a>);

    <span class="comment">// ====== Update RTT measurement for newly acked data chunks =============</span>
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;: SACK: rtt=&quot;</span> &lt;&lt; rttEstimation
              &lt;&lt; <span class="stringliteral">&quot;, path=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; endl;
    <a class="code" href="class_s_c_t_p_association.html#a02104ef95fcdab0f90cc9b03da82a675">pmRttMeasurement</a>(path, rttEstimation);



    <span class="comment">// #######################################################################</span>
    <span class="comment">// #### Receiver Window Management                                               ####</span>
    <span class="comment">// #######################################################################</span>

    <span class="keyword">const</span> uint32 osb = <a class="code" href="class_s_c_t_p_association.html#a8270ebaccc92eb00ffae041a8406b094">getOutstandingBytes</a>();
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a> = arwnd - osb;

    <span class="comment">// position of statement changed 20.07.05 I.R.</span>
    <span class="keywordflow">if</span> ((int32)(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a>) &lt; 0) {
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a> = 0;
    }
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a> &gt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a2e17d3f84ea047804988bfb5959e906f">initialPeerRwnd</a>) {
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a2e17d3f84ea047804988bfb5959e906f">initialPeerRwnd</a>;
    }
    <span class="keywordflow">if</span> (arwnd == 1 || <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a> &lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aba85e5f43e22032f2f883effbd7a8f92">swsLimit</a> || arwnd == 0) {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;processSackArrived: arwnd=&quot;</span> &lt;&lt; arwnd
                  &lt;&lt; <span class="stringliteral">&quot; state-&gt;peerRwnd=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a>
                  &lt;&lt; <span class="stringliteral">&quot; set peerWindowFull&quot;</span> &lt;&lt; endl;
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a56e6edeafb32e19e42da2889d4a16202">peerWindowFull</a> = <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a56e6edeafb32e19e42da2889d4a16202">peerWindowFull</a>    = <span class="keyword">false</span>;
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0f8385151a29c83819ff5c1756ab359b">zeroWindowProbing</a> = <span class="keyword">false</span>;
    }
<span class="preprocessor">#ifdef PVIATE</span>
<span class="preprocessor"></span>    advancePeerTsn();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    <span class="comment">// ====== Need for zero-window probing? ==================================</span>
    <span class="keywordflow">if</span>(osb == 0) {
        <span class="keywordflow">if</span> (arwnd == 0)
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0f8385151a29c83819ff5c1756ab359b">zeroWindowProbing</a> = <span class="keyword">true</span>;
    }


    <span class="comment">// #######################################################################</span>
    <span class="comment">// #### Congestion Window Management                                             ####</span>
    <span class="comment">// #######################################################################</span>

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Before ccUpdateBytesAcked: &quot;</span>;
    <span class="keywordflow">for</span>(SCTPPathMap::iterator piter = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin(); piter != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); piter++) {
        <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* myPath    = piter-&gt;second;
        <span class="keyword">const</span> <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>&amp; myPathId = myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>;


        <span class="keywordflow">if</span>(myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a44069a398db868dd42e80fa32bea5706">newlyAckedBytes</a> &gt; 0) {
            <span class="comment">// T.D. 07.10.2009: Only call ccUpdateBytesAcked() when there are</span>
            <span class="comment">//                        acked bytes on this path!</span>
            <span class="keyword">const</span> <span class="keywordtype">bool</span> advanceWindow = myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8a2d22841d029151804bfa961d3b3e1a">newCumAck</a>;

            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tCC &quot;</span> &lt;&lt; myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a44069a398db868dd42e80fa32bea5706">newlyAckedBytes</a>
                      &lt;&lt; <span class="stringliteral">&quot; newly acked on path &quot;</span> &lt;&lt; myPathId &lt;&lt; <span class="stringliteral">&quot;;&quot;</span>
                      &lt;&lt; <span class="stringliteral">&quot;\t-&gt;\tadvanceWindow=&quot;</span>       &lt;&lt; advanceWindow &lt;&lt; endl;

            (this-&gt;*<a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#ad8f61b32a24107ce516331725cfe443d">ccUpdateBytesAcked</a>)(myPath, myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a44069a398db868dd42e80fa32bea5706">newlyAckedBytes</a>, advanceWindow);
        }
    }

    <span class="comment">// ====== Update congestion windows on paths (handling decreases) ========</span>
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Before ccUpdateAfterSack with tsna=&quot;</span> &lt;&lt; tsna &lt;&lt; endl;
    <span class="comment">// ccUpdateAfterSack() will iterate over all paths.</span>
    (this-&gt;*<a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#a96e83612de4220f4ae94288f12321664">ccUpdateAfterSack</a>)();


    <span class="comment">// #######################################################################</span>
    <span class="comment">// #### Path Management                                                              ####</span>
    <span class="comment">// #######################################################################</span>

    <span class="comment">// ====== Need to stop or restart T3 timer? ==============================</span>
    <span class="keywordflow">for</span>(SCTPPathMap::iterator piter = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin(); piter != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); piter++) {
        <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* myPath    = piter-&gt;second;
        <span class="keyword">const</span> <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>&amp; myPathId = myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>;

        <span class="keywordflow">if</span> (myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> == 0) {
            <span class="comment">// T.D. 07.01.2010: Only stop T3 timer when there is nothing more to send on this path!</span>
            <span class="keywordflow">if</span>(<a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>.find(myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>)-&gt;second == 0) {
                <span class="comment">// Stop T3 timer, if there are no more outstanding bytes.</span>
                <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>);
            }
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8a2d22841d029151804bfa961d3b3e1a">newCumAck</a>) {
            <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>);
            <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>, myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>);
        }
        <span class="keywordflow">else</span> {
            <span class="comment">/* Also restart T3 timer, when lowest TSN is rtx&#39;ed */</span>
            <span class="keywordflow">if</span>(myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a298953666d258498705f8fcf888b5f6a">lowestTSNRetransmitted</a> == <span class="keyword">true</span>) {
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Lowest TSN retransmitted =&gt; restart of T3 timer for path &quot;</span>
                            &lt;&lt; myPathId &lt;&lt; endl;
                <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>);
                <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>, myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>);
            }
        }

        <span class="comment">// ====== Clear error counter if TSNs on path have been acked =========</span>
        <span class="keywordflow">if</span> (myPath-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a44069a398db868dd42e80fa32bea5706">newlyAckedBytes</a> &gt; 0) {
            <a class="code" href="class_s_c_t_p_association.html#a0fc1eef21b0fbadd97e0b4739213d35e">pmClearPathCounter</a>(myPath);
        }
    }



    <span class="keywordflow">return</span> <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab4914b4201fb0cd1643109f690a59782">SCTP_E_IGNORE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1460f83f7b50fee1f47fe7b4bf6744be"></a><!-- doxytag: member="SCTPAssociation::processSCTPMessage" ref="a1460f83f7b50fee1f47fe7b4bf6744be" args="(SCTPMessage *sctpmsg, const IPvXAddress &amp;srcAddr, const IPvXAddress &amp;destAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::processSCTPMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *&#160;</td>
          <td class="paramname"><em>sctpmsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>srcAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>destAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Process incoming <a class="el" href="class_s_c_t_p.html">SCTP</a> segment. Normally returns true. A return value of false means that the connection structure must be deleted by the caller (<a class="el" href="class_s_c_t_p.html">SCTP</a>). </p>

<p>Referenced by <a class="el" href="class_s_c_t_p.html#a305de6ada20d2db21ddd19ad19cac3a1">SCTP::handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_association.html#a372875420182ac696a9cf72971ab5eab">printConnBrief</a>();

    <a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>  = msgDestAddr;
    <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>  = sctpmsg-&gt;getDestPort();
    <a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a> = msgSrcAddr;
    <a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a> = sctpmsg-&gt;getSrcPort();

    <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message</a>(sctpmsg, msgSrcAddr, msgDestAddr);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a001fa353226a6d713050940b2aa8587d"></a><!-- doxytag: member="SCTPAssociation::processTimer" ref="a001fa353226a6d713050940b2aa8587d" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::processTimer </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p.html#a305de6ada20d2db21ddd19ad19cac3a1">SCTP::handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = NULL;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; msg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; timer expired at &quot;</span>&lt;&lt;simulation.getSimTime()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    SCTPPathInfo* pinfo = check_and_cast&lt;SCTPPathInfo*&gt;(msg-&gt;getControlInfo());
    <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a> addr = pinfo-&gt;getRemoteAddress();

    <span class="keywordflow">if</span> (addr != <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>(<span class="stringliteral">&quot;0.0.0.0&quot;</span>))
        path = <a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(addr);
     <span class="comment">// first do actions</span>
    <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dd">SCTPEventCode</a> event;
    <span class="keyword">event</span> = <a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddab4914b4201fb0cd1643109f690a59782">SCTP_E_IGNORE</a>;
    <span class="keywordflow">if</span> (msg==<a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>)
    {
        <a class="code" href="class_s_c_t_p_association.html#ae94a9d41597adc5806db8c60f27ab45d">process_TIMEOUT_INIT_REXMIT</a>(event);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg==<a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>)
    {
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;simulation.getSimTime()&lt;&lt;<span class="stringliteral">&quot; delayed Sack: cTsnAck=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>&lt;&lt;<span class="stringliteral">&quot; highestTsnReceived=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a>&lt;&lt;<span class="stringliteral">&quot; lastTsnReceived=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5cc697d3b68b64aca76152385d5cb6f0">lastTsnReceived</a>&lt;&lt;<span class="stringliteral">&quot; ackState=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acd712e40d2abba82caa4acb46a16fc8b">ackState</a>&lt;&lt;<span class="stringliteral">&quot; numGaps=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
        <a class="code" href="class_s_c_t_p_association.html#a8ceae356355ca537907cabf469c813af">sendSack</a>();
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg==<a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>)
    {
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>);
        <a class="code" href="class_s_c_t_p_association.html#a6866e326d923a8915cdbb3d80802c527">process_TIMEOUT_SHUTDOWN</a>(event);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg==<a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>)
    {
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>);
        <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab71f05d4300e0fd95bd5e371c3615979">shutdownChunk</a>;
        <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3afc5424e52a8919715c5f0433afcdd3b5">SCTP_I_CONN_LOST</a>);
        <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
        <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">removeAssociation</a>(<span class="keyword">this</span>);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (path!=NULL &amp;&amp; msg==path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a>)
    {
        <a class="code" href="class_s_c_t_p_association.html#ac2468daebc456147e6568b99650165ca">process_TIMEOUT_HEARTBEAT_INTERVAL</a>(path, path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aef4eb456f3a0da1e92d670e13cae325a">forceHb</a>);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (path!=NULL &amp;&amp; msg==path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>)
    {
        <a class="code" href="class_s_c_t_p_association.html#acb89ca4bcc84239541171327977762e9">process_TIMEOUT_HEARTBEAT</a>(path);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (path!=NULL &amp;&amp; msg==path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>)
    {
        <a class="code" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX</a>(path);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (path!=NULL &amp;&amp; msg==path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7696cc66ad659fbd0259cdc91808117a">CwndTimer</a>)
    {
        (this-&gt;*<a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#adb4779550ec7802f1087a2bcc82fc13a">ccUpdateAfterCwndTimeout</a>)(path);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(msg-&gt;getName(), <span class="stringliteral">&quot;StartTesting&quot;</span>)==0)
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a0c82ce1676bd810f2defcce17bd1bd0a">testing</a> == <span class="keyword">false</span>)
        {
            <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a0c82ce1676bd810f2defcce17bd1bd0a">testing</a> = <span class="keyword">true</span>;
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;set testing to true\n&quot;</span>;
        }
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>-&gt;<a class="code" href="class_s_c_t_p_algorithm.html#a1829a98985752d015733b71fd058c10d">processTimer</a>(msg, event);
    }
     <span class="comment">// then state transitions</span>
     <span class="keywordflow">return</span> <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(event);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a34812ad20b498c0275019ef3e97cec71"></a><!-- doxytag: member="SCTPAssociation::pushUlp" ref="a34812ad20b498c0275019ef3e97cec71" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::pushUlp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ae086afec043034fc936b270b71c1e6f4">process_RECEIVE_REQUEST()</a>.</p>
<div class="fragment"><pre class="fragment">{
    int32                    count = 0;

    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a>; i++) { <span class="comment">//12.06.08</span>
        <a class="code" href="class_s_c_t_p_association.html#a64c5bcff1fa7a6f01d7e969d21b70dd5">putInDeliveryQ</a>(i);
    }
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acc81bc8fb8290aa91b916ebb83be9114">pushMessagesLeft</a> &lt;= 0) {
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acc81bc8fb8290aa91b916ebb83be9114">pushMessagesLeft</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac841a6063c1f2d092f82c64cd67534b6">messagesToPush</a>;
    }
    <span class="keywordtype">bool</span> restrict = <span class="keyword">false</span>;
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acc81bc8fb8290aa91b916ebb83be9114">pushMessagesLeft</a> &gt; 0) {
        restrict = <span class="keyword">true</span>;
    }


    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot; Calling pushUlp(&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>
              &lt;&lt; <span class="stringliteral">&quot; bytes queued) ...&quot;</span> &lt;&lt; endl;
    uint32 i = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a75ecf4e5a99369bb4bcae9a184afb22d">nextRSid</a>;
    <span class="keywordflow">do</span> {
        SCTPReceiveStreamMap::iterator iter = <a class="code" href="class_s_c_t_p_association.html#a80374427a755802cd7687c7a77b26e9c">receiveStreams</a>.find(i);
        <a class="code" href="class_s_c_t_p_receive_stream.html">SCTPReceiveStream</a>* rStream = iter-&gt;second;
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Size of stream &quot;</span> &lt;&lt; iter-&gt;first &lt;&lt; <span class="stringliteral">&quot;: &quot;</span>
                  &lt;&lt; rStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#a95ba93a1c4712fe6acad491b2337848a">getDeliveryQ</a>()-&gt;<a class="code" href="class_s_c_t_p_queue.html#af665b72b717ec39ba1a01364769e2db0">getQueueSize</a>() &lt;&lt; endl;

        <span class="keywordflow">while</span> ( (!rStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#a95ba93a1c4712fe6acad491b2337848a">getDeliveryQ</a>()-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.empty()) &amp;&amp;
                  (!restrict || (restrict &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acc81bc8fb8290aa91b916ebb83be9114">pushMessagesLeft</a>&gt;0)) ) {
            <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* <a class="code" href="structchunk.html">chunk</a> = rStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#a95ba93a1c4712fe6acad491b2337848a">getDeliveryQ</a>()-&gt;<a class="code" href="class_s_c_t_p_queue.html#a96e2d6e957e7a573e808ad02df2abdf2">extractMessage</a>();
            <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aa860967a47451b6ea090f0c3b81156de">roomSumRcvStreams</a> -= <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8 + <a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);

            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acc81bc8fb8290aa91b916ebb83be9114">pushMessagesLeft</a> &gt;0)
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acc81bc8fb8290aa91b916ebb83be9114">pushMessagesLeft</a>--;

            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>-=chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8;
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20b24275e45b18df329a7254563e306d">swsAvoidanceInvoked</a>) {
                <span class="keywordflow">if</span> ((int32)(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a> - <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>) &gt;= (int32)(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aba85e5f43e22032f2f883effbd7a8f92">swsLimit</a>) &amp;&amp;
                     (int32)(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a> - <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>) &lt;= (int32)(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aba85e5f43e22032f2f883effbd7a8f92">swsLimit</a>+<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20d0d3d8a1e728ac8742eba28856799f">assocPmtu</a>)) {
                    <span class="comment">/* only if the window has opened up more than one MTU we will send a SACK */</span>
                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a20b24275e45b18df329a7254563e306d">swsAvoidanceInvoked</a> = <span class="keyword">false</span>;
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;pushUlp: Window opens up to &quot;</span>&lt;&lt;(int32)<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a>-<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>&lt;&lt;<span class="stringliteral">&quot; bytes: sending a SACK. SWS Avoidance INACTIVE\n&quot;</span>;

                    <a class="code" href="class_s_c_t_p_association.html#a8ceae356355ca537907cabf469c813af">sendSack</a>();
                }
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((int32)(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aba85e5f43e22032f2f883effbd7a8f92">swsLimit</a>) == 0) {
                <a class="code" href="class_s_c_t_p_association.html#a8ceae356355ca537907cabf469c813af">sendSack</a>();
            }
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Push TSN &quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>
                      &lt;&lt; <span class="stringliteral">&quot;: sid=&quot;</span>     &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aa3c89c48c0c3ab5cc9b73d7ff525f67e">sid</a> &lt;&lt; <span class="stringliteral">&quot; ssn=&quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a518f7b638f4184fc01c4bdd20d641601">ssn</a> &lt;&lt; endl;
            cPacket* msg= (cPacket *)chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aaafb0500520fdd9936987be73f6a27ae">userData</a>;
            msg-&gt;setKind(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a1eb9f18f68a700c545427ba5231a9dc4">SCTP_I_DATA</a>);
            SCTPRcvCommand *cmd = <span class="keyword">new</span> SCTPRcvCommand(<span class="stringliteral">&quot;push&quot;</span>);
            cmd-&gt;setAssocId(<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
            cmd-&gt;setGate(<a class="code" href="class_s_c_t_p_association.html#aba709e2f773752366d1c291c4fb360c8">appGateIndex</a>);
            cmd-&gt;setSid(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aa3c89c48c0c3ab5cc9b73d7ff525f67e">sid</a>);
            cmd-&gt;setSsn(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a518f7b638f4184fc01c4bdd20d641601">ssn</a>);
            cmd-&gt;setSendUnordered(!chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a8a53863ea46d99a486027459aed60c49">ordered</a>);
            cmd-&gt;setLocalAddr(<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>);
            cmd-&gt;setRemoteAddr(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
            cmd-&gt;setPpid(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a960213e567faeed87d9ce98e993177a4">ppid</a>);
            cmd-&gt;setTsn(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>);
            cmd-&gt;setCumTsn(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c4c403bd391f0be75e1b71254828274">lastTsnAck</a>);
            msg-&gt;setControlInfo(cmd);
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aaf9ea2f913888ba783ae161088669ea6">numMsgsReq</a>[count]--;
            <span class="keyword">delete</span> chunk;
            <a class="code" href="class_s_c_t_p_association.html#a35a8d95a64b2977c79bf24b1353c0c8e">sendToApp</a>(msg);
        }
        i = (i + 1) % inboundStreams;
        count++;
    } <span class="keywordflow">while</span> (i != <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a75ecf4e5a99369bb4bcae9a184afb22d">nextRSid</a>);

    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a75ecf4e5a99369bb4bcae9a184afb22d">nextRSid</a> = (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a75ecf4e5a99369bb4bcae9a184afb22d">nextRSid</a> + 1) % inboundStreams;
    <span class="keywordflow">if</span> ( (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a> == 0) &amp;&amp; (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState() == <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8afed5af0cf4b3fce20325548b0b75961f">SCTP_S_SHUTDOWN_ACK_SENT</a>)) {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTP_E_CLOSE&quot;</span> &lt;&lt; endl;
        <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7ddaf772922ac461dd670204bcd480536cec">SCTP_E_CLOSE</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a64c5bcff1fa7a6f01d7e969d21b70dd5"></a><!-- doxytag: member="SCTPAssociation::putInDeliveryQ" ref="a64c5bcff1fa7a6f01d7e969d21b70dd5" args="(uint16 sid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::putInDeliveryQ </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>sid</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>, and <a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp()</a>.</p>
<div class="fragment"><pre class="fragment">{
    SCTPReceiveStreamMap::iterator iter=<a class="code" href="class_s_c_t_p_association.html#a80374427a755802cd7687c7a77b26e9c">receiveStreams</a>.find(sid);
    <a class="code" href="class_s_c_t_p_receive_stream.html">SCTPReceiveStream</a>* rStream = iter-&gt;second;
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;putInDeliveryQ: SSN=&quot;</span> &lt;&lt; rStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#aefb6dae19d1033707ae380fc091dcef9">getExpectedStreamSeqNum</a>()
              &lt;&lt; <span class="stringliteral">&quot; SID=&quot;</span> &lt;&lt; sid
              &lt;&lt; <span class="stringliteral">&quot; QueueSize=&quot;</span>&lt;&lt; rStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#a0267d48f180687fc25bff88baf20319b">getOrderedQ</a>()-&gt;<a class="code" href="class_s_c_t_p_queue.html#af665b72b717ec39ba1a01364769e2db0">getQueueSize</a>() &lt;&lt; endl;
    <span class="keywordflow">while</span> (rStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#a0267d48f180687fc25bff88baf20319b">getOrderedQ</a>()-&gt;<a class="code" href="class_s_c_t_p_queue.html#af665b72b717ec39ba1a01364769e2db0">getQueueSize</a>()&gt;0)
    {
        <span class="comment">/* dequeue first from reassembly Q */</span>
        <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* <a class="code" href="structchunk.html">chunk</a> =
            rStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#a0267d48f180687fc25bff88baf20319b">getOrderedQ</a>()-&gt; dequeueChunkBySSN(rStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#aefb6dae19d1033707ae380fc091dcef9">getExpectedStreamSeqNum</a>());
        <span class="keywordflow">if</span> (chunk) {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;putInDeliveryQ::chunk &quot;</span> &lt;&lt;chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>
                      &lt;&lt;<span class="stringliteral">&quot;, sid &quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aa3c89c48c0c3ab5cc9b73d7ff525f67e">sid</a> &lt;&lt;<span class="stringliteral">&quot; and ssn &quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a518f7b638f4184fc01c4bdd20d641601">ssn</a>
                      &lt;&lt;<span class="stringliteral">&quot; dequeued from ordered queue. queuedReceivedBytes=&quot;</span>
                      &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a> &lt;&lt; <span class="stringliteral">&quot; will be reduced by &quot;</span>
                      &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8 &lt;&lt; endl;
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>-=chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8;


            <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aa860967a47451b6ea090f0c3b81156de">roomSumRcvStreams</a> -= <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8 + <a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
            <span class="keywordflow">if</span> (rStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#a95ba93a1c4712fe6acad491b2337848a">getDeliveryQ</a>()-&gt;<a class="code" href="class_s_c_t_p_queue.html#a198854d52d738bb77bb031ffe863b5be">checkAndInsertChunk</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>, chunk)) {
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a> += chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8;

                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;data put in deliveryQ; queuedBytes now &quot;</span>
                          &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a> &lt;&lt; endl;
                <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aa860967a47451b6ea090f0c3b81156de">roomSumRcvStreams</a> += <a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8 + <a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
                int32 seqnum=rStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#aefb6dae19d1033707ae380fc091dcef9">getExpectedStreamSeqNum</a>();
                rStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#acae396b1692c1045602a37446b129fbb">setExpectedStreamSeqNum</a>(++seqnum);
                <span class="keywordflow">if</span> (rStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#aefb6dae19d1033707ae380fc091dcef9">getExpectedStreamSeqNum</a>() &gt; 65535) {
                    rStream-&gt;<a class="code" href="class_s_c_t_p_receive_stream.html#acae396b1692c1045602a37446b129fbb">setExpectedStreamSeqNum</a>(0);
                }
                <a class="code" href="class_s_c_t_p_association.html#a155c31414d0e2115eccd2fbb0a966dab">sendDataArrivedNotification</a>(sid);
            }
        }
        <span class="keywordflow">else</span> {
            <span class="keywordflow">break</span>;
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a92d70f8d0215630944fc1101378589ce"></a><!-- doxytag: member="SCTPAssociation::putInTransmissionQ" ref="a92d70f8d0215630944fc1101378589ce" args="(uint32 tsn, SCTPDataVariables *chunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::putInTransmissionQ </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>tsn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a753567499c04f5e4b55cb92790e4c96a"></a><!-- doxytag: member="SCTPAssociation::recordCwndUpdate" ref="a753567499c04f5e4b55cb92790e4c96a" args="(SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::recordCwndUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a9a5de305f7873c84ef644dce513964cd">cwndUpdateAfterCwndTimeout()</a>, <a class="el" href="class_s_c_t_p_association.html#a53665e3333a5e7b2aae79a65b9a1482b">cwndUpdateAfterRtxTimeout()</a>, <a class="el" href="class_s_c_t_p_association.html#ade798497e9cb468bf8f4759e9b8e9840">cwndUpdateAfterSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a356510e0d2cfb8c6770c72f29634cb93">cwndUpdateBytesAcked()</a>, <a class="el" href="class_s_c_t_p_association.html#af5c86c86388313edeeff8434266a85cd">cwndUpdateMaxBurst()</a>, <a class="el" href="class_s_c_t_p_association.html#a27ab7a3f0d7e82a5b48f47e39e53dd23">initCCParameters()</a>, <a class="el" href="class_s_c_t_p_association.html#a1f4d814724e79e184655050a48ee1c25">processHeartbeatAckArrived()</a>, and <a class="el" href="class_s_c_t_p_association.html#a2f3fe366971313c0f290ded66a233059">removePath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a08fb6a06a9cea4372205f71def18b92d">statisticsPathSSthresh</a>-&gt;record(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a>);
    path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa8f1c2ca64547edefc8d8cd319b777da">statisticsPathCwnd</a>-&gt;record(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9db796beec52580f1356bd95e6f5fa2c"></a><!-- doxytag: member="SCTPAssociation::recordInPathVectors" ref="a9db796beec52580f1356bd95e6f5fa2c" args="(SCTPMessage *pMsg, const IPvXAddress &amp;rDest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::recordInPathVectors </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *&#160;</td>
          <td class="paramname"><em>pMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>rDest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP()</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32 n_chunks = pMsg-&gt;<a class="code" href="class_s_c_t_p_message.html#a6f20de2280586794996c56c77bf5c479">getChunksArraySize</a>();
    <span class="keywordflow">if</span> (n_chunks == 0)
       <span class="keywordflow">return</span>;

    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* p_path = <a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(rDest);

    <span class="keywordflow">for</span> (uint32 i = 0 ; i &lt; n_chunks ; i++) {
        <span class="keyword">const</span> SCTPChunk* p_chunk = check_and_cast&lt;<span class="keyword">const</span> SCTPChunk *&gt;(pMsg-&gt;<a class="code" href="class_s_c_t_p_message.html#a3fee5bba66df88a7771c3b5984f33008">getChunks</a>(i));
        <span class="keywordflow">if</span> (p_chunk-&gt;getChunkType() == <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea9d7d6f31868d66330397c967c4afd2d2">DATA</a>) {
            <span class="keyword">const</span> SCTPDataChunk* p_data_chunk = check_and_cast&lt;<span class="keyword">const</span> SCTPDataChunk *&gt;(p_chunk);
            p_path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8ae926fbdb0df69e50c5b75b4ddb1719">pathTSN</a>-&gt;record(p_data_chunk-&gt;getTsn());
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p_chunk-&gt;getChunkType() == <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a0f286b0bbc1ee4f20be5136a55cf8923">HEARTBEAT</a>) {
            p_path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#afa7428f4dadb2631a67af315b9de178b">numberOfHeartbeatsSent</a>++;
            p_path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa0614ed24ba89fcb6c924fbb836b87ef">pathHb</a>-&gt;record(p_path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#afa7428f4dadb2631a67af315b9de178b">numberOfHeartbeatsSent</a>);
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p_chunk-&gt;getChunkType() == <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a5621dd83f6f32ee90c0d505867c67b71">HEARTBEAT_ACK</a>) {
            p_path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae53a26f064bdf041b920c64a167ffd50">numberOfHeartbeatAcksSent</a>++;
            p_path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa1338607c5fc7d30a4b04800478b66a3">pathHbAck</a>-&gt;record(p_path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ae53a26f064bdf041b920c64a167ffd50">numberOfHeartbeatAcksSent</a>);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6d86b97308eef3f43f93ca939a3d1a52"></a><!-- doxytag: member="SCTPAssociation::removeFromGapList" ref="a6d86b97308eef3f43f93ca939a3d1a52" args="(const uint32 removedTsn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::removeFromGapList </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>removedTsn</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a45de5f3a74bba48af92b248edd9c9312">makeRoomForTsn()</a>.</p>
<div class="fragment"><pre class="fragment">{
    int32 gapsize, numgaps;

    numgaps = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>;
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;remove TSN &quot;</span>&lt;&lt;removedTsn&lt;&lt;<span class="stringliteral">&quot; from GapList. &quot;</span>&lt;&lt;numgaps&lt;&lt;<span class="stringliteral">&quot; gaps present, cumTsnAck=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    <span class="keywordflow">for</span> (int32 j=0; j&lt;numgaps; j++)
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[j]&lt;&lt;<span class="stringliteral">&quot; - &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[j]&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    for (int32 i=numgaps-1; i&gt;=0; i--)
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;gapStartList[&quot;</span>&lt;&lt;i&lt;&lt;<span class="stringliteral">&quot;]=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i]&lt;&lt;<span class="stringliteral">&quot;, state-&gt;gapStopList[&quot;</span>&lt;&lt;i&lt;&lt;<span class="stringliteral">&quot;]=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i]&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a5d5d64e51be4d13ccb13286b5a6ab7a4">tsnBetween</a>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i], removedTsn, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i]))
        {
            gapsize = (int32)(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i] - <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i]+1);
            <span class="keywordflow">if</span> (gapsize&gt;1)
            {
                <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i]==removedTsn)
                {
                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i]--;
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i]==removedTsn)
                {
                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i]++;
                }
                <span class="keywordflow">else</span> <span class="comment">//gap is split in two</span>
                {
                    <span class="keywordflow">for</span> (int32 j=numgaps-1; j&gt;=i; j--)
                    {
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[j+1] = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[j];
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[j+1] = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[j];
                    }
                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i] = removedTsn-1;
                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i+1] = removedTsn+1;
                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a> = <a class="code" href="_s_c_t_p_association_8h.html#ad61931b1ae6b8e5bb714e2e6744f4470">min</a>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a> + 1, <a class="code" href="_s_c_t_p_association_8h.html#a6334da21c08d8d9b4c63879c8cce9633">MAX_GAP_COUNT</a>);      <span class="comment">// T.D. 18.12.09: Enforce upper limit!</span>
                }
            }
            <span class="keywordflow">else</span>
            {
                <span class="keywordflow">for</span> (int32 j=i; j&lt;=numgaps-1; j++)
                {
                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[j] = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[j+1];
                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[j] = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[j+1];
                }
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[numgaps-1]=0;
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[numgaps-1]=0;
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>--;
                <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a> == 0)
                {
                    <span class="keywordflow">if</span> (removedTsn == <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c4c403bd391f0be75e1b71254828274">lastTsnAck</a>+1)
                    {
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c4c403bd391f0be75e1b71254828274">lastTsnAck</a> = removedTsn;
                    }
                }
            }
        }
    }
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>&gt;0)
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>-1];
    <span class="keywordflow">else</span>
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a0a5cdd7069f2909804ecf1ebe227b338">highestTsnReceived</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a48840034dca5052abf481f6a5753f923"></a><!-- doxytag: member="SCTPAssociation::removePath" ref="a48840034dca5052abf481f6a5753f923" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::removePath </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">SCTP::removeAssociation()</a>.</p>
<div class="fragment"><pre class="fragment">{
    SCTPPathMap::iterator pathIterator;
    <span class="keywordflow">while</span>((pathIterator = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin()) != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end())
    {
        <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = pathIterator-&gt;second;
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; getFullPath() &lt;&lt; <span class="stringliteral">&quot; remove path &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; endl;
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>);
        <span class="keyword">delete</span> path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>;
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a>);
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;delete timer &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a>-&gt;getName() &lt;&lt; endl;
        <span class="keyword">delete</span> path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a>;
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>);
        <span class="keyword">delete</span> path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>;
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7696cc66ad659fbd0259cdc91808117a">CwndTimer</a>);
        <span class="keyword">delete</span> path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7696cc66ad659fbd0259cdc91808117a">CwndTimer</a>;
        <span class="keyword">delete</span> path;
        <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.erase(pathIterator);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2f3fe366971313c0f290ded66a233059"></a><!-- doxytag: member="SCTPAssociation::removePath" ref="a2f3fe366971313c0f290ded66a233059" args="(const IPvXAddress &amp;addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::removePath </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    SCTPPathMap::iterator pathIterator = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.find(addr);
    <span class="keywordflow">if</span> (pathIterator != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end())
    {
        <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = pathIterator-&gt;second;
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39293535329703b9c354939233d1b3db">cwnd</a>      = 0;
        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a8c6de61426b8f5a2ecb3aa529fac1326">ssthresh</a> = 0;
        <a class="code" href="class_s_c_t_p_association.html#a753567499c04f5e4b55cb92790e4c96a">recordCwndUpdate</a>(path);

        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>);
        <span class="keyword">delete</span> path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7fd8160605d99abd3e8dcca004c4956b">HeartbeatTimer</a>;
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a>);
        <span class="keyword">delete</span> path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a2172a6ce9db9b2108ebe84d98ca52d36">HeartbeatIntervalTimer</a>;
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>);
        <span class="keyword">delete</span> path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>;
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7696cc66ad659fbd0259cdc91808117a">CwndTimer</a>);
        <span class="keyword">delete</span> path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a7696cc66ad659fbd0259cdc91808117a">CwndTimer</a>;
        <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.erase(pathIterator);
        <span class="keyword">delete</span> path;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae9ffc855fcb6cfd50fb34a03beaa2d39"></a><!-- doxytag: member="SCTPAssociation::retransmitCookieEcho" ref="ae9ffc855fcb6cfd50fb34a03beaa2d39" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::retransmitCookieEcho </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, and <a class="el" href="class_s_c_t_p_association.html#ae94a9d41597adc5806db8c60f27ab45d">process_TIMEOUT_INIT_REXMIT()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>*                 sctpmsg = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    sctpmsg-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);
    SCTPCookieEchoChunk* cookieEchoChunk=check_and_cast&lt;SCTPCookieEchoChunk*&gt;(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a977478bfadd7d0296a7a805ec9e56a95">cookieChunk</a>-&gt;dup());
    <span class="keywordflow">if</span> (cookieEchoChunk-&gt;getCookieArraySize()==0)
    {
        cookieEchoChunk-&gt;setStateCookie(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a977478bfadd7d0296a7a805ec9e56a95">cookieChunk</a>-&gt;getStateCookie()-&gt;dup());
    }
    sctpmsg-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(cookieEchoChunk);

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;retransmitCookieEcho localAddr=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>&lt;&lt;<span class="stringliteral">&quot;     remoteAddr&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpmsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aec407e9c2c1b4d0c604d8d65e78706e8"></a><!-- doxytag: member="SCTPAssociation::retransmitInit" ref="aec407e9c2c1b4d0c604d8d65e78706e8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::retransmitInit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retransmitting chunks </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, and <a class="el" href="class_s_c_t_p_association.html#ae94a9d41597adc5806db8c60f27ab45d">process_TIMEOUT_INIT_REXMIT()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpmsg = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    sctpmsg-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);
    SCTPInitChunk *sctpinit;<span class="comment">// = new SCTPInitChunk(&quot;INIT&quot;);</span>

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;Retransmit InitChunk=&quot;</span>&lt;&lt;&amp;sctpinit&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    sctpinit=check_and_cast&lt;SCTPInitChunk *&gt;(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#af687fe1d41e0f02e4f393ce45a83dd19">initChunk</a>-&gt;dup());
    sctpinit-&gt;setChunkType(<a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a0cb1b2c6a7db1f1084886c98909a3f36">INIT</a>);
    sctpmsg-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(sctpinit);

    <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpmsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa28d6c19ab622ed5564596c7f300aea4"></a><!-- doxytag: member="SCTPAssociation::retransmitShutdown" ref="aa28d6c19ab622ed5564596c7f300aea4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::retransmitShutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a6866e326d923a8915cdbb3d80802c527">process_TIMEOUT_SHUTDOWN()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpmsg = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    sctpmsg-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);
    SCTPShutdownChunk* shutdownChunk;
    shutdownChunk=check_and_cast&lt;SCTPShutdownChunk*&gt;(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab71f05d4300e0fd95bd5e371c3615979">shutdownChunk</a>-&gt;dup());
    sctpmsg-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(shutdownChunk);

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;retransmitShutdown localAddr=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>&lt;&lt;<span class="stringliteral">&quot;  remoteAddr&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpmsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0c70dd4b41af917ecbaebd2850a808e0"></a><!-- doxytag: member="SCTPAssociation::retransmitShutdownAck" ref="a0c70dd4b41af917ecbaebd2850a808e0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::retransmitShutdownAck </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a6866e326d923a8915cdbb3d80802c527">process_TIMEOUT_SHUTDOWN()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpmsg = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    sctpmsg-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);
    SCTPShutdownAckChunk* shutdownAckChunk;
    shutdownAckChunk=check_and_cast&lt;SCTPShutdownAckChunk*&gt;(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c69e50746d1c61b284521df08bfeeff">shutdownAckChunk</a>-&gt;dup());
    sctpmsg-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(shutdownAckChunk);

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;retransmitShutdownAck localAddr=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>&lt;&lt;<span class="stringliteral">&quot;  remoteAddr&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpmsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad26d83ea266011e34ebfbc56f7ee1e75"></a><!-- doxytag: member="SCTPAssociation::scheduleSack" ref="ad26d83ea266011e34ebfbc56f7ee1e75" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::scheduleSack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">/* increase SACK counter, we received another data PACKET */</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab44c46d79f8a2504941b5903322b0448">firstChunkReceived</a>)
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acd712e40d2abba82caa4acb46a16fc8b">ackState</a>++;
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acd712e40d2abba82caa4acb46a16fc8b">ackState</a> = <a class="code" href="class_s_c_t_p_association.html#ac5b54b2f8fbba401964d30c71e25118f">sackFrequency</a>;
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab44c46d79f8a2504941b5903322b0448">firstChunkReceived</a> = <span class="keyword">true</span>;
    }

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;scheduleSack() : ackState is now: &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acd712e40d2abba82caa4acb46a16fc8b">ackState</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acd712e40d2abba82caa4acb46a16fc8b">ackState</a> &lt;= <a class="code" href="class_s_c_t_p_association.html#ac5b54b2f8fbba401964d30c71e25118f">sackFrequency</a> - 1)
    {
        <span class="comment">/* start a SACK timer if none is running, to expire 200 ms (or parameter) from now */</span>
        <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>-&gt;isScheduled())
        {
             <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(<a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>, <a class="code" href="class_s_c_t_p_association.html#a29f900c7ca380c1671bb957109fc338b">sackPeriod</a>);
        }
        <span class="comment">/* else: leave timer running, and do nothing... */</span> <span class="keywordflow">else</span> {
            <span class="comment">/* is this possible at all ? Check this... */</span>

            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;SACK timer running, but scheduleSack() called\n&quot;</span>;

        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9093fdb20d9c289d699376be9b3b80ba"></a><!-- doxytag: member="SCTPAssociation::scheduleTimeout" ref="a9093fdb20d9c289d699376be9b3b80ba" args="(cMessage *msg, const simtime_t &amp;timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::scheduleTimeout </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const simtime_t &amp;&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: start a timer </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, and <a class="el" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                             {
            <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;scheduleAt(simulation.getSimTime() + timeout, msg);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a0c2b31f00e428a2c8c5fe8aa5f3430fe"></a><!-- doxytag: member="SCTPAssociation::sendAbort" ref="a0c2b31f00e428a2c8c5fe8aa5f3430fe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendAbort </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a0604d2735afd938650aa540e1ed7b9d1">process_ABORT()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#acb89ca4bcc84239541171327977762e9">process_TIMEOUT_HEARTBEAT()</a>, <a class="el" href="class_s_c_t_p_association.html#ae94a9d41597adc5806db8c60f27ab45d">process_TIMEOUT_INIT_REXMIT()</a>, <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>, <a class="el" href="class_s_c_t_p_association.html#a6866e326d923a8915cdbb3d80802c527">process_TIMEOUT_SHUTDOWN()</a>, <a class="el" href="class_s_c_t_p_association.html#a0dc1cc0159627680652582a01a4417f2">processCookieEchoArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, and <a class="el" href="class_s_c_t_p_association.html#a3cb6d23f3c34f789d2b1c5945d0d0a76">updateCounters()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a> *msg = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    msg-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;SCTPAssociationUtil:sendABORT localPort=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>&lt;&lt;<span class="stringliteral">&quot;    remotePort=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    msg-&gt;setSrcPort(<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>);
    msg-&gt;setDestPort(remotePort);
    SCTPAbortChunk* abortChunk = <span class="keyword">new</span> SCTPAbortChunk(<span class="stringliteral">&quot;ABORT&quot;</span>);
    abortChunk-&gt;setChunkType(<a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a781ad2788df9e25c59a70894c7832096">ABORT</a>);
    abortChunk-&gt;setT_Bit(0);
    abortChunk-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a2383950ff71160db077c713351a3baff">SCTP_ABORT_CHUNK_LENGTH</a>*8);
    msg-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(abortChunk);
    <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(msg, <a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad277c3986a8173ffe41289f72765ceba"></a><!-- doxytag: member="SCTPAssociation::sendCookieAck" ref="ad277c3986a8173ffe41289f72765ceba" args="(const IPvXAddress &amp;dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendCookieAck </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a0dc1cc0159627680652582a01a4417f2">processCookieEchoArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpcookieack = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    sctpcookieack-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;SCTPAssociationUtil:sendCookieACK\n&quot;</span>;

    sctpcookieack-&gt;setSrcPort(<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>);
    sctpcookieack-&gt;setDestPort(<a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>);
    SCTPCookieAckChunk* cookieAckChunk=<span class="keyword">new</span> SCTPCookieAckChunk(<span class="stringliteral">&quot;COOKIE_ACK&quot;</span>);
    cookieAckChunk-&gt;setChunkType(<a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a8cb5544ff09ee0b2ae1f1171de9597bd">COOKIE_ACK</a>);
    cookieAckChunk-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#aee9e5129c64e3a5dfbda76dd06c62a23">SCTP_COOKIE_ACK_LENGTH</a>*8);
    sctpcookieack-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(cookieAckChunk);
    <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpcookieack, dest);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3ef5a4494cd7b59c44f44d6ed385e9de"></a><!-- doxytag: member="SCTPAssociation::sendCookieEcho" ref="a3ef5a4494cd7b59c44f44d6ed385e9de" args="(SCTPInitAckChunk *initackchunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendCookieEcho </td>
          <td>(</td>
          <td class="paramtype">SCTPInitAckChunk *&#160;</td>
          <td class="paramname"><em>initackchunk</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpcookieecho = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    sctpcookieecho-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;SCTPAssociationUtil:sendCookieEcho\n&quot;</span>;

    sctpcookieecho-&gt;setSrcPort(<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>);
    sctpcookieecho-&gt;setDestPort(<a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>);
    SCTPCookieEchoChunk* cookieEchoChunk=<span class="keyword">new</span> SCTPCookieEchoChunk(<span class="stringliteral">&quot;COOKIE_ECHO&quot;</span>);
    cookieEchoChunk-&gt;setChunkType(<a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12ac6c3901afa866152be0e645c2c38f471">COOKIE_ECHO</a>);
    int32 len = initAckChunk-&gt;getCookieArraySize();
    cookieEchoChunk-&gt;setCookieArraySize(len);
    <span class="keywordflow">if</span> (len&gt;0)
    {
        <span class="keywordflow">for</span> (int32 i=0; i&lt;len; i++)
            cookieEchoChunk-&gt;setCookie(i, initAckChunk-&gt;getCookie(i));
        cookieEchoChunk-&gt;setBitLength((<a class="code" href="_s_c_t_p_association_8h.html#aee9e5129c64e3a5dfbda76dd06c62a23">SCTP_COOKIE_ACK_LENGTH</a>+len)*8);
    }
    <span class="keywordflow">else</span>
    {
        SCTPCookie* cookie = check_and_cast &lt;SCTPCookie*&gt; (initAckChunk-&gt;getStateCookie());
        cookieEchoChunk-&gt;setStateCookie(cookie);
        cookieEchoChunk-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#aee9e5129c64e3a5dfbda76dd06c62a23">SCTP_COOKIE_ACK_LENGTH</a>*8 + cookie-&gt;getBitLength());
    }
    uint32 unknownLen = initAckChunk-&gt;getUnrecognizedParametersArraySize();
    <span class="keywordflow">if</span> (unknownLen&gt;0)
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;Found unrecognized Parameters in INIT-ACK chunk with a length of &quot;</span>&lt;&lt;unknownLen&lt;&lt;<span class="stringliteral">&quot; bytes.\n&quot;</span>;
        cookieEchoChunk-&gt;setUnrecognizedParametersArraySize(unknownLen);
        <span class="keywordflow">for</span> (uint32 i=0; i&lt;unknownLen; i++)
            cookieEchoChunk-&gt;setUnrecognizedParameters(i,initAckChunk-&gt;getUnrecognizedParameters(i));
    }
    <span class="keywordflow">else</span>
        cookieEchoChunk-&gt;setUnrecognizedParametersArraySize(0);
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a977478bfadd7d0296a7a805ec9e56a95">cookieChunk</a>=check_and_cast&lt;SCTPCookieEchoChunk*&gt;(cookieEchoChunk-&gt;dup());
    <span class="keywordflow">if</span> (len==0)
    {
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a977478bfadd7d0296a7a805ec9e56a95">cookieChunk</a>-&gt;setStateCookie(initAckChunk-&gt;getStateCookie()-&gt;dup());
            }
    sctpcookieecho-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(cookieEchoChunk);
        <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpcookieecho);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a155c31414d0e2115eccd2fbb0a966dab"></a><!-- doxytag: member="SCTPAssociation::sendDataArrivedNotification" ref="a155c31414d0e2115eccd2fbb0a966dab" args="(uint16 sid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendDataArrivedNotification </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>sid</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>, and <a class="el" href="class_s_c_t_p_association.html#a64c5bcff1fa7a6f01d7e969d21b70dd5">putInDeliveryQ()</a>.</p>
<div class="fragment"><pre class="fragment">{

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;SendDataArrivedNotification\n&quot;</span>;

    cPacket* cmsg = <span class="keyword">new</span> cPacket(<span class="stringliteral">&quot;DataArrivedNotification&quot;</span>);
    cmsg-&gt;setKind(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a723241390fabc3b46cb79e9f5541b01b">SCTP_I_DATA_NOTIFICATION</a>);
    SCTPCommand *cmd = <span class="keyword">new</span> SCTPCommand(<span class="stringliteral">&quot;notification&quot;</span>);
    cmd-&gt;setAssocId(<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    cmd-&gt;setSid(sid);
    cmd-&gt;setNumMsgs(1);
    cmsg-&gt;setControlInfo(cmd);

    <a class="code" href="class_s_c_t_p_association.html#a35a8d95a64b2977c79bf24b1353c0c8e">sendToApp</a>(cmsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af039e9e17af5bd8f871e1bf6fa2ac871"></a><!-- doxytag: member="SCTPAssociation::sendEstabIndicationToApp" ref="af039e9e17af5bd8f871e1bf6fa2ac871" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendEstabIndicationToApp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: sends SCTP_I_ESTABLISHED indication with SCTPConnectInfo to application </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendEstabIndicationToApp: localPort=&quot;</span>
              &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a> &lt;&lt; <span class="stringliteral">&quot; remotePort=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a> &lt;&lt; endl;

    cPacket* msg = <span class="keyword">new</span> cPacket(<a class="code" href="class_s_c_t_p_association.html#a681a359c388e9b7f38250ceb3626515e">indicationName</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a6b85de91f4bd3609fc7bcd7994101a3d">SCTP_I_ESTABLISHED</a>));
    msg-&gt;setKind(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a6b85de91f4bd3609fc7bcd7994101a3d">SCTP_I_ESTABLISHED</a>);

    SCTPConnectInfo* establishIndication = <span class="keyword">new</span> SCTPConnectInfo(<span class="stringliteral">&quot;CI&quot;</span>);
    establishIndication-&gt;setAssocId(<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    establishIndication-&gt;setLocalAddr(<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>);
    establishIndication-&gt;setRemoteAddr(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
    establishIndication-&gt;setLocalPort(<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>);
    establishIndication-&gt;setRemotePort(<a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>);
    establishIndication-&gt;setRemoteAddresses(<a class="code" href="class_s_c_t_p_association.html#a746e4867059fcd11838ab601a6f5fea1">remoteAddressList</a>);
    establishIndication-&gt;setInboundStreams(<a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a>);
    establishIndication-&gt;setOutboundStreams(<a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a>);
    establishIndication-&gt;setNumMsgs(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4a45a11cb5d50f9d7cb1799fa105dedb">sendQueueLimit</a>);
    msg-&gt;setControlInfo(establishIndication);
    <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;send(msg, <span class="stringliteral">&quot;to_appl&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#aba709e2f773752366d1c291c4fb360c8">appGateIndex</a>);

}
</pre></div>
</div>
</div>
<a class="anchor" id="afc5f06d167b937c0d1267047960bc354"></a><!-- doxytag: member="SCTPAssociation::sendHeartbeat" ref="afc5f06d167b937c0d1267047960bc354" args="(const SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendHeartbeat </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ab385b4edb0ddac6e69aa350df14b480a">pmStartPathManagement()</a>, and <a class="el" href="class_s_c_t_p_association.html#ac2468daebc456147e6568b99650165ca">process_TIMEOUT_HEARTBEAT_INTERVAL()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>* sctpHeartbeatbeat = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    sctpHeartbeatbeat-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);

    sctpHeartbeatbeat-&gt;setSrcPort(<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>);
    sctpHeartbeatbeat-&gt;setDestPort(<a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>);
    SCTPHeartbeatChunk* heartbeatChunk = <span class="keyword">new</span> SCTPHeartbeatChunk(<span class="stringliteral">&quot;HEARTBEAT&quot;</span>);
    heartbeatChunk-&gt;setChunkType(<a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a0f286b0bbc1ee4f20be5136a55cf8923">HEARTBEAT</a>);
    heartbeatChunk-&gt;setRemoteAddr(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
    heartbeatChunk-&gt;setTimeField(simTime());
    heartbeatChunk-&gt;setBitLength((<a class="code" href="_s_c_t_p_association_8h.html#adf7452edbaf15112920d12e92d14dfd9">SCTP_HEARTBEAT_CHUNK_LENGTH</a>+12)*8);
    sctpHeartbeatbeat-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(heartbeatChunk);
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendHeartbeat: sendToIP to &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; endl;
    <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpHeartbeatbeat, path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4693aa8d9ce24d9bf798cb7feefd1085"></a><!-- doxytag: member="SCTPAssociation::sendHeartbeatAck" ref="a4693aa8d9ce24d9bf798cb7feefd1085" args="(const SCTPHeartbeatChunk *heartbeatChunk, const IPvXAddress &amp;src, const IPvXAddress &amp;dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendHeartbeatAck </td>
          <td>(</td>
          <td class="paramtype">const SCTPHeartbeatChunk *&#160;</td>
          <td class="paramname"><em>heartbeatChunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>*                 sctpHeartbeatAck = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    sctpHeartbeatAck-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);
    sctpHeartbeatAck-&gt;setSrcPort(<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>);
    sctpHeartbeatAck-&gt;setDestPort(<a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>);
    SCTPHeartbeatAckChunk* heartbeatAckChunk=<span class="keyword">new</span> SCTPHeartbeatAckChunk(<span class="stringliteral">&quot;HEARTBEAT_ACK&quot;</span>);
    heartbeatAckChunk-&gt;setChunkType(<a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a5621dd83f6f32ee90c0d505867c67b71">HEARTBEAT_ACK</a>);
    heartbeatAckChunk-&gt;setRemoteAddr(heartbeatChunk-&gt;getRemoteAddr());
    heartbeatAckChunk-&gt;setTimeField(heartbeatChunk-&gt;getTimeField());
    <span class="keyword">const</span> int32 len = heartbeatChunk-&gt;getInfoArraySize();
    <span class="keywordflow">if</span> (len &gt; 0){
        heartbeatAckChunk-&gt;setInfoArraySize(len);
        <span class="keywordflow">for</span> (int32 i=0; i&lt;len; i++)
            heartbeatAckChunk-&gt;setInfo(i,heartbeatChunk-&gt;getInfo(i));
    }

    heartbeatAckChunk-&gt;setBitLength(heartbeatChunk-&gt;getBitLength());
    sctpHeartbeatAck-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(heartbeatAckChunk);

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendHeartbeatAck: sendToIP from &quot;</span> &lt;&lt; src &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; dest &lt;&lt; endl;
    <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpHeartbeatAck, dest);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a010084d1e3717e6600b532f3b3804151"></a><!-- doxytag: member="SCTPAssociation::sendIndicationToApp" ref="a010084d1e3717e6600b532f3b3804151" args="(const int32 code, const int32 value=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendIndicationToApp </td>
          <td>(</td>
          <td class="paramtype">const int32&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32&#160;</td>
          <td class="paramname"><em>value</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: sends status indication (SCTP_I_xxx) to application </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND()</a>, <a class="el" href="class_s_c_t_p_association.html#acb89ca4bcc84239541171327977762e9">process_TIMEOUT_HEARTBEAT()</a>, <a class="el" href="class_s_c_t_p_association.html#ae94a9d41597adc5806db8c60f27ab45d">process_TIMEOUT_INIT_REXMIT()</a>, <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>, <a class="el" href="class_s_c_t_p_association.html#a6866e326d923a8915cdbb3d80802c527">process_TIMEOUT_SHUTDOWN()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>, <a class="el" href="class_s_c_t_p_association.html#aed61141642771b6e3c6cc759f2e1f513">signalConnectionTimeout()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, and <a class="el" href="class_s_c_t_p_association.html#a3cb6d23f3c34f789d2b1c5945d0d0a76">updateCounters()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;sendIndicationToApp: &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a681a359c388e9b7f38250ceb3626515e">indicationName</a>(code) &lt;&lt; endl;

    cPacket* msg = <span class="keyword">new</span> cPacket(<a class="code" href="class_s_c_t_p_association.html#a681a359c388e9b7f38250ceb3626515e">indicationName</a>(code));
    msg-&gt;setKind(code);

    SCTPCommand* indication = <span class="keyword">new</span> SCTPCommand(<a class="code" href="class_s_c_t_p_association.html#a681a359c388e9b7f38250ceb3626515e">indicationName</a>(code));
    indication-&gt;setAssocId(<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
    indication-&gt;setLocalAddr(<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>);
    indication-&gt;setRemoteAddr(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
    <span class="keywordflow">if</span> (code == <a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a4ed59ad366001ebd94844599c3ed76ec">SCTP_I_SENDQUEUE_ABATED</a>) {
        indication-&gt;setNumMsgs(value);
    }
    msg-&gt;setControlInfo(indication);
    <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;send(msg, <span class="stringliteral">&quot;to_appl&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#aba709e2f773752366d1c291c4fb360c8">appGateIndex</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afc1d3dc0cb62842b7d83998facfbfd06"></a><!-- doxytag: member="SCTPAssociation::sendInit" ref="afc1d3dc0cb62842b7d83998facfbfd06" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendInit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Methods for creating and sending chunks </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//RoutingTableAccess routingTableAccess;</span>
    <a class="code" href="class_interface_table_access.html">InterfaceTableAccess</a> interfaceTableAccess;
    <a class="code" href="_s_c_t_p_association_8h.html#a83ecc618606af11f87a228a6ab74049b">AddressVector</a> adv;
    uint32 length = <a class="code" href="_s_c_t_p_association_8h.html#a685f1682f68294dbb12e7953e02748a0">SCTP_INIT_CHUNK_LENGTH</a>;

    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>.<a class="code" href="class_i_pv_x_address.html#aa3534408a9aa5e4cb3fc141597d0ed1e">isUnspecified</a>() || <a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>==0)
        opp_error(<span class="stringliteral">&quot;Error processing command ASSOCIATE: foreign socket unspecified&quot;</span>);
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>==0)
        opp_error(<span class="stringliteral">&quot;Error processing command ASSOCIATE: local port unspecified&quot;</span>);
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5b32a3dfde58166c98ee2c0d074d28b0">setPrimaryPath</a>(<a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>));
    <span class="comment">// create message consisting of INIT chunk</span>
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpmsg = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    sctpmsg-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);
    SCTPInitChunk *initChunk = <span class="keyword">new</span> SCTPInitChunk(<span class="stringliteral">&quot;INIT&quot;</span>);
    initChunk-&gt;setChunkType(<a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a0cb1b2c6a7db1f1084886c98909a3f36">INIT</a>);
    initChunk-&gt;setInitTag((uint32)(fmod(intrand(INT32_MAX), 1.0+(<span class="keywordtype">double</span>)(<span class="keywordtype">unsigned</span>)0xffffffffUL)) &amp; 0xffffffffUL);

    <a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a> = initChunk-&gt;getInitTag();
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;INIT from &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>&lt;&lt;<span class="stringliteral">&quot;:InitTag=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    initChunk-&gt;setA_rwnd(<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;arwnd&quot;</span>));
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a> = (long)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;arwnd&quot;</span>);
    initChunk-&gt;setNoOutStreams(<a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a>);
    initChunk-&gt;setNoInStreams(<a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a>);
    initChunk-&gt;setInitTSN(1000);
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae8ae55483bf42be31814339345133587">nextTSN</a>=initChunk-&gt;getInitTSN();
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a66dc15b846de9c6aaa9516479481cdaf">lastTSN</a> = initChunk-&gt;getInitTSN() + <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#adcb6627c45d909e52eba1e3ff4e05b29">numRequests</a> - 1;
    <a class="code" href="class_s_c_t_p_association.html#adf21f02ef10ae8d3d032337332b5f50f">initTsn</a>=initChunk-&gt;getInitTSN();
    <a class="code" href="class_i_interface_table.html">IInterfaceTable</a> *ift = interfaceTableAccess.<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;add local address\n&quot;</span>;
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#af44c3fdaaff9c48fdbb45aac6d6ad082">localAddressList</a>.front() == <a class="code" href="class_i_pv_x_address.html">IPvXAddress</a>(<span class="stringliteral">&quot;0.0.0.0&quot;</span>))
    {
        <span class="keywordflow">for</span> (int32 i=0; i&lt;ift-&gt;<a class="code" href="class_i_interface_table.html#a2b0ce46cd92da6f64fc363410dc71904">getNumInterfaces</a>(); ++i)
        {
            <span class="keywordflow">if</span> (ift-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i)-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()!=NULL)
            {
                adv.push_back(ift-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i)-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aec8ebefd03acad479ac89d31d7228331">getIPAddress</a>());
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ift-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i)-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()!=NULL)
            {
                <span class="keywordflow">for</span> (int32 j=0; j&lt;ift-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i)-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#ae4fe7ab839b3c7f08226eed79f224103">getNumAddresses</a>(); j++)
                {
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;add address &quot;</span>&lt;&lt;ift-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i)-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#a908a45071d8685ebbb01f73bb086525b">getAddress</a>(j)&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
                    adv.push_back(ift-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i)-&gt;<a class="code" href="class_interface_entry.html#aed2588713b620093ada1ebfeb85fdbfc">ipv6Data</a>()-&gt;<a class="code" href="class_i_pv6_interface_data.html#a908a45071d8685ebbb01f73bb086525b">getAddress</a>(j));
                }
            }
        }
    }
    <span class="keywordflow">else</span>
    {
        adv = <a class="code" href="class_s_c_t_p_association.html#af44c3fdaaff9c48fdbb45aac6d6ad082">localAddressList</a>;
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;gebundene Adresse &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>&lt;&lt;<span class="stringliteral">&quot; wird hinzugefuegt\n&quot;</span>;
    }
    uint32 addrNum=0;
    <span class="keywordtype">bool</span> friendly = <span class="keyword">false</span>;
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>.<a class="code" href="class_i_pv_x_address.html#a43ef7d0a976817991cfd41d09435225d">isIPv6</a>())
    {
        <span class="keywordflow">for</span> (AddressVector::iterator i=adv.begin(); i!=adv.end(); ++i)
        {
            <span class="keywordflow">if</span> (!friendly)
            {
                initChunk-&gt;setAddressesArraySize(addrNum+1);
                initChunk-&gt;setAddresses(addrNum++,(*i));
                length+=20;
            }
            <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#aeb3f468f36416f953ab7e647540f75e4">addLocalAddress</a>(<span class="keyword">this</span>, (*i));
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7b2aedff06029b67f2861a902e1bcf54">localAddresses</a>.push_back((*i));
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>.<a class="code" href="class_i_pv_x_address.html#aa3534408a9aa5e4cb3fc141597d0ed1e">isUnspecified</a>())
                <a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>=(*i);
        }
    }
    <span class="keywordflow">else</span>
    {
        uint32 rlevel = <a class="code" href="common_8cc.html#a6f8b246051a225410fd4eba9aa2a9f54">getLevel</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;level of remote address=&quot;</span>&lt;&lt;rlevel&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
        <span class="keywordflow">for</span> (AddressVector::iterator i=adv.begin(); i!=adv.end(); ++i)
        {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;level of address &quot;</span>&lt;&lt;(*i)&lt;&lt;<span class="stringliteral">&quot; = &quot;</span>&lt;&lt;<a class="code" href="common_8cc.html#a6f8b246051a225410fd4eba9aa2a9f54">getLevel</a>((*i))&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
            <span class="keywordflow">if</span> (<a class="code" href="common_8cc.html#a6f8b246051a225410fd4eba9aa2a9f54">getLevel</a>((*i))&gt;=rlevel)
            {
                initChunk-&gt;setAddressesArraySize(addrNum+1);
                initChunk-&gt;setAddresses(addrNum++,(*i));
                length+=8;
                <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#aeb3f468f36416f953ab7e647540f75e4">addLocalAddress</a>(<span class="keyword">this</span>, (*i));
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7b2aedff06029b67f2861a902e1bcf54">localAddresses</a>.push_back((*i));
                <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>.<a class="code" href="class_i_pv_x_address.html#a00acd2be0fc0f254afb2eb7540a4ea6e">get4</a>().<a class="code" href="class_i_p_address.html#a807ca46964a8403cf0c70f0772179524">getInt</a>()==0)
                    <a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>=(*i);
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rlevel==4 &amp;&amp; <a class="code" href="common_8cc.html#a6f8b246051a225410fd4eba9aa2a9f54">getLevel</a>((*i))==3 &amp;&amp; friendly)
            {
                <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#aeb3f468f36416f953ab7e647540f75e4">addLocalAddress</a>(<span class="keyword">this</span>, (*i));
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7b2aedff06029b67f2861a902e1bcf54">localAddresses</a>.push_back((*i));
                <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>.<a class="code" href="class_i_pv_x_address.html#a00acd2be0fc0f254afb2eb7540a4ea6e">get4</a>().<a class="code" href="class_i_p_address.html#a807ca46964a8403cf0c70f0772179524">getInt</a>()==0)
                    <a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>=(*i);
            }
        }
    }
    <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a84f317375ec11a83b15062a0d77694d3">printInfoConnMap</a>();
    initChunk-&gt;setBitLength(length*8);
    sctpmsg-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(initChunk);
    <span class="comment">// set path variables</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a746e4867059fcd11838ab601a6f5fea1">remoteAddressList</a>.size()&gt;0)
    {
        <span class="keywordflow">for</span> (AddressVector::iterator it=<a class="code" href="class_s_c_t_p_association.html#a746e4867059fcd11838ab601a6f5fea1">remoteAddressList</a>.begin(); it!=<a class="code" href="class_s_c_t_p_association.html#a746e4867059fcd11838ab601a6f5fea1">remoteAddressList</a>.end(); it++)
        {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;__LINE__&lt;&lt;<span class="stringliteral">&quot; get new path for &quot;</span>&lt;&lt;(*it)&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
            <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_association.html#a940cc2bde58bd842d11b28b3d09130dc">SCTPPathVariables</a>((*it), <span class="keyword">this</span>);
            <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>[(*it)] = path;
            <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>[(*it)]    = 0;
            <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>[(*it)] = 0;
            <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a767e2849d053dd45d294d8678b8daed9">roomRetransQ</a>[(*it)] = 0;
        }
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;__LINE__&lt;&lt;<span class="stringliteral">&quot; get new path for &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
        <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_association.html#a940cc2bde58bd842d11b28b3d09130dc">SCTPPathVariables</a>(remoteAddr, <span class="keyword">this</span>);
        <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>[<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>] = path;
        <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>[<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>]  = 0;
        <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>[<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>] = 0;
        <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a767e2849d053dd45d294d8678b8daed9">roomRetransQ</a>[<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>] = 0;
    }
    <span class="comment">// send it</span>
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#af687fe1d41e0f02e4f393ce45a83dd19">initChunk</a>=check_and_cast&lt;SCTPInitChunk *&gt;(initChunk-&gt;dup());
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#af687fe1d41e0f02e4f393ce45a83dd19">initChunk</a>-&gt;setName(<span class="stringliteral">&quot;StateInitChunk&quot;</span>);
    <a class="code" href="class_s_c_t_p_association.html#a120c72df6657d2ef5038d61881ff11c4">printSctpPathMap</a>();
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;getFullPath()&lt;&lt;<span class="stringliteral">&quot; sendInit: localVTag=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>&lt;&lt;<span class="stringliteral">&quot; peerVTag=&quot;</span>&lt;&lt;peerVTag&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpmsg);
    <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#affa2f26db6bbbf00938fa27e35b8f567">assocList</a>.push_back(<span class="keyword">this</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac40f2aff108134cbfcea6cb06e25fdb1"></a><!-- doxytag: member="SCTPAssociation::sendInitAck" ref="ac40f2aff108134cbfcea6cb06e25fdb1" args="(SCTPInitChunk *initchunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendInitAck </td>
          <td>(</td>
          <td class="paramtype">SCTPInitChunk *&#160;</td>
          <td class="paramname"><em>initchunk</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32 length = <a class="code" href="_s_c_t_p_association_8h.html#a685f1682f68294dbb12e7953e02748a0">SCTP_INIT_CHUNK_LENGTH</a>;

    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5b32a3dfde58166c98ee2c0d074d28b0">setPrimaryPath</a>(<a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>));
    <span class="comment">// create segment</span>
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpinitack = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    sctpinitack-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);

    sctpinitack-&gt;setSrcPort(<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>);
    sctpinitack-&gt;setDestPort(<a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>);
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;sendInitAck at &quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">localAddr</a>&lt;&lt;<span class="stringliteral">&quot;. Provided InitTag=&quot;</span>&lt;&lt;initChunk-&gt;getInitTag()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    SCTPInitAckChunk *initAckChunk = <span class="keyword">new</span> SCTPInitAckChunk(<span class="stringliteral">&quot;INIT_ACK&quot;</span>);
    initAckChunk-&gt;setChunkType(<a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12abb473557985d30fdf16d2525388e3a22">INIT_ACK</a>);
    SCTPCookie *cookie = <span class="keyword">new</span> SCTPCookie(<span class="stringliteral">&quot;CookieUtil&quot;</span>);
    cookie-&gt;setCreationTime(simTime());
    cookie-&gt;setLocalTieTagArraySize(32);
    cookie-&gt;setPeerTieTagArraySize(32);
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()==<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>)
    {
        <span class="keywordflow">while</span> (<a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>==0)
        {
            <a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a> = (uint32)intrand(INT32_MAX);
        }
        initAckChunk-&gt;setInitTag(<a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>);
        initAckChunk-&gt;setInitTSN(2000);
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae8ae55483bf42be31814339345133587">nextTSN</a>=initAckChunk-&gt;getInitTSN();
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a66dc15b846de9c6aaa9516479481cdaf">lastTSN</a> = initAckChunk-&gt;getInitTSN() + <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#adcb6627c45d909e52eba1e3ff4e05b29">numRequests</a> - 1;
        cookie-&gt;setLocalTag(<a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>);
        cookie-&gt;setPeerTag(<a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>);
        <span class="keywordflow">for</span> (int32 i=0; i&lt;32; i++)
        {
            cookie-&gt;setLocalTieTag(i,0);
            cookie-&gt;setPeerTieTag(i,0);
        }
        sctpinitack-&gt;setTag(<a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>);
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;state=closed: localVTag=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>&lt;&lt;<span class="stringliteral">&quot; peerVTag=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()==<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8af21d78f3ce1dc469572320cb1e192cc3">SCTP_S_COOKIE_WAIT</a> || <a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()==<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a>)
    {
        initAckChunk-&gt;setInitTag(<a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>);
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;different state:set InitTag in InitAck: &quot;</span>&lt;&lt;initAckChunk-&gt;getInitTag()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
        initAckChunk-&gt;setInitTSN(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae8ae55483bf42be31814339345133587">nextTSN</a>);
        <a class="code" href="class_s_c_t_p_association.html#a5ca011cb3142dfcd423f4083855a7460">initPeerTsn</a>=initChunk-&gt;getInitTSN();
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a> = <a class="code" href="class_s_c_t_p_association.html#a5ca011cb3142dfcd423f4083855a7460">initPeerTsn</a> - 1;
        cookie-&gt;setLocalTag(initChunk-&gt;getInitTag());
        cookie-&gt;setPeerTag(<a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>);
        <span class="keywordflow">for</span> (int32 i=0; i&lt;32; i++)
        {
            cookie-&gt;setPeerTieTag(i,(uint8)(intrand(256)));
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a524b3dbfe700d9d54e23186893490422">peerTieTag</a>[i] = cookie-&gt;getPeerTieTag(i);
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()==<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a>)
            {
                cookie-&gt;setLocalTieTag(i,(uint8)(intrand(256)));
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae69a3b5689a645e53211833683509972">localTieTag</a>[i] = cookie-&gt;getLocalTieTag(i);
            }
            <span class="keywordflow">else</span>
                cookie-&gt;setLocalTieTag(i,0);
        }
        sctpinitack-&gt;setTag(initChunk-&gt;getInitTag());
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;VTag in InitAck: &quot;</span>&lt;&lt;sctpinitack-&gt;getTag()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;other state\n&quot;</span>;
        uint32 tag=0;
        <span class="keywordflow">while</span> (tag==0)
        {
            tag = (uint32)(fmod(intrand(INT32_MAX), 1.0+(<span class="keywordtype">double</span>)(<span class="keywordtype">unsigned</span>)0xffffffffUL)) &amp; 0xffffffffUL;
        }
        initAckChunk-&gt;setInitTag(tag);
        initAckChunk-&gt;setInitTSN(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae8ae55483bf42be31814339345133587">nextTSN</a>);
        cookie-&gt;setLocalTag(<a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>);
        cookie-&gt;setPeerTag(<a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>);
        <span class="keywordflow">for</span> (int32 i=0; i&lt;32; i++)
        {
            cookie-&gt;setPeerTieTag(i,<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a524b3dbfe700d9d54e23186893490422">peerTieTag</a>[i]);
            cookie-&gt;setLocalTieTag(i,<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae69a3b5689a645e53211833683509972">localTieTag</a>[i]);
        }
        sctpinitack-&gt;setTag(initChunk-&gt;getInitTag());
    }
    cookie-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a3aeb03eaba88c9681ecb920f24c689d2">SCTP_COOKIE_LENGTH</a>*8);
    initAckChunk-&gt;setStateCookie(cookie);
    initAckChunk-&gt;setCookieArraySize(0);
    initAckChunk-&gt;setA_rwnd(<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;arwnd&quot;</span>));
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a> = (long)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;arwnd&quot;</span>);
    initAckChunk-&gt;setNoOutStreams((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="_s_c_t_p_association_8h.html#ad61931b1ae6b8e5bb714e2e6744f4470">min</a>(<a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a>,initChunk-&gt;getNoInStreams()));
    initAckChunk-&gt;setNoInStreams((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="_s_c_t_p_association_8h.html#ad61931b1ae6b8e5bb714e2e6744f4470">min</a>(<a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a>,initChunk-&gt;getNoOutStreams()));
    <a class="code" href="class_s_c_t_p_association.html#adf21f02ef10ae8d3d032337332b5f50f">initTsn</a>=initAckChunk-&gt;getInitTSN();
    uint32 addrNum=0;
    <span class="keywordtype">bool</span> friendly = <span class="keyword">false</span>;
    <span class="keywordflow">if</span> (!friendly)
    <span class="keywordflow">for</span> (AddressVector::iterator k=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7b2aedff06029b67f2861a902e1bcf54">localAddresses</a>.begin(); k!=<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7b2aedff06029b67f2861a902e1bcf54">localAddresses</a>.end(); ++k)
    {
        initAckChunk-&gt;setAddressesArraySize(addrNum+1);
        initAckChunk-&gt;setAddresses(addrNum++,(*k));
        length+=8;
    }
    uint32 unknownLen = initChunk-&gt;getUnrecognizedParametersArraySize();
    <span class="keywordflow">if</span> (unknownLen&gt;0)
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;Found unrecognized Parameters in INIT chunk with a length of &quot;</span>&lt;&lt;unknownLen&lt;&lt;<span class="stringliteral">&quot; bytes.\n&quot;</span>;
        initAckChunk-&gt;setUnrecognizedParametersArraySize(unknownLen);
        <span class="keywordflow">for</span> (uint32 i=0; i&lt;unknownLen; i++)
            initAckChunk-&gt;setUnrecognizedParameters(i,initChunk-&gt;getUnrecognizedParameters(i));
        length+=unknownLen;
    }
    <span class="keywordflow">else</span>
        initAckChunk-&gt;setUnrecognizedParametersArraySize(0);

    initAckChunk-&gt;setBitLength((length+initAckChunk-&gt;getCookieArraySize())*8 + cookie-&gt;getBitLength());
    <a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a> = ((initChunk-&gt;getNoOutStreams()&lt;initAckChunk-&gt;getNoInStreams())?initChunk-&gt;getNoOutStreams():initAckChunk-&gt;getNoInStreams());
    <a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a> = ((initChunk-&gt;getNoInStreams()&lt;initAckChunk-&gt;getNoOutStreams())?initChunk-&gt;getNoInStreams():initAckChunk-&gt;getNoOutStreams());
    (this-&gt;*<a class="code" href="class_s_c_t_p_association.html#a9988effc78d17db9b32a8d6a976c2288">ssFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html#a5796699025095f8e6c57aaff4b5d3538">ssInitStreams</a>)(<a class="code" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">inboundStreams</a>, <a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a>);
    sctpinitack-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(initAckChunk);
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">fsm</a>-&gt;getState()==<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>)
    {
        <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpinitack, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a6270b0edb7777931a33ff8662288bf25">initialPrimaryPath</a>);
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpinitack);

    }
    <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#affa2f26db6bbbf00938fa27e35b8f567">assocList</a>.push_back(<span class="keyword">this</span>);
    <a class="code" href="class_s_c_t_p_association.html#a120c72df6657d2ef5038d61881ff11c4">printSctpPathMap</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab0faa9ccd46630cfab7a2bc75fb1d52d"></a><!-- doxytag: member="SCTPAssociation::sendOnAllPaths" ref="ab0faa9ccd46630cfab7a2bc75fb1d52d" args="(SCTPPathVariables *firstPath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendOnAllPaths </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>firstPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a0604d2735afd938650aa540e1ed7b9d1">process_ABORT()</a>, <a class="el" href="class_s_c_t_p_association.html#a6c53aeb97e7132e5f09869f886e5807e">process_CLOSE()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>, <a class="el" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">// ------ Send on provided path first ... -----------------------------</span>
        <span class="keywordflow">if</span>(firstPath != NULL) {
            <a class="code" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath</a>(firstPath);
        }

        <span class="comment">// ------ ... then, try sending on all other paths --------------------</span>
        <span class="keywordflow">for</span> (SCTPPathMap::iterator iterator = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin(); iterator != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); ++iterator) {
            <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = iterator-&gt;second;
            <span class="keywordflow">if</span>(path != firstPath) {
                <a class="code" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath</a>(path);
            }
        }

}
</pre></div>
</div>
</div>
<a class="anchor" id="aa7cf5e2c2c169ce78e856025bb181116"></a><!-- doxytag: member="SCTPAssociation::sendOnPath" ref="aa7cf5e2c2c169ce78e856025bb181116" args="(SCTPPathVariables *pathId, const bool firstPass=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendOnPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>pathId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>firstPass</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: Send data from sendQueue. </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_alg.html#a2d0ef0333dbadbb9ecd92f90aa204f29">SCTPAlg::sendCommandInvoked()</a>, and <a class="el" href="class_s_c_t_p_association.html#ab0faa9ccd46630cfab7a2bc75fb1d52d">sendOnAllPaths()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ====== Variables ======================================================</span>
    <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>*  path             = NULL;      <span class="comment">// Path to send next message to</span>
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>*            sctpMsg      = NULL;
    SCTPSackChunk*          sackChunk    = NULL;
    SCTPDataChunk*          chunkPtr         = NULL;

    uint16 chunksAdded      = 0;
    uint16 dataChunksAdded  = 0;
    uint32 totalChunksSent  = 0;
    uint32 totalPacketsSent = 0;
    uint32 packetBytes      = 0;
    uint32 outstandingBytes = 0;

    uint32 tcount               = 0;     <span class="comment">// Bytes in transmission queue on the selected path</span>
    uint32 scount               = 0;     <span class="comment">// Bytes in send streams</span>
    int32 bytesToSend           = 0;

    <span class="keywordtype">bool</span> headerCreated      = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> rtxActive              = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> sendOneMorePacket  = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> sendingAllowed     = <span class="keyword">true</span>;
    <span class="keywordtype">bool</span> authAdded              = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> sackAdded              = <span class="keyword">false</span>;

    <span class="comment">// ====== Obtain path ====================================================</span>
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;##### sendAll(&quot;</span>;
    <span class="keywordflow">if</span>(pathId) {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; pathId-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>;
    }
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;) #####&quot;</span> &lt;&lt; endl;
    <span class="keywordflow">while</span>(sendingAllowed)
    {
        headerCreated = <span class="keyword">false</span>;
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aef86f64e9eba32144f7d4d997e7df229">bytesToRetransmit</a> &gt; 0) {
            <span class="comment">// There are bytes in the transmissionQ. They have to be sent first.</span>
            path = <a class="code" href="class_s_c_t_p_association.html#a8b00fc2f2bcb1cb805a62316a15db984">choosePathForRetransmission</a>();
            assert(path != NULL);
            rtxActive = <span class="keyword">true</span>;
        }
        <span class="keywordflow">else</span> {
            <span class="keywordflow">if</span> (pathId == NULL) {   <span class="comment">// No path given =&gt; use primary path.</span>
                path = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#afaefe95090e09d43d24794cf47a1ec0c">getPrimaryPath</a>();
            }
            <span class="keywordflow">else</span> {
                path = pathId;
            }
        }

        outstandingBytes = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a>;
        assert((int32)outstandingBytes &gt;= 0);
        CounterMap::iterator tq = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>.find(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
        tcount = tq-&gt;second;
        scount = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a>;     <span class="comment">// includes header and padding</span>
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;\nsendAll: on &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a> &lt;&lt; <span class="stringliteral">&quot;:&quot;</span>
                  &lt;&lt; <span class="stringliteral">&quot; tcount=&quot;</span>      &lt;&lt; tcount
                  &lt;&lt; <span class="stringliteral">&quot; scount=&quot;</span>      &lt;&lt; scount
                  &lt;&lt; <span class="stringliteral">&quot; nextTSN=&quot;</span>         &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae8ae55483bf42be31814339345133587">nextTSN</a> &lt;&lt; endl;

        <span class="keywordtype">bool</span> sackOnly;
        <span class="keywordtype">bool</span> sackWithData;
        <a class="code" href="class_s_c_t_p_association.html#a3525db7c8ed37b6e45ae4a65e9af8968">timeForSack</a>(sackOnly, sackWithData);
        <span class="keywordflow">if</span> (tcount == 0 &amp;&amp; scount == 0) {
            <span class="comment">// ====== No DATA chunks to send ===================================</span>
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;No DATA chunk available!&quot;</span> &lt;&lt; endl;
            <span class="keywordflow">if</span> (!sackOnly) {     <span class="comment">// SACK?, no data to send</span>
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;No SACK to send either&quot;</span> &lt;&lt; endl;
                <span class="keywordflow">return</span>;
            }
            <span class="keywordflow">else</span> {
                <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a> = 0;
            }
        }
        <span class="keywordflow">else</span> {
            <a class="code" href="class_s_c_t_p_association.html#a47401fe3a9b36c629785c65886c19efd">bytesAllowedToSend</a>(path, firstPass);
        }
        bytesToSend = <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a377542c5dbfe873e1cad93ad1572618e">bytesToSend</a>;

        <span class="comment">// As there is at least a SACK to be sent, a header can be created</span>

        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a71c1bdd09aeb8aca87c5ba84d591f6fa">sctpMsg</a>)  <span class="comment">// ??? Robin: Ist das in Ordnung???</span>
        {
            <a class="code" href="class_s_c_t_p_association.html#ac39737ee344fd4a8475b7efee8c47c31">loadPacket</a>(path, &amp;sctpMsg, &amp;chunksAdded, &amp;dataChunksAdded, &amp;packetBytes, &amp;authAdded);
            headerCreated = <span class="keyword">true</span>;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bytesToSend &gt; 0 || <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a> || <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a> || sackWithData || sackOnly) {
            sctpMsg = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>(<span class="stringliteral">&quot;send&quot;</span>);
            <span class="comment">//printf(&quot;%d Name=%s Pointer=%p\n&quot;, __LINE__, sctpMsg-&gt;getName(), sctpMsg);</span>
            sctpMsg-&gt;setByteLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>);
            packetBytes = 0;
            headerCreated = <span class="keyword">true</span>;
        }


        <span class="keywordflow">if</span> (sackWithData || sackOnly)
        {
            <span class="comment">// SACK can be sent</span>
            assert(headerCreated==<span class="keyword">true</span>);
            sackChunk = <a class="code" href="class_s_c_t_p_association.html#a0054d12cb552f7417b97c7e671231905">createSack</a>();
            chunksAdded++;
            totalChunksSent++;
            <span class="comment">// ------ Create AUTH chunk, if necessary --------------------------</span>

            <span class="comment">// ------ Add SACK chunk -------------------------------------------</span>
            sctpMsg-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(sackChunk);
            sackAdded = <span class="keyword">true</span>;
            <span class="keywordflow">if</span> (sackOnly)     <span class="comment">// ????? Robin: SACK mit FORWARD_TSN????</span>
            {
                <span class="comment">// send the packet and leave</span>
                <span class="comment">//printf(&quot;%d Name=%s Pointer=%p, sctpMsg\n&quot;, __LINE__, sctpMsg-&gt;getName(), sctpMsg);</span>
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acd712e40d2abba82caa4acb46a16fc8b">ackState</a> = 0;
                <span class="comment">// Stop SACK timer if it is running...</span>
                <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>);
                <a class="code" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">sctpAlgorithm</a>-&gt;<a class="code" href="class_s_c_t_p_algorithm.html#a169f6485c0edf63e8b77f9feef157867">sackSent</a>();
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae92fceb56eefd5079a1c5e103d8448a7">sackAllowed</a> = <span class="keyword">false</span>;
                <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpMsg, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9f057ad775e7e3187bc6f522820b0ac2">lastDataSourceAddress</a>);
                <span class="keywordflow">if</span> ((bytesToSend &gt; 0) || (<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a>) || (<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a>)) {
                    sctpMsg = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>(<span class="stringliteral">&quot;send&quot;</span>);
                    sctpMsg-&gt;setByteLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>);
                    packetBytes = 0;
                    headerCreated = <span class="keyword">true</span>;
                    sackAdded = <span class="keyword">false</span>;
                }
                <span class="keywordflow">else</span>
                    <span class="keywordflow">return</span>;
            }
        }


        <span class="comment">// ####################################################################</span>
        <span class="comment">// #### Data Transmission                                                        ####</span>
        <span class="comment">// ####################################################################</span>

        <span class="keywordtype">bool</span> packetFull = <span class="keyword">false</span>;

        <span class="keywordflow">while</span>(!packetFull &amp;&amp; headerCreated) {
            assert(headerCreated == <span class="keyword">true</span>);
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesToSend=&quot;</span>    &lt;&lt; bytesToSend
                      &lt;&lt; <span class="stringliteral">&quot; bytes.chunk=&quot;</span>     &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a>
                      &lt;&lt; <span class="stringliteral">&quot; bytes.packet=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a> &lt;&lt; endl;

            <span class="comment">// ====== How many bytes may be transmitted in next packet? ========</span>
            int32 allowance = path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>;     <span class="comment">// Default behaviour: send 1 path MTU</span>
                <span class="keywordflow">if</span> ((bytesToSend &gt; 0) || (<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a>) || (<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a>)) {
                    <span class="comment">// Allow 1 more MTU</span>
                }
                <span class="keywordflow">else</span> {
                    <span class="comment">// No more sending allowed.</span>
                    allowance   = 0;
                    bytesToSend = 0;
                }

            <span class="keywordflow">if</span> ((allowance &gt; 0) || (<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a>) || (<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a>)) {
                <span class="keywordtype">bool</span> firstTime = <span class="keyword">false</span>;   <span class="comment">// Is DATA chunk send for the first time?</span>

                <span class="comment">// ====== Retransmission ========================================</span>
                <span class="comment">// T.D. 05.01.2010: If bytes.packet is true, one packet is allowed</span>
                <span class="comment">//                        to be retransmitted!</span>
                <a class="code" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a>* datVar = <a class="code" href="class_s_c_t_p_association.html#a52141caf8994688922c957e8ddee864f">getOutboundDataChunk</a>(path,
                                                                                 path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> - sctpMsg-&gt;getByteLength() - 20,
                                                                                 (<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a> == <span class="keyword">true</span>) ? path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> : allowance);
                <span class="keywordflow">if</span> (chunksAdded==1 &amp;&amp; sackAdded &amp;&amp; !sackOnly &amp;&amp; datVar==NULL) {
                    sctpMsg-&gt;<a class="code" href="class_s_c_t_p_message.html#aa0f9b611f85c4e718a400e9f7379f4b8">removeChunk</a>();
                    <span class="keyword">delete</span> sackChunk;
                    datVar = <a class="code" href="class_s_c_t_p_association.html#a52141caf8994688922c957e8ddee864f">getOutboundDataChunk</a>(path,
                                                            path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> - sctpMsg-&gt;getByteLength() - 20,
                                                            (<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a> == <span class="keyword">true</span>) ? path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> : allowance);
                }
                <span class="keywordflow">if</span> (datVar != NULL) {
                    assert(datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ac7fecde61de64ef7a37e20a6a95c5d33">getNextDestinationPath</a>() == path);
                    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a7670756ef2a46e2f2185a047d19a3c03">numberOfRetransmissions</a>++;
                    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#abab3867be074dea5acf98169c67efc78">chunkHasBeenAcked</a>(datVar) == <span class="keyword">false</span>) {
                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;: Retransmission #&quot;</span> &lt;&lt; datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a7670756ef2a46e2f2185a047d19a3c03">numberOfRetransmissions</a>
                                  &lt;&lt; <span class="stringliteral">&quot; of TSN &quot;</span> &lt;&lt; datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>
                                  &lt;&lt; <span class="stringliteral">&quot; on path &quot;</span> &lt;&lt; datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af39b432c96285a2e9cd0d0320d091d7c">getNextDestination</a>()
                                  &lt;&lt; <span class="stringliteral">&quot; (last was &quot;</span> &lt;&lt; datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aab8ca4e56deac9cab60e83c2fa7c2c6f">getLastDestination</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;

                        datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a> = <span class="keyword">true</span>;
                        datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ac25b1776cd86480fba00adf7ffc3d281">hasBeenReneged</a>       = <span class="keyword">false</span>;
                        <a class="code" href="class_s_c_t_p_association.html#aaf93ca861bf56525302bb2b661bdd4df">increaseOutstandingBytes</a>(datVar, path); <span class="comment">// NOTE: path == datVar-&gt;getNextDestinationPath()</span>
                    }
                }

                <span class="comment">// ====== First Transmission ====================================</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ((scount &gt; 0) &amp;&amp; (!<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5a4195a30b502699a6fd92ce5965f15c">nagleEnabled</a>)) ||                                         <span class="comment">// Data to send and Nagle off</span>
                             ((uint32)scount &gt;= path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> - 32 - 20) ||                                          <span class="comment">// Data to fill at least one path MTU</span>
                             ((scount &gt; 0) &amp;&amp; (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5a4195a30b502699a6fd92ce5965f15c">nagleEnabled</a>) &amp;&amp; (outstandingBytes == 0)) ) {   <span class="comment">// Data to send, Nagle on and no outstanding bytes</span>

                    <span class="keywordflow">if</span>(path == <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#afaefe95090e09d43d24794cf47a1ec0c">getPrimaryPath</a>()) {

                        <span class="comment">// ------ Dequeue data message ----------------------------</span>
                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll:     sctpMsg-&gt;length=&quot;</span> &lt;&lt; sctpMsg-&gt;getByteLength()
                                  &lt;&lt; <span class="stringliteral">&quot; length datMsg=&quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>-sctpMsg-&gt;getByteLength() - 20 &lt;&lt; endl;
                        SCTPDataMsg* datMsg = <a class="code" href="class_s_c_t_p_association.html#a5bccfb8217d1cbb22a629856f96755ad">dequeueOutboundDataMsg</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>-sctpMsg-&gt;getByteLength() - 20,
                                                                                    allowance);
                        <span class="keywordflow">if</span> (chunksAdded==1 &amp;&amp; sackAdded &amp;&amp; !sackOnly &amp;&amp; datMsg==NULL)
                        {
                            sctpMsg-&gt;<a class="code" href="class_s_c_t_p_message.html#aa0f9b611f85c4e718a400e9f7379f4b8">removeChunk</a>();
                            <span class="keyword">delete</span> sackChunk;
                            datMsg = <a class="code" href="class_s_c_t_p_association.html#a5bccfb8217d1cbb22a629856f96755ad">dequeueOutboundDataMsg</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>-sctpMsg-&gt;getByteLength() - 20,
                                                                    allowance);
                        }
                        <span class="comment">// ------ Handle data message -----------------------------</span>
                        <span class="keywordflow">if</span> (datMsg) {
                            firstTime = <span class="keyword">true</span>;

                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aee5ec4417497e5bba3cf95f79f902da6">queuedMessages</a>--;
                            <span class="keywordflow">if</span> ((<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37fa23a9f841d820bc9e5114e76c5823">queueLimit</a> &gt; 0) &amp;&amp;
                                (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aee5ec4417497e5bba3cf95f79f902da6">queuedMessages</a> &lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37fa23a9f841d820bc9e5114e76c5823">queueLimit</a>) &amp;&amp;
                                (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3fe954a9fd21fd90abbb9258fc285afe">queueUpdate</a> == <span class="keyword">false</span>)) {
                                <span class="comment">// Tell upper layer readiness to accept more data</span>
                                <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3a781cc2063dc1656c84a04fde2991e2d2">SCTP_I_SEND_MSG</a>);
                                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3fe954a9fd21fd90abbb9258fc285afe">queueUpdate</a> = <span class="keyword">true</span>;
                            }

                            datVar = <a class="code" href="class_s_c_t_p_association.html#a164799c396a6e3b931854cc4af513ff4">makeDataVarFromDataMsg</a>(datMsg, path);
                            <span class="keyword">delete</span> datMsg;

                            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: chunk &quot;</span> &lt;&lt; datVar &lt;&lt; <span class="stringliteral">&quot; dequeued from StreamQ &quot;</span>
                                    &lt;&lt; datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aa3c89c48c0c3ab5cc9b73d7ff525f67e">sid</a> &lt;&lt; <span class="stringliteral">&quot;: tsn=&quot;</span> &lt;&lt; datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>
                                    &lt;&lt; <span class="stringliteral">&quot;, bytes now &quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
                        }

                        <span class="comment">// ------ No data message has been dequeued ---------------</span>
                        <span class="keywordflow">else</span> {
                            <span class="comment">// ------ Are there any chunks to send? ----------------</span>
                            <span class="keywordflow">if</span> (chunksAdded == 0) {
                                <span class="comment">// No -&gt; nothing more to do.</span>
                                <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a71c1bdd09aeb8aca87c5ba84d591f6fa">sctpMsg</a> == sctpMsg)
                                {
                                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a71c1bdd09aeb8aca87c5ba84d591f6fa">sctpMsg</a> = NULL;
                                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a74a0620b592f25bb21ee68452dbb8740">packetBytes</a> = 0;
                                }
                                packetFull = <span class="keyword">true</span>;  <span class="comment">// chunksAdded==0, packetFull==true =&gt; leave inner while loop</span>
                            }
                            <span class="keywordflow">else</span> {
                                <span class="comment">// Yes.</span>
                                <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5a4195a30b502699a6fd92ce5965f15c">nagleEnabled</a> &amp;&amp; (outstandingBytes &gt; 0) &amp;&amp;
                                    <a class="code" href="class_s_c_t_p_association.html#afcdda96737a59959b556a07031d9ad98">nextChunkFitsIntoPacket</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>-sctpMsg-&gt;getByteLength() - 20) &amp;&amp;
                                    (sctpMsg-&gt;getByteLength() &lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> - 32 - 20) &amp;&amp; (tcount == 0))
                                {
                                    <a class="code" href="class_s_c_t_p_association.html#a3f5a43f961e2cc691da4546762e28498">storePacket</a>(path, sctpMsg, chunksAdded, dataChunksAdded, packetBytes, authAdded);
                                    packetBytes = 0;
                                }
                                <span class="comment">//chunksAdded = 0;</span>
                                packetFull = <span class="keyword">true</span>;  <span class="comment">// chunksAdded==0, packetFull==true =&gt; leave inner while loop</span>
                                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: packetFull: msg length = &quot;</span> &lt;&lt; sctpMsg-&gt;getBitLength() / 8 + 20 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
                            }
                        }
                    }
                }


                <span class="comment">// ------ Handle DATA chunk -------------------------------------</span>
                <span class="keywordflow">if</span> (datVar != NULL &amp;&amp; !packetFull) {
                    <span class="comment">// ------ Assign TSN -----------------------------------------</span>
                    <span class="keywordflow">if</span> (firstTime) {
                        assert(datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> == 0);
                        datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae8ae55483bf42be31814339345133587">nextTSN</a>;
                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: set TSN=&quot;</span> &lt;&lt; datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>
                                &lt;&lt; <span class="stringliteral">&quot; sid=&quot;</span> &lt;&lt; datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aa3c89c48c0c3ab5cc9b73d7ff525f67e">sid</a> &lt;&lt; <span class="stringliteral">&quot;, ssn=&quot;</span> &lt;&lt; datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a518f7b638f4184fc01c4bdd20d641601">ssn</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae8ae55483bf42be31814339345133587">nextTSN</a>++;
                    }

                    SCTP::AssocStatMap::iterator iterator = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a43c9f3107b99f1c969a4d5ca9c168bd3">assocStatMap</a>.find(<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
                    iterator-&gt;second.transmittedBytes += datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a> / 8;

                    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#afb6957b9621154b8e021b704e79cace2">setLastDestination</a>(path);
                    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a> = <span class="keyword">true</span>;
                    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ac25b1776cd86480fba00adf7ffc3d281">hasBeenReneged</a>       = <span class="keyword">false</span>;
                    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a347b1c461d332be999051c3d1f0abaa1">sendTime</a>                 = simTime(); <span class="comment">//I.R. to send Fast RTX just once a RTT</span>

                    <span class="comment">// ------ First transmission of datVar -----------------------</span>
                    <span class="keywordflow">if</span> (datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af9410192fb1add58020e8c9fd14928c1">numberOfTransmissions</a> == 0) {

                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: &quot;</span> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot; firstTime, TSN &quot;</span>
                                  &lt;&lt; datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>    &lt;&lt; <span class="stringliteral">&quot;: lastDestination set to &quot;</span>
                                  &lt;&lt; datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aab8ca4e56deac9cab60e83c2fa7c2c6f">getLastDestination</a>() &lt;&lt; endl;

                        <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a6bd6ae8cce21386df977220128383b02">firstDataSent</a>) {
                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a6bd6ae8cce21386df977220128383b02">firstDataSent</a> = <span class="keyword">true</span>;
                        }
                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: insert in retransmissionQ tsn=&quot;</span> &lt;&lt; datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
                        <span class="keywordflow">if</span>(!<a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#a198854d52d738bb77bb031ffe863b5be">checkAndInsertChunk</a>(datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>, datVar)) {
                            opp_error(<span class="stringliteral">&quot;Cannot add datVar to retransmissionQ!&quot;</span>);
                            <span class="comment">// Falls es hier aufschlaegt, muss ueberlegt werden, ob es OK ist, dass datVars nicht eingefuegt werden koennen.</span>
                        }
                        <span class="keywordflow">else</span> {
                            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: size of retransmissionQ=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af665b72b717ec39ba1a01364769e2db0">getQueueSize</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
                            <a class="code" href="class_s_c_t_p_association.html#a7970990bafb546026b91ab011eb956af">unackChunk</a>(datVar);
                            <a class="code" href="class_s_c_t_p_association.html#aaf93ca861bf56525302bb2b661bdd4df">increaseOutstandingBytes</a>(datVar, path);
                        }
                    }

                    <span class="comment">/* datVar is already in the retransmissionQ */</span>
                    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af9410192fb1add58020e8c9fd14928c1">numberOfTransmissions</a>++;
                    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0311c740e321088d6ba6626816993e86">gapReports</a>                  = 0;
                    datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ab5595233870d7a9b0dc74b020ae7c9a1">hasBeenFastRetransmitted</a> = <span class="keyword">false</span>;
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;sendAll(): adding new outbound data datVar to packet (tsn=&quot;</span>&lt;&lt;datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>&lt;&lt;<span class="stringliteral">&quot;)...!!!\n&quot;</span>;

                    chunkPtr = <a class="code" href="class_s_c_t_p_association.html#a30445facc61cdf6ef4362b02a244eb2c">transformDataChunk</a>(datVar);

                    <span class="comment">/* update counters */</span>
                    totalChunksSent++;
                    chunksAdded++;
                    dataChunksAdded++;
                    sctpMsg-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(chunkPtr);
                    <span class="keywordflow">if</span>(<a class="code" href="class_s_c_t_p_association.html#afcdda96737a59959b556a07031d9ad98">nextChunkFitsIntoPacket</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> - sctpMsg-&gt;getByteLength() - 20) == <span class="keyword">false</span>) {
                        <span class="comment">// ???? Robin: Ist diese Annahme so richtig?</span>
                        packetFull = <span class="keyword">true</span>;
                    }

                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7f69bc6b1b246c1993d8621eb8ee4800">peerRwnd</a> -= datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;
                    <span class="keywordflow">if</span> ((<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a> == <span class="keyword">false</span>) &amp;&amp; (<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a> == <span class="keyword">false</span>)) {
                        bytesToSend -= datVar-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;
                    }
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a>) {
                        <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a> = <span class="keyword">false</span>;
                    }
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a>) &amp;&amp; (packetFull)) {
                        <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a> = <span class="keyword">false</span>;
                    }

                    <span class="keywordflow">if</span> (bytesToSend &lt;= 0) {
                        <span class="keywordflow">if</span> ((!packetFull) &amp;&amp; (<a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a> &gt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> - 32 - 20 || tcount &gt; 0)) {
                            sendOneMorePacket = <span class="keyword">true</span>;
                            <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a>        = <span class="keyword">true</span>;
                            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: one more packet allowed\n&quot;</span>;
                        }
                        <span class="keywordflow">else</span> {
                            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5a4195a30b502699a6fd92ce5965f15c">nagleEnabled</a> &amp;&amp; (outstandingBytes &gt; 0) &amp;&amp;
                                <a class="code" href="class_s_c_t_p_association.html#afcdda96737a59959b556a07031d9ad98">nextChunkFitsIntoPacket</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a>-sctpMsg-&gt;getByteLength() - 20) &amp;&amp;
                                (sctpMsg-&gt;getByteLength() &lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ad6dd717bdac741be310d027f5b663525">pmtu</a> - 32 - 20) &amp;&amp; (tcount == 0))
                            {
                                <a class="code" href="class_s_c_t_p_association.html#a3f5a43f961e2cc691da4546762e28498">storePacket</a>(path, sctpMsg, chunksAdded, dataChunksAdded, packetBytes, authAdded);
                                packetBytes = 0;
                                chunksAdded = 0;
                                packetFull  = <span class="keyword">true</span>;  <span class="comment">// chunksAdded==0, packetFull==true =&gt; leave inner while loop</span>
                            }
                            <span class="keywordflow">else</span> {
                                packetFull            = <span class="keyword">true</span>;
                            }
                        }
                        bytesToSend = 0;
                    }
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a> == 0) &amp;&amp; (tq-&gt;second==0)) {
                        packetFull            = <span class="keyword">true</span>;
                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: no data in send and transQ: packet full\n&quot;</span>;
                    }
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: bytesToSend after reduction: &quot;</span> &lt;&lt; bytesToSend &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
                }

                <span class="comment">// ------ There is no DATA chunk, only control chunks possible --</span>
                <span class="keywordflow">else</span> {
                    <span class="comment">// ????? Robin: Kann dieser Fall wirklich eintreten?</span>
                    <span class="keywordflow">if</span> (chunksAdded == 0) {   <span class="comment">// Nothing to do -&gt; return</span>
                        packetFull = <span class="keyword">true</span>;  <span class="comment">// chunksAdded==0, packetFull==true =&gt; leave inner while loop</span>
                    }
                    <span class="keywordflow">else</span> {
                        packetFull = <span class="keyword">true</span>;
                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: packetFull: msg length = &quot;</span> &lt;&lt; sctpMsg-&gt;getBitLength() / 8 + 20 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
                        datVar = NULL;
                    }
                }


                <span class="comment">// ====== Send packet ===========================================</span>
                <span class="keywordflow">if</span> (packetFull) {
                    <span class="keywordflow">if</span>(chunksAdded == 0) {   <span class="comment">// Nothing to send</span>
                        <span class="keyword">delete</span> sctpMsg;
                        sendingAllowed = <span class="keyword">false</span>;   <span class="comment">// sendingAllowed==false =&gt; leave outer while loop</span>
                    }
                    <span class="keywordflow">else</span> {
                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: &quot;</span> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;    packet full:&quot;</span>
                                &lt;&lt; <span class="stringliteral">&quot;    totalLength=&quot;</span> &lt;&lt; sctpMsg-&gt;getBitLength() / 8 + 20
                                &lt;&lt; <span class="stringliteral">&quot;,    path=&quot;</span>   &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                                &lt;&lt; <span class="stringliteral">&quot;     &quot;</span>                &lt;&lt; dataChunksAdded &lt;&lt; <span class="stringliteral">&quot; chunks added, outstandingBytes now &quot;</span>
                                &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

                        <span class="comment">/* new chunks would exceed MTU, so we send old packet and build a new one */</span>
                        <span class="comment">/* this implies that at least one data chunk is send here */</span>
                        <span class="keywordflow">if</span> (dataChunksAdded &gt; 0) {
                            <span class="keywordflow">if</span> (!path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>-&gt;isScheduled()) {
                                <span class="comment">// Start retransmission timer, if not scheduled before</span>
                                <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>, path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>);
                            }
                            <span class="keywordflow">else</span> {
                                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: RTX Timer already scheduled -&gt; no need to schedule it\n&quot;</span>;
                            }
                        }
                        <span class="keywordflow">if</span> (sendOneMorePacket) {
                            sendOneMorePacket = <span class="keyword">false</span>;
                            bytesToSend         = 0;
                            <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a>        = <span class="keyword">false</span>;
                        }


                        <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpMsg, path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>);
                        <a class="code" href="class_s_c_t_p_association.html#a5015c5c13fbe8608b1370a85fc06806f">pmDataIsSentOn</a>(path);
                        totalPacketsSent++;

                        <span class="comment">// ------ Reset status ------------------------------------</span>
                        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a71c1bdd09aeb8aca87c5ba84d591f6fa">sctpMsg</a> == sctpMsg)
                        {
                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a71c1bdd09aeb8aca87c5ba84d591f6fa">sctpMsg</a> = NULL;
                            path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> += packetBytes;
                            packetBytes = 0;
                        }
                        headerCreated    = <span class="keyword">false</span>;
                        chunksAdded      = 0;
                        dataChunksAdded = 0;
                        firstTime        = <span class="keyword">false</span>;

                        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: sending Packet to path &quot;</span> &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                                  &lt;&lt; <span class="stringliteral">&quot;  scount=&quot;</span> &lt;&lt; scount
                                  &lt;&lt; <span class="stringliteral">&quot;  tcount=&quot;</span> &lt;&lt; tcount
                                  &lt;&lt; <span class="stringliteral">&quot;  bytesToSend=&quot;</span> &lt;&lt; bytesToSend &lt;&lt; endl;
                    }
                }
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: still &quot;</span> &lt;&lt; bytesToSend
                          &lt;&lt; <span class="stringliteral">&quot; bytes to send, headerCreated=&quot;</span> &lt;&lt; headerCreated &lt;&lt; endl;

            }    <span class="comment">// if (bytesToSend &gt; 0 || bytes.chunk || bytes.packet)</span>
            <span class="keywordflow">else</span> {
                packetFull = <span class="keyword">true</span>;  <span class="comment">// Leave inner while loop</span>
                <span class="keyword">delete</span> sctpMsg;     <span class="comment">// T.D. 19.01.2010: Free unsent message</span>
            }

            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;packetFull=&quot;</span> &lt;&lt; packetFull &lt;&lt; endl;
        }    <span class="comment">// while(!packetFull)</span>

        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;bytesToSend=&quot;</span>    &lt;&lt; bytesToSend
                  &lt;&lt; <span class="stringliteral">&quot; bytes.chunk=&quot;</span>     &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a>
                  &lt;&lt; <span class="stringliteral">&quot; bytes.packet=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a> &lt;&lt; endl;
        <span class="keywordflow">if</span> (!(bytesToSend &gt; 0 || <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#ab425e5329336abe61caa3ddf403e4614">chunk</a> || <a class="code" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">bytes</a>.<a class="code" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html#a5e8a1e92f56f48f0242cf42736fdd2b3">packet</a>)) {
            sendingAllowed = <span class="keyword">false</span>;
        }
    }    <span class="comment">// while(sendingAllowed)</span>

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;sendAll: nothing more to send... BYE!\n&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8ceae356355ca537907cabf469c813af"></a><!-- doxytag: member="SCTPAssociation::sendSack" ref="a8ceae356355ca537907cabf469c813af" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendSack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, and <a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp()</a>.</p>
<div class="fragment"><pre class="fragment">{
    SCTPSackChunk*               sackChunk;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Sending SACK&quot;</span> &lt;&lt; endl;

    <span class="comment">/* sack timer has expired, reset flag, and send SACK */</span>
    <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>);
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acd712e40d2abba82caa4acb46a16fc8b">ackState</a> = 0;
    sackChunk = <a class="code" href="class_s_c_t_p_association.html#a0054d12cb552f7417b97c7e671231905">createSack</a>();

    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>* sctpmsg = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    sctpmsg-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);
    sctpmsg-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(sackChunk);

    <span class="comment">// Return the SACK to the address where we last got a data chunk from</span>
    <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpmsg, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a9f057ad775e7e3187bc6f522820b0ac2">lastDataSourceAddress</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a76fce22241a52542859d1dcddac4651a"></a><!-- doxytag: member="SCTPAssociation::sendShutdown" ref="a76fce22241a52542859d1dcddac4651a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendShutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a6c53aeb97e7132e5f09869f886e5807e">process_CLOSE()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a> *msg = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    msg-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;SCTPAssociationUtil:sendShutdown localPort=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>&lt;&lt;<span class="stringliteral">&quot;     remotePort=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    msg-&gt;setSrcPort(<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>);
    msg-&gt;setDestPort(remotePort);
    SCTPShutdownChunk* shutdownChunk = <span class="keyword">new</span> SCTPShutdownChunk(<span class="stringliteral">&quot;SHUTDOWN&quot;</span>);
    shutdownChunk-&gt;setChunkType(<a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a7690b021f467450541d8d89123429d40">SHUTDOWN</a>);
    <span class="comment">//shutdownChunk-&gt;setCumTsnAck(state-&gt;lastTsnAck);</span>
    shutdownChunk-&gt;setCumTsnAck(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>);
    shutdownChunk-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a096ad48a9dc5dcbd73658c5cadbf3636">SCTP_SHUTDOWN_CHUNK_LENGTH</a>*8);
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a> = <a class="code" href="_s_c_t_p_association_8h.html#ad0253f70ce80e86b5da3240da37f4334">SCTP_TIMEOUT_INIT_REXMIT</a>;
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4b4a00ea47be687ea159b82507339cdb">initRetransCounter</a> = 0;
    <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>);
    <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>,<a class="code" href="_s_c_t_p_association_8h.html#a45e10ab1204a49d216a4c2f4a8826848">SHUTDOWN_GUARD_TIMEOUT</a>);
    <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>);
    <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>,<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a>);
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab71f05d4300e0fd95bd5e371c3615979">shutdownChunk</a>=check_and_cast&lt;SCTPShutdownChunk*&gt;(shutdownChunk-&gt;dup());
    msg-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(shutdownChunk);
    <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(msg, <a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
    <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda861e58ca6562ffbfe4884eec2e704431">SCTP_E_NO_MORE_OUTSTANDING</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a588cedb27c104ca159fce93dfd53e4c7"></a><!-- doxytag: member="SCTPAssociation::sendShutdownAck" ref="a588cedb27c104ca159fce93dfd53e4c7" args="(const IPvXAddress &amp;dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendShutdownAck </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition()</a>, <a class="el" href="class_s_c_t_p_association.html#a6c53aeb97e7132e5f09869f886e5807e">process_CLOSE()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_association.html#ab0faa9ccd46630cfab7a2bc75fb1d52d">sendOnAllPaths</a>(<a class="code" href="class_s_c_t_p_association.html#abf49f9153557168b42e7b63eba81d849">getPath</a>(dest));
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a8270ebaccc92eb00ffae041a8406b094">getOutstandingBytes</a>() == 0) {
        <a class="code" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition</a>(<a class="code" href="_s_c_t_p_association_8h.html#a78805c92dea64dcc0102898a18b6a7dda861e58ca6562ffbfe4884eec2e704431">SCTP_E_NO_MORE_OUTSTANDING</a>);
        <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpshutdownack = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
        sctpshutdownack-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);

        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;SCTPAssociationUtil:sendShutdownACK&quot;</span> &lt;&lt; endl;

        sctpshutdownack-&gt;setSrcPort(<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>);
        sctpshutdownack-&gt;setDestPort(<a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>);
        SCTPShutdownAckChunk* shutdownAckChunk=<span class="keyword">new</span> SCTPShutdownAckChunk(<span class="stringliteral">&quot;SHUTDOWN_ACK&quot;</span>);
        shutdownAckChunk-&gt;setChunkType(<a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a7f11b152058ba8f4656266d735a50c4b">SHUTDOWN_ACK</a>);
        shutdownAckChunk-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#aee9e5129c64e3a5dfbda76dd06c62a23">SCTP_COOKIE_ACK_LENGTH</a>*8);
        sctpshutdownack-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(shutdownAckChunk);
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a> = <a class="code" href="_s_c_t_p_association_8h.html#ad0253f70ce80e86b5da3240da37f4334">SCTP_TIMEOUT_INIT_REXMIT</a>;
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4b4a00ea47be687ea159b82507339cdb">initRetransCounter</a> = 0;
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>);
        <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">T2_ShutdownTimer</a>,<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a7a94234b046495e7c2e4d60df00b74c4">initRexmitTimeout</a>);
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>);
        <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">T5_ShutdownGuardTimer</a>,<a class="code" href="_s_c_t_p_association_8h.html#a45e10ab1204a49d216a4c2f4a8826848">SHUTDOWN_GUARD_TIMEOUT</a>);
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4c69e50746d1c61b284521df08bfeeff">shutdownAckChunk</a>=check_and_cast&lt;SCTPShutdownAckChunk*&gt;(shutdownAckChunk-&gt;dup());
        <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpshutdownack, dest);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a30c6da407b37844471cbd5c69918ae52"></a><!-- doxytag: member="SCTPAssociation::sendShutdownComplete" ref="a30c6da407b37844471cbd5c69918ae52" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendShutdownComplete </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a> *sctpshutdowncomplete = <span class="keyword">new</span> <a class="code" href="class_s_c_t_p_message.html">SCTPMessage</a>();
    sctpshutdowncomplete-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#a5cd94d6b80cfc4869b11f345c9de4d93">SCTP_COMMON_HEADER</a>*8);

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;SCTPAssociationUtil:sendShutdownComplete\n&quot;</span>;

    sctpshutdowncomplete-&gt;setSrcPort(<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>);
    sctpshutdowncomplete-&gt;setDestPort(<a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>);
    SCTPShutdownCompleteChunk* shutdownCompleteChunk=<span class="keyword">new</span> SCTPShutdownCompleteChunk(<span class="stringliteral">&quot;SHUTDOWN_COMPLETE&quot;</span>);
    shutdownCompleteChunk-&gt;setChunkType(<a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a1ac9ae29771c5095efe16ce822d561d7">SHUTDOWN_COMPLETE</a>);
    shutdownCompleteChunk-&gt;setTBit(0);
    shutdownCompleteChunk-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#ad1963dfab19884e93c14d1527c1e0535">SCTP_SHUTDOWN_ACK_LENGTH</a>*8);
    sctpshutdowncomplete-&gt;<a class="code" href="class_s_c_t_p_message.html#a46c6cc49994da66b04d2ab9eadc564b7">addChunk</a>(shutdownCompleteChunk);
    <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpshutdowncomplete);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a35a8d95a64b2977c79bf24b1353c0c8e"></a><!-- doxytag: member="SCTPAssociation::sendToApp" ref="a35a8d95a64b2977c79bf24b1353c0c8e" args="(cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendToApp </td>
          <td>(</td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: sends packet to application </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aee07b10bc3e9c1999e15c025d5e7db5f">pathStatusIndication()</a>, <a class="el" href="class_s_c_t_p_association.html#aa60a2e245739ecf7a4085a3e240a3730">process_STATUS()</a>, <a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp()</a>, and <a class="el" href="class_s_c_t_p_association.html#a155c31414d0e2115eccd2fbb0a966dab">sendDataArrivedNotification()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;send(msg, <span class="stringliteral">&quot;to_appl&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#aba709e2f773752366d1c291c4fb360c8">appGateIndex</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afa42a76b3cc9ac339b1657e48972b2b2"></a><!-- doxytag: member="SCTPAssociation::sendToIP" ref="afa42a76b3cc9ac339b1657e48972b2b2" args="(SCTPMessage *sctpmsg, const IPvXAddress &amp;dest, const bool qs=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendToIP </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *&#160;</td>
          <td class="paramname"><em>sctpmsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>qs</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: adds control info to message and sends it to <a class="el" href="class_i_p.html">IP</a> </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ae9ffc855fcb6cfd50fb34a03beaa2d39">retransmitCookieEcho()</a>, <a class="el" href="class_s_c_t_p_association.html#aec407e9c2c1b4d0c604d8d65e78706e8">retransmitInit()</a>, <a class="el" href="class_s_c_t_p_association.html#aa28d6c19ab622ed5564596c7f300aea4">retransmitShutdown()</a>, <a class="el" href="class_s_c_t_p_association.html#a0c70dd4b41af917ecbaebd2850a808e0">retransmitShutdownAck()</a>, <a class="el" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort()</a>, <a class="el" href="class_s_c_t_p_association.html#ad277c3986a8173ffe41289f72765ceba">sendCookieAck()</a>, <a class="el" href="class_s_c_t_p_association.html#a3ef5a4494cd7b59c44f44d6ed385e9de">sendCookieEcho()</a>, <a class="el" href="class_s_c_t_p_association.html#afc5f06d167b937c0d1267047960bc354">sendHeartbeat()</a>, <a class="el" href="class_s_c_t_p_association.html#a4693aa8d9ce24d9bf798cb7feefd1085">sendHeartbeatAck()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>, <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>, <a class="el" href="class_s_c_t_p_association.html#a8ceae356355ca537907cabf469c813af">sendSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown()</a>, <a class="el" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck()</a>, and <a class="el" href="class_s_c_t_p_association.html#a30c6da407b37844471cbd5c69918ae52">sendShutdownComplete()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Final touches on the segment before sending</span>
    sctpmsg-&gt;setSrcPort(<a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>);
    sctpmsg-&gt;setDestPort(<a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>);
    sctpmsg-&gt;setChecksumOk(<span class="keyword">true</span>);
    <span class="keyword">const</span> SCTPChunk* <a class="code" href="structchunk.html">chunk</a> = (<span class="keyword">const</span> SCTPChunk*)(sctpmsg-&gt;<a class="code" href="class_s_c_t_p_message.html#adad5aaf65a07de9798d70b7c5f5d00e6">peekFirstChunk</a>());
    <span class="keywordflow">if</span> (chunk-&gt;getChunkType() == <a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a781ad2788df9e25c59a70894c7832096">ABORT</a>) {
        <span class="keyword">const</span> SCTPAbortChunk* abortChunk = check_and_cast&lt;<span class="keyword">const</span> SCTPAbortChunk *&gt;(chunk);
        <span class="keywordflow">if</span> (abortChunk-&gt;getT_Bit() == 1) {
            sctpmsg-&gt;setTag(<a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>);
        }
        <span class="keywordflow">else</span> {
            sctpmsg-&gt;setTag(<a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>);
        }
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sctpmsg-&gt;getTag() == 0) {
        sctpmsg-&gt;setTag(<a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>);
    }

    <span class="keywordflow">if</span> ((<span class="keywordtype">bool</span>)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;udpEncapsEnabled&quot;</span>)) {
        sctpmsg-&gt;setKind(UDP_C_DATA);
        UDPControlInfo* controlInfo = <span class="keyword">new</span> UDPControlInfo();
        controlInfo-&gt;setSrcPort(9899);
        controlInfo-&gt;setDestAddr(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>.<a class="code" href="class_i_pv_x_address.html#a00acd2be0fc0f254afb2eb7540a4ea6e">get4</a>());
        controlInfo-&gt;setDestPort(9899);
        sctpmsg-&gt;setControlInfo(controlInfo);
    }
    <span class="keywordflow">else</span> {
        <span class="keywordflow">if</span> (dest.<a class="code" href="class_i_pv_x_address.html#a43ef7d0a976817991cfd41d09435225d">isIPv6</a>()) {
            <a class="code" href="class_i_pv6_control_info.html">IPv6ControlInfo</a>* controlInfo = <span class="keyword">new</span> <a class="code" href="class_i_pv6_control_info.html">IPv6ControlInfo</a>();
            controlInfo-&gt;setProtocol(<a class="code" href="_i_p_serializer_8cc.html#a6ef95db1429c11d64f48e6f984044589">IP_PROT_SCTP</a>);
            controlInfo-&gt;setSrcAddr(<a class="code" href="class_i_pv6_address.html">IPv6Address</a>());
            controlInfo-&gt;setDestAddr(dest.<a class="code" href="class_i_pv_x_address.html#a733678e1e28f88c954cfce854af576c6">get6</a>());
            sctpmsg-&gt;setControlInfo(controlInfo);
            <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;send(sctpmsg, <span class="stringliteral">&quot;to_ipv6&quot;</span>);
        }
        <span class="keywordflow">else</span> {
            <a class="code" href="class_i_p_control_info.html">IPControlInfo</a>* controlInfo = <span class="keyword">new</span> <a class="code" href="class_i_p_control_info.html">IPControlInfo</a>();
            controlInfo-&gt;setProtocol(<a class="code" href="_i_p_serializer_8cc.html#a6ef95db1429c11d64f48e6f984044589">IP_PROT_SCTP</a>);
            controlInfo-&gt;setSrcAddr(<a class="code" href="class_i_p_address.html">IPAddress</a>(<span class="stringliteral">&quot;0.0.0.0&quot;</span>));
            controlInfo-&gt;setDestAddr(dest.<a class="code" href="class_i_pv_x_address.html#a00acd2be0fc0f254afb2eb7540a4ea6e">get4</a>());
            sctpmsg-&gt;setControlInfo(controlInfo);
            <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;send(sctpmsg, <span class="stringliteral">&quot;to_ip&quot;</span>);
        }
        <a class="code" href="class_s_c_t_p_association.html#a9db796beec52580f1356bd95e6f5fa2c">recordInPathVectors</a>(sctpmsg, dest);
    }
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Sent to &quot;</span> &lt;&lt; dest &lt;&lt; endl;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a97c8a5a61cce6ed20af47887e551ddaf"></a><!-- doxytag: member="SCTPAssociation::sendToIP" ref="a97c8a5a61cce6ed20af47887e551ddaf" args="(SCTPMessage *sctpmsg, const bool qs=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::sendToIP </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *&#160;</td>
          <td class="paramname"><em>sctpmsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>qs</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                                          {
            <a class="code" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP</a>(sctpmsg, <a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>, qs);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aed61141642771b6e3c6cc759f2e1f513"></a><!-- doxytag: member="SCTPAssociation::signalConnectionTimeout" ref="aed61141642771b6e3c6cc759f2e1f513" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::signalConnectionTimeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: signal to user that connection timed out </p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3ab114530461e728f84d5db50dd5670620">SCTP_I_TIMED_OUT</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a04381d198b1e78fb563d5e460c40c6a5"></a><!-- doxytag: member="SCTPAssociation::ssnGt" ref="a04381d198b1e78fb563d5e460c40c6a5" args="(const uint16 ssn1, const uint16 ssn2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int16 SCTPAssociation::ssnGt </td>
          <td>(</td>
          <td class="paramtype">const uint16&#160;</td>
          <td class="paramname"><em>ssn1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16&#160;</td>
          <td class="paramname"><em>ssn2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a45de5f3a74bba48af92b248edd9c9312">makeRoomForTsn()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> ((int16)(ssn1-ssn2)&gt;0); }
</pre></div>
</div>
</div>
<a class="anchor" id="aafb136543c6d4287ea773d3519593010"></a><!-- doxytag: member="SCTPAssociation::startTimer" ref="aafb136543c6d4287ea773d3519593010" args="(cMessage *timer, const simtime_t &amp;timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::startTimer </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const simtime_t &amp;&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a5015c5c13fbe8608b1370a85fc06806f">pmDataIsSentOn()</a>, <a class="el" href="class_s_c_t_p_association.html#ab385b4edb0ddac6e69aa350df14b480a">pmStartPathManagement()</a>, <a class="el" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#ac2468daebc456147e6568b99650165ca">process_TIMEOUT_HEARTBEAT_INTERVAL()</a>, <a class="el" href="class_s_c_t_p_association.html#ae94a9d41597adc5806db8c60f27ab45d">process_TIMEOUT_INIT_REXMIT()</a>, <a class="el" href="class_s_c_t_p_association.html#a6866e326d923a8915cdbb3d80802c527">process_TIMEOUT_SHUTDOWN()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#ad26d83ea266011e34ebfbc56f7ee1e75">scheduleSack()</a>, <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>, <a class="el" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown()</a>, <a class="el" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck()</a>, and <a class="el" href="class_s_c_t_p_association.html#ab70d01d19820a5a16547e439b142d5fe">tsnWasReneged()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;startTimer &quot;</span> &lt;&lt; timer-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; with timeout &quot;</span>
              &lt;&lt; timeout &lt;&lt; <span class="stringliteral">&quot; to expire at &quot;</span> &lt;&lt; simTime() + timeout &lt;&lt; endl;
    <a class="code" href="class_s_c_t_p_association.html#a9093fdb20d9c289d699376be9b3b80ba">scheduleTimeout</a>(timer, timeout);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1edd1c4ec96bec1f031f6b83550471bc"></a><!-- doxytag: member="SCTPAssociation::stateEntered" ref="a1edd1c4ec96bec1f031f6b83550471bc" args="(int32 state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::stateEntered </td>
          <td>(</td>
          <td class="paramtype">int32&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">switch</span> (<a class="code" href="class_s_c_t_p_association.html#a47d58d9bc82ddd0a073a7f8c7d321872">status</a>)
    {
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8af21d78f3ce1dc469572320cb1e192cc3">SCTP_S_COOKIE_WAIT</a>:
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>:
        {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;State ESTABLISHED entered&quot;</span> &lt;&lt; endl;
            <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(<a class="code" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">T1_InitTimer</a>);
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#af687fe1d41e0f02e4f393ce45a83dd19">initChunk</a>) {
                <span class="keyword">delete</span> <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#af687fe1d41e0f02e4f393ce45a83dd19">initChunk</a>;
            }
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5a4195a30b502699a6fd92ce5965f15c">nagleEnabled</a>                   = (bool)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;nagleEnabled&quot;</span>);
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a443c8e2a234674a5b8bb385831bf147f">enableHeartbeats</a>               = (bool)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;enableHeartbeats&quot;</span>);
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1e7737c5f6c7fa4c3faa782f0078a9b7">numGapReports</a>                  = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;numGapReports&quot;</span>);
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aa9fd5385ee9beba279f069309e9b0018">maxBurst</a>                       = (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;maxBurst&quot;</span>);
                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5cdefe133e1a8c71203aa26631ed09c7">header</a> = 0;
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#aba85e5f43e22032f2f883effbd7a8f92">swsLimit</a>                      = (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;swsLimit&quot;</span>);
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8e59e86d19565705ea4e9d0aadb9500d">fastRecoverySupported</a>         = (bool)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;fastRecoverySupported&quot;</span>);
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a96e740d1f0d386449c13853fadff56b1">reactivatePrimaryPath</a>         = (bool)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;reactivatePrimaryPath&quot;</span>);
            <a class="code" href="class_s_c_t_p_association.html#a29f900c7ca380c1671bb957109fc338b">sackPeriod</a>                           = (double)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;sackPeriod&quot;</span>);
            <a class="code" href="class_s_c_t_p_association.html#ac5b54b2f8fbba401964d30c71e25118f">sackFrequency</a>                        = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;sackFrequency&quot;</span>);
            <a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html">SCTP::AssocStat</a> stat;
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#af6d2b88d12009123a90976f56451a43f">assocId</a>                         = <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>;
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#adb6d3d3bab2e33cd79cf26363c7fe6fd">start</a>                           = simulation.getSimTime();
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a8350bc0756ad1c9d9c4b221e0f3cbde8">stop</a>                            = 0;
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a3d4a454aff95cc5338209a5b55539083">rcvdBytes</a>                       = 0;
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#acc55fd8a06afd95c5fd58930e5537cf2">ackedBytes</a>                      = 0;
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#ae2d4f4001028f1aa570bdb4c68818a8a">sentBytes</a>                       = 0;
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a456a49c0acd0315753b9900ab720f272">transmittedBytes</a>                = 0;
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a375a63659531c9124b90e7dfa527d34b">numFastRtx</a>                      = 0;
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a4106523ad51fd8ed0b51008b63333e0e">numT3Rtx</a>                        = 0;
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a241f15afb831c0c4750e59ed00e8a794">numDups</a>                         = 0;
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a9b881501500b50607d80c7e1420b70f4">numPathFailures</a>                 = 0;
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a347d3a84ee0bd7c151761d96140059dc">numForwardTsn</a>                   = 0;
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#a5fb723fc12d2858561865a432267244c">lifeTime</a>                        = 0;
            stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#aefab702936b7f133023cab351f1578ab">throughput</a>                      = 0;
            <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a43c9f3107b99f1c969a4d5ca9c168bd3">assocStatMap</a>[stat.<a class="code" href="struct_s_c_t_p_1_1_assoc_stat.html#af6d2b88d12009123a90976f56451a43f">assocId</a>] = stat;
            <a class="code" href="class_s_c_t_p_association.html#a3d6c3997389c261a61cc57543111973b">ccModule</a> = <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;ccModule&quot;</span>);
            <span class="keywordflow">switch</span> (<a class="code" href="class_s_c_t_p_association.html#a3d6c3997389c261a61cc57543111973b">ccModule</a>)
            {
                <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#ad9a9cbc92cb49e36c2bd8f1de35aa477aa38b2d1ce0f55ed0b36414423acf41b1">RFC4960</a>:
                {
                    <a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#a0335ace73784010424c405e6399d2682">ccInitParams</a>                 = &amp;<a class="code" href="class_s_c_t_p_association.html#a27ab7a3f0d7e82a5b48f47e39e53dd23">SCTPAssociation::initCCParameters</a>;
                    <a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#a96e83612de4220f4ae94288f12321664">ccUpdateAfterSack</a>            = &amp;<a class="code" href="class_s_c_t_p_association.html#ade798497e9cb468bf8f4759e9b8e9840">SCTPAssociation::cwndUpdateAfterSack</a>;
                    <a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#adb4779550ec7802f1087a2bcc82fc13a">ccUpdateAfterCwndTimeout</a>     = &amp;<a class="code" href="class_s_c_t_p_association.html#a9a5de305f7873c84ef644dce513964cd">SCTPAssociation::cwndUpdateAfterCwndTimeout</a>;
                    <a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#a295dbbfc4f7566e89d9b93a11d82d26e">ccUpdateAfterRtxTimeout</a>      = &amp;<a class="code" href="class_s_c_t_p_association.html#a53665e3333a5e7b2aae79a65b9a1482b">SCTPAssociation::cwndUpdateAfterRtxTimeout</a>;
                    <a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#a85af39d34f5ec41337ccc16a4232fbe6">ccUpdateMaxBurst</a>             = &amp;<a class="code" href="class_s_c_t_p_association.html#af5c86c86388313edeeff8434266a85cd">SCTPAssociation::cwndUpdateMaxBurst</a>;
                    <a class="code" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">ccFunctions</a>.<a class="code" href="struct_s_c_t_p_association_1_1congestion_control_functions.html#ad8f61b32a24107ce516331725cfe443d">ccUpdateBytesAcked</a>           = &amp;<a class="code" href="class_s_c_t_p_association.html#a356510e0d2cfb8c6770c72f29634cb93">SCTPAssociation::cwndUpdateBytesAcked</a>;
                    <span class="keywordflow">break</span>;
                }
            }
            <a class="code" href="class_s_c_t_p_association.html#ab385b4edb0ddac6e69aa350df14b480a">pmStartPathManagement</a>();
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4a45a11cb5d50f9d7cb1799fa105dedb">sendQueueLimit</a> = (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;sendQueueLimit&quot;</span>);
            <a class="code" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp</a>();
            <span class="keywordtype">char</span> str[128];
            snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;Cumulated TSN Ack of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
            <a class="code" href="class_s_c_t_p_association.html#a904881907985d7c23d7dc3cf630834aa">cumTsnAck</a> = <span class="keyword">new</span> cOutVector(str);
            snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;Number of Gap Blocks in Last SACK of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
            <a class="code" href="class_s_c_t_p_association.html#a136b47892a6e405c494f055dc50eaec6">numGapBlocks</a> = <span class="keyword">new</span> cOutVector(str);
            snprintf(str, <span class="keyword">sizeof</span>(str), <span class="stringliteral">&quot;SendQueue of Association %d&quot;</span>, <a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>);
            <a class="code" href="class_s_c_t_p_association.html#a1f249bde274ec0e4949023a2a3a3e4e7">sendQueue</a> = <span class="keyword">new</span> cOutVector(str);
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a4a45a11cb5d50f9d7cb1799fa105dedb">sendQueueLimit</a> = (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;sendQueueLimit&quot;</span>);
            <a class="code" href="struct_s_c_t_p_1_1_v_tag_pair.html">SCTP::VTagPair</a> vtagPair;
            vtagPair.<a class="code" href="struct_s_c_t_p_1_1_v_tag_pair.html#a136cc70e0344af9a4f0388b1ffeb9e12">peerVTag</a>     = <a class="code" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">peerVTag</a>;
            vtagPair.<a class="code" href="struct_s_c_t_p_1_1_v_tag_pair.html#a67fc2778b273030c911b9fc683d3510c">localVTag</a>  = <a class="code" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">localVTag</a>;
            vtagPair.<a class="code" href="struct_s_c_t_p_1_1_v_tag_pair.html#a9b3b16f4dfff829a87b3e698fa5e21ed">localPort</a>  = <a class="code" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">localPort</a>;
            vtagPair.<a class="code" href="struct_s_c_t_p_1_1_v_tag_pair.html#a84ab11845673e58189b16c6053b9d24a">remotePort</a> = <a class="code" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">remotePort</a>;
            <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#ad27c44853f019878d8c9be020c56f8d9">sctpVTagMap</a>[<a class="code" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">assocId</a>] = vtagPair;
            <span class="keywordflow">break</span>;
        }
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>:
        {
            <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3ace58e516838fe8c15ac9ce67f4f4409c">SCTP_I_CLOSED</a>);
            <span class="keywordflow">break</span>;
        }
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a606ae3dac26b5e28d7f5060705e273c6">SCTP_S_SHUTDOWN_PENDING</a>:
        {
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a8270ebaccc92eb00ffae041a8406b094">getOutstandingBytes</a>()==0 &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af665b72b717ec39ba1a01364769e2db0">getQueueSize</a>()==0 &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a>==0)
                <a class="code" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown</a>();
            <span class="keywordflow">break</span>;
        }
        <span class="keywordflow">case</span> <a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>:
        {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Entered state SHUTDOWN_RECEIVED, osb=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a8270ebaccc92eb00ffae041a8406b094">getOutstandingBytes</a>()
                      &lt;&lt; <span class="stringliteral">&quot;, transQ=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af665b72b717ec39ba1a01364769e2db0">getQueueSize</a>()
                      &lt;&lt; <span class="stringliteral">&quot;, scount=&quot;</span> &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a> &lt;&lt; endl;
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a8270ebaccc92eb00ffae041a8406b094">getOutstandingBytes</a>()==0 &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af665b72b717ec39ba1a01364769e2db0">getQueueSize</a>()==0 &amp;&amp; <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a>==0) {
                <a class="code" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck</a>(<a class="code" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">remoteAddr</a>);
            }
            <span class="keywordflow">else</span> {
                <a class="code" href="class_s_c_t_p_association.html#ab0faa9ccd46630cfab7a2bc75fb1d52d">sendOnAllPaths</a>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#afaefe95090e09d43d24794cf47a1ec0c">getPrimaryPath</a>());
            }
            <span class="keywordflow">break</span>;
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2ef7cd11f293a67b65d0c9cf0eee90a2"></a><!-- doxytag: member="SCTPAssociation::stateName" ref="a2ef7cd11f293a67b65d0c9cf0eee90a2" args="(const int32 state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * SCTPAssociation::stateName </td>
          <td>(</td>
          <td class="paramtype">const int32&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: returns name of SCTP_S_xxx constants </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition()</a>, <a class="el" href="class_s_c_t_p_association.html#a372875420182ac696a9cf72971ab5eab">printConnBrief()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#aa60a2e245739ecf7a4085a3e240a3730">process_STATUS()</a>, <a class="el" href="class_s_c_t_p_association.html#ae94a9d41597adc5806db8c60f27ab45d">process_TIMEOUT_INIT_REXMIT()</a>, and <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#define CASE(x) case x: s=#x+7; break</span>
<span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* s = <span class="stringliteral">&quot;unknown&quot;</span>;
    <span class="keywordflow">switch</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>) {
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a7fefd7c6e51ba43b6c9d834b372da21e">SCTP_S_CLOSED</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8af21d78f3ce1dc469572320cb1e192cc3">SCTP_S_COOKIE_WAIT</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a71d88e86b49412eed493b7307f064944">SCTP_S_COOKIE_ECHOED</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8ae173fa0c2b8fc03ea459ade55b5d669a">SCTP_S_ESTABLISHED</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a606ae3dac26b5e28d7f5060705e273c6">SCTP_S_SHUTDOWN_PENDING</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8a0ec4d7400f71ce88a8bbce0e66c97f55">SCTP_S_SHUTDOWN_SENT</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8aa6449dfb17a17605bdd3aea435d53159">SCTP_S_SHUTDOWN_RECEIVED</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_s_c_t_p_association_8h.html#a2b3e573af74940c5a6c008b1cd0e3be8afed5af0cf4b3fce20325548b0b75961f">SCTP_S_SHUTDOWN_ACK_SENT</a>);
    }
    <span class="keywordflow">return</span> s;
<span class="preprocessor">#undef CASE</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a5929aa6d346d39510a8826dfce06169a"></a><!-- doxytag: member="SCTPAssociation::stopTimer" ref="a5929aa6d346d39510a8826dfce06169a" args="(cMessage *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::stopTimer </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aded774353d79ba7bdf53651ddc178609">moveChunkToOtherPath()</a>, <a class="el" href="class_s_c_t_p_association.html#a5015c5c13fbe8608b1370a85fc06806f">pmDataIsSentOn()</a>, <a class="el" href="class_s_c_t_p_association.html#ab385b4edb0ddac6e69aa350df14b480a">pmStartPathManagement()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#ac2468daebc456147e6568b99650165ca">process_TIMEOUT_HEARTBEAT_INTERVAL()</a>, <a class="el" href="class_s_c_t_p_association.html#a6d4b0efb4884a96e406c42797456d241">processCookieAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a1f4d814724e79e184655050a48ee1c25">processHeartbeatAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, <a class="el" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">SCTP::removeAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a48840034dca5052abf481f6a5753f923">removePath()</a>, <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>, <a class="el" href="class_s_c_t_p_association.html#a8ceae356355ca537907cabf469c813af">sendSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown()</a>, <a class="el" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1e5b14c2f164752dcf7b6a16f654be9d">stopTimers()</a>.</p>
<div class="fragment"><pre class="fragment">{

    ev &lt;&lt; <span class="stringliteral">&quot;stopTimer &quot;</span> &lt;&lt; timer-&gt;getName() &lt;&lt; endl;
    <span class="keywordflow">if</span> (timer-&gt;isScheduled()) {
        <a class="code" href="class_s_c_t_p_association.html#a0ff3903cc411815054282811157db2ba">cancelEvent</a>(timer);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1e5b14c2f164752dcf7b6a16f654be9d"></a><!-- doxytag: member="SCTPAssociation::stopTimers" ref="a1e5b14c2f164752dcf7b6a16f654be9d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::stopTimers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (SCTPPathMap::iterator j = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin(); j != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); j++) {
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(j-&gt;second-&gt;HeartbeatTimer);
        <a class="code" href="class_s_c_t_p_association.html#a5929aa6d346d39510a8826dfce06169a">stopTimer</a>(j-&gt;second-&gt;HeartbeatIntervalTimer);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3f5a43f961e2cc691da4546762e28498"></a><!-- doxytag: member="SCTPAssociation::storePacket" ref="a3f5a43f961e2cc691da4546762e28498" args="(SCTPPathVariables *pathVar, SCTPMessage *sctpMsg, const uint16 chunksAdded, const uint16 dataChunksAdded, const uint32 packetBytes, const bool authAdded)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::storePacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>pathVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_message.html">SCTPMessage</a> *&#160;</td>
          <td class="paramname"><em>sctpMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16&#160;</td>
          <td class="paramname"><em>chunksAdded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16&#160;</td>
          <td class="paramname"><em>dataChunksAdded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>packetBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>authAdded</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (uint16 i = 0; i &lt; sctpMsg-&gt;<a class="code" href="class_s_c_t_p_message.html#a6f20de2280586794996c56c77bf5c479">getChunksArraySize</a>(); i++) {
        <a class="code" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">retransmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.find(((SCTPDataChunk*)sctpMsg-&gt;<a class="code" href="class_s_c_t_p_message.html#a3fee5bba66df88a7771c3b5984f33008">getChunks</a>(i))-&gt;getTsn())-&gt;second-&gt;countsAsOutstanding = <span class="keyword">false</span>;
    }
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a71c1bdd09aeb8aca87c5ba84d591f6fa">sctpMsg</a>            = sctpMsg;
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab43a9559edb781b07cff616804a628db">chunksAdded</a>    = chunksAdded;
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a057e2c2320dafa606c1f092a9fb66db9">dataChunksAdded</a> = dataChunksAdded;
    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a74a0620b592f25bb21ee68452dbb8740">packetBytes</a>    = packetBytes;
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;storePacket: path=&quot;</span> &lt;&lt; pathVar-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
              &lt;&lt; <span class="stringliteral">&quot; osb=&quot;</span> &lt;&lt; pathVar-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span>
              &lt;&lt; pathVar-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> - <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a74a0620b592f25bb21ee68452dbb8740">packetBytes</a> &lt;&lt; endl;
    assert(pathVar-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> &gt;= <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a74a0620b592f25bb21ee68452dbb8740">packetBytes</a>);
    pathVar-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a39d7029c5e70ee8e6ff6c169aaa7a240">outstandingBytes</a> -= <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a74a0620b592f25bb21ee68452dbb8740">packetBytes</a>;
        <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac6621d7d6e88ca8e038fe040adcc5beb">roomSumSendStreams</a> += <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a74a0620b592f25bb21ee68452dbb8740">packetBytes</a> + (dataChunksAdded * <a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
    <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#aab189302bf40c67f2eec631bcd7de51f">bookedSumSendStreams</a> += <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a74a0620b592f25bb21ee68452dbb8740">packetBytes</a>;

}
</pre></div>
</div>
</div>
<a class="anchor" id="af82770db14bde55545184d74ffc6ea75"></a><!-- doxytag: member="SCTPAssociation::streamScheduler" ref="af82770db14bde55545184d74ffc6ea75" args="(bool peek)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 SCTPAssociation::streamScheduler </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>peek</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Dealing with streams </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>.</p>
<div class="fragment"><pre class="fragment">{
    int32 sid, testsid;

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;Stream Scheduler: RoundRobin\n&quot;</span>;

    sid = -1;

    <span class="keywordflow">if</span> ((<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a2a6f74cc6f2e07c6ee47797c6bc5191f">ssLastDataChunkSizeSet</a> == <span class="keyword">false</span> || <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab39baf50604e4bd23b5a8632aca3bd97">ssNextStream</a> == <span class="keyword">false</span>) &amp;&amp;
         (<a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.find(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a65115dee13a7bb06bf17e24ac33ff4c4">lastStreamScheduled</a>)-&gt;second-&gt;getUnorderedStreamQ()-&gt;length() &gt; 0 ||
         <a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.find(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a65115dee13a7bb06bf17e24ac33ff4c4">lastStreamScheduled</a>)-&gt;second-&gt;getStreamQ()-&gt;length() &gt; 0))
    {
        sid = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a65115dee13a7bb06bf17e24ac33ff4c4">lastStreamScheduled</a>;
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;Stream Scheduler: again sid &quot;</span> &lt;&lt; sid &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab39baf50604e4bd23b5a8632aca3bd97">ssNextStream</a> = <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
    {
        testsid = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a65115dee13a7bb06bf17e24ac33ff4c4">lastStreamScheduled</a>;

        <span class="keywordflow">do</span> {
            testsid = (testsid + 1) % <a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a>;

            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.find(testsid)-&gt;second-&gt;getUnorderedStreamQ()-&gt;length() &gt; 0 ||
                <a class="code" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">sendStreams</a>.find(testsid)-&gt;second-&gt;getStreamQ()-&gt;length() &gt; 0)
            {
                sid = testsid;
                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;Stream Scheduler: chose sid &quot;</span> &lt;&lt; sid &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;

                <span class="keywordflow">if</span> (!peek)
                    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a65115dee13a7bb06bf17e24ac33ff4c4">lastStreamScheduled</a> = sid;
            }
        } <span class="keywordflow">while</span> (sid == -1 &amp;&amp; testsid != (int32) <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a65115dee13a7bb06bf17e24ac33ff4c4">lastStreamScheduled</a>);

    }

    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;streamScheduler sid=&quot;</span>&lt;&lt;sid&lt;&lt;<span class="stringliteral">&quot; lastStream=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a65115dee13a7bb06bf17e24ac33ff4c4">lastStreamScheduled</a>&lt;&lt;<span class="stringliteral">&quot; outboundStreams=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">outboundStreams</a>&lt;&lt;<span class="stringliteral">&quot; next=&quot;</span>&lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ab39baf50604e4bd23b5a8632aca3bd97">ssNextStream</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a2a6f74cc6f2e07c6ee47797c6bc5191f">ssLastDataChunkSizeSet</a> = <span class="keyword">false</span>;

    <span class="keywordflow">return</span> sid;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3525db7c8ed37b6e45ae4a65e9af8968"></a><!-- doxytag: member="SCTPAssociation::timeForSack" ref="a3525db7c8ed37b6e45ae4a65e9af8968" args="(bool &amp;sackOnly, bool &amp;sackWithData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::timeForSack </td>
          <td>(</td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>sackOnly</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>sackWithData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    sackOnly = sackWithData = <span class="keyword">false</span>;
        <span class="keywordflow">if</span> (((<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a> &gt; 0) || (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a04e8711ebb60bf950f99a98e6eb5cbc9">dupList</a>.size() &gt; 0)) &amp;&amp;
             (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ae92fceb56eefd5079a1c5e103d8448a7">sackAllowed</a>)) {
        <span class="comment">// Schedule sending of SACKs at once, when we have fragments to report</span>
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acd712e40d2abba82caa4acb46a16fc8b">ackState</a> = <a class="code" href="class_s_c_t_p_association.html#ac5b54b2f8fbba401964d30c71e25118f">sackFrequency</a>;
        sackOnly = sackWithData = <span class="keyword">true</span>;  <span class="comment">// SACK necessary, regardless of data available</span>
    }
    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#acd712e40d2abba82caa4acb46a16fc8b">ackState</a> &gt;= <a class="code" href="class_s_c_t_p_association.html#ac5b54b2f8fbba401964d30c71e25118f">sackFrequency</a>) {
        sackOnly = sackWithData = <span class="keyword">true</span>;  <span class="comment">// SACK necessary, regardless of data available</span>
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SackTimer</a>-&gt;isScheduled()) {
        sackOnly         = <span class="keyword">false</span>;
        sackWithData = <span class="keyword">true</span>;      <span class="comment">// Only send SACK when data is present.</span>
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a30445facc61cdf6ef4362b02a244eb2c"></a><!-- doxytag: member="SCTPAssociation::transformDataChunk" ref="a30445facc61cdf6ef4362b02a244eb2c" args="(SCTPDataVariables *chunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SCTPDataChunk * SCTPAssociation::transformDataChunk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td>
          <td class="paramname"><em>chunk</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Manipulating chunks </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    SCTPDataChunk*       dataChunk = <span class="keyword">new</span> SCTPDataChunk(<span class="stringliteral">&quot;DATA&quot;</span>);
    SCTPSimpleMessage* msg        = check_and_cast&lt;SCTPSimpleMessage*&gt;(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aaafb0500520fdd9936987be73f6a27ae">userData</a>-&gt;dup());
    dataChunk-&gt;setChunkType(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea9d7d6f31868d66330397c967c4afd2d2">DATA</a>);
    dataChunk-&gt;setBBit(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a686aefff3b5cfc16ce1bfb7ed19d63de">bbit</a>);
    dataChunk-&gt;setEBit(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad6905d87d02a21b9716f87c002d8297b">ebit</a>);
    <span class="keywordflow">if</span> (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a8a53863ea46d99a486027459aed60c49">ordered</a>) {
        dataChunk-&gt;setUBit(0);
    }
    <span class="keywordflow">else</span> {
        dataChunk-&gt;setUBit(1);
    }
    dataChunk-&gt;setTsn(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>);
    dataChunk-&gt;setSid(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aa3c89c48c0c3ab5cc9b73d7ff525f67e">sid</a>);
    dataChunk-&gt;setSsn(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a518f7b638f4184fc01c4bdd20d641601">ssn</a>);
    dataChunk-&gt;setPpid(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a960213e567faeed87d9ce98e993177a4">ppid</a>);
    dataChunk-&gt;setEnqueuingTime(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#aa381bd2154d7b6846ae8fe7694b96a27">enqueuingTime</a>);
    dataChunk-&gt;setBitLength(<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>*8);
    msg-&gt;setBitLength(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>);
    dataChunk-&gt;encapsulate(msg);
    <span class="keywordflow">return</span> dataChunk;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5d5d64e51be4d13ccb13286b5a6ab7a4"></a><!-- doxytag: member="SCTPAssociation::tsnBetween" ref="a5d5d64e51be4d13ccb13286b5a6ab7a4" args="(const uint32 tsn1, const uint32 midtsn, const uint32 tsn2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32 SCTPAssociation::tsnBetween </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>midtsn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a6d86b97308eef3f43f93ca939a3d1a52">removeFromGapList()</a>, <a class="el" href="class_s_c_t_p_association.html#a41c4711e6ff504c121e879d6295d33f9">tsnIsDuplicate()</a>, and <a class="el" href="class_s_c_t_p_association.html#a99fbda3fe957b452899203d4e0f151a0">updateGapList()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> ((tsn2-tsn1)&gt;=(midtsn-tsn1)); }
</pre></div>
</div>
</div>
<a class="anchor" id="a7bb25b61e8c968e460210fd7794037b3"></a><!-- doxytag: member="SCTPAssociation::tsnGe" ref="a7bb25b61e8c968e460210fd7794037b3" args="(const uint32 tsn1, const uint32 tsn2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32 SCTPAssociation::tsnGe </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a0054d12cb552f7417b97c7e671231905">createSack()</a>, and <a class="el" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> ((int32)(tsn1-tsn2)&gt;=0); }
</pre></div>
</div>
</div>
<a class="anchor" id="a2aee269f079e6749ddc839137c157043"></a><!-- doxytag: member="SCTPAssociation::tsnGt" ref="a2aee269f079e6749ddc839137c157043" args="(const uint32 tsn1, const uint32 tsn2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32 SCTPAssociation::tsnGt </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a0054d12cb552f7417b97c7e671231905">createSack()</a>, <a class="el" href="class_s_c_t_p_association.html#ade798497e9cb468bf8f4759e9b8e9840">cwndUpdateAfterSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a7235e0a24b1d8a8cc70eedda6adb081f">updateFastRecoveryStatus()</a>, and <a class="el" href="class_s_c_t_p_association.html#a99fbda3fe957b452899203d4e0f151a0">updateGapList()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> ((int32)(tsn1-tsn2)&gt;0); }
</pre></div>
</div>
</div>
<a class="anchor" id="a41c4711e6ff504c121e879d6295d33f9"></a><!-- doxytag: member="SCTPAssociation::tsnIsDuplicate" ref="a41c4711e6ff504c121e879d6295d33f9" args="(const uint32 tsn) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::tsnIsDuplicate </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn</em></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Methods dealing with the handling of TSNs </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (std::list&lt;uint32&gt;::const_iterator iterator = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a04e8711ebb60bf950f99a98e6eb5cbc9">dupList</a>.begin();
          iterator != <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a04e8711ebb60bf950f99a98e6eb5cbc9">dupList</a>.end(); iterator++)
    {
        <span class="keywordflow">if</span> ((*iterator) == tsn)
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">for</span> (uint32 i=0; i &lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>; i++) {
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a5d5d64e51be4d13ccb13286b5a6ab7a4">tsnBetween</a>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i], tsn, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i])) {
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a74cd3a867ee886b15439c1ca53bbf57d"></a><!-- doxytag: member="SCTPAssociation::tsnLe" ref="a74cd3a867ee886b15439c1ca53bbf57d" args="(const uint32 tsn1, const uint32 tsn2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32 SCTPAssociation::tsnLe </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> ((int32)(tsn1-tsn2)&lt;=0); }
</pre></div>
</div>
</div>
<a class="anchor" id="a2e63afca29fd3f5d2dedb4f05fb1015f"></a><!-- doxytag: member="SCTPAssociation::tsnLt" ref="a2e63afca29fd3f5d2dedb4f05fb1015f" args="(const uint32 tsn1, const uint32 tsn2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32 SCTPAssociation::tsnLt </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Compare TSNs </p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> ((int32)(tsn1-tsn2)&lt;0); }
</pre></div>
</div>
</div>
<a class="anchor" id="ab70d01d19820a5a16547e439b142d5fe"></a><!-- doxytag: member="SCTPAssociation::tsnWasReneged" ref="ab70d01d19820a5a16547e439b142d5fe" args="(SCTPDataVariables *chunk, const int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::tsnWasReneged </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a01a9c50a325baf1ebf3d25972a776393">handleChunkReportedAsMissing()</a>, and <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{

<span class="preprocessor">#ifdef PKT</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af665b72b717ec39ba1a01364769e2db0">getQueueSize</a>() &gt; 0) {
        <span class="keywordflow">for</span> (SCTPQueue::PayloadQueue::iterator tq = <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.begin();
              tq != <a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#af2706820443707e574cc9618cdd0ba8c">payloadQueue</a>.end(); tq++) {
            <span class="keywordflow">if</span> (tq-&gt;second-&gt;tsn &gt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>) {
                <span class="keywordflow">if</span> (!<a class="code" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">transmissionQ</a>-&gt;<a class="code" href="class_s_c_t_p_queue.html#a198854d52d738bb77bb031ffe863b5be">checkAndInsertChunk</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a>, chunk)) {
                    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;tsnWasReneged: cannot add message/chunk (TSN=&quot;</span>
                              &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> &lt;&lt;<span class="stringliteral">&quot;) to the transmissionQ&quot;</span> &lt;&lt; endl;
                }
                <span class="keywordflow">else</span> {
                    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a29289f62fc4878819b3b5ba132bf2c80">enqueuedInTransmissionQ</a> = <span class="keyword">true</span>;
                    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ade6f850289ebac0c4d7964a96fc754f5">setNextDestination</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>());
                    CounterMap::iterator q = <a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#ac3aa579f1b930a68ef83ba1404448cc2">roomTransQ</a>.find(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af39b432c96285a2e9cd0d0320d091d7c">getNextDestination</a>());
                    q-&gt;second+=<a class="code" href="_s_c_t_p_association_8h.html#a34c6101299ca6658c48834e679883867">ADD_PADDING</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#adbda4b920dcea6965b2341fb11fd0d32">len</a>/8+<a class="code" href="_s_c_t_p_association_8h.html#aad0be78d1352b9d9fa6a695ed18c9d65">SCTP_DATA_CHUNK_LENGTH</a>);
                    CounterMap::iterator qb=<a class="code" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">qCounter</a>.<a class="code" href="struct_s_c_t_p_association_1_1counter.html#a5d59aa98ddb5096586f4a9f85cc4ac16">bookedTransQ</a>.find(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#af39b432c96285a2e9cd0d0320d091d7c">getNextDestination</a>());
                    qb-&gt;second+=chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a94e84b32d87ee8a38b88f0e8644e5876">booksize</a>;
                    <span class="keywordflow">return</span>;
                }
            }
        }
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;TSN &quot;</span> &lt;&lt; chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ae52f66189071d5807283ee00e589e2eb">tsn</a> &lt;&lt; <span class="stringliteral">&quot; has been reneged (type &quot;</span>
              &lt;&lt; type &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;
    <a class="code" href="class_s_c_t_p_association.html#a7970990bafb546026b91ab011eb956af">unackChunk</a>(chunk);
    <span class="keywordflow">if</span> (chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0edc92ee533475e1ac45922c2f482ca9">countsAsOutstanding</a>) {
        <a class="code" href="class_s_c_t_p_association.html#a2178e3130838480b58adc77639d7862c">decreaseOutstandingBytes</a>(chunk);
    }
    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ac25b1776cd86480fba00adf7ffc3d281">hasBeenReneged</a> = <span class="keyword">true</span>;
    chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a0311c740e321088d6ba6626816993e86">gapReports</a>        = 1;
    <span class="keywordflow">if</span> (!chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>()-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>-&gt;isScheduled()) {
        <a class="code" href="class_s_c_t_p_association.html#aafb136543c6d4287ea773d3519593010">startTimer</a>(chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>()-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac772c4fa18747d878152f13413be0098">T3_RtxTimer</a>,
                      chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#ad2160ca859be158877f7259d0e3d8ff8">getLastDestinationPath</a>()-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#ac2470e5c12a744d1b567a728edf9b307">pathRto</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7970990bafb546026b91ab011eb956af"></a><!-- doxytag: member="SCTPAssociation::unackChunk" ref="a7970990bafb546026b91ab011eb956af" args="(SCTPDataVariables *chunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::unackChunk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_data_variables.html">SCTPDataVariables</a> *&#160;</td>
          <td class="paramname"><em>chunk</em></td><td>)</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>, and <a class="el" href="class_s_c_t_p_association.html#ab70d01d19820a5a16547e439b142d5fe">tsnWasReneged()</a>.</p>
<div class="fragment"><pre class="fragment">                                                         {
            chunk-&gt;<a class="code" href="class_s_c_t_p_data_variables.html#a6c09db8c77fdfceda4b5386f14093b8e">hasBeenAcked</a> = <span class="keyword">false</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a3cb6d23f3c34f789d2b1c5945d0d0a76"></a><!-- doxytag: member="SCTPAssociation::updateCounters" ref="a3cb6d23f3c34f789d2b1c5945d0d0a76" args="(SCTPPathVariables *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 SCTPAssociation::updateCounters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> notifyUlp = <span class="keyword">false</span>;
    <span class="keywordflow">if</span> (++<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad68b7cf6b6d43185ca00ba427e6d42ba">errorCount</a> &gt;=   (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;assocMaxRetrans&quot;</span>))
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Retransmission count during connection setup exceeds &quot;</span> &lt;&lt; (int32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;assocMaxRetrans&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;, giving up\n&quot;</span>;
        <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3ace58e516838fe8c15ac9ce67f4f4409c">SCTP_I_CLOSED</a>);
        <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
        <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">removeAssociation</a>(<span class="keyword">this</span>);
        <span class="keywordflow">return</span> 0;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (++path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a> &gt;=  (uint32)<a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;par(<span class="stringliteral">&quot;pathMaxRetrans&quot;</span>))
    {
        <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec73d49b9720a1448d063e211ccefda0">activePath</a>)
        {
            <span class="comment">/* tell the source */</span>
            notifyUlp = <span class="keyword">true</span>;
        }

        path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aec73d49b9720a1448d063e211ccefda0">activePath</a> = <span class="keyword">false</span>;
        <span class="keywordflow">if</span> (path == <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#afaefe95090e09d43d24794cf47a1ec0c">getPrimaryPath</a>()) {
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a5b32a3dfde58166c98ee2c0d074d28b0">setPrimaryPath</a>(<a class="code" href="class_s_c_t_p_association.html#a54a47746095fa64e6976d22bdbb8e884">getNextPath</a>(path));
        }
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;process_TIMEOUT_RESET(&quot;</span>&lt;&lt;(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>)&lt;&lt;<span class="stringliteral">&quot;) : PATH ERROR COUNTER EXCEEDED, path status is INACTIVE\n&quot;</span>;
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#ae691d69b908141f2b120ce25f824b683">allPathsInactive</a>())
        {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;process_TIMEOUT_RESET : ALL PATHS INACTIVE --&gt; closing ASSOC\n&quot;</span>;
            <a class="code" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp</a>(<a class="code" href="_s_c_t_p_command_8h.html#a066d6fbbc858ac42638c402e8ab1a5f3afc5424e52a8919715c5f0433afcdd3b5">SCTP_I_CONN_LOST</a>);
            <a class="code" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort</a>();
            <a class="code" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">sctpMain</a>-&gt;<a class="code" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">removeAssociation</a>(<span class="keyword">this</span>);
            <span class="keywordflow">return</span> 0;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (notifyUlp)
        {
            <span class="comment">/* notify the application */</span>
            <a class="code" href="class_s_c_t_p_association.html#aee07b10bc3e9c1999e15c025d5e7db5f">pathStatusIndication</a>(path, <span class="keyword">false</span>);
        }
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a>&lt;&lt;<span class="stringliteral">&quot;process_TIMEOUT_RESET(&quot;</span>&lt;&lt;(path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>)&lt;&lt;<span class="stringliteral">&quot;) : PATH ERROR COUNTER now &quot;</span>&lt;&lt;path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a1fa3356788646df71c76838733d15c26">pathErrorCount</a>&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;
        <span class="keywordflow">return</span> 2;
    }
    <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7235e0a24b1d8a8cc70eedda6adb081f"></a><!-- doxytag: member="SCTPAssociation::updateFastRecoveryStatus" ref="a7235e0a24b1d8a8cc70eedda6adb081f" args="(const uint32 lastTsnAck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCTPAssociation::updateFastRecoveryStatus </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>lastTsnAck</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (SCTPPathMap::iterator iter = <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.begin(); iter != <a class="code" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">sctpPathMap</a>.end(); iter++) {
        <a class="code" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a>* path = iter-&gt;second;

        <span class="keywordflow">if</span> (path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a9b17b4f078d72955719c8052701e90fd">fastRecoveryActive</a>) {
            <span class="keywordflow">if</span> ( (<a class="code" href="class_s_c_t_p_association.html#a2aee269f079e6749ddc839137c157043">tsnGt</a>(lastTsnAck, path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#abc1e62f4d74471fcb495fec933bc4a45">fastRecoveryExitPoint</a>)) ||
                  (lastTsnAck == path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#abc1e62f4d74471fcb495fec933bc4a45">fastRecoveryExitPoint</a>)
            ) {
                path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#a9b17b4f078d72955719c8052701e90fd">fastRecoveryActive</a>     = <span class="keyword">false</span>;
                path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#abc1e62f4d74471fcb495fec933bc4a45">fastRecoveryExitPoint</a> = 0;

                <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;:\tCC [cwndUpdateAfterSack] Leaving Fast Recovery on path &quot;</span>
                              &lt;&lt; path-&gt;<a class="code" href="class_s_c_t_p_path_variables.html#aa633bf8cbecd1b7152d64e56365dcd1a">remoteAddress</a>
                              &lt;&lt; <span class="stringliteral">&quot;, lastTsnAck=&quot;</span> &lt;&lt; lastTsnAck &lt;&lt; endl;
            }
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a99fbda3fe957b452899203d4e0f151a0"></a><!-- doxytag: member="SCTPAssociation::updateGapList" ref="a99fbda3fe957b452899203d4e0f151a0" args="(const uint32 tsn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SCTPAssociation::updateGapList </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>tsn</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>TSN either sits at the end of one gap, and thus changes gap boundaries, or it is in between two gaps, and becomes a new gap</p>
</p>

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Entering updateGapList (tsn=&quot;</span> &lt;&lt; receivedTsn
              &lt;&lt; <span class="stringliteral">&quot; cTsnAck=&quot;</span> &lt;&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a> &lt;&lt; <span class="stringliteral">&quot; Number of Gaps=&quot;</span>
              &lt;&lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a> &lt;&lt; endl;

    uint32 lo = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a> + 1;
    <span class="keywordflow">if</span> ((int32)(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a1046a167391f15e9071fda9395588756">localRwnd</a>-<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ac4dd73467c637f000a01b44b13799abf">queuedReceivedBytes</a>) &lt;= 0)
    {
        <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Window full&quot;</span> &lt;&lt; endl;
        <span class="comment">// Only check if cumTsnAck can be advanced</span>
        <span class="keywordflow">if</span> (receivedTsn == lo) {
            <a class="code" href="_s_c_t_p_8h.html#ae124292366093a18d977ca18bd0c19f1">sctpEV3</a> &lt;&lt; <span class="stringliteral">&quot;Window full, but cumTsnAck can be advanced:&quot;</span> &lt;&lt; lo &lt;&lt; endl;
        }
        <span class="keywordflow">else</span>
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a2aee269f079e6749ddc839137c157043">tsnGt</a>(receivedTsn, <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#af02f163ebe6c28c874d7734bbc2a31bf">highestTsnStored</a>)) {    <span class="comment">// 17.06.08</span>
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#af02f163ebe6c28c874d7734bbc2a31bf">highestTsnStored</a> = receivedTsn;
    }

    <span class="keywordflow">for</span> (uint32 i = 0; i&lt;<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>; i++) {
        <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i] &gt; 0) {
            <span class="keyword">const</span> uint32 hi = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i] - 1;
            <span class="keywordflow">if</span> (<a class="code" href="class_s_c_t_p_association.html#a5d5d64e51be4d13ccb13286b5a6ab7a4">tsnBetween</a>(lo, receivedTsn, hi)) {
                <span class="keyword">const</span> uint32 gapsize = hi - lo + 1;
                <span class="keywordflow">if</span> (gapsize &gt; 1) {
                    <span class="keywordflow">if</span> (receivedTsn == hi) {
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i] = receivedTsn;
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a> = <span class="keyword">true</span>;
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                    }
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (receivedTsn == lo) {
                        <span class="keywordflow">if</span> (receivedTsn == (<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a> + 1)) {
                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>++;
                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a> = <span class="keyword">true</span>;
                            <span class="keywordflow">return</span> <span class="keyword">true</span>;
                        }
                        <span class="comment">/* some gap must increase its upper bound */</span>
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i-1] = receivedTsn;
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a> = <span class="keyword">true</span>;
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                    }
                    <span class="keywordflow">else</span> {  <span class="comment">/* a gap in between */</span>
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a> = <a class="code" href="_s_c_t_p_association_8h.html#ad61931b1ae6b8e5bb714e2e6744f4470">min</a>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a> + 1, <a class="code" href="_s_c_t_p_association_8h.html#a6334da21c08d8d9b4c63879c8cce9633">MAX_GAP_COUNT</a>);      <span class="comment">// T.D. 18.12.09: Enforce upper limit!</span>

                        <span class="keywordflow">for</span> (uint32 j = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a> - 1; j &gt; i; j--) {    <span class="comment">// T.D. 18.12.09: Fixed invalid start value.</span>
                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[j] = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[j-1];
                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[j] = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[j-1];
                        }
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i]=receivedTsn;
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i]=receivedTsn;
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a> = <span class="keyword">true</span>;
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                    }
                }
                <span class="keywordflow">else</span> {  <span class="comment">/* alright: gapsize is 1: our received tsn may close gap between fragments */</span>
                    <span class="keywordflow">if</span> (lo == <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a> + 1) {
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a> = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i];
                        <span class="keywordflow">if</span> (i == <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>-1) {
                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i] = 0;
                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i] = 0;
                        }
                        <span class="keywordflow">else</span> {
                            <span class="keywordflow">for</span> (uint32 j = i; j &lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a> - 1; j++) {        <span class="comment">// T.D. 18.12.09: Fixed invalid end value.</span>
                                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[j] = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[j + 1];
                                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[j]  = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[j + 1];
                            }
                        }
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>--;
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a> = <span class="keyword">true</span>;
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                    }
                    <span class="keywordflow">else</span> {
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i-1] = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i];
                        <span class="keywordflow">if</span> (i == <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>-1) {
                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[i] = 0;
                            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i] = 0;
                        }
                        <span class="keywordflow">else</span> {
                            <span class="keywordflow">for</span> (uint32 j = i; j &lt; <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a> - 1; j++) {        <span class="comment">// T.D. 18.12.09: Fixed invalid end value.</span>
                                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[j] = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[j + 1];
                                <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[j]  = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[j + 1];
                            }
                        }
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>--;
                        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a> = <span class="keyword">true</span>;
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                    }
                }
            }
            <span class="keywordflow">else</span> {  <span class="comment">/* receivedTsn is not in the gap between these fragments... */</span>
                lo = <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[i] + 1;
            }
        } <span class="comment">/* end: for */</span>
    }<span class="comment">/* end: for */</span>

    <span class="comment">/* (NULL LIST)   OR  (End of Gap List passed) */</span>
    <span class="keywordflow">if</span> (receivedTsn == lo) {    <span class="comment">// just increase ctsna, handle further update of ctsna later</span>
        <span class="keywordflow">if</span> (receivedTsn == <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a> + 1) {
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a37b617b9caf66e8bb37d3eed48bcb76c">cTsnAck</a>              = receivedTsn;
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a> = <span class="keyword">true</span>;
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
        <span class="comment">/* Update last fragment....increase stop_tsn by one */</span>
        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>-1]++;

        <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a> = <span class="keyword">true</span>;
        <span class="keywordflow">return</span> <span class="keyword">true</span>;

    }
    <span class="keywordflow">else</span> {  <span class="comment">// A new fragment altogether, past the end of the list</span>
        <span class="keywordflow">if</span>(<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a> + 1 &lt;= <a class="code" href="_s_c_t_p_association_8h.html#a6334da21c08d8d9b4c63879c8cce9633">MAX_GAP_COUNT</a>) {     <span class="comment">// T.D. 18.12.09: Enforce upper limit!</span>
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#ad7d3a3a95f236b66e40e0825a8cd8fc3">gapStartList</a>[<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>] = receivedTsn;
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a3050fcc98f6ceba8036ae36446125b8e">gapStopList</a>[<a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>]  = receivedTsn;
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a8d12842797c5376fa3b22a1a506fddaf">numGaps</a>++;
            <a class="code" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">state</a>-&gt;<a class="code" href="class_s_c_t_p_state_variables.html#a06450a51ef019da0038809f452844e63">newChunkReceived</a> = <span class="keyword">true</span>;
        }
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="ad11e2cf06b73d0b6c92bf90d9052f984"></a><!-- doxytag: member="SCTPAssociation::SCTP" ref="ad11e2cf06b73d0b6c92bf90d9052f984" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="class_s_c_t_p.html">SCTP</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a940cc2bde58bd842d11b28b3d09130dc"></a><!-- doxytag: member="SCTPAssociation::SCTPPathVariables" ref="a940cc2bde58bd842d11b28b3d09130dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="class_s_c_t_p_path_variables.html">SCTPPathVariables</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1780a25bb9890ee2c0510735299b1bf1">addPath()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, and <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a28d421b793ab5db3b09737c0f9f4b905"></a><!-- doxytag: member="SCTPAssociation::advRwnd" ref="a28d421b793ab5db3b09737c0f9f4b905" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector* <a class="el" href="class_s_c_t_p_association.html#a28d421b793ab5db3b09737c0f9f4b905">SCTPAssociation::advRwnd</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a0054d12cb552f7417b97c7e671231905">createSack()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">~SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="aba709e2f773752366d1c291c4fb360c8"></a><!-- doxytag: member="SCTPAssociation::appGateIndex" ref="aba709e2f773752366d1c291c4fb360c8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 <a class="el" href="class_s_c_t_p_association.html#aba709e2f773752366d1c291c4fb360c8">SCTPAssociation::appGateIndex</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p.html#a8e139c401cbd596810592e62be90a21e">SCTP::addForkedAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a372875420182ac696a9cf72971ab5eab">printConnBrief()</a>, <a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND()</a>, <a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp()</a>, <a class="el" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">SCTP::removeAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp()</a>, and <a class="el" href="class_s_c_t_p_association.html#a35a8d95a64b2977c79bf24b1353c0c8e">sendToApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a135afa4887cc640b0e8410dc95a29972"></a><!-- doxytag: member="SCTPAssociation::assocId" ref="a135afa4887cc640b0e8410dc95a29972" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 <a class="el" href="class_s_c_t_p_association.html#a135afa4887cc640b0e8410dc95a29972">SCTPAssociation::assocId</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p.html#a8e139c401cbd596810592e62be90a21e">SCTP::addForkedAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks()</a>, <a class="el" href="class_s_c_t_p_association.html#a01a9c50a325baf1ebf3d25972a776393">handleChunkReportedAsMissing()</a>, <a class="el" href="class_s_c_t_p_association.html#aee07b10bc3e9c1999e15c025d5e7db5f">pathStatusIndication()</a>, <a class="el" href="class_s_c_t_p_association.html#a372875420182ac696a9cf72971ab5eab">printConnBrief()</a>, <a class="el" href="class_s_c_t_p.html#a84f317375ec11a83b15062a0d77694d3">SCTP::printInfoConnMap()</a>, <a class="el" href="class_s_c_t_p_association.html#a0604d2735afd938650aa540e1ed7b9d1">process_ABORT()</a>, <a class="el" href="class_s_c_t_p_association.html#a6c53aeb97e7132e5f09869f886e5807e">process_CLOSE()</a>, <a class="el" href="class_s_c_t_p_association.html#a5cc7381e91d34e5c13a4b97eb02f9b7e">process_OPEN_PASSIVE()</a>, <a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND()</a>, <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>, <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp()</a>, <a class="el" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">SCTP::removeAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_path_variables.html#ad374aa007507de709b8467da3cda8a48">SCTPPathVariables::SCTPPathVariables()</a>, <a class="el" href="class_s_c_t_p_association.html#a155c31414d0e2115eccd2fbb0a966dab">sendDataArrivedNotification()</a>, <a class="el" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>

</div>
</div>
<a class="anchor" id="a7e0d61bfa53b52f7d64a919f3dcceec5"></a><!-- doxytag: member="SCTPAssociation::bytes" ref="a7e0d61bfa53b52f7d64a919f3dcceec5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s_c_t_p_association_1_1calc_bytes_to_send.html">BytesToBeSent</a> <a class="el" href="class_s_c_t_p_association.html#a7e0d61bfa53b52f7d64a919f3dcceec5">SCTPAssociation::bytes</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a47401fe3a9b36c629785c65886c19efd">bytesAllowedToSend()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, and <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a98157ebfa7e08758aa3227a0e1cdc9"></a><!-- doxytag: member="SCTPAssociation::ccFunctions" ref="a4a98157ebfa7e08758aa3227a0e1cdc9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s_c_t_p_association_1_1congestion_control_functions.html">CCFunctions</a> <a class="el" href="class_s_c_t_p_association.html#a4a98157ebfa7e08758aa3227a0e1cdc9">SCTPAssociation::ccFunctions</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>, <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d6c3997389c261a61cc57543111973b"></a><!-- doxytag: member="SCTPAssociation::ccModule" ref="a3d6c3997389c261a61cc57543111973b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16 <a class="el" href="class_s_c_t_p_association.html#a3d6c3997389c261a61cc57543111973b">SCTPAssociation::ccModule</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>

</div>
</div>
<a class="anchor" id="a904881907985d7c23d7dc3cf630834aa"></a><!-- doxytag: member="SCTPAssociation::cumTsnAck" ref="a904881907985d7c23d7dc3cf630834aa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector* <a class="el" href="class_s_c_t_p_association.html#a904881907985d7c23d7dc3cf630834aa">SCTPAssociation::cumTsnAck</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">~SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="adb42cf7d446c57ab5d1054fd9693ee54"></a><!-- doxytag: member="SCTPAssociation::fsm" ref="adb42cf7d446c57ab5d1054fd9693ee54" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cFSM* <a class="el" href="class_s_c_t_p_association.html#adb42cf7d446c57ab5d1054fd9693ee54">SCTPAssociation::fsm</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition()</a>, <a class="el" href="class_s_c_t_p_association.html#a372875420182ac696a9cf72971ab5eab">printConnBrief()</a>, <a class="el" href="class_s_c_t_p_association.html#a0604d2735afd938650aa540e1ed7b9d1">process_ABORT()</a>, <a class="el" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE()</a>, <a class="el" href="class_s_c_t_p_association.html#a6c53aeb97e7132e5f09869f886e5807e">process_CLOSE()</a>, <a class="el" href="class_s_c_t_p_association.html#a5cc7381e91d34e5c13a4b97eb02f9b7e">process_OPEN_PASSIVE()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND()</a>, <a class="el" href="class_s_c_t_p_association.html#aa60a2e245739ecf7a4085a3e240a3730">process_STATUS()</a>, <a class="el" href="class_s_c_t_p_association.html#ae94a9d41597adc5806db8c60f27ab45d">process_TIMEOUT_INIT_REXMIT()</a>, <a class="el" href="class_s_c_t_p_association.html#a6866e326d923a8915cdbb3d80802c527">process_TIMEOUT_SHUTDOWN()</a>, <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>, <a class="el" href="class_s_c_t_p_association.html#a6d4b0efb4884a96e406c42797456d241">processCookieAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a0dc1cc0159627680652582a01a4417f2">processCookieEchoArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">~SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="a7bdc4b456ecebfdd19a23b23cc927ecd"></a><!-- doxytag: member="SCTPAssociation::inboundStreams" ref="a7bdc4b456ecebfdd19a23b23cc927ecd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 <a class="el" href="class_s_c_t_p_association.html#a7bdc4b456ecebfdd19a23b23cc927ecd">SCTPAssociation::inboundStreams</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a5cc7381e91d34e5c13a4b97eb02f9b7e">process_OPEN_PASSIVE()</a>, <a class="el" href="class_s_c_t_p_association.html#ae086afec043034fc936b270b71c1e6f4">process_RECEIVE_REQUEST()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, and <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>.</p>

</div>
</div>
<a class="anchor" id="a5ca011cb3142dfcd423f4083855a7460"></a><!-- doxytag: member="SCTPAssociation::initPeerTsn" ref="a5ca011cb3142dfcd423f4083855a7460" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 <a class="el" href="class_s_c_t_p_association.html#a5ca011cb3142dfcd423f4083855a7460">SCTPAssociation::initPeerTsn</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, and <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>.</p>

</div>
</div>
<a class="anchor" id="adf21f02ef10ae8d3d032337332b5f50f"></a><!-- doxytag: member="SCTPAssociation::initTsn" ref="adf21f02ef10ae8d3d032337332b5f50f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 <a class="el" href="class_s_c_t_p_association.html#adf21f02ef10ae8d3d032337332b5f50f">SCTPAssociation::initTsn</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, and <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>.</p>

</div>
</div>
<a class="anchor" id="ad4d5508473d61c1cf6212bee9f683c04"></a><!-- doxytag: member="SCTPAssociation::listen" ref="ad4d5508473d61c1cf6212bee9f683c04" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_s_c_t_p_association.html#ad4d5508473d61c1cf6212bee9f683c04">SCTPAssociation::listen</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3e8d3c43ea031c35ab782b91f628563c"></a><!-- doxytag: member="SCTPAssociation::localAddr" ref="a3e8d3c43ea031c35ab782b91f628563c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> <a class="el" href="class_s_c_t_p_association.html#a3e8d3c43ea031c35ab782b91f628563c">SCTPAssociation::localAddr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p.html#aeb3f468f36416f953ab7e647540f75e4">SCTP::addLocalAddress()</a>, <a class="el" href="class_s_c_t_p.html#a476b640dbefbde3ee8029eef4393800e">SCTP::addLocalAddressToAllRemoteAddresses()</a>, <a class="el" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a0054d12cb552f7417b97c7e671231905">createSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a372875420182ac696a9cf72971ab5eab">printConnBrief()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a1460f83f7b50fee1f47fe7b4bf6744be">processSCTPMessage()</a>, <a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp()</a>, <a class="el" href="class_s_c_t_p_association.html#ae9ffc855fcb6cfd50fb34a03beaa2d39">retransmitCookieEcho()</a>, <a class="el" href="class_s_c_t_p_association.html#aa28d6c19ab622ed5564596c7f300aea4">retransmitShutdown()</a>, <a class="el" href="class_s_c_t_p_association.html#a0c70dd4b41af917ecbaebd2850a808e0">retransmitShutdownAck()</a>, <a class="el" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>, and <a class="el" href="class_s_c_t_p.html#a2ee4aaa2e36516a679b8c4a0748ecd9a">SCTP::updateSockPair()</a>.</p>

</div>
</div>
<a class="anchor" id="af44c3fdaaff9c48fdbb45aac6d6ad082"></a><!-- doxytag: member="SCTPAssociation::localAddressList" ref="af44c3fdaaff9c48fdbb45aac6d6ad082" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_s_c_t_p_association_8h.html#a83ecc618606af11f87a228a6ab74049b">AddressVector</a> <a class="el" href="class_s_c_t_p_association.html#af44c3fdaaff9c48fdbb45aac6d6ad082">SCTPAssociation::localAddressList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE()</a>, <a class="el" href="class_s_c_t_p_association.html#a5cc7381e91d34e5c13a4b97eb02f9b7e">process_OPEN_PASSIVE()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, and <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>.</p>

</div>
</div>
<a class="anchor" id="acb21c9ce886b796d5134b1c0daa3227b"></a><!-- doxytag: member="SCTPAssociation::localPort" ref="acb21c9ce886b796d5134b1c0daa3227b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16 <a class="el" href="class_s_c_t_p_association.html#acb21c9ce886b796d5134b1c0daa3227b">SCTPAssociation::localPort</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p.html#aeb3f468f36416f953ab7e647540f75e4">SCTP::addLocalAddress()</a>, <a class="el" href="class_s_c_t_p.html#a476b640dbefbde3ee8029eef4393800e">SCTP::addLocalAddressToAllRemoteAddresses()</a>, <a class="el" href="class_s_c_t_p.html#a34e3e284fe397118d5e69b56e497ed45">SCTP::addRemoteAddress()</a>, <a class="el" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a372875420182ac696a9cf72971ab5eab">printConnBrief()</a>, <a class="el" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE()</a>, <a class="el" href="class_s_c_t_p_association.html#a5cc7381e91d34e5c13a4b97eb02f9b7e">process_OPEN_PASSIVE()</a>, <a class="el" href="class_s_c_t_p_association.html#a1460f83f7b50fee1f47fe7b4bf6744be">processSCTPMessage()</a>, <a class="el" href="class_s_c_t_p.html#abd09eaf1572e207a25aff6988091ca0f">SCTP::removeLocalAddressFromAllRemoteAddresses()</a>, <a class="el" href="class_s_c_t_p.html#a2d162fde6e9246ce9db340f1824187a1">SCTP::removeRemoteAddressFromAllConnections()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort()</a>, <a class="el" href="class_s_c_t_p_association.html#ad277c3986a8173ffe41289f72765ceba">sendCookieAck()</a>, <a class="el" href="class_s_c_t_p_association.html#a3ef5a4494cd7b59c44f44d6ed385e9de">sendCookieEcho()</a>, <a class="el" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#afc5f06d167b937c0d1267047960bc354">sendHeartbeat()</a>, <a class="el" href="class_s_c_t_p_association.html#a4693aa8d9ce24d9bf798cb7feefd1085">sendHeartbeatAck()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>, <a class="el" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown()</a>, <a class="el" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck()</a>, <a class="el" href="class_s_c_t_p_association.html#a30c6da407b37844471cbd5c69918ae52">sendShutdownComplete()</a>, <a class="el" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, and <a class="el" href="class_s_c_t_p.html#a2ee4aaa2e36516a679b8c4a0748ecd9a">SCTP::updateSockPair()</a>.</p>

</div>
</div>
<a class="anchor" id="ada797c4d0c058044396199946575173b"></a><!-- doxytag: member="SCTPAssociation::localVTag" ref="ada797c4d0c058044396199946575173b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 <a class="el" href="class_s_c_t_p_association.html#ada797c4d0c058044396199946575173b">SCTPAssociation::localVTag</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#a0dc1cc0159627680652582a01a4417f2">processCookieEchoArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>, <a class="el" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>

</div>
</div>
<a class="anchor" id="aa66d26fc71717ca6158c03a212cc4071"></a><!-- doxytag: member="SCTPAssociation::numberOfRemoteAddresses" ref="aa66d26fc71717ca6158c03a212cc4071" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 <a class="el" href="class_s_c_t_p_association.html#aa66d26fc71717ca6158c03a212cc4071">SCTPAssociation::numberOfRemoteAddresses</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, and <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="a136b47892a6e405c494f055dc50eaec6"></a><!-- doxytag: member="SCTPAssociation::numGapBlocks" ref="a136b47892a6e405c494f055dc50eaec6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector* <a class="el" href="class_s_c_t_p_association.html#a136b47892a6e405c494f055dc50eaec6">SCTPAssociation::numGapBlocks</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">~SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="a3dc6e025463c8749b1239268d91b2b60"></a><!-- doxytag: member="SCTPAssociation::outboundStreams" ref="a3dc6e025463c8749b1239268d91b2b60" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 <a class="el" href="class_s_c_t_p_association.html#a3dc6e025463c8749b1239268d91b2b60">SCTPAssociation::outboundStreams</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a460894500fa0ffbff9cd62ef59db7475">initAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a5cc7381e91d34e5c13a4b97eb02f9b7e">process_OPEN_PASSIVE()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>, and <a class="el" href="class_s_c_t_p_association.html#af82770db14bde55545184d74ffc6ea75">streamScheduler()</a>.</p>

</div>
</div>
<a class="anchor" id="acb96c9464cb79b841406fe7fcecff941"></a><!-- doxytag: member="SCTPAssociation::peerVTag" ref="acb96c9464cb79b841406fe7fcecff941" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 <a class="el" href="class_s_c_t_p_association.html#acb96c9464cb79b841406fe7fcecff941">SCTPAssociation::peerVTag</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#a0dc1cc0159627680652582a01a4417f2">processCookieEchoArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>, <a class="el" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ba2392369634e6a9b6d1c27ecfa4d57"></a><!-- doxytag: member="SCTPAssociation::qCounter" ref="a0ba2392369634e6a9b6d1c27ecfa4d57" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s_c_t_p_association_1_1counter.html">QueueCounter</a> <a class="el" href="class_s_c_t_p_association.html#a0ba2392369634e6a9b6d1c27ecfa4d57">SCTPAssociation::qCounter</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1780a25bb9890ee2c0510735299b1bf1">addPath()</a>, <a class="el" href="class_s_c_t_p_association.html#a47401fe3a9b36c629785c65886c19efd">bytesAllowedToSend()</a>, <a class="el" href="class_s_c_t_p_association.html#a8b00fc2f2bcb1cb805a62316a15db984">choosePathForRetransmission()</a>, <a class="el" href="class_s_c_t_p_association.html#a2178e3130838480b58adc77639d7862c">decreaseOutstandingBytes()</a>, <a class="el" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks()</a>, <a class="el" href="class_s_c_t_p_association.html#a5bccfb8217d1cbb22a629856f96755ad">dequeueOutboundDataMsg()</a>, <a class="el" href="class_s_c_t_p_association.html#a52141caf8994688922c957e8ddee864f">getOutboundDataChunk()</a>, <a class="el" href="class_s_c_t_p_association.html#a297f87caf9d5e3b6cf596a5e44381061">handleChunkReportedAsAcked()</a>, <a class="el" href="class_s_c_t_p_association.html#a01a9c50a325baf1ebf3d25972a776393">handleChunkReportedAsMissing()</a>, <a class="el" href="class_s_c_t_p_association.html#aaf93ca861bf56525302bb2b661bdd4df">increaseOutstandingBytes()</a>, <a class="el" href="class_s_c_t_p_association.html#ac39737ee344fd4a8475b7efee8c47c31">loadPacket()</a>, <a class="el" href="class_s_c_t_p_association.html#a45de5f3a74bba48af92b248edd9c9312">makeRoomForTsn()</a>, <a class="el" href="class_s_c_t_p_association.html#aded774353d79ba7bdf53651ddc178609">moveChunkToOtherPath()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp()</a>, <a class="el" href="class_s_c_t_p_association.html#a64c5bcff1fa7a6f01d7e969d21b70dd5">putInDeliveryQ()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, <a class="el" href="class_s_c_t_p_association.html#a3f5a43f961e2cc691da4546762e28498">storePacket()</a>, and <a class="el" href="class_s_c_t_p_association.html#ab70d01d19820a5a16547e439b142d5fe">tsnWasReneged()</a>.</p>

</div>
</div>
<a class="anchor" id="a80374427a755802cd7687c7a77b26e9c"></a><!-- doxytag: member="SCTPAssociation::receiveStreams" ref="a80374427a755802cd7687c7a77b26e9c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_association.html#a85b1fe666641fe7bacf93bc9a1e7c396">SCTPReceiveStreamMap</a> <a class="el" href="class_s_c_t_p_association.html#a80374427a755802cd7687c7a77b26e9c">SCTPAssociation::receiveStreams</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aea681826347f6fc208c91c5c0f5227bc">deleteStreams()</a>, <a class="el" href="class_s_c_t_p_association.html#ae6aa9f8b9a817bb3caddb96c68b2b9c5">initStreams()</a>, <a class="el" href="class_s_c_t_p_association.html#a45de5f3a74bba48af92b248edd9c9312">makeRoomForTsn()</a>, <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp()</a>, and <a class="el" href="class_s_c_t_p_association.html#a64c5bcff1fa7a6f01d7e969d21b70dd5">putInDeliveryQ()</a>.</p>

</div>
</div>
<a class="anchor" id="a694133846dd4defebbd87493888d7c2e"></a><!-- doxytag: member="SCTPAssociation::remoteAddr" ref="a694133846dd4defebbd87493888d7c2e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> <a class="el" href="class_s_c_t_p_association.html#a694133846dd4defebbd87493888d7c2e">SCTPAssociation::remoteAddr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p.html#aeb3f468f36416f953ab7e647540f75e4">SCTP::addLocalAddress()</a>, <a class="el" href="class_s_c_t_p_association.html#a0054d12cb552f7417b97c7e671231905">createSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition()</a>, <a class="el" href="class_s_c_t_p_association.html#a372875420182ac696a9cf72971ab5eab">printConnBrief()</a>, <a class="el" href="class_s_c_t_p_association.html#a6c53aeb97e7132e5f09869f886e5807e">process_CLOSE()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND()</a>, <a class="el" href="class_s_c_t_p_association.html#aa60a2e245739ecf7a4085a3e240a3730">process_STATUS()</a>, <a class="el" href="class_s_c_t_p_association.html#ad14a311c7f07f7377a1a3422d0e6fc6c">processAppCommand()</a>, <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a1460f83f7b50fee1f47fe7b4bf6744be">processSCTPMessage()</a>, <a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp()</a>, <a class="el" href="class_s_c_t_p_association.html#ae9ffc855fcb6cfd50fb34a03beaa2d39">retransmitCookieEcho()</a>, <a class="el" href="class_s_c_t_p_association.html#aa28d6c19ab622ed5564596c7f300aea4">retransmitShutdown()</a>, <a class="el" href="class_s_c_t_p_association.html#a0c70dd4b41af917ecbaebd2850a808e0">retransmitShutdownAck()</a>, <a class="el" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort()</a>, <a class="el" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>, <a class="el" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown()</a>, <a class="el" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, and <a class="el" href="class_s_c_t_p.html#a2ee4aaa2e36516a679b8c4a0748ecd9a">SCTP::updateSockPair()</a>.</p>

</div>
</div>
<a class="anchor" id="a746e4867059fcd11838ab601a6f5fea1"></a><!-- doxytag: member="SCTPAssociation::remoteAddressList" ref="a746e4867059fcd11838ab601a6f5fea1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_s_c_t_p_association_8h.html#a83ecc618606af11f87a228a6ab74049b">AddressVector</a> <a class="el" href="class_s_c_t_p_association.html#a746e4867059fcd11838ab601a6f5fea1">SCTPAssociation::remoteAddressList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp()</a>, and <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>.</p>

</div>
</div>
<a class="anchor" id="a62e2c58ac9cc4e804800c05bae9da71f"></a><!-- doxytag: member="SCTPAssociation::remotePort" ref="a62e2c58ac9cc4e804800c05bae9da71f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16 <a class="el" href="class_s_c_t_p_association.html#a62e2c58ac9cc4e804800c05bae9da71f">SCTPAssociation::remotePort</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p.html#aeb3f468f36416f953ab7e647540f75e4">SCTP::addLocalAddress()</a>, <a class="el" href="class_s_c_t_p.html#a476b640dbefbde3ee8029eef4393800e">SCTP::addLocalAddressToAllRemoteAddresses()</a>, <a class="el" href="class_s_c_t_p.html#a34e3e284fe397118d5e69b56e497ed45">SCTP::addRemoteAddress()</a>, <a class="el" href="class_s_c_t_p_association.html#a372875420182ac696a9cf72971ab5eab">printConnBrief()</a>, <a class="el" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE()</a>, <a class="el" href="class_s_c_t_p_association.html#a1460f83f7b50fee1f47fe7b4bf6744be">processSCTPMessage()</a>, <a class="el" href="class_s_c_t_p.html#abd09eaf1572e207a25aff6988091ca0f">SCTP::removeLocalAddressFromAllRemoteAddresses()</a>, <a class="el" href="class_s_c_t_p.html#a2d162fde6e9246ce9db340f1824187a1">SCTP::removeRemoteAddressFromAllConnections()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a0c2b31f00e428a2c8c5fe8aa5f3430fe">sendAbort()</a>, <a class="el" href="class_s_c_t_p_association.html#ad277c3986a8173ffe41289f72765ceba">sendCookieAck()</a>, <a class="el" href="class_s_c_t_p_association.html#a3ef5a4494cd7b59c44f44d6ed385e9de">sendCookieEcho()</a>, <a class="el" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#afc5f06d167b937c0d1267047960bc354">sendHeartbeat()</a>, <a class="el" href="class_s_c_t_p_association.html#a4693aa8d9ce24d9bf798cb7feefd1085">sendHeartbeatAck()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>, <a class="el" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown()</a>, <a class="el" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck()</a>, <a class="el" href="class_s_c_t_p_association.html#a30c6da407b37844471cbd5c69918ae52">sendShutdownComplete()</a>, <a class="el" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, and <a class="el" href="class_s_c_t_p.html#a2ee4aaa2e36516a679b8c4a0748ecd9a">SCTP::updateSockPair()</a>.</p>

</div>
</div>
<a class="anchor" id="aafd80d965e20c11d49b38f7001d774b2"></a><!-- doxytag: member="SCTPAssociation::retransmissionQ" ref="aafd80d965e20c11d49b38f7001d774b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_queue.html">SCTPQueue</a>* <a class="el" href="class_s_c_t_p_association.html#aafd80d965e20c11d49b38f7001d774b2">SCTPAssociation::retransmissionQ</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#ade798497e9cb468bf8f4759e9b8e9840">cwndUpdateAfterSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks()</a>, <a class="el" href="class_s_c_t_p_association.html#a460894500fa0ffbff9cd62ef59db7475">initAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#ac39737ee344fd4a8475b7efee8c47c31">loadPacket()</a>, <a class="el" href="class_s_c_t_p_association.html#adca537bdf50592f25eff5a09e730bec3">peekAbandonedChunk()</a>, <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>, <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>, and <a class="el" href="class_s_c_t_p_association.html#a3f5a43f961e2cc691da4546762e28498">storePacket()</a>.</p>

</div>
</div>
<a class="anchor" id="ac5b54b2f8fbba401964d30c71e25118f"></a><!-- doxytag: member="SCTPAssociation::sackFrequency" ref="ac5b54b2f8fbba401964d30c71e25118f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 <a class="el" href="class_s_c_t_p_association.html#ac5b54b2f8fbba401964d30c71e25118f">SCTPAssociation::sackFrequency</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#ad26d83ea266011e34ebfbc56f7ee1e75">scheduleSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, and <a class="el" href="class_s_c_t_p_association.html#a3525db7c8ed37b6e45ae4a65e9af8968">timeForSack()</a>.</p>

</div>
</div>
<a class="anchor" id="a29f900c7ca380c1671bb957109fc338b"></a><!-- doxytag: member="SCTPAssociation::sackPeriod" ref="a29f900c7ca380c1671bb957109fc338b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_s_c_t_p_association.html#a29f900c7ca380c1671bb957109fc338b">SCTPAssociation::sackPeriod</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad26d83ea266011e34ebfbc56f7ee1e75">scheduleSack()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>.</p>

</div>
</div>
<a class="anchor" id="a1fae2ceab572718540c51768e3c1c452"></a><!-- doxytag: member="SCTPAssociation::SackTimer" ref="a1fae2ceab572718540c51768e3c1c452" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_s_c_t_p_association.html#a1fae2ceab572718540c51768e3c1c452">SCTPAssociation::SackTimer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, <a class="el" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">SCTP::removeAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#ad26d83ea266011e34ebfbc56f7ee1e75">scheduleSack()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>, <a class="el" href="class_s_c_t_p_association.html#a8ceae356355ca537907cabf469c813af">sendSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a3525db7c8ed37b6e45ae4a65e9af8968">timeForSack()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">~SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="ac26892b7e975616f6c9fa87e012e7232"></a><!-- doxytag: member="SCTPAssociation::sctpAlgorithm" ref="ac26892b7e975616f6c9fa87e012e7232" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_algorithm.html">SCTPAlgorithm</a>* <a class="el" href="class_s_c_t_p_association.html#ac26892b7e975616f6c9fa87e012e7232">SCTPAssociation::sctpAlgorithm</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a460894500fa0ffbff9cd62ef59db7475">initAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">~SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="a3b2775352d3150256445a957de26926b"></a><!-- doxytag: member="SCTPAssociation::sctpMain" ref="a3b2775352d3150256445a957de26926b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p.html">SCTP</a>* <a class="el" href="class_s_c_t_p_association.html#a3b2775352d3150256445a957de26926b">SCTPAssociation::sctpMain</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks()</a>, <a class="el" href="class_s_c_t_p_association.html#a01a9c50a325baf1ebf3d25972a776393">handleChunkReportedAsMissing()</a>, <a class="el" href="class_s_c_t_p_association.html#a460894500fa0ffbff9cd62ef59db7475">initAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#aee07b10bc3e9c1999e15c025d5e7db5f">pathStatusIndication()</a>, <a class="el" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition()</a>, <a class="el" href="class_s_c_t_p_association.html#a5015c5c13fbe8608b1370a85fc06806f">pmDataIsSentOn()</a>, <a class="el" href="class_s_c_t_p_association.html#a02104ef95fcdab0f90cc9b03da82a675">pmRttMeasurement()</a>, <a class="el" href="class_s_c_t_p_association.html#ab385b4edb0ddac6e69aa350df14b480a">pmStartPathManagement()</a>, <a class="el" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE()</a>, <a class="el" href="class_s_c_t_p_association.html#a5cc7381e91d34e5c13a4b97eb02f9b7e">process_OPEN_PASSIVE()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND()</a>, <a class="el" href="class_s_c_t_p_association.html#acb89ca4bcc84239541171327977762e9">process_TIMEOUT_HEARTBEAT()</a>, <a class="el" href="class_s_c_t_p_association.html#ac2468daebc456147e6568b99650165ca">process_TIMEOUT_HEARTBEAT_INTERVAL()</a>, <a class="el" href="class_s_c_t_p_association.html#ae94a9d41597adc5806db8c60f27ab45d">process_TIMEOUT_INIT_REXMIT()</a>, <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>, <a class="el" href="class_s_c_t_p_association.html#a6866e326d923a8915cdbb3d80802c527">process_TIMEOUT_SHUTDOWN()</a>, <a class="el" href="class_s_c_t_p_association.html#a0dc1cc0159627680652582a01a4417f2">processCookieEchoArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a1f4d814724e79e184655050a48ee1c25">processHeartbeatAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#a010084d1e3717e6600b532f3b3804151">sendIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>, <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>, <a class="el" href="class_s_c_t_p_association.html#a35a8d95a64b2977c79bf24b1353c0c8e">sendToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#afa42a76b3cc9ac339b1657e48972b2b2">sendToIP()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, and <a class="el" href="class_s_c_t_p_association.html#a3cb6d23f3c34f789d2b1c5945d0d0a76">updateCounters()</a>.</p>

</div>
</div>
<a class="anchor" id="a32f0e2f4ef1678a91a307b96a3bb1822"></a><!-- doxytag: member="SCTPAssociation::sctpPathMap" ref="a32f0e2f4ef1678a91a307b96a3bb1822" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_association.html#a3125d2965827dcc6d069b57afc6aae1f">SCTPPathMap</a> <a class="el" href="class_s_c_t_p_association.html#a32f0e2f4ef1678a91a307b96a3bb1822">SCTPAssociation::sctpPathMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a1780a25bb9890ee2c0510735299b1bf1">addPath()</a>, <a class="el" href="class_s_c_t_p_association.html#ae691d69b908141f2b120ce25f824b683">allPathsInactive()</a>, <a class="el" href="class_s_c_t_p_association.html#a8b00fc2f2bcb1cb805a62316a15db984">choosePathForRetransmission()</a>, <a class="el" href="class_s_c_t_p_association.html#ade798497e9cb468bf8f4759e9b8e9840">cwndUpdateAfterSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a54a47746095fa64e6976d22bdbb8e884">getNextPath()</a>, <a class="el" href="class_s_c_t_p_association.html#a8270ebaccc92eb00ffae041a8406b094">getOutstandingBytes()</a>, <a class="el" href="class_s_c_t_p_association.html#ab385b4edb0ddac6e69aa350df14b480a">pmStartPathManagement()</a>, <a class="el" href="class_s_c_t_p_association.html#a120c72df6657d2ef5038d61881ff11c4">printSctpPathMap()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>, <a class="el" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">SCTP::removeAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a48840034dca5052abf481f6a5753f923">removePath()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, <a class="el" href="class_s_c_t_p_association.html#ab0faa9ccd46630cfab7a2bc75fb1d52d">sendOnAllPaths()</a>, <a class="el" href="class_s_c_t_p_association.html#a1e5b14c2f164752dcf7b6a16f654be9d">stopTimers()</a>, and <a class="el" href="class_s_c_t_p_association.html#a7235e0a24b1d8a8cc70eedda6adb081f">updateFastRecoveryStatus()</a>.</p>

</div>
</div>
<a class="anchor" id="a1f249bde274ec0e4949023a2a3a3e4e7"></a><!-- doxytag: member="SCTPAssociation::sendQueue" ref="a1f249bde274ec0e4949023a2a3a3e4e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector* <a class="el" href="class_s_c_t_p_association.html#a1f249bde274ec0e4949023a2a3a3e4e7">SCTPAssociation::sendQueue</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a5bccfb8217d1cbb22a629856f96755ad">dequeueOutboundDataMsg()</a>, <a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">~SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="a8d3fc12f609dc4d894f830d0e201642a"></a><!-- doxytag: member="SCTPAssociation::sendStreams" ref="a8d3fc12f609dc4d894f830d0e201642a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_association.html#a3aa0e9ecd0c7903f8cd31c534fc275a3">SCTPSendStreamMap</a> <a class="el" href="class_s_c_t_p_association.html#a8d3fc12f609dc4d894f830d0e201642a">SCTPAssociation::sendStreams</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#aea681826347f6fc208c91c5c0f5227bc">deleteStreams()</a>, <a class="el" href="class_s_c_t_p_association.html#a5bccfb8217d1cbb22a629856f96755ad">dequeueOutboundDataMsg()</a>, <a class="el" href="class_s_c_t_p_association.html#ae6aa9f8b9a817bb3caddb96c68b2b9c5">initStreams()</a>, <a class="el" href="class_s_c_t_p_association.html#a164799c396a6e3b931854cc4af513ff4">makeDataVarFromDataMsg()</a>, <a class="el" href="class_s_c_t_p_association.html#afcdda96737a59959b556a07031d9ad98">nextChunkFitsIntoPacket()</a>, <a class="el" href="class_s_c_t_p_association.html#a38fd6b713baffb261f409aec60a3c279">numUsableStreams()</a>, <a class="el" href="class_s_c_t_p_association.html#a2e74a9f71f01b08567f70511f6172ac7">peekOutboundDataMsg()</a>, <a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND()</a>, and <a class="el" href="class_s_c_t_p_association.html#af82770db14bde55545184d74ffc6ea75">streamScheduler()</a>.</p>

</div>
</div>
<a class="anchor" id="a9988effc78d17db9b32a8d6a976c2288"></a><!-- doxytag: member="SCTPAssociation::ssFunctions" ref="a9988effc78d17db9b32a8d6a976c2288" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s_c_t_p_association_1_1stream_scheduling_functions.html">SSFunctions</a> <a class="el" href="class_s_c_t_p_association.html#a9988effc78d17db9b32a8d6a976c2288">SCTPAssociation::ssFunctions</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a5bccfb8217d1cbb22a629856f96755ad">dequeueOutboundDataMsg()</a>, <a class="el" href="class_s_c_t_p_association.html#afcdda96737a59959b556a07031d9ad98">nextChunkFitsIntoPacket()</a>, <a class="el" href="class_s_c_t_p_association.html#a2e74a9f71f01b08567f70511f6172ac7">peekOutboundDataMsg()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, and <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>.</p>

</div>
</div>
<a class="anchor" id="a4b6cafcaa2a8ec5379637f837ca5550a"></a><!-- doxytag: member="SCTPAssociation::ssModule" ref="a4b6cafcaa2a8ec5379637f837ca5550a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16 <a class="el" href="class_s_c_t_p_association.html#a4b6cafcaa2a8ec5379637f837ca5550a">SCTPAssociation::ssModule</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="a1629df451ef1ce00b8c32cb9688013b0"></a><!-- doxytag: member="SCTPAssociation::StartTesting" ref="a1629df451ef1ce00b8c32cb9688013b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_s_c_t_p_association.html#a1629df451ef1ce00b8c32cb9688013b0">SCTPAssociation::StartTesting</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="aa270ad2776ffc5c9481909b11532772c"></a><!-- doxytag: member="SCTPAssociation::state" ref="aa270ad2776ffc5c9481909b11532772c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_state_variables.html">SCTPStateVariables</a>* <a class="el" href="class_s_c_t_p_association.html#aa270ad2776ffc5c9481909b11532772c">SCTPAssociation::state</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a4d95d83c20353ab76d47d04a240ef61a">advanceCtsna()</a>, <a class="el" href="class_s_c_t_p_association.html#a47401fe3a9b36c629785c65886c19efd">bytesAllowedToSend()</a>, <a class="el" href="class_s_c_t_p_association.html#acfd176cf104a2ded703649339cf4a9bb">calculateBytesToSendOnPath()</a>, <a class="el" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a0054d12cb552f7417b97c7e671231905">createSack()</a>, <a class="el" href="class_s_c_t_p_association.html#ade798497e9cb468bf8f4759e9b8e9840">cwndUpdateAfterSack()</a>, <a class="el" href="class_s_c_t_p_association.html#af5c86c86388313edeeff8434266a85cd">cwndUpdateMaxBurst()</a>, <a class="el" href="class_s_c_t_p_association.html#a2178e3130838480b58adc77639d7862c">decreaseOutstandingBytes()</a>, <a class="el" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks()</a>, <a class="el" href="class_s_c_t_p_association.html#a5bccfb8217d1cbb22a629856f96755ad">dequeueOutboundDataMsg()</a>, <a class="el" href="class_s_c_t_p_association.html#ab4f6847bb20adea148ebf8cf2a071871">getNextDestination()</a>, <a class="el" href="class_s_c_t_p_association.html#a01a9c50a325baf1ebf3d25972a776393">handleChunkReportedAsMissing()</a>, <a class="el" href="class_s_c_t_p_association.html#aaf93ca861bf56525302bb2b661bdd4df">increaseOutstandingBytes()</a>, <a class="el" href="class_s_c_t_p_association.html#a460894500fa0ffbff9cd62ef59db7475">initAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a27ab7a3f0d7e82a5b48f47e39e53dd23">initCCParameters()</a>, <a class="el" href="class_s_c_t_p_association.html#ae6aa9f8b9a817bb3caddb96c68b2b9c5">initStreams()</a>, <a class="el" href="class_s_c_t_p_association.html#ac39737ee344fd4a8475b7efee8c47c31">loadPacket()</a>, <a class="el" href="class_s_c_t_p_association.html#a45de5f3a74bba48af92b248edd9c9312">makeRoomForTsn()</a>, <a class="el" href="class_s_c_t_p_association.html#ae6298a23676ec2a10036aa66ed6af7b3">makeVarFromMsg()</a>, <a class="el" href="class_s_c_t_p_association.html#aded774353d79ba7bdf53651ddc178609">moveChunkToOtherPath()</a>, <a class="el" href="class_s_c_t_p_association.html#afcdda96737a59959b556a07031d9ad98">nextChunkFitsIntoPacket()</a>, <a class="el" href="class_s_c_t_p_association.html#a7471310ea5aa0cca813d1452f70bf218">performStateTransition()</a>, <a class="el" href="class_s_c_t_p_association.html#a5015c5c13fbe8608b1370a85fc06806f">pmDataIsSentOn()</a>, <a class="el" href="class_s_c_t_p_association.html#ab385b4edb0ddac6e69aa350df14b480a">pmStartPathManagement()</a>, <a class="el" href="class_s_c_t_p_association.html#a0604d2735afd938650aa540e1ed7b9d1">process_ABORT()</a>, <a class="el" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE()</a>, <a class="el" href="class_s_c_t_p_association.html#a6c53aeb97e7132e5f09869f886e5807e">process_CLOSE()</a>, <a class="el" href="class_s_c_t_p_association.html#a5cc7381e91d34e5c13a4b97eb02f9b7e">process_OPEN_PASSIVE()</a>, <a class="el" href="class_s_c_t_p_association.html#a1f578c7e75df4066f4aaf34b8f195f6f">process_PRIMARY()</a>, <a class="el" href="class_s_c_t_p_association.html#a0bce41a300c3dfdab9d2ca190d5790d3">process_QUEUE_BYTES_LIMIT()</a>, <a class="el" href="class_s_c_t_p_association.html#a5f8be6b52ad2164e96fd19799dfd8e01">process_QUEUE_MSGS_LIMIT()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#ae086afec043034fc936b270b71c1e6f4">process_RECEIVE_REQUEST()</a>, <a class="el" href="class_s_c_t_p_association.html#a7eb1c9af2610929a04cb744b97af93c8">process_SEND()</a>, <a class="el" href="class_s_c_t_p_association.html#acb89ca4bcc84239541171327977762e9">process_TIMEOUT_HEARTBEAT()</a>, <a class="el" href="class_s_c_t_p_association.html#ae94a9d41597adc5806db8c60f27ab45d">process_TIMEOUT_INIT_REXMIT()</a>, <a class="el" href="class_s_c_t_p_association.html#ab0e373e70c4541d7f64666e98e99e7d3">process_TIMEOUT_RTX()</a>, <a class="el" href="class_s_c_t_p_association.html#a6866e326d923a8915cdbb3d80802c527">process_TIMEOUT_SHUTDOWN()</a>, <a class="el" href="class_s_c_t_p_association.html#a6d4b0efb4884a96e406c42797456d241">processCookieAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a0dc1cc0159627680652582a01a4417f2">processCookieEchoArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a4a28f10181c8a7af088e504c76242b7c">processDataArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a1f4d814724e79e184655050a48ee1c25">processHeartbeatAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a814dc2552ad0e6710552757416f0bf93">processSackArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, <a class="el" href="class_s_c_t_p_association.html#a34812ad20b498c0275019ef3e97cec71">pushUlp()</a>, <a class="el" href="class_s_c_t_p_association.html#a64c5bcff1fa7a6f01d7e969d21b70dd5">putInDeliveryQ()</a>, <a class="el" href="class_s_c_t_p_association.html#a6d86b97308eef3f43f93ca939a3d1a52">removeFromGapList()</a>, <a class="el" href="class_s_c_t_p_association.html#ae9ffc855fcb6cfd50fb34a03beaa2d39">retransmitCookieEcho()</a>, <a class="el" href="class_s_c_t_p_association.html#aec407e9c2c1b4d0c604d8d65e78706e8">retransmitInit()</a>, <a class="el" href="class_s_c_t_p_association.html#aa28d6c19ab622ed5564596c7f300aea4">retransmitShutdown()</a>, <a class="el" href="class_s_c_t_p_association.html#a0c70dd4b41af917ecbaebd2850a808e0">retransmitShutdownAck()</a>, <a class="el" href="class_s_c_t_p_association.html#ad26d83ea266011e34ebfbc56f7ee1e75">scheduleSack()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a3ef5a4494cd7b59c44f44d6ed385e9de">sendCookieEcho()</a>, <a class="el" href="class_s_c_t_p_association.html#af039e9e17af5bd8f871e1bf6fa2ac871">sendEstabIndicationToApp()</a>, <a class="el" href="class_s_c_t_p_association.html#afc1d3dc0cb62842b7d83998facfbfd06">sendInit()</a>, <a class="el" href="class_s_c_t_p_association.html#ac40f2aff108134cbfcea6cb06e25fdb1">sendInitAck()</a>, <a class="el" href="class_s_c_t_p_association.html#aa7cf5e2c2c169ce78e856025bb181116">sendOnPath()</a>, <a class="el" href="class_s_c_t_p_association.html#a8ceae356355ca537907cabf469c813af">sendSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown()</a>, <a class="el" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, <a class="el" href="class_s_c_t_p_association.html#a3f5a43f961e2cc691da4546762e28498">storePacket()</a>, <a class="el" href="class_s_c_t_p_association.html#af82770db14bde55545184d74ffc6ea75">streamScheduler()</a>, <a class="el" href="class_s_c_t_p_association.html#a3525db7c8ed37b6e45ae4a65e9af8968">timeForSack()</a>, <a class="el" href="class_s_c_t_p_association.html#a41c4711e6ff504c121e879d6295d33f9">tsnIsDuplicate()</a>, <a class="el" href="class_s_c_t_p_association.html#a3cb6d23f3c34f789d2b1c5945d0d0a76">updateCounters()</a>, <a class="el" href="class_s_c_t_p_association.html#a99fbda3fe957b452899203d4e0f151a0">updateGapList()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">~SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="a47d58d9bc82ddd0a073a7f8c7d321872"></a><!-- doxytag: member="SCTPAssociation::status" ref="a47d58d9bc82ddd0a073a7f8c7d321872" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 <a class="el" href="class_s_c_t_p_association.html#a47d58d9bc82ddd0a073a7f8c7d321872">SCTPAssociation::status</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae8e6881f56bba3560101d1c898bf4ad3"></a><!-- doxytag: member="SCTPAssociation::T1_InitTimer" ref="ae8e6881f56bba3560101d1c898bf4ad3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_s_c_t_p_association.html#ae8e6881f56bba3560101d1c898bf4ad3">SCTPAssociation::T1_InitTimer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#adf53e2f26b7881391b481c3716783cc9">process_ASSOCIATE()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#ae94a9d41597adc5806db8c60f27ab45d">process_TIMEOUT_INIT_REXMIT()</a>, <a class="el" href="class_s_c_t_p_association.html#a6d4b0efb4884a96e406c42797456d241">processCookieAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#aa72dc267f9e5e18957f7e1c0d942195f">processInitAckArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, <a class="el" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">SCTP::removeAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">~SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="ab57c64d047b0645a215f7e0bc2d903fb"></a><!-- doxytag: member="SCTPAssociation::T2_ShutdownTimer" ref="ab57c64d047b0645a215f7e0bc2d903fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_s_c_t_p_association.html#ab57c64d047b0645a215f7e0bc2d903fb">SCTPAssociation::T2_ShutdownTimer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#a6866e326d923a8915cdbb3d80802c527">process_TIMEOUT_SHUTDOWN()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, <a class="el" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">SCTP::removeAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown()</a>, <a class="el" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">~SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="ac418d05be502a677a2f22b375f7e7a7b"></a><!-- doxytag: member="SCTPAssociation::T5_ShutdownGuardTimer" ref="ac418d05be502a677a2f22b375f7e7a7b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_s_c_t_p_association.html#ac418d05be502a677a2f22b375f7e7a7b">SCTPAssociation::T5_ShutdownGuardTimer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#add502b430991fe297800a08dd62c569d">processInitArrived()</a>, <a class="el" href="class_s_c_t_p_association.html#a001fa353226a6d713050940b2aa8587d">processTimer()</a>, <a class="el" href="class_s_c_t_p.html#a4848bf1f15a9f7aac6e53cd1889f9345">SCTP::removeAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a76fce22241a52542859d1dcddac4651a">sendShutdown()</a>, <a class="el" href="class_s_c_t_p_association.html#a588cedb27c104ca159fce93dfd53e4c7">sendShutdownAck()</a>, and <a class="el" href="class_s_c_t_p_association.html#a1529624d1f17663c5729ec2fe5fb3a28">~SCTPAssociation()</a>.</p>

</div>
</div>
<a class="anchor" id="a186aec4da8fb8e5008429c58a2cede3f"></a><!-- doxytag: member="SCTPAssociation::transmissionQ" ref="a186aec4da8fb8e5008429c58a2cede3f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_c_t_p_queue.html">SCTPQueue</a>* <a class="el" href="class_s_c_t_p_association.html#a186aec4da8fb8e5008429c58a2cede3f">SCTPAssociation::transmissionQ</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_s_c_t_p_association.html#ae6315c7df4b1537e0b8374583492a0be">cloneAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a8bc32c70b39e641735ba4f73c00480ae">dequeueAckedChunks()</a>, <a class="el" href="class_s_c_t_p_association.html#a52141caf8994688922c957e8ddee864f">getOutboundDataChunk()</a>, <a class="el" href="class_s_c_t_p_association.html#a297f87caf9d5e3b6cf596a5e44381061">handleChunkReportedAsAcked()</a>, <a class="el" href="class_s_c_t_p_association.html#a01a9c50a325baf1ebf3d25972a776393">handleChunkReportedAsMissing()</a>, <a class="el" href="class_s_c_t_p_association.html#a460894500fa0ffbff9cd62ef59db7475">initAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#aded774353d79ba7bdf53651ddc178609">moveChunkToOtherPath()</a>, <a class="el" href="class_s_c_t_p_association.html#a042415b8feb32a392938f9a844bc4aca">process_RCV_Message()</a>, <a class="el" href="class_s_c_t_p_association.html#ad1984a2e17a73629a51334904745086f">SCTPAssociation()</a>, <a class="el" href="class_s_c_t_p_association.html#a1edd1c4ec96bec1f031f6b83550471bc">stateEntered()</a>, and <a class="el" href="class_s_c_t_p_association.html#ab70d01d19820a5a16547e439b142d5fe">tsnWasReneged()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_s_c_t_p_association_8h.html">SCTPAssociation.h</a></li>
<li><a class="el" href="_s_c_t_p_association_base_8cc.html">SCTPAssociationBase.cc</a></li>
<li><a class="el" href="_s_c_t_p_association_event_proc_8cc.html">SCTPAssociationEventProc.cc</a></li>
<li><a class="el" href="_s_c_t_p_association_rcv_message_8cc.html">SCTPAssociationRcvMessage.cc</a></li>
<li><a class="el" href="_s_c_t_p_association_send_all_8cc.html">SCTPAssociationSendAll.cc</a></li>
<li><a class="el" href="_s_c_t_p_association_util_8cc.html">SCTPAssociationUtil.cc</a></li>
<li><a class="el" href="_s_c_t_p_c_c_functions_8cc.html">SCTPCCFunctions.cc</a></li>
<li><a class="el" href="_s_c_t_p_s_s_functions_8cc.html">SCTPSSFunctions.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_s_c_t_p_association.html">SCTPAssociation</a>      </li>
      <li class="footer">Generated on Fri Nov 18 2011 12:47:15 for INET Framework for OMNeT++/OMNEST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
