<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: TED Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_t_e_d.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">TED Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="TED" -->
<p><code>#include &lt;TED.h&gt;</code></p>

<p><a href="class_t_e_d-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t_e_d_1_1edge__t.html">edge_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t_e_d_1_1vertex__t.html">vertex_t</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a9409f89b04543db5a393de0ff92ec22a">TED</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a88fac0388c77fed57058e620cfcbee16">~TED</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a52fe287c977d8dc0b17744f446d42211">checkLinkValidity</a> (TELinkStateInfo link, TELinkStateInfo *&amp;match)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a37fa2a3c4c66ae13c8af636b1483bc5d">updateTimestamp</a> (TELinkStateInfo *link)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Public interface to the Traffic Engineering Database</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#aa83e78954a200bcb27bb2404bb5b8b25">getInterfaceAddrByPeerAddress</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> peerIP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a2cbea20c740531cd560319d0e53c1ddf">peerRemoteInterface</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> peerIP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#ab55f38433f365eb6411ce8d0caf20ca7">getPeerByLocalAddress</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> localInf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#aae88ed1b8900a569352c44f142cbc5a7">primaryAddress</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> localInf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a9cc1e3dea5953e7b28631734fcc6895f">isLocalPeer</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> inetAddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#aff4add6e86b7bc9ea84079aae0bb3e51">linkIndex</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> localInf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#adc61dd8f63049f938129be476136d846">linkIndex</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> advrouter, <a class="el" href="class_i_p_address.html">IPAddress</a> linkid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual IPAddressVector&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#ad644828663099041792ba8d7769c709a">getLocalAddress</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">TELinkStateInfoVector&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize</a> (int stage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a1e4c4ce9568543f1cdb77f1ddc65d4b6">numInitStages</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#acbfd544bab3c8e3dbb6646730f8651b0">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual IPAddressVector&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a58d1f05680c55637c2a727c26bc4b621">calculateShortestPath</a> (IPAddressVector dest, const TELinkStateInfoVector &amp;topology, double req_bandwidth, int priority)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a7cf6199d3850dcefc1760129c30ecad1">assignIndex</a> (std::vector&lt; <a class="el" href="struct_t_e_d_1_1vertex__t.html">vertex_t</a> &gt; &amp;vertices, <a class="el" href="class_i_p_address.html">IPAddress</a> nodeAddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct_t_e_d_1_1vertex__t.html">vertex_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#ab2c7318565cf3f4331409155cd323057">calculateShortestPaths</a> (const TELinkStateInfoVector &amp;topology, double req_bandwidth, int priority)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_routing_table.html">IRoutingTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_interface_table.html">IInterfaceTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">ift</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">routerId</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_notification_board.html">NotificationBoard</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#aca8d1a4e3fff1ced1a69271cec3789d6">nb</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">IPAddressVector&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a7e2e6277451bc7c030eac0a37e7d6547">maxMessageId</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Contains the Traffic Engineering Database and provides public methods to access it from <a class="el" href="class_m_p_l_s.html">MPLS</a> signalling protocols (<a class="el" href="class_l_d_p.html">LDP</a>, RSVP-TE).</p>
<p>See NED file for more info. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9409f89b04543db5a393de0ff92ec22a"></a><!-- doxytag: member="TED::TED" ref="a9409f89b04543db5a393de0ff92ec22a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TED::TED </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<a class="anchor" id="a88fac0388c77fed57058e620cfcbee16"></a><!-- doxytag: member="TED::~TED" ref="a88fac0388c77fed57058e620cfcbee16" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TED::~TED </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a7cf6199d3850dcefc1760129c30ecad1"></a><!-- doxytag: member="TED::assignIndex" ref="a7cf6199d3850dcefc1760129c30ecad1" args="(std::vector&lt; vertex_t &gt; &amp;vertices, IPAddress nodeAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TED::assignIndex </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="struct_t_e_d_1_1vertex__t.html">vertex_t</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>vertices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>nodeAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#ab2c7318565cf3f4331409155cd323057">calculateShortestPaths()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// find node in vertices[] whose IP address is nodeAddr</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0 ; i &lt; vertices.size(); i++)
        <span class="keywordflow">if</span> (vertices[i].node == nodeAddr)
            <span class="keywordflow">return</span> i;

    <span class="comment">// if not found, create</span>
    vertex_t newVertex;
    newVertex.node = nodeAddr;
    newVertex.dist = <a class="code" href="_t_e_d_8cc.html#adae502e9fc4510696255aa68d1413fb1">LS_INFINITY</a>;
    newVertex.parent = -1;

    vertices.push_back(newVertex);
    <span class="keywordflow">return</span> vertices.size() - 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a58d1f05680c55637c2a727c26bc4b621"></a><!-- doxytag: member="TED::calculateShortestPath" ref="a58d1f05680c55637c2a727c26bc4b621" args="(IPAddressVector dest, const TELinkStateInfoVector &amp;topology, double req_bandwidth, int priority)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IPAddressVector TED::calculateShortestPath </td>
          <td>(</td>
          <td class="paramtype">IPAddressVector&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TELinkStateInfoVector &amp;&#160;</td>
          <td class="paramname"><em>topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>req_bandwidth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="comment">// FIXME comment: what do we do here?</span>
    std::vector&lt;vertex_t&gt; V = <a class="code" href="class_t_e_d.html#ab2c7318565cf3f4331409155cd323057">calculateShortestPaths</a>(topology, req_bandwidth, priority);

    <span class="keywordtype">double</span> minDist = <a class="code" href="_t_e_d_8cc.html#adae502e9fc4510696255aa68d1413fb1">LS_INFINITY</a>;
    <span class="keywordtype">int</span> minIndex = -1;

    <span class="comment">// FIXME comment: what do we do in this block?</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; V.size(); i++)
    {
        <span class="keywordflow">if</span> (V[i].dist &gt;= minDist)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (<a class="code" href="_utils_8cc.html#a33bdc8b2583dcc9d2a8bfe1ec578352d">find</a>(dest.begin(), dest.end(), V[i].node) == dest.end())
            <span class="keywordflow">continue</span>;

        minDist = V[i].dist;
        minIndex = i;
    }

    IPAddressVector result;

    <span class="keywordflow">if</span> (minIndex &lt; 0)
        <span class="keywordflow">return</span> result;

    result.push_back(V[minIndex].node);
    <span class="keywordflow">while</span> (V[minIndex].parent != -1)
    {
        minIndex = V[minIndex].parent;
        result.insert(result.begin(), V[minIndex].node);
    }

    <span class="keywordflow">return</span> result;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab2c7318565cf3f4331409155cd323057"></a><!-- doxytag: member="TED::calculateShortestPaths" ref="ab2c7318565cf3f4331409155cd323057" args="(const TELinkStateInfoVector &amp;topology, double req_bandwidth, int priority)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="struct_t_e_d_1_1vertex__t.html">TED::vertex_t</a> &gt; TED::calculateShortestPaths </td>
          <td>(</td>
          <td class="paramtype">const TELinkStateInfoVector &amp;&#160;</td>
          <td class="paramname"><em>topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>req_bandwidth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#a58d1f05680c55637c2a727c26bc4b621">calculateShortestPath()</a>, and <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::vector&lt;vertex_t&gt; vertices;
    std::vector&lt;edge_t&gt; edges;

    <span class="comment">// select edges that have enough bandwidth left, and store them into edges[].</span>
    <span class="comment">// meanwhile, collect vertices in vectices[].</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; topology.size(); i++)
    {
        <span class="keywordflow">if</span> (!topology[i].state)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (topology[i].UnResvBandwidth[priority] &lt; req_bandwidth)
            <span class="keywordflow">continue</span>;

        edge_t edge;
        edge.src = <a class="code" href="class_t_e_d.html#a7cf6199d3850dcefc1760129c30ecad1">assignIndex</a>(vertices, topology[i].advrouter);
        edge.dest = <a class="code" href="class_t_e_d.html#a7cf6199d3850dcefc1760129c30ecad1">assignIndex</a>(vertices, topology[i].linkid);
        edge.metric = topology[i].metric;
        edges.push_back(edge);
    }

    <a class="code" href="class_i_p_address.html">IPAddress</a> srcAddr = <a class="code" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">routerId</a>;

    <span class="keywordtype">int</span> srcIndex = <a class="code" href="class_t_e_d.html#a7cf6199d3850dcefc1760129c30ecad1">assignIndex</a>(vertices, srcAddr);
    vertices[srcIndex].dist = 0.0;

    <span class="comment">// FIXME comment: Dijkstra? just guessing...</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 1; i &lt; vertices.size(); i++)
    {
        <span class="keywordtype">bool</span> mod = <span class="keyword">false</span>;

        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; edges.size(); j++)
        {
            <span class="keywordtype">int</span> src = edges[j].src;
            <span class="keywordtype">int</span> dest = edges[j].dest;

            ASSERT(src &gt;= 0);
            ASSERT(dest &gt;= 0);
            ASSERT(src &lt; (<span class="keywordtype">int</span>)vertices.size());
            ASSERT(dest &lt; (<span class="keywordtype">int</span>)vertices.size());
            ASSERT(src != dest);

            <span class="keywordflow">if</span> (vertices[src].dist + edges[j].metric &gt;= vertices[dest].dist)
                <span class="keywordflow">continue</span>;

            vertices[dest].dist = vertices[src].dist + edges[j].metric;
            vertices[dest].parent = src;

            mod = <span class="keyword">true</span>;
        }

        <span class="keywordflow">if</span> (!mod)
            <span class="keywordflow">break</span>;
    }

    <span class="keywordflow">return</span> vertices;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52fe287c977d8dc0b17744f446d42211"></a><!-- doxytag: member="TED::checkLinkValidity" ref="a52fe287c977d8dc0b17744f446d42211" args="(TELinkStateInfo link, TELinkStateInfo *&amp;match)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TED::checkLinkValidity </td>
          <td>(</td>
          <td class="paramtype">TELinkStateInfo&#160;</td>
          <td class="paramname"><em>link</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TELinkStateInfo *&amp;&#160;</td>
          <td class="paramname"><em>match</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_link_state_routing.html#a9326b19a88da1ba1af639fe6a820fb36">LinkStateRouting::processLINK_STATE_MESSAGE()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::vector&lt;TELinkStateInfo&gt;::iterator it;

    match = NULL;

    <span class="keywordflow">for</span> (it = <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>.begin(); it != <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;sourceId == link.sourceId &amp;&amp; it-&gt;messageId == link.messageId &amp;&amp; it-&gt;timestamp == link.timestamp)
        {
            <span class="comment">// we&#39;ve already seen this message, ignore it</span>
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }

        <span class="keywordflow">if</span> (it-&gt;advrouter == link.advrouter &amp;&amp; it-&gt;linkid == link.linkid)
        {
            <span class="comment">// we&#39;ve have info about this link</span>

            <span class="keywordflow">if</span> (it-&gt;timestamp &lt; link.timestamp || (it-&gt;timestamp == link.timestamp &amp;&amp; it-&gt;messageId &lt; link.messageId))
            {
                <span class="comment">// but it&#39;s older, use this new</span>
                match = &amp;(*it);
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">else</span>
            {
                <span class="comment">// and it&#39;s newer, forget this message</span>
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
        }
    }

    <span class="comment">// no or not up2date info, link is interesting</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa83e78954a200bcb27bb2404bb5b8b25"></a><!-- doxytag: member="TED::getInterfaceAddrByPeerAddress" ref="aa83e78954a200bcb27bb2404bb5b8b25" args="(IPAddress peerIP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_p_address.html">IPAddress</a> TED::getInterfaceAddrByPeerAddress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>peerIP</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">RSVP::commitResv()</a>, <a class="el" href="class_r_s_v_p.html#a1578adc0aa64e000a877ab117a3e9060">RSVP::delSession()</a>, <a class="el" href="class_r_s_v_p.html#a74c8cb3303ae62d7e118cbacacf0c5e0">RSVP::evalNextHopInterface()</a>, <a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">RSVP::pathProblem()</a>, <a class="el" href="class_r_s_v_p.html#a9d40c6ab5084f41b18645183f85fecc9">RSVP::processPathTearMsg()</a>, <a class="el" href="class_r_s_v_p.html#a5bc9ab7d3a8b3db1c563d7e7adddb8d6">RSVP::processPSB_TIMEOUT()</a>, and <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::vector&lt;TELinkStateInfo&gt;::iterator it;
    <span class="keywordflow">for</span> (it = <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>.begin(); it != <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>.end(); it++)
        <span class="keywordflow">if</span> (it-&gt;linkid == peerIP &amp;&amp; it-&gt;advrouter == <a class="code" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">routerId</a>)
            <span class="keywordflow">return</span> it-&gt;local;
    error(<span class="stringliteral">&quot;not a local peer: %s&quot;</span>, peerIP.<a class="code" href="class_i_p_address.html#a50f58febbf2ded78b9f6e32e579f5d2b">str</a>().c_str());
    <span class="keywordflow">return</span> <a class="code" href="class_i_p_address.html">IPAddress</a>(); <span class="comment">// prevent warning</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad644828663099041792ba8d7769c709a"></a><!-- doxytag: member="TED::getLocalAddress" ref="ad644828663099041792ba8d7769c709a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IPAddressVector TED::getLocalAddress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab55f38433f365eb6411ce8d0caf20ca7"></a><!-- doxytag: member="TED::getPeerByLocalAddress" ref="ab55f38433f365eb6411ce8d0caf20ca7" args="(IPAddress localInf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_p_address.html">IPAddress</a> TED::getPeerByLocalAddress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>localInf</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a74c8cb3303ae62d7e118cbacacf0c5e0">RSVP::evalNextHopInterface()</a>, <a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">RSVP::pathProblem()</a>, <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>, <a class="el" href="class_r_s_v_p.html#acc0978a512bc47c6cbeea226904a4e51">RSVP::refreshPath()</a>, and <a class="el" href="class_r_s_v_p.html#a56c68314c8b1e8b82370416d2b2f4785">RSVP::setupHello()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = <a class="code" href="class_t_e_d.html#aff4add6e86b7bc9ea84079aae0bb3e51">linkIndex</a>(localInf);
    <span class="keywordflow">return</span> <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[index].linkid;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acbfd544bab3c8e3dbb6646730f8651b0"></a><!-- doxytag: member="TED::handleMessage" ref="acbfd544bab3c8e3dbb6646730f8651b0" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TED::handleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    ASSERT(<span class="keyword">false</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afad702310eca4f7c9cd4cc0c994cb996"></a><!-- doxytag: member="TED::initialize" ref="afad702310eca4f7c9cd4cc0c994cb996" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TED::initialize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="comment">// we have to wait for stage 2 until interfaces get registered (stage 0)</span>
    <span class="comment">// and get their auto-assigned IP addresses (stage 2); routerId gets</span>
    <span class="comment">// assigned in stage 3</span>
    <span class="keywordflow">if</span> (stage!=4)
        <span class="keywordflow">return</span>;

    <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a> = <a class="code" href="class_routing_table_access.html">RoutingTableAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
    <a class="code" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">ift</a> = <a class="code" href="class_interface_table_access.html">InterfaceTableAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
    <a class="code" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">routerId</a> = <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a64a9a5b1414f4da0b7b0a3e079091f62">getRouterId</a>();
    <a class="code" href="class_t_e_d.html#aca8d1a4e3fff1ced1a69271cec3789d6">nb</a> = <a class="code" href="class_notification_board_access.html">NotificationBoardAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();

    <a class="code" href="class_t_e_d.html#a7e2e6277451bc7c030eac0a37e7d6547">maxMessageId</a> = 0;

    ASSERT(!<a class="code" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">routerId</a>.<a class="code" href="class_i_p_address.html#a7fb3c274d7a8600be890f83c028d5f96">isUnspecified</a>());

    <span class="comment">//</span>
    <span class="comment">// Extract initial TED contents from the routing table.</span>
    <span class="comment">//</span>
    <span class="comment">// We need to create one TED entry (TELinkStateInfo) for each link,</span>
    <span class="comment">// i.e. for each physical interface.</span>
    <span class="comment">//</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a2b0ce46cd92da6f64fc363410dc71904">getNumInterfaces</a>(); i++)
    {
        <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i);

        <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#a28c151905c57d6d19ecb026367f93278">getNodeOutputGateId</a>() == -1)  <span class="comment">// ignore if it&#39;s not a physical interface</span>
            <span class="keywordflow">continue</span>;

        <span class="comment">//</span>
        <span class="comment">// We&#39;ll need to fill in &quot;linkid&quot; and &quot;remote&quot; (ie. peer addr).</span>
        <span class="comment">//</span>
        <span class="comment">// Real link state protocols find the peer address by exchanging HELLO messages;</span>
        <span class="comment">// in this model we haven&#39;t implemented HELLO but provide peer addresses via</span>
        <span class="comment">// preconfigured static host routes in routing table.</span>
        <span class="comment">//</span>
        <span class="keyword">const</span> <a class="code" href="class_i_p_route.html">IPRoute</a> *rentry = NULL;
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#ada2fac98d1d1c80c291be239b075c63b">getNumRoutes</a>(); j++)
        {
            rentry = <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a89f3eb433e309043cde517238eef5214">getRoute</a>(j);
            <span class="keywordflow">if</span> (rentry-&gt;<a class="code" href="class_i_p_route.html#a1b01dfecb70fc9384695ce312dcab0a4">getInterface</a>()==ie &amp;&amp; rentry-&gt;<a class="code" href="class_i_p_route.html#ae1e091d2b6a8492e36c3b7bac483e7af">getType</a>()==<a class="code" href="class_i_p_route.html#affdd22b24049e9d8d991b955a973d32eab46216a10952298ab9565997122d7225" title="Directly attached to the router.">IPRoute::DIRECT</a>)
                <span class="keywordflow">break</span>;
        }
        ASSERT(rentry);
        <a class="code" href="class_i_p_address.html">IPAddress</a> linkid = rentry-&gt;<a class="code" href="class_i_p_route.html#a07adcdcc04cb4d50f12f060c7206b73e">getHost</a>();
        <a class="code" href="class_i_p_address.html">IPAddress</a> remote = rentry-&gt;<a class="code" href="class_i_p_route.html#aa1aa349eb850c0d9acb3f01ba0ee61d5">getGateway</a>();
        ASSERT(!remote.<a class="code" href="class_i_p_address.html#a7fb3c274d7a8600be890f83c028d5f96">isUnspecified</a>());

        <span class="comment">// find bandwidth of the link</span>
        cGate *g = getParentModule()-&gt;gate(ie-&gt;<a class="code" href="class_interface_entry.html#a28c151905c57d6d19ecb026367f93278">getNodeOutputGateId</a>());
        ASSERT(g);
        <span class="keywordtype">double</span> linkBandwidth = g-&gt;getChannel()-&gt;par(<span class="stringliteral">&quot;datarate&quot;</span>);

        <span class="comment">//</span>
        <span class="comment">// fill in and insert TED entry</span>
        <span class="comment">//</span>
        TELinkStateInfo entry;
        entry.advrouter = <a class="code" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">routerId</a>;
        entry.local = ie-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aec8ebefd03acad479ac89d31d7228331">getIPAddress</a>();
        entry.linkid = linkid;
        entry.remote = remote;
        entry.MaxBandwidth = linkBandwidth;
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 8; j++)
            entry.UnResvBandwidth[j] = entry.MaxBandwidth;
        entry.state = <span class="keyword">true</span>;

        <span class="comment">// use g-&gt;getChannel()-&gt;par(&quot;delay&quot;).doubleValue() for shortest delay calculation</span>
        entry.metric = rentry-&gt;<a class="code" href="class_i_p_route.html#a1b01dfecb70fc9384695ce312dcab0a4">getInterface</a>()-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aac9f062b0ffa8b944b4c65eecbf5251c">getMetric</a>();

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;metric set to=&quot;</span> &lt;&lt; entry.metric &lt;&lt; endl;

        entry.sourceId = <a class="code" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">routerId</a>.<a class="code" href="class_i_p_address.html#a807ca46964a8403cf0c70f0772179524">getInt</a>();
        entry.messageId = ++<a class="code" href="class_t_e_d.html#a7e2e6277451bc7c030eac0a37e7d6547">maxMessageId</a>;
        entry.timestamp = simTime();

        <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>.push_back(entry);
    }

    <span class="comment">// extract list of local interface addresses into interfaceAddrs[]</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a2b0ce46cd92da6f64fc363410dc71904">getNumInterfaces</a>(); i++)
    {
        <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(i);
        <span class="keywordflow">if</span> (<a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a57e790dfac86432f349e15116e5961d1">getInterfaceByAddress</a>(ie-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aec8ebefd03acad479ac89d31d7228331">getIPAddress</a>()) != ie)
            error(<span class="stringliteral">&quot;MPLS models assume interfaces to have unique addresses, &quot;</span>
                  <span class="stringliteral">&quot;but address of &#39;%s&#39; (%s) is not unique&quot;</span>,
                  ie-&gt;getName(), ie-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aec8ebefd03acad479ac89d31d7228331">getIPAddress</a>().<a class="code" href="class_i_p_address.html#a50f58febbf2ded78b9f6e32e579f5d2b">str</a>().c_str());
        <span class="keywordflow">if</span> (!ie-&gt;<a class="code" href="class_interface_entry.html#a0ee93e88273f61390d1293dae55004d1">isLoopback</a>())
            <a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>.push_back(ie-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aec8ebefd03acad479ac89d31d7228331">getIPAddress</a>());
    }

    <a class="code" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable</a>();

    WATCH_VECTOR(<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a31051946d209ff61ec712905ffe805c3"></a><!-- doxytag: member="TED::isLocalAddress" ref="a31051946d209ff61ec712905ffe805c3" args="(IPAddress addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TED::isLocalAddress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a58055c8fd6f3b98c57ef68adeaa009e3">RSVP::allocateResource()</a>, <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">RSVP::commitResv()</a>, <a class="el" href="class_r_s_v_p.html#a4c582acc45b47942f56a34aa35fcfc70">RSVP::createPSB()</a>, <a class="el" href="class_r_s_v_p.html#a05e7433548bd2ecc502fa40210d85f46">RSVP::doCACCheck()</a>, <a class="el" href="class_r_s_v_p.html#a74c8cb3303ae62d7e118cbacacf0c5e0">RSVP::evalNextHopInterface()</a>, <a class="el" href="class_r_s_v_p.html#a933ffa437ba9f3cef9efdfc5f1ac18a9">RSVP::preempt()</a>, <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">RSVP::processPathMsg()</a>, <a class="el" href="class_r_s_v_p.html#a5bc9ab7d3a8b3db1c563d7e7adddb8d6">RSVP::processPSB_TIMEOUT()</a>, <a class="el" href="class_r_s_v_p.html#a2fc38252a7b31028e80b360fc8dc7af3">RSVP::processRSB_TIMEOUT()</a>, <a class="el" href="class_r_s_v_p.html#acc0978a512bc47c6cbeea226904a4e51">RSVP::refreshPath()</a>, <a class="el" href="class_r_s_v_p.html#a8745c357a38f4ab3b5c39668b5498820">RSVP::refreshResv()</a>, and <a class="el" href="class_r_s_v_p.html#a130138413206f03179fc63d56f4937cd">RSVP::scheduleRefreshTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>.size(); i++)
        <span class="keywordflow">if</span> (<a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>[i] == addr)
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9cc1e3dea5953e7b28631734fcc6895f"></a><!-- doxytag: member="TED::isLocalPeer" ref="a9cc1e3dea5953e7b28631734fcc6895f" args="(IPAddress inetAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TED::isLocalPeer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>inetAddr</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#a2cbea20c740531cd560319d0e53c1ddf">peerRemoteInterface()</a>, and <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::vector&lt;TELinkStateInfo&gt;::iterator it;
    <span class="keywordflow">for</span> (it = <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>.begin(); it != <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>.end(); it++)
        <span class="keywordflow">if</span> (it-&gt;linkid == inetAddr &amp;&amp; it-&gt;advrouter == <a class="code" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">routerId</a>)
            <span class="keywordflow">break</span>;
    <span class="keywordflow">return</span> it != <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>.end();
}
</pre></div>
</div>
</div>
<a class="anchor" id="aff4add6e86b7bc9ea84079aae0bb3e51"></a><!-- doxytag: member="TED::linkIndex" ref="aff4add6e86b7bc9ea84079aae0bb3e51" args="(IPAddress localInf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int TED::linkIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>localInf</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a58055c8fd6f3b98c57ef68adeaa009e3">RSVP::allocateResource()</a>, <a class="el" href="class_r_s_v_p.html#a05e7433548bd2ecc502fa40210d85f46">RSVP::doCACCheck()</a>, <a class="el" href="class_t_e_d.html#ab55f38433f365eb6411ce8d0caf20ca7">getPeerByLocalAddress()</a>, <a class="el" href="class_r_s_v_p.html#a933ffa437ba9f3cef9efdfc5f1ac18a9">RSVP::preempt()</a>, <a class="el" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">RSVP::processHELLO_TIMEOUT()</a>, <a class="el" href="class_l_d_p.html#aa11dcfcdebea0304d26343746d28eb6c">LDP::processHelloTimeout()</a>, <a class="el" href="class_l_d_p.html#a129493952b252d5c5d426c4056197a4f">LDP::processLDPHello()</a>, <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">RSVP::processPathMsg()</a>, and <a class="el" href="class_r_s_v_p.html#a771e852915d4521e65a3d243bdf1a82c">RSVP::recoveryEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>.size(); i++)
        <span class="keywordflow">if</span> (<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[i].advrouter == <a class="code" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">routerId</a> &amp;&amp; <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[i].local == localInf)
            <span class="keywordflow">return</span> i;
    ASSERT(<span class="keyword">false</span>);
    <span class="keywordflow">return</span> -1; <span class="comment">// to eliminate warning</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="adc61dd8f63049f938129be476136d846"></a><!-- doxytag: member="TED::linkIndex" ref="adc61dd8f63049f938129be476136d846" args="(IPAddress advrouter, IPAddress linkid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int TED::linkIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>advrouter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>linkid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>.size(); i++)
        <span class="keywordflow">if</span> (<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[i].advrouter == advrouter &amp;&amp; <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[i].linkid == linkid)
            <span class="keywordflow">return</span> i;
    ASSERT(<span class="keyword">false</span>);
    <span class="keywordflow">return</span> -1; <span class="comment">// to eliminate warning</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1e4c4ce9568543f1cdb77f1ddc65d4b6"></a><!-- doxytag: member="TED::numInitStages" ref="a1e4c4ce9568543f1cdb77f1ddc65d4b6" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int TED::numInitStages </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> 5;}
</pre></div>
</div>
</div>
<a class="anchor" id="a2cbea20c740531cd560319d0e53c1ddf"></a><!-- doxytag: member="TED::peerRemoteInterface" ref="a2cbea20c740531cd560319d0e53c1ddf" args="(IPAddress peerIP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_p_address.html">IPAddress</a> TED::peerRemoteInterface </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>peerIP</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#af84a7ab872ddde72e4e6394c904285ab">RSVP::refreshResv()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(<a class="code" href="class_t_e_d.html#a9cc1e3dea5953e7b28631734fcc6895f">isLocalPeer</a>(peerIP));
    std::vector&lt;TELinkStateInfo&gt;::iterator it;
    <span class="keywordflow">for</span> (it = <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>.begin(); it != <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>.end(); it++)
        <span class="keywordflow">if</span> (it-&gt;linkid == peerIP &amp;&amp; it-&gt;advrouter == <a class="code" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">routerId</a>)
            <span class="keywordflow">return</span> it-&gt;remote;
    error(<span class="stringliteral">&quot;not a local peer: %s&quot;</span>, peerIP.<a class="code" href="class_i_p_address.html#a50f58febbf2ded78b9f6e32e579f5d2b">str</a>().c_str());
    <span class="keywordflow">return</span> <a class="code" href="class_i_p_address.html">IPAddress</a>(); <span class="comment">// prevent warning</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="aae88ed1b8900a569352c44f142cbc5a7"></a><!-- doxytag: member="TED::primaryAddress" ref="aae88ed1b8900a569352c44f142cbc5a7" args="(IPAddress localInf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_p_address.html">IPAddress</a> TED::primaryAddress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>localInf</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a4248b4a0ff4175b4be496ec30aee8672">RSVP::processHelloMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>.size(); i++)
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[i].local == localInf)
            <span class="keywordflow">return</span> <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[i].advrouter;

        <span class="keywordflow">if</span> (<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[i].remote == localInf)
            <span class="keywordflow">return</span> <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[i].linkid;
    }
    ASSERT(<span class="keyword">false</span>);
    <span class="keywordflow">return</span> <a class="code" href="class_i_p_address.html">IPAddress</a>(); <span class="comment">// to eliminate warning</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a20dbae0b12fb78bc9771eba4e11f0edc"></a><!-- doxytag: member="TED::rebuildRoutingTable" ref="a20dbae0b12fb78bc9771eba4e11f0edc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TED::rebuildRoutingTable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>, <a class="el" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">RSVP::processHELLO_TIMEOUT()</a>, <a class="el" href="class_l_d_p.html#aa11dcfcdebea0304d26343746d28eb6c">LDP::processHelloTimeout()</a>, <a class="el" href="class_l_d_p.html#a129493952b252d5c5d426c4056197a4f">LDP::processLDPHello()</a>, <a class="el" href="class_link_state_routing.html#a9326b19a88da1ba1af639fe6a820fb36">LinkStateRouting::processLINK_STATE_MESSAGE()</a>, and <a class="el" href="class_r_s_v_p.html#a771e852915d4521e65a3d243bdf1a82c">RSVP::recoveryEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;rebuilding routing table at &quot;</span> &lt;&lt; <a class="code" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">routerId</a> &lt;&lt; endl;

    std::vector&lt;vertex_t&gt; V = <a class="code" href="class_t_e_d.html#ab2c7318565cf3f4331409155cd323057">calculateShortestPaths</a>(<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>, 0.0, 7);

    <span class="comment">// remove all routing entries, except multicast ones (we don&#39;t care about them)</span>
    <span class="keywordtype">int</span> n = <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#ada2fac98d1d1c80c291be239b075c63b">getNumRoutes</a>();
    <span class="keywordtype">int</span> j = 0;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
    {
        <span class="keyword">const</span> <a class="code" href="class_i_p_route.html">IPRoute</a> *entry = <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a89f3eb433e309043cde517238eef5214">getRoute</a>(j);
        <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="class_i_p_route.html#a07adcdcc04cb4d50f12f060c7206b73e">getHost</a>().<a class="code" href="class_i_p_address.html#a9b6b5a118e8e1f6f83f2ccffd5a72125">isMulticast</a>())
        {
            ++j;
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#adc051b6287f397968f83aff251794cc8">deleteRoute</a>(entry);
        }
    }

<span class="comment">//  for (unsigned int i = 0; i &lt; V.size(); i++)</span>
<span class="comment">//  {</span>
<span class="comment">//      EV &lt;&lt; &quot;V[&quot; &lt;&lt; i &lt;&lt; &quot;].node=&quot; &lt;&lt; V[i].node &lt;&lt; endl;</span>
<span class="comment">//      EV &lt;&lt; &quot;V[&quot; &lt;&lt; i &lt;&lt; &quot;].parent=&quot; &lt;&lt; V[i].parent &lt;&lt; endl;</span>
<span class="comment">//      EV &lt;&lt; &quot;V[&quot; &lt;&lt; i &lt;&lt; &quot;].dist=&quot; &lt;&lt; V[i].dist &lt;&lt; endl;</span>
<span class="comment">//  }</span>

    <span class="comment">// insert remote destinations</span>

    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; V.size(); i++)
    {
        <span class="keywordflow">if</span> (V[i].node == <a class="code" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">routerId</a>) <span class="comment">// us</span>
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (V[i].parent == -1) <span class="comment">// unreachable</span>
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (<a class="code" href="class_t_e_d.html#a9cc1e3dea5953e7b28631734fcc6895f">isLocalPeer</a>(V[i].node)) <span class="comment">// local peer</span>
            <span class="keywordflow">continue</span>;

        <span class="keywordtype">int</span> nHop = i;

        <span class="keywordflow">while</span> (!<a class="code" href="class_t_e_d.html#a9cc1e3dea5953e7b28631734fcc6895f">isLocalPeer</a>(V[nHop].node))
        {
            nHop = V[nHop].parent;
        }

        ASSERT(<a class="code" href="class_t_e_d.html#a9cc1e3dea5953e7b28631734fcc6895f">isLocalPeer</a>(V[nHop].node));

        <a class="code" href="class_i_p_route.html">IPRoute</a> *entry = <span class="keyword">new</span> <a class="code" href="class_i_p_route.html">IPRoute</a>;
        entry-&gt;<a class="code" href="class_i_p_route.html#af706d909f82600db0ff2191540131b91">setHost</a>(V[i].node);

        <span class="keywordflow">if</span> (V[i].node == V[nHop].node)
        {
            entry-&gt;<a class="code" href="class_i_p_route.html#aae76b34aab79a69caca7e19ad8f39f3f">setGateway</a>(<a class="code" href="class_i_p_address.html">IPAddress</a>());
            entry-&gt;<a class="code" href="class_i_p_route.html#a545b92b4bd15e1dad59afba65344c6f1">setType</a>(entry-&gt;<a class="code" href="class_i_p_route.html#affdd22b24049e9d8d991b955a973d32eab46216a10952298ab9565997122d7225" title="Directly attached to the router.">DIRECT</a>);
        }
        <span class="keywordflow">else</span>
        {
            entry-&gt;<a class="code" href="class_i_p_route.html#aae76b34aab79a69caca7e19ad8f39f3f">setGateway</a>(V[nHop].node);
            entry-&gt;<a class="code" href="class_i_p_route.html#a545b92b4bd15e1dad59afba65344c6f1">setType</a>(entry-&gt;<a class="code" href="class_i_p_route.html#affdd22b24049e9d8d991b955a973d32ea7e558ac291a7e5173702d655d80e627c" title="Reached through another router.">REMOTE</a>);
        }
        entry-&gt;<a class="code" href="class_i_p_route.html#a5111618dad4786d4fda4f770aacc5e41">setInterface</a>(<a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a57e790dfac86432f349e15116e5961d1">getInterfaceByAddress</a>(<a class="code" href="class_t_e_d.html#aa83e78954a200bcb27bb2404bb5b8b25">getInterfaceAddrByPeerAddress</a>(V[nHop].node)));
        entry-&gt;<a class="code" href="class_i_p_route.html#a9e1a72084dc1acc1b429bbd8c4e72a32">setSource</a>(<a class="code" href="class_i_p_route.html#a8b19adf2d204de05cc8fdee67a270bc6a2078753c4e756298431cc93e731c75b5" title="managed by the given routing protocol">IPRoute::OSPF</a>);

        entry-&gt;<a class="code" href="class_i_p_route.html#a8fd0ecc3020120431bae84d2eae7cc6a">setNetmask</a>(0xffffffff);
        entry-&gt;<a class="code" href="class_i_p_route.html#ae0d4294f3ad0d91b283f5da2b183335f">setMetric</a>(0);

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;  inserting route: host=&quot;</span> &lt;&lt; entry-&gt;<a class="code" href="class_i_p_route.html#a07adcdcc04cb4d50f12f060c7206b73e">getHost</a>() &lt;&lt; <span class="stringliteral">&quot; interface=&quot;</span> &lt;&lt; entry-&gt;<a class="code" href="class_i_p_route.html#a38dbdda8865be4489c587ee841e878ca">getInterfaceName</a>() &lt;&lt; <span class="stringliteral">&quot; nexthop=&quot;</span> &lt;&lt; entry-&gt;<a class="code" href="class_i_p_route.html#aa1aa349eb850c0d9acb3f01ba0ee61d5">getGateway</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

        <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#af423d065165da4a55e86385efe1f69d1">addRoute</a>(entry);
    }

    <span class="comment">// insert local peers</span>

    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>.size(); i++)
    {
        <a class="code" href="class_i_p_route.html">IPRoute</a> *entry = <span class="keyword">new</span> <a class="code" href="class_i_p_route.html">IPRoute</a>;

        entry-&gt;<a class="code" href="class_i_p_route.html#af706d909f82600db0ff2191540131b91">setHost</a>(<a class="code" href="class_t_e_d.html#ab55f38433f365eb6411ce8d0caf20ca7">getPeerByLocalAddress</a>(<a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>[i]));
        entry-&gt;<a class="code" href="class_i_p_route.html#aae76b34aab79a69caca7e19ad8f39f3f">setGateway</a>(<a class="code" href="class_i_p_address.html">IPAddress</a>());
        entry-&gt;<a class="code" href="class_i_p_route.html#a545b92b4bd15e1dad59afba65344c6f1">setType</a>(entry-&gt;<a class="code" href="class_i_p_route.html#affdd22b24049e9d8d991b955a973d32eab46216a10952298ab9565997122d7225" title="Directly attached to the router.">DIRECT</a>);
        entry-&gt;<a class="code" href="class_i_p_route.html#a5111618dad4786d4fda4f770aacc5e41">setInterface</a>(<a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a57e790dfac86432f349e15116e5961d1">getInterfaceByAddress</a>(<a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>[i]));
        entry-&gt;<a class="code" href="class_i_p_route.html#a9e1a72084dc1acc1b429bbd8c4e72a32">setSource</a>(<a class="code" href="class_i_p_route.html#a8b19adf2d204de05cc8fdee67a270bc6a2078753c4e756298431cc93e731c75b5" title="managed by the given routing protocol">IPRoute::OSPF</a>);

        entry-&gt;<a class="code" href="class_i_p_route.html#a8fd0ecc3020120431bae84d2eae7cc6a">setNetmask</a>(0xffffffff);
        entry-&gt;<a class="code" href="class_i_p_route.html#ae0d4294f3ad0d91b283f5da2b183335f">setMetric</a>(0); <span class="comment">// XXX FIXME what&#39;s that?</span>

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;  inserting route: local=&quot;</span> &lt;&lt; <a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>[i] &lt;&lt; <span class="stringliteral">&quot; peer=&quot;</span> &lt;&lt; entry-&gt;<a class="code" href="class_i_p_route.html#a07adcdcc04cb4d50f12f060c7206b73e">getHost</a>() &lt;&lt; <span class="stringliteral">&quot; interface=&quot;</span> &lt;&lt; entry-&gt;<a class="code" href="class_i_p_route.html#a38dbdda8865be4489c587ee841e878ca">getInterfaceName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

        <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#af423d065165da4a55e86385efe1f69d1">addRoute</a>(entry);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a37fa2a3c4c66ae13c8af636b1483bc5d"></a><!-- doxytag: member="TED::updateTimestamp" ref="a37fa2a3c4c66ae13c8af636b1483bc5d" args="(TELinkStateInfo *link)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TED::updateTimestamp </td>
          <td>(</td>
          <td class="paramtype">TELinkStateInfo *&#160;</td>
          <td class="paramname"><em>link</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_link_state_routing.html#a4192929ab1fa083342047b67401d3006">LinkStateRouting::receiveChangeNotification()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(link-&gt;advrouter == <a class="code" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">routerId</a>);

    link-&gt;timestamp = simTime();
    link-&gt;messageId = ++<a class="code" href="class_t_e_d.html#a7e2e6277451bc7c030eac0a37e7d6547">maxMessageId</a>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ac0b818ffeadae19fce49446708a46c1d"></a><!-- doxytag: member="TED::ift" ref="ac0b818ffeadae19fce49446708a46c1d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_interface_table.html">IInterfaceTable</a>* <a class="el" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">TED::ift</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="aa0649c6cfd4582efb9b840e54bd35523"></a><!-- doxytag: member="TED::interfaceAddrs" ref="aa0649c6cfd4582efb9b840e54bd35523" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IPAddressVector <a class="el" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">TED::interfaceAddrs</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#ad644828663099041792ba8d7769c709a">getLocalAddress()</a>, <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>, <a class="el" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress()</a>, and <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>.</p>

</div>
</div>
<a class="anchor" id="a7e2e6277451bc7c030eac0a37e7d6547"></a><!-- doxytag: member="TED::maxMessageId" ref="a7e2e6277451bc7c030eac0a37e7d6547" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_t_e_d.html#a7e2e6277451bc7c030eac0a37e7d6547">TED::maxMessageId</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>, and <a class="el" href="class_t_e_d.html#a37fa2a3c4c66ae13c8af636b1483bc5d">updateTimestamp()</a>.</p>

</div>
</div>
<a class="anchor" id="aca8d1a4e3fff1ced1a69271cec3789d6"></a><!-- doxytag: member="TED::nb" ref="aca8d1a4e3fff1ced1a69271cec3789d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_notification_board.html">NotificationBoard</a>* <a class="el" href="class_t_e_d.html#aca8d1a4e3fff1ced1a69271cec3789d6">TED::nb</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a55191236221fee8208a48124b8fffa0a"></a><!-- doxytag: member="TED::routerId" ref="a55191236221fee8208a48124b8fffa0a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_p_address.html">IPAddress</a> <a class="el" href="class_t_e_d.html#a55191236221fee8208a48124b8fffa0a">TED::routerId</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#ab2c7318565cf3f4331409155cd323057">calculateShortestPaths()</a>, <a class="el" href="class_t_e_d.html#aa83e78954a200bcb27bb2404bb5b8b25">getInterfaceAddrByPeerAddress()</a>, <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>, <a class="el" href="class_t_e_d.html#a9cc1e3dea5953e7b28631734fcc6895f">isLocalPeer()</a>, <a class="el" href="class_t_e_d.html#aff4add6e86b7bc9ea84079aae0bb3e51">linkIndex()</a>, <a class="el" href="class_t_e_d.html#a2cbea20c740531cd560319d0e53c1ddf">peerRemoteInterface()</a>, <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>, and <a class="el" href="class_t_e_d.html#a37fa2a3c4c66ae13c8af636b1483bc5d">updateTimestamp()</a>.</p>

</div>
</div>
<a class="anchor" id="a9abf4d5fb005f0a51c59ae25aeb55e44"></a><!-- doxytag: member="TED::rt" ref="a9abf4d5fb005f0a51c59ae25aeb55e44" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_routing_table.html">IRoutingTable</a>* <a class="el" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">TED::rt</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>, and <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>.</p>

</div>
</div>
<a class="anchor" id="a8ab5c356644784262be0ae484395441e"></a><!-- doxytag: member="TED::ted" ref="a8ab5c356644784262be0ae484395441e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TELinkStateInfoVector <a class="el" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">TED::ted</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The link state database. (TELinkStateInfoVector is defined in TED.msg) </p>

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a58055c8fd6f3b98c57ef68adeaa009e3">RSVP::allocateResource()</a>, <a class="el" href="class_t_e_d.html#a52fe287c977d8dc0b17744f446d42211">checkLinkValidity()</a>, <a class="el" href="class_r_s_v_p.html#a05e7433548bd2ecc502fa40210d85f46">RSVP::doCACCheck()</a>, <a class="el" href="class_t_e_d.html#aa83e78954a200bcb27bb2404bb5b8b25">getInterfaceAddrByPeerAddress()</a>, <a class="el" href="class_t_e_d.html#ab55f38433f365eb6411ce8d0caf20ca7">getPeerByLocalAddress()</a>, <a class="el" href="class_link_state_routing.html#adcd65572bd812c97222dfd25dc9de1a9">LinkStateRouting::handleMessage()</a>, <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>, <a class="el" href="class_t_e_d.html#a9cc1e3dea5953e7b28631734fcc6895f">isLocalPeer()</a>, <a class="el" href="class_t_e_d.html#aff4add6e86b7bc9ea84079aae0bb3e51">linkIndex()</a>, <a class="el" href="class_t_e_d.html#a2cbea20c740531cd560319d0e53c1ddf">peerRemoteInterface()</a>, <a class="el" href="class_r_s_v_p.html#a933ffa437ba9f3cef9efdfc5f1ac18a9">RSVP::preempt()</a>, <a class="el" href="class_t_e_d.html#aae88ed1b8900a569352c44f142cbc5a7">primaryAddress()</a>, <a class="el" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">RSVP::processHELLO_TIMEOUT()</a>, <a class="el" href="class_l_d_p.html#aa11dcfcdebea0304d26343746d28eb6c">LDP::processHelloTimeout()</a>, <a class="el" href="class_l_d_p.html#a129493952b252d5c5d426c4056197a4f">LDP::processLDPHello()</a>, <a class="el" href="class_link_state_routing.html#a9326b19a88da1ba1af639fe6a820fb36">LinkStateRouting::processLINK_STATE_MESSAGE()</a>, <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">RSVP::processPathMsg()</a>, <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>, <a class="el" href="class_link_state_routing.html#a4192929ab1fa083342047b67401d3006">LinkStateRouting::receiveChangeNotification()</a>, <a class="el" href="class_r_s_v_p.html#a771e852915d4521e65a3d243bdf1a82c">RSVP::recoveryEvent()</a>, and <a class="el" href="class_link_state_routing.html#abe98db23137657d430814f3dbaadfe91">LinkStateRouting::sendToPeers()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_t_e_d_8h.html">TED.h</a></li>
<li><a class="el" href="_t_e_d_8cc.html">TED.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_t_e_d.html">TED</a>      </li>
      <li class="footer">Generated on Fri Nov 18 2011 12:47:17 for INET Framework for OMNeT++/OMNEST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
