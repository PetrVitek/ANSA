<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>INET Framework for OMNeT++/OMNEST: TED Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_t_e_d.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">TED Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="TED" -->
<p>Contains the Traffic Engineering Database and provides public methods to access it from <a class="el" href="class_m_p_l_s.html" title="Implements the MPLS protocol; see the NED file for more info.">MPLS</a> signalling protocols (<a class="el" href="class_l_d_p.html" title="LDP (rfc 3036) protocol implementation.">LDP</a>, RSVP-TE).  
 <a href="class_t_e_d.html#details">More...</a></p>

<p><code>#include &lt;TED.h&gt;</code></p>

<p><a href="class_t_e_d-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t_e_d_1_1edge__t.html">edge_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Only used internally, during shortest path calculation: edge in the graph we build from links in TELinkStateInfoVector.  <a href="struct_t_e_d_1_1edge__t.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t_e_d_1_1vertex__t.html">vertex_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Only used internally, during shortest path calculation: vertex in the graph we build from links in TELinkStateInfoVector.  <a href="struct_t_e_d_1_1vertex__t.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a9409f89b04543db5a393de0ff92ec22a">TED</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a88fac0388c77fed57058e620cfcbee16">~TED</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a52fe287c977d8dc0b17744f446d42211">checkLinkValidity</a> (<a class="el" href="struct_t_e_link_state_info.html">TELinkStateInfo</a> link, <a class="el" href="struct_t_e_link_state_info.html">TELinkStateInfo</a> *&amp;match)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a37fa2a3c4c66ae13c8af636b1483bc5d">updateTimestamp</a> (<a class="el" href="struct_t_e_link_state_info.html">TELinkStateInfo</a> *link)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Public interface to the Traffic Engineering Database</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a1cc4f06fc66a8c70094a8b01f96a0e20">getInterfaceAddrByPeerAddress</a> (<a class="el" href="class_i_pv4_address.html">IPv4Address</a> peerIP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#aeccab9c615a20bcd1fcad7d0b8d9854d">peerRemoteInterface</a> (<a class="el" href="class_i_pv4_address.html">IPv4Address</a> peerIP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#ae4875e40c27e9a9bdcf9cb2634aa5bef">getPeerByLocalAddress</a> (<a class="el" href="class_i_pv4_address.html">IPv4Address</a> localInf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a55b81eedccfaba0b2f3f972b299d2ecb">primaryAddress</a> (<a class="el" href="class_i_pv4_address.html">IPv4Address</a> localInf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a5f83883b54dc530b23cec6fcb41cf378">isLocalPeer</a> (<a class="el" href="class_i_pv4_address.html">IPv4Address</a> inetAddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a0540c552afb1a9d5b46f5868306c7536">isLocalAddress</a> (<a class="el" href="class_i_pv4_address.html">IPv4Address</a> addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#ad2296fa8385003a9becdc44721852864">linkIndex</a> (<a class="el" href="class_i_pv4_address.html">IPv4Address</a> localInf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a08acc00f603015619ee69626e180ccb0">linkIndex</a> (<a class="el" href="class_i_pv4_address.html">IPv4Address</a> advrouter, <a class="el" href="class_i_pv4_address.html">IPv4Address</a> linkid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="aodv__uu__omnet_8cc.html#abb3820de782b5197e0695186ca4462cd">IPAddressVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#ad644828663099041792ba8d7769c709a">getLocalAddress</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_t_e_d__m_8h.html#aca232868cb5564bc19cd0d35c69a012b">TELinkStateInfoVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The link state database.  <a href="#a8ab5c356644784262be0ae484395441e"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize</a> (int stage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a1e4c4ce9568543f1cdb77f1ddc65d4b6">numInitStages</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#acbfd544bab3c8e3dbb6646730f8651b0">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="aodv__uu__omnet_8cc.html#abb3820de782b5197e0695186ca4462cd">IPAddressVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a58d1f05680c55637c2a727c26bc4b621">calculateShortestPath</a> (<a class="el" href="aodv__uu__omnet_8cc.html#abb3820de782b5197e0695186ca4462cd">IPAddressVector</a> dest, const <a class="el" href="_t_e_d__m_8h.html#aca232868cb5564bc19cd0d35c69a012b">TELinkStateInfoVector</a> &amp;topology, double req_bandwidth, int priority)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#ab265ddd13ee5d8f90865d99452ebb7d7">assignIndex</a> (std::vector&lt; <a class="el" href="struct_t_e_d_1_1vertex__t.html">vertex_t</a> &gt; &amp;vertices, <a class="el" href="class_i_pv4_address.html">IPv4Address</a> nodeAddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct_t_e_d_1_1vertex__t.html">vertex_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#ab2c7318565cf3f4331409155cd323057">calculateShortestPaths</a> (const <a class="el" href="_t_e_d__m_8h.html#aca232868cb5564bc19cd0d35c69a012b">TELinkStateInfoVector</a> &amp;topology, double req_bandwidth, int priority)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_routing_table.html">IRoutingTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_interface_table.html">IInterfaceTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">ift</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">routerId</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_notification_board.html">NotificationBoard</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#aca8d1a4e3fff1ced1a69271cec3789d6">nb</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="aodv__uu__omnet_8cc.html#abb3820de782b5197e0695186ca4462cd">IPAddressVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_e_d.html#a7e2e6277451bc7c030eac0a37e7d6547">maxMessageId</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Contains the Traffic Engineering Database and provides public methods to access it from <a class="el" href="class_m_p_l_s.html" title="Implements the MPLS protocol; see the NED file for more info.">MPLS</a> signalling protocols (<a class="el" href="class_l_d_p.html" title="LDP (rfc 3036) protocol implementation.">LDP</a>, RSVP-TE). </p>
<p>See NED file for more info. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9409f89b04543db5a393de0ff92ec22a"></a><!-- doxytag: member="TED::TED" ref="a9409f89b04543db5a393de0ff92ec22a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_e_d.html#a9409f89b04543db5a393de0ff92ec22a">TED::TED</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<a class="anchor" id="a88fac0388c77fed57058e620cfcbee16"></a><!-- doxytag: member="TED::~TED" ref="a88fac0388c77fed57058e620cfcbee16" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_e_d.html#a88fac0388c77fed57058e620cfcbee16">TED::~TED</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ab265ddd13ee5d8f90865d99452ebb7d7"></a><!-- doxytag: member="TED::assignIndex" ref="ab265ddd13ee5d8f90865d99452ebb7d7" args="(std::vector&lt; vertex_t &gt; &amp;vertices, IPv4Address nodeAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_t_e_d.html#ab265ddd13ee5d8f90865d99452ebb7d7">TED::assignIndex</a> </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="struct_t_e_d_1_1vertex__t.html">vertex_t</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>vertices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td>
          <td class="paramname"><em>nodeAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#ab2c7318565cf3f4331409155cd323057">calculateShortestPaths()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// find node in vertices[] whose IPv4 address is nodeAddr</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; vertices.size(); i++)
        <span class="keywordflow">if</span> (vertices[i].node == nodeAddr)
            <span class="keywordflow">return</span> i;

    <span class="comment">// if not found, create</span>
    vertex_t newVertex;
    newVertex.node = nodeAddr;
    newVertex.dist = <a class="code" href="_t_e_d_8cc.html#adae502e9fc4510696255aa68d1413fb1">LS_INFINITY</a>;
    newVertex.parent = -1;

    vertices.push_back(newVertex);
    <span class="keywordflow">return</span> vertices.size() - 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a58d1f05680c55637c2a727c26bc4b621"></a><!-- doxytag: member="TED::calculateShortestPath" ref="a58d1f05680c55637c2a727c26bc4b621" args="(IPAddressVector dest, const TELinkStateInfoVector &amp;topology, double req_bandwidth, int priority)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="aodv__uu__omnet_8cc.html#abb3820de782b5197e0695186ca4462cd">IPAddressVector</a> <a class="el" href="class_t_e_d.html#a58d1f05680c55637c2a727c26bc4b621">TED::calculateShortestPath</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="aodv__uu__omnet_8cc.html#abb3820de782b5197e0695186ca4462cd">IPAddressVector</a>&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_t_e_d__m_8h.html#aca232868cb5564bc19cd0d35c69a012b">TELinkStateInfoVector</a> &amp;&#160;</td>
          <td class="paramname"><em>topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>req_bandwidth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="comment">// FIXME comment: what do we do here?</span>
    std::vector&lt;vertex_t&gt; V = <a class="code" href="class_t_e_d.html#ab2c7318565cf3f4331409155cd323057">calculateShortestPaths</a>(topology, req_bandwidth, priority);

    <span class="keywordtype">double</span> minDist = <a class="code" href="_t_e_d_8cc.html#adae502e9fc4510696255aa68d1413fb1">LS_INFINITY</a>;
    <span class="keywordtype">int</span> minIndex = -1;

    <span class="comment">// FIXME comment: what do we do in this block?</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; V.size(); i++)
    {
        <span class="keywordflow">if</span> (V[i].dist &gt;= minDist)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (<a class="code" href="_utils_8cc.html#af9d5523fc1489796aef3d897862ef06c" title="TODO documentation.">find</a>(dest.begin(), dest.end(), V[i].node) == dest.end())
            <span class="keywordflow">continue</span>;

        minDist = V[i].dist;
        minIndex = i;
    }

    <a class="code" href="aodv__uu__omnet_8cc.html#abb3820de782b5197e0695186ca4462cd">IPAddressVector</a> result;

    <span class="keywordflow">if</span> (minIndex &lt; 0)
        <span class="keywordflow">return</span> result;

    result.push_back(V[minIndex].node);
    <span class="keywordflow">while</span> (V[minIndex].parent != -1)
    {
        minIndex = V[minIndex].parent;
        result.insert(result.begin(), V[minIndex].node);
    }

    <span class="keywordflow">return</span> result;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab2c7318565cf3f4331409155cd323057"></a><!-- doxytag: member="TED::calculateShortestPaths" ref="ab2c7318565cf3f4331409155cd323057" args="(const TELinkStateInfoVector &amp;topology, double req_bandwidth, int priority)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="struct_t_e_d_1_1vertex__t.html">TED::vertex_t</a> &gt; <a class="el" href="class_t_e_d.html#ab2c7318565cf3f4331409155cd323057">TED::calculateShortestPaths</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_t_e_d__m_8h.html#aca232868cb5564bc19cd0d35c69a012b">TELinkStateInfoVector</a> &amp;&#160;</td>
          <td class="paramname"><em>topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>req_bandwidth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#a58d1f05680c55637c2a727c26bc4b621">calculateShortestPath()</a>, and <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::vector&lt;vertex_t&gt; vertices;
    std::vector&lt;edge_t&gt; edges;

    <span class="comment">// select edges that have enough bandwidth left, and store them into edges[].</span>
    <span class="comment">// meanwhile, collect vertices in vectices[].</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; topology.size(); i++)
    {
        <span class="keywordflow">if</span> (!topology[i].state)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (topology[i].UnResvBandwidth[priority] &lt; req_bandwidth)
            <span class="keywordflow">continue</span>;

        edge_t <a class="code" href="_o_l_s_r___e_t_x__dijkstra_8h.html#ace85916faf845f5d7c90bfbb23963404">edge</a>;
        edge.src = <a class="code" href="class_t_e_d.html#ab265ddd13ee5d8f90865d99452ebb7d7">assignIndex</a>(vertices, topology[i].advrouter);
        edge.dest = <a class="code" href="class_t_e_d.html#ab265ddd13ee5d8f90865d99452ebb7d7">assignIndex</a>(vertices, topology[i].linkid);
        edge.metric = topology[i].metric;
        edges.push_back(edge);
    }

    <a class="code" href="class_i_pv4_address.html" title="IPv4 address.">IPv4Address</a> srcAddr = <a class="code" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">routerId</a>;

    <span class="keywordtype">int</span> srcIndex = <a class="code" href="class_t_e_d.html#ab265ddd13ee5d8f90865d99452ebb7d7">assignIndex</a>(vertices, srcAddr);
    vertices[srcIndex].dist = 0.0;

    <span class="comment">// FIXME comment: Dijkstra? just guessing...</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 1; i &lt; vertices.size(); i++)
    {
        <span class="keywordtype">bool</span> mod = <span class="keyword">false</span>;

        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; edges.size(); j++)
        {
            <span class="keywordtype">int</span> src = edges[j].src;
            <span class="keywordtype">int</span> dest = edges[j].dest;

            ASSERT(src &gt;= 0);
            ASSERT(dest &gt;= 0);
            ASSERT(src &lt; (<span class="keywordtype">int</span>)vertices.size());
            ASSERT(dest &lt; (<span class="keywordtype">int</span>)vertices.size());
            ASSERT(src != dest);

            <span class="keywordflow">if</span> (vertices[src].dist + edges[j].metric &gt;= vertices[dest].dist)
                <span class="keywordflow">continue</span>;

            vertices[dest].dist = vertices[src].dist + edges[j].metric;
            vertices[dest].parent = src;

            mod = <span class="keyword">true</span>;
        }

        <span class="keywordflow">if</span> (!mod)
            <span class="keywordflow">break</span>;
    }

    <span class="keywordflow">return</span> vertices;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52fe287c977d8dc0b17744f446d42211"></a><!-- doxytag: member="TED::checkLinkValidity" ref="a52fe287c977d8dc0b17744f446d42211" args="(TELinkStateInfo link, TELinkStateInfo *&amp;match)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_t_e_d.html#a52fe287c977d8dc0b17744f446d42211">TED::checkLinkValidity</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_e_link_state_info.html">TELinkStateInfo</a>&#160;</td>
          <td class="paramname"><em>link</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_e_link_state_info.html">TELinkStateInfo</a> *&amp;&#160;</td>
          <td class="paramname"><em>match</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_link_state_routing.html#adf968828953798c0509831db05a3e7c7">LinkStateRouting::processLINK_STATE_MESSAGE()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::vector&lt;TELinkStateInfo&gt;::iterator it;

    match = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

    <span class="keywordflow">for</span> (it = <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>.begin(); it != <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;sourceId == link.<a class="code" href="struct_t_e_link_state_info.html#a6b8efb793bb004e2690683df82617b7c">sourceId</a> &amp;&amp; it-&gt;messageId == link.<a class="code" href="struct_t_e_link_state_info.html#a42d87cca3f1ca1d777da0645732b898d">messageId</a> &amp;&amp; it-&gt;timestamp == link.<a class="code" href="struct_t_e_link_state_info.html#aa24de7bab6ca40a3bde503020a5fea4c">timestamp</a>)
        {
            <span class="comment">// we&#39;ve already seen this message, ignore it</span>
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }

        <span class="keywordflow">if</span> (it-&gt;advrouter == link.<a class="code" href="struct_t_e_link_state_info.html#a1867c11dc922af67c44fef7fd0c8795d">advrouter</a> &amp;&amp; it-&gt;linkid == link.<a class="code" href="struct_t_e_link_state_info.html#a37b973429566fd8e2dcc99ac6df7d462">linkid</a>)
        {
            <span class="comment">// we&#39;ve have info about this link</span>

            <span class="keywordflow">if</span> (it-&gt;timestamp &lt; link.<a class="code" href="struct_t_e_link_state_info.html#aa24de7bab6ca40a3bde503020a5fea4c">timestamp</a> || (it-&gt;timestamp == link.<a class="code" href="struct_t_e_link_state_info.html#aa24de7bab6ca40a3bde503020a5fea4c">timestamp</a> &amp;&amp; it-&gt;messageId &lt; link.<a class="code" href="struct_t_e_link_state_info.html#a42d87cca3f1ca1d777da0645732b898d">messageId</a>))
            {
                <span class="comment">// but it&#39;s older, use this new</span>
                match = &amp;(*it);
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">else</span>
            {
                <span class="comment">// and it&#39;s newer, forget this message</span>
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
        }
    }

    <span class="comment">// no or not up2date info, link is interesting</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1cc4f06fc66a8c70094a8b01f96a0e20"></a><!-- doxytag: member="TED::getInterfaceAddrByPeerAddress" ref="a1cc4f06fc66a8c70094a8b01f96a0e20" args="(IPv4Address peerIP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_pv4_address.html">IPv4Address</a> <a class="el" href="class_t_e_d.html#a1cc4f06fc66a8c70094a8b01f96a0e20">TED::getInterfaceAddrByPeerAddress</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td>
          <td class="paramname"><em>peerIP</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">RSVP::commitResv()</a>, <a class="el" href="class_r_s_v_p.html#a1578adc0aa64e000a877ab117a3e9060">RSVP::delSession()</a>, <a class="el" href="class_r_s_v_p.html#a3dc7b49a71f78cac44c09b484b6718e5">RSVP::evalNextHopInterface()</a>, <a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">RSVP::pathProblem()</a>, <a class="el" href="class_r_s_v_p.html#a9d40c6ab5084f41b18645183f85fecc9">RSVP::processPathTearMsg()</a>, <a class="el" href="class_r_s_v_p.html#a5bc9ab7d3a8b3db1c563d7e7adddb8d6">RSVP::processPSB_TIMEOUT()</a>, and <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::vector&lt;TELinkStateInfo&gt;::iterator it;
    <span class="keywordflow">for</span> (it = <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>.begin(); it != <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>.end(); it++)
        <span class="keywordflow">if</span> (it-&gt;linkid == peerIP &amp;&amp; it-&gt;advrouter == <a class="code" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">routerId</a>)
            <span class="keywordflow">return</span> it-&gt;local;
    error(<span class="stringliteral">&quot;not a local peer: %s&quot;</span>, peerIP.<a class="code" href="class_i_pv4_address.html#ac6c9eedd7d88e27a22d620c023a2c309" title="Returns the string representation of the address (e.g.">str</a>().c_str());
    <span class="keywordflow">return</span> <a class="code" href="class_i_pv4_address.html" title="IPv4 address.">IPv4Address</a>(); <span class="comment">// prevent warning</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad644828663099041792ba8d7769c709a"></a><!-- doxytag: member="TED::getLocalAddress" ref="ad644828663099041792ba8d7769c709a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="aodv__uu__omnet_8cc.html#abb3820de782b5197e0695186ca4462cd">IPAddressVector</a> <a class="el" href="class_t_e_d.html#ad644828663099041792ba8d7769c709a">TED::getLocalAddress</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae4875e40c27e9a9bdcf9cb2634aa5bef"></a><!-- doxytag: member="TED::getPeerByLocalAddress" ref="ae4875e40c27e9a9bdcf9cb2634aa5bef" args="(IPv4Address localInf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_pv4_address.html">IPv4Address</a> <a class="el" href="class_t_e_d.html#ae4875e40c27e9a9bdcf9cb2634aa5bef">TED::getPeerByLocalAddress</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td>
          <td class="paramname"><em>localInf</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a3dc7b49a71f78cac44c09b484b6718e5">RSVP::evalNextHopInterface()</a>, <a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">RSVP::pathProblem()</a>, <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>, <a class="el" href="class_r_s_v_p.html#acc0978a512bc47c6cbeea226904a4e51">RSVP::refreshPath()</a>, and <a class="el" href="class_r_s_v_p.html#a56c68314c8b1e8b82370416d2b2f4785">RSVP::setupHello()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = <a class="code" href="class_t_e_d.html#ad2296fa8385003a9becdc44721852864">linkIndex</a>(localInf);
    <span class="keywordflow">return</span> <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>[index].linkid;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acbfd544bab3c8e3dbb6646730f8651b0"></a><!-- doxytag: member="TED::handleMessage" ref="acbfd544bab3c8e3dbb6646730f8651b0" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_e_d.html#acbfd544bab3c8e3dbb6646730f8651b0">TED::handleMessage</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    ASSERT(<span class="keyword">false</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afad702310eca4f7c9cd4cc0c994cb996"></a><!-- doxytag: member="TED::initialize" ref="afad702310eca4f7c9cd4cc0c994cb996" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">TED::initialize</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="comment">// we have to wait for stage 2 until interfaces get registered (stage 0)</span>
    <span class="comment">// and get their auto-assigned IPv4 addresses (stage 2); routerId gets</span>
    <span class="comment">// assigned in stage 3</span>
    <span class="keywordflow">if</span> (stage!=4)
        <span class="keywordflow">return</span>;

    <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a> = <a class="code" href="class_routing_table_access.html" title="Gives access to the IRoutingTable.">RoutingTableAccess</a>().<a class="code" href="class_module_access.html#a46a82b1fa0e957eb42d29c8637df1f4f">get</a>();
    <a class="code" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">ift</a> = <a class="code" href="class_interface_table_access.html" title="Gives access to IInterfaceTable.">InterfaceTableAccess</a>().<a class="code" href="class_module_access.html#a46a82b1fa0e957eb42d29c8637df1f4f">get</a>();
    <a class="code" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">routerId</a> = <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a416ced9f21e5e92920c162deeb5d53ca" title="Returns routerId.">getRouterId</a>();
    <a class="code" href="structnb.html">nb</a> = <a class="code" href="class_notification_board_access.html" title="Gives access to the NotificationBoard instance within the host/router.">NotificationBoardAccess</a>().<a class="code" href="class_module_access.html#a46a82b1fa0e957eb42d29c8637df1f4f">get</a>();

    <a class="code" href="class_t_e_d.html#a7e2e6277451bc7c030eac0a37e7d6547">maxMessageId</a> = 0;

    ASSERT(!<a class="code" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">routerId</a>.<a class="code" href="class_i_pv4_address.html#a76dbddd2575a9e91412b998512b45a2d" title="True if all four address bytes are zero.">isUnspecified</a>());

    <span class="comment">//</span>
    <span class="comment">// Extract initial TED contents from the routing table.</span>
    <span class="comment">//</span>
    <span class="comment">// We need to create one TED entry (TELinkStateInfo) for each link,</span>
    <span class="comment">// i.e. for each physical interface.</span>
    <span class="comment">//</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a2b0ce46cd92da6f64fc363410dc71904" title="Returns the number of interfaces.">getNumInterfaces</a>(); i++)
    {
        <a class="code" href="class_interface_entry.html" title="Interface entry for the interface table in IInterfaceTable.">InterfaceEntry</a> *ie = <a class="code" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49" title="Returns the InterfaceEntry specified by an index 0..numInterfaces-1.">getInterface</a>(i);

        <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#a28c151905c57d6d19ecb026367f93278">getNodeOutputGateId</a>() == -1)  <span class="comment">// ignore if it&#39;s not a physical interface</span>
            <span class="keywordflow">continue</span>;

        <span class="comment">//</span>
        <span class="comment">// We&#39;ll need to fill in &quot;linkid&quot; and &quot;remote&quot; (ie. peer addr).</span>
        <span class="comment">//</span>
        <span class="comment">// Real link state protocols find the peer address by exchanging HELLO messages;</span>
        <span class="comment">// in this model we haven&#39;t implemented HELLO but provide peer addresses via</span>
        <span class="comment">// preconfigured static host routes in routing table.</span>
        <span class="comment">//</span>
        <span class="comment">// find bandwidth of the link</span>
        cGate *g = getParentModule()-&gt;gate(ie-&gt;<a class="code" href="class_interface_entry.html#a28c151905c57d6d19ecb026367f93278">getNodeOutputGateId</a>());
        ASSERT(g);
        <span class="keywordtype">double</span> linkBandwidth = g-&gt;getChannel()-&gt;getNominalDatarate();

        <span class="comment">// find destination node for current interface</span>
        cModule *destNode = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        <span class="keywordflow">while</span> (g)
        {
            g = g-&gt;getNextGate();
            cModule *mod = g-&gt;getOwnerModule();
            cProperties* props = mod-&gt;getProperties();
            <span class="keywordflow">if</span> (props &amp;&amp; props-&gt;getAsBool(<span class="stringliteral">&quot;node&quot;</span>))
            {
                destNode = mod;
                <span class="keywordflow">break</span>;
            }
        }
        <span class="keywordflow">if</span> (!g)     <span class="comment">// not connected</span>
            <span class="keywordflow">continue</span>;
        <a class="code" href="class_i_routing_table.html" title="A C++ interface to abstract the functionality of IRoutingTable.">IRoutingTable</a> *destRt = <a class="code" href="class_routing_table_access.html" title="Gives access to the IRoutingTable.">RoutingTableAccess</a>().<a class="code" href="class_module_access.html#a46a82b1fa0e957eb42d29c8637df1f4f">get</a>(destNode);
        <span class="keywordflow">if</span> (!destRt)    <span class="comment">// switch, hub, bus, accesspoint, etc</span>
            <span class="keywordflow">continue</span>;
        <a class="code" href="class_i_pv4_address.html" title="IPv4 address.">IPv4Address</a> destRouterId = destRt-&gt;<a class="code" href="class_i_routing_table.html#a416ced9f21e5e92920c162deeb5d53ca" title="Returns routerId.">getRouterId</a>();
        <a class="code" href="class_i_interface_table.html" title="A C++ interface to abstract the functionality of InterfaceTable.">IInterfaceTable</a>* destIft = <a class="code" href="class_interface_table_access.html" title="Gives access to IInterfaceTable.">InterfaceTableAccess</a>().<a class="code" href="class_module_access.html#a46a82b1fa0e957eb42d29c8637df1f4f">get</a>(destNode);
        ASSERT(destIft);
        <a class="code" href="class_interface_entry.html" title="Interface entry for the interface table in IInterfaceTable.">InterfaceEntry</a> *destIe = destIft-&gt;<a class="code" href="class_i_interface_table.html#a60257f3b30cedc18a80835d5be8305d9" title="Returns an interface given by its getNodeInputGateId().">getInterfaceByNodeInputGateId</a>(g-&gt;getId());
        ASSERT(destIe);

        <span class="comment">//</span>
        <span class="comment">// fill in and insert TED entry</span>
        <span class="comment">//</span>
        <a class="code" href="struct_t_e_link_state_info.html" title="Struct generated from networklayer/ted/TED.msg by opp_msgc.">TELinkStateInfo</a> entry;
        entry.<a class="code" href="struct_t_e_link_state_info.html#a1867c11dc922af67c44fef7fd0c8795d">advrouter</a> = <a class="code" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">routerId</a>;
        entry.<a class="code" href="struct_t_e_link_state_info.html#a9a1d99284c16621cfdc8cd2a7353d7e0">local</a> = ie-&gt;<a class="code" href="class_interface_entry.html#a4f52f31546a140edf6979882492e1a0b">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#afab661980ddb8db4adc9ba5e9fc1f346">getIPAddress</a>();
        entry.<a class="code" href="struct_t_e_link_state_info.html#a37b973429566fd8e2dcc99ac6df7d462">linkid</a> = destRouterId;
        entry.<a class="code" href="struct_t_e_link_state_info.html#ad906f479520ef995d3eb05822e8e7dfb">remote</a> = destIe-&gt;<a class="code" href="class_interface_entry.html#a4f52f31546a140edf6979882492e1a0b">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#afab661980ddb8db4adc9ba5e9fc1f346">getIPAddress</a>();
        entry.<a class="code" href="struct_t_e_link_state_info.html#a4422a9f93cc6a9d0201c99464b3b6230">MaxBandwidth</a> = linkBandwidth;
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 8; j++)
            entry.<a class="code" href="struct_t_e_link_state_info.html#a0873c0b4c842d2d499eb132fd3544576">UnResvBandwidth</a>[j] = entry.<a class="code" href="struct_t_e_link_state_info.html#a4422a9f93cc6a9d0201c99464b3b6230">MaxBandwidth</a>;
        entry.<a class="code" href="struct_t_e_link_state_info.html#ae21f911b46b70aa9a10d3e173afed860">state</a> = <span class="keyword">true</span>;

        <span class="comment">// use g-&gt;getChannel()-&gt;par(&quot;delay&quot;).doubleValue() for shortest delay calculation</span>
        entry.<a class="code" href="struct_t_e_link_state_info.html#aeb7bf5a5d219add3e52236937987d136">metric</a> = ie-&gt;<a class="code" href="class_interface_entry.html#a4f52f31546a140edf6979882492e1a0b">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aac9f062b0ffa8b944b4c65eecbf5251c">getMetric</a>();

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;metric set to=&quot;</span> &lt;&lt; entry.<a class="code" href="struct_t_e_link_state_info.html#aeb7bf5a5d219add3e52236937987d136">metric</a> &lt;&lt; endl;

        entry.<a class="code" href="struct_t_e_link_state_info.html#a6b8efb793bb004e2690683df82617b7c">sourceId</a> = <a class="code" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">routerId</a>.<a class="code" href="class_i_pv4_address.html#ac4abdd5df9c86071f13af7a3f0931237" title="Returns the address as an int.">getInt</a>();
        entry.<a class="code" href="struct_t_e_link_state_info.html#a42d87cca3f1ca1d777da0645732b898d">messageId</a> = ++<a class="code" href="class_t_e_d.html#a7e2e6277451bc7c030eac0a37e7d6547">maxMessageId</a>;
        entry.<a class="code" href="struct_t_e_link_state_info.html#aa24de7bab6ca40a3bde503020a5fea4c">timestamp</a> = simTime();

        <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>.push_back(entry);
    }

    <span class="comment">// extract list of local interface addresses into interfaceAddrs[]</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a2b0ce46cd92da6f64fc363410dc71904" title="Returns the number of interfaces.">getNumInterfaces</a>(); i++)
    {
        <a class="code" href="class_interface_entry.html" title="Interface entry for the interface table in IInterfaceTable.">InterfaceEntry</a> *ie = <a class="code" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49" title="Returns the InterfaceEntry specified by an index 0..numInterfaces-1.">getInterface</a>(i);
        <a class="code" href="class_interface_entry.html" title="Interface entry for the interface table in IInterfaceTable.">InterfaceEntry</a> *ie2 = <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a3f747703f9026ecba59e8dd438dc399b" title="Returns an interface given by its address.">getInterfaceByAddress</a>(ie-&gt;<a class="code" href="class_interface_entry.html#a4f52f31546a140edf6979882492e1a0b">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#afab661980ddb8db4adc9ba5e9fc1f346">getIPAddress</a>());
        <span class="keywordflow">if</span> (ie2 != ie)
            error(<span class="stringliteral">&quot;MPLS models assume interfaces to have unique addresses, &quot;</span>
                  <span class="stringliteral">&quot;but address of &#39;%s&#39; (%s) is not unique&quot;</span>,
                  ie-&gt;getName(), ie-&gt;<a class="code" href="class_interface_entry.html#a4f52f31546a140edf6979882492e1a0b">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#afab661980ddb8db4adc9ba5e9fc1f346">getIPAddress</a>().<a class="code" href="class_i_pv4_address.html#ac6c9eedd7d88e27a22d620c023a2c309" title="Returns the string representation of the address (e.g.">str</a>().c_str());
        <span class="keywordflow">if</span> (!ie-&gt;<a class="code" href="class_interface_entry.html#a0ee93e88273f61390d1293dae55004d1">isLoopback</a>())
            <a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>.push_back(ie-&gt;<a class="code" href="class_interface_entry.html#a4f52f31546a140edf6979882492e1a0b">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#afab661980ddb8db4adc9ba5e9fc1f346">getIPAddress</a>());
    }

    <a class="code" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable</a>();

    WATCH_VECTOR(<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0540c552afb1a9d5b46f5868306c7536"></a><!-- doxytag: member="TED::isLocalAddress" ref="a0540c552afb1a9d5b46f5868306c7536" args="(IPv4Address addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_t_e_d.html#a0540c552afb1a9d5b46f5868306c7536">TED::isLocalAddress</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#ab5b4e76d059e5ee7885e9e785481e6c2">RSVP::allocateResource()</a>, <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">RSVP::commitResv()</a>, <a class="el" href="class_r_s_v_p.html#a4c582acc45b47942f56a34aa35fcfc70">RSVP::createPSB()</a>, <a class="el" href="class_r_s_v_p.html#ae83b8844a125beac21545c613faa7f49">RSVP::doCACCheck()</a>, <a class="el" href="class_r_s_v_p.html#a3dc7b49a71f78cac44c09b484b6718e5">RSVP::evalNextHopInterface()</a>, <a class="el" href="class_r_s_v_p.html#afe2b92785082d5d7968dbce29795d67a">RSVP::preempt()</a>, <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">RSVP::processPathMsg()</a>, <a class="el" href="class_r_s_v_p.html#a5bc9ab7d3a8b3db1c563d7e7adddb8d6">RSVP::processPSB_TIMEOUT()</a>, <a class="el" href="class_r_s_v_p.html#a2fc38252a7b31028e80b360fc8dc7af3">RSVP::processRSB_TIMEOUT()</a>, <a class="el" href="class_r_s_v_p.html#acc0978a512bc47c6cbeea226904a4e51">RSVP::refreshPath()</a>, <a class="el" href="class_r_s_v_p.html#a8745c357a38f4ab3b5c39668b5498820">RSVP::refreshResv()</a>, and <a class="el" href="class_r_s_v_p.html#a130138413206f03179fc63d56f4937cd">RSVP::scheduleRefreshTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>.size(); i++)
        <span class="keywordflow">if</span> (<a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>[i] == addr)
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5f83883b54dc530b23cec6fcb41cf378"></a><!-- doxytag: member="TED::isLocalPeer" ref="a5f83883b54dc530b23cec6fcb41cf378" args="(IPv4Address inetAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_t_e_d.html#a5f83883b54dc530b23cec6fcb41cf378">TED::isLocalPeer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td>
          <td class="paramname"><em>inetAddr</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#aeccab9c615a20bcd1fcad7d0b8d9854d">peerRemoteInterface()</a>, and <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::vector&lt;TELinkStateInfo&gt;::iterator it;
    <span class="keywordflow">for</span> (it = <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>.begin(); it != <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>.end(); it++)
        <span class="keywordflow">if</span> (it-&gt;linkid == inetAddr &amp;&amp; it-&gt;advrouter == <a class="code" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">routerId</a>)
            <span class="keywordflow">break</span>;
    <span class="keywordflow">return</span> it != <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>.end();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad2296fa8385003a9becdc44721852864"></a><!-- doxytag: member="TED::linkIndex" ref="ad2296fa8385003a9becdc44721852864" args="(IPv4Address localInf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_t_e_d.html#ad2296fa8385003a9becdc44721852864">TED::linkIndex</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td>
          <td class="paramname"><em>localInf</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#ab5b4e76d059e5ee7885e9e785481e6c2">RSVP::allocateResource()</a>, <a class="el" href="class_r_s_v_p.html#ae83b8844a125beac21545c613faa7f49">RSVP::doCACCheck()</a>, <a class="el" href="class_t_e_d.html#ae4875e40c27e9a9bdcf9cb2634aa5bef">getPeerByLocalAddress()</a>, <a class="el" href="class_r_s_v_p.html#afe2b92785082d5d7968dbce29795d67a">RSVP::preempt()</a>, <a class="el" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">RSVP::processHELLO_TIMEOUT()</a>, <a class="el" href="class_l_d_p.html#aa11dcfcdebea0304d26343746d28eb6c">LDP::processHelloTimeout()</a>, <a class="el" href="class_l_d_p.html#a129493952b252d5c5d426c4056197a4f">LDP::processLDPHello()</a>, <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">RSVP::processPathMsg()</a>, and <a class="el" href="class_r_s_v_p.html#a82a6e385d177099b8f842a394a7c2fac">RSVP::recoveryEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>.size(); i++)
        <span class="keywordflow">if</span> (<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>[i].advrouter == <a class="code" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">routerId</a> &amp;&amp; <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>[i].local == localInf)
            <span class="keywordflow">return</span> i;
    ASSERT(<span class="keyword">false</span>);
    <span class="keywordflow">return</span> -1; <span class="comment">// to eliminate warning</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a08acc00f603015619ee69626e180ccb0"></a><!-- doxytag: member="TED::linkIndex" ref="a08acc00f603015619ee69626e180ccb0" args="(IPv4Address advrouter, IPv4Address linkid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_t_e_d.html#ad2296fa8385003a9becdc44721852864">TED::linkIndex</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td>
          <td class="paramname"><em>advrouter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td>
          <td class="paramname"><em>linkid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>.size(); i++)
        <span class="keywordflow">if</span> (<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>[i].advrouter == advrouter &amp;&amp; <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>[i].linkid == linkid)
            <span class="keywordflow">return</span> i;
    ASSERT(<span class="keyword">false</span>);
    <span class="keywordflow">return</span> -1; <span class="comment">// to eliminate warning</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1e4c4ce9568543f1cdb77f1ddc65d4b6"></a><!-- doxytag: member="TED::numInitStages" ref="a1e4c4ce9568543f1cdb77f1ddc65d4b6" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int <a class="el" href="class_t_e_d.html#a1e4c4ce9568543f1cdb77f1ddc65d4b6">TED::numInitStages</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> 5;}
</pre></div>
</div>
</div>
<a class="anchor" id="aeccab9c615a20bcd1fcad7d0b8d9854d"></a><!-- doxytag: member="TED::peerRemoteInterface" ref="aeccab9c615a20bcd1fcad7d0b8d9854d" args="(IPv4Address peerIP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_pv4_address.html">IPv4Address</a> <a class="el" href="class_t_e_d.html#aeccab9c615a20bcd1fcad7d0b8d9854d">TED::peerRemoteInterface</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td>
          <td class="paramname"><em>peerIP</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a979b30a733d23eb33a1791d0de5d8722">RSVP::refreshResv()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(<a class="code" href="class_t_e_d.html#a5f83883b54dc530b23cec6fcb41cf378">isLocalPeer</a>(peerIP));
    std::vector&lt;TELinkStateInfo&gt;::iterator it;
    <span class="keywordflow">for</span> (it = <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>.begin(); it != <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>.end(); it++)
        <span class="keywordflow">if</span> (it-&gt;linkid == peerIP &amp;&amp; it-&gt;advrouter == <a class="code" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">routerId</a>)
            <span class="keywordflow">return</span> it-&gt;remote;
    error(<span class="stringliteral">&quot;not a local peer: %s&quot;</span>, peerIP.<a class="code" href="class_i_pv4_address.html#ac6c9eedd7d88e27a22d620c023a2c309" title="Returns the string representation of the address (e.g.">str</a>().c_str());
    <span class="keywordflow">return</span> <a class="code" href="class_i_pv4_address.html" title="IPv4 address.">IPv4Address</a>(); <span class="comment">// prevent warning</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a55b81eedccfaba0b2f3f972b299d2ecb"></a><!-- doxytag: member="TED::primaryAddress" ref="a55b81eedccfaba0b2f3f972b299d2ecb" args="(IPv4Address localInf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_pv4_address.html">IPv4Address</a> <a class="el" href="class_t_e_d.html#a55b81eedccfaba0b2f3f972b299d2ecb">TED::primaryAddress</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_pv4_address.html">IPv4Address</a>&#160;</td>
          <td class="paramname"><em>localInf</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a4248b4a0ff4175b4be496ec30aee8672">RSVP::processHelloMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>.size(); i++)
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>[i].local == localInf)
            <span class="keywordflow">return</span> <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>[i].advrouter;

        <span class="keywordflow">if</span> (<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>[i].remote == localInf)
            <span class="keywordflow">return</span> <a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>[i].linkid;
    }
    ASSERT(<span class="keyword">false</span>);
    <span class="keywordflow">return</span> <a class="code" href="class_i_pv4_address.html" title="IPv4 address.">IPv4Address</a>(); <span class="comment">// to eliminate warning</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a20dbae0b12fb78bc9771eba4e11f0edc"></a><!-- doxytag: member="TED::rebuildRoutingTable" ref="a20dbae0b12fb78bc9771eba4e11f0edc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">TED::rebuildRoutingTable</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>, <a class="el" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">RSVP::processHELLO_TIMEOUT()</a>, <a class="el" href="class_l_d_p.html#aa11dcfcdebea0304d26343746d28eb6c">LDP::processHelloTimeout()</a>, <a class="el" href="class_l_d_p.html#a129493952b252d5c5d426c4056197a4f">LDP::processLDPHello()</a>, <a class="el" href="class_link_state_routing.html#adf968828953798c0509831db05a3e7c7">LinkStateRouting::processLINK_STATE_MESSAGE()</a>, and <a class="el" href="class_r_s_v_p.html#a82a6e385d177099b8f842a394a7c2fac">RSVP::recoveryEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;rebuilding routing table at &quot;</span> &lt;&lt; <a class="code" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">routerId</a> &lt;&lt; endl;

    std::vector&lt;vertex_t&gt; V = <a class="code" href="class_t_e_d.html#ab2c7318565cf3f4331409155cd323057">calculateShortestPaths</a>(<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e" title="The link state database.">ted</a>, 0.0, 7);

    <span class="comment">// remove all routing entries, except multicast ones (we don&#39;t care about them)</span>
    <span class="keywordtype">int</span> n = <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#ada2fac98d1d1c80c291be239b075c63b" title="Returns the total number of unicast routes.">getNumRoutes</a>();
    <span class="keywordtype">int</span> j = 0;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
    {
        <a class="code" href="class_i_pv4_route.html" title="IPv4 unicast route in IRoutingTable.">IPv4Route</a> *entry = <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a0f5f8297974432af7092a3ca19b0217e" title="Returns the kth route.">getRoute</a>(j);
        <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="class_i_pv4_route.html#a4982ef0132d4e1560371231b7c11cf8c" title="Destination address prefix to match.">getDestination</a>().<a class="code" href="class_i_pv4_address.html#ab8ffdff7f4dc2ff8f2d6a0eed468b476" title="Returns true if this address is in the multicast address range, 224.0.0.0 thru 239.255.255.255, that is, it&#39;s a class D address.">isMulticast</a>())
        {
            ++j;
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a318a5f6e4382cb52dbc25d714df7a994" title="Deletes the given route from the routing table.">deleteRoute</a>(entry);
        }
    }

<span class="comment">//  for (unsigned int i = 0; i &lt; V.size(); i++)</span>
<span class="comment">//  {</span>
<span class="comment">//      EV &lt;&lt; &quot;V[&quot; &lt;&lt; i &lt;&lt; &quot;].node=&quot; &lt;&lt; V[i].node &lt;&lt; endl;</span>
<span class="comment">//      EV &lt;&lt; &quot;V[&quot; &lt;&lt; i &lt;&lt; &quot;].parent=&quot; &lt;&lt; V[i].parent &lt;&lt; endl;</span>
<span class="comment">//      EV &lt;&lt; &quot;V[&quot; &lt;&lt; i &lt;&lt; &quot;].dist=&quot; &lt;&lt; V[i].dist &lt;&lt; endl;</span>
<span class="comment">//  }</span>

    <span class="comment">// insert remote destinations</span>

    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; V.size(); i++)
    {
        <span class="keywordflow">if</span> (V[i].node == <a class="code" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">routerId</a>) <span class="comment">// us</span>
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (V[i].parent == -1) <span class="comment">// unreachable</span>
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (<a class="code" href="class_t_e_d.html#a5f83883b54dc530b23cec6fcb41cf378">isLocalPeer</a>(V[i].node)) <span class="comment">// local peer</span>
            <span class="keywordflow">continue</span>;

        <span class="keywordtype">int</span> nHop = i;

        <span class="keywordflow">while</span> (!<a class="code" href="class_t_e_d.html#a5f83883b54dc530b23cec6fcb41cf378">isLocalPeer</a>(V[nHop].node))
        {
            nHop = V[nHop].parent;
        }

        ASSERT(<a class="code" href="class_t_e_d.html#a5f83883b54dc530b23cec6fcb41cf378">isLocalPeer</a>(V[nHop].node));

        <a class="code" href="class_i_pv4_route.html" title="IPv4 unicast route in IRoutingTable.">IPv4Route</a> *entry = <span class="keyword">new</span> <a class="code" href="class_i_pv4_route.html" title="IPv4 unicast route in IRoutingTable.">IPv4Route</a>;
        entry-&gt;<a class="code" href="class_i_pv4_route.html#a75d1011d4002c8a9503f3a42aff66c70">setDestination</a>(V[i].node);

        <span class="keywordflow">if</span> (V[i].node == V[nHop].node)
        {
            entry-&gt;<a class="code" href="class_i_pv4_route.html#ac48404c53a5e8d505d54238541b74b7b">setGateway</a>(<a class="code" href="class_i_pv4_address.html" title="IPv4 address.">IPv4Address</a>());
        }
        <span class="keywordflow">else</span>
        {
            entry-&gt;<a class="code" href="class_i_pv4_route.html#ac48404c53a5e8d505d54238541b74b7b">setGateway</a>(V[nHop].node);
        }
        entry-&gt;<a class="code" href="class_i_pv4_route.html#af7fc0b9d45d7fcbe603b679993e38ee5">setInterface</a>(<a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a3f747703f9026ecba59e8dd438dc399b" title="Returns an interface given by its address.">getInterfaceByAddress</a>(<a class="code" href="class_t_e_d.html#a1cc4f06fc66a8c70094a8b01f96a0e20">getInterfaceAddrByPeerAddress</a>(V[nHop].node)));
        entry-&gt;<a class="code" href="class_i_pv4_route.html#a2213017b93a2ee8b31dc5f38502f6166">setSource</a>(<a class="code" href="class_i_pv4_route.html#a01abe3b809ba83ebbb0a3f01f6919683aabff650af84b9bbf5288d2193aea03e4" title="managed by the given routing protocol">IPv4Route::OSPF</a>);

        entry-&gt;<a class="code" href="class_i_pv4_route.html#a625acf9119fbc2bd5255c56096a36d38">setNetmask</a>(<a class="code" href="class_i_pv4_address.html#abc2da8e3ab9691fa0718d0f18ac852f7" title="255.255.255.255">IPv4Address::ALLONES_ADDRESS</a>);
        entry-&gt;<a class="code" href="class_i_pv4_route.html#a835720d0f2b89896063b1296d85c57cc">setMetric</a>(0);

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;  inserting route: dest=&quot;</span> &lt;&lt; entry-&gt;<a class="code" href="class_i_pv4_route.html#a4982ef0132d4e1560371231b7c11cf8c" title="Destination address prefix to match.">getDestination</a>() &lt;&lt; <span class="stringliteral">&quot; interface=&quot;</span> &lt;&lt; entry-&gt;<a class="code" href="class_i_pv4_route.html#a1e3fe36f3ffe5653b4bae69df4d52d6b" title="Convenience method.">getInterfaceName</a>() &lt;&lt; <span class="stringliteral">&quot; nexthop=&quot;</span> &lt;&lt; entry-&gt;<a class="code" href="class_i_pv4_route.html#ae85a9e2c22eaa74d14ba636d15966afe" title="Next hop address.">getGateway</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

        <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#ad7be1ebe567f40bca667ba0f33a2ca8d" title="Adds a route to the routing table.">addRoute</a>(entry);
    }

    <span class="comment">// insert local peers</span>

    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>.size(); i++)
    {
        <a class="code" href="class_i_pv4_route.html" title="IPv4 unicast route in IRoutingTable.">IPv4Route</a> *entry = <span class="keyword">new</span> <a class="code" href="class_i_pv4_route.html" title="IPv4 unicast route in IRoutingTable.">IPv4Route</a>;

        entry-&gt;<a class="code" href="class_i_pv4_route.html#a75d1011d4002c8a9503f3a42aff66c70">setDestination</a>(<a class="code" href="class_t_e_d.html#ae4875e40c27e9a9bdcf9cb2634aa5bef">getPeerByLocalAddress</a>(<a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>[i]));
        entry-&gt;<a class="code" href="class_i_pv4_route.html#ac48404c53a5e8d505d54238541b74b7b">setGateway</a>(<a class="code" href="class_i_pv4_address.html" title="IPv4 address.">IPv4Address</a>());
        entry-&gt;<a class="code" href="class_i_pv4_route.html#af7fc0b9d45d7fcbe603b679993e38ee5">setInterface</a>(<a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a3f747703f9026ecba59e8dd438dc399b" title="Returns an interface given by its address.">getInterfaceByAddress</a>(<a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>[i]));
        entry-&gt;<a class="code" href="class_i_pv4_route.html#a2213017b93a2ee8b31dc5f38502f6166">setSource</a>(<a class="code" href="class_i_pv4_route.html#a01abe3b809ba83ebbb0a3f01f6919683aabff650af84b9bbf5288d2193aea03e4" title="managed by the given routing protocol">IPv4Route::OSPF</a>);

        entry-&gt;<a class="code" href="class_i_pv4_route.html#a625acf9119fbc2bd5255c56096a36d38">setNetmask</a>(<a class="code" href="class_i_pv4_address.html#abc2da8e3ab9691fa0718d0f18ac852f7" title="255.255.255.255">IPv4Address::ALLONES_ADDRESS</a>);
        entry-&gt;<a class="code" href="class_i_pv4_route.html#a835720d0f2b89896063b1296d85c57cc">setMetric</a>(0); <span class="comment">// XXX FIXME what&#39;s that?</span>

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;  inserting route: local=&quot;</span> &lt;&lt; <a class="code" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">interfaceAddrs</a>[i] &lt;&lt; <span class="stringliteral">&quot; peer=&quot;</span> &lt;&lt; entry-&gt;<a class="code" href="class_i_pv4_route.html#a4982ef0132d4e1560371231b7c11cf8c" title="Destination address prefix to match.">getDestination</a>() &lt;&lt; <span class="stringliteral">&quot; interface=&quot;</span> &lt;&lt; entry-&gt;<a class="code" href="class_i_pv4_route.html#a1e3fe36f3ffe5653b4bae69df4d52d6b" title="Convenience method.">getInterfaceName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

        <a class="code" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#ad7be1ebe567f40bca667ba0f33a2ca8d" title="Adds a route to the routing table.">addRoute</a>(entry);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a37fa2a3c4c66ae13c8af636b1483bc5d"></a><!-- doxytag: member="TED::updateTimestamp" ref="a37fa2a3c4c66ae13c8af636b1483bc5d" args="(TELinkStateInfo *link)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_e_d.html#a37fa2a3c4c66ae13c8af636b1483bc5d">TED::updateTimestamp</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_e_link_state_info.html">TELinkStateInfo</a> *&#160;</td>
          <td class="paramname"><em>link</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_link_state_routing.html#a33c0d9a56684d301eba185ebbdc7a5ee">LinkStateRouting::receiveChangeNotification()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(link-&gt;<a class="code" href="struct_t_e_link_state_info.html#a1867c11dc922af67c44fef7fd0c8795d">advrouter</a> == <a class="code" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">routerId</a>);

    link-&gt;<a class="code" href="struct_t_e_link_state_info.html#aa24de7bab6ca40a3bde503020a5fea4c">timestamp</a> = simTime();
    link-&gt;<a class="code" href="struct_t_e_link_state_info.html#a42d87cca3f1ca1d777da0645732b898d">messageId</a> = ++<a class="code" href="class_t_e_d.html#a7e2e6277451bc7c030eac0a37e7d6547">maxMessageId</a>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ac0b818ffeadae19fce49446708a46c1d"></a><!-- doxytag: member="TED::ift" ref="ac0b818ffeadae19fce49446708a46c1d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_interface_table.html">IInterfaceTable</a>* <a class="el" href="class_t_e_d.html#ac0b818ffeadae19fce49446708a46c1d">TED::ift</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="aa0649c6cfd4582efb9b840e54bd35523"></a><!-- doxytag: member="TED::interfaceAddrs" ref="aa0649c6cfd4582efb9b840e54bd35523" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="aodv__uu__omnet_8cc.html#abb3820de782b5197e0695186ca4462cd">IPAddressVector</a> <a class="el" href="class_t_e_d.html#aa0649c6cfd4582efb9b840e54bd35523">TED::interfaceAddrs</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#ad644828663099041792ba8d7769c709a">getLocalAddress()</a>, <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>, <a class="el" href="class_t_e_d.html#a0540c552afb1a9d5b46f5868306c7536">isLocalAddress()</a>, and <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>.</p>

</div>
</div>
<a class="anchor" id="a7e2e6277451bc7c030eac0a37e7d6547"></a><!-- doxytag: member="TED::maxMessageId" ref="a7e2e6277451bc7c030eac0a37e7d6547" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_t_e_d.html#a7e2e6277451bc7c030eac0a37e7d6547">TED::maxMessageId</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>, and <a class="el" href="class_t_e_d.html#a37fa2a3c4c66ae13c8af636b1483bc5d">updateTimestamp()</a>.</p>

</div>
</div>
<a class="anchor" id="aca8d1a4e3fff1ced1a69271cec3789d6"></a><!-- doxytag: member="TED::nb" ref="aca8d1a4e3fff1ced1a69271cec3789d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_notification_board.html">NotificationBoard</a>* <a class="el" href="class_t_e_d.html#aca8d1a4e3fff1ced1a69271cec3789d6">TED::nb</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a19d9ecc86419dc145116bb4c2f15e52a"></a><!-- doxytag: member="TED::routerId" ref="a19d9ecc86419dc145116bb4c2f15e52a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_pv4_address.html">IPv4Address</a> <a class="el" href="class_t_e_d.html#a19d9ecc86419dc145116bb4c2f15e52a">TED::routerId</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#ab2c7318565cf3f4331409155cd323057">calculateShortestPaths()</a>, <a class="el" href="class_t_e_d.html#a1cc4f06fc66a8c70094a8b01f96a0e20">getInterfaceAddrByPeerAddress()</a>, <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>, <a class="el" href="class_t_e_d.html#a5f83883b54dc530b23cec6fcb41cf378">isLocalPeer()</a>, <a class="el" href="class_t_e_d.html#ad2296fa8385003a9becdc44721852864">linkIndex()</a>, <a class="el" href="class_t_e_d.html#aeccab9c615a20bcd1fcad7d0b8d9854d">peerRemoteInterface()</a>, <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>, and <a class="el" href="class_t_e_d.html#a37fa2a3c4c66ae13c8af636b1483bc5d">updateTimestamp()</a>.</p>

</div>
</div>
<a class="anchor" id="a9abf4d5fb005f0a51c59ae25aeb55e44"></a><!-- doxytag: member="TED::rt" ref="a9abf4d5fb005f0a51c59ae25aeb55e44" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_routing_table.html">IRoutingTable</a>* <a class="el" href="class_t_e_d.html#a9abf4d5fb005f0a51c59ae25aeb55e44">TED::rt</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>, and <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>.</p>

</div>
</div>
<a class="anchor" id="a8ab5c356644784262be0ae484395441e"></a><!-- doxytag: member="TED::ted" ref="a8ab5c356644784262be0ae484395441e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_t_e_d__m_8h.html#aca232868cb5564bc19cd0d35c69a012b">TELinkStateInfoVector</a> <a class="el" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">TED::ted</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The link state database. </p>
<p>(TELinkStateInfoVector is defined in TED.msg) </p>

<p>Referenced by <a class="el" href="class_r_s_v_p.html#ab5b4e76d059e5ee7885e9e785481e6c2">RSVP::allocateResource()</a>, <a class="el" href="class_t_e_d.html#a52fe287c977d8dc0b17744f446d42211">checkLinkValidity()</a>, <a class="el" href="class_r_s_v_p.html#ae83b8844a125beac21545c613faa7f49">RSVP::doCACCheck()</a>, <a class="el" href="class_t_e_d.html#a1cc4f06fc66a8c70094a8b01f96a0e20">getInterfaceAddrByPeerAddress()</a>, <a class="el" href="class_t_e_d.html#ae4875e40c27e9a9bdcf9cb2634aa5bef">getPeerByLocalAddress()</a>, <a class="el" href="class_link_state_routing.html#adcd65572bd812c97222dfd25dc9de1a9">LinkStateRouting::handleMessage()</a>, <a class="el" href="class_t_e_d.html#afad702310eca4f7c9cd4cc0c994cb996">initialize()</a>, <a class="el" href="class_t_e_d.html#a5f83883b54dc530b23cec6fcb41cf378">isLocalPeer()</a>, <a class="el" href="class_t_e_d.html#ad2296fa8385003a9becdc44721852864">linkIndex()</a>, <a class="el" href="class_t_e_d.html#aeccab9c615a20bcd1fcad7d0b8d9854d">peerRemoteInterface()</a>, <a class="el" href="class_r_s_v_p.html#afe2b92785082d5d7968dbce29795d67a">RSVP::preempt()</a>, <a class="el" href="class_t_e_d.html#a55b81eedccfaba0b2f3f972b299d2ecb">primaryAddress()</a>, <a class="el" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">RSVP::processHELLO_TIMEOUT()</a>, <a class="el" href="class_l_d_p.html#aa11dcfcdebea0304d26343746d28eb6c">LDP::processHelloTimeout()</a>, <a class="el" href="class_l_d_p.html#a129493952b252d5c5d426c4056197a4f">LDP::processLDPHello()</a>, <a class="el" href="class_link_state_routing.html#adf968828953798c0509831db05a3e7c7">LinkStateRouting::processLINK_STATE_MESSAGE()</a>, <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">RSVP::processPathMsg()</a>, <a class="el" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable()</a>, <a class="el" href="class_link_state_routing.html#a33c0d9a56684d301eba185ebbdc7a5ee">LinkStateRouting::receiveChangeNotification()</a>, <a class="el" href="class_r_s_v_p.html#a82a6e385d177099b8f842a394a7c2fac">RSVP::recoveryEvent()</a>, and <a class="el" href="class_link_state_routing.html#a21ae28bf79a10c1b0fcf4b2d511d06c8">LinkStateRouting::sendToPeers()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_t_e_d_8h.html">TED.h</a></li>
<li><a class="el" href="_t_e_d_8cc.html">TED.cc</a></li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_t_e_d.html">TED</a>      </li>

    <li class="footer">Generated on Tue Aug 7 2012 16:01:31 for INET Framework for OMNeT++/OMNEST by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
