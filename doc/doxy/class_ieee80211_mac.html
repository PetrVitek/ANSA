<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>INET Framework for OMNeT++/OMNEST: Ieee80211Mac Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_ieee80211_mac.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">Ieee80211Mac Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="Ieee80211Mac" --><!-- doxytag: inherits="WirelessMacBase,INotifiable" -->
<p>IEEE 802.11g with e Media Access Control Layer.  
 <a href="class_ieee80211_mac.html#details">More...</a></p>

<p><code>#include &lt;Ieee80211Mac.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Ieee80211Mac:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_ieee80211_mac.png" usemap="#Ieee80211Mac_map" alt=""/>
  <map id="Ieee80211Mac_map" name="Ieee80211Mac_map">
<area href="class_wireless_mac_base.html" title="Base class for wireless MAC protocols that use MF&#39;s physical layer." alt="WirelessMacBase" shape="rect" coords="0,0,113,24"/>
<area href="class_i_notifiable.html" title="Clients can receive change notifications from the NotificationBoard via this interface." alt="INotifiable" shape="rect" coords="123,0,236,24"/>
</map>
 </div></div>

<p><a href="class_ieee80211_mac-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_ieee80211_mac_1_1_edca.html">Edca</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_ieee80211_mac_1_1_edca_out_vector.html">EdcaOutVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_ieee80211_mac_1_1_ieee80211_a_s_f_tuple.html">Ieee80211ASFTuple</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This is used to populate fragments and identify duplicated messages.  <a href="struct_ieee80211_mac_1_1_ieee80211_a_s_f_tuple.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Construction functions</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a34230eadfc933351daa3921147113e67">Ieee80211Mac</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a90256fefdfde93f0f350a100c8b94eda">setBasicBitrate</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *frame)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Attaches a <a class="el" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a> to the frame which will cause it to be sent at basicBitrate not bitrate (e.g.  <a href="#a90256fefdfde93f0f350a100c8b94eda"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a8bcfae864475a658f025bdf618588ec9">setBitrateFrame</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *frame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a90f7826b4f53c79d6a22833b322d29f5">getTimeout</a> (<a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Produce a readable name of the given MAC operation mode.  <a href="#a90f7826b4f53c79d6a22833b322d29f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a> (<a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ad2037040db4c8e92618e6ea48165fc9c">getMinBitrate</a> (<a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">reportDataOk</a> (<a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed</a> (<a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#acf1bcb5d51fb31021b076e42525d4a83">getMinTimerTimeout</a> (<a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a7c39a34aafb4b133e176c1fe37c379ad">getMinSuccessThreshold</a> (<a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ac522b02d2b52a53ea3e473e603ec3f9e">getTimerTimeout</a> (<a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a81af710061696a71d03a0134038c1889">getSuccessThreshold</a> (<a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a024353fcbe63876a1098dc7d3829b624">setTimerTimeout</a> (int <a class="el" href="timer__queue_8h.html#acf27c4033c94130cee2308d1d5fd5573">timer_timeout</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a90d176964142b5fc4645b737a85674bc">setSuccessThreshold</a> (int success_threshold)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a6b11301b46f8e34c5c9aecd8c3645ec3">reportRecoveryFailure</a> (<a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aa9441edca636fd2bc5c2194a4f3ed2d7">reportFailure</a> (<a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ade04456dc6c3a954a263c65ebb7ad678">needRecoveryFallback</a> (<a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a567f98ee5373f5996f0f40ea813859d0">needNormalFallback</a> (<a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#adade11623fcc50f3348555cace3c9490">getBitrate</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate</a> (double b_rate)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af8e85a57bc0eaa9ccaf66c9189bc8655">resetCurrentBackOff</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ab7893e721612a54d3a7e3dd6727af3ba">isBackoffPending</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_modulation_type.html">ModulationType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ade19198da5d240de1ea31321fef496c0">getControlAnswerMode</a> (<a class="el" href="class_modulation_type.html">ModulationType</a> reqMode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aee23d91230a4003a7e8f642f7e8f3f3f">sendUp</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a message to the upper layer.  <a href="#aee23d91230a4003a7e8f642f7e8f3f3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ae04ce2e36d6e1271b6c43ba302b244b1">removeOldTuplesFromDuplicateMap</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a03a24ff3be5ea63f3e40bf5b56fc5baa">promiscousFrame</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ae6912255bec9031597492000db0a5dd8">isDuplicated</a> (cMessage *msg)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Initialization functions</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a71351c92bb5234f62edb24b1a0f1f1b7">numInitStages</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization of the module and its variables.  <a href="#a71351c92bb5234f62edb24b1a0f1f1b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize</a> (int)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization of the module and some variables.  <a href="#acc89ca1fc93ad17f2a78a01bd474f058"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a306f0e039efc2ede2e2e209bf02f7b1a">registerInterface</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a76503451f2ddc57bec7426c3f9f919ca">initializeQueueModule</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a9820b65e4aa7296332430bb5a35bf68f">finish</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a4724f434c9447f8127bbe9ecf8959c4f">configureAutoBitRate</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual const <a class="el" href="class_m_a_c_address.html">MACAddress</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af01cbb975be0e02f04d6f02647fd6081">isInterfaceRegistered</a> ()</td></tr>
<tr><td colspan="2"><div class="groupHeader">Message handing functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Functions called from other classes to notify about state changes and to handle messages. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a6844cdfc80c0c0f6b2faadff8a9abef9">receiveChangeNotification</a> (int category, const cObject *details)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the <a class="el" href="class_notification_board.html" title="Acts as a intermediary between module where state changes can occur and modules which are interested ...">NotificationBoard</a> whenever a change occurs we're interested in.  <a href="#a6844cdfc80c0c0f6b2faadff8a9abef9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aedaaf3e337f2d4a0790dbe392ac9f481">handleCommand</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle commands (msg kind+control info) coming from upper layers.  <a href="#aedaaf3e337f2d4a0790dbe392ac9f481"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle timer self messages.  <a href="#a9c4e21cc98783e53810b622e0c6deda2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a3c78df80f39331fe0c35a19b2a991714">handleUpperMsg</a> (cPacket *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle messages from upper layer.  <a href="#a3c78df80f39331fe0c35a19b2a991714"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg</a> (cPacket *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle messages from lower (physical) layer.  <a href="#af163e249ed0577fb5027e3e9cf54d6a5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle all kinds of messages and notifications with the state machine.  <a href="#aa95e52e25b2792fb62dd4d758cac72a2"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Timing functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Calculate various timings based on transmission rate and physical layer charactersitics. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS</a> (int category=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#abdd0b24ce9cb75d2f0fb1fa390a1bd97">getAIFS</a> (int AccessCategory)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a87bec8aaae96a4fe5d70816d48477183">getEIFS</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a8aee694a3627cb27994c0b29bc4c0d1f">getPIFS</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ab34517c360aa546041515d97c354dd43">computeBackoffPeriod</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *msg, int r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a95a64f0d0e6a5f300868187772051272">getHeaderTime</a> (double <a class="el" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3">bitrate</a>)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Timer functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These functions have the side effect of starting the corresponding timers. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a325e59dc74a3ad59596933aaf96012a7">scheduleSIFSPeriod</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *frame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a84bd3147b655f8396f37926fe34a17ad">scheduleDIFSPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1427f98783abfa545523111cd3f209bb">cancelDIFSPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a2e885fc167155dfd1e9ecbf2d0058807">scheduleAIFSPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ae4d9c2fb6e3b93a0922f0f6d502478ea">rescheduleAIFSPeriod</a> (int AccessCategory)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">scheduleDataTimeoutPeriod</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ad258b3308057764df66b6ea932a94791">scheduleMulticastTimeoutPeriod</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a9a3d534aa427c8ec65713ad1f3e0e223">cancelTimeoutPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a916864ac7a266c8fdf466a185c3a68dc">scheduleCTSTimeoutPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a21662171dd8c6356df3c8b050d7c9414">scheduleReservePeriod</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *frame)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule network allocation period according to 9.2.5.4.  <a href="#a21662171dd8c6356df3c8b050d7c9414"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a45baf5991b010588132ecfea105a17b0">invalidateBackoffPeriod</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a new backoff period based on the contention window.  <a href="#a45baf5991b010588132ecfea105a17b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ac0b29b4f8c930e44e5dd062b79e394c0">isInvalidBackoffPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">generateBackoffPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a4ea47166959fb7622be67011d131d8f5">scheduleBackoffPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a80a6ffa55936b6ee00a09c45cf82aaf0">cancelBackoffPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aa5cefe02fc6379d5aefb5c54d8d3422c">finishReception</a> ()</td></tr>
<tr><td colspan="2"><div class="groupHeader">Frame transmission functions</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1fa778f58e945ac0b347dfa66785224b">sendACKFrameOnEndSIFS</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a0afcec3ebbe4fac7c63ac32937604540">sendACKFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#abe3eb2e0a57570ce0f786da221090924">sendRTSFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a821d34cb04fd6ebd9b0d6989b963614d">sendCTSFrameOnEndSIFS</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a910622485a5816a5a5475858871bbbdc">sendCTSFrame</a> (<a class="el" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a> *rtsFrame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a535d6bc217f1cfc210fe798c3b89a114">sendDataFrameOnEndSIFS</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a3975bf98c4714a9346df65866521a479">sendMulticastFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Frame builder functions</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">buildDataFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_a_c_k_frame.html">Ieee80211ACKFrame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a7eab1962fd94c95151d62e3fb71253e0">buildACKFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToACK)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aec5d4575e8b8f4339815208c394f86cc">buildRTSFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_c_t_s_frame.html">Ieee80211CTSFrame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aaea047b56dcec7dc99d9681138c1f719">buildCTSFrame</a> (<a class="el" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a> *rtsFrame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aeefb173ea268c23946863c21e23a44c1">buildMulticastFrame</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frameToSend)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Utility functions</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ae7e7f22c4c76ac7be8ffff853cbf7503">finishCurrentTransmission</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a793227beb883e6f0f0b5c993aa6b7f56">giveUpCurrentTransmission</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a2c8b0bfbaafaf1b4180a636d3e4711b0">transmissionQueueEmpty</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aa6547247b1a7c9673b10647379ae8738">transmissionQueueSize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a692ea7349e92100524b65eb15649c0ea">mappingAccessCategory</a> (<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *frame)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Mapping to access categories.  <a href="#a692ea7349e92100524b65eb15649c0ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af24a75754986f091cf9b5e6987bb7bf3">sendDownPendingRadioConfigMsg</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send down the change channel message to the physical layer if there is any.  <a href="#af24a75754986f091cf9b5e6987bb7bf3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a030408679db4d3c498bf79032baa4618">setMode</a> (<a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03ca">Mode</a> <a class="el" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the current MAC operation mode.  <a href="#a030408679db4d3c498bf79032baa4618"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43">getCurrentTransmission</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current frame being transmitted.  <a href="#a85bc4ee88b4123a9b38d42cbf6af8e43"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120">resetStateVariables</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset backoff, backoffPeriod and retryCounter for IDLE state.  <a href="#ace0608e9ca57414b54817d04b184b120"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#adf18b82f7ec2838535e84fba8ef43f3e">isMediumStateChange</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Used by the state machine to identify medium state change events.  <a href="#adf18b82f7ec2838535e84fba8ef43f3e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729">isMediumFree</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells if the medium is free according to the physical and virtual carrier sense algorithm.  <a href="#aa4550d6a69c5e5a56d2a72ac0dc86729"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73">isMulticast</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if message is a multicast message.  <a href="#a9776e6c61ac04018cfa8ca659e688e73"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b">isForUs</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if message destination address is ours.  <a href="#a6a44f63a391702d7e31078eae7fe453b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a9c499d1e9e72020fe52e7c39ac4e8759">isSentByUs</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if message source address is ours.  <a href="#a9c499d1e9e72020fe52e7c39ac4e8759"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a331f759ba45d0d363362dce7d1b9f9b0">isDataOrMgmtFrame</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *frame)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the frame is a data or management frame.  <a href="#a331f759ba45d0d363362dce7d1b9f9b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ad5f07fdbe9b2e50329534eceb5772f52">isMsgAIFS</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the message is endAIFS and set currentAC.  <a href="#ad5f07fdbe9b2e50329534eceb5772f52"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a3ae0423bce927f7db18f55a88e44e20a">getFrameReceivedBeforeSIFS</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the last frame received before the SIFS period.  <a href="#a3ae0423bce927f7db18f55a88e44e20a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af9ffa2b13e0336e9cc15334dea0122da">popTransmissionQueue</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes frame at the front of queue.  <a href="#af9ffa2b13e0336e9cc15334dea0122da"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71">computeFrameDuration</a> (<a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the duration (in seconds) of the transmission of a frame over the physical channel.  <a href="#a938984c4144284ab225e087b6789ce71"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a38e18309549f34d7b355c1b1f4aab298">computeFrameDuration</a> (int bits, double <a class="el" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3">bitrate</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs all state information.  <a href="#a0cae572eab527e836aadae2ef9df5b3d"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Timer messages</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">endSIFS</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">End of the Short Inter-Frame Time period.  <a href="#a72b8ec2bcb1b505a709eab0ff96799dc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">endDIFS</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">End of the Data Inter-Frame Time period.  <a href="#a5bec0576b30d76fcb7f6546a83e6194a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34">endTXOP</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">End of the Arbitration Inter-Frame Time period.  <a href="#a72bbacef145a4da026a84c7666737e34"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">endTimeout</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">End of the backoff period.  <a href="#a27bd612a3164002020b5c315fb096f79"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">endReserve</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">End of medium reserve period (NAV) when two other nodes were communicating on the channel.  <a href="#a0f69601950c961a483e33c1455390f9a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40">mediumStateChange</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_radio.html" title="Abstract base class for radio modules.">Radio</a> state change self message.  <a href="#add8e4e32b5dc5f2e4960563eb457ed40"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Statistics</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a7cde61a60a0ba921bec433b5d1113c84">numCollision</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aaf2d7e0cd701202eb765b1b9c77bb658">numInternalCollision</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ac16d02e12179c33220ba6483b1ab724b">numBites</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ac4bf79c580118820bdecd1a001711049">numSentTXOP</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a44149d10cf8b6f6b1f906d68d2157714">numReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a82f4ea0e2f668f1ae81478595f446085">numSentMulticast</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a687d1cd47799dc6f23dba5fff9b65318">numReceivedMulticast</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ac9f8379cbc211038c510bef1c11ee3d2">numReceivedOther</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a4ac1aa9e7f916504cda9ab22991636ff">numAckSend</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a784de8a16601c48f1f792adc9a35c321">stateVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a82e1ab5d7dcef13a8fd670a6d4ed26fc">last</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a84539589b7715d29c69d1191a521f45b">radioStateVector</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a257f4986d42d532538d364ebff6faee5">RATE_ARF</a>, 
<a class="el" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603aa6fe59b12fc803c86072c66573d609db">RATE_AARF</a>, 
<a class="el" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a6448ede81a7e8e5498de339ffe201855">RATE_CR</a>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::list<br class="typebreak"/>
&lt; <a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a79de4fc04e68ba3e7154437b1b6bf6de">Ieee80211DataOrMgmtFrameList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="class_m_a_c_address.html">MACAddress</a>, <br class="typebreak"/>
<a class="el" href="struct_ieee80211_mac_1_1_ieee80211_a_s_f_tuple.html">Ieee80211ASFTuple</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a95569d10cacb1b4a69b1014e534d5109">Ieee80211ASFTupleList</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum Ieee80211Mac:: { ... } &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_wifi_preamble_type_8h.html#acc4e3ae44dc0fb54b8cb90d72b096887">WifiPreamble</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af5e0fd9af05f5494d1cce2821fb30d61">wifiPreambleType</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_modulation_type.html">ModulationType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a2197febe20e5c10f185ab3e1c27dfeb6">recFrameModulationType</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a254d1148be2a6837f462d2e17d0c8b9b">validRecMode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a8e05d7cf7a718c1e255e13f2ee6c132a">useModulationParameters</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#afa6210be8edc347e37ae15a2aaa0148c">prioritizeMulticast</a></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Configuration parameters</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp3a80e1e29c96d0837b12aef65785a41a"></a>These are filled in during the initialization phase and not supposed to change afterwards. </p>
</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_m_a_c_address.html">MACAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">address</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">MAC address.  <a href="#a3c12af5380d900067de2346248e5fc57"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3">bitrate</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.  <a href="#a1a66661cea11c9b2bcf69076d85b70c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">basicBitrate</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames.  <a href="#a1bb21c978ee1dced3878113908a6cc56"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#afad1fa013c358e58d9b32c447639c939">forceBitRate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af482d436d2854d2b332d9998991832fc">intrateIndex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af867e8336a2e4ec59e81f3fa628c877d">contI</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a18ed7f494325bfce7e9d8202b17a6396">contJ</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a2ba2e2ad7c0755a57964a3ca70d2c1ad">samplingCoeff</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af754205c721d31e0013694d4900e1106">recvdThroughput</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a673b1d429eb5b3317f6b21a8163e3376">autoBitrate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aab113076ebedf10680d4b5fd0753aea2">successCounter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a7dad9095f1d77e09887875ad87409da3">failedCounter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a43577335d5075e95b8df5b50dc4c0fed">recovery</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a0126961db9255a9566252031d9f59a53">timer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a5094bc880757a003fe136551735737b4">successThreshold</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ab8e98f3dc11067d8ae8a7b8f7aa42811">maxSuccessThreshold</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a0f990a962356bd4e76e0059212d9c034">timerTimeout</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ad9ad08bd94c81b48e46293bd51a51e4b">minSuccessThreshold</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a67ce877806468a78b227697716eb8c01">minTimerTimeout</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af5fa0eb384fc17a3a8450061aa4f11df">successCoeff</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a0e4312ce17d8f8bc193863061e3d55f4">timerCoeff</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1235ac69bf0f8224b85a65727845c530">_snr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aa81f69ceacbbfe39e1a995d6633cf2f1">snr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#adf9459416f0559f0a42f455e41658754">lossRate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a89c82053702cb058b0ae6bf7f0a835ba">timeStampLastMessageReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a58859ce182dc8bee111ae1099d42415e">recBytesOverPeriod</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a791b0124c72d0dc60dbc078412aab35b">throughputTimePeriod</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af6bf13854ffd2e58b9d536a1e808bbd8">throughputTimer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#afdd5aa78a078969d42c37cd9ae95bcab">throughputLastPeriod</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a06b55f6481683d64db13605b27b9537a">maxQueueSize</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of frames in the queue; should be set in the omnetpp.ini.  <a href="#a06b55f6481683d64db13605b27b9537a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a1bb03a4c3ab2056a1a3d9cab41388613">rtsThreshold</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The minimum length of MPDU to use RTS/CTS mechanism.  <a href="#a1bb03a4c3ab2056a1a3d9cab41388613"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9">transmissionLimit</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of transmissions for a message.  <a href="#a7ef4f6b331003c2e2054428fa4534bd9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a5d969292092b4220541de089ab25b250">defaultAC</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default access catagory.  <a href="#a5d969292092b4220541de089ab25b250"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af0b94b02412119954ca9e58f497503d1">ST</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Slot time 9us(fast slot time 802.11g only) 20us(802.11b / 802.11g backward compatible)  <a href="#af0b94b02412119954ca9e58f497503d1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a044b5bdca2b078f72cb44541a0524fcc">PHY_HEADER_LENGTH</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd">cwMinData</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum contention window.  <a href="#a620e6bf7dd85045ca5f65164a47e1cfd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ac299184b8c8043c2e345d5aa5247e58a">cwMaxData</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum contention window.  <a href="#ac299184b8c8043c2e345d5aa5247e58a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#adccf12e38c30df4ffe955abe34409b3d">cwMinMulticast</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Contention window size for multicast messages.  <a href="#adccf12e38c30df4ffe955abe34409b3d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af6a8a67f828409cf76bf3c3f0fd6d35b">fragmentationThreshold</a> = 2346</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Messages longer than this threshold will be sent in multiple fragments.  <a href="#af6a8a67f828409cf76bf3c3f0fd6d35b"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Ieee80211Mac state variables</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp6bf329588e375996247de73bbda4d7b2"></a>Various state information checked and modified according to the state machine. </p>
</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020da">State</a> { <br/>
&#160;&#160;<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>, 
<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>, 
<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa419717059960a235323c66331e52263d">WAITAIFS</a>, 
<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a>, 
<br/>
&#160;&#160;<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>, 
<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa679cc11c9367116aa016e789338705a3">WAITMULTICAST</a>, 
<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588">WAITCTS</a>, 
<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac">WAITSIFS</a>, 
<br/>
&#160;&#160;<a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the 80211 MAC state machine  <a href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020da">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03ca">Mode</a> { <a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caad4632a6aa23ad2c585b22a7d823fd792">DCF</a>, 
<a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caa3a0563a9327d929352635290f322e189">PCF</a>, 
<a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caa57944fe05f26c0428b0726414f2b8f17">EDCA</a>
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">80211 MAC operation modes  <a href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03ca">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cFSM&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#abe95692a0ffe9238206a2ef3d797ab82">fixFSM</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct_ieee80211_mac_1_1_edca.html">Edca</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct_ieee80211_mac_1_1_edca_out_vector.html">EdcaOutVector</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aa3aff37ddc0c81be4e3a8a8f27418f20">edcCAFOutVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_qo_s_classifier.html">IQoSClassifier</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#adeba876dd2315568f2ae52007c9a4106">classifier</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Arbitration interframe space number.  <a href="#adeba876dd2315568f2ae52007c9a4106"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03ca">Mode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a109b2d75d8fc4201674478a72bb31762">sequenceNumber</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sequence number to be assigned to the next frame.  <a href="#a109b2d75d8fc4201674478a72bb31762"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aae4419ab39198abdf1fc8955b07e5e20">lastReceiveFailed</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that the last frame received had bit errors in it or there was a collision during receiving the frame.  <a href="#aae4419ab39198abdf1fc8955b07e5e20"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f">nav</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">True during network allocation period.  <a href="#a591c8f37742e3960afb1a50df3e6673f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff">txop</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">True if we are in txop bursting packets.  <a href="#a28e584ef028657e010105eb1041814ff"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff">currentAC</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates which queue is acite.  <a href="#a41716f434221609b979a544e8f0e85ff"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#acfedb65b560767ae3701903e5dcdf141">oldcurrentAC</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Remember currentAC.  <a href="#acfedb65b560767ae3701903e5dcdf141"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449">RadioState::State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0">radioState</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">XXX Remember for which AC we wait for ACK.  <a href="#a08443ed66fd8def7cdbce3953cb732c0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a70d16f3fdb285db5b2ae29300f9497c3">radioModule</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a4aae6b9b700f7d85163553cece6f09d9">duplicateDetect</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A list of last sender, sequence and fragment number tuples to identify duplicates, see spec 9.2.9.  <a href="#a4aae6b9b700f7d85163553cece6f09d9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#adb1a6965d57d5bc64344ce47fdffc9bd">purgeOldTuples</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a2e70e03af5120cea1b89769d4e7a5f0a">duplicateTimeOut</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a57492265daaf979dabb33ad6467b6bc4">lastTimeDelete</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ieee80211_mac.html#a95569d10cacb1b4a69b1014e534d5109">Ieee80211ASFTupleList</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af3cf1a0d1737d69c490ef2fdf9595f3f">asfTuplesList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_passive_queue.html">IPassiveQueue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e">queueModule</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Passive queue module to request messages from.  <a href="#a59cc1a59362db4fdf48b81b8e7f62d2e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">pendingRadioConfigMsg</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The last change channel message received and not yet sent to the physical layer, or NULL.  <a href="#ad747f5e3abaad56a3fb03ec39426c27e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a355c85be7885e389bd989d08e02e54a9">TXOP</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a9ac06ffa3e8b858168973ffc75cadf29">AIFSN</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a8a81c5b96c8f83712049eabf4a4c1a0c">cwMax</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#afd3049b4415fb2e0e0aa69ee8a4735fc">cwMin</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <br class="typebreak"/>
<a class="el" href="class_ieee80211_mac.html#a79de4fc04e68ba3e7154437b1b6bf6de">Ieee80211DataOrMgmtFrameList</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a52982392fb7e289c2f8cc9ec4c47ce2b">setEndAIFS</a> (int i, cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#af17b9fe952d892cff2f85dbe97425a1c">setEndBackoff</a> (int i, cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual long &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a92d78e95b726f22b3ce726be0e6807fd">numRetry</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual long &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a4b6a1ca005a57bfd5447c9a853d0247d">numSentWithoutRetry</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual long &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a94fdb1fcc53581be97d70feee63a3ab6">numGivenUp</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual long &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a33ead2b36b8c62088f7106b154af22af">numSent</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual long &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a97764bfd499bb2f781c55edffd0359b2">numDropped</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual long &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#abc98919400f5ba39dde97589f4a4c7f7">bites</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">minjitter</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">maxjitter</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual cOutVector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#aee1c346611b9f5515aeadded10d96ca0">jitter</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual cOutVector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ac4dab428b184257867acca0349bc187c">macDelay</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual cOutVector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a916d6ad78851a4338821a4e456b754b5">throughput</a> (int i=-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual const bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#a4496ce674d2048d8deb18b277c7d7b25">isBakoffMsg</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ad717066cb5cc83f789b4abbe28d311d7">modeName</a> (int <a class="el" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ieee80211_mac.html#ad207f6ec6848d6f2b8aa95d21a8c0897">getRadioModuleId</a> ()</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>IEEE 802.11g with e Media Access Control Layer. </p>
<p>Various comments in the code refer to the Wireless LAN Medium Access Control (MAC) and Physical Layer(PHY) Specifications ANSI/IEEE Std 802.11, 1999 Edition (R2003) ANSI/IEEE Std 802.11, 2007 Edition</p>
<p>For more info, see the NED file.</p>
<p>TODO: support fragmentation TODO: PCF mode TODO: CF period TODO: pass radio power to upper layer TODO: transmission complete notification to upper layer TODO: STA TCF timer synchronization, see Chapter 11 pp 123</p>
<p>Parts of the implementation have been taken over from the Mobility Framework's Mac80211 module. </p>
</div><hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a95569d10cacb1b4a69b1014e534d5109"></a><!-- doxytag: member="Ieee80211Mac::Ieee80211ASFTupleList" ref="a95569d10cacb1b4a69b1014e534d5109" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="class_m_a_c_address.html">MACAddress</a>, <a class="el" href="struct_ieee80211_mac_1_1_ieee80211_a_s_f_tuple.html">Ieee80211ASFTuple</a>&gt; <a class="el" href="class_ieee80211_mac.html#a95569d10cacb1b4a69b1014e534d5109">Ieee80211Mac::Ieee80211ASFTupleList</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a79de4fc04e68ba3e7154437b1b6bf6de"></a><!-- doxytag: member="Ieee80211Mac::Ieee80211DataOrMgmtFrameList" ref="a79de4fc04e68ba3e7154437b1b6bf6de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::list&lt;<a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a>*&gt; <a class="el" href="class_ieee80211_mac.html#a79de4fc04e68ba3e7154437b1b6bf6de">Ieee80211Mac::Ieee80211DataOrMgmtFrameList</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a27508d4e3a61bbcce72dffa43f0b0603"></a><!-- doxytag: member="Ieee80211Mac::@3" ref="a27508d4e3a61bbcce72dffa43f0b0603" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a27508d4e3a61bbcce72dffa43f0b0603a257f4986d42d532538d364ebff6faee5"></a><!-- doxytag: member="RATE_ARF" ref="a27508d4e3a61bbcce72dffa43f0b0603a257f4986d42d532538d364ebff6faee5" args="" -->RATE_ARF</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a27508d4e3a61bbcce72dffa43f0b0603aa6fe59b12fc803c86072c66573d609db"></a><!-- doxytag: member="RATE_AARF" ref="a27508d4e3a61bbcce72dffa43f0b0603aa6fe59b12fc803c86072c66573d609db" args="" -->RATE_AARF</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a27508d4e3a61bbcce72dffa43f0b0603a6448ede81a7e8e5498de339ffe201855"></a><!-- doxytag: member="RATE_CR" ref="a27508d4e3a61bbcce72dffa43f0b0603a6448ede81a7e8e5498de339ffe201855" args="" -->RATE_CR</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a257f4986d42d532538d364ebff6faee5">RATE_ARF</a>,   <span class="comment">// Auto Rate Fallback</span>
        <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603aa6fe59b12fc803c86072c66573d609db">RATE_AARF</a>,  <span class="comment">// Adaptatice ARF</span>
        <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a6448ede81a7e8e5498de339ffe201855">RATE_CR</a>,    <span class="comment">// Constant Rate</span>
    } <a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a>;
</pre></div>
</div>
</div>
<a class="anchor" id="acc067e4a0585c9fbac4ce009e2ed03ca"></a><!-- doxytag: member="Ieee80211Mac::Mode" ref="acc067e4a0585c9fbac4ce009e2ed03ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03ca">Ieee80211Mac::Mode</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>80211 MAC operation modes </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="acc067e4a0585c9fbac4ce009e2ed03caad4632a6aa23ad2c585b22a7d823fd792"></a><!-- doxytag: member="DCF" ref="acc067e4a0585c9fbac4ce009e2ed03caad4632a6aa23ad2c585b22a7d823fd792" args="" -->DCF</em>&nbsp;</td><td>
<p>Distributed Coordination Function. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="acc067e4a0585c9fbac4ce009e2ed03caa3a0563a9327d929352635290f322e189"></a><!-- doxytag: member="PCF" ref="acc067e4a0585c9fbac4ce009e2ed03caa3a0563a9327d929352635290f322e189" args="" -->PCF</em>&nbsp;</td><td>
<p>Point Coordination Function. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="acc067e4a0585c9fbac4ce009e2ed03caa57944fe05f26c0428b0726414f2b8f17"></a><!-- doxytag: member="EDCA" ref="acc067e4a0585c9fbac4ce009e2ed03caa57944fe05f26c0428b0726414f2b8f17" args="" -->EDCA</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caad4632a6aa23ad2c585b22a7d823fd792" title="Distributed Coordination Function.">DCF</a>,  
        <a class="code" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caa3a0563a9327d929352635290f322e189" title="Point Coordination Function.">PCF</a>,  
        <a class="code" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caa57944fe05f26c0428b0726414f2b8f17">EDCA</a>,
    };
</pre></div>
</div>
</div>
<a class="anchor" id="a7c7e301f779c29eb446b9a06f74020da"></a><!-- doxytag: member="Ieee80211Mac::State" ref="a7c7e301f779c29eb446b9a06f74020da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020da">Ieee80211Mac::State</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the 80211 MAC state machine </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5"></a><!-- doxytag: member="IDLE" ref="a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5" args="" -->IDLE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25"></a><!-- doxytag: member="DEFER" ref="a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25" args="" -->DEFER</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daa419717059960a235323c66331e52263d"></a><!-- doxytag: member="WAITAIFS" ref="a7c7e301f779c29eb446b9a06f74020daa419717059960a235323c66331e52263d" args="" -->WAITAIFS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708"></a><!-- doxytag: member="BACKOFF" ref="a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708" args="" -->BACKOFF</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70"></a><!-- doxytag: member="WAITACK" ref="a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70" args="" -->WAITACK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daa679cc11c9367116aa016e789338705a3"></a><!-- doxytag: member="WAITMULTICAST" ref="a7c7e301f779c29eb446b9a06f74020daa679cc11c9367116aa016e789338705a3" args="" -->WAITMULTICAST</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588"></a><!-- doxytag: member="WAITCTS" ref="a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588" args="" -->WAITCTS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac"></a><!-- doxytag: member="WAITSIFS" ref="a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac" args="" -->WAITSIFS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b"></a><!-- doxytag: member="RECEIVE" ref="a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b" args="" -->RECEIVE</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
        <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
        <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa419717059960a235323c66331e52263d">WAITAIFS</a>,
        <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a>,
        <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>,
        <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa679cc11c9367116aa016e789338705a3">WAITMULTICAST</a>,
        <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588">WAITCTS</a>,
        <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac">WAITSIFS</a>,
        <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>,
    };
</pre></div>
</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a34230eadfc933351daa3921147113e67"></a><!-- doxytag: member="Ieee80211Mac::Ieee80211Mac" ref="a34230eadfc933351daa3921147113e67" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_mac.html#a34230eadfc933351daa3921147113e67">Ieee80211Mac::Ieee80211Mac</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a" title="End of medium reserve period (NAV) when two other nodes were communicating on the channel...">endReserve</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <a class="code" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40" title="Radio state change self message.">mediumStateChange</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e" title="The last change channel message received and not yet sent to the physical layer, or NULL...">pendingRadioConfigMsg</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <a class="code" href="class_ieee80211_mac.html#adeba876dd2315568f2ae52007c9a4106" title="Arbitration interframe space number.">classifier</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5996f42ab538115f55c7f74121276f09"></a><!-- doxytag: member="Ieee80211Mac::~Ieee80211Mac" ref="a5996f42ab538115f55c7f74121276f09" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">Ieee80211Mac::~Ieee80211Mac</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a>);
    cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a>);
    cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a>);
    cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a" title="End of medium reserve period (NAV) when two other nodes were communicating on the channel...">endReserve</a>);
    cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40" title="Radio state change self message.">mediumStateChange</a>);
    cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34" title="End of the Arbitration Inter-Frame Time period.">endTXOP</a>);
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size(); i++)
    {
        cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(i));
        cancelAndDelete(<a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>(i));
        <span class="keywordflow">while</span> (!<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>(i)-&gt;<a class="code" href="namespace_const_type.html#a292c6824a659d30847032a3c0d1c0217">empty</a>())
        {
            <a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *temp = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *<span class="keyword">&gt;</span> (<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>(i)-&gt;front());
            <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>(i)-&gt;pop_front();
            <span class="keyword">delete</span> temp;
        }
    }
    <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.clear();
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#aa3aff37ddc0c81be4e3a8a8f27418f20">edcCAFOutVector</a>.size(); i++)
    {
        <span class="keyword">delete</span> <a class="code" href="class_ieee80211_mac.html#aa3aff37ddc0c81be4e3a8a8f27418f20">edcCAFOutVector</a>[i].jitter;
        <span class="keyword">delete</span> <a class="code" href="class_ieee80211_mac.html#aa3aff37ddc0c81be4e3a8a8f27418f20">edcCAFOutVector</a>[i].macDelay;
        <span class="keyword">delete</span> <a class="code" href="class_ieee80211_mac.html#aa3aff37ddc0c81be4e3a8a8f27418f20">edcCAFOutVector</a>[i].throughput;
    }
    <a class="code" href="class_ieee80211_mac.html#aa3aff37ddc0c81be4e3a8a8f27418f20">edcCAFOutVector</a>.clear();
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e" title="The last change channel message received and not yet sent to the physical layer, or NULL...">pendingRadioConfigMsg</a>)
        <span class="keyword">delete</span> <a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e" title="The last change channel message received and not yet sent to the physical layer, or NULL...">pendingRadioConfigMsg</a>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9ac06ffa3e8b858168973ffc75cadf29"></a><!-- doxytag: member="Ieee80211Mac::AIFSN" ref="a9ac06ffa3e8b858168973ffc75cadf29" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int &amp; <a class="el" href="class_ieee80211_mac.html#a9ac06ffa3e8b858168973ffc75cadf29">Ieee80211Mac::AIFSN</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#abdd0b24ce9cb75d2f0fb1fa390a1bd97">getAIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].AIFSN;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3f68085d6a98970f4fae1595fd24a090"></a><!-- doxytag: member="Ieee80211Mac::backoff" ref="a3f68085d6a98970f4fae1595fd24a090" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool &amp; <a class="el" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">Ieee80211Mac::backoff</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#aa5cefe02fc6379d5aefb5c54d8d3422c">finishReception()</a>, <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>, <a class="el" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120">resetStateVariables()</a>, and <a class="el" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
    <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].backoff;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acf4209fec23884b4540f7bf771241b41"></a><!-- doxytag: member="Ieee80211Mac::backoffPeriod" ref="acf4209fec23884b4540f7bf771241b41" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t &amp; <a class="el" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">Ieee80211Mac::backoffPeriod</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">generateBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, <a class="el" href="class_ieee80211_mac.html#a45baf5991b010588132ecfea105a17b0">invalidateBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#ac0b29b4f8c930e44e5dd062b79e394c0">isInvalidBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>, <a class="el" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120">resetStateVariables()</a>, and <a class="el" href="class_ieee80211_mac.html#a4ea47166959fb7622be67011d131d8f5">scheduleBackoffPeriod()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].backoffPeriod;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abc98919400f5ba39dde97589f4a4c7f7"></a><!-- doxytag: member="Ieee80211Mac::bites" ref="abc98919400f5ba39dde97589f4a4c7f7" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long &amp; <a class="el" href="class_ieee80211_mac.html#abc98919400f5ba39dde97589f4a4c7f7">Ieee80211Mac::bites</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].bites;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7eab1962fd94c95151d62e3fb71253e0"></a><!-- doxytag: member="Ieee80211Mac::buildACKFrame" ref="a7eab1962fd94c95151d62e3fb71253e0" args="(Ieee80211DataOrMgmtFrame *frameToACK)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_a_c_k_frame.html">Ieee80211ACKFrame</a> * <a class="el" href="class_ieee80211_mac.html#a7eab1962fd94c95151d62e3fb71253e0">Ieee80211Mac::buildACKFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td>
          <td class="paramname"><em>frameToACK</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a0afcec3ebbe4fac7c63ac32937604540">sendACKFrame()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_a_c_k_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211ACKFrame</a> *frame = <span class="keyword">new</span> <a class="code" href="class_ieee80211_a_c_k_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211ACKFrame</a>(<span class="stringliteral">&quot;wlan-ack&quot;</span>);
    frame-&gt;<a class="code" href="class_ieee80211_frame.html#ac55a5ec0719a3675fdfeb15e99c07a9f">setReceiverAddress</a>(frameToACK-&gt;<a class="code" href="class_ieee80211_two_address_frame.html#a88c59cc71e76df61f0418642f8381ee9">getTransmitterAddress</a>());

    <span class="keywordflow">if</span> (!frameToACK-&gt;<a class="code" href="class_ieee80211_frame.html#a8d7eb0502caef6252275e46e01b13aaa">getMoreFragments</a>())
        frame-&gt;<a class="code" href="class_ieee80211_frame.html#a92abe2e5dbf4e2f678e3600693632322">setDuration</a>(0);
    <span class="keywordflow">else</span>
        frame-&gt;<a class="code" href="class_ieee80211_frame.html#a92abe2e5dbf4e2f678e3600693632322">setDuration</a>(frameToACK-&gt;<a class="code" href="class_ieee80211_frame.html#a5779472ccaefae6d1f80db8f2473c035">getDuration</a>() - <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() - <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>));

    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaea047b56dcec7dc99d9681138c1f719"></a><!-- doxytag: member="Ieee80211Mac::buildCTSFrame" ref="aaea047b56dcec7dc99d9681138c1f719" args="(Ieee80211RTSFrame *rtsFrame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_c_t_s_frame.html">Ieee80211CTSFrame</a> * <a class="el" href="class_ieee80211_mac.html#aaea047b56dcec7dc99d9681138c1f719">Ieee80211Mac::buildCTSFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a> *&#160;</td>
          <td class="paramname"><em>rtsFrame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a910622485a5816a5a5475858871bbbdc">sendCTSFrame()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_c_t_s_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211CTSFrame</a> *frame = <span class="keyword">new</span> <a class="code" href="class_ieee80211_c_t_s_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211CTSFrame</a>(<span class="stringliteral">&quot;wlan-cts&quot;</span>);
    frame-&gt;<a class="code" href="class_ieee80211_frame.html#ac55a5ec0719a3675fdfeb15e99c07a9f">setReceiverAddress</a>(rtsFrame-&gt;<a class="code" href="class_ieee80211_two_address_frame.html#a88c59cc71e76df61f0418642f8381ee9">getTransmitterAddress</a>());
    frame-&gt;<a class="code" href="class_ieee80211_frame.html#a92abe2e5dbf4e2f678e3600693632322">setDuration</a>(rtsFrame-&gt;<a class="code" href="class_ieee80211_frame.html#a5779472ccaefae6d1f80db8f2473c035">getDuration</a>() - <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() - <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a615c2db16153273956d34e0a7b4a46cf">LENGTH_CTS</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>));

    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5806d200b6dc0abcd87732edb240479e"></a><!-- doxytag: member="Ieee80211Mac::buildDataFrame" ref="a5806d200b6dc0abcd87732edb240479e" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> * <a class="el" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">Ieee80211Mac::buildDataFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td>
          <td class="paramname"><em>frameToSend</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame()</a>, and <a class="el" href="class_ieee80211_mac.html#a3975bf98c4714a9346df65866521a479">sendMulticastFrame()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_data_or_mgmt_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataOrMgmtFrame</a> *frame = (<a class="code" href="class_ieee80211_data_or_mgmt_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataOrMgmtFrame</a> *)frameToSend-&gt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html#ab643546cacf8f6b151b7f98f9d59d65b">dup</a>();

    <span class="keywordflow">if</span> (frameToSend-&gt;getControlInfo()!=<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        cObject * ctr = frameToSend-&gt;getControlInfo();
        <a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a> *ctrl = dynamic_cast &lt;<a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a>*&gt; (ctr);
        <span class="keywordflow">if</span> (ctrl == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
            opp_error(<span class="stringliteral">&quot;control info is not PhyControlInfo type %s&quot;</span>);
        frame-&gt;setControlInfo(ctrl-&gt;<a class="code" href="class_phy_control_info.html#a5c04d5003ab24f9b506a19b85fe8b799">dup</a>());
    }
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73" title="Returns true if message is a multicast message.">isMulticast</a>(frameToSend))
        frame-&gt;<a class="code" href="class_ieee80211_frame.html#a92abe2e5dbf4e2f678e3600693632322">setDuration</a>(0);
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!frameToSend-&gt;<a class="code" href="class_ieee80211_frame.html#a8d7eb0502caef6252275e46e01b13aaa">getMoreFragments</a>())
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff" title="True if we are in txop bursting packets.">txop</a>)

        {
            <span class="comment">// ++ operation is safe because txop is true</span>
            std::list&lt;Ieee80211DataOrMgmtFrame*&gt;::iterator nextframeToSend;
            nextframeToSend = <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;begin();
            nextframeToSend++;
            ASSERT(<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;end() != nextframeToSend);
            <span class="keywordtype">double</span> bitRate = <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>;
            <span class="keywordtype">int</span> size = (*nextframeToSend)-&gt;getBitLength();
            <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;front()-&gt;getControlInfo() &amp;&amp; dynamic_cast&lt;PhyControlInfo*&gt;(<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;front()-&gt;getControlInfo()))
            {
                bitRate = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a>*<span class="keyword">&gt;</span>(<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;front()-&gt;getControlInfo())-&gt;<a class="code" href="class_ieee80211_mac.html#adade11623fcc50f3348555cace3c9490">getBitrate</a>();
                <span class="keywordflow">if</span> (bitRate == 0)
                    bitRate = <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>;
            }
            frame-&gt;<a class="code" href="class_ieee80211_frame.html#a92abe2e5dbf4e2f678e3600693632322">setDuration</a>(3 * <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + 2 * <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>)
                               + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(size,bitRate));
        }
        <span class="keywordflow">else</span>
            frame-&gt;<a class="code" href="class_ieee80211_frame.html#a92abe2e5dbf4e2f678e3600693632322">setDuration</a>(<a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>));
    }
    <span class="keywordflow">else</span>
        <span class="comment">// FIXME: shouldn&#39;t we use the next frame to be sent?</span>
        frame-&gt;<a class="code" href="class_ieee80211_frame.html#a92abe2e5dbf4e2f678e3600693632322">setDuration</a>(3 * <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + 2 * <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>) + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(frameToSend));

    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aeefb173ea268c23946863c21e23a44c1"></a><!-- doxytag: member="Ieee80211Mac::buildMulticastFrame" ref="aeefb173ea268c23946863c21e23a44c1" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> * <a class="el" href="class_ieee80211_mac.html#aeefb173ea268c23946863c21e23a44c1">Ieee80211Mac::buildMulticastFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td>
          <td class="paramname"><em>frameToSend</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_data_or_mgmt_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataOrMgmtFrame</a> *frame = (<a class="code" href="class_ieee80211_data_or_mgmt_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataOrMgmtFrame</a> *)frameToSend-&gt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html#ab643546cacf8f6b151b7f98f9d59d65b">dup</a>();

    <a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a> *phyControlInfo_old = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a> *<span class="keyword">&gt;</span>( frameToSend-&gt;getControlInfo() );
    <span class="keywordflow">if</span> (phyControlInfo_old)
    {
        ev&lt;&lt;<span class="stringliteral">&quot;Per frame1 params&quot;</span>&lt;&lt;endl;
        <a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a> *phyControlInfo_new = <span class="keyword">new</span> <a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a>;
        *phyControlInfo_new = *phyControlInfo_old;
        <span class="comment">//EV&lt;&lt;&quot;PhyControlInfo bitrate &quot;&lt;&lt;phyControlInfo-&gt;getBitrate()/1e6&lt;&lt;&quot;Mbps txpower &quot;&lt;&lt;phyControlInfo-&gt;txpower()&lt;&lt;&quot;mW&quot;&lt;&lt;endl;</span>
        frame-&gt;setControlInfo(  phyControlInfo_new  );
    }

    frame-&gt;<a class="code" href="class_ieee80211_frame.html#a92abe2e5dbf4e2f678e3600693632322">setDuration</a>(0);
    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aec5d4575e8b8f4339815208c394f86cc"></a><!-- doxytag: member="Ieee80211Mac::buildRTSFrame" ref="aec5d4575e8b8f4339815208c394f86cc" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a> * <a class="el" href="class_ieee80211_mac.html#aec5d4575e8b8f4339815208c394f86cc">Ieee80211Mac::buildRTSFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td>
          <td class="paramname"><em>frameToSend</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#abe3eb2e0a57570ce0f786da221090924">sendRTSFrame()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_r_t_s_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211RTSFrame</a> *frame = <span class="keyword">new</span> <a class="code" href="class_ieee80211_r_t_s_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211RTSFrame</a>(<span class="stringliteral">&quot;wlan-rts&quot;</span>);
    frame-&gt;<a class="code" href="class_ieee80211_two_address_frame.html#a87ef515e63a4b15cc019d4594f205834">setTransmitterAddress</a>(<a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57" title="MAC address.">address</a>);
    frame-&gt;<a class="code" href="class_ieee80211_frame.html#ac55a5ec0719a3675fdfeb15e99c07a9f">setReceiverAddress</a>(frameToSend-&gt;<a class="code" href="class_ieee80211_frame.html#a342fbce2fe9bff7e0894e8ee1cf8da36">getReceiverAddress</a>());
    frame-&gt;<a class="code" href="class_ieee80211_frame.html#a92abe2e5dbf4e2f678e3600693632322">setDuration</a>(3 * <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a615c2db16153273956d34e0a7b4a46cf">LENGTH_CTS</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>) +
                       <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(frameToSend) +
                       <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>));

    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1d38962577c615ad8392c4d3872397a6"></a><!-- doxytag: member="Ieee80211Mac::cancelAIFSPeriod" ref="a1d38962577c615ad8392c4d3872397a6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">Ieee80211Mac::cancelAIFSPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;canceling AIFS period\n&quot;</span>;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
        cancelEvent(<a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(i));
    cancelEvent(<a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a80a6ffa55936b6ee00a09c45cf82aaf0"></a><!-- doxytag: member="Ieee80211Mac::cancelBackoffPeriod" ref="a80a6ffa55936b6ee00a09c45cf82aaf0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a80a6ffa55936b6ee00a09c45cf82aaf0">Ieee80211Mac::cancelBackoffPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;cancelling Backoff period - only if some is scheduled\n&quot;</span>;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
        cancelEvent(<a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>(i));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1427f98783abfa545523111cd3f209bb"></a><!-- doxytag: member="Ieee80211Mac::cancelDIFSPeriod" ref="a1427f98783abfa545523111cd3f209bb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a1427f98783abfa545523111cd3f209bb">Ieee80211Mac::cancelDIFSPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;canceling DIFS period\n&quot;</span>;
    cancelEvent(<a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9a3d534aa427c8ec65713ad1f3e0e223"></a><!-- doxytag: member="Ieee80211Mac::cancelTimeoutPeriod" ref="a9a3d534aa427c8ec65713ad1f3e0e223" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a9a3d534aa427c8ec65713ad1f3e0e223">Ieee80211Mac::cancelTimeoutPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;canceling timeout period\n&quot;</span>;
    cancelEvent(<a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab34517c360aa546041515d97c354dd43"></a><!-- doxytag: member="Ieee80211Mac::computeBackoffPeriod" ref="ab34517c360aa546041515d97c354dd43" args="(Ieee80211Frame *msg, int r)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#ab34517c360aa546041515d97c354dd43">Ieee80211Mac::computeBackoffPeriod</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>r</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">generateBackoffPeriod()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> cw;

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;generating backoff slot number for retry: &quot;</span> &lt;&lt; r &lt;&lt; endl;
    <span class="keywordflow">if</span> (msg &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73" title="Returns true if message is a multicast message.">isMulticast</a>(msg))
        cw = <a class="code" href="class_ieee80211_mac.html#adccf12e38c30df4ffe955abe34409b3d" title="Contention window size for multicast messages.">cwMinMulticast</a>;
    <span class="keywordflow">else</span>
    {
        ASSERT(0 &lt;= r &amp;&amp; r &lt; <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9" title="Maximum number of transmissions for a message.">transmissionLimit</a>);

        cw = (<a class="code" href="class_ieee80211_mac.html#afd3049b4415fb2e0e0aa69ee8a4735fc">cwMin</a>() + 1) * (1 &lt;&lt; r) - 1;

        <span class="keywordflow">if</span> (cw &gt; <a class="code" href="class_ieee80211_mac.html#a8a81c5b96c8f83712049eabf4a4c1a0c">cwMax</a>())
            cw = <a class="code" href="class_ieee80211_mac.html#a8a81c5b96c8f83712049eabf4a4c1a0c">cwMax</a>();
    }

    <span class="keywordtype">int</span> c = intrand(cw + 1);

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;generated backoff slot number: &quot;</span> &lt;&lt; c &lt;&lt; <span class="stringliteral">&quot; , cw: &quot;</span> &lt;&lt; cw &lt;&lt; <span class="stringliteral">&quot; ,cwMin:cwMax = &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#afd3049b4415fb2e0e0aa69ee8a4735fc">cwMin</a>() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a8a81c5b96c8f83712049eabf4a4c1a0c">cwMax</a>() &lt;&lt; endl;

    <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)c) * <a class="code" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a938984c4144284ab225e087b6789ce71"></a><!-- doxytag: member="Ieee80211Mac::computeFrameDuration" ref="a938984c4144284ab225e087b6789ce71" args="(Ieee80211Frame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71">Ieee80211Mac::computeFrameDuration</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Computes the duration (in seconds) of the transmission of a frame over the physical channel. </p>
<p>'bits' should be the total length of the MAC frame in bits, but excluding the physical layer framing (preamble etc.) </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a7eab1962fd94c95151d62e3fb71253e0">buildACKFrame()</a>, <a class="el" href="class_ieee80211_mac.html#aaea047b56dcec7dc99d9681138c1f719">buildCTSFrame()</a>, <a class="el" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">buildDataFrame()</a>, <a class="el" href="class_ieee80211_mac.html#aec5d4575e8b8f4339815208c394f86cc">buildRTSFrame()</a>, <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, <a class="el" href="class_ieee80211_mac.html#a916864ac7a266c8fdf466a185c3a68dc">scheduleCTSTimeoutPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">scheduleDataTimeoutPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#ad258b3308057764df66b6ea932a94791">scheduleMulticastTimeoutPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame()</a>.</p>
<div class="fragment"><pre class="fragment">{

    <a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a> *ctrl;
    <span class="keywordtype">double</span> duration;
    ev&lt;&lt;*msg;
    ctrl = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a>*<span class="keyword">&gt;</span> ( msg-&gt;removeControlInfo() );
    <span class="keywordflow">if</span> ( ctrl )
    {
        ev&lt;&lt;<span class="stringliteral">&quot;Per frame2 params bitrate &quot;</span>&lt;&lt;ctrl-&gt;<a class="code" href="class_phy_control_info.html#a75467afe8d5de4d4aa72e8f773117736">getBitrate</a>()/1e6&lt;&lt;endl;
        duration = <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(msg-&gt;getBitLength(), ctrl-&gt;<a class="code" href="class_phy_control_info.html#a75467afe8d5de4d4aa72e8f773117736">getBitrate</a>());
        <span class="keyword">delete</span> ctrl;
        <span class="keywordflow">return</span> duration;
    }
    <span class="keywordflow">else</span>

        <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(msg-&gt;getBitLength(), <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a38e18309549f34d7b355c1b1f4aab298"></a><!-- doxytag: member="Ieee80211Mac::computeFrameDuration" ref="a38e18309549f34d7b355c1b1f4aab298" args="(int bits, double bitrate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71">Ieee80211Mac::computeFrameDuration</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>bitrate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">double</span> duration;
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a044b5bdca2b078f72cb44541a0524fcc">PHY_HEADER_LENGTH</a>&lt;0)
    {
        <a class="code" href="class_modulation_type.html" title="represent a single transmission mode">ModulationType</a> modType;
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;g&#39;</span> || (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;b&#39;</span>))
            modType = <a class="code" href="class_wifi_modulation_type.html#a858c98cd637c56ab55fe1cddba298f7c">WifiModulationType::getMode80211g</a>(<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>)
            modType = <a class="code" href="class_wifi_modulation_type.html#afd79b3878ac41e168e9d9a78a56a633d">WifiModulationType::getMode80211a</a>(<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;p&#39;</span>)
            modType = <a class="code" href="class_wifi_modulation_type.html#a5eefbb523ffdccff54ec23e46e50dac3">WifiModulationType::getMode80211p</a>(<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>);
        <span class="keywordflow">else</span>
            opp_error(<span class="stringliteral">&quot;Opmode not supported&quot;</span>);
        duration = SIMTIME_DBL(<a class="code" href="class_wifi_modulation_type.html#a94fdef72e7064d34a0879b61e43d6077">WifiModulationType::calculateTxDuration</a>(bits, modType, <a class="code" href="class_ieee80211_mac.html#af5e0fd9af05f5494d1cce2821fb30d61">wifiPreambleType</a>));
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">if</span> ((<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;g&#39;</span>) || (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>) || (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;p&#39;</span>))
            duration = 4*ceil((16+bits+6)/(<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>/1e6*4))*1e-6 + <a class="code" href="class_ieee80211_mac.html#a044b5bdca2b078f72cb44541a0524fcc">PHY_HEADER_LENGTH</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;b&#39;</span>)
            duration = bits / <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a> + PHY_HEADER_LENGTH / <a class="code" href="_ieee80211_consts_8h.html#a0454abde1a622bc79c2528d728e466ef">BITRATE_HEADER</a>;
        <span class="keywordflow">else</span>
            opp_error(<span class="stringliteral">&quot;Opmode not supported&quot;</span>);
    }

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot; duration=&quot;</span>&lt;&lt;duration*1e6&lt;&lt;<span class="stringliteral">&quot;us(&quot;</span>&lt;&lt;bits&lt;&lt;<span class="stringliteral">&quot;bits &quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>/1e6&lt;&lt;<span class="stringliteral">&quot;Mbps)&quot;</span>&lt;&lt;endl;
    <span class="keywordflow">return</span> duration;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4724f434c9447f8127bbe9ecf8959c4f"></a><!-- doxytag: member="Ieee80211Mac::configureAutoBitRate" ref="a4724f434c9447f8127bbe9ecf8959c4f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a4724f434c9447f8127bbe9ecf8959c4f">Ieee80211Mac::configureAutoBitRate</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_mac.html#afad1fa013c358e58d9b32c447639c939">forceBitRate</a> = par(<span class="stringliteral">&quot;forceBitRate&quot;</span>);
    <a class="code" href="class_ieee80211_mac.html#ad9ad08bd94c81b48e46293bd51a51e4b">minSuccessThreshold</a> = par(<span class="stringliteral">&quot;minSuccessThreshold&quot;</span>);
    <a class="code" href="class_ieee80211_mac.html#a67ce877806468a78b227697716eb8c01">minTimerTimeout</a> = par(<span class="stringliteral">&quot;minTimerTimeout&quot;</span>);
    <a class="code" href="class_ieee80211_mac.html#a0f990a962356bd4e76e0059212d9c034">timerTimeout</a> = par(<span class="stringliteral">&quot;timerTimeout&quot;</span>);
    <a class="code" href="class_ieee80211_mac.html#a5094bc880757a003fe136551735737b4">successThreshold</a> = par(<span class="stringliteral">&quot;successThreshold&quot;</span>);
    <a class="code" href="class_ieee80211_mac.html#a673b1d429eb5b3317f6b21a8163e3376">autoBitrate</a> = par(<span class="stringliteral">&quot;autoBitrate&quot;</span>);
    <span class="keywordflow">switch</span> (<a class="code" href="class_ieee80211_mac.html#a673b1d429eb5b3317f6b21a8163e3376">autoBitrate</a>)
    {
    <span class="keywordflow">case</span> 0:
        <a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> = <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a6448ede81a7e8e5498de339ffe201855">RATE_CR</a>;
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot;MAC Transmission algorithm : Constant Rate&quot;</span>  &lt;&lt;endl;
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 1:
        <a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> = <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a257f4986d42d532538d364ebff6faee5">RATE_ARF</a>;
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot;MAC Transmission algorithm : ARF Rate&quot;</span>  &lt;&lt;endl;
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 2:
        <a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> = <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603aa6fe59b12fc803c86072c66573d609db">RATE_AARF</a>;
        <a class="code" href="class_ieee80211_mac.html#af5fa0eb384fc17a3a8450061aa4f11df">successCoeff</a> = par(<span class="stringliteral">&quot;successCoeff&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#a0e4312ce17d8f8bc193863061e3d55f4">timerCoeff</a> = par(<span class="stringliteral">&quot;timerCoeff&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#ab8e98f3dc11067d8ae8a7b8f7aa42811">maxSuccessThreshold</a> = par(<span class="stringliteral">&quot;maxSuccessThreshold&quot;</span>);
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot;MAC Transmission algorithm : AARF Rate&quot;</span>  &lt;&lt;endl;
        <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
        <a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> = <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a6448ede81a7e8e5498de339ffe201855">RATE_CR</a>;
        <span class="keywordflow">break</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8a81c5b96c8f83712049eabf4a4c1a0c"></a><!-- doxytag: member="Ieee80211Mac::cwMax" ref="a8a81c5b96c8f83712049eabf4a4c1a0c" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int &amp; <a class="el" href="class_ieee80211_mac.html#a8a81c5b96c8f83712049eabf4a4c1a0c">Ieee80211Mac::cwMax</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ab34517c360aa546041515d97c354dd43">computeBackoffPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].cwMax;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afd3049b4415fb2e0e0aa69ee8a4735fc"></a><!-- doxytag: member="Ieee80211Mac::cwMin" ref="afd3049b4415fb2e0e0aa69ee8a4735fc" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int &amp; <a class="el" href="class_ieee80211_mac.html#afd3049b4415fb2e0e0aa69ee8a4735fc">Ieee80211Mac::cwMin</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ab34517c360aa546041515d97c354dd43">computeBackoffPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].cwMin;
}
</pre></div>
</div>
</div>
<a class="anchor" id="accd0c207251e64841e545a538a0d5e13"></a><!-- doxytag: member="Ieee80211Mac::decreaseBackoffPeriod" ref="accd0c207251e64841e545a538a0d5e13" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">Ieee80211Mac::decreaseBackoffPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// see spec 9.9.1.5</span>
    <span class="comment">// decrase for every EDCAF</span>
    <span class="comment">// cancel event endBackoff after decrease or we don&#39;t know which endBackoff is scheduled</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(i) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>(i)-&gt;isScheduled())
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt; <span class="stringliteral">&quot;old backoff[&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;] is &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>(i) &lt;&lt; <span class="stringliteral">&quot;, sim time is &quot;</span> &lt;&lt; simTime()
            &lt;&lt; <span class="stringliteral">&quot;, endbackoff sending period is &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>(i)-&gt;getSendingTime() &lt;&lt; endl;
            simtime_t elapsedBackoffTime = simTime() - <a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>(i)-&gt;getSendingTime();
            <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>(i) -= ((int)(elapsedBackoffTime / <a class="code" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a>())) * <a class="code" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a>();
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;actual backoff[&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;] is &quot;</span> &lt;&lt;<a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>(i) &lt;&lt; <span class="stringliteral">&quot;, elapsed is &quot;</span> &lt;&lt; elapsedBackoffTime &lt;&lt; endl;
            ASSERT(<a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>(i) &gt;= 0);
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;backoff[&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;] period decreased to &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>(i) &lt;&lt; endl;
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2733eca762ab757481001674d2a66f66"></a><!-- doxytag: member="Ieee80211Mac::endAIFS" ref="a2733eca762ab757481001674d2a66f66" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage * <a class="el" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">Ieee80211Mac::endAIFS</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#ad5f07fdbe9b2e50329534eceb5772f52">isMsgAIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>, <a class="el" href="class_ieee80211_mac.html#ae4d9c2fb6e3b93a0922f0f6d502478ea">rescheduleAIFSPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a2e885fc167155dfd1e9ecbf2d0058807">scheduleAIFSPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].endAIFS;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9316b09407f53cb315b9c3560295cc2a"></a><!-- doxytag: member="Ieee80211Mac::endBackoff" ref="a9316b09407f53cb315b9c3560295cc2a" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage * <a class="el" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">Ieee80211Mac::endBackoff</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a80a6ffa55936b6ee00a09c45cf82aaf0">cancelBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#a4496ce674d2048d8deb18b277c7d7b25">isBakoffMsg()</a>, <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>, <a class="el" href="class_ieee80211_mac.html#a4ea47166959fb7622be67011d131d8f5">scheduleBackoffPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].endBackoff;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9820b65e4aa7296332430bb5a35bf68f"></a><!-- doxytag: member="Ieee80211Mac::finish" ref="a9820b65e4aa7296332430bb5a35bf68f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a9820b65e4aa7296332430bb5a35bf68f">Ieee80211Mac::finish</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    recordScalar(<span class="stringliteral">&quot;number of received packets&quot;</span>, <a class="code" href="class_ieee80211_mac.html#a44149d10cf8b6f6b1f906d68d2157714">numReceived</a>);
    recordScalar(<span class="stringliteral">&quot;number of collisions&quot;</span>, <a class="code" href="class_ieee80211_mac.html#a7cde61a60a0ba921bec433b5d1113c84">numCollision</a>);
    recordScalar(<span class="stringliteral">&quot;number of internal collisions&quot;</span>, <a class="code" href="class_ieee80211_mac.html#aaf2d7e0cd701202eb765b1b9c77bb658">numInternalCollision</a>);
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
    {
        std::stringstream os;
        os&lt;&lt; i;
        std::string th = <span class="stringliteral">&quot;number of retry for AC &quot;</span>+os.str();
        recordScalar(th.c_str(), <a class="code" href="class_ieee80211_mac.html#a92d78e95b726f22b3ce726be0e6807fd">numRetry</a>(i));
    }
    recordScalar(<span class="stringliteral">&quot;sent and receive bites&quot;</span>, <a class="code" href="class_ieee80211_mac.html#ac16d02e12179c33220ba6483b1ab724b">numBites</a>);
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
    {
        std::stringstream os;
        os&lt;&lt; i;
        std::string th = <span class="stringliteral">&quot;sent packet within AC &quot;</span>+os.str();
        recordScalar(th.c_str(), <a class="code" href="class_ieee80211_mac.html#a33ead2b36b8c62088f7106b154af22af">numSent</a>(i));
    }
    recordScalar(<span class="stringliteral">&quot;sent in TXOP &quot;</span>, <a class="code" href="class_ieee80211_mac.html#ac4bf79c580118820bdecd1a001711049">numSentTXOP</a> );
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
    {
        std::stringstream os;
        os&lt;&lt; i;
        std::string th = <span class="stringliteral">&quot;sentWithoutRetry AC &quot;</span>+os.str();
        recordScalar(th.c_str(), <a class="code" href="class_ieee80211_mac.html#a4b6a1ca005a57bfd5447c9a853d0247d">numSentWithoutRetry</a>(i));
    }
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
    {
        std::stringstream os;
        os&lt;&lt; i;
        std::string th = <span class="stringliteral">&quot;numGivenUp AC &quot;</span>+os.str();
        recordScalar(th.c_str(), <a class="code" href="class_ieee80211_mac.html#a94fdb1fcc53581be97d70feee63a3ab6">numGivenUp</a>(i));
    }
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
    {
        std::stringstream os;
        os&lt;&lt; i;
        std::string th = <span class="stringliteral">&quot;numDropped AC &quot;</span>+os.str();
        recordScalar(th.c_str(), <a class="code" href="class_ieee80211_mac.html#a97764bfd499bb2f781c55edffd0359b2">numDropped</a>(i));
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae7e7f22c4c76ac7be8ffff853cbf7503"></a><!-- doxytag: member="Ieee80211Mac::finishCurrentTransmission" ref="ae7e7f22c4c76ac7be8ffff853cbf7503" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#ae7e7f22c4c76ac7be8ffff853cbf7503">Ieee80211Mac::finishCurrentTransmission</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_mac.html#af9ffa2b13e0336e9cc15334dea0122da" title="Deletes frame at the front of queue.">popTransmissionQueue</a>();
    <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa5cefe02fc6379d5aefb5c54d8d3422c"></a><!-- doxytag: member="Ieee80211Mac::finishReception" ref="aa5cefe02fc6379d5aefb5c54d8d3422c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#aa5cefe02fc6379d5aefb5c54d8d3422c">Ieee80211Mac::finishReception</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>())
    {
        <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>() = <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="adb7349369b15dc3f966da2b8a7b8d0d0"></a><!-- doxytag: member="Ieee80211Mac::generateBackoffPeriod" ref="adb7349369b15dc3f966da2b8a7b8d0d0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">Ieee80211Mac::generateBackoffPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, and <a class="el" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>() = <a class="code" href="class_ieee80211_mac.html#ab34517c360aa546041515d97c354dd43">computeBackoffPeriod</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>(), <a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>());
    ASSERT(<a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>() &gt;= 0);
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;backoff period set to &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>()&lt;&lt; endl;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abdd0b24ce9cb75d2f0fb1fa390a1bd97"></a><!-- doxytag: member="Ieee80211Mac::getAIFS" ref="abdd0b24ce9cb75d2f0fb1fa390a1bd97" args="(int AccessCategory)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#abdd0b24ce9cb75d2f0fb1fa390a1bd97">Ieee80211Mac::getAIFS</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>AccessCategory</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#ae4d9c2fb6e3b93a0922f0f6d502478ea">rescheduleAIFSPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a2e885fc167155dfd1e9ecbf2d0058807">scheduleAIFSPeriod()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a9ac06ffa3e8b858168973ffc75cadf29">AIFSN</a>(AccessCategory) * <a class="code" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a>() + <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="adade11623fcc50f3348555cace3c9490"></a><!-- doxytag: member="Ieee80211Mac::getBitrate" ref="adade11623fcc50f3348555cace3c9490" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#adade11623fcc50f3348555cace3c9490">Ieee80211Mac::getBitrate</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">buildDataFrame()</a>, <a class="el" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">scheduleDataTimeoutPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a8bcfae864475a658f025bdf618588ec9">setBitrateFrame()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ade19198da5d240de1ea31321fef496c0"></a><!-- doxytag: member="Ieee80211Mac::getControlAnswerMode" ref="ade19198da5d240de1ea31321fef496c0" args="(ModulationType reqMode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_modulation_type.html">ModulationType</a> <a class="el" href="class_ieee80211_mac.html#ade19198da5d240de1ea31321fef496c0">Ieee80211Mac::getControlAnswerMode</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_modulation_type.html">ModulationType</a>&#160;</td>
          <td class="paramname"><em>reqMode</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The standard has relatively unambiguous rules for selecting a control response rate (the below is quoted from IEEE 802.11-2007, Section 9.6):</p>
<p>To allow the transmitting STA to calculate the contents of the Duration/ID field, a STA responding to a received frame shall transmit its Control Response frame (either CTS or ACK), other than the BlockAck control frame, at the highest rate in the BSSBasicRateSet parameter that is less than or equal to the rate of the immediately previous frame in the frame exchange sequence (as defined in 9.12) and that is of the same modulation class (see 9.6.1) as the received frame...</p>
<p>If no suitable basic rate was found, we search the mandatory rates. The standard (IEEE 802.11-2007, Section 9.6) says:</p>
<p>...If no rate contained in the BSSBasicRateSet parameter meets these conditions, then the control frame sent in response to a received frame shall be transmitted at the highest mandatory rate of the PHY that is less than or equal to the rate of the received frame, and that is of the same modulation class as the received frame. In addition, the Control Response frame shall be sent using the same PHY options as the received frame, unless they conflict with the requirement to use the BSSBasicRateSet parameter.</p>
<p>TODO: Note that we're ignoring the last sentence for now, because there is not yet any manipulation here of PHY options.</p>
<p>If we still haven't found a suitable rate for the response then someone has messed up the simulation config. This probably means that the WifiPhyStandard is not set correctly, or that a rate that is not supported by the PHY has been explicitly requested in a WifiRemoteStationManager (or descendant) configuration.</p>
<p>Either way, it is serious - we can either disobey the standard or fail, and I have chosen to do the latter...</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;
    <a class="code" href="class_modulation_type.html" title="represent a single transmission mode">ModulationType</a> <a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a>;
    <span class="keywordflow">for</span> (uint32_t idx = 0; idx &lt; (uint32_t)<a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>(); idx++)
    {
        <a class="code" href="class_modulation_type.html" title="represent a single transmission mode">ModulationType</a> thismode;
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;b&#39;</span>)
            thismode = <a class="code" href="class_wifi_modulation_type.html#aa15d36cf39a2b2a6206ed7fc8a4bd4b6">WifiModulationType::getMode80211b</a>(<a class="code" href="_ieee80211_data_rate_8h.html#a86d54860dd816f6b0e8a20bc4ba4dd07" title="Bit rates for 802.11b.">BITRATES_80211b</a>[idx]);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;g&#39;</span>)
            thismode = <a class="code" href="class_wifi_modulation_type.html#a858c98cd637c56ab55fe1cddba298f7c">WifiModulationType::getMode80211g</a>(<a class="code" href="_ieee80211_data_rate_8h.html#a1edaa1e64ed54f3ab94446d9fdf3970c" title="Bit rates for 802.11g.">BITRATES_80211g</a>[idx]);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>)
            thismode = <a class="code" href="class_wifi_modulation_type.html#afd79b3878ac41e168e9d9a78a56a633d">WifiModulationType::getMode80211a</a>(<a class="code" href="_ieee80211_data_rate_8h.html#aff43b2fc7e875884c766efefce80dc74" title="Bit rates for 802.11a.">BITRATES_80211a</a>[idx]);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>)
            thismode = <a class="code" href="class_wifi_modulation_type.html#a5eefbb523ffdccff54ec23e46e50dac3">WifiModulationType::getMode80211p</a>(<a class="code" href="_ieee80211_data_rate_8h.html#ae2903ef1cee37083b2672ead3830e093" title="Bit rates for 802.11g.">BITRATES_80211p</a>[idx]);

      <span class="comment">/* If the rate:</span>
<span class="comment">       *</span>
<span class="comment">       *  - is a mandatory rate for the PHY, and</span>
<span class="comment">       *  - is equal to or faster than our current best choice, and</span>
<span class="comment">       *  - is less than or equal to the rate of the received frame, and</span>
<span class="comment">       *  - is of the same modulation class as the received frame</span>
<span class="comment">       *</span>
<span class="comment">       * ...then it&#39;s our best choice so far.</span>
<span class="comment">       */</span>
      <span class="keywordflow">if</span> (thismode.<a class="code" href="class_modulation_type.html#a7d85ecf80c9a957ae7b1e2ff4294312b">getIsMandatory</a>()
          &amp;&amp; (!found || thismode.<a class="code" href="class_modulation_type.html#a88c33ef08ffb3f3f57d11c983e4274a2">getPhyRate</a>() &gt; mode.<a class="code" href="class_modulation_type.html#a88c33ef08ffb3f3f57d11c983e4274a2">getPhyRate</a>())
          &amp;&amp; thismode.<a class="code" href="class_modulation_type.html#a88c33ef08ffb3f3f57d11c983e4274a2">getPhyRate</a>() &lt;= reqMode.<a class="code" href="class_modulation_type.html#a88c33ef08ffb3f3f57d11c983e4274a2">getPhyRate</a>()
          &amp;&amp; thismode.<a class="code" href="class_modulation_type.html#af7e0e64b4e7dabe9db6301c25cd79719">getModulationClass</a>() == reqMode.<a class="code" href="class_modulation_type.html#af7e0e64b4e7dabe9db6301c25cd79719">getModulationClass</a>())
        {
          mode = thismode;
          <span class="comment">// As above; we&#39;ve found a potentially-suitable transmit</span>
          <span class="comment">// rate, but we need to continue and consider all the</span>
          <span class="comment">// mandatory rates before we can be sure we&#39;ve got the right</span>
          <span class="comment">// one.</span>
          found = <span class="keyword">true</span>;
        }
    }

  <span class="keywordflow">if</span> (!found)
    {
      opp_error(<span class="stringliteral">&quot;Can&#39;t find response rate for reqMode. Check standard and selected rates match.&quot;</span>);
    }

  <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a85bc4ee88b4123a9b38d42cbf6af8e43"></a><!-- doxytag: member="Ieee80211Mac::getCurrentTransmission" ref="a85bc4ee88b4123a9b38d42cbf6af8e43" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> * <a class="el" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43">Ieee80211Mac::getCurrentTransmission</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the current frame being transmitted. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa5cefe02fc6379d5aefb5c54d8d3422c">finishReception()</a>, <a class="el" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">generateBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>, <a class="el" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120">resetStateVariables()</a>, and <a class="el" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;empty() ? <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : (<a class="code" href="class_ieee80211_data_or_mgmt_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataOrMgmtFrame</a> *)<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;front();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1399e980db26dc205361307d55a63139"></a><!-- doxytag: member="Ieee80211Mac::getDIFS" ref="a1399e980db26dc205361307d55a63139" args="(int category=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">Ieee80211Mac::getDIFS</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>category</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a87bec8aaae96a4fe5d70816d48477183">getEIFS()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#a2e885fc167155dfd1e9ecbf2d0058807">scheduleAIFSPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a84bd3147b655f8396f37926fe34a17ad">scheduleDIFSPeriod()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (category&lt;0 || category&gt;(<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1))
    {
        <span class="keywordtype">int</span> index = <a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1;
        <span class="keywordflow">if</span> (index&lt;0)
            index = 0;
        <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + ((double)<a class="code" href="class_ieee80211_mac.html#a9ac06ffa3e8b858168973ffc75cadf29">AIFSN</a>(index) * <a class="code" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a>());
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + ((double)<a class="code" href="class_ieee80211_mac.html#a9ac06ffa3e8b858168973ffc75cadf29">AIFSN</a>(category)) * <a class="code" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a>();
    }

}
</pre></div>
</div>
</div>
<a class="anchor" id="a87bec8aaae96a4fe5d70816d48477183"></a><!-- doxytag: member="Ieee80211Mac::getEIFS" ref="a87bec8aaae96a4fe5d70816d48477183" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#a87bec8aaae96a4fe5d70816d48477183">Ieee80211Mac::getEIFS</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a2e885fc167155dfd1e9ecbf2d0058807">scheduleAIFSPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a84bd3147b655f8396f37926fe34a17ad">scheduleDIFSPeriod()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// FIXME:   return getSIFS() + getDIFS() + (8 * ACKSize + aPreambleLength + aPLCPHeaderLength) / lowestDatarate;</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a044b5bdca2b078f72cb44541a0524fcc">PHY_HEADER_LENGTH</a>&lt;0)
    {
        <span class="keywordflow">if</span> ((<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;b&#39;</span>) || (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;g&#39;</span>))
            <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS</a>() + (8 * <a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>) / 1E+6 + <a class="code" href="class_ieee80211_mac.html#a95a64f0d0e6a5f300868187772051272">getHeaderTime</a>(1E+6);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>)
            <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS</a>() + (8 * <a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>) / 6E+6 + <a class="code" href="class_ieee80211_mac.html#a95a64f0d0e6a5f300868187772051272">getHeaderTime</a>(6E+6);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;p&#39;</span>)
             <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS</a>() + (8 * <a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>) / 6E+6 + <a class="code" href="class_ieee80211_mac.html#a95a64f0d0e6a5f300868187772051272">getHeaderTime</a>(3E+6);
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// FIXME: check how PHY_HEADER_LENGTH is handled. Is that given in bytes or secs ???</span>
        <span class="comment">// what is the rela unit? The use seems to be incosistent betwen b and g modes.</span>
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;b&#39;</span>)
            <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS</a>() + (8 * <a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a> + <a class="code" href="class_ieee80211_mac.html#a044b5bdca2b078f72cb44541a0524fcc">PHY_HEADER_LENGTH</a>) / 1E+6;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;g&#39;</span>)
            <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS</a>() + (8 * <a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>) / 1E+6 + <a class="code" href="class_ieee80211_mac.html#a044b5bdca2b078f72cb44541a0524fcc">PHY_HEADER_LENGTH</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>)
            <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS</a>() + (8 * <a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>) / 6E+6 + <a class="code" href="class_ieee80211_mac.html#a044b5bdca2b078f72cb44541a0524fcc">PHY_HEADER_LENGTH</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;p&#39;</span>)
            <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS</a>() + (8 * <a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>) / 3E+6 + <a class="code" href="class_ieee80211_mac.html#a044b5bdca2b078f72cb44541a0524fcc">PHY_HEADER_LENGTH</a>;
    }
    <span class="comment">// if arrive here there is an error</span>
    opp_error(<span class="stringliteral">&quot;mode not supported&quot;</span>);
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3ae0423bce927f7db18f55a88e44e20a"></a><!-- doxytag: member="Ieee80211Mac::getFrameReceivedBeforeSIFS" ref="a3ae0423bce927f7db18f55a88e44e20a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> * <a class="el" href="class_ieee80211_mac.html#a3ae0423bce927f7db18f55a88e44e20a">Ieee80211Mac::getFrameReceivedBeforeSIFS</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the last frame received before the SIFS period. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> (<a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *)<a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a>-&gt;getContextPointer();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a95a64f0d0e6a5f300868187772051272"></a><!-- doxytag: member="Ieee80211Mac::getHeaderTime" ref="a95a64f0d0e6a5f300868187772051272" args="(double bitrate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#a95a64f0d0e6a5f300868187772051272">Ieee80211Mac::getHeaderTime</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>bitrate</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a87bec8aaae96a4fe5d70816d48477183">getEIFS()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_modulation_type.html" title="represent a single transmission mode">ModulationType</a> modType;
    <span class="keywordflow">if</span> ((<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;b&#39;</span>) || (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;g&#39;</span>))
        modType = <a class="code" href="class_wifi_modulation_type.html#a858c98cd637c56ab55fe1cddba298f7c">WifiModulationType::getMode80211g</a>(<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>);
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>)
        modType = <a class="code" href="class_wifi_modulation_type.html#afd79b3878ac41e168e9d9a78a56a633d">WifiModulationType::getMode80211a</a>(<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>);
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;p&#39;</span>)
        modType = <a class="code" href="class_wifi_modulation_type.html#a5eefbb523ffdccff54ec23e46e50dac3">WifiModulationType::getMode80211p</a>(<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>);
    <span class="keywordflow">else</span>
        opp_error(<span class="stringliteral">&quot;mode not supported&quot;</span>);
    <span class="keywordflow">return</span> <a class="code" href="class_wifi_modulation_type.html#ab8069e8449153fa28225b033f34aaed6">WifiModulationType::getPreambleAndHeader</a>(modType, <a class="code" href="class_ieee80211_mac.html#af5e0fd9af05f5494d1cce2821fb30d61">wifiPreambleType</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0397424fc4167432b39352caafd8ce82"></a><!-- doxytag: member="Ieee80211Mac::getMaxBitrate" ref="a0397424fc4167432b39352caafd8ce82" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">Ieee80211Mac::getMaxBitrate</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ade19198da5d240de1ea31321fef496c0">getControlAnswerMode()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">reportDataOk()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;b&#39;</span>)
        <span class="keywordflow">return</span> (<a class="code" href="_ieee80211_data_rate_8h.html#a2932ba212f936ef16c2866c2db9a1684">NUM_BITERATES_80211b</a>);
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;g&#39;</span>)
        <span class="keywordflow">return</span> (<a class="code" href="_ieee80211_data_rate_8h.html#a8eda6eb599f572e51f23ff1eaf071e94">NUM_BITERATES_80211g</a>);
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>)
        <span class="keywordflow">return</span> (<a class="code" href="_ieee80211_data_rate_8h.html#a1db6fec37e252925b37a96e875d44606">NUM_BITERATES_80211a</a>);
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;p&#39;</span>)
        <span class="keywordflow">return</span> (<a class="code" href="_ieee80211_data_rate_8h.html#a368afa91224d46a1a69f8fa713e55fb8">NUM_BITERATES_80211p</a>);
<span class="comment">//</span>
<span class="comment">// If arrives here there is an error</span>
    opp_error(<span class="stringliteral">&quot;Mode not supported&quot;</span>);
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad2037040db4c8e92618e6ea48165fc9c"></a><!-- doxytag: member="Ieee80211Mac::getMinBitrate" ref="ad2037040db4c8e92618e6ea48165fc9c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#ad2037040db4c8e92618e6ea48165fc9c">Ieee80211Mac::getMinBitrate</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7c39a34aafb4b133e176c1fe37c379ad"></a><!-- doxytag: member="Ieee80211Mac::getMinSuccessThreshold" ref="a7c39a34aafb4b133e176c1fe37c379ad" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a7c39a34aafb4b133e176c1fe37c379ad">Ieee80211Mac::getMinSuccessThreshold</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa9441edca636fd2bc5c2194a4f3ed2d7">reportFailure()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#ad9ad08bd94c81b48e46293bd51a51e4b">minSuccessThreshold</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acf1bcb5d51fb31021b076e42525d4a83"></a><!-- doxytag: member="Ieee80211Mac::getMinTimerTimeout" ref="acf1bcb5d51fb31021b076e42525d4a83" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#acf1bcb5d51fb31021b076e42525d4a83">Ieee80211Mac::getMinTimerTimeout</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa9441edca636fd2bc5c2194a4f3ed2d7">reportFailure()</a>, and <a class="el" href="class_ieee80211_mac.html#a6b11301b46f8e34c5c9aecd8c3645ec3">reportRecoveryFailure()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a67ce877806468a78b227697716eb8c01">minTimerTimeout</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8aee694a3627cb27994c0b29bc4c0d1f"></a><!-- doxytag: member="Ieee80211Mac::getPIFS" ref="a8aee694a3627cb27994c0b29bc4c0d1f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#a8aee694a3627cb27994c0b29bc4c0d1f">Ieee80211Mac::getPIFS</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad207f6ec6848d6f2b8aa95d21a8c0897"></a><!-- doxytag: member="Ieee80211Mac::getRadioModuleId" ref="ad207f6ec6848d6f2b8aa95d21a8c0897" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#ad207f6ec6848d6f2b8aa95d21a8c0897">Ieee80211Mac::getRadioModuleId</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a6844cdfc80c0c0f6b2faadff8a9abef9">receiveChangeNotification()</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a70d16f3fdb285db5b2ae29300f9497c3">radioModule</a>;}
</pre></div>
</div>
</div>
<a class="anchor" id="a502179f9e3503763304b8f3fd4ba32fa"></a><!-- doxytag: member="Ieee80211Mac::getSIFS" ref="a502179f9e3503763304b8f3fd4ba32fa" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">Ieee80211Mac::getSIFS</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a7eab1962fd94c95151d62e3fb71253e0">buildACKFrame()</a>, <a class="el" href="class_ieee80211_mac.html#aaea047b56dcec7dc99d9681138c1f719">buildCTSFrame()</a>, <a class="el" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">buildDataFrame()</a>, <a class="el" href="class_ieee80211_mac.html#aec5d4575e8b8f4339815208c394f86cc">buildRTSFrame()</a>, <a class="el" href="class_ieee80211_mac.html#abdd0b24ce9cb75d2f0fb1fa390a1bd97">getAIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a87bec8aaae96a4fe5d70816d48477183">getEIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a8aee694a3627cb27994c0b29bc4c0d1f">getPIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a916864ac7a266c8fdf466a185c3a68dc">scheduleCTSTimeoutPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">scheduleDataTimeoutPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a325e59dc74a3ad59596933aaf96012a7">scheduleSIFSPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// TODO:   return aRxRFDelay() + aRxPLCPDelay() + aMACProcessingDelay() + aRxTxTurnaroundTime();</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a8e05d7cf7a718c1e255e13f2ee6c132a">useModulationParameters</a>)
    {
        <a class="code" href="class_modulation_type.html" title="represent a single transmission mode">ModulationType</a> modType;
        <span class="keywordflow">if</span> ((<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;b&#39;</span>) || (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;g&#39;</span>))
            modType = <a class="code" href="class_wifi_modulation_type.html#a858c98cd637c56ab55fe1cddba298f7c">WifiModulationType::getMode80211g</a>(<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>)
            modType = <a class="code" href="class_wifi_modulation_type.html#afd79b3878ac41e168e9d9a78a56a633d">WifiModulationType::getMode80211a</a>(<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;p&#39;</span>)
            modType = <a class="code" href="class_wifi_modulation_type.html#a5eefbb523ffdccff54ec23e46e50dac3">WifiModulationType::getMode80211p</a>(<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>);
        <span class="keywordflow">else</span>
            opp_error(<span class="stringliteral">&quot;mode not supported&quot;</span>);
        <span class="keywordflow">return</span> <a class="code" href="class_wifi_modulation_type.html#a60fafa8988961e8491eed8b56613b821">WifiModulationType::getSifsTime</a>(modType,<a class="code" href="class_ieee80211_mac.html#af5e0fd9af05f5494d1cce2821fb30d61">wifiPreambleType</a>);
    }

    <span class="keywordflow">return</span> <a class="code" href="_ieee80211_consts_8h.html#a302795c4c8b76861bfc0ca2ec2c7d171">SIFS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ace75d97f719d23cab2bf582ab26d083e"></a><!-- doxytag: member="Ieee80211Mac::getSlotTime" ref="ace75d97f719d23cab2bf582ab26d083e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">Ieee80211Mac::getSlotTime</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ab34517c360aa546041515d97c354dd43">computeBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#abdd0b24ce9cb75d2f0fb1fa390a1bd97">getAIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS()</a>, and <a class="el" href="class_ieee80211_mac.html#a8aee694a3627cb27994c0b29bc4c0d1f">getPIFS()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// TODO:   return aCCATime() + aRxTxTurnaroundTime + aAirPropagationTime() + aMACProcessingDelay();</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a8e05d7cf7a718c1e255e13f2ee6c132a">useModulationParameters</a>)
    {
        <a class="code" href="class_modulation_type.html" title="represent a single transmission mode">ModulationType</a> modType;
        <span class="keywordflow">if</span> ((<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;b&#39;</span>) || (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;g&#39;</span>))
            modType = <a class="code" href="class_wifi_modulation_type.html#a858c98cd637c56ab55fe1cddba298f7c">WifiModulationType::getMode80211g</a>(<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>)
            modType = <a class="code" href="class_wifi_modulation_type.html#afd79b3878ac41e168e9d9a78a56a633d">WifiModulationType::getMode80211a</a>(<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;p&#39;</span>)
            modType = <a class="code" href="class_wifi_modulation_type.html#a5eefbb523ffdccff54ec23e46e50dac3">WifiModulationType::getMode80211p</a>(<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>);
        <span class="keywordflow">else</span>
            opp_error(<span class="stringliteral">&quot;mode not supported&quot;</span>);
        <span class="keywordflow">return</span> <a class="code" href="class_wifi_modulation_type.html#ad7274ccbb00205f6db21ad6eb6710bab">WifiModulationType::getSlotDuration</a>(modType,<a class="code" href="class_ieee80211_mac.html#af5e0fd9af05f5494d1cce2821fb30d61">wifiPreambleType</a>);
    }
    <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#af0b94b02412119954ca9e58f497503d1" title="Slot time 9us(fast slot time 802.11g only) 20us(802.11b / 802.11g backward compatible)">ST</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a81af710061696a71d03a0134038c1889"></a><!-- doxytag: member="Ieee80211Mac::getSuccessThreshold" ref="a81af710061696a71d03a0134038c1889" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a81af710061696a71d03a0134038c1889">Ieee80211Mac::getSuccessThreshold</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">reportDataOk()</a>, and <a class="el" href="class_ieee80211_mac.html#a6b11301b46f8e34c5c9aecd8c3645ec3">reportRecoveryFailure()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a5094bc880757a003fe136551735737b4">successThreshold</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a90f7826b4f53c79d6a22833b322d29f5"></a><!-- doxytag: member="Ieee80211Mac::getTimeout" ref="a90f7826b4f53c79d6a22833b322d29f5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a90f7826b4f53c79d6a22833b322d29f5">Ieee80211Mac::getTimeout</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Produce a readable name of the given MAC operation mode. </p>

</div>
</div>
<a class="anchor" id="ac522b02d2b52a53ea3e473e603ec3f9e"></a><!-- doxytag: member="Ieee80211Mac::getTimerTimeout" ref="ac522b02d2b52a53ea3e473e603ec3f9e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#ac522b02d2b52a53ea3e473e603ec3f9e">Ieee80211Mac::getTimerTimeout</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">reportDataOk()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a0f990a962356bd4e76e0059212d9c034">timerTimeout</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a793227beb883e6f0f0b5c993aa6b7f56"></a><!-- doxytag: member="Ieee80211Mac::giveUpCurrentTransmission" ref="a793227beb883e6f0f0b5c993aa6b7f56" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a793227beb883e6f0f0b5c993aa6b7f56">Ieee80211Mac::giveUpCurrentTransmission</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_data_or_mgmt_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataOrMgmtFrame</a> *temp = (<a class="code" href="class_ieee80211_data_or_mgmt_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataOrMgmtFrame</a>*) <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;front();
    <a class="code" href="structnb.html">nb</a>-&gt;fireChangeNotification(<a class="code" href="_notifier_consts_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a2e27f6fee5f713af7b2f15c39ff9d079">NF_LINK_BREAK</a>, temp);
    <a class="code" href="class_ieee80211_mac.html#af9ffa2b13e0336e9cc15334dea0122da" title="Deletes frame at the front of queue.">popTransmissionQueue</a>();
    <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
    <a class="code" href="class_ieee80211_mac.html#a94fdb1fcc53581be97d70feee63a3ab6">numGivenUp</a>()++;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aedaaf3e337f2d4a0790dbe392ac9f481"></a><!-- doxytag: member="Ieee80211Mac::handleCommand" ref="aedaaf3e337f2d4a0790dbe392ac9f481" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#aedaaf3e337f2d4a0790dbe392ac9f481">Ieee80211Mac::handleCommand</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle commands (msg kind+control info) coming from upper layers. </p>

<p>Implements <a class="el" href="class_wireless_mac_base.html#a2a5fd20a6064b4754954638bc93f8d8d">WirelessMacBase</a>.</p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a3c78df80f39331fe0c35a19b2a991714">handleUpperMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (msg-&gt;getKind()==<a class="code" href="_phy_control_info__m_8h.html#a827a8f9f0f91bb52136f8f155337862fa5eb8d08b5c380e0589a4622fa0ca5ee9">PHY_C_CONFIGURERADIO</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Passing on command &quot;</span> &lt;&lt; msg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; to physical layer\n&quot;</span>;
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e" title="The last change channel message received and not yet sent to the physical layer, or NULL...">pendingRadioConfigMsg</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        {
            <span class="comment">// merge contents of the old command into the new one, then delete it</span>
            <a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a> *pOld = check_and_cast&lt;<a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a> *&gt;(<a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e" title="The last change channel message received and not yet sent to the physical layer, or NULL...">pendingRadioConfigMsg</a>-&gt;getControlInfo());
            <a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a> *pNew = check_and_cast&lt;<a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a> *&gt;(msg-&gt;getControlInfo());
            <span class="keywordflow">if</span> (pNew-&gt;getChannelNumber()==-1 &amp;&amp; pOld-&gt;<a class="code" href="class_phy_control_info.html#adf34f991f466b2ed39bcc3d484612167">getChannelNumber</a>()!=-1)
                pNew-&gt;<a class="code" href="class_phy_control_info.html#ac48b56ae148324b8eb0fd3c1f566f2f1">setChannelNumber</a>(pOld-&gt;<a class="code" href="class_phy_control_info.html#adf34f991f466b2ed39bcc3d484612167">getChannelNumber</a>());
            <span class="keywordflow">if</span> (pNew-&gt;getBitrate()==-1 &amp;&amp; pOld-&gt;<a class="code" href="class_phy_control_info.html#a75467afe8d5de4d4aa72e8f773117736">getBitrate</a>()!=-1)
                pNew-&gt;setBitrate(pOld-&gt;<a class="code" href="class_phy_control_info.html#a75467afe8d5de4d4aa72e8f773117736">getBitrate</a>());
            <span class="keyword">delete</span> <a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e" title="The last change channel message received and not yet sent to the physical layer, or NULL...">pendingRadioConfigMsg</a>;
            <a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e" title="The last change channel message received and not yet sent to the physical layer, or NULL...">pendingRadioConfigMsg</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        }

        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState() == <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a> || <a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState() == <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a> || <a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState() == <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a>)
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Sending it down immediately\n&quot;</span>;
<span class="comment">/*</span>
<span class="comment">// Dynamic power</span>
<span class="comment">            PhyControlInfo *phyControlInfo = dynamic_cast&lt;PhyControlInfo *&gt;(msg-&gt;getControlInfo());</span>
<span class="comment">            if (phyControlInfo)</span>
<span class="comment">                phyControlInfo-&gt;setAdaptiveSensitivity(true);</span>
<span class="comment">// end dynamic power</span>
<span class="comment">*/</span>
            <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(msg);
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Delaying &quot;</span> &lt;&lt; msg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; until next IDLE or DEFER state\n&quot;</span>;
            <a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e" title="The last change channel message received and not yet sent to the physical layer, or NULL...">pendingRadioConfigMsg</a> = msg;
        }
    }
    <span class="keywordflow">else</span>
    {
        error(<span class="stringliteral">&quot;Unrecognized command from mgmt layer: (%s)%s msgkind=%d&quot;</span>, msg-&gt;getClassName(), msg-&gt;getName(), msg-&gt;getKind());
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af163e249ed0577fb5027e3e9cf54d6a5"></a><!-- doxytag: member="Ieee80211Mac::handleLowerMsg" ref="af163e249ed0577fb5027e3e9cf54d6a5" args="(cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">Ieee80211Mac::handleLowerMsg</a> </td>
          <td>(</td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle messages from lower (physical) layer. </p>

<p>Implements <a class="el" href="class_wireless_mac_base.html#ab1db1fa4fd9ecec9d8fa1a38a9a365e1">WirelessMacBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot;-&gt;Enter handleLowerMsg...\n&quot;</span>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;received message from lower layer: &quot;</span> &lt;&lt; msg &lt;&lt; endl;
    <a class="code" href="class_radio80211a_control_info.html" title="Class generated from linklayer/radio/Radio80211aControlInfo.msg by opp_msgc.">Radio80211aControlInfo</a> * cinfo = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_radio80211a_control_info.html" title="Class generated from linklayer/radio/Radio80211aControlInfo.msg by opp_msgc.">Radio80211aControlInfo</a> *<span class="keyword">&gt;</span>(msg-&gt;getControlInfo());
    <span class="keywordflow">if</span> (cinfo &amp;&amp; cinfo-&gt;<a class="code" href="class_radio80211a_control_info.html#a5e85c3b942f24c8d6c1b86401a975da9">getAirtimeMetric</a>())
    {
        <span class="keywordtype">double</span> rtsTime = 0;
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a1bb03a4c3ab2056a1a3d9cab41388613" title="The minimum length of MPDU to use RTS/CTS mechanism.">rtsThreshold</a>*8&lt;cinfo-&gt;<a class="code" href="class_radio80211a_control_info.html#aa756da1591f6d6f7d9e2350190b4fbd5">getTestFrameSize</a>())
             rtsTime=  <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a615c2db16153273956d34e0a7b4a46cf">LENGTH_CTS</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>) +<a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a994032d4c974294f5a24e0e3160d90f4">LENGTH_RTS</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>);
        <span class="keywordtype">double</span> frameDuration = cinfo-&gt;<a class="code" href="class_radio80211a_control_info.html#a16086df1200edb980224e864ffeb2caa">getTestFrameDuration</a>() + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>)+rtsTime;
        cinfo-&gt;<a class="code" href="class_radio80211a_control_info.html#aa97af60f595bd348d815c80cf0dea38e">setTestFrameDuration</a>(frameDuration);
    }
    <a class="code" href="structnb.html">nb</a>-&gt;fireChangeNotification(<a class="code" href="_notifier_consts_8h.html#adf764cbdea00d65edcd07bb9953ad2b7a854eb1c9f689b8337b1075c481640000">NF_LINK_FULL_PROMISCUOUS</a>, msg);
    <a class="code" href="class_ieee80211_mac.html#a254d1148be2a6837f462d2e17d0c8b9b">validRecMode</a> = <span class="keyword">false</span>;
    <span class="keywordflow">if</span> (msg-&gt;getControlInfo() &amp;&amp; <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_radio80211a_control_info.html" title="Class generated from linklayer/radio/Radio80211aControlInfo.msg by opp_msgc.">Radio80211aControlInfo</a> *<span class="keyword">&gt;</span>(msg-&gt;getControlInfo()))
    {
        <a class="code" href="class_radio80211a_control_info.html" title="Class generated from linklayer/radio/Radio80211aControlInfo.msg by opp_msgc.">Radio80211aControlInfo</a> *cinfo = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_radio80211a_control_info.html" title="Class generated from linklayer/radio/Radio80211aControlInfo.msg by opp_msgc.">Radio80211aControlInfo</a> *<span class="keyword">&gt;</span>(msg-&gt;getControlInfo());
        <a class="code" href="class_ieee80211_mac.html#a2197febe20e5c10f185ab3e1c27dfeb6">recFrameModulationType</a> = cinfo-&gt;<a class="code" href="class_radio80211a_control_info.html#a34777262bd606585faa1da024806d021">getModulationType</a>();
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a2197febe20e5c10f185ab3e1c27dfeb6">recFrameModulationType</a>.<a class="code" href="class_modulation_type.html#ad6663947275e1ad366f3a377332e6815">getDataRate</a>()&gt;0)
            <a class="code" href="class_ieee80211_mac.html#a254d1148be2a6837f462d2e17d0c8b9b">validRecMode</a> = <span class="keyword">true</span>;
    }

    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> == <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a6448ede81a7e8e5498de339ffe201855">RATE_CR</a>)
    {
        <span class="keywordflow">if</span> (msg-&gt;getControlInfo())
            <span class="keyword">delete</span> msg-&gt;removeControlInfo();
    }

    <a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *frame = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *<span class="keyword">&gt;</span>(msg);

    <span class="keywordflow">if</span> (msg-&gt;getControlInfo() &amp;&amp; <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_radio80211a_control_info.html" title="Class generated from linklayer/radio/Radio80211aControlInfo.msg by opp_msgc.">Radio80211aControlInfo</a> *<span class="keyword">&gt;</span>(msg-&gt;getControlInfo()))
    {
        <a class="code" href="class_radio80211a_control_info.html" title="Class generated from linklayer/radio/Radio80211aControlInfo.msg by opp_msgc.">Radio80211aControlInfo</a> *cinfo = (<a class="code" href="class_radio80211a_control_info.html" title="Class generated from linklayer/radio/Radio80211aControlInfo.msg by opp_msgc.">Radio80211aControlInfo</a>*) msg-&gt;removeControlInfo();
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a18ed7f494325bfce7e9d8202b17a6396">contJ</a>%10==0)
        {
            <a class="code" href="class_ieee80211_mac.html#aa81f69ceacbbfe39e1a995d6633cf2f1">snr</a> = <a class="code" href="class_ieee80211_mac.html#a1235ac69bf0f8224b85a65727845c530">_snr</a>;
            <a class="code" href="class_ieee80211_mac.html#a18ed7f494325bfce7e9d8202b17a6396">contJ</a> = 0;
            <a class="code" href="class_ieee80211_mac.html#a1235ac69bf0f8224b85a65727845c530">_snr</a> = 0;
        }
        <a class="code" href="class_ieee80211_mac.html#a18ed7f494325bfce7e9d8202b17a6396">contJ</a>++;
        <a class="code" href="class_ieee80211_mac.html#a1235ac69bf0f8224b85a65727845c530">_snr</a> += cinfo-&gt;<a class="code" href="class_radio80211a_control_info.html#a4c48b3424af7fb9bed6bbec710061516">getSnr</a>()/10;
        <a class="code" href="class_ieee80211_mac.html#adf9459416f0559f0a42f455e41658754">lossRate</a> = cinfo-&gt;<a class="code" href="class_radio80211a_control_info.html#a69b5f5ca830e14c35bfddb1078bae5e8">getLossRate</a>();
        <span class="keyword">delete</span> cinfo;
    }

    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#af867e8336a2e4ec59e81f3fa628c877d">contI</a>%<a class="code" href="class_ieee80211_mac.html#a2ba2e2ad7c0755a57964a3ca70d2c1ad">samplingCoeff</a>==0)
    {
        <a class="code" href="class_ieee80211_mac.html#af867e8336a2e4ec59e81f3fa628c877d">contI</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#af754205c721d31e0013694d4900e1106">recvdThroughput</a> = 0;
    }
    <a class="code" href="class_ieee80211_mac.html#af867e8336a2e4ec59e81f3fa628c877d">contI</a>++;

    frame = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *<span class="keyword">&gt;</span>(msg);
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a89c82053702cb058b0ae6bf7f0a835ba">timeStampLastMessageReceived</a> == 0)
        <a class="code" href="class_ieee80211_mac.html#a89c82053702cb058b0ae6bf7f0a835ba">timeStampLastMessageReceived</a> = simTime();
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">if</span> (frame)
            <a class="code" href="class_ieee80211_mac.html#af754205c721d31e0013694d4900e1106">recvdThroughput</a> += ((frame-&gt;getBitLength()/(simTime()-<a class="code" href="class_ieee80211_mac.html#a89c82053702cb058b0ae6bf7f0a835ba">timeStampLastMessageReceived</a>))/1000000)/<a class="code" href="class_ieee80211_mac.html#a2ba2e2ad7c0755a57964a3ca70d2c1ad">samplingCoeff</a>;
        <a class="code" href="class_ieee80211_mac.html#a89c82053702cb058b0ae6bf7f0a835ba">timeStampLastMessageReceived</a> = simTime();
    }
    <span class="keywordflow">if</span> (frame &amp;&amp; <a class="code" href="class_ieee80211_mac.html#af6bf13854ffd2e58b9d536a1e808bbd8">throughputTimer</a>)
        <a class="code" href="class_ieee80211_mac.html#a58859ce182dc8bee111ae1099d42415e">recBytesOverPeriod</a> += frame-&gt;getByteLength();


    <span class="keywordflow">if</span> (!frame)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;message from physical layer (%s)%s is not a subclass of Ieee80211Frame&quot;</span> &lt;&lt; msg-&gt;getClassName() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; msg-&gt;getName() &lt;&lt;  endl;
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">return</span>;
        <span class="comment">// error(&quot;message from physical layer (%s)%s is not a subclass of Ieee80211Frame&quot;,msg-&gt;getClassName(), msg-&gt;getName());</span>
    }

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Self address: &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57" title="MAC address.">address</a>
    &lt;&lt; <span class="stringliteral">&quot;, receiver address: &quot;</span> &lt;&lt; frame-&gt;<a class="code" href="class_ieee80211_frame.html#a342fbce2fe9bff7e0894e8ee1cf8da36">getReceiverAddress</a>()
    &lt;&lt; <span class="stringliteral">&quot;, received frame is for us: &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame)
    &lt;&lt; <span class="stringliteral">&quot;, received frame was sent by us: &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a9c499d1e9e72020fe52e7c39ac4e8759" title="Returns true if message source address is ours.">isSentByUs</a>(frame)&lt;&lt;endl;

    <a class="code" href="class_ieee80211_two_address_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211TwoAddressFrame</a> *twoAddressFrame = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_two_address_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211TwoAddressFrame</a> *<span class="keyword">&gt;</span>(msg);
    ASSERT(!twoAddressFrame || twoAddressFrame-&gt;<a class="code" href="class_ieee80211_two_address_frame.html#a88c59cc71e76df61f0418642f8381ee9">getTransmitterAddress</a>() != <a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57" title="MAC address.">address</a>);

    <a class="code" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2" title="Handle all kinds of messages and notifications with the state machine.">handleWithFSM</a>(msg);

    <span class="comment">// if we are the owner then we did not send this message up</span>
    <span class="keywordflow">if</span> (msg-&gt;getOwner() == <span class="keyword">this</span>)
        <span class="keyword">delete</span> msg;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot;Leave handleLowerMsg...\n&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9c4e21cc98783e53810b622e0c6deda2"></a><!-- doxytag: member="Ieee80211Mac::handleSelfMsg" ref="a9c4e21cc98783e53810b622e0c6deda2" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">Ieee80211Mac::handleSelfMsg</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle timer self messages. </p>

<p>Implements <a class="el" href="class_wireless_mac_base.html#a1c7f3c2581f66d7de17af4a730ae0c4d">WirelessMacBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (msg==<a class="code" href="class_ieee80211_mac.html#af6bf13854ffd2e58b9d536a1e808bbd8">throughputTimer</a>)
    {
        <a class="code" href="class_ieee80211_mac.html#afdd5aa78a078969d42c37cd9ae95bcab">throughputLastPeriod</a> = <a class="code" href="class_ieee80211_mac.html#a58859ce182dc8bee111ae1099d42415e">recBytesOverPeriod</a>/SIMTIME_DBL(<a class="code" href="class_ieee80211_mac.html#a791b0124c72d0dc60dbc078412aab35b">throughputTimePeriod</a>);
        <a class="code" href="class_ieee80211_mac.html#a58859ce182dc8bee111ae1099d42415e">recBytesOverPeriod</a> = 0;
        scheduleAt(simTime()+<a class="code" href="class_ieee80211_mac.html#a791b0124c72d0dc60dbc078412aab35b">throughputTimePeriod</a>, <a class="code" href="class_ieee80211_mac.html#af6bf13854ffd2e58b9d536a1e808bbd8">throughputTimer</a>);
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;received self message: &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;(kind: &quot;</span> &lt;&lt; msg-&gt;getKind() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;

    <span class="keywordflow">if</span> (msg == <a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a" title="End of medium reserve period (NAV) when two other nodes were communicating on the channel...">endReserve</a>)
        <a class="code" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f" title="True during network allocation period.">nav</a> = <span class="keyword">false</span>;

    <span class="keywordflow">if</span> (msg == <a class="code" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34" title="End of the Arbitration Inter-Frame Time period.">endTXOP</a>)
        <a class="code" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff" title="True if we are in txop bursting packets.">txop</a> = <span class="keyword">false</span>;

    <span class="keywordflow">if</span> ( !strcmp(msg-&gt;getName(), <span class="stringliteral">&quot;AIFS&quot;</span>) || !strcmp(msg-&gt;getName(), <span class="stringliteral">&quot;Backoff&quot;</span>) )
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Changing currentAC to &quot;</span> &lt;&lt; msg-&gt;getKind() &lt;&lt; endl;
        <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = msg-&gt;getKind();
    }
    <span class="comment">//check internal colision</span>
    <span class="keywordflow">if</span> ((strcmp(msg-&gt;getName(), <span class="stringliteral">&quot;Backoff&quot;</span>) == 0) || (strcmp(msg-&gt;getName(), <span class="stringliteral">&quot;AIFS&quot;</span>)==0))
    {
        <span class="keywordtype">int</span> kind;
        kind = msg-&gt;getKind();
        <span class="keywordflow">if</span> (kind&lt;0)
            kind = 0;
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt;<span class="stringliteral">&quot; kind is &quot;</span> &lt;&lt; kind &lt;&lt; <span class="stringliteral">&quot;,name is &quot;</span> &lt;&lt; msg-&gt;getName() &lt;&lt;endl;
        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = <a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1; (int)i &gt; kind; i--)  <span class="comment">//mozna prochaze jen 3..kind XXX</span>
        {
            <span class="keywordflow">if</span> (((<a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>(i)-&gt;isScheduled() &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>(i)-&gt;getArrivalTime() == simTime())
                    || (<a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(i)-&gt;isScheduled() &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(i) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(i)-&gt;getArrivalTime() == simTime()))
                    &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>(i)-&gt;empty())
            {
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Internal collision AC&quot;</span> &lt;&lt; kind &lt;&lt; <span class="stringliteral">&quot; with AC&quot;</span> &lt;&lt; i &lt;&lt; endl;
                <a class="code" href="class_ieee80211_mac.html#aaf2d7e0cd701202eb765b1b9c77bb658">numInternalCollision</a>++;
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Cancel backoff event and schedule new one for AC&quot;</span> &lt;&lt; kind &lt;&lt; endl;
                cancelEvent(<a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>(kind));
                <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>() == <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9" title="Maximum number of transmissions for a message.">transmissionLimit</a> - 1)
                {
                    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;give up transmission for AC&quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> &lt;&lt; endl;
                    <a class="code" href="class_ieee80211_mac.html#a793227beb883e6f0f0b5c993aa6b7f56">giveUpCurrentTransmission</a>();
                }
                <span class="keywordflow">else</span>
                {
                    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;retry transmission for AC&quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> &lt;&lt; endl;
                    <a class="code" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission</a>();
                }
                <span class="keywordflow">return</span>;
            }
        }
        <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = kind;
    }
    <a class="code" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2" title="Handle all kinds of messages and notifications with the state machine.">handleWithFSM</a>(msg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3c78df80f39331fe0c35a19b2a991714"></a><!-- doxytag: member="Ieee80211Mac::handleUpperMsg" ref="a3c78df80f39331fe0c35a19b2a991714" args="(cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a3c78df80f39331fe0c35a19b2a991714">Ieee80211Mac::handleUpperMsg</a> </td>
          <td>(</td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle messages from upper layer. </p>

<p>Implements <a class="el" href="class_wireless_mac_base.html#ab44661d865472b3799cbe4b086e131b9">WirelessMacBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e" title="Passive queue module to request messages from.">queueModule</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()&gt;1 &amp;&amp; (<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#aa6547247b1a7c9673b10647379ae8738">transmissionQueueSize</a>() &lt; <a class="code" href="class_ieee80211_mac.html#a06b55f6481683d64db13605b27b9537a" title="Maximum number of frames in the queue; should be set in the omnetpp.ini.">maxQueueSize</a>)
    {
        <span class="comment">// the module are continuously asking for packets, except if the queue is full</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;requesting another frame from queue module\n&quot;</span>;
        <a class="code" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e" title="Passive queue module to request messages from.">queueModule</a>-&gt;<a class="code" href="class_i_passive_queue.html#af28ddf4ff33afab50f9d34d1b24e2f6d" title="The queue should send a packet whenever this method is invoked.">requestPacket</a>();
    }

    <span class="comment">// check if it&#39;s a command from the mgmt layer</span>
    <span class="keywordflow">if</span> (msg-&gt;getBitLength()==0 &amp;&amp; msg-&gt;getKind()!=0)
    {
        <a class="code" href="class_ieee80211_mac.html#aedaaf3e337f2d4a0790dbe392ac9f481" title="Handle commands (msg kind+control info) coming from upper layers.">handleCommand</a>(msg);
        <span class="keywordflow">return</span>;
    }

    <span class="comment">// must be a Ieee80211DataOrMgmtFrame, within the max size because we don&#39;t support fragmentation</span>
    <a class="code" href="class_ieee80211_data_or_mgmt_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataOrMgmtFrame</a> *frame = check_and_cast&lt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataOrMgmtFrame</a> *&gt;(msg);
    <span class="keywordflow">if</span> (frame-&gt;getByteLength() &gt; <a class="code" href="class_ieee80211_mac.html#af6a8a67f828409cf76bf3c3f0fd6d35b" title="Messages longer than this threshold will be sent in multiple fragments.">fragmentationThreshold</a>)
        error(<span class="stringliteral">&quot;message from higher layer (%s)%s is too long for 802.11b, %d bytes (fragmentation is not supported yet)&quot;</span>,
              msg-&gt;getClassName(), msg-&gt;getName(), (int)(msg-&gt;getByteLength()));
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;frame &quot;</span> &lt;&lt; frame &lt;&lt; <span class="stringliteral">&quot; received from higher layer, receiver = &quot;</span> &lt;&lt; frame-&gt;<a class="code" href="class_ieee80211_frame.html#a342fbce2fe9bff7e0894e8ee1cf8da36">getReceiverAddress</a>() &lt;&lt; endl;

    <span class="comment">// if you get error from this assert check if is client associated to AP</span>
    ASSERT(!frame-&gt;<a class="code" href="class_ieee80211_frame.html#a342fbce2fe9bff7e0894e8ee1cf8da36">getReceiverAddress</a>().<a class="code" href="class_m_a_c_address.html#ae41af013d782b46483e7d0c84f0ed107" title="Returns true if all address bytes are zero.">isUnspecified</a>());

    <span class="comment">// fill in missing fields (receiver address, seq number), and insert into the queue</span>
    frame-&gt;<a class="code" href="class_ieee80211_two_address_frame.html#a87ef515e63a4b15cc019d4594f205834">setTransmitterAddress</a>(<a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57" title="MAC address.">address</a>);
    frame-&gt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html#a4e9e868e639cbd98ea9e391c8ef620b3">setSequenceNumber</a>(<a class="code" href="class_ieee80211_mac.html#a109b2d75d8fc4201674478a72bb31762" title="Sequence number to be assigned to the next frame.">sequenceNumber</a>);
    <a class="code" href="class_ieee80211_mac.html#a109b2d75d8fc4201674478a72bb31762" title="Sequence number to be assigned to the next frame.">sequenceNumber</a> = (<a class="code" href="class_ieee80211_mac.html#a109b2d75d8fc4201674478a72bb31762" title="Sequence number to be assigned to the next frame.">sequenceNumber</a>+1) % 4096;  <span class="comment">//XXX seqNum must be checked upon reception of frames!</span>

    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a692ea7349e92100524b65eb15649c0ea" title="Mapping to access categories.">mappingAccessCategory</a>(frame) == 200)
    {
        <span class="comment">// if function mappingAccessCategory() returns 200, it means transsmissionQueue is full</span>
        <span class="keywordflow">return</span>;
    }
    frame-&gt;<a class="code" href="class_ieee80211_frame.html#a862921fc7153e1f6211e5f77ca481dcf">setMACArrive</a>(simTime());
    <a class="code" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2" title="Handle all kinds of messages and notifications with the state machine.">handleWithFSM</a>(frame);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa95e52e25b2792fb62dd4d758cac72a2"></a><!-- doxytag: member="Ieee80211Mac::handleWithFSM" ref="aa95e52e25b2792fb62dd4d758cac72a2" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">Ieee80211Mac::handleWithFSM</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle all kinds of messages and notifications with the state machine. </p>
<p>Msg can be upper, lower, self or NULL (when radio state changes) </p>
<p>changed </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#a3c78df80f39331fe0c35a19b2a991714">handleUpperMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#a6844cdfc80c0c0f6b2faadff8a9abef9">receiveChangeNotification()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_mac.html#ae04ce2e36d6e1271b6c43ba302b244b1">removeOldTuplesFromDuplicateMap</a>();
    <span class="comment">// skip those cases where there&#39;s nothing to do, so the switch looks simpler</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_wireless_mac_base.html#a86b406729713114bdceb21e07bcefd12">isUpperMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState() != <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>)
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState() == <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa419717059960a235323c66331e52263d">WAITAIFS</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a>-&gt;isScheduled())
        {
            <span class="comment">// a difs was schedule because all queues ware empty</span>
            <span class="comment">// change difs for aifs</span>
            simtime_t remaint = <a class="code" href="class_ieee80211_mac.html#abdd0b24ce9cb75d2f0fb1fa390a1bd97">getAIFS</a>(<a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>)-<a class="code" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS</a>();
            scheduleAt(<a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a>-&gt;getArrivalTime()+remaint, <a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(<a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>));
            cancelEvent(<a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a>);
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState() == <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>(<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1)-&gt;isScheduled() &amp;&amp;  <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>(<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1)-&gt;empty())
        {
            <span class="comment">// a backoff was schedule with all the queues empty</span>
            <span class="comment">// reschedule the backoff with the appropriate AC</span>
            <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>(<a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>) = <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>(<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1);
            <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(<a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>) = <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1);
            <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1) = <span class="keyword">false</span>;
            scheduleAt(<a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>(<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1)-&gt;getArrivalTime(), <a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>(<a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>));
            cancelEvent(<a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>(<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1));
        }
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;deferring upper message transmission in &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getStateName() &lt;&lt; <span class="stringliteral">&quot; state\n&quot;</span>;
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *frame = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a>*<span class="keyword">&gt;</span>(msg);
    <span class="keywordtype">int</span> frameType = frame ? frame-&gt;<a class="code" href="class_ieee80211_frame.html#a2e7c19c38074e54f5d99cb09992b2f89">getType</a>() : -1;
    <span class="keywordtype">int</span> msgKind = msg-&gt;getKind();
    <a class="code" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d" title="Logs all state information.">logState</a>();
    <a class="code" href="class_ieee80211_mac.html#a784de8a16601c48f1f792adc9a35c321">stateVector</a>.record(<a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState());

    <span class="keywordflow">if</span> (frame &amp;&amp; <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(frame))
    {
        <a class="code" href="class_ieee80211_mac.html#aae4419ab39198abdf1fc8955b07e5e20" title="Indicates that the last frame received had bit errors in it or there was a collision during receiving...">lastReceiveFailed</a> = (msgKind == <a class="code" href="_phy_control_info__m_8h.html#aaf62cf1aafac31eab040782e23855210ad5384d1822c72da119100438c5051831">COLLISION</a> || msgKind == <a class="code" href="_phy_control_info__m_8h.html#aaf62cf1aafac31eab040782e23855210a46f67b4287ec5f32a482fe2245acb694">BITERROR</a>);
        <a class="code" href="class_ieee80211_mac.html#a21662171dd8c6356df3c8b050d7c9414" title="Schedule network allocation period according to 9.2.5.4.">scheduleReservePeriod</a>(frame);
    }

    <span class="comment">// TODO: fix bug according to the message: [omnetpp] A possible bug in the Ieee80211&#39;s FSM.</span>
    <a class="code" href="_f_s_m_a_8h.html#a585618c58d438c04d23005cf88a537b7">FSMA_Switch</a>(<a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>)
    {
        <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>)
        {
            <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#af24a75754986f091cf9b5e6987bb7bf3" title="Send down the change channel message to the physical layer if there is any.">sendDownPendingRadioConfigMsg</a>());
            <span class="comment">/*</span>
<span class="comment">            if (fixFSM)</span>
<span class="comment">            {</span>
<span class="comment">            FSMA_Event_Transition(Data-Ready,</span>
<span class="comment">                                  // isUpperMsg(msg),</span>
<span class="comment">                                  isUpperMsg(msg) &amp;&amp; backoffPeriod[currentAC] &gt; 0,</span>
<span class="comment">                                  DEFER,</span>
<span class="comment">                //ASSERT(isInvalidBackoffPeriod() || backoffPeriod == 0);</span>
<span class="comment">                //invalidateBackoffPeriod();</span>
<span class="comment">               ASSERT(false);</span>
<span class="comment"></span>
<span class="comment">            );</span>
<span class="comment">            FSMA_No_Event_Transition(Immediate-Data-Ready,</span>
<span class="comment">                !transmissionQueueEmpty(),</span>
<span class="comment">                                     DEFER,</span>
<span class="comment">              //  invalidateBackoffPeriod();</span>
<span class="comment">                ASSERT(backoff[currentAC]);</span>
<span class="comment"></span>
<span class="comment">            );</span>
<span class="comment">            }</span>
<span class="comment">            */</span>
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Data-Ready,
                                  <a class="code" href="class_wireless_mac_base.html#a86b406729713114bdceb21e07bcefd12">isUpperMsg</a>(msg),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
                                  ASSERT(<a class="code" href="class_ieee80211_mac.html#ac0b29b4f8c930e44e5dd062b79e394c0">isInvalidBackoffPeriod</a>() || <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>() == 0);
                                  <a class="code" href="class_ieee80211_mac.html#a45baf5991b010588132ecfea105a17b0" title="Generates a new backoff period based on the contention window.">invalidateBackoffPeriod</a>();
                                 );
            <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Data-Ready,
                                     !<a class="code" href="class_ieee80211_mac.html#a2c8b0bfbaafaf1b4180a636d3e4711b0">transmissionQueueEmpty</a>(),
                                     <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
                                     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>() == 0) <span class="comment">//  jesjones patch.  TODO: check this particular case, I haven&#39;t been sure about this particular case</span>
                                        <a class="code" href="class_ieee80211_mac.html#a45baf5991b010588132ecfea105a17b0" title="Generates a new backoff period based on the contention window.">invalidateBackoffPeriod</a>();
                                    );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive,
                                  <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>,
                                 );
        }
        <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>)
        {
            <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#af24a75754986f091cf9b5e6987bb7bf3" title="Send down the change channel message to the physical layer if there is any.">sendDownPendingRadioConfigMsg</a>());
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Wait-AIFS,
                                  <a class="code" href="class_ieee80211_mac.html#adf18b82f7ec2838535e84fba8ef43f3e" title="Used by the state machine to identify medium state change events.">isMediumStateChange</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729" title="Tells if the medium is free according to the physical and virtual carrier sense algorithm.">isMediumFree</a>(),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa419717059960a235323c66331e52263d">WAITAIFS</a>,
                                  ;);
            <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Wait-AIFS,
                                     <a class="code" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729" title="Tells if the medium is free according to the physical and virtual carrier sense algorithm.">isMediumFree</a>() || (!<a class="code" href="class_ieee80211_mac.html#ab7893e721612a54d3a7e3dd6727af3ba">isBackoffPending</a>()),
                                     <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa419717059960a235323c66331e52263d">WAITAIFS</a>,
                                     ;);
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive,
                                  <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>,
                                  ;);
        }
        <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa419717059960a235323c66331e52263d">WAITAIFS</a>)
        {
            <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#a2e885fc167155dfd1e9ecbf2d0058807">scheduleAIFSPeriod</a>());

            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(EDCAF-Do-Nothing,
                                  <a class="code" href="class_ieee80211_mac.html#ad5f07fdbe9b2e50329534eceb5772f52" title="Checks if the message is endAIFS and set currentAC.">isMsgAIFS</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;<a class="code" href="namespace_const_type.html#a292c6824a659d30847032a3c0d1c0217">empty</a>(),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa419717059960a235323c66331e52263d">WAITAIFS</a>,
                                  ASSERT(0==1);
                                  ;);
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Immediate-Transmit-RTS,
                                  <a class="code" href="class_ieee80211_mac.html#ad5f07fdbe9b2e50329534eceb5772f52" title="Checks if the message is endAIFS and set currentAC.">isMsgAIFS</a>(msg) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;<a class="code" href="namespace_const_type.html#a292c6824a659d30847032a3c0d1c0217">empty</a>() &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73" title="Returns true if message is a multicast message.">isMulticast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>())
                                  &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()-&gt;getByteLength() &gt;= <a class="code" href="class_ieee80211_mac.html#a1bb03a4c3ab2056a1a3d9cab41388613" title="The minimum length of MPDU to use RTS/CTS mechanism.">rtsThreshold</a> &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588">WAITCTS</a>,
                                  <a class="code" href="class_ieee80211_mac.html#abe3eb2e0a57570ce0f786da221090924">sendRTSFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
                                  <a class="code" href="class_ieee80211_mac.html#acfedb65b560767ae3701903e5dcdf141" title="Remember currentAC.">oldcurrentAC</a> = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
                                  <a class="code" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a>();
                                 );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Immediate-Transmit-Multicast,
                                  <a class="code" href="class_ieee80211_mac.html#ad5f07fdbe9b2e50329534eceb5772f52" title="Checks if the message is endAIFS and set currentAC.">isMsgAIFS</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73" title="Returns true if message is a multicast message.">isMulticast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa679cc11c9367116aa016e789338705a3">WAITMULTICAST</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a3975bf98c4714a9346df65866521a479">sendMulticastFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
                                  oldcurrentAC = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
                                  <a class="code" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a>();
                                 );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Immediate-Transmit-Data,
                                  <a class="code" href="class_ieee80211_mac.html#ad5f07fdbe9b2e50329534eceb5772f52" title="Checks if the message is endAIFS and set currentAC.">isMsgAIFS</a>(msg) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73" title="Returns true if message is a multicast message.">isMulticast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
                                  oldcurrentAC = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
                                  <a class="code" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a>();
                                 );
            <span class="comment">/*FSMA_Event_Transition(AIFS-Over,</span>
<span class="comment">                                  isMsgAIFS(msg) &amp;&amp; backoff[currentAC],</span>
<span class="comment">                                  BACKOFF,</span>
<span class="comment">                if (isInvalidBackoffPeriod())</span>
<span class="comment">                    generateBackoffPeriod();</span>
<span class="comment">            );*/</span>
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(AIFS-Over,
                                  <a class="code" href="class_ieee80211_mac.html#ad5f07fdbe9b2e50329534eceb5772f52" title="Checks if the message is endAIFS and set currentAC.">isMsgAIFS</a>(msg),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a>,
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ac0b29b4f8c930e44e5dd062b79e394c0">isInvalidBackoffPeriod</a>())
                                  <a class="code" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">generateBackoffPeriod</a>();
                                 );
            <span class="comment">// end the difs and no other packet has been received</span>
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(<a class="code" href="_ieee80211_consts_8h.html#a48db305f0a645cc92737c0384b248cde">DIFS</a>-Over,
                                  msg == <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a2c8b0bfbaafaf1b4180a636d3e4711b0">transmissionQueueEmpty</a>(),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = <a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1;
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ac0b29b4f8c930e44e5dd062b79e394c0">isInvalidBackoffPeriod</a>())
                                     <a class="code" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">generateBackoffPeriod</a>();
                                   );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(<a class="code" href="_ieee80211_consts_8h.html#a48db305f0a645cc92737c0384b248cde">DIFS</a>-Over,
                                   msg == <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a>,
                                   <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a>,
                                   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1; i&gt;=0; i--)
                                   {
                                       <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>(i)-&gt;<a class="code" href="namespace_const_type.html#a292c6824a659d30847032a3c0d1c0217">empty</a>())
                                       {
                                            <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = i;
                                       }
                                   }
                                   <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ac0b29b4f8c930e44e5dd062b79e394c0">isInvalidBackoffPeriod</a>())
                                      <a class="code" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">generateBackoffPeriod</a>();
                                    );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Busy,
                                  <a class="code" href="class_ieee80211_mac.html#adf18b82f7ec2838535e84fba8ef43f3e" title="Used by the state machine to identify medium state change events.">isMediumStateChange</a>(msg) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729" title="Tells if the medium is free according to the physical and virtual carrier sense algorithm.">isMediumFree</a>(),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
                                  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
                                  {
                                      <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(i)-&gt;isScheduled())
                                          <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(i) = <span class="keyword">true</span>;
                                  }
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a>-&gt;isScheduled()) <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1) = <span class="keyword">true</span>;
                                  <a class="code" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a>();
                                  );
            <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Busy,
                                     !<a class="code" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729" title="Tells if the medium is free according to the physical and virtual carrier sense algorithm.">isMediumFree</a>(),
                                     <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
                                     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
                                     {
                                         <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(i)-&gt;isScheduled())
                                             <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(i) = <span class="keyword">true</span>;
                                     }
                                     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a>-&gt;isScheduled()) <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1) = <span class="keyword">true</span>;
                                     <a class="code" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a>();

                                     );
            <span class="comment">// radio state changes before we actually get the message, so this must be here</span>
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive,
                                  <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a>();
                                  ;);
        }
        <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a>)
        {
            <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#a4ea47166959fb7622be67011d131d8f5">scheduleBackoffPeriod</a>());
            <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>())
            {
                <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-RTS,
                                      msg == <a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>() &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73" title="Returns true if message is a multicast message.">isMulticast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>())
                                      &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()-&gt;getByteLength() &gt;= <a class="code" href="class_ieee80211_mac.html#a1bb03a4c3ab2056a1a3d9cab41388613" title="The minimum length of MPDU to use RTS/CTS mechanism.">rtsThreshold</a>,
                                      <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588">WAITCTS</a>,
                                      <a class="code" href="class_ieee80211_mac.html#abe3eb2e0a57570ce0f786da221090924">sendRTSFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
                                      oldcurrentAC = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
                                      <a class="code" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a>();
                                      <a class="code" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod</a>();
                                      <a class="code" href="class_ieee80211_mac.html#a80a6ffa55936b6ee00a09c45cf82aaf0">cancelBackoffPeriod</a>();
                                     );
                <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-Multicast,
                                      msg == <a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>() &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73" title="Returns true if message is a multicast message.">isMulticast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()),
                                      <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa679cc11c9367116aa016e789338705a3">WAITMULTICAST</a>,
                                      <a class="code" href="class_ieee80211_mac.html#a3975bf98c4714a9346df65866521a479">sendMulticastFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
                                      oldcurrentAC = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
                                      <a class="code" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a>();
                                      <a class="code" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod</a>();
                                      <a class="code" href="class_ieee80211_mac.html#a80a6ffa55936b6ee00a09c45cf82aaf0">cancelBackoffPeriod</a>();
                                     );
                <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-Data,
                                      msg == <a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>() &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73" title="Returns true if message is a multicast message.">isMulticast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()),
                                      <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>,
                                      <a class="code" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
                                      oldcurrentAC = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
                                      <a class="code" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a>();
                                      <a class="code" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod</a>();
                                      <a class="code" href="class_ieee80211_mac.html#a80a6ffa55936b6ee00a09c45cf82aaf0">cancelBackoffPeriod</a>();
                                     );
            }
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(AIFS-Over-<a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>,
                                  <a class="code" href="class_ieee80211_mac.html#ad5f07fdbe9b2e50329534eceb5772f52" title="Checks if the message is endAIFS and set currentAC.">isMsgAIFS</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daaccc2ce74d000421b6504f4ea7995b708">BACKOFF</a>,
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ac0b29b4f8c930e44e5dd062b79e394c0">isInvalidBackoffPeriod</a>())
                                  <a class="code" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">generateBackoffPeriod</a>();
                                 );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(AIFS-Immediate-Transmit-RTS,
                                  <a class="code" href="class_ieee80211_mac.html#ad5f07fdbe9b2e50329534eceb5772f52" title="Checks if the message is endAIFS and set currentAC.">isMsgAIFS</a>(msg) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;<a class="code" href="namespace_const_type.html#a292c6824a659d30847032a3c0d1c0217">empty</a>() &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73" title="Returns true if message is a multicast message.">isMulticast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>())
                                  &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()-&gt;getByteLength() &gt;= <a class="code" href="class_ieee80211_mac.html#a1bb03a4c3ab2056a1a3d9cab41388613" title="The minimum length of MPDU to use RTS/CTS mechanism.">rtsThreshold</a> &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588">WAITCTS</a>,
                                  <a class="code" href="class_ieee80211_mac.html#abe3eb2e0a57570ce0f786da221090924">sendRTSFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
                                  oldcurrentAC = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
                                  <a class="code" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a>();
                                  <a class="code" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod</a>();
                                  <a class="code" href="class_ieee80211_mac.html#a80a6ffa55936b6ee00a09c45cf82aaf0">cancelBackoffPeriod</a>();
                                 );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(AIFS-Immediate-Transmit-Multicast,
                                  <a class="code" href="class_ieee80211_mac.html#ad5f07fdbe9b2e50329534eceb5772f52" title="Checks if the message is endAIFS and set currentAC.">isMsgAIFS</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73" title="Returns true if message is a multicast message.">isMulticast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa679cc11c9367116aa016e789338705a3">WAITMULTICAST</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a3975bf98c4714a9346df65866521a479">sendMulticastFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
                                  oldcurrentAC = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
                                  <a class="code" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a>();
                                  <a class="code" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod</a>();
                                  <a class="code" href="class_ieee80211_mac.html#a80a6ffa55936b6ee00a09c45cf82aaf0">cancelBackoffPeriod</a>();
                                 );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(AIFS-Immediate-Transmit-Data,
                                  <a class="code" href="class_ieee80211_mac.html#ad5f07fdbe9b2e50329534eceb5772f52" title="Checks if the message is endAIFS and set currentAC.">isMsgAIFS</a>(msg) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73" title="Returns true if message is a multicast message.">isMulticast</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
                                  oldcurrentAC = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
                                  <a class="code" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a>();
                                  <a class="code" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod</a>();
                                  <a class="code" href="class_ieee80211_mac.html#a80a6ffa55936b6ee00a09c45cf82aaf0">cancelBackoffPeriod</a>();
                                 );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Backoff-Idle,
                                  <a class="code" href="class_ieee80211_mac.html#a4496ce674d2048d8deb18b277c7d7b25">isBakoffMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a2c8b0bfbaafaf1b4180a636d3e4711b0">transmissionQueueEmpty</a>(),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
                                  <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
                                  );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Backoff-Busy,
                                  <a class="code" href="class_ieee80211_mac.html#adf18b82f7ec2838535e84fba8ef43f3e" title="Used by the state machine to identify medium state change events.">isMediumStateChange</a>(msg) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729" title="Tells if the medium is free according to the physical and virtual carrier sense algorithm.">isMediumFree</a>(),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod</a>();
                                  <a class="code" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod</a>();
                                  <a class="code" href="class_ieee80211_mac.html#a80a6ffa55936b6ee00a09c45cf82aaf0">cancelBackoffPeriod</a>();
                                 );

        }
        <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>)
        {
            <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">scheduleDataTimeoutPeriod</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()));
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive-ACK-<a class="code" href="class_ieee80211_mac.html#a355c85be7885e389bd989d08e02e54a9">TXOP</a>,
                                  <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame) &amp;&amp; frameType == <a class="code" href="_ieee80211_frame__m_8h.html#a81c1fb7c4ee711ca8f669578c7422e2aa5b43b6f6f246f109c30a32078fadad5b">ST_ACK</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff" title="True if we are in txop bursting packets.">txop</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac">WAITSIFS</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = oldcurrentAC;
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>() == 0) <a class="code" href="class_ieee80211_mac.html#a4b6a1ca005a57bfd5447c9a853d0247d">numSentWithoutRetry</a>()++;
                                  <a class="code" href="class_ieee80211_mac.html#a33ead2b36b8c62088f7106b154af22af">numSent</a>()++;
                                  <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a> = <a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>();
                                  <a class="code" href="class_ieee80211_mac.html#ac16d02e12179c33220ba6483b1ab724b">numBites</a> += <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;getBitLength();
                                  <a class="code" href="class_ieee80211_mac.html#abc98919400f5ba39dde97589f4a4c7f7">bites</a>() += <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;getBitLength();


                                  <a class="code" href="class_ieee80211_mac.html#ac4dab428b184257867acca0349bc187c">macDelay</a>()-&gt;record(simTime() - <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;<a class="code" href="class_ieee80211_frame.html#a12ca856e541bdc623ef1f86112ef0b34">getMACArrive</a>());
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">maxjitter</a>() == 0 || <a class="code" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">maxjitter</a>() &lt; (simTime() - <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;<a class="code" href="class_ieee80211_frame.html#a12ca856e541bdc623ef1f86112ef0b34">getMACArrive</a>()))
                                      <a class="code" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">maxjitter</a>() = simTime() - <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;<a class="code" href="class_ieee80211_frame.html#a12ca856e541bdc623ef1f86112ef0b34">getMACArrive</a>();
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">minjitter</a>() == 0 || <a class="code" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">minjitter</a>() &gt; (simTime() - <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;<a class="code" href="class_ieee80211_frame.html#a12ca856e541bdc623ef1f86112ef0b34">getMACArrive</a>()))
                                      <a class="code" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">minjitter</a>() = simTime() - <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;<a class="code" href="class_ieee80211_frame.html#a12ca856e541bdc623ef1f86112ef0b34">getMACArrive</a>();
                                  <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;record macDelay AC&quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> &lt;&lt; <span class="stringliteral">&quot; value &quot;</span> &lt;&lt; simTime() - <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;<a class="code" href="class_ieee80211_frame.html#a12ca856e541bdc623ef1f86112ef0b34">getMACArrive</a>() &lt;&lt;endl;
                                  <a class="code" href="class_ieee80211_mac.html#ac4bf79c580118820bdecd1a001711049">numSentTXOP</a>++;
                                  <a class="code" href="class_ieee80211_mac.html#a9a3d534aa427c8ec65713ad1f3e0e223">cancelTimeoutPeriod</a>();
                                  <a class="code" href="class_ieee80211_mac.html#ae7e7f22c4c76ac7be8ffff853cbf7503">finishCurrentTransmission</a>();
                                  );
<span class="comment">/*</span>
<span class="comment">            FSMA_Event_Transition(Receive-ACK,</span>
<span class="comment">                                  isLowerMsg(msg) &amp;&amp; isForUs(frame) &amp;&amp; frameType == ST_ACK,</span>
<span class="comment">                                  IDLE,</span>
<span class="comment">                                  currentAC=oldcurrentAC;</span>
<span class="comment">                                  if (retryCounter[currentAC] == 0) numSentWithoutRetry[currentAC]++;</span>
<span class="comment">                                  numSent[currentAC]++;</span>
<span class="comment">                                  fr=getCurrentTransmission();</span>
<span class="comment">                                  numBites += fr-&gt;getBitLength();</span>
<span class="comment">                                  bites[currentAC] += fr-&gt;getBitLength();</span>
<span class="comment"></span>
<span class="comment">                                  macDelay[currentAC].record(simTime() - fr-&gt;getMACArrive());</span>
<span class="comment">                                  if (maxjitter[currentAC] == 0 || maxjitter[currentAC] &lt; (simTime() - fr-&gt;getMACArrive())) maxjitter[currentAC]=simTime() - fr-&gt;getMACArrive();</span>
<span class="comment">                                      if (minjitter[currentAC] == 0 || minjitter[currentAC] &gt; (simTime() - fr-&gt;getMACArrive())) minjitter[currentAC]=simTime() - fr-&gt;getMACArrive();</span>
<span class="comment">                                          EV &lt;&lt; &quot;record macDelay AC&quot; &lt;&lt; currentAC &lt;&lt; &quot; value &quot; &lt;&lt; simTime() - fr-&gt;getMACArrive() &lt;&lt;endl;</span>
<span class="comment"></span>
<span class="comment">                                          cancelTimeoutPeriod();</span>
<span class="comment">                                          finishCurrentTransmission();</span>
<span class="comment">                                         );</span>
<span class="comment"></span>
<span class="comment">             */</span>
             <span class="comment">/*Ieee 802.11 2007 9.9.1.2 EDCA TXOPs*/</span>
             <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive-ACK,
                                  <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame) &amp;&amp; frameType == <a class="code" href="_ieee80211_frame__m_8h.html#a81c1fb7c4ee711ca8f669578c7422e2aa5b43b6f6f246f109c30a32078fadad5b">ST_ACK</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = oldcurrentAC;
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>() == 0)
                                      <a class="code" href="class_ieee80211_mac.html#a4b6a1ca005a57bfd5447c9a853d0247d">numSentWithoutRetry</a>()++;
                                  <a class="code" href="class_ieee80211_mac.html#a33ead2b36b8c62088f7106b154af22af">numSent</a>()++;
                                  <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a> = <a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>();
                                  <a class="code" href="class_ieee80211_mac.html#ac16d02e12179c33220ba6483b1ab724b">numBites</a> += <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;getBitLength();
                                  <a class="code" href="class_ieee80211_mac.html#abc98919400f5ba39dde97589f4a4c7f7">bites</a>() += <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;getBitLength();

                                  <a class="code" href="class_ieee80211_mac.html#ac4dab428b184257867acca0349bc187c">macDelay</a>()-&gt;record(simTime() - <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;<a class="code" href="class_ieee80211_frame.html#a12ca856e541bdc623ef1f86112ef0b34">getMACArrive</a>());
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">maxjitter</a>() == 0 || <a class="code" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">maxjitter</a>() &lt; (simTime() - <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;<a class="code" href="class_ieee80211_frame.html#a12ca856e541bdc623ef1f86112ef0b34">getMACArrive</a>()))
                                      <a class="code" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">maxjitter</a>() = simTime() - <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;<a class="code" href="class_ieee80211_frame.html#a12ca856e541bdc623ef1f86112ef0b34">getMACArrive</a>();
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">minjitter</a>() == 0 || <a class="code" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">minjitter</a>() &gt; (simTime() - <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;<a class="code" href="class_ieee80211_frame.html#a12ca856e541bdc623ef1f86112ef0b34">getMACArrive</a>()))
                                      <a class="code" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">minjitter</a>() = simTime() - <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;<a class="code" href="class_ieee80211_frame.html#a12ca856e541bdc623ef1f86112ef0b34">getMACArrive</a>();
                                  <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;record macDelay AC&quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> &lt;&lt; <span class="stringliteral">&quot; value &quot;</span> &lt;&lt; simTime() - <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a>-&gt;<a class="code" href="class_ieee80211_frame.html#a12ca856e541bdc623ef1f86112ef0b34">getMACArrive</a>() &lt;&lt;endl;
                                  <a class="code" href="class_ieee80211_mac.html#a9a3d534aa427c8ec65713ad1f3e0e223">cancelTimeoutPeriod</a>();
                                  <a class="code" href="class_ieee80211_mac.html#ae7e7f22c4c76ac7be8ffff853cbf7503">finishCurrentTransmission</a>();
                                  <a class="code" href="class_ieee80211_mac.html#af8e85a57bc0eaa9ccaf66c9189bc8655">resetCurrentBackOff</a>();
                                  );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-Data-Failed,
                                  msg == <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>(oldcurrentAC) == <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9" title="Maximum number of transmissions for a message.">transmissionLimit</a> - 1,
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = oldcurrentAC;
                                  <a class="code" href="class_ieee80211_mac.html#a793227beb883e6f0f0b5c993aa6b7f56">giveUpCurrentTransmission</a>();
                                  <a class="code" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff" title="True if we are in txop bursting packets.">txop</a> = <span class="keyword">false</span>;
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34" title="End of the Arbitration Inter-Frame Time period.">endTXOP</a>-&gt;isScheduled()) cancelEvent(<a class="code" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34" title="End of the Arbitration Inter-Frame Time period.">endTXOP</a>);
                                 );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive-ACK-Timeout,
                                  msg == <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = oldcurrentAC;
                                  <a class="code" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission</a>();
                                  <a class="code" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff" title="True if we are in txop bursting packets.">txop</a> = <span class="keyword">false</span>;
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34" title="End of the Arbitration Inter-Frame Time period.">endTXOP</a>-&gt;isScheduled()) cancelEvent(<a class="code" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34" title="End of the Arbitration Inter-Frame Time period.">endTXOP</a>);
                                 );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Interrupted-ACK-Failure,
                                  <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>(oldcurrentAC) == <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9" title="Maximum number of transmissions for a message.">transmissionLimit</a> - 1,
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>=oldcurrentAC;
                                  <a class="code" href="class_ieee80211_mac.html#a793227beb883e6f0f0b5c993aa6b7f56">giveUpCurrentTransmission</a>();
                                  <a class="code" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff" title="True if we are in txop bursting packets.">txop</a> = <span class="keyword">false</span>;
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34" title="End of the Arbitration Inter-Frame Time period.">endTXOP</a>-&gt;isScheduled()) cancelEvent(<a class="code" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34" title="End of the Arbitration Inter-Frame Time period.">endTXOP</a>);
                                 );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Retry-Interrupted-ACK,
                                 <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg),
                                 <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>,
                                 <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>=oldcurrentAC;
                                 <a class="code" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission</a>();
                                 <a class="code" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff" title="True if we are in txop bursting packets.">txop</a> = <span class="keyword">false</span>;
                                 <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34" title="End of the Arbitration Inter-Frame Time period.">endTXOP</a>-&gt;isScheduled()) cancelEvent(<a class="code" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34" title="End of the Arbitration Inter-Frame Time period.">endTXOP</a>);
                                 );
        }
        <span class="comment">// wait until multicast is sent</span>
        <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa679cc11c9367116aa016e789338705a3">WAITMULTICAST</a>)
        {
            <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#ad258b3308057764df66b6ea932a94791">scheduleMulticastTimeoutPeriod</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()));
            <span class="comment">/*</span>
<span class="comment">                        FSMA_Event_Transition(Transmit-Multicast,</span>
<span class="comment">                                              msg == endTimeout,</span>
<span class="comment">                                              IDLE,</span>
<span class="comment">                            currentAC=oldcurrentAC;</span>
<span class="comment">                            finishCurrentTransmission();</span>
<span class="comment">                            numSentMulticast++;</span>
<span class="comment">                        );</span>
<span class="comment">            */</span>
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-Multicast,
                                  msg == <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = oldcurrentAC;
                                  <a class="code" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">fr</a> = <a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>();
                                  <a class="code" href="class_ieee80211_mac.html#ac16d02e12179c33220ba6483b1ab724b">numBites</a> += fr-&gt;getBitLength();
                                  <a class="code" href="class_ieee80211_mac.html#abc98919400f5ba39dde97589f4a4c7f7">bites</a>() += fr-&gt;getBitLength();
                                  <a class="code" href="class_ieee80211_mac.html#ae7e7f22c4c76ac7be8ffff853cbf7503">finishCurrentTransmission</a>();
                                  <a class="code" href="class_ieee80211_mac.html#a82f4ea0e2f668f1ae81478595f446085">numSentMulticast</a>++;
                                  <a class="code" href="class_ieee80211_mac.html#af8e85a57bc0eaa9ccaf66c9189bc8655">resetCurrentBackOff</a>();
                                 );
        }
        <span class="comment">// accoriding to 9.2.5.7 CTS procedure</span>
        <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daac1baac3a7681ac2dbfaf5f5d79e28588">WAITCTS</a>)
        {
            <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#a916864ac7a266c8fdf466a185c3a68dc">scheduleCTSTimeoutPeriod</a>());
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive-CTS,
                                  <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame) &amp;&amp; frameType == <a class="code" href="_ieee80211_frame__m_8h.html#a81c1fb7c4ee711ca8f669578c7422e2aae212c16f05fadee6dd4a28d5fa50deda">ST_CTS</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac">WAITSIFS</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a9a3d534aa427c8ec65713ad1f3e0e223">cancelTimeoutPeriod</a>();
                                 );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-RTS-Failed,
                                  msg == <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>(oldcurrentAC) == <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9" title="Maximum number of transmissions for a message.">transmissionLimit</a> - 1,
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = oldcurrentAC;
                                  <a class="code" href="class_ieee80211_mac.html#a793227beb883e6f0f0b5c993aa6b7f56">giveUpCurrentTransmission</a>();
                                 );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Receive-CTS-Timeout,
                                  msg == <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = oldcurrentAC;
                                  <a class="code" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission</a>();
                                 );
        }
        <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac">WAITSIFS</a>)
        {
            <a class="code" href="_f_s_m_a_8h.html#a12c2433a4260c7583d61162fa951bca7">FSMA_Enter</a>(<a class="code" href="class_ieee80211_mac.html#a325e59dc74a3ad59596933aaf96012a7">scheduleSIFSPeriod</a>(frame));
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-Data-<a class="code" href="class_ieee80211_mac.html#a355c85be7885e389bd989d08e02e54a9">TXOP</a>,
                                  msg == <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a3ae0423bce927f7db18f55a88e44e20a" title="Returns the last frame received before the SIFS period.">getFrameReceivedBeforeSIFS</a>()-&gt;getType() == <a class="code" href="_ieee80211_frame__m_8h.html#a81c1fb7c4ee711ca8f669578c7422e2aa5b43b6f6f246f109c30a32078fadad5b">ST_ACK</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
                                  oldcurrentAC = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
                                 );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-CTS,
                                  msg == <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a3ae0423bce927f7db18f55a88e44e20a" title="Returns the last frame received before the SIFS period.">getFrameReceivedBeforeSIFS</a>()-&gt;getType() == <a class="code" href="_ieee80211_frame__m_8h.html#a81c1fb7c4ee711ca8f669578c7422e2aadc75816b0f8ed30512ca871fb63aa9c3">ST_RTS</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a821d34cb04fd6ebd9b0d6989b963614d">sendCTSFrameOnEndSIFS</a>();
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#abe95692a0ffe9238206a2ef3d797ab82">fixFSM</a>)
                                      <a class="code" href="class_ieee80211_mac.html#aa5cefe02fc6379d5aefb5c54d8d3422c">finishReception</a>();
                                  <span class="keywordflow">else</span>
                                      <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
                                  );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-<a class="code" href="_s_c_t_p_association_8h.html#a8886377ab3f4b4ef217558f2b83b7b12a9d7d6f31868d66330397c967c4afd2d2">DATA</a>,
                                  msg == <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a3ae0423bce927f7db18f55a88e44e20a" title="Returns the last frame received before the SIFS period.">getFrameReceivedBeforeSIFS</a>()-&gt;getType() == <a class="code" href="_ieee80211_frame__m_8h.html#a81c1fb7c4ee711ca8f669578c7422e2aae212c16f05fadee6dd4a28d5fa50deda">ST_CTS</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa3b6427c4aab59339ba051c2705a5fd70">WAITACK</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a535d6bc217f1cfc210fe798c3b89a114">sendDataFrameOnEndSIFS</a>(<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>());
                                  oldcurrentAC = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
                                 );
            <a class="code" href="_f_s_m_a_8h.html#ac70de60b30e30958d33808d2aceacc09">FSMA_Event_Transition</a>(Transmit-ACK,
                                  msg == <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a331f759ba45d0d363362dce7d1b9f9b0" title="Checks if the frame is a data or management frame.">isDataOrMgmtFrame</a>(<a class="code" href="class_ieee80211_mac.html#a3ae0423bce927f7db18f55a88e44e20a" title="Returns the last frame received before the SIFS period.">getFrameReceivedBeforeSIFS</a>()),
                                  <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
                                  <a class="code" href="class_ieee80211_mac.html#a1fa778f58e945ac0b347dfa66785224b">sendACKFrameOnEndSIFS</a>();
                                  <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#abe95692a0ffe9238206a2ef3d797ab82">fixFSM</a>)
                                      <a class="code" href="class_ieee80211_mac.html#aa5cefe02fc6379d5aefb5c54d8d3422c">finishReception</a>();
                                  <span class="keywordflow">else</span>
                                      <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
                                   );
        }
        <span class="comment">// this is not a real state</span>
        <a class="code" href="_f_s_m_a_8h.html#a8291ad6e80866efe80d61d383e50ef3c">FSMA_State</a>(<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>)
        {
            <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Receive-Error,
                                     <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; (msgKind == <a class="code" href="_phy_control_info__m_8h.html#aaf62cf1aafac31eab040782e23855210ad5384d1822c72da119100438c5051831">COLLISION</a> || msgKind == <a class="code" href="_phy_control_info__m_8h.html#aaf62cf1aafac31eab040782e23855210a46f67b4287ec5f32a482fe2245acb694">BITERROR</a>),
                                     <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
                                     <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;received frame contains bit errors or collision, next wait period is EIFS\n&quot;</span>;
                                     <a class="code" href="class_ieee80211_mac.html#a7cde61a60a0ba921bec433b5d1113c84">numCollision</a>++;
                                     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#abe95692a0ffe9238206a2ef3d797ab82">fixFSM</a>)
                                         <a class="code" href="class_ieee80211_mac.html#aa5cefe02fc6379d5aefb5c54d8d3422c">finishReception</a>();
                                     <span class="keywordflow">else</span>
                                         <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
                                     );
            <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Receive-Multicast,
                                     <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73" title="Returns true if message is a multicast message.">isMulticast</a>(frame) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a9c499d1e9e72020fe52e7c39ac4e8759" title="Returns true if message source address is ours.">isSentByUs</a>(frame) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a331f759ba45d0d363362dce7d1b9f9b0" title="Checks if the frame is a data or management frame.">isDataOrMgmtFrame</a>(frame),
                                     <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
                                     <a class="code" href="class_ieee80211_mac.html#aee23d91230a4003a7e8f642f7e8f3f3f" title="Sends a message to the upper layer.">sendUp</a>(frame);
                                     <a class="code" href="class_ieee80211_mac.html#a687d1cd47799dc6f23dba5fff9b65318">numReceivedMulticast</a>++;
                                     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#abe95692a0ffe9238206a2ef3d797ab82">fixFSM</a>)
                                         <a class="code" href="class_ieee80211_mac.html#aa5cefe02fc6379d5aefb5c54d8d3422c">finishReception</a>();
                                     <span class="keywordflow">else</span>
                                         <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
                                     );
            <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Receive-Data,
                                     <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a331f759ba45d0d363362dce7d1b9f9b0" title="Checks if the frame is a data or management frame.">isDataOrMgmtFrame</a>(frame),
                                     <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac">WAITSIFS</a>,
                                     <a class="code" href="class_ieee80211_mac.html#aee23d91230a4003a7e8f642f7e8f3f3f" title="Sends a message to the upper layer.">sendUp</a>(frame);
                                     <a class="code" href="class_ieee80211_mac.html#a44149d10cf8b6f6b1f906d68d2157714">numReceived</a>++;
                                    );
            <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Receive-RTS,
                                     <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame) &amp;&amp; frameType == <a class="code" href="_ieee80211_frame__m_8h.html#a81c1fb7c4ee711ca8f669578c7422e2aadc75816b0f8ed30512ca871fb63aa9c3">ST_RTS</a>,
                                     <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daafe9bbc5fc649aa20f4512da028cbbeac">WAITSIFS</a>,
                                    );
            <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Receive-Other-backtobackoff,
                                     <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#ab7893e721612a54d3a7e3dd6727af3ba">isBackoffPending</a>(), <span class="comment">//(backoff[0] || backoff[1] || backoff[2] || backoff[3]),</span>
                                     <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa5c036fca4b3f1c9032358fee9fc2ab25">DEFER</a>,
                                    );

            <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Promiscuous-Data,
                                     <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg) &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame) &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a331f759ba45d0d363362dce7d1b9f9b0" title="Checks if the frame is a data or management frame.">isDataOrMgmtFrame</a>(frame),
                                     <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
                                     <a class="code" href="class_ieee80211_mac.html#a03a24ff3be5ea63f3e40bf5b56fc5baa">promiscousFrame</a>(frame);
                                     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#abe95692a0ffe9238206a2ef3d797ab82">fixFSM</a>)
                                         <a class="code" href="class_ieee80211_mac.html#aa5cefe02fc6379d5aefb5c54d8d3422c">finishReception</a>();
                                     <span class="keywordflow">else</span>
                                         <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
                                     <a class="code" href="class_ieee80211_mac.html#ac9f8379cbc211038c510bef1c11ee3d2">numReceivedOther</a>++;
                                     );
            <a class="code" href="_f_s_m_a_8h.html#abd229cc2e176b0e81494a93c14f18e8f">FSMA_No_Event_Transition</a>(Immediate-Receive-Other,
                                     <a class="code" href="class_wireless_mac_base.html#af982fd8985b1ceca8771b43908a027c5">isLowerMsg</a>(msg),
                                     <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>,
                                     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#abe95692a0ffe9238206a2ef3d797ab82">fixFSM</a>)
                                         <a class="code" href="class_ieee80211_mac.html#aa5cefe02fc6379d5aefb5c54d8d3422c">finishReception</a>();
                                     <span class="keywordflow">else</span>
                                         <a class="code" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120" title="Reset backoff, backoffPeriod and retryCounter for IDLE state.">resetStateVariables</a>();
                                     <a class="code" href="class_ieee80211_mac.html#ac9f8379cbc211038c510bef1c11ee3d2">numReceivedOther</a>++;
                                     );
        }
    }
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot;leaving handleWithFSM\n\t&quot;</span>;
    <a class="code" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d" title="Logs all state information.">logState</a>();
    <a class="code" href="class_ieee80211_mac.html#a784de8a16601c48f1f792adc9a35c321">stateVector</a>.record(<a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getState());
    <span class="keywordflow">if</span> (simTime() - <a class="code" href="class_ieee80211_mac.html#a82e1ab5d7dcef13a8fd670a6d4ed26fc">last</a> &gt; 0.1)
    {
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
        {
            <a class="code" href="class_ieee80211_mac.html#a916d6ad78851a4338821a4e456b754b5">throughput</a>(i)-&gt;record(<a class="code" href="class_ieee80211_mac.html#abc98919400f5ba39dde97589f4a4c7f7">bites</a>(i)/(simTime()-<a class="code" href="class_ieee80211_mac.html#a82e1ab5d7dcef13a8fd670a6d4ed26fc">last</a>));
            <a class="code" href="class_ieee80211_mac.html#abc98919400f5ba39dde97589f4a4c7f7">bites</a>(i) = 0;
            <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">maxjitter</a>(i) &gt; 0 &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">minjitter</a>(i) &gt; 0)
            {
                <a class="code" href="class_ieee80211_mac.html#aee1c346611b9f5515aeadded10d96ca0">jitter</a>(i)-&gt;record(<a class="code" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">maxjitter</a>(i)-<a class="code" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">minjitter</a>(i));
                <a class="code" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">maxjitter</a>(i) = 0;
                <a class="code" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">minjitter</a>(i) = 0;
            }
        }
        <a class="code" href="class_ieee80211_mac.html#a82e1ab5d7dcef13a8fd670a6d4ed26fc">last</a> = simTime();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="acc89ca1fc93ad17f2a78a01bd474f058"></a><!-- doxytag: member="Ieee80211Mac::initialize" ref="acc89ca1fc93ad17f2a78a01bd474f058" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">Ieee80211Mac::initialize</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialization of the module and some variables. </p>

<p>Reimplemented from <a class="el" href="class_wireless_mac_base.html#a74866aacf342c21cd220d959698d87af">WirelessMacBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058" title="Initialization of the module and some variables.">WirelessMacBase::initialize</a>(stage);

    <span class="keywordflow">if</span> (stage == 0)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Initializing stage 0\n&quot;</span>;
        <span class="keywordtype">int</span> numQueues = 1;
        <span class="keywordflow">if</span> (par(<span class="stringliteral">&quot;EDCA&quot;</span>))
        {
            <span class="keyword">const</span> <span class="keywordtype">char</span> *classifierClass = par(<span class="stringliteral">&quot;classifier&quot;</span>);
            <a class="code" href="class_ieee80211_mac.html#adeba876dd2315568f2ae52007c9a4106" title="Arbitration interframe space number.">classifier</a> = check_and_cast&lt;<a class="code" href="class_i_qo_s_classifier.html" title="Abstract interface for QoS classifiers, used in QoS queues.">IQoSClassifier</a>*&gt;(createOne(classifierClass));
            numQueues = <a class="code" href="class_ieee80211_mac.html#adeba876dd2315568f2ae52007c9a4106" title="Arbitration interframe space number.">classifier</a>-&gt;<a class="code" href="class_i_qo_s_classifier.html#aff6a55703d5a30ac614c0556634b8f85" title="Returns the largest value plus one classifyPacket() returns.">getNumQueues</a>();
        }

        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;numQueues; i++)
        {
            Edca catEdca;
            catEdca.backoff = <span class="keyword">false</span>;
            catEdca.backoffPeriod = -1;
            catEdca.retryCounter = 0;
            <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.push_back(catEdca);
        }
        <span class="comment">// initialize parameters</span>
        <span class="comment">// Variable to apply the fsm fix</span>
        <a class="code" href="class_ieee80211_mac.html#abe95692a0ffe9238206a2ef3d797ab82">fixFSM</a> = par(<span class="stringliteral">&quot;fixFSM&quot;</span>);
        <span class="keywordflow">if</span> (strcmp(<span class="stringliteral">&quot;b&quot;</span>, par(<span class="stringliteral">&quot;opMode&quot;</span>).<a class="code" href="_ned_functions_8cc.html#ac32e8a82d9c3e34351155e57642cdabf">stringValue</a>())==0)
            <a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a> = <span class="charliteral">&#39;b&#39;</span>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(<span class="stringliteral">&quot;g&quot;</span>, par(<span class="stringliteral">&quot;opMode&quot;</span>).<a class="code" href="_ned_functions_8cc.html#ac32e8a82d9c3e34351155e57642cdabf">stringValue</a>())==0)
            <a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a> = <span class="charliteral">&#39;g&#39;</span>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(<span class="stringliteral">&quot;a&quot;</span>, par(<span class="stringliteral">&quot;opMode&quot;</span>).<a class="code" href="_ned_functions_8cc.html#ac32e8a82d9c3e34351155e57642cdabf">stringValue</a>())==0)
            <a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a> = <span class="charliteral">&#39;a&#39;</span>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(<span class="stringliteral">&quot;p&quot;</span>, par(<span class="stringliteral">&quot;opMode&quot;</span>).<a class="code" href="_ned_functions_8cc.html#ac32e8a82d9c3e34351155e57642cdabf">stringValue</a>())==0)
             <a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a> = <span class="charliteral">&#39;p&#39;</span>;
        <span class="keywordflow">else</span>
            <a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a> = <span class="charliteral">&#39;g&#39;</span>;

        <a class="code" href="class_ieee80211_mac.html#a044b5bdca2b078f72cb44541a0524fcc">PHY_HEADER_LENGTH</a> = par(<span class="stringliteral">&quot;phyHeaderLength&quot;</span>); <span class="comment">//26us</span>

        <span class="keywordflow">if</span> (strcmp(<span class="stringliteral">&quot;SHORT&quot;</span>, par(<span class="stringliteral">&quot;wifiPreambleMode&quot;</span>).<a class="code" href="_ned_functions_8cc.html#ac32e8a82d9c3e34351155e57642cdabf">stringValue</a>())==0)
            <a class="code" href="class_ieee80211_mac.html#af5e0fd9af05f5494d1cce2821fb30d61">wifiPreambleType</a> = <a class="code" href="_wifi_preamble_type_8h.html#acc4e3ae44dc0fb54b8cb90d72b096887a0ed47ea121f7e6711fe0fc8fc3f4d4e1">WIFI_PREAMBLE_SHORT</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(<span class="stringliteral">&quot;LONG&quot;</span>, par(<span class="stringliteral">&quot;wifiPreambleMode&quot;</span>).<a class="code" href="_ned_functions_8cc.html#ac32e8a82d9c3e34351155e57642cdabf">stringValue</a>())==0)
            <a class="code" href="class_ieee80211_mac.html#af5e0fd9af05f5494d1cce2821fb30d61">wifiPreambleType</a> = <a class="code" href="_wifi_preamble_type_8h.html#acc4e3ae44dc0fb54b8cb90d72b096887ac1e601a7325262aabe389377de08a274">WIFI_PREAMBLE_LONG</a>;
        <span class="keywordflow">else</span>
            opp_error(<span class="stringliteral">&quot;Invalid wifiPreambleType. Must be SHORT or LONG&quot;</span>);

        <a class="code" href="class_ieee80211_mac.html#a8e05d7cf7a718c1e255e13f2ee6c132a">useModulationParameters</a> = par(<span class="stringliteral">&quot;useModulationParameters&quot;</span>);

        <a class="code" href="class_ieee80211_mac.html#afa6210be8edc347e37ae15a2aaa0148c">prioritizeMulticast</a> = par(<span class="stringliteral">&quot;prioritizeMulticast&quot;</span>);

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot;Operating mode: 802.11&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>;
        <a class="code" href="class_ieee80211_mac.html#a06b55f6481683d64db13605b27b9537a" title="Maximum number of frames in the queue; should be set in the omnetpp.ini.">maxQueueSize</a> = par(<span class="stringliteral">&quot;maxQueueSize&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#a1bb03a4c3ab2056a1a3d9cab41388613" title="The minimum length of MPDU to use RTS/CTS mechanism.">rtsThreshold</a> = par(<span class="stringliteral">&quot;rtsThresholdBytes&quot;</span>);

        <span class="comment">// the variable is renamed due to a confusion in the standard</span>
        <span class="comment">// the name retry limit would be misleading, see the header file comment</span>
        <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9" title="Maximum number of transmissions for a message.">transmissionLimit</a> = par(<span class="stringliteral">&quot;retryLimit&quot;</span>);
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9" title="Maximum number of transmissions for a message.">transmissionLimit</a> == -1) <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9" title="Maximum number of transmissions for a message.">transmissionLimit</a> = 7;
        ASSERT(<a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9" title="Maximum number of transmissions for a message.">transmissionLimit</a> &gt;= 0);

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot; retryLimit=&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9" title="Maximum number of transmissions for a message.">transmissionLimit</a>;

        <a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd" title="Minimum contention window.">cwMinData</a> = par(<span class="stringliteral">&quot;cwMinData&quot;</span>);
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd" title="Minimum contention window.">cwMinData</a> == -1) <a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd" title="Minimum contention window.">cwMinData</a> = <a class="code" href="_ieee80211_consts_8h.html#a104d9aa9c5a73eeecc9799c60b238289" title="Minimum size (initial size) of contention window.">CW_MIN</a>;
        ASSERT(<a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd" title="Minimum contention window.">cwMinData</a> &gt;= 0 &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd" title="Minimum contention window.">cwMinData</a> &lt;= 32767);

        <a class="code" href="class_ieee80211_mac.html#ac299184b8c8043c2e345d5aa5247e58a" title="Maximum contention window.">cwMaxData</a> = par(<span class="stringliteral">&quot;cwMaxData&quot;</span>);
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ac299184b8c8043c2e345d5aa5247e58a" title="Maximum contention window.">cwMaxData</a> == -1) <a class="code" href="class_ieee80211_mac.html#ac299184b8c8043c2e345d5aa5247e58a" title="Maximum contention window.">cwMaxData</a> = <a class="code" href="_ieee80211_consts_8h.html#a785c5f49538e2a36c5d3b31253740014" title="Maximum size of contention window.">CW_MAX</a>;
        ASSERT(<a class="code" href="class_ieee80211_mac.html#ac299184b8c8043c2e345d5aa5247e58a" title="Maximum contention window.">cwMaxData</a> &gt;= 0 &amp;&amp; <a class="code" href="class_ieee80211_mac.html#ac299184b8c8043c2e345d5aa5247e58a" title="Maximum contention window.">cwMaxData</a> &lt;= 32767);

        <a class="code" href="class_ieee80211_mac.html#adccf12e38c30df4ffe955abe34409b3d" title="Contention window size for multicast messages.">cwMinMulticast</a> = par(<span class="stringliteral">&quot;cwMinMulticast&quot;</span>);
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#adccf12e38c30df4ffe955abe34409b3d" title="Contention window size for multicast messages.">cwMinMulticast</a> == -1) <a class="code" href="class_ieee80211_mac.html#adccf12e38c30df4ffe955abe34409b3d" title="Contention window size for multicast messages.">cwMinMulticast</a> = 31;
        ASSERT(<a class="code" href="class_ieee80211_mac.html#adccf12e38c30df4ffe955abe34409b3d" title="Contention window size for multicast messages.">cwMinMulticast</a> &gt;= 0);
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot; cwMinMulticast=&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#adccf12e38c30df4ffe955abe34409b3d" title="Contention window size for multicast messages.">cwMinMulticast</a>;

        <a class="code" href="class_ieee80211_mac.html#a5d969292092b4220541de089ab25b250" title="Default access catagory.">defaultAC</a> = par(<span class="stringliteral">&quot;defaultAC&quot;</span>);
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#adeba876dd2315568f2ae52007c9a4106" title="Arbitration interframe space number.">classifier</a> &amp;&amp; dynamic_cast&lt;Ieee80211eClassifier*&gt;(<a class="code" href="class_ieee80211_mac.html#adeba876dd2315568f2ae52007c9a4106" title="Arbitration interframe space number.">classifier</a>))
            <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211e_classifier.html" title="An example packet classifier based on the UDP/TCP port number.">Ieee80211eClassifier</a>*<span class="keyword">&gt;</span>(<a class="code" href="class_ieee80211_mac.html#adeba876dd2315568f2ae52007c9a4106" title="Arbitration interframe space number.">classifier</a>)-&gt;setDefaultClass(<a class="code" href="class_ieee80211_mac.html#a5d969292092b4220541de089ab25b250" title="Default access catagory.">defaultAC</a>);

        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
        {
            std::stringstream os;
            os&lt;&lt; i;
            std::string strAifs = <span class="stringliteral">&quot;AIFSN&quot;</span>+os.str();
            std::string strTxop = <span class="stringliteral">&quot;TXOP&quot;</span>+os.str();
            <span class="keywordflow">if</span> (hasPar(strAifs.c_str()) &amp;&amp; hasPar(strTxop.c_str()))
            {
                <a class="code" href="class_ieee80211_mac.html#a9ac06ffa3e8b858168973ffc75cadf29">AIFSN</a>(i) = par(strAifs.c_str());
                <a class="code" href="class_ieee80211_mac.html#a355c85be7885e389bd989d08e02e54a9">TXOP</a>(i) = par(strTxop.c_str());
            }
            <span class="keywordflow">else</span>
                opp_error(<span class="stringliteral">&quot;parameters %s , %s don&#39;t exist&quot;</span>, strAifs.c_str(), strTxop.c_str());
        }
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()==1)
            <a class="code" href="class_ieee80211_mac.html#a9ac06ffa3e8b858168973ffc75cadf29">AIFSN</a>(0) = par(<span class="stringliteral">&quot;AIFSN&quot;</span>);

        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
        {
            ASSERT(<a class="code" href="class_ieee80211_mac.html#a9ac06ffa3e8b858168973ffc75cadf29">AIFSN</a>(i) &gt;= 0 &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a9ac06ffa3e8b858168973ffc75cadf29">AIFSN</a>(i) &lt; 16);
            <span class="keywordflow">if</span> (i == 0 || i == 1)
            {
                <a class="code" href="class_ieee80211_mac.html#afd3049b4415fb2e0e0aa69ee8a4735fc">cwMin</a>(i) = <a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd" title="Minimum contention window.">cwMinData</a>;
                <a class="code" href="class_ieee80211_mac.html#a8a81c5b96c8f83712049eabf4a4c1a0c">cwMax</a>(i) = <a class="code" href="class_ieee80211_mac.html#ac299184b8c8043c2e345d5aa5247e58a" title="Maximum contention window.">cwMaxData</a>;
            }
            <span class="keywordflow">if</span> (i == 2)
            {
                <a class="code" href="class_ieee80211_mac.html#afd3049b4415fb2e0e0aa69ee8a4735fc">cwMin</a>(i) = (<a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd" title="Minimum contention window.">cwMinData</a> + 1) / 2 - 1;
                <a class="code" href="class_ieee80211_mac.html#a8a81c5b96c8f83712049eabf4a4c1a0c">cwMax</a>(i) = <a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd" title="Minimum contention window.">cwMinData</a>;
            }
            <span class="keywordflow">if</span> (i == 3)
            {
                <a class="code" href="class_ieee80211_mac.html#afd3049b4415fb2e0e0aa69ee8a4735fc">cwMin</a>(i) = (<a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd" title="Minimum contention window.">cwMinData</a> + 1) / 4 - 1;
                <a class="code" href="class_ieee80211_mac.html#a8a81c5b96c8f83712049eabf4a4c1a0c">cwMax</a>(i) = (<a class="code" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd" title="Minimum contention window.">cwMinData</a> + 1) / 2 - 1;
            }
        }

        <a class="code" href="class_ieee80211_mac.html#af0b94b02412119954ca9e58f497503d1" title="Slot time 9us(fast slot time 802.11g only) 20us(802.11b / 802.11g backward compatible)">ST</a> = par(<span class="stringliteral">&quot;slotTime&quot;</span>); <span class="comment">//added by sorin</span>
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#af0b94b02412119954ca9e58f497503d1" title="Slot time 9us(fast slot time 802.11g only) 20us(802.11b / 802.11g backward compatible)">ST</a>==-1)
            <a class="code" href="class_ieee80211_mac.html#af0b94b02412119954ca9e58f497503d1" title="Slot time 9us(fast slot time 802.11g only) 20us(802.11b / 802.11g backward compatible)">ST</a> = 20e-6; <span class="comment">//20us</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot; slotTime=&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#af0b94b02412119954ca9e58f497503d1" title="Slot time 9us(fast slot time 802.11g only) 20us(802.11b / 802.11g backward compatible)">ST</a>*1e6&lt;&lt;<span class="stringliteral">&quot;us DIFS=&quot;</span>&lt;&lt; <a class="code" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS</a>()*1e6&lt;&lt;<span class="stringliteral">&quot;us&quot;</span>;

        <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a> = par(<span class="stringliteral">&quot;basicBitrate&quot;</span>);
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>==-1)
            <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a> = 1e6; <span class="comment">//1Mbps</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot; basicBitrate=&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>/1e6&lt;&lt;<span class="stringliteral">&quot;M&quot;</span>;

        <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a> = par(<span class="stringliteral">&quot;bitrate&quot;</span>);
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>==-1)
            <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a> = 11e6; <span class="comment">//11Mbps</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot; bitrate=&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>/1e6&lt;&lt;<span class="stringliteral">&quot;M IDLE=&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>&lt;&lt;<span class="stringliteral">&quot; RECEIVE=&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>&lt;&lt;endl;

        <a class="code" href="class_ieee80211_mac.html#a4aae6b9b700f7d85163553cece6f09d9" title="A list of last sender, sequence and fragment number tuples to identify duplicates, see spec 9.2.9.">duplicateDetect</a> = par(<span class="stringliteral">&quot;duplicateDetectionFilter&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#adb1a6965d57d5bc64344ce47fdffc9bd">purgeOldTuples</a> = par(<span class="stringliteral">&quot;purgeOldTuples&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#a2e70e03af5120cea1b89769d4e7a5f0a">duplicateTimeOut</a> = par(<span class="stringliteral">&quot;duplicateTimeOut&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#a57492265daaf979dabb33ad6467b6bc4">lastTimeDelete</a> = 0;

        <span class="comment">//FIXME refactor! copy-pasted code (4 times) with minimal changes</span>
        <span class="comment">// Auto rate code</span>
        <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;
        <span class="keywordflow">if</span> (opMode == <span class="charliteral">&#39;b&#39;</span>)
        {
            <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> = 0;
            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>(); i++)
            {
                <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a> == <a class="code" href="_ieee80211_data_rate_8h.html#a86d54860dd816f6b0e8a20bc4ba4dd07" title="Bit rates for 802.11b.">BITRATES_80211b</a>[i])
                {
                    found = <span class="keyword">true</span>;
                    <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> = i;
                    <span class="keywordflow">break</span>;
                }
            }
            <span class="keywordflow">if</span> (!found)
            {
                <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a> = <a class="code" href="_ieee80211_data_rate_8h.html#a86d54860dd816f6b0e8a20bc4ba4dd07" title="Bit rates for 802.11b.">BITRATES_80211b</a>[<a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>()-1];
                <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> = <a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>()-1;
            }
            found = <span class="keyword">false</span>;
            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>(); i++)
            {
                <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a> == <a class="code" href="_ieee80211_data_rate_8h.html#a86d54860dd816f6b0e8a20bc4ba4dd07" title="Bit rates for 802.11b.">BITRATES_80211b</a>[i])
                {
                    found = <span class="keyword">true</span>;
                    <span class="keywordflow">break</span>;
                }
            }
            <span class="keywordflow">if</span> (!found)
                <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a> = <a class="code" href="_ieee80211_data_rate_8h.html#a86d54860dd816f6b0e8a20bc4ba4dd07" title="Bit rates for 802.11b.">BITRATES_80211b</a>[0];

        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (opMode == <span class="charliteral">&#39;g&#39;</span>)
        {
            <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> = 0;
            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>(); i++)
            {
                <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a> == <a class="code" href="_ieee80211_data_rate_8h.html#a1edaa1e64ed54f3ab94446d9fdf3970c" title="Bit rates for 802.11g.">BITRATES_80211g</a>[i])
                {
                    found = <span class="keyword">true</span>;
                    <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> = i;
                    <span class="keywordflow">break</span>;
                }
            }
            <span class="keywordflow">if</span> (!found)
            {
                <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a> = <a class="code" href="_ieee80211_data_rate_8h.html#a1edaa1e64ed54f3ab94446d9fdf3970c" title="Bit rates for 802.11g.">BITRATES_80211g</a>[<a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>()-1];
                <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> = <a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>()-1;
            }
            found = <span class="keyword">false</span>;
            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>(); i++)
            {
                <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a> == <a class="code" href="_ieee80211_data_rate_8h.html#a1edaa1e64ed54f3ab94446d9fdf3970c" title="Bit rates for 802.11g.">BITRATES_80211g</a>[i])
                {
                    found = <span class="keyword">true</span>;
                    <span class="keywordflow">break</span>;
                }
            }
            <span class="keywordflow">if</span> (!found)
                <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a> = <a class="code" href="_ieee80211_data_rate_8h.html#a1edaa1e64ed54f3ab94446d9fdf3970c" title="Bit rates for 802.11g.">BITRATES_80211g</a>[0];
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (opMode == <span class="charliteral">&#39;a&#39;</span>)
        {
            <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> = 0;
            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>(); i++)
            {
                <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a> == <a class="code" href="_ieee80211_data_rate_8h.html#aff43b2fc7e875884c766efefce80dc74" title="Bit rates for 802.11a.">BITRATES_80211a</a>[i])
                {
                    found = <span class="keyword">true</span>;
                    <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> = i;
                    <span class="keywordflow">break</span>;
                }
            }
            <span class="keywordflow">if</span> (!found)
            {
                <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a> = <a class="code" href="_ieee80211_data_rate_8h.html#aff43b2fc7e875884c766efefce80dc74" title="Bit rates for 802.11a.">BITRATES_80211a</a>[<a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>()-1];
                <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> = <a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>()-1;
            }
            found = <span class="keyword">false</span>;
            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>(); i++)
            {
                <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a> == <a class="code" href="_ieee80211_data_rate_8h.html#aff43b2fc7e875884c766efefce80dc74" title="Bit rates for 802.11a.">BITRATES_80211a</a>[i])
                {
                    found = <span class="keyword">true</span>;
                    <span class="keywordflow">break</span>;
                }
            }
            <span class="keywordflow">if</span> (!found)
                <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a> = <a class="code" href="_ieee80211_data_rate_8h.html#aff43b2fc7e875884c766efefce80dc74" title="Bit rates for 802.11a.">BITRATES_80211a</a>[0];
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (opMode == <span class="charliteral">&#39;p&#39;</span>)
        {
            <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> = 0;
            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>(); i++)
            {
                <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a> == <a class="code" href="_ieee80211_data_rate_8h.html#ae2903ef1cee37083b2672ead3830e093" title="Bit rates for 802.11g.">BITRATES_80211p</a>[i])
                {
                    found = <span class="keyword">true</span>;
                    <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> = i;
                    <span class="keywordflow">break</span>;
                }
            }
            <span class="keywordflow">if</span> (!found)
            {
                <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a> = <a class="code" href="_ieee80211_data_rate_8h.html#ae2903ef1cee37083b2672ead3830e093" title="Bit rates for 802.11g.">BITRATES_80211p</a>[<a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>()-1];
                <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> = <a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>()-1;
            }
            found = <span class="keyword">false</span>;
            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>(); i++)
            {
                <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a> == <a class="code" href="_ieee80211_data_rate_8h.html#ae2903ef1cee37083b2672ead3830e093" title="Bit rates for 802.11g.">BITRATES_80211p</a>[i])
                {
                    found = <span class="keyword">true</span>;
                    <span class="keywordflow">break</span>;
                }
            }
            <span class="keywordflow">if</span> (!found)
                <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a> = <a class="code" href="_ieee80211_data_rate_8h.html#ae2903ef1cee37083b2672ead3830e093" title="Bit rates for 802.11g.">BITRATES_80211p</a>[0];
        }

        <span class="comment">// configure AutoBit Rate</span>
        <a class="code" href="class_ieee80211_mac.html#a4724f434c9447f8127bbe9ecf8959c4f">configureAutoBitRate</a>();
<span class="comment">//end auto rate code</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot; bitrate=&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>/1e6&lt;&lt;<span class="stringliteral">&quot;M IDLE=&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">IDLE</a>&lt;&lt;<span class="stringliteral">&quot; RECEIVE=&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daa07c35947e7029a7277a4a23db15b0a0b">RECEIVE</a>&lt;&lt;endl;

        <span class="keyword">const</span> <span class="keywordtype">char</span> *addressString = par(<span class="stringliteral">&quot;address&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57" title="MAC address.">address</a> = <a class="code" href="class_ieee80211_mac.html#af01cbb975be0e02f04d6f02647fd6081">isInterfaceRegistered</a>();
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57" title="MAC address.">address</a>.<a class="code" href="class_m_a_c_address.html#ae41af013d782b46483e7d0c84f0ed107" title="Returns true if all address bytes are zero.">isUnspecified</a>())
        {
            <span class="keywordflow">if</span> (!strcmp(addressString, <span class="stringliteral">&quot;auto&quot;</span>))
            {
                <span class="comment">// assign automatic address</span>
                <a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57" title="MAC address.">address</a> = <a class="code" href="class_m_a_c_address.html#a020d8e71aa50506e2b29a15833fedfd9" title="Generates a unique address which begins with 0a:aa and ends in a unique suffix.">MACAddress::generateAutoAddress</a>();
                <span class="comment">// change module parameter from &quot;auto&quot; to concrete address</span>
                par(<span class="stringliteral">&quot;address&quot;</span>).setStringValue(<a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57" title="MAC address.">address</a>.<a class="code" href="class_m_a_c_address.html#a5eed6450abcdd795b2a3d59828a29802" title="Converts address to a hex string.">str</a>().c_str());
            }
            <span class="keywordflow">else</span>
                <a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57" title="MAC address.">address</a>.<a class="code" href="class_m_a_c_address.html#a8098d36b9f4a40ef61e1a3cb62cb27dd" title="Converts address value from hex string (12 hex digits, may also contain spaces, hyphens and colons)...">setAddress</a>(addressString);
        }

        <span class="comment">// subscribe for the information of the carrier sense</span>
        <a class="code" href="structnb.html">nb</a>-&gt;subscribe(<span class="keyword">this</span>, <a class="code" href="_notifier_consts_8h.html#adf764cbdea00d65edcd07bb9953ad2b7aa6e69ccdaad903262ac00b89b6208a69">NF_RADIOSTATE_CHANGED</a>);

        <span class="comment">// initialize self messages</span>
        <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;SIFS&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;DIFS&quot;</span>);
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
        {
            <a class="code" href="class_ieee80211_mac.html#a52982392fb7e289c2f8cc9ec4c47ce2b">setEndAIFS</a>(i, <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;AIFS&quot;</span>, i));
            <a class="code" href="class_ieee80211_mac.html#af17b9fe952d892cff2f85dbe97425a1c">setEndBackoff</a>(i, <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;Backoff&quot;</span>, i));
        }
        <a class="code" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34" title="End of the Arbitration Inter-Frame Time period.">endTXOP</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;TXOP&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;Timeout&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a" title="End of medium reserve period (NAV) when two other nodes were communicating on the channel...">endReserve</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;Reserve&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40" title="Radio state change self message.">mediumStateChange</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;MediumStateChange&quot;</span>);

        <span class="comment">// interface</span>
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#af01cbb975be0e02f04d6f02647fd6081">isInterfaceRegistered</a>().isUnspecified())
            <a class="code" href="class_ieee80211_mac.html#a306f0e039efc2ede2e2e209bf02f7b1a">registerInterface</a>();

        <span class="comment">// obtain pointer to external queue</span>
        <a class="code" href="class_ieee80211_mac.html#a76503451f2ddc57bec7426c3f9f919ca">initializeQueueModule</a>();

        <span class="comment">// state variables</span>
        <a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.setName(<span class="stringliteral">&quot;Ieee80211Mac State Machine&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a> = <a class="code" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caad4632a6aa23ad2c585b22a7d823fd792" title="Distributed Coordination Function.">DCF</a>;
        <a class="code" href="class_ieee80211_mac.html#a109b2d75d8fc4201674478a72bb31762" title="Sequence number to be assigned to the next frame.">sequenceNumber</a> = 0;

        <a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0" title="XXX Remember for which AC we wait for ACK.">radioState</a> = <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">RadioState::IDLE</a>;
        <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#acfedb65b560767ae3701903e5dcdf141" title="Remember currentAC.">oldcurrentAC</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#aae4419ab39198abdf1fc8955b07e5e20" title="Indicates that the last frame received had bit errors in it or there was a collision during receiving...">lastReceiveFailed</a> = <span class="keyword">false</span>;
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
            <a class="code" href="class_ieee80211_mac.html#a97764bfd499bb2f781c55edffd0359b2">numDropped</a>(i) = 0;
        <a class="code" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f" title="True during network allocation period.">nav</a> = <span class="keyword">false</span>;
        <a class="code" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff" title="True if we are in txop bursting packets.">txop</a> = <span class="keyword">false</span>;
        <a class="code" href="class_ieee80211_mac.html#a82e1ab5d7dcef13a8fd670a6d4ed26fc">last</a> = 0;

        <a class="code" href="class_ieee80211_mac.html#af867e8336a2e4ec59e81f3fa628c877d">contI</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#a18ed7f494325bfce7e9d8202b17a6396">contJ</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#af754205c721d31e0013694d4900e1106">recvdThroughput</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#a1235ac69bf0f8224b85a65727845c530">_snr</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#a2ba2e2ad7c0755a57964a3ca70d2c1ad">samplingCoeff</a> = 50;


        <span class="comment">// statistics</span>
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
        {
            <a class="code" href="class_ieee80211_mac.html#a92d78e95b726f22b3ce726be0e6807fd">numRetry</a>(i) = 0;
            <a class="code" href="class_ieee80211_mac.html#a4b6a1ca005a57bfd5447c9a853d0247d">numSentWithoutRetry</a>(i) = 0;
            <a class="code" href="class_ieee80211_mac.html#a94fdb1fcc53581be97d70feee63a3ab6">numGivenUp</a>(i) = 0;
            <a class="code" href="class_ieee80211_mac.html#a33ead2b36b8c62088f7106b154af22af">numSent</a>(i) = 0;
            <a class="code" href="class_ieee80211_mac.html#abc98919400f5ba39dde97589f4a4c7f7">bites</a>(i) = 0;
            <a class="code" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">maxjitter</a>(i) = 0;
            <a class="code" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">minjitter</a>(i) = 0;
        }

        <a class="code" href="class_ieee80211_mac.html#a7cde61a60a0ba921bec433b5d1113c84">numCollision</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#aaf2d7e0cd701202eb765b1b9c77bb658">numInternalCollision</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#a44149d10cf8b6f6b1f906d68d2157714">numReceived</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#a82f4ea0e2f668f1ae81478595f446085">numSentMulticast</a> = -1; <span class="comment">//sorin</span>
        <a class="code" href="class_ieee80211_mac.html#a687d1cd47799dc6f23dba5fff9b65318">numReceivedMulticast</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#ac16d02e12179c33220ba6483b1ab724b">numBites</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#ac4bf79c580118820bdecd1a001711049">numSentTXOP</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#ac9f8379cbc211038c510bef1c11ee3d2">numReceivedOther</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#a4ac1aa9e7f916504cda9ab22991636ff">numAckSend</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#aab113076ebedf10680d4b5fd0753aea2">successCounter</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#a7dad9095f1d77e09887875ad87409da3">failedCounter</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#a43577335d5075e95b8df5b50dc4c0fed">recovery</a> = 0;
        <a class="code" href="structtimer.html">timer</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#a89c82053702cb058b0ae6bf7f0a835ba">timeStampLastMessageReceived</a> = 0;

        <a class="code" href="class_ieee80211_mac.html#a784de8a16601c48f1f792adc9a35c321">stateVector</a>.setName(<span class="stringliteral">&quot;State&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#a784de8a16601c48f1f792adc9a35c321">stateVector</a>.setEnum(<span class="stringliteral">&quot;Ieee80211Mac&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#a84539589b7715d29c69d1191a521f45b">radioStateVector</a>.setName(<span class="stringliteral">&quot;RadioState&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#a84539589b7715d29c69d1191a521f45b">radioStateVector</a>.setEnum(<span class="stringliteral">&quot;RadioState&quot;</span>);
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
        {
            EdcaOutVector outVectors;
            std::stringstream os;
            os&lt;&lt; i;
            std::string th = <span class="stringliteral">&quot;throughput AC&quot;</span>+os.str();
            std::string delay = <span class="stringliteral">&quot;Mac delay AC&quot;</span>+os.str();
            std::string jit = <span class="stringliteral">&quot;jitter AC&quot;</span>+os.str();
            outVectors.jitter = <span class="keyword">new</span> cOutVector(jit.c_str());
            outVectors.throughput = <span class="keyword">new</span> cOutVector(th.c_str());
            outVectors.macDelay = <span class="keyword">new</span> cOutVector(delay.c_str());
            <a class="code" href="class_ieee80211_mac.html#aa3aff37ddc0c81be4e3a8a8f27418f20">edcCAFOutVector</a>.push_back(outVectors);
        }
        <span class="comment">// Code to compute the throughput over a period of time</span>
        <a class="code" href="class_ieee80211_mac.html#a791b0124c72d0dc60dbc078412aab35b">throughputTimePeriod</a> = par(<span class="stringliteral">&quot;throughputTimePeriod&quot;</span>);
        <a class="code" href="class_ieee80211_mac.html#a58859ce182dc8bee111ae1099d42415e">recBytesOverPeriod</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#afdd5aa78a078969d42c37cd9ae95bcab">throughputLastPeriod</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#af6bf13854ffd2e58b9d536a1e808bbd8">throughputTimer</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a791b0124c72d0dc60dbc078412aab35b">throughputTimePeriod</a>&gt;0)
            <a class="code" href="class_ieee80211_mac.html#af6bf13854ffd2e58b9d536a1e808bbd8">throughputTimer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;throughput-timer&quot;</span>);
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#af6bf13854ffd2e58b9d536a1e808bbd8">throughputTimer</a>)
            scheduleAt(simTime()+<a class="code" href="class_ieee80211_mac.html#a791b0124c72d0dc60dbc078412aab35b">throughputTimePeriod</a>, <a class="code" href="class_ieee80211_mac.html#af6bf13854ffd2e58b9d536a1e808bbd8">throughputTimer</a>);
        <span class="comment">// end initialize variables throughput over a period of time</span>
        <span class="comment">// initialize watches</span>
        <a class="code" href="class_ieee80211_mac.html#a254d1148be2a6837f462d2e17d0c8b9b">validRecMode</a> = <span class="keyword">false</span>;
        <a class="code" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches</a>();
        <a class="code" href="class_ieee80211_mac.html#a70d16f3fdb285db5b2ae29300f9497c3">radioModule</a> = gate(<span class="stringliteral">&quot;lowerLayerOut&quot;</span>)-&gt;getNextGate()-&gt;getOwnerModule()-&gt;getId();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a76503451f2ddc57bec7426c3f9f919ca"></a><!-- doxytag: member="Ieee80211Mac::initializeQueueModule" ref="a76503451f2ddc57bec7426c3f9f919ca" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a76503451f2ddc57bec7426c3f9f919ca">Ieee80211Mac::initializeQueueModule</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// use of external queue module is optional -- find it if there&#39;s one specified</span>
    <span class="keywordflow">if</span> (par(<span class="stringliteral">&quot;queueModule&quot;</span>).<a class="code" href="_ned_functions_8cc.html#ac32e8a82d9c3e34351155e57642cdabf">stringValue</a>()[0])
    {
        cModule *module = getParentModule()-&gt;getSubmodule(par(<span class="stringliteral">&quot;queueModule&quot;</span>).<a class="code" href="_ned_functions_8cc.html#ac32e8a82d9c3e34351155e57642cdabf">stringValue</a>());
        <a class="code" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e" title="Passive queue module to request messages from.">queueModule</a> = check_and_cast&lt;<a class="code" href="class_i_passive_queue.html" title="Abstract interface for passive queues.">IPassiveQueue</a> *&gt;(module);

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Requesting first two frames from queue module\n&quot;</span>;
        <a class="code" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e" title="Passive queue module to request messages from.">queueModule</a>-&gt;<a class="code" href="class_i_passive_queue.html#af28ddf4ff33afab50f9d34d1b24e2f6d" title="The queue should send a packet whenever this method is invoked.">requestPacket</a>();
        <span class="comment">// needed for backoff: mandatory if next message is already present</span>
        <a class="code" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e" title="Passive queue module to request messages from.">queueModule</a>-&gt;<a class="code" href="class_i_passive_queue.html#af28ddf4ff33afab50f9d34d1b24e2f6d" title="The queue should send a packet whenever this method is invoked.">requestPacket</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad2f7920d160c73976da41c6f22b38c63"></a><!-- doxytag: member="Ieee80211Mac::initWatches" ref="ad2f7920d160c73976da41c6f22b38c63" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">Ieee80211Mac::initWatches</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// initialize watches</span>
     WATCH(<a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>);
     WATCH(<a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0" title="XXX Remember for which AC we wait for ACK.">radioState</a>);
     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
         WATCH(<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].<a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>);
     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
         WATCH(<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].<a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>);
     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
         WATCH(<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].<a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>);
     WATCH(<a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>);
     WATCH(<a class="code" href="class_ieee80211_mac.html#acfedb65b560767ae3701903e5dcdf141" title="Remember currentAC.">oldcurrentAC</a>);
     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
         WATCH_LIST(<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>);
     WATCH(<a class="code" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f" title="True during network allocation period.">nav</a>);
     WATCH(<a class="code" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff" title="True if we are in txop bursting packets.">txop</a>);

     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
         WATCH(<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].<a class="code" href="class_ieee80211_mac.html#a92d78e95b726f22b3ce726be0e6807fd">numRetry</a>);
     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
         WATCH(<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].<a class="code" href="class_ieee80211_mac.html#a4b6a1ca005a57bfd5447c9a853d0247d">numSentWithoutRetry</a>);
     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
         WATCH(<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].<a class="code" href="class_ieee80211_mac.html#a94fdb1fcc53581be97d70feee63a3ab6">numGivenUp</a>);
     WATCH(<a class="code" href="class_ieee80211_mac.html#a7cde61a60a0ba921bec433b5d1113c84">numCollision</a>);
     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
         WATCH(<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].<a class="code" href="class_ieee80211_mac.html#a33ead2b36b8c62088f7106b154af22af">numSent</a>);
     WATCH(<a class="code" href="class_ieee80211_mac.html#ac16d02e12179c33220ba6483b1ab724b">numBites</a>);
     WATCH(<a class="code" href="class_ieee80211_mac.html#ac4bf79c580118820bdecd1a001711049">numSentTXOP</a>);
     WATCH(<a class="code" href="class_ieee80211_mac.html#a44149d10cf8b6f6b1f906d68d2157714">numReceived</a>);
     WATCH(<a class="code" href="class_ieee80211_mac.html#a82f4ea0e2f668f1ae81478595f446085">numSentMulticast</a>);
     WATCH(<a class="code" href="class_ieee80211_mac.html#a687d1cd47799dc6f23dba5fff9b65318">numReceivedMulticast</a>);
     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
         WATCH(<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].<a class="code" href="class_ieee80211_mac.html#a97764bfd499bb2f781c55edffd0359b2">numDropped</a>);
     <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#af6bf13854ffd2e58b9d536a1e808bbd8">throughputTimer</a>)
         WATCH(<a class="code" href="class_ieee80211_mac.html#afdd5aa78a078969d42c37cd9ae95bcab">throughputLastPeriod</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a45baf5991b010588132ecfea105a17b0"></a><!-- doxytag: member="Ieee80211Mac::invalidateBackoffPeriod" ref="a45baf5991b010588132ecfea105a17b0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a45baf5991b010588132ecfea105a17b0">Ieee80211Mac::invalidateBackoffPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generates a new backoff period based on the contention window. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>() = -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab7893e721612a54d3a7e3dd6727af3ba"></a><!-- doxytag: member="Ieee80211Mac::isBackoffPending" ref="ab7893e721612a54d3a7e3dd6727af3ba" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="class_ieee80211_mac.html#ab7893e721612a54d3a7e3dd6727af3ba">Ieee80211Mac::isBackoffPending</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i&lt;<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size(); i++)
        {
            <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].<a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>)
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a4496ce674d2048d8deb18b277c7d7b25"></a><!-- doxytag: member="Ieee80211Mac::isBakoffMsg" ref="a4496ce674d2048d8deb18b277c7d7b25" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const bool <a class="el" href="class_ieee80211_mac.html#a4496ce674d2048d8deb18b277c7d7b25">Ieee80211Mac::isBakoffMsg</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size(); i++)
    {
        <span class="keywordflow">if</span> (msg==<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].<a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>)
           <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a331f759ba45d0d363362dce7d1b9f9b0"></a><!-- doxytag: member="Ieee80211Mac::isDataOrMgmtFrame" ref="a331f759ba45d0d363362dce7d1b9f9b0" args="(Ieee80211Frame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#a331f759ba45d0d363362dce7d1b9f9b0">Ieee80211Mac::isDataOrMgmtFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks if the frame is a data or management frame. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_data_or_mgmt_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataOrMgmtFrame</a>*<span class="keyword">&gt;</span>(frame);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae6912255bec9031597492000db0a5dd8"></a><!-- doxytag: member="Ieee80211Mac::isDuplicated" ref="ae6912255bec9031597492000db0a5dd8" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#ae6912255bec9031597492000db0a5dd8">Ieee80211Mac::isDuplicated</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a03a24ff3be5ea63f3e40bf5b56fc5baa">promiscousFrame()</a>, and <a class="el" href="class_ieee80211_mac.html#aee23d91230a4003a7e8f642f7e8f3f3f">sendUp()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a4aae6b9b700f7d85163553cece6f09d9" title="A list of last sender, sequence and fragment number tuples to identify duplicates, see spec 9.2.9.">duplicateDetect</a>) <span class="comment">// duplicate detection filter</span>
    {
        <a class="code" href="class_ieee80211_data_or_mgmt_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataOrMgmtFrame</a> *frame = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_data_or_mgmt_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataOrMgmtFrame</a>*<span class="keyword">&gt;</span>(msg);
        <span class="keywordflow">if</span> (frame)
        {
            Ieee80211ASFTupleList::iterator it = <a class="code" href="class_ieee80211_mac.html#af3cf1a0d1737d69c490ef2fdf9595f3f">asfTuplesList</a>.find(frame-&gt;<a class="code" href="class_ieee80211_two_address_frame.html#a88c59cc71e76df61f0418642f8381ee9">getTransmitterAddress</a>());
            <span class="keywordflow">if</span> (it == <a class="code" href="class_ieee80211_mac.html#af3cf1a0d1737d69c490ef2fdf9595f3f">asfTuplesList</a>.end())
            {
                Ieee80211ASFTuple tuple;
                tuple.receivedTime = simTime();
                tuple.sequenceNumber = frame-&gt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html#a91e2ab5b0af3aab1796f0f96163ee1af">getSequenceNumber</a>();
                tuple.fragmentNumber = frame-&gt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html#ad5917664ded0ef34e2ad4fb7f816f333">getFragmentNumber</a>();
                <a class="code" href="class_ieee80211_mac.html#af3cf1a0d1737d69c490ef2fdf9595f3f">asfTuplesList</a>.insert(std::pair&lt;MACAddress, Ieee80211ASFTuple&gt;(frame-&gt;<a class="code" href="class_ieee80211_two_address_frame.html#a88c59cc71e76df61f0418642f8381ee9">getTransmitterAddress</a>(), tuple));
            }
            <span class="keywordflow">else</span>
            {
                <span class="comment">// check if duplicate</span>
                <span class="keywordflow">if</span> (it-&gt;second.sequenceNumber == frame-&gt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html#a91e2ab5b0af3aab1796f0f96163ee1af">getSequenceNumber</a>()
                        &amp;&amp; it-&gt;second.fragmentNumber == frame-&gt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html#ad5917664ded0ef34e2ad4fb7f816f333">getFragmentNumber</a>())
                {
                    <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }
                <span class="keywordflow">else</span>
                {
                    <span class="comment">// actualize</span>
                    it-&gt;second.sequenceNumber = frame-&gt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html#a91e2ab5b0af3aab1796f0f96163ee1af">getSequenceNumber</a>();
                    it-&gt;second.fragmentNumber = frame-&gt;<a class="code" href="class_ieee80211_data_or_mgmt_frame.html#ad5917664ded0ef34e2ad4fb7f816f333">getFragmentNumber</a>();
                    it-&gt;second.receivedTime = simTime();
                }
            }
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6a44f63a391702d7e31078eae7fe453b"></a><!-- doxytag: member="Ieee80211Mac::isForUs" ref="a6a44f63a391702d7e31078eae7fe453b" args="(Ieee80211Frame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b">Ieee80211Mac::isForUs</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if message destination address is ours. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, and <a class="el" href="class_ieee80211_mac.html#a21662171dd8c6356df3c8b050d7c9414">scheduleReservePeriod()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> frame &amp;&amp; frame-&gt;getReceiverAddress() == <a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57" title="MAC address.">address</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af01cbb975be0e02f04d6f02647fd6081"></a><!-- doxytag: member="Ieee80211Mac::isInterfaceRegistered" ref="af01cbb975be0e02f04d6f02647fd6081" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_m_a_c_address.html">MACAddress</a> &amp; <a class="el" href="class_ieee80211_mac.html#af01cbb975be0e02f04d6f02647fd6081">Ieee80211Mac::isInterfaceRegistered</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!par(<span class="stringliteral">&quot;multiMac&quot;</span>).boolValue())
        <span class="keywordflow">return</span> <a class="code" href="class_m_a_c_address.html#a9083fdb636ab09f77e7af806f2d471b6" title="The unspecified MAC address, 00:00:00:00:00:00.">MACAddress::UNSPECIFIED_ADDRESS</a>;

    <a class="code" href="class_i_interface_table.html" title="A C++ interface to abstract the functionality of InterfaceTable.">IInterfaceTable</a> *ift = <a class="code" href="class_interface_table_access.html" title="Gives access to IInterfaceTable.">InterfaceTableAccess</a>().<a class="code" href="class_module_access.html#a29cf34153d891d2cd4b5bd4aadd04b1d">getIfExists</a>();
    <span class="keywordflow">if</span> (!ift)
        <span class="keywordflow">return</span> <a class="code" href="class_m_a_c_address.html#a9083fdb636ab09f77e7af806f2d471b6" title="The unspecified MAC address, 00:00:00:00:00:00.">MACAddress::UNSPECIFIED_ADDRESS</a>;
    <span class="keywordtype">char</span> *interfaceName = <span class="keyword">new</span> <span class="keywordtype">char</span>[strlen(getParentModule()-&gt;getFullName()) + 1];
    <span class="keywordtype">char</span> *d = interfaceName;
    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">char</span> *s = getParentModule()-&gt;getFullName(); *s; s++)
        <span class="keywordflow">if</span> (isalnum(*s))
            *d++ = *s;
    *d = <span class="charliteral">&#39;\0&#39;</span>;
    <a class="code" href="class_interface_entry.html" title="Interface entry for the interface table in IInterfaceTable.">InterfaceEntry</a> * e = ift-&gt;<a class="code" href="class_i_interface_table.html#a8ad86ee823d6200b4f558383b39af658" title="Returns an interface given by its name.">getInterfaceByName</a>(interfaceName);
    <span class="keyword">delete</span> [] interfaceName;
    <span class="keywordflow">if</span> (e)
        <span class="keywordflow">return</span> e-&gt;<a class="code" href="class_interface_entry.html#af8004a12e9aac171699ff1f7f08ee4c4">getMacAddress</a>();
    <span class="keywordflow">return</span> <a class="code" href="class_m_a_c_address.html#a9083fdb636ab09f77e7af806f2d471b6" title="The unspecified MAC address, 00:00:00:00:00:00.">MACAddress::UNSPECIFIED_ADDRESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac0b29b4f8c930e44e5dd062b79e394c0"></a><!-- doxytag: member="Ieee80211Mac::isInvalidBackoffPeriod" ref="ac0b29b4f8c930e44e5dd062b79e394c0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#ac0b29b4f8c930e44e5dd062b79e394c0">Ieee80211Mac::isInvalidBackoffPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>() == -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa4550d6a69c5e5a56d2a72ac0dc86729"></a><!-- doxytag: member="Ieee80211Mac::isMediumFree" ref="aa4550d6a69c5e5a56d2a72ac0dc86729" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729">Ieee80211Mac::isMediumFree</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tells if the medium is free according to the physical and virtual carrier sense algorithm. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, and <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0" title="XXX Remember for which AC we wait for ACK.">radioState</a> == <a class="code" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449aeb600ab2fbbbbc2d12d874edb9320ec0">RadioState::IDLE</a> &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a" title="End of medium reserve period (NAV) when two other nodes were communicating on the channel...">endReserve</a>-&gt;isScheduled();
}
</pre></div>
</div>
</div>
<a class="anchor" id="adf18b82f7ec2838535e84fba8ef43f3e"></a><!-- doxytag: member="Ieee80211Mac::isMediumStateChange" ref="adf18b82f7ec2838535e84fba8ef43f3e" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#adf18b82f7ec2838535e84fba8ef43f3e">Ieee80211Mac::isMediumStateChange</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Used by the state machine to identify medium state change events. </p>
<p>This message is currently optimized away and not sent through the kernel. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> msg == <a class="code" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40" title="Radio state change self message.">mediumStateChange</a> || (msg == <a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a" title="End of medium reserve period (NAV) when two other nodes were communicating on the channel...">endReserve</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0" title="XXX Remember for which AC we wait for ACK.">radioState</a> == <a class="code" href="class_ieee80211_mac.html#a7c7e301f779c29eb446b9a06f74020daae7e75316d129fb411aa5a21ff03ddec5">RadioState::IDLE</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad5f07fdbe9b2e50329534eceb5772f52"></a><!-- doxytag: member="Ieee80211Mac::isMsgAIFS" ref="ad5f07fdbe9b2e50329534eceb5772f52" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#ad5f07fdbe9b2e50329534eceb5772f52">Ieee80211Mac::isMsgAIFS</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks if the message is endAIFS and set currentAC. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
        <span class="keywordflow">if</span> (msg == <a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(i))
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9776e6c61ac04018cfa8ca659e688e73"></a><!-- doxytag: member="Ieee80211Mac::isMulticast" ref="a9776e6c61ac04018cfa8ca659e688e73" args="(Ieee80211Frame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#a9776e6c61ac04018cfa8ca659e688e73">Ieee80211Mac::isMulticast</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if message is a multicast message. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">buildDataFrame()</a>, <a class="el" href="class_ieee80211_mac.html#ab34517c360aa546041515d97c354dd43">computeBackoffPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> frame &amp;&amp; frame-&gt;getReceiverAddress().isMulticast();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9c499d1e9e72020fe52e7c39ac4e8759"></a><!-- doxytag: member="Ieee80211Mac::isSentByUs" ref="a9c499d1e9e72020fe52e7c39ac4e8759" args="(Ieee80211Frame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#a9c499d1e9e72020fe52e7c39ac4e8759">Ieee80211Mac::isSentByUs</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if message source address is ours. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{

    <span class="keywordflow">if</span> (dynamic_cast&lt;Ieee80211DataOrMgmtFrame *&gt;(frame))
    {
        <span class="comment">//EV&lt;&lt;&quot;ad3 &quot;&lt;&lt;((Ieee80211DataOrMgmtFrame *)frame)-&gt;getAddress3();</span>
        <span class="comment">//EV&lt;&lt;&quot;myad &quot;&lt;&lt;address&lt;&lt;endl;</span>
        <span class="keywordflow">if</span> ( ((<a class="code" href="class_ieee80211_data_or_mgmt_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataOrMgmtFrame</a> *)frame)-&gt;getAddress3() == <a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57" title="MAC address.">address</a>)<span class="comment">//received frame sent by us</span>
            <span class="keywordflow">return</span> 1;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot;Cast failed&quot;</span>&lt;&lt;endl;

    <span class="keywordflow">return</span> 0;

}
</pre></div>
</div>
</div>
<a class="anchor" id="aee1c346611b9f5515aeadded10d96ca0"></a><!-- doxytag: member="Ieee80211Mac::jitter" ref="aee1c346611b9f5515aeadded10d96ca0" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector * <a class="el" href="class_ieee80211_mac.html#aee1c346611b9f5515aeadded10d96ca0">Ieee80211Mac::jitter</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#aa3aff37ddc0c81be4e3a8a8f27418f20">edcCAFOutVector</a>[i].jitter;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0cae572eab527e836aadae2ef9df5b3d"></a><!-- doxytag: member="Ieee80211Mac::logState" ref="a0cae572eab527e836aadae2ef9df5b3d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">Ieee80211Mac::logState</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Logs all state information. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::string a[10];
    std::string b[10];
    std::string medium = <span class="stringliteral">&quot;busy&quot;</span>;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;10; i++)
    {
        a[i] = <span class="stringliteral">&quot;&quot;</span>;
        b[i] = <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729" title="Tells if the medium is free according to the physical and virtual carrier sense algorithm.">isMediumFree</a>())
        medium = <span class="stringliteral">&quot;free&quot;</span>;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>(i)-&gt;isScheduled())
            b[i] = <span class="stringliteral">&quot;scheduled&quot;</span>;
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(i)-&gt;isScheduled())
            a[i] = <span class="stringliteral">&quot;scheduled&quot;</span>;
    }

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>  &lt;&lt; <span class="stringliteral">&quot;# state information: mode = &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#ad717066cb5cc83f789b4abbe28d311d7">modeName</a>(<a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a>) &lt;&lt; <span class="stringliteral">&quot;, state = &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">fsm</a>.getStateName();
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;, backoff 0..&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()&lt;&lt;<span class="stringliteral">&quot; = &quot;</span>;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
         <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>(i) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt;  <span class="stringliteral">&quot;\n# backoffPeriod 0..&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()&lt;&lt;<span class="stringliteral">&quot; = &quot;</span>;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
         <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>(i) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;\n# retryCounter 0..&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()&lt;&lt;<span class="stringliteral">&quot; = &quot;</span>;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
         <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>(i) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;, radioState = &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0" title="XXX Remember for which AC we wait for ACK.">radioState</a> &lt;&lt; <span class="stringliteral">&quot;, nav = &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f" title="True during network allocation period.">nav</a> &lt;&lt;  <span class="stringliteral">&quot;,txop is &quot;</span>&lt;&lt; <a class="code" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff" title="True if we are in txop bursting packets.">txop</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;#queue size 0..&quot;</span>&lt;&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()&lt;&lt;<span class="stringliteral">&quot; = &quot;</span>;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>(i)-&gt;size() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;, medium is &quot;</span> &lt;&lt; medium &lt;&lt; <span class="stringliteral">&quot;, scheduled AIFS are &quot;</span>;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;(&quot;</span> &lt;&lt; a[i] &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;, scheduled backoff are &quot;</span>;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;(&quot;</span> &lt;&lt; b[i] &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;\n# currentAC: &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> &lt;&lt; <span class="stringliteral">&quot;, oldcurrentAC: &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#acfedb65b560767ae3701903e5dcdf141" title="Remember currentAC.">oldcurrentAC</a>;
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>() != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
         <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;\n# current transmission: &quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()-&gt;getId();
    <span class="keywordflow">else</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;\n# current transmission: none&quot;</span>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; endl;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac4dab428b184257867acca0349bc187c"></a><!-- doxytag: member="Ieee80211Mac::macDelay" ref="ac4dab428b184257867acca0349bc187c" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector * <a class="el" href="class_ieee80211_mac.html#ac4dab428b184257867acca0349bc187c">Ieee80211Mac::macDelay</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#aa3aff37ddc0c81be4e3a8a8f27418f20">edcCAFOutVector</a>[i].macDelay;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a692ea7349e92100524b65eb15649c0ea"></a><!-- doxytag: member="Ieee80211Mac::mappingAccessCategory" ref="a692ea7349e92100524b65eb15649c0ea" args="(Ieee80211DataOrMgmtFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a692ea7349e92100524b65eb15649c0ea">Ieee80211Mac::mappingAccessCategory</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Mapping to access categories. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a3c78df80f39331fe0c35a19b2a991714">handleUpperMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> isDataFrame = (<span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_data_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataFrame</a> *<span class="keyword">&gt;</span>(frame) != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);

    <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = <a class="code" href="class_ieee80211_mac.html#adeba876dd2315568f2ae52007c9a4106" title="Arbitration interframe space number.">classifier</a> ? <a class="code" href="class_ieee80211_mac.html#adeba876dd2315568f2ae52007c9a4106" title="Arbitration interframe space number.">classifier</a>-&gt;<a class="code" href="class_i_qo_s_classifier.html#a0803b87c5c372f68188ba108b03e410c" title="The method should return the priority (the index of subqueue) for the given packet, a value between 0 and getNumQueues()-1 (inclusive), with 0 representing the highest priority.">classifyPacket</a>(frame) : 0;

    <span class="comment">// check for queue overflow</span>
    <span class="keywordflow">if</span> (isDataFrame &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a06b55f6481683d64db13605b27b9537a" title="Maximum number of frames in the queue; should be set in the omnetpp.ini.">maxQueueSize</a> &amp;&amp; (<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#aa6547247b1a7c9673b10647379ae8738">transmissionQueueSize</a>() &gt;= <a class="code" href="class_ieee80211_mac.html#a06b55f6481683d64db13605b27b9537a" title="Maximum number of frames in the queue; should be set in the omnetpp.ini.">maxQueueSize</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;message &quot;</span> &lt;&lt; frame &lt;&lt; <span class="stringliteral">&quot; received from higher layer but AC queue is full, dropping message\n&quot;</span>;
        <a class="code" href="class_ieee80211_mac.html#a97764bfd499bb2f781c55edffd0359b2">numDropped</a>()++;
        <span class="keyword">delete</span> frame;
        <span class="keywordflow">return</span> 200;
    }
    <span class="keywordflow">if</span> (isDataFrame)
    {
        <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#afa6210be8edc347e37ae15a2aaa0148c">prioritizeMulticast</a>  || !frame-&gt;<a class="code" href="class_ieee80211_frame.html#a342fbce2fe9bff7e0894e8ee1cf8da36">getReceiverAddress</a>().<a class="code" href="class_m_a_c_address.html#aec80ce7ee8f529716e4b9354e93ca3c0" title="Returns true if this is a multicast logical address (first byte&#39;s lsb is 1).">isMulticast</a>() || <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;size() &lt; 2)
            <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;push_back(frame);
        <span class="keywordflow">else</span>
        {
            <span class="comment">// if the last frame is management insert here</span>
            <a class="code" href="class_ieee80211_data_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataFrame</a> * frameAux = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_data_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211DataFrame</a> *<span class="keyword">&gt;</span>(<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;back());
            <span class="keywordflow">if</span> ((frameAux == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) || (frameAux &amp;&amp; frameAux-&gt;<a class="code" href="class_ieee80211_frame.html#a342fbce2fe9bff7e0894e8ee1cf8da36">getReceiverAddress</a>().<a class="code" href="class_m_a_c_address.html#aec80ce7ee8f529716e4b9354e93ca3c0" title="Returns true if this is a multicast logical address (first byte&#39;s lsb is 1).">isMulticast</a>()))
                <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;push_back(frame);
            <span class="keywordflow">else</span>
            {
                <span class="comment">// in other case search the possition</span>
                std::list&lt;Ieee80211DataOrMgmtFrame*&gt;::iterator p = <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;end();
                <span class="keywordflow">while</span> ((*p)-&gt;getReceiverAddress().isMulticast() &amp;&amp; (p != <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;begin())) <span class="comment">// search the first broadcast frame</span>
                    {
                    <span class="keywordflow">if</span> (dynamic_cast&lt;Ieee80211DataFrame *&gt;(*p) == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
                        <span class="keywordflow">break</span>;
                    p--;
                    }
                p++;
                <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;insert(p, frame);
            }
        }
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;<a class="code" href="namespace_const_type.html#a292c6824a659d30847032a3c0d1c0217">empty</a>() || <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;size() == 1)
        {
            <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;push_back(frame);
        }
        <span class="keywordflow">else</span>
        {
            std::list&lt;Ieee80211DataOrMgmtFrame*&gt;::iterator p;
            <span class="comment">//we don&#39;t know if first frame in the queue is in middle of transmission</span>
            <span class="comment">//so for sure we placed it on second place</span>
            p = <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;begin();
            p++;
            <span class="keywordflow">while</span> ((dynamic_cast&lt;Ieee80211DataFrame *&gt; (*p) == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &amp;&amp; (p != <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;end())) <span class="comment">// search the first not management frame</span>
                p++;
            <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;insert(p, frame);
        }
    }
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;frame classified as access category &quot;</span>&lt;&lt; <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> &lt;&lt;<span class="stringliteral">&quot; (0 background, 1 best effort, 2 video, 3 voice)\n&quot;</span>;
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aef6b1279642200505ffe2117ecdb5b76"></a><!-- doxytag: member="Ieee80211Mac::maxjitter" ref="aef6b1279642200505ffe2117ecdb5b76" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t &amp; <a class="el" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">Ieee80211Mac::maxjitter</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].maxjitter;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a37117c918d06f93034fbf277753cde9b"></a><!-- doxytag: member="Ieee80211Mac::minjitter" ref="a37117c918d06f93034fbf277753cde9b" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t &amp; <a class="el" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">Ieee80211Mac::minjitter</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].minjitter;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad717066cb5cc83f789b4abbe28d311d7"></a><!-- doxytag: member="Ieee80211Mac::modeName" ref="ad717066cb5cc83f789b4abbe28d311d7" args="(int mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * <a class="el" href="class_ieee80211_mac.html#ad717066cb5cc83f789b4abbe28d311d7">Ieee80211Mac::modeName</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#define CASE(x) case x: s=#x; break</span>
<span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *s = <span class="stringliteral">&quot;???&quot;</span>;
    <span class="keywordflow">switch</span> (<a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a>)
    {
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caad4632a6aa23ad2c585b22a7d823fd792" title="Distributed Coordination Function.">DCF</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caa3a0563a9327d929352635290f322e189" title="Point Coordination Function.">PCF</a>);
    }
    <span class="keywordflow">return</span> s;
<span class="preprocessor">#undef CASE</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a567f98ee5373f5996f0f40ea813859d0"></a><!-- doxytag: member="Ieee80211Mac::needNormalFallback" ref="a567f98ee5373f5996f0f40ea813859d0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#a567f98ee5373f5996f0f40ea813859d0">Ieee80211Mac::needNormalFallback</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> retryMod = (<a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>() - 1) % 2;
    <span class="keywordflow">if</span> (retryMod == 1)
    {
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ade04456dc6c3a954a263c65ebb7ad678"></a><!-- doxytag: member="Ieee80211Mac::needRecoveryFallback" ref="ade04456dc6c3a954a263c65ebb7ad678" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#ade04456dc6c3a954a263c65ebb7ad678">Ieee80211Mac::needRecoveryFallback</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>() == 1)
    {
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab61f0fc949ca3c755c8028dc2239fda2"></a><!-- doxytag: member="Ieee80211Mac::numCategories" ref="ab61f0fc949ca3c755c8028dc2239fda2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">Ieee80211Mac::numCategories</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a80a6ffa55936b6ee00a09c45cf82aaf0">cancelBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#accd0c207251e64841e545a538a0d5e13">decreaseBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a9820b65e4aa7296332430bb5a35bf68f">finish()</a>, <a class="el" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#a3c78df80f39331fe0c35a19b2a991714">handleUpperMsg()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, <a class="el" href="class_ieee80211_mac.html#ad5f07fdbe9b2e50329534eceb5772f52">isMsgAIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>, <a class="el" href="class_ieee80211_mac.html#a4b6a1ca005a57bfd5447c9a853d0247d">numSentWithoutRetry()</a>, <a class="el" href="class_ieee80211_mac.html#af9ffa2b13e0336e9cc15334dea0122da">popTransmissionQueue()</a>, <a class="el" href="class_ieee80211_mac.html#a2e885fc167155dfd1e9ecbf2d0058807">scheduleAIFSPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a2c8b0bfbaafaf1b4180a636d3e4711b0">transmissionQueueEmpty()</a>, and <a class="el" href="class_ieee80211_mac.html#aa6547247b1a7c9673b10647379ae8738">transmissionQueueSize()</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size();}
</pre></div>
</div>
</div>
<a class="anchor" id="a97764bfd499bb2f781c55edffd0359b2"></a><!-- doxytag: member="Ieee80211Mac::numDropped" ref="a97764bfd499bb2f781c55edffd0359b2" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long &amp; <a class="el" href="class_ieee80211_mac.html#a97764bfd499bb2f781c55edffd0359b2">Ieee80211Mac::numDropped</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9820b65e4aa7296332430bb5a35bf68f">finish()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, and <a class="el" href="class_ieee80211_mac.html#a692ea7349e92100524b65eb15649c0ea">mappingAccessCategory()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].numDropped;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a94fdb1fcc53581be97d70feee63a3ab6"></a><!-- doxytag: member="Ieee80211Mac::numGivenUp" ref="a94fdb1fcc53581be97d70feee63a3ab6" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long &amp; <a class="el" href="class_ieee80211_mac.html#a94fdb1fcc53581be97d70feee63a3ab6">Ieee80211Mac::numGivenUp</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9820b65e4aa7296332430bb5a35bf68f">finish()</a>, <a class="el" href="class_ieee80211_mac.html#a793227beb883e6f0f0b5c993aa6b7f56">giveUpCurrentTransmission()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].numGivenUp;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a71351c92bb5234f62edb24b1a0f1f1b7"></a><!-- doxytag: member="Ieee80211Mac::numInitStages" ref="a71351c92bb5234f62edb24b1a0f1f1b7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int <a class="el" href="class_ieee80211_mac.html#a71351c92bb5234f62edb24b1a0f1f1b7">Ieee80211Mac::numInitStages</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialization of the module and its variables. </p>
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> 2;}
</pre></div>
</div>
</div>
<a class="anchor" id="a92d78e95b726f22b3ce726be0e6807fd"></a><!-- doxytag: member="Ieee80211Mac::numRetry" ref="a92d78e95b726f22b3ce726be0e6807fd" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long &amp; <a class="el" href="class_ieee80211_mac.html#a92d78e95b726f22b3ce726be0e6807fd">Ieee80211Mac::numRetry</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9820b65e4aa7296332430bb5a35bf68f">finish()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, and <a class="el" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].numRetry;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a33ead2b36b8c62088f7106b154af22af"></a><!-- doxytag: member="Ieee80211Mac::numSent" ref="a33ead2b36b8c62088f7106b154af22af" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long &amp; <a class="el" href="class_ieee80211_mac.html#a33ead2b36b8c62088f7106b154af22af">Ieee80211Mac::numSent</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9820b65e4aa7296332430bb5a35bf68f">finish()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].numSent;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4b6a1ca005a57bfd5447c9a853d0247d"></a><!-- doxytag: member="Ieee80211Mac::numSentWithoutRetry" ref="a4b6a1ca005a57bfd5447c9a853d0247d" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long &amp; <a class="el" href="class_ieee80211_mac.html#a4b6a1ca005a57bfd5447c9a853d0247d">Ieee80211Mac::numSentWithoutRetry</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9820b65e4aa7296332430bb5a35bf68f">finish()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].numSentWithoutRetry;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af9ffa2b13e0336e9cc15334dea0122da"></a><!-- doxytag: member="Ieee80211Mac::popTransmissionQueue" ref="af9ffa2b13e0336e9cc15334dea0122da" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#af9ffa2b13e0336e9cc15334dea0122da">Ieee80211Mac::popTransmissionQueue</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes frame at the front of queue. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ae7e7f22c4c76ac7be8ffff853cbf7503">finishCurrentTransmission()</a>, and <a class="el" href="class_ieee80211_mac.html#a793227beb883e6f0f0b5c993aa6b7f56">giveUpCurrentTransmission()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;dropping frame from transmission queue\n&quot;</span>;
    <a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *temp = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *<span class="keyword">&gt;</span>(<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;front());
    ASSERT(!<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;<a class="code" href="namespace_const_type.html#a292c6824a659d30847032a3c0d1c0217">empty</a>());
    <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;pop_front();
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e" title="Passive queue module to request messages from.">queueModule</a>)
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()==1)
        {
        <span class="comment">// the module are continuously asking for packets</span>
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;requesting another frame from queue module\n&quot;</span>;
            <a class="code" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e" title="Passive queue module to request messages from.">queueModule</a>-&gt;<a class="code" href="class_i_passive_queue.html#af28ddf4ff33afab50f9d34d1b24e2f6d" title="The queue should send a packet whenever this method is invoked.">requestPacket</a>();
         }
         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()&gt;1 &amp;&amp; (<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#aa6547247b1a7c9673b10647379ae8738">transmissionQueueSize</a>()==<a class="code" href="class_ieee80211_mac.html#a06b55f6481683d64db13605b27b9537a" title="Maximum number of frames in the queue; should be set in the omnetpp.ini.">maxQueueSize</a>-1)
         {
         <span class="comment">// Now exist a empty frame space</span>
         <span class="comment">// the module are continuously asking for packets</span>
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;requesting another frame from queue module\n&quot;</span>;
            <a class="code" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e" title="Passive queue module to request messages from.">queueModule</a>-&gt;<a class="code" href="class_i_passive_queue.html#af28ddf4ff33afab50f9d34d1b24e2f6d" title="The queue should send a packet whenever this method is invoked.">requestPacket</a>();
         }
    }
    <span class="keyword">delete</span> temp;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a03a24ff3be5ea63f3e40bf5b56fc5baa"></a><!-- doxytag: member="Ieee80211Mac::promiscousFrame" ref="a03a24ff3be5ea63f3e40bf5b56fc5baa" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a03a24ff3be5ea63f3e40bf5b56fc5baa">Ieee80211Mac::promiscousFrame</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#ae6912255bec9031597492000db0a5dd8">isDuplicated</a>(msg)) <span class="comment">// duplicate detection filter</span>
        <a class="code" href="structnb.html">nb</a>-&gt;fireChangeNotification(<a class="code" href="_notifier_consts_8h.html#adf764cbdea00d65edcd07bb9953ad2b7ad8c6313ae7e9b91c1bf2c32c34e7c39d">NF_LINK_PROMISCUOUS</a>, msg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6844cdfc80c0c0f6b2faadff8a9abef9"></a><!-- doxytag: member="Ieee80211Mac::receiveChangeNotification" ref="a6844cdfc80c0c0f6b2faadff8a9abef9" args="(int category, const cObject *details)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a6844cdfc80c0c0f6b2faadff8a9abef9">Ieee80211Mac::receiveChangeNotification</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cObject *&#160;</td>
          <td class="paramname"><em>details</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called by the <a class="el" href="class_notification_board.html" title="Acts as a intermediary between module where state changes can occur and modules which are interested ...">NotificationBoard</a> whenever a change occurs we're interested in. </p>

<p>Implements <a class="el" href="class_i_notifiable.html#a26809ed59b2ff3e9379b1b4440227a8d">INotifiable</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();
    <a class="code" href="_notifier_consts_8cc.html#a97f9fe597921659345dbf486bc49069c" title="Utility function.">printNotificationBanner</a>(category, details);

    <span class="keywordflow">if</span> (category == <a class="code" href="_notifier_consts_8h.html#adf764cbdea00d65edcd07bb9953ad2b7aa6e69ccdaad903262ac00b89b6208a69">NF_RADIOSTATE_CHANGED</a>)
    {
        <a class="code" href="class_radio_state.html" title="Holds the current state and other properties of the radio.">RadioState</a> * rstate = check_and_cast&lt;<a class="code" href="class_radio_state.html" title="Holds the current state and other properties of the radio.">RadioState</a> *&gt;(details);
        <span class="keywordflow">if</span> (rstate-&gt;<a class="code" href="class_radio_state.html#aab00b23164311f008b0995d865b65474" title="id of the radio/snrEval module -- identifies the radio in case there&#39;re more than one in the host...">getRadioId</a>()!=<a class="code" href="class_ieee80211_mac.html#ad207f6ec6848d6f2b8aa95d21a8c0897">getRadioModuleId</a>())
            <span class="keywordflow">return</span>;

        <a class="code" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449" title="Possible states of the radio.">RadioState::State</a> newRadioState = rstate-&gt;<a class="code" href="class_radio_state.html#ab714f16be9aaf5b6789801854f859883" title="Returns radio state.">getState</a>();



        <span class="comment">// FIXME: double recording, because there&#39;s no sample hold in the gui</span>
        <a class="code" href="class_ieee80211_mac.html#a84539589b7715d29c69d1191a521f45b">radioStateVector</a>.record(<a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0" title="XXX Remember for which AC we wait for ACK.">radioState</a>);
        <a class="code" href="class_ieee80211_mac.html#a84539589b7715d29c69d1191a521f45b">radioStateVector</a>.record(newRadioState);

        <a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0" title="XXX Remember for which AC we wait for ACK.">radioState</a> = newRadioState;

        <a class="code" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2" title="Handle all kinds of messages and notifications with the state machine.">handleWithFSM</a>(<a class="code" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40" title="Radio state change self message.">mediumStateChange</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a306f0e039efc2ede2e2e209bf02f7b1a"></a><!-- doxytag: member="Ieee80211Mac::registerInterface" ref="a306f0e039efc2ede2e2e209bf02f7b1a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a306f0e039efc2ede2e2e209bf02f7b1a">Ieee80211Mac::registerInterface</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_i_interface_table.html" title="A C++ interface to abstract the functionality of InterfaceTable.">IInterfaceTable</a> *ift = <a class="code" href="class_interface_table_access.html" title="Gives access to IInterfaceTable.">InterfaceTableAccess</a>().<a class="code" href="class_module_access.html#a29cf34153d891d2cd4b5bd4aadd04b1d">getIfExists</a>();
    <span class="keywordflow">if</span> (!ift)
        <span class="keywordflow">return</span>;

    <a class="code" href="class_interface_entry.html" title="Interface entry for the interface table in IInterfaceTable.">InterfaceEntry</a> *e = <span class="keyword">new</span> <a class="code" href="class_interface_entry.html" title="Interface entry for the interface table in IInterfaceTable.">InterfaceEntry</a>(<span class="keyword">this</span>);

    <span class="comment">// interface name: NetworkInterface module&#39;s name without special characters ([])</span>
    <span class="keywordtype">char</span> *interfaceName = <span class="keyword">new</span> <span class="keywordtype">char</span>[strlen(getParentModule()-&gt;getFullName()) + 1];
    <span class="keywordtype">char</span> *d = interfaceName;
    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">char</span> *s = getParentModule()-&gt;getFullName(); *s; s++)
        <span class="keywordflow">if</span> (isalnum(*s))
            *d++ = *s;
    *d = <span class="charliteral">&#39;\0&#39;</span>;

    e-&gt;<a class="code" href="class_interface_entry.html#af9ca0c7af3a0f45e7d7102e6cc2b089e">setName</a>(interfaceName);
    <span class="keyword">delete</span> [] interfaceName;

    <span class="comment">// address</span>
    e-&gt;<a class="code" href="class_interface_entry.html#ac10c228cc65a2c799c798ca75de593dc">setMACAddress</a>(<a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57" title="MAC address.">address</a>);
    e-&gt;<a class="code" href="class_interface_entry.html#a7fad57b268a57abe1de80d30299d4c45">setInterfaceToken</a>(<a class="code" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57" title="MAC address.">address</a>.<a class="code" href="class_m_a_c_address.html#af646c7d6a3dbe4a94465fd3ec144f08f" title="Create interface identifier (IEEE EUI-64) which can be used by IPv6 stateless address autoconfigurati...">formInterfaceIdentifier</a>());

    <span class="comment">// FIXME: MTU on 802.11 = ?</span>
    e-&gt;<a class="code" href="class_interface_entry.html#aaebcf5970e29877b0a4b68ddaaaf540f">setMtu</a>(par(<span class="stringliteral">&quot;mtu&quot;</span>).longValue());

    <span class="comment">// capabilities</span>
    e-&gt;<a class="code" href="class_interface_entry.html#a6f9c79da187d1d56c028b616f3be28fe">setBroadcast</a>(<span class="keyword">true</span>);
    e-&gt;<a class="code" href="class_interface_entry.html#a0b9fca7071b37185a18b6693c3502f69">setMulticast</a>(<span class="keyword">true</span>);
    e-&gt;<a class="code" href="class_interface_entry.html#af207b6ea20ecd9bedd4acfae50a3500f">setPointToPoint</a>(<span class="keyword">false</span>);

    <span class="comment">// add</span>
    ift-&gt;<a class="code" href="class_i_interface_table.html#a7b54fe5e63bb7d4c76483b7fa27e506f" title="Adds an interface.">addInterface</a>(e);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae04ce2e36d6e1271b6c43ba302b244b1"></a><!-- doxytag: member="Ieee80211Mac::removeOldTuplesFromDuplicateMap" ref="ae04ce2e36d6e1271b6c43ba302b244b1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#ae04ce2e36d6e1271b6c43ba302b244b1">Ieee80211Mac::removeOldTuplesFromDuplicateMap</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a4aae6b9b700f7d85163553cece6f09d9" title="A list of last sender, sequence and fragment number tuples to identify duplicates, see spec 9.2.9.">duplicateDetect</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a57492265daaf979dabb33ad6467b6bc4">lastTimeDelete</a>+<a class="code" href="class_ieee80211_mac.html#a2e70e03af5120cea1b89769d4e7a5f0a">duplicateTimeOut</a>&gt;=simTime())
    {
        <a class="code" href="class_ieee80211_mac.html#a57492265daaf979dabb33ad6467b6bc4">lastTimeDelete</a>=simTime();
        <span class="keywordflow">for</span> (Ieee80211ASFTupleList::iterator it = <a class="code" href="class_ieee80211_mac.html#af3cf1a0d1737d69c490ef2fdf9595f3f">asfTuplesList</a>.begin();it!=<a class="code" href="class_ieee80211_mac.html#af3cf1a0d1737d69c490ef2fdf9595f3f">asfTuplesList</a>.begin();)
        {
            <span class="keywordflow">if</span> (it-&gt;second.receivedTime+<a class="code" href="class_ieee80211_mac.html#a2e70e03af5120cea1b89769d4e7a5f0a">duplicateTimeOut</a>&lt;simTime())
            {
                Ieee80211ASFTupleList::iterator itAux=it;
                it++;
                <a class="code" href="class_ieee80211_mac.html#af3cf1a0d1737d69c490ef2fdf9595f3f">asfTuplesList</a>.erase(itAux);
            }
            <span class="keywordflow">else</span>
                it++;
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac8fae129b2d3a0f489d2aa6fbadaa786"></a><!-- doxytag: member="Ieee80211Mac::reportDataFailed" ref="ac8fae129b2d3a0f489d2aa6fbadaa786" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">Ieee80211Mac::reportDataFailed</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>()++;
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a>==<a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a6448ede81a7e8e5498de339ffe201855">RATE_CR</a>)
       <span class="keywordflow">return</span>;
    <a class="code" href="structtimer.html">timer</a>++;
    <a class="code" href="class_ieee80211_mac.html#a7dad9095f1d77e09887875ad87409da3">failedCounter</a>++;
    <a class="code" href="class_ieee80211_mac.html#aab113076ebedf10680d4b5fd0753aea2">successCounter</a> = 0;
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a43577335d5075e95b8df5b50dc4c0fed">recovery</a>)
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>() == 1)
        {
            <a class="code" href="class_ieee80211_mac.html#a6b11301b46f8e34c5c9aecd8c3645ec3">reportRecoveryFailure</a>();
            <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> != <a class="code" href="class_ieee80211_mac.html#ad2037040db4c8e92618e6ea48165fc9c">getMinBitrate</a>() &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> != <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a6448ede81a7e8e5498de339ffe201855">RATE_CR</a>)
            {
                <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>--;
                <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;b&#39;</span>) <a class="code" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate</a>(<a class="code" href="_ieee80211_data_rate_8h.html#a86d54860dd816f6b0e8a20bc4ba4dd07" title="Bit rates for 802.11b.">BITRATES_80211b</a>[<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>]);
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;g&#39;</span>) <a class="code" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate</a>(<a class="code" href="_ieee80211_data_rate_8h.html#a1edaa1e64ed54f3ab94446d9fdf3970c" title="Bit rates for 802.11g.">BITRATES_80211g</a>[<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>]);
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>) <a class="code" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate</a>(<a class="code" href="_ieee80211_data_rate_8h.html#aff43b2fc7e875884c766efefce80dc74" title="Bit rates for 802.11a.">BITRATES_80211a</a>[<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>]);
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;p&#39;</span>) <a class="code" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate</a>(<a class="code" href="_ieee80211_data_rate_8h.html#ae2903ef1cee37083b2672ead3830e093" title="Bit rates for 802.11g.">BITRATES_80211p</a>[<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>]);
                <span class="keywordflow">else</span> opp_error(<span class="stringliteral">&quot;mode not supported&quot;</span>);
            }
        }
        <a class="code" href="structtimer.html">timer</a> = 0;
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a567f98ee5373f5996f0f40ea813859d0">needNormalFallback</a>())
        {
            <a class="code" href="class_ieee80211_mac.html#aa9441edca636fd2bc5c2194a4f3ed2d7">reportFailure</a>();
            <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a> != <a class="code" href="class_ieee80211_mac.html#ad2037040db4c8e92618e6ea48165fc9c">getMinBitrate</a>() &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> != <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a6448ede81a7e8e5498de339ffe201855">RATE_CR</a>)
            {
                <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>--;
                <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;b&#39;</span>) <a class="code" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate</a>(<a class="code" href="_ieee80211_data_rate_8h.html#a86d54860dd816f6b0e8a20bc4ba4dd07" title="Bit rates for 802.11b.">BITRATES_80211b</a>[<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>]);
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;g&#39;</span>) <a class="code" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate</a>(<a class="code" href="_ieee80211_data_rate_8h.html#a1edaa1e64ed54f3ab94446d9fdf3970c" title="Bit rates for 802.11g.">BITRATES_80211g</a>[<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>]);
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>) <a class="code" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate</a>(<a class="code" href="_ieee80211_data_rate_8h.html#aff43b2fc7e875884c766efefce80dc74" title="Bit rates for 802.11a.">BITRATES_80211a</a>[<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>]);
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;p&#39;</span>) <a class="code" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate</a>(<a class="code" href="_ieee80211_data_rate_8h.html#ae2903ef1cee37083b2672ead3830e093" title="Bit rates for 802.11g.">BITRATES_80211p</a>[<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>]);
                <span class="keywordflow">else</span> opp_error(<span class="stringliteral">&quot;mode not supported&quot;</span>);
            }
        }
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>() &gt;= 2)
        {
            <a class="code" href="structtimer.html">timer</a> = 0;
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6172a0a44f4ca1cbfa51b320c08a6ef6"></a><!-- doxytag: member="Ieee80211Mac::reportDataOk" ref="a6172a0a44f4ca1cbfa51b320c08a6ef6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">Ieee80211Mac::reportDataOk</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120">resetStateVariables()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>() = 0;
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a>==<a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a6448ede81a7e8e5498de339ffe201855">RATE_CR</a>)
       <span class="keywordflow">return</span>;
    <a class="code" href="class_ieee80211_mac.html#aab113076ebedf10680d4b5fd0753aea2">successCounter</a> ++;
    <a class="code" href="class_ieee80211_mac.html#a7dad9095f1d77e09887875ad87409da3">failedCounter</a> = 0;
    <a class="code" href="class_ieee80211_mac.html#a43577335d5075e95b8df5b50dc4c0fed">recovery</a> = <span class="keyword">false</span>;
    <span class="keywordflow">if</span> ((<a class="code" href="class_ieee80211_mac.html#aab113076ebedf10680d4b5fd0753aea2">successCounter</a> == <a class="code" href="class_ieee80211_mac.html#a81af710061696a71d03a0134038c1889">getSuccessThreshold</a>() || <a class="code" href="structtimer.html">timer</a> == <a class="code" href="class_ieee80211_mac.html#ac522b02d2b52a53ea3e473e603ec3f9e">getTimerTimeout</a>())
            &amp;&amp; (<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>+1 &lt; (<a class="code" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate</a>())))
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> != <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a6448ede81a7e8e5498de339ffe201855">RATE_CR</a>)
        {
            <a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>++;
            <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;b&#39;</span>) <a class="code" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate</a>(<a class="code" href="_ieee80211_data_rate_8h.html#a86d54860dd816f6b0e8a20bc4ba4dd07" title="Bit rates for 802.11b.">BITRATES_80211b</a>[<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>]);
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;g&#39;</span>) <a class="code" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate</a>(<a class="code" href="_ieee80211_data_rate_8h.html#a1edaa1e64ed54f3ab94446d9fdf3970c" title="Bit rates for 802.11g.">BITRATES_80211g</a>[<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>]);
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>) <a class="code" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate</a>(<a class="code" href="_ieee80211_data_rate_8h.html#aff43b2fc7e875884c766efefce80dc74" title="Bit rates for 802.11a.">BITRATES_80211a</a>[<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>]);
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;p&#39;</span>) <a class="code" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate</a>(<a class="code" href="_ieee80211_data_rate_8h.html#ae2903ef1cee37083b2672ead3830e093" title="Bit rates for 802.11g.">BITRATES_80211p</a>[<a class="code" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">rateIndex</a>]);
            <span class="keywordflow">else</span> opp_error(<span class="stringliteral">&quot;mode not supported&quot;</span>);
        }
        <a class="code" href="structtimer.html">timer</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#aab113076ebedf10680d4b5fd0753aea2">successCounter</a> = 0;
        <a class="code" href="class_ieee80211_mac.html#a43577335d5075e95b8df5b50dc4c0fed">recovery</a> = <span class="keyword">true</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa9441edca636fd2bc5c2194a4f3ed2d7"></a><!-- doxytag: member="Ieee80211Mac::reportFailure" ref="aa9441edca636fd2bc5c2194a4f3ed2d7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#aa9441edca636fd2bc5c2194a4f3ed2d7">Ieee80211Mac::reportFailure</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> == <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603aa6fe59b12fc803c86072c66573d609db">RATE_AARF</a>)
    {
        <a class="code" href="class_ieee80211_mac.html#a024353fcbe63876a1098dc7d3829b624">setTimerTimeout</a>(<a class="code" href="class_ieee80211_mac.html#acf1bcb5d51fb31021b076e42525d4a83">getMinTimerTimeout</a>());
        <a class="code" href="class_ieee80211_mac.html#a90d176964142b5fc4645b737a85674bc">setSuccessThreshold</a>(<a class="code" href="class_ieee80211_mac.html#a7c39a34aafb4b133e176c1fe37c379ad">getMinSuccessThreshold</a>());
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6b11301b46f8e34c5c9aecd8c3645ec3"></a><!-- doxytag: member="Ieee80211Mac::reportRecoveryFailure" ref="a6b11301b46f8e34c5c9aecd8c3645ec3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a6b11301b46f8e34c5c9aecd8c3645ec3">Ieee80211Mac::reportRecoveryFailure</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> == <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603aa6fe59b12fc803c86072c66573d609db">RATE_AARF</a>)
    {
        <a class="code" href="class_ieee80211_mac.html#a90d176964142b5fc4645b737a85674bc">setSuccessThreshold</a>((<span class="keywordtype">int</span>)(<a class="code" href="_s_c_t_p_association_8h.html#ad61931b1ae6b8e5bb714e2e6744f4470" title="Returns the minimum of a and b.">std::min</a>((<span class="keywordtype">double</span>)<a class="code" href="class_ieee80211_mac.html#a81af710061696a71d03a0134038c1889">getSuccessThreshold</a>() * <a class="code" href="class_ieee80211_mac.html#af5fa0eb384fc17a3a8450061aa4f11df">successCoeff</a>, (<span class="keywordtype">double</span>) <a class="code" href="class_ieee80211_mac.html#ab8e98f3dc11067d8ae8a7b8f7aa42811">maxSuccessThreshold</a>)));
        <a class="code" href="class_ieee80211_mac.html#a024353fcbe63876a1098dc7d3829b624">setTimerTimeout</a>((<span class="keywordtype">int</span>)(<a class="code" href="_s_c_t_p_association_8h.html#afdb84bd44c7cbd3fc9cbe1e3bf07d948" title="Returns the maximum of a and b.">std::max</a>((<span class="keywordtype">double</span>)<a class="code" href="class_ieee80211_mac.html#acf1bcb5d51fb31021b076e42525d4a83">getMinTimerTimeout</a>(), (<span class="keywordtype">double</span>)(<a class="code" href="class_ieee80211_mac.html#a81af710061696a71d03a0134038c1889">getSuccessThreshold</a>() * <a class="code" href="class_ieee80211_mac.html#a0e4312ce17d8f8bc193863061e3d55f4">timerCoeff</a>))));
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae4d9c2fb6e3b93a0922f0f6d502478ea"></a><!-- doxytag: member="Ieee80211Mac::rescheduleAIFSPeriod" ref="ae4d9c2fb6e3b93a0922f0f6d502478ea" args="(int AccessCategory)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#ae4d9c2fb6e3b93a0922f0f6d502478ea">Ieee80211Mac::rescheduleAIFSPeriod</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>AccessCategory</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    ASSERT(1);
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;rescheduling AIFS[&quot;</span> &lt;&lt; AccessCategory &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>;
    cancelEvent(<a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(AccessCategory));
    scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#abdd0b24ce9cb75d2f0fb1fa390a1bd97">getAIFS</a>(AccessCategory), <a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(AccessCategory));
}
</pre></div>
</div>
</div>
<a class="anchor" id="af8e85a57bc0eaa9ccaf66c9189bc8655"></a><!-- doxytag: member="Ieee80211Mac::resetCurrentBackOff" ref="af8e85a57bc0eaa9ccaf66c9189bc8655" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#af8e85a57bc0eaa9ccaf66c9189bc8655">Ieee80211Mac::resetCurrentBackOff</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>() = <span class="keyword">true</span>;
        <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>() = -1;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ace0608e9ca57414b54817d04b184b120"></a><!-- doxytag: member="Ieee80211Mac::resetStateVariables" ref="ace0608e9ca57414b54817d04b184b120" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120">Ieee80211Mac::resetStateVariables</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reset backoff, backoffPeriod and retryCounter for IDLE state. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ae7e7f22c4c76ac7be8ffff853cbf7503">finishCurrentTransmission()</a>, <a class="el" href="class_ieee80211_mac.html#aa5cefe02fc6379d5aefb5c54d8d3422c">finishReception()</a>, <a class="el" href="class_ieee80211_mac.html#a793227beb883e6f0f0b5c993aa6b7f56">giveUpCurrentTransmission()</a>, and <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>() = 0;
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> == <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603aa6fe59b12fc803c86072c66573d609db">RATE_AARF</a> || <a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> == <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a257f4986d42d532538d364ebff6faee5">RATE_ARF</a>)
        <a class="code" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">reportDataOk</a>();
    <span class="keywordflow">else</span>
        <a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>() = 0;

    <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;<a class="code" href="namespace_const_type.html#a292c6824a659d30847032a3c0d1c0217">empty</a>())
    {
        <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>() = <span class="keyword">true</span>;
        <a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()-&gt;<a class="code" href="class_ieee80211_frame.html#a89a075cab1d7d8d22065793f099d9efd">setRetry</a>(<span class="keyword">false</span>);
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>() = <span class="keyword">false</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a600699ba09c953e926895c81357eb752"></a><!-- doxytag: member="Ieee80211Mac::retryCounter" ref="a600699ba09c953e926895c81357eb752" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int &amp; <a class="el" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">Ieee80211Mac::retryCounter</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">generateBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>, <a class="el" href="class_ieee80211_mac.html#a567f98ee5373f5996f0f40ea813859d0">needNormalFallback()</a>, <a class="el" href="class_ieee80211_mac.html#ade04456dc6c3a954a263c65ebb7ad678">needRecoveryFallback()</a>, <a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed()</a>, <a class="el" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">reportDataOk()</a>, <a class="el" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120">resetStateVariables()</a>, and <a class="el" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].retryCounter;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1140ac3364f8defb6d66deb76af9d55e"></a><!-- doxytag: member="Ieee80211Mac::retryCurrentTransmission" ref="a1140ac3364f8defb6d66deb76af9d55e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">Ieee80211Mac::retryCurrentTransmission</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(<a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>() &lt; <a class="code" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9" title="Maximum number of transmissions for a message.">transmissionLimit</a> - 1);
    <a class="code" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43" title="Returns the current frame being transmitted.">getCurrentTransmission</a>()-&gt;<a class="code" href="class_ieee80211_frame.html#a89a075cab1d7d8d22065793f099d9efd">setRetry</a>(<span class="keyword">true</span>);
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> == <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603aa6fe59b12fc803c86072c66573d609db">RATE_AARF</a> || <a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> == <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a257f4986d42d532538d364ebff6faee5">RATE_ARF</a>)
        <a class="code" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed</a>();
    <span class="keywordflow">else</span>
        <a class="code" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter</a>() ++;
    <a class="code" href="class_ieee80211_mac.html#a92d78e95b726f22b3ce726be0e6807fd">numRetry</a>()++;
    <a class="code" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff</a>() = <span class="keyword">true</span>;
    <a class="code" href="class_ieee80211_mac.html#adb7349369b15dc3f966da2b8a7b8d0d0">generateBackoffPeriod</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2e885fc167155dfd1e9ecbf2d0058807"></a><!-- doxytag: member="Ieee80211Mac::scheduleAIFSPeriod" ref="a2e885fc167155dfd1e9ecbf2d0058807" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a2e885fc167155dfd1e9ecbf2d0058807">Ieee80211Mac::scheduleAIFSPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> schedule = <span class="keyword">false</span>;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
    {
        <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(i)-&gt;isScheduled() &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>(i)-&gt;empty())
        {

            <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#aae4419ab39198abdf1fc8955b07e5e20" title="Indicates that the last frame received had bit errors in it or there was a collision during receiving...">lastReceiveFailed</a>)
            {
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;reception of last frame failed, scheduling EIFS-DIFS+AIFS period (&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;
                scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#a87bec8aaae96a4fe5d70816d48477183">getEIFS</a>() - <a class="code" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS</a>() + <a class="code" href="class_ieee80211_mac.html#abdd0b24ce9cb75d2f0fb1fa390a1bd97">getAIFS</a>(i), <a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(i));
            }
            <span class="keywordflow">else</span>
            {
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling AIFS period (&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;
                scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#abdd0b24ce9cb75d2f0fb1fa390a1bd97">getAIFS</a>(i), <a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(i));
            }

        }
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS</a>(i)-&gt;isScheduled())
            schedule = <span class="keyword">true</span>;
    }
    <span class="keywordflow">if</span> (!schedule &amp;&amp; !<a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a>-&gt;isScheduled())
    {
        <span class="comment">// schedule default DIFS</span>
        <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> = <a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>()-1;
        <a class="code" href="class_ieee80211_mac.html#a84bd3147b655f8396f37926fe34a17ad">scheduleDIFSPeriod</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4ea47166959fb7622be67011d131d8f5"></a><!-- doxytag: member="Ieee80211Mac::scheduleBackoffPeriod" ref="a4ea47166959fb7622be67011d131d8f5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a4ea47166959fb7622be67011d131d8f5">Ieee80211Mac::scheduleBackoffPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling backoff period\n&quot;</span>;
    scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod</a>(), <a class="code" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff</a>());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a916864ac7a266c8fdf466a185c3a68dc"></a><!-- doxytag: member="Ieee80211Mac::scheduleCTSTimeoutPeriod" ref="a916864ac7a266c8fdf466a185c3a68dc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a916864ac7a266c8fdf466a185c3a68dc">Ieee80211Mac::scheduleCTSTimeoutPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a>-&gt;isScheduled())
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling CTS timeout period\n&quot;</span>;
        scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a994032d4c974294f5a24e0e3160d90f4">LENGTH_RTS</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>) + <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>()
                   + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a615c2db16153273956d34e0a7b4a46cf">LENGTH_CTS</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>) + <a class="code" href="_ieee80211_consts_8h.html#a326bc90ca8d16cf60d60f761b6494a40">MAX_PROPAGATION_DELAY</a> * 2, <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab699599e2dc2ffb747a9a7ae8a8f98e8"></a><!-- doxytag: member="Ieee80211Mac::scheduleDataTimeoutPeriod" ref="ab699599e2dc2ffb747a9a7ae8a8f98e8" args="(Ieee80211DataOrMgmtFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">Ieee80211Mac::scheduleDataTimeoutPeriod</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">double</span> tim;
    <span class="keywordtype">double</span> bitRate = <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>;
    <span class="keywordflow">if</span> (dynamic_cast&lt;PhyControlInfo*&gt; (frameToSend-&gt;getControlInfo()))
    {
        bitRate = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a>*<span class="keyword">&gt;</span> (frameToSend-&gt;getControlInfo())-&gt;<a class="code" href="class_ieee80211_mac.html#adade11623fcc50f3348555cace3c9490">getBitrate</a>();
        <span class="keywordflow">if</span> (bitRate == 0)
            bitRate = <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a>;
    }
    <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a>-&gt;isScheduled())
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling data timeout period\n&quot;</span>;
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a8e05d7cf7a718c1e255e13f2ee6c132a">useModulationParameters</a>)
        {
            <a class="code" href="class_modulation_type.html" title="represent a single transmission mode">ModulationType</a> modType;
            <span class="keywordflow">if</span> ((<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;b&#39;</span>) || (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;g&#39;</span>))
                modType = <a class="code" href="class_wifi_modulation_type.html#a858c98cd637c56ab55fe1cddba298f7c">WifiModulationType::getMode80211g</a>(bitRate);
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;a&#39;</span>)
                modType = <a class="code" href="class_wifi_modulation_type.html#afd79b3878ac41e168e9d9a78a56a633d">WifiModulationType::getMode80211a</a>(bitRate);
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">opMode</a>==<span class="charliteral">&#39;p&#39;</span>)
                modType = <a class="code" href="class_wifi_modulation_type.html#a5eefbb523ffdccff54ec23e46e50dac3">WifiModulationType::getMode80211p</a>(bitRate);
            <span class="keywordflow">else</span>
                opp_error(<span class="stringliteral">&quot;mode not supported&quot;</span>);
            <a class="code" href="class_wifi_modulation_type.html#ad7274ccbb00205f6db21ad6eb6710bab">WifiModulationType::getSlotDuration</a>(modType,<a class="code" href="class_ieee80211_mac.html#af5e0fd9af05f5494d1cce2821fb30d61">wifiPreambleType</a>);
            tim = <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(frameToSend) +SIMTIME_DBL(
                 <a class="code" href="class_wifi_modulation_type.html#ad7274ccbb00205f6db21ad6eb6710bab">WifiModulationType::getSlotDuration</a>(modType,<a class="code" href="class_ieee80211_mac.html#af5e0fd9af05f5494d1cce2821fb30d61">wifiPreambleType</a>) +
                 <a class="code" href="class_wifi_modulation_type.html#a60fafa8988961e8491eed8b56613b821">WifiModulationType::getSifsTime</a>(modType,<a class="code" href="class_ieee80211_mac.html#af5e0fd9af05f5494d1cce2821fb30d61">wifiPreambleType</a>) +
                 <a class="code" href="class_wifi_modulation_type.html#a95524efea603fb22eede9a84dd4d35f1">WifiModulationType::get_aPHY_RX_START_Delay</a> (modType,<a class="code" href="class_ieee80211_mac.html#af5e0fd9af05f5494d1cce2821fb30d61">wifiPreambleType</a>));
        }
        <span class="keywordflow">else</span>
            tim = <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(frameToSend) +SIMTIME_DBL( <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>()) + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>) + <a class="code" href="_ieee80211_consts_8h.html#a326bc90ca8d16cf60d60f761b6494a40">MAX_PROPAGATION_DELAY</a> * 2;
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">&quot; time out=&quot;</span>&lt;&lt;tim*1e6&lt;&lt;<span class="stringliteral">&quot;us&quot;</span>&lt;&lt;endl;
        scheduleAt(simTime() + tim, <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a84bd3147b655f8396f37926fe34a17ad"></a><!-- doxytag: member="Ieee80211Mac::scheduleDIFSPeriod" ref="a84bd3147b655f8396f37926fe34a17ad" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a84bd3147b655f8396f37926fe34a17ad">Ieee80211Mac::scheduleDIFSPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a2e885fc167155dfd1e9ecbf2d0058807">scheduleAIFSPeriod()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#aae4419ab39198abdf1fc8955b07e5e20" title="Indicates that the last frame received had bit errors in it or there was a collision during receiving...">lastReceiveFailed</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;reception of last frame failed, scheduling EIFS period\n&quot;</span>;
        scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#a87bec8aaae96a4fe5d70816d48477183">getEIFS</a>(), <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a>);
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling DIFS period\n&quot;</span>;
        scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#a1399e980db26dc205361307d55a63139">getDIFS</a>(), <a class="code" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a" title="End of the Data Inter-Frame Time period.">endDIFS</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad258b3308057764df66b6ea932a94791"></a><!-- doxytag: member="Ieee80211Mac::scheduleMulticastTimeoutPeriod" ref="ad258b3308057764df66b6ea932a94791" args="(Ieee80211DataOrMgmtFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#ad258b3308057764df66b6ea932a94791">Ieee80211Mac::scheduleMulticastTimeoutPeriod</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a>-&gt;isScheduled())
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling multicast timeout period\n&quot;</span>;
        scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(frameToSend), <a class="code" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79" title="End of the backoff period.">endTimeout</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a21662171dd8c6356df3c8b050d7c9414"></a><!-- doxytag: member="Ieee80211Mac::scheduleReservePeriod" ref="a21662171dd8c6356df3c8b050d7c9414" args="(Ieee80211Frame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a21662171dd8c6356df3c8b050d7c9414">Ieee80211Mac::scheduleReservePeriod</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Schedule network allocation period according to 9.2.5.4. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    simtime_t reserve = frame-&gt;<a class="code" href="class_ieee80211_frame.html#a5779472ccaefae6d1f80db8f2473c035">getDuration</a>();

    <span class="comment">// see spec. 7.1.3.2</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b" title="Returns true if message destination address is ours.">isForUs</a>(frame) &amp;&amp; reserve != 0 &amp;&amp; reserve &lt; 32768)
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a" title="End of medium reserve period (NAV) when two other nodes were communicating on the channel...">endReserve</a>-&gt;isScheduled())
        {
            simtime_t oldReserve = <a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a" title="End of medium reserve period (NAV) when two other nodes were communicating on the channel...">endReserve</a>-&gt;getArrivalTime() - simTime();

            <span class="keywordflow">if</span> (oldReserve &gt; reserve)
                <span class="keywordflow">return</span>;

            reserve = <a class="code" href="_s_c_t_p_association_8h.html#afdb84bd44c7cbd3fc9cbe1e3bf07d948" title="Returns the maximum of a and b.">std::max</a>(reserve, oldReserve);
            cancelEvent(<a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a" title="End of medium reserve period (NAV) when two other nodes were communicating on the channel...">endReserve</a>);
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0" title="XXX Remember for which AC we wait for ACK.">radioState</a> == <a class="code" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449aeb600ab2fbbbbc2d12d874edb9320ec0">RadioState::IDLE</a>)
        {
            <span class="comment">// NAV: the channel just became virtually busy according to the spec</span>
            scheduleAt(simTime(), <a class="code" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40" title="Radio state change self message.">mediumStateChange</a>);
        }

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling reserve period for: &quot;</span> &lt;&lt; reserve &lt;&lt; endl;

        ASSERT(reserve &gt; 0);

        <a class="code" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f" title="True during network allocation period.">nav</a> = <span class="keyword">true</span>;
        scheduleAt(simTime() + reserve, <a class="code" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a" title="End of medium reserve period (NAV) when two other nodes were communicating on the channel...">endReserve</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a325e59dc74a3ad59596933aaf96012a7"></a><!-- doxytag: member="Ieee80211Mac::scheduleSIFSPeriod" ref="a325e59dc74a3ad59596933aaf96012a7" args="(Ieee80211Frame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a325e59dc74a3ad59596933aaf96012a7">Ieee80211Mac::scheduleSIFSPeriod</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling SIFS period\n&quot;</span>;
    <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a>-&gt;setContextPointer(frame-&gt;<a class="code" href="class_ieee80211_frame.html#a8a459c2fbc6cb63a0815118b1479f15e">dup</a>());
    scheduleAt(simTime() + <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>(), <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0afcec3ebbe4fac7c63ac32937604540"></a><!-- doxytag: member="Ieee80211Mac::sendACKFrame" ref="a0afcec3ebbe4fac7c63ac32937604540" args="(Ieee80211DataOrMgmtFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a0afcec3ebbe4fac7c63ac32937604540">Ieee80211Mac::sendACKFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a1fa778f58e945ac0b347dfa66785224b">sendACKFrameOnEndSIFS()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending ACK frame\n&quot;</span>;
    <a class="code" href="class_ieee80211_mac.html#a4ac1aa9e7f916504cda9ab22991636ff">numAckSend</a>++;
    <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_ieee80211_mac.html#a90256fefdfde93f0f350a100c8b94eda" title="Attaches a PhyControlInfo to the frame which will cause it to be sent at basicBitrate not bitrate (e...">setBasicBitrate</a>(<a class="code" href="class_ieee80211_mac.html#a7eab1962fd94c95151d62e3fb71253e0">buildACKFrame</a>(frameToACK)));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1fa778f58e945ac0b347dfa66785224b"></a><!-- doxytag: member="Ieee80211Mac::sendACKFrameOnEndSIFS" ref="a1fa778f58e945ac0b347dfa66785224b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a1fa778f58e945ac0b347dfa66785224b">Ieee80211Mac::sendACKFrameOnEndSIFS</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *frameToACK = (<a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *)<a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a>-&gt;getContextPointer();
    <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a>-&gt;setContextPointer(<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
    <a class="code" href="class_ieee80211_mac.html#a0afcec3ebbe4fac7c63ac32937604540">sendACKFrame</a>(check_and_cast&lt;Ieee80211DataOrMgmtFrame*&gt;(frameToACK));
    <span class="keyword">delete</span> frameToACK;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a910622485a5816a5a5475858871bbbdc"></a><!-- doxytag: member="Ieee80211Mac::sendCTSFrame" ref="a910622485a5816a5a5475858871bbbdc" args="(Ieee80211RTSFrame *rtsFrame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a910622485a5816a5a5475858871bbbdc">Ieee80211Mac::sendCTSFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_r_t_s_frame.html">Ieee80211RTSFrame</a> *&#160;</td>
          <td class="paramname"><em>rtsFrame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a821d34cb04fd6ebd9b0d6989b963614d">sendCTSFrameOnEndSIFS()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending CTS frame\n&quot;</span>;
    <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_ieee80211_mac.html#a90256fefdfde93f0f350a100c8b94eda" title="Attaches a PhyControlInfo to the frame which will cause it to be sent at basicBitrate not bitrate (e...">setBasicBitrate</a>(<a class="code" href="class_ieee80211_mac.html#aaea047b56dcec7dc99d9681138c1f719">buildCTSFrame</a>(rtsFrame)));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a821d34cb04fd6ebd9b0d6989b963614d"></a><!-- doxytag: member="Ieee80211Mac::sendCTSFrameOnEndSIFS" ref="a821d34cb04fd6ebd9b0d6989b963614d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a821d34cb04fd6ebd9b0d6989b963614d">Ieee80211Mac::sendCTSFrameOnEndSIFS</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *rtsFrame = (<a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *)<a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a>-&gt;getContextPointer();
    <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a>-&gt;setContextPointer(<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
    <a class="code" href="class_ieee80211_mac.html#a910622485a5816a5a5475858871bbbdc">sendCTSFrame</a>(check_and_cast&lt;Ieee80211RTSFrame*&gt;(rtsFrame));
    <span class="keyword">delete</span> rtsFrame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3283d9bfc1d01d05dc65887e6f0e8518"></a><!-- doxytag: member="Ieee80211Mac::sendDataFrame" ref="a3283d9bfc1d01d05dc65887e6f0e8518" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">Ieee80211Mac::sendDataFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td>
          <td class="paramname"><em>frameToSend</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, and <a class="el" href="class_ieee80211_mac.html#a535d6bc217f1cfc210fe798c3b89a114">sendDataFrameOnEndSIFS()</a>.</p>
<div class="fragment"><pre class="fragment">{
    simtime_t t = 0, time = 0;
    <span class="keywordtype">int</span> count = 0;
    std::list&lt;Ieee80211DataOrMgmtFrame*&gt;::iterator frame;

    frame = <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;begin();
    ASSERT(*frame==frameToSend);
    <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff" title="True if we are in txop bursting packets.">txop</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#a355c85be7885e389bd989d08e02e54a9">TXOP</a>() &gt; 0 &amp;&amp; <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;size() &gt;= 2 )
    {
        <span class="comment">//we start packet burst within TXOP time period</span>
        <a class="code" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff" title="True if we are in txop bursting packets.">txop</a> = <span class="keyword">true</span>;

        <span class="keywordflow">for</span> (frame=<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;begin(); frame != <a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>()-&gt;end(); ++frame)
        {
            count++;
            t = <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(*frame) + 2 * <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>() + <a class="code" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71" title="Computes the duration (in seconds) of the transmission of a frame over the physical channel...">computeFrameDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>, <a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>);
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;t is &quot;</span> &lt;&lt; t &lt;&lt; endl;
            <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a355c85be7885e389bd989d08e02e54a9">TXOP</a>()&gt;time+t)
            {
                time += t;
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;adding t \n&quot;</span>;
            }
            <span class="keywordflow">else</span>
            {
                <span class="keywordflow">break</span>;
            }
        }
        <span class="comment">//to be sure we get endTXOP earlier then receive ACK and we have to minus SIFS time from first packet</span>
        time -= <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>()/2 + <a class="code" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS</a>();
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling TXOP for AC&quot;</span> &lt;&lt; <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a> &lt;&lt; <span class="stringliteral">&quot;, duration is &quot;</span> &lt;&lt; time &lt;&lt; <span class="stringliteral">&quot;,count is &quot;</span> &lt;&lt; count &lt;&lt; endl;
        scheduleAt(simTime() + time, <a class="code" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34" title="End of the Arbitration Inter-Frame Time period.">endTXOP</a>);
    }
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending Data frame\n&quot;</span>;
    <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">buildDataFrame</a>(dynamic_cast&lt;Ieee80211DataOrMgmtFrame*&gt;(<a class="code" href="class_ieee80211_mac.html#a8bcfae864475a658f025bdf618588ec9">setBitrateFrame</a>(frameToSend))));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a535d6bc217f1cfc210fe798c3b89a114"></a><!-- doxytag: member="Ieee80211Mac::sendDataFrameOnEndSIFS" ref="a535d6bc217f1cfc210fe798c3b89a114" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a535d6bc217f1cfc210fe798c3b89a114">Ieee80211Mac::sendDataFrameOnEndSIFS</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td>
          <td class="paramname"><em>frameToSend</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *ctsFrame = (<a class="code" href="class_ieee80211_frame.html" title="Class generated from linklayer/ieee80211/mac/Ieee80211Frame.msg by opp_msgc.">Ieee80211Frame</a> *)<a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a>-&gt;getContextPointer();
    <a class="code" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc" title="End of the Short Inter-Frame Time period.">endSIFS</a>-&gt;setContextPointer(<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
    <a class="code" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame</a>(frameToSend);
    <span class="keyword">delete</span> ctsFrame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af24a75754986f091cf9b5e6987bb7bf3"></a><!-- doxytag: member="Ieee80211Mac::sendDownPendingRadioConfigMsg" ref="af24a75754986f091cf9b5e6987bb7bf3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#af24a75754986f091cf9b5e6987bb7bf3">Ieee80211Mac::sendDownPendingRadioConfigMsg</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send down the change channel message to the physical layer if there is any. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e" title="The last change channel message received and not yet sent to the physical layer, or NULL...">pendingRadioConfigMsg</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e" title="The last change channel message received and not yet sent to the physical layer, or NULL...">pendingRadioConfigMsg</a>);
        <a class="code" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e" title="The last change channel message received and not yet sent to the physical layer, or NULL...">pendingRadioConfigMsg</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3975bf98c4714a9346df65866521a479"></a><!-- doxytag: member="Ieee80211Mac::sendMulticastFrame" ref="a3975bf98c4714a9346df65866521a479" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a3975bf98c4714a9346df65866521a479">Ieee80211Mac::sendMulticastFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td>
          <td class="paramname"><em>frameToSend</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending Multicast frame\n&quot;</span>;
    <span class="keywordflow">if</span> (frameToSend-&gt;getControlInfo())
        <span class="keyword">delete</span> frameToSend-&gt;removeControlInfo();
    <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">buildDataFrame</a>(dynamic_cast&lt;Ieee80211DataOrMgmtFrame*&gt;(<a class="code" href="class_ieee80211_mac.html#a90256fefdfde93f0f350a100c8b94eda" title="Attaches a PhyControlInfo to the frame which will cause it to be sent at basicBitrate not bitrate (e...">setBasicBitrate</a>(frameToSend))));
}
</pre></div>
</div>
</div>
<a class="anchor" id="abe3eb2e0a57570ce0f786da221090924"></a><!-- doxytag: member="Ieee80211Mac::sendRTSFrame" ref="abe3eb2e0a57570ce0f786da221090924" args="(Ieee80211DataOrMgmtFrame *frameToSend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#abe3eb2e0a57570ce0f786da221090924">Ieee80211Mac::sendRTSFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a> *&#160;</td>
          <td class="paramname"><em>frameToSend</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending RTS frame\n&quot;</span>;
    <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_ieee80211_mac.html#a90256fefdfde93f0f350a100c8b94eda" title="Attaches a PhyControlInfo to the frame which will cause it to be sent at basicBitrate not bitrate (e...">setBasicBitrate</a>(<a class="code" href="class_ieee80211_mac.html#aec5d4575e8b8f4339815208c394f86cc">buildRTSFrame</a>(frameToSend)));
}
</pre></div>
</div>
</div>
<a class="anchor" id="aee23d91230a4003a7e8f642f7e8f3f3f"></a><!-- doxytag: member="Ieee80211Mac::sendUp" ref="aee23d91230a4003a7e8f642f7e8f3f3f" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#aee23d91230a4003a7e8f642f7e8f3f3f">Ieee80211Mac::sendUp</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends a message to the upper layer. </p>

<p>Reimplemented from <a class="el" href="class_wireless_mac_base.html#a5454ec5040663e5af4ddb00f525a3caf">WirelessMacBase</a>.</p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending up &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

    <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#ae6912255bec9031597492000db0a5dd8">isDuplicated</a>(msg)) <span class="comment">// duplicate detection filter</span>
    {
        <span class="keywordflow">if</span> (msg-&gt;isPacket())
            emit(<a class="code" href="class_wireless_mac_base.html#a75aa076aa6adadd213b40472844ab752">packetSentToUpperSignal</a>, msg);

        send(msg, <a class="code" href="class_wireless_mac_base.html#af309baf8f7434f21abe268d40586ebae">upperLayerOut</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a90256fefdfde93f0f350a100c8b94eda"></a><!-- doxytag: member="Ieee80211Mac::setBasicBitrate" ref="a90256fefdfde93f0f350a100c8b94eda" args="(Ieee80211Frame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> * <a class="el" href="class_ieee80211_mac.html#a90256fefdfde93f0f350a100c8b94eda">Ieee80211Mac::setBasicBitrate</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attaches a <a class="el" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a> to the frame which will cause it to be sent at basicBitrate not bitrate (e.g. </p>
<p>2Mbps instead of 11Mbps). Used with ACK, CTS, RTS. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a0afcec3ebbe4fac7c63ac32937604540">sendACKFrame()</a>, <a class="el" href="class_ieee80211_mac.html#a910622485a5816a5a5475858871bbbdc">sendCTSFrame()</a>, <a class="el" href="class_ieee80211_mac.html#a3975bf98c4714a9346df65866521a479">sendMulticastFrame()</a>, and <a class="el" href="class_ieee80211_mac.html#abe3eb2e0a57570ce0f786da221090924">sendRTSFrame()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(frame-&gt;getControlInfo()==<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
    <a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a> *ctrl = <span class="keyword">new</span> <a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a>();
    ctrl-&gt;setBitrate(<a class="code" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56" title="The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames...">basicBitrate</a>);
    frame-&gt;setControlInfo(ctrl);
    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0882369893be085f070617d2c0ea77b4"></a><!-- doxytag: member="Ieee80211Mac::setBitrate" ref="a0882369893be085f070617d2c0ea77b4" args="(double b_rate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">Ieee80211Mac::setBitrate</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>b_rate</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed()</a>, and <a class="el" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">reportDataOk()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3" title="The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate.">bitrate</a> = rate;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8bcfae864475a658f025bdf618588ec9"></a><!-- doxytag: member="Ieee80211Mac::setBitrateFrame" ref="a8bcfae864475a658f025bdf618588ec9" args="(Ieee80211Frame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> * <a class="el" href="class_ieee80211_mac.html#a8bcfae864475a658f025bdf618588ec9">Ieee80211Mac::setBitrateFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_frame.html">Ieee80211Frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">rateControlMode</a> == <a class="code" href="class_ieee80211_mac.html#a27508d4e3a61bbcce72dffa43f0b0603a6448ede81a7e8e5498de339ffe201855">RATE_CR</a> &amp;&amp; <a class="code" href="class_ieee80211_mac.html#afad1fa013c358e58d9b32c447639c939">forceBitRate</a> == <span class="keyword">false</span>)
    {
        <span class="keywordflow">if</span> (frame-&gt;getControlInfo())
            <span class="keyword">delete</span>  frame-&gt;removeControlInfo();
        <span class="keywordflow">return</span> frame;
    }
    <a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a> *ctrl = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <span class="keywordflow">if</span> (frame-&gt;getControlInfo()==<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        ctrl = <span class="keyword">new</span> <a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a>();
        frame-&gt;setControlInfo(ctrl);
    }
    <span class="keywordflow">else</span>
        ctrl = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_phy_control_info.html" title="Class generated from linklayer/contract/PhyControlInfo.msg by opp_msgc.">PhyControlInfo</a>*<span class="keyword">&gt;</span>(frame-&gt;getControlInfo());
    <span class="keywordflow">if</span> (ctrl)
        ctrl-&gt;<a class="code" href="class_phy_control_info.html#a68c5403f5841ba3014562e7bbaede5bc">setBitrate</a>(<a class="code" href="class_ieee80211_mac.html#adade11623fcc50f3348555cace3c9490">getBitrate</a>());
    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52982392fb7e289c2f8cc9ec4c47ce2b"></a><!-- doxytag: member="Ieee80211Mac::setEndAIFS" ref="a52982392fb7e289c2f8cc9ec4c47ce2b" args="(int i, cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a52982392fb7e289c2f8cc9ec4c47ce2b">Ieee80211Mac::setEndAIFS</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].endAIFS = msg;}
</pre></div>
</div>
</div>
<a class="anchor" id="af17b9fe952d892cff2f85dbe97425a1c"></a><!-- doxytag: member="Ieee80211Mac::setEndBackoff" ref="af17b9fe952d892cff2f85dbe97425a1c" args="(int i, cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#af17b9fe952d892cff2f85dbe97425a1c">Ieee80211Mac::setEndBackoff</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].endBackoff = msg;}
</pre></div>
</div>
</div>
<a class="anchor" id="a030408679db4d3c498bf79032baa4618"></a><!-- doxytag: member="Ieee80211Mac::setMode" ref="a030408679db4d3c498bf79032baa4618" args="(Mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a030408679db4d3c498bf79032baa4618">Ieee80211Mac::setMode</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03ca">Mode</a>&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Change the current MAC operation mode. </p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a> == <a class="code" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03caa3a0563a9327d929352635290f322e189" title="Point Coordination Function.">PCF</a>)
        error(<span class="stringliteral">&quot;PCF mode not yet supported&quot;</span>);

    this-&gt;<a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a> = <a class="code" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">mode</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a90d176964142b5fc4645b737a85674bc"></a><!-- doxytag: member="Ieee80211Mac::setSuccessThreshold" ref="a90d176964142b5fc4645b737a85674bc" args="(int success_threshold)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a90d176964142b5fc4645b737a85674bc">Ieee80211Mac::setSuccessThreshold</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>success_threshold</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa9441edca636fd2bc5c2194a4f3ed2d7">reportFailure()</a>, and <a class="el" href="class_ieee80211_mac.html#a6b11301b46f8e34c5c9aecd8c3645ec3">reportRecoveryFailure()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (success_threshold &gt;= <a class="code" href="class_ieee80211_mac.html#ad9ad08bd94c81b48e46293bd51a51e4b">minSuccessThreshold</a>)
        <a class="code" href="class_ieee80211_mac.html#a5094bc880757a003fe136551735737b4">successThreshold</a> = success_threshold;
    <span class="keywordflow">else</span>
        error(<span class="stringliteral">&quot;success_threshold is less than minSuccessThreshold&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a024353fcbe63876a1098dc7d3829b624"></a><!-- doxytag: member="Ieee80211Mac::setTimerTimeout" ref="a024353fcbe63876a1098dc7d3829b624" args="(int timer_timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ieee80211_mac.html#a024353fcbe63876a1098dc7d3829b624">Ieee80211Mac::setTimerTimeout</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timer_timeout</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa9441edca636fd2bc5c2194a4f3ed2d7">reportFailure()</a>, and <a class="el" href="class_ieee80211_mac.html#a6b11301b46f8e34c5c9aecd8c3645ec3">reportRecoveryFailure()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="timer__queue__aodv_8cc.html#a5b5ec88873a942f059a3a7f1390f27bc">timer_timeout</a> &gt;= <a class="code" href="class_ieee80211_mac.html#a67ce877806468a78b227697716eb8c01">minTimerTimeout</a>)
        <a class="code" href="class_ieee80211_mac.html#a0f990a962356bd4e76e0059212d9c034">timerTimeout</a> = <a class="code" href="timer__queue__aodv_8cc.html#a5b5ec88873a942f059a3a7f1390f27bc">timer_timeout</a>;
    <span class="keywordflow">else</span>
        error(<span class="stringliteral">&quot;timer_timeout is less than minTimerTimeout&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a916d6ad78851a4338821a4e456b754b5"></a><!-- doxytag: member="Ieee80211Mac::throughput" ref="a916d6ad78851a4338821a4e456b754b5" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector * <a class="el" href="class_ieee80211_mac.html#a916d6ad78851a4338821a4e456b754b5">Ieee80211Mac::throughput</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#aa3aff37ddc0c81be4e3a8a8f27418f20">edcCAFOutVector</a>[i].throughput;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abd8f0fe94d80b4fd21659dd25a4aa7e9"></a><!-- doxytag: member="Ieee80211Mac::transmissionQueue" ref="abd8f0fe94d80b4fd21659dd25a4aa7e9" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_mac.html#a79de4fc04e68ba3e7154437b1b6bf6de">Ieee80211Mac::Ieee80211DataOrMgmtFrameList</a> * <a class="el" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">Ieee80211Mac::transmissionQueue</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">buildDataFrame()</a>, <a class="el" href="class_ieee80211_mac.html#a85bc4ee88b4123a9b38d42cbf6af8e43">getCurrentTransmission()</a>, <a class="el" href="class_ieee80211_mac.html#a793227beb883e6f0f0b5c993aa6b7f56">giveUpCurrentTransmission()</a>, <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>, <a class="el" href="class_ieee80211_mac.html#a692ea7349e92100524b65eb15649c0ea">mappingAccessCategory()</a>, <a class="el" href="class_ieee80211_mac.html#af9ffa2b13e0336e9cc15334dea0122da">popTransmissionQueue()</a>, <a class="el" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120">resetStateVariables()</a>, <a class="el" href="class_ieee80211_mac.html#a2e885fc167155dfd1e9ecbf2d0058807">scheduleAIFSPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame()</a>, <a class="el" href="class_ieee80211_mac.html#a2c8b0bfbaafaf1b4180a636d3e4711b0">transmissionQueueEmpty()</a>, <a class="el" href="class_ieee80211_mac.html#aa6547247b1a7c9673b10647379ae8738">transmissionQueueSize()</a>, and <a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
        i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
        opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
    <span class="keywordflow">return</span> &amp;(<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].transmissionQueue);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2c8b0bfbaafaf1b4180a636d3e4711b0"></a><!-- doxytag: member="Ieee80211Mac::transmissionQueueEmpty" ref="a2c8b0bfbaafaf1b4180a636d3e4711b0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#a2c8b0bfbaafaf1b4180a636d3e4711b0">Ieee80211Mac::transmissionQueueEmpty</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
       <span class="keywordflow">if</span> (!<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>(i)-&gt;empty()) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa6547247b1a7c9673b10647379ae8738"></a><!-- doxytag: member="Ieee80211Mac::transmissionQueueSize" ref="aa6547247b1a7c9673b10647379ae8738" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_ieee80211_mac.html#aa6547247b1a7c9673b10647379ae8738">Ieee80211Mac::transmissionQueueSize</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a3c78df80f39331fe0c35a19b2a991714">handleUpperMsg()</a>, <a class="el" href="class_ieee80211_mac.html#a692ea7349e92100524b65eb15649c0ea">mappingAccessCategory()</a>, and <a class="el" href="class_ieee80211_mac.html#af9ffa2b13e0336e9cc15334dea0122da">popTransmissionQueue()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> totalSize=0;
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="class_ieee80211_mac.html#ab61f0fc949ca3c755c8028dc2239fda2">numCategories</a>(); i++)
            totalSize+=<a class="code" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue</a>(i)-&gt;size();
    <span class="keywordflow">return</span> totalSize;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a355c85be7885e389bd989d08e02e54a9"></a><!-- doxytag: member="Ieee80211Mac::TXOP" ref="a355c85be7885e389bd989d08e02e54a9" args="(int i=&#45;1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t &amp; <a class="el" href="class_ieee80211_mac.html#a355c85be7885e389bd989d08e02e54a9">Ieee80211Mac::TXOP</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em> = <code>-1</code></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (i==-1)
         i = <a class="code" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff" title="Indicates which queue is acite.">currentAC</a>;
    <span class="keywordflow">if</span> (i&gt;=(<span class="keywordtype">int</span>)<a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>.size())
         opp_error(<span class="stringliteral">&quot;AC doesn&#39;t exist&quot;</span>);
     <span class="keywordflow">return</span> <a class="code" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">edcCAF</a>[i].TXOP;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a1235ac69bf0f8224b85a65727845c530"></a><!-- doxytag: member="Ieee80211Mac::_snr" ref="a1235ac69bf0f8224b85a65727845c530" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#a1235ac69bf0f8224b85a65727845c530">Ieee80211Mac::_snr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a3c12af5380d900067de2346248e5fc57"></a><!-- doxytag: member="Ieee80211Mac::address" ref="a3c12af5380d900067de2346248e5fc57" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_a_c_address.html">MACAddress</a> <a class="el" href="class_ieee80211_mac.html#a3c12af5380d900067de2346248e5fc57">Ieee80211Mac::address</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>MAC address. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aec5d4575e8b8f4339815208c394f86cc">buildRTSFrame()</a>, <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, <a class="el" href="class_ieee80211_mac.html#a3c78df80f39331fe0c35a19b2a991714">handleUpperMsg()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#a6a44f63a391702d7e31078eae7fe453b">isForUs()</a>, <a class="el" href="class_ieee80211_mac.html#a9c499d1e9e72020fe52e7c39ac4e8759">isSentByUs()</a>, and <a class="el" href="class_ieee80211_mac.html#a306f0e039efc2ede2e2e209bf02f7b1a">registerInterface()</a>.</p>

</div>
</div>
<a class="anchor" id="af3cf1a0d1737d69c490ef2fdf9595f3f"></a><!-- doxytag: member="Ieee80211Mac::asfTuplesList" ref="af3cf1a0d1737d69c490ef2fdf9595f3f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_mac.html#a95569d10cacb1b4a69b1014e534d5109">Ieee80211ASFTupleList</a> <a class="el" href="class_ieee80211_mac.html#af3cf1a0d1737d69c490ef2fdf9595f3f">Ieee80211Mac::asfTuplesList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ae6912255bec9031597492000db0a5dd8">isDuplicated()</a>, and <a class="el" href="class_ieee80211_mac.html#ae04ce2e36d6e1271b6c43ba302b244b1">removeOldTuplesFromDuplicateMap()</a>.</p>

</div>
</div>
<a class="anchor" id="a673b1d429eb5b3317f6b21a8163e3376"></a><!-- doxytag: member="Ieee80211Mac::autoBitrate" ref="a673b1d429eb5b3317f6b21a8163e3376" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a673b1d429eb5b3317f6b21a8163e3376">Ieee80211Mac::autoBitrate</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a4724f434c9447f8127bbe9ecf8959c4f">configureAutoBitRate()</a>.</p>

</div>
</div>
<a class="anchor" id="a1bb21c978ee1dced3878113908a6cc56"></a><!-- doxytag: member="Ieee80211Mac::basicBitrate" ref="a1bb21c978ee1dced3878113908a6cc56" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#a1bb21c978ee1dced3878113908a6cc56">Ieee80211Mac::basicBitrate</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The basic bitrate (1 or 2 Mbps) is used to transmit control frames and multicast/broadcast frames. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a7eab1962fd94c95151d62e3fb71253e0">buildACKFrame()</a>, <a class="el" href="class_ieee80211_mac.html#aaea047b56dcec7dc99d9681138c1f719">buildCTSFrame()</a>, <a class="el" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">buildDataFrame()</a>, <a class="el" href="class_ieee80211_mac.html#aec5d4575e8b8f4339815208c394f86cc">buildRTSFrame()</a>, <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#a916864ac7a266c8fdf466a185c3a68dc">scheduleCTSTimeoutPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">scheduleDataTimeoutPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame()</a>, and <a class="el" href="class_ieee80211_mac.html#a90256fefdfde93f0f350a100c8b94eda">setBasicBitrate()</a>.</p>

</div>
</div>
<a class="anchor" id="a1a66661cea11c9b2bcf69076d85b70c3"></a><!-- doxytag: member="Ieee80211Mac::bitrate" ref="a1a66661cea11c9b2bcf69076d85b70c3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#a1a66661cea11c9b2bcf69076d85b70c3">Ieee80211Mac::bitrate</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The bitrate is used to send unicast data and mgmt frames; be sure to use a valid 802.11 bitrate. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">buildDataFrame()</a>, <a class="el" href="class_ieee80211_mac.html#a938984c4144284ab225e087b6789ce71">computeFrameDuration()</a>, <a class="el" href="class_ieee80211_mac.html#adade11623fcc50f3348555cace3c9490">getBitrate()</a>, <a class="el" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS()</a>, <a class="el" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">scheduleDataTimeoutPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a0882369893be085f070617d2c0ea77b4">setBitrate()</a>.</p>

</div>
</div>
<a class="anchor" id="adeba876dd2315568f2ae52007c9a4106"></a><!-- doxytag: member="Ieee80211Mac::classifier" ref="adeba876dd2315568f2ae52007c9a4106" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_qo_s_classifier.html">IQoSClassifier</a>* <a class="el" href="class_ieee80211_mac.html#adeba876dd2315568f2ae52007c9a4106">Ieee80211Mac::classifier</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Arbitration interframe space number. </p>
<p>The duration AIFS[AC] is a duration derived from the value AIFSN[AC] by the relation AIFS[AC] = AIFSN[AC] × aSlotTime + aSIFSTime. See spec 7.3.2.29 Remaining backoff period in seconds True if backoff is enabled TXOP parametr Number of frame retransmission attempts, this is a simpification of SLRC and SSRC, see 9.2.4 in the spec </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a34230eadfc933351daa3921147113e67">Ieee80211Mac()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#a692ea7349e92100524b65eb15649c0ea">mappingAccessCategory()</a>.</p>

</div>
</div>
<a class="anchor" id="af867e8336a2e4ec59e81f3fa628c877d"></a><!-- doxytag: member="Ieee80211Mac::contI" ref="af867e8336a2e4ec59e81f3fa628c877d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#af867e8336a2e4ec59e81f3fa628c877d">Ieee80211Mac::contI</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a18ed7f494325bfce7e9d8202b17a6396"></a><!-- doxytag: member="Ieee80211Mac::contJ" ref="a18ed7f494325bfce7e9d8202b17a6396" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a18ed7f494325bfce7e9d8202b17a6396">Ieee80211Mac::contJ</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a41716f434221609b979a544e8f0e85ff"></a><!-- doxytag: member="Ieee80211Mac::currentAC" ref="a41716f434221609b979a544e8f0e85ff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a41716f434221609b979a544e8f0e85ff">Ieee80211Mac::currentAC</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Indicates which queue is acite. </p>
<p>Depends on access category. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9ac06ffa3e8b858168973ffc75cadf29">AIFSN()</a>, <a class="el" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff()</a>, <a class="el" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#abc98919400f5ba39dde97589f4a4c7f7">bites()</a>, <a class="el" href="class_ieee80211_mac.html#a8a81c5b96c8f83712049eabf4a4c1a0c">cwMax()</a>, <a class="el" href="class_ieee80211_mac.html#afd3049b4415fb2e0e0aa69ee8a4735fc">cwMin()</a>, <a class="el" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff()</a>, <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, <a class="el" href="class_ieee80211_mac.html#aee1c346611b9f5515aeadded10d96ca0">jitter()</a>, <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>, <a class="el" href="class_ieee80211_mac.html#ac4dab428b184257867acca0349bc187c">macDelay()</a>, <a class="el" href="class_ieee80211_mac.html#a692ea7349e92100524b65eb15649c0ea">mappingAccessCategory()</a>, <a class="el" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">maxjitter()</a>, <a class="el" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">minjitter()</a>, <a class="el" href="class_ieee80211_mac.html#a97764bfd499bb2f781c55edffd0359b2">numDropped()</a>, <a class="el" href="class_ieee80211_mac.html#a94fdb1fcc53581be97d70feee63a3ab6">numGivenUp()</a>, <a class="el" href="class_ieee80211_mac.html#a92d78e95b726f22b3ce726be0e6807fd">numRetry()</a>, <a class="el" href="class_ieee80211_mac.html#a33ead2b36b8c62088f7106b154af22af">numSent()</a>, <a class="el" href="class_ieee80211_mac.html#a4b6a1ca005a57bfd5447c9a853d0247d">numSentWithoutRetry()</a>, <a class="el" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter()</a>, <a class="el" href="class_ieee80211_mac.html#a2e885fc167155dfd1e9ecbf2d0058807">scheduleAIFSPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame()</a>, <a class="el" href="class_ieee80211_mac.html#a916d6ad78851a4338821a4e456b754b5">throughput()</a>, <a class="el" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue()</a>, and <a class="el" href="class_ieee80211_mac.html#a355c85be7885e389bd989d08e02e54a9">TXOP()</a>.</p>

</div>
</div>
<a class="anchor" id="ac299184b8c8043c2e345d5aa5247e58a"></a><!-- doxytag: member="Ieee80211Mac::cwMaxData" ref="ac299184b8c8043c2e345d5aa5247e58a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#ac299184b8c8043c2e345d5aa5247e58a">Ieee80211Mac::cwMaxData</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Maximum contention window. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a620e6bf7dd85045ca5f65164a47e1cfd"></a><!-- doxytag: member="Ieee80211Mac::cwMinData" ref="a620e6bf7dd85045ca5f65164a47e1cfd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a620e6bf7dd85045ca5f65164a47e1cfd">Ieee80211Mac::cwMinData</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Minimum contention window. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="adccf12e38c30df4ffe955abe34409b3d"></a><!-- doxytag: member="Ieee80211Mac::cwMinMulticast" ref="adccf12e38c30df4ffe955abe34409b3d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#adccf12e38c30df4ffe955abe34409b3d">Ieee80211Mac::cwMinMulticast</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Contention window size for multicast messages. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ab34517c360aa546041515d97c354dd43">computeBackoffPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d969292092b4220541de089ab25b250"></a><!-- doxytag: member="Ieee80211Mac::defaultAC" ref="a5d969292092b4220541de089ab25b250" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a5d969292092b4220541de089ab25b250">Ieee80211Mac::defaultAC</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Default access catagory. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a4aae6b9b700f7d85163553cece6f09d9"></a><!-- doxytag: member="Ieee80211Mac::duplicateDetect" ref="a4aae6b9b700f7d85163553cece6f09d9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#a4aae6b9b700f7d85163553cece6f09d9">Ieee80211Mac::duplicateDetect</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A list of last sender, sequence and fragment number tuples to identify duplicates, see spec 9.2.9. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ae6912255bec9031597492000db0a5dd8">isDuplicated()</a>, and <a class="el" href="class_ieee80211_mac.html#ae04ce2e36d6e1271b6c43ba302b244b1">removeOldTuplesFromDuplicateMap()</a>.</p>

</div>
</div>
<a class="anchor" id="a2e70e03af5120cea1b89769d4e7a5f0a"></a><!-- doxytag: member="Ieee80211Mac::duplicateTimeOut" ref="a2e70e03af5120cea1b89769d4e7a5f0a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#a2e70e03af5120cea1b89769d4e7a5f0a">Ieee80211Mac::duplicateTimeOut</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ae04ce2e36d6e1271b6c43ba302b244b1">removeOldTuplesFromDuplicateMap()</a>.</p>

</div>
</div>
<a class="anchor" id="a438c7408adea8c8cf5c75cf929db9dcf"></a><!-- doxytag: member="Ieee80211Mac::edcCAF" ref="a438c7408adea8c8cf5c75cf929db9dcf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="struct_ieee80211_mac_1_1_edca.html">Edca</a>&gt; <a class="el" href="class_ieee80211_mac.html#a438c7408adea8c8cf5c75cf929db9dcf">Ieee80211Mac::edcCAF</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9ac06ffa3e8b858168973ffc75cadf29">AIFSN()</a>, <a class="el" href="class_ieee80211_mac.html#a3f68085d6a98970f4fae1595fd24a090">backoff()</a>, <a class="el" href="class_ieee80211_mac.html#acf4209fec23884b4540f7bf771241b41">backoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#abc98919400f5ba39dde97589f4a4c7f7">bites()</a>, <a class="el" href="class_ieee80211_mac.html#a8a81c5b96c8f83712049eabf4a4c1a0c">cwMax()</a>, <a class="el" href="class_ieee80211_mac.html#afd3049b4415fb2e0e0aa69ee8a4735fc">cwMin()</a>, <a class="el" href="class_ieee80211_mac.html#a2733eca762ab757481001674d2a66f66">endAIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a9316b09407f53cb315b9c3560295cc2a">endBackoff()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, <a class="el" href="class_ieee80211_mac.html#a4496ce674d2048d8deb18b277c7d7b25">isBakoffMsg()</a>, <a class="el" href="class_ieee80211_mac.html#aee1c346611b9f5515aeadded10d96ca0">jitter()</a>, <a class="el" href="class_ieee80211_mac.html#ac4dab428b184257867acca0349bc187c">macDelay()</a>, <a class="el" href="class_ieee80211_mac.html#aef6b1279642200505ffe2117ecdb5b76">maxjitter()</a>, <a class="el" href="class_ieee80211_mac.html#a37117c918d06f93034fbf277753cde9b">minjitter()</a>, <a class="el" href="class_ieee80211_mac.html#a97764bfd499bb2f781c55edffd0359b2">numDropped()</a>, <a class="el" href="class_ieee80211_mac.html#a94fdb1fcc53581be97d70feee63a3ab6">numGivenUp()</a>, <a class="el" href="class_ieee80211_mac.html#a92d78e95b726f22b3ce726be0e6807fd">numRetry()</a>, <a class="el" href="class_ieee80211_mac.html#a33ead2b36b8c62088f7106b154af22af">numSent()</a>, <a class="el" href="class_ieee80211_mac.html#a4b6a1ca005a57bfd5447c9a853d0247d">numSentWithoutRetry()</a>, <a class="el" href="class_ieee80211_mac.html#a600699ba09c953e926895c81357eb752">retryCounter()</a>, <a class="el" href="class_ieee80211_mac.html#a916d6ad78851a4338821a4e456b754b5">throughput()</a>, <a class="el" href="class_ieee80211_mac.html#abd8f0fe94d80b4fd21659dd25a4aa7e9">transmissionQueue()</a>, <a class="el" href="class_ieee80211_mac.html#a355c85be7885e389bd989d08e02e54a9">TXOP()</a>, and <a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="aa3aff37ddc0c81be4e3a8a8f27418f20"></a><!-- doxytag: member="Ieee80211Mac::edcCAFOutVector" ref="aa3aff37ddc0c81be4e3a8a8f27418f20" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="struct_ieee80211_mac_1_1_edca_out_vector.html">EdcaOutVector</a>&gt; <a class="el" href="class_ieee80211_mac.html#aa3aff37ddc0c81be4e3a8a8f27418f20">Ieee80211Mac::edcCAFOutVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#aee1c346611b9f5515aeadded10d96ca0">jitter()</a>, <a class="el" href="class_ieee80211_mac.html#ac4dab428b184257867acca0349bc187c">macDelay()</a>, <a class="el" href="class_ieee80211_mac.html#a916d6ad78851a4338821a4e456b754b5">throughput()</a>, and <a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="a5bec0576b30d76fcb7f6546a83e6194a"></a><!-- doxytag: member="Ieee80211Mac::endDIFS" ref="a5bec0576b30d76fcb7f6546a83e6194a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#a5bec0576b30d76fcb7f6546a83e6194a">Ieee80211Mac::endDIFS</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>End of the Data Inter-Frame Time period. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a1d38962577c615ad8392c4d3872397a6">cancelAIFSPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a1427f98783abfa545523111cd3f209bb">cancelDIFSPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#a34230eadfc933351daa3921147113e67">Ieee80211Mac()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#a2e885fc167155dfd1e9ecbf2d0058807">scheduleAIFSPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a84bd3147b655f8396f37926fe34a17ad">scheduleDIFSPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f69601950c961a483e33c1455390f9a"></a><!-- doxytag: member="Ieee80211Mac::endReserve" ref="a0f69601950c961a483e33c1455390f9a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#a0f69601950c961a483e33c1455390f9a">Ieee80211Mac::endReserve</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>End of medium reserve period (NAV) when two other nodes were communicating on the channel. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#a34230eadfc933351daa3921147113e67">Ieee80211Mac()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729">isMediumFree()</a>, <a class="el" href="class_ieee80211_mac.html#adf18b82f7ec2838535e84fba8ef43f3e">isMediumStateChange()</a>, <a class="el" href="class_ieee80211_mac.html#a21662171dd8c6356df3c8b050d7c9414">scheduleReservePeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="a72b8ec2bcb1b505a709eab0ff96799dc"></a><!-- doxytag: member="Ieee80211Mac::endSIFS" ref="a72b8ec2bcb1b505a709eab0ff96799dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#a72b8ec2bcb1b505a709eab0ff96799dc">Ieee80211Mac::endSIFS</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>End of the Short Inter-Frame Time period. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a3ae0423bce927f7db18f55a88e44e20a">getFrameReceivedBeforeSIFS()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#a34230eadfc933351daa3921147113e67">Ieee80211Mac()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#a325e59dc74a3ad59596933aaf96012a7">scheduleSIFSPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a1fa778f58e945ac0b347dfa66785224b">sendACKFrameOnEndSIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a821d34cb04fd6ebd9b0d6989b963614d">sendCTSFrameOnEndSIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a535d6bc217f1cfc210fe798c3b89a114">sendDataFrameOnEndSIFS()</a>, and <a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="a27bd612a3164002020b5c315fb096f79"></a><!-- doxytag: member="Ieee80211Mac::endTimeout" ref="a27bd612a3164002020b5c315fb096f79" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#a27bd612a3164002020b5c315fb096f79">Ieee80211Mac::endTimeout</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>End of the backoff period. </p>
<p>Timeout after the transmission of an RTS, a CTS, or a DATA frame </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9a3d534aa427c8ec65713ad1f3e0e223">cancelTimeoutPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#a34230eadfc933351daa3921147113e67">Ieee80211Mac()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#a916864ac7a266c8fdf466a185c3a68dc">scheduleCTSTimeoutPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">scheduleDataTimeoutPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#ad258b3308057764df66b6ea932a94791">scheduleMulticastTimeoutPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="a72bbacef145a4da026a84c7666737e34"></a><!-- doxytag: member="Ieee80211Mac::endTXOP" ref="a72bbacef145a4da026a84c7666737e34" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#a72bbacef145a4da026a84c7666737e34">Ieee80211Mac::endTXOP</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>End of the Arbitration Inter-Frame Time period. </p>
<p>End of the TXOP time limit period </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame()</a>, and <a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="a7dad9095f1d77e09887875ad87409da3"></a><!-- doxytag: member="Ieee80211Mac::failedCounter" ref="a7dad9095f1d77e09887875ad87409da3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a7dad9095f1d77e09887875ad87409da3">Ieee80211Mac::failedCounter</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed()</a>, and <a class="el" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">reportDataOk()</a>.</p>

</div>
</div>
<a class="anchor" id="abe95692a0ffe9238206a2ef3d797ab82"></a><!-- doxytag: member="Ieee80211Mac::fixFSM" ref="abe95692a0ffe9238206a2ef3d797ab82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#abe95692a0ffe9238206a2ef3d797ab82">Ieee80211Mac::fixFSM</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="afad1fa013c358e58d9b32c447639c939"></a><!-- doxytag: member="Ieee80211Mac::forceBitRate" ref="afad1fa013c358e58d9b32c447639c939" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#afad1fa013c358e58d9b32c447639c939">Ieee80211Mac::forceBitRate</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a4724f434c9447f8127bbe9ecf8959c4f">configureAutoBitRate()</a>, and <a class="el" href="class_ieee80211_mac.html#a8bcfae864475a658f025bdf618588ec9">setBitrateFrame()</a>.</p>

</div>
</div>
<a class="anchor" id="a57037d84468799bb925e201a2cd0cf82"></a><!-- doxytag: member="Ieee80211Mac::fr" ref="a57037d84468799bb925e201a2cd0cf82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_data_or_mgmt_frame.html">Ieee80211DataOrMgmtFrame</a>* <a class="el" href="class_ieee80211_mac.html#a57037d84468799bb925e201a2cd0cf82">Ieee80211Mac::fr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>.</p>

</div>
</div>
<a class="anchor" id="af6a8a67f828409cf76bf3c3f0fd6d35b"></a><!-- doxytag: member="Ieee80211Mac::fragmentationThreshold" ref="af6a8a67f828409cf76bf3c3f0fd6d35b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="class_ieee80211_mac.html#af6a8a67f828409cf76bf3c3f0fd6d35b">Ieee80211Mac::fragmentationThreshold</a> = 2346<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Messages longer than this threshold will be sent in multiple fragments. </p>
<p>see spec 361 </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a3c78df80f39331fe0c35a19b2a991714">handleUpperMsg()</a>.</p>

</div>
</div>
<a class="anchor" id="a43b47b9bec83a94863108b1b3ae34bb6"></a><!-- doxytag: member="Ieee80211Mac::fsm" ref="a43b47b9bec83a94863108b1b3ae34bb6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cFSM <a class="el" href="class_ieee80211_mac.html#a43b47b9bec83a94863108b1b3ae34bb6">Ieee80211Mac::fsm</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aedaaf3e337f2d4a0790dbe392ac9f481">handleCommand()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, and <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>.</p>

</div>
</div>
<a class="anchor" id="af482d436d2854d2b332d9998991832fc"></a><!-- doxytag: member="Ieee80211Mac::intrateIndex" ref="af482d436d2854d2b332d9998991832fc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_ieee80211_mac.html#af482d436d2854d2b332d9998991832fc">Ieee80211Mac::intrateIndex</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a82e1ab5d7dcef13a8fd670a6d4ed26fc"></a><!-- doxytag: member="Ieee80211Mac::last" ref="a82e1ab5d7dcef13a8fd670a6d4ed26fc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#a82e1ab5d7dcef13a8fd670a6d4ed26fc">Ieee80211Mac::last</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="aae4419ab39198abdf1fc8955b07e5e20"></a><!-- doxytag: member="Ieee80211Mac::lastReceiveFailed" ref="aae4419ab39198abdf1fc8955b07e5e20" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#aae4419ab39198abdf1fc8955b07e5e20">Ieee80211Mac::lastReceiveFailed</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Indicates that the last frame received had bit errors in it or there was a collision during receiving the frame. </p>
<p>If this flag is set, then the MAC will wait EIFS - DIFS + AIFS instead of AIFS period of time in WAITAIFS state. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#a2e885fc167155dfd1e9ecbf2d0058807">scheduleAIFSPeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a84bd3147b655f8396f37926fe34a17ad">scheduleDIFSPeriod()</a>.</p>

</div>
</div>
<a class="anchor" id="a57492265daaf979dabb33ad6467b6bc4"></a><!-- doxytag: member="Ieee80211Mac::lastTimeDelete" ref="a57492265daaf979dabb33ad6467b6bc4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#a57492265daaf979dabb33ad6467b6bc4">Ieee80211Mac::lastTimeDelete</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ae04ce2e36d6e1271b6c43ba302b244b1">removeOldTuplesFromDuplicateMap()</a>.</p>

</div>
</div>
<a class="anchor" id="adf9459416f0559f0a42f455e41658754"></a><!-- doxytag: member="Ieee80211Mac::lossRate" ref="adf9459416f0559f0a42f455e41658754" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#adf9459416f0559f0a42f455e41658754">Ieee80211Mac::lossRate</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>.</p>

</div>
</div>
<a class="anchor" id="a06b55f6481683d64db13605b27b9537a"></a><!-- doxytag: member="Ieee80211Mac::maxQueueSize" ref="a06b55f6481683d64db13605b27b9537a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a06b55f6481683d64db13605b27b9537a">Ieee80211Mac::maxQueueSize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Maximum number of frames in the queue; should be set in the omnetpp.ini. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a3c78df80f39331fe0c35a19b2a991714">handleUpperMsg()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#a692ea7349e92100524b65eb15649c0ea">mappingAccessCategory()</a>, and <a class="el" href="class_ieee80211_mac.html#af9ffa2b13e0336e9cc15334dea0122da">popTransmissionQueue()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8e98f3dc11067d8ae8a7b8f7aa42811"></a><!-- doxytag: member="Ieee80211Mac::maxSuccessThreshold" ref="ab8e98f3dc11067d8ae8a7b8f7aa42811" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#ab8e98f3dc11067d8ae8a7b8f7aa42811">Ieee80211Mac::maxSuccessThreshold</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a4724f434c9447f8127bbe9ecf8959c4f">configureAutoBitRate()</a>, and <a class="el" href="class_ieee80211_mac.html#a6b11301b46f8e34c5c9aecd8c3645ec3">reportRecoveryFailure()</a>.</p>

</div>
</div>
<a class="anchor" id="add8e4e32b5dc5f2e4960563eb457ed40"></a><!-- doxytag: member="Ieee80211Mac::mediumStateChange" ref="add8e4e32b5dc5f2e4960563eb457ed40" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#add8e4e32b5dc5f2e4960563eb457ed40">Ieee80211Mac::mediumStateChange</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="class_radio.html" title="Abstract base class for radio modules.">Radio</a> state change self message. </p>
<p>Currently this is optimized away and sent directly </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a34230eadfc933351daa3921147113e67">Ieee80211Mac()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#adf18b82f7ec2838535e84fba8ef43f3e">isMediumStateChange()</a>, <a class="el" href="class_ieee80211_mac.html#a6844cdfc80c0c0f6b2faadff8a9abef9">receiveChangeNotification()</a>, <a class="el" href="class_ieee80211_mac.html#a21662171dd8c6356df3c8b050d7c9414">scheduleReservePeriod()</a>, and <a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="ad9ad08bd94c81b48e46293bd51a51e4b"></a><!-- doxytag: member="Ieee80211Mac::minSuccessThreshold" ref="ad9ad08bd94c81b48e46293bd51a51e4b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#ad9ad08bd94c81b48e46293bd51a51e4b">Ieee80211Mac::minSuccessThreshold</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a4724f434c9447f8127bbe9ecf8959c4f">configureAutoBitRate()</a>, <a class="el" href="class_ieee80211_mac.html#a7c39a34aafb4b133e176c1fe37c379ad">getMinSuccessThreshold()</a>, and <a class="el" href="class_ieee80211_mac.html#a90d176964142b5fc4645b737a85674bc">setSuccessThreshold()</a>.</p>

</div>
</div>
<a class="anchor" id="a67ce877806468a78b227697716eb8c01"></a><!-- doxytag: member="Ieee80211Mac::minTimerTimeout" ref="a67ce877806468a78b227697716eb8c01" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a67ce877806468a78b227697716eb8c01">Ieee80211Mac::minTimerTimeout</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a4724f434c9447f8127bbe9ecf8959c4f">configureAutoBitRate()</a>, <a class="el" href="class_ieee80211_mac.html#acf1bcb5d51fb31021b076e42525d4a83">getMinTimerTimeout()</a>, and <a class="el" href="class_ieee80211_mac.html#a024353fcbe63876a1098dc7d3829b624">setTimerTimeout()</a>.</p>

</div>
</div>
<a class="anchor" id="a4d34e2aa99b6fd38ef07005d8cc7be99"></a><!-- doxytag: member="Ieee80211Mac::mode" ref="a4d34e2aa99b6fd38ef07005d8cc7be99" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ieee80211_mac.html#acc067e4a0585c9fbac4ce009e2ed03ca">Mode</a> <a class="el" href="class_ieee80211_mac.html#a4d34e2aa99b6fd38ef07005d8cc7be99">Ieee80211Mac::mode</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ade19198da5d240de1ea31321fef496c0">getControlAnswerMode()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>, and <a class="el" href="class_ieee80211_mac.html#a030408679db4d3c498bf79032baa4618">setMode()</a>.</p>

</div>
</div>
<a class="anchor" id="a591c8f37742e3960afb1a50df3e6673f"></a><!-- doxytag: member="Ieee80211Mac::nav" ref="a591c8f37742e3960afb1a50df3e6673f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#a591c8f37742e3960afb1a50df3e6673f">Ieee80211Mac::nav</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>True during network allocation period. </p>
<p>This flag is present to be able to watch this state. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>, and <a class="el" href="class_ieee80211_mac.html#a21662171dd8c6356df3c8b050d7c9414">scheduleReservePeriod()</a>.</p>

</div>
</div>
<a class="anchor" id="a4ac1aa9e7f916504cda9ab22991636ff"></a><!-- doxytag: member="Ieee80211Mac::numAckSend" ref="a4ac1aa9e7f916504cda9ab22991636ff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#a4ac1aa9e7f916504cda9ab22991636ff">Ieee80211Mac::numAckSend</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#a0afcec3ebbe4fac7c63ac32937604540">sendACKFrame()</a>.</p>

</div>
</div>
<a class="anchor" id="ac16d02e12179c33220ba6483b1ab724b"></a><!-- doxytag: member="Ieee80211Mac::numBites" ref="ac16d02e12179c33220ba6483b1ab724b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#ac16d02e12179c33220ba6483b1ab724b">Ieee80211Mac::numBites</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9820b65e4aa7296332430bb5a35bf68f">finish()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>.</p>

</div>
</div>
<a class="anchor" id="a7cde61a60a0ba921bec433b5d1113c84"></a><!-- doxytag: member="Ieee80211Mac::numCollision" ref="a7cde61a60a0ba921bec433b5d1113c84" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#a7cde61a60a0ba921bec433b5d1113c84">Ieee80211Mac::numCollision</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9820b65e4aa7296332430bb5a35bf68f">finish()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf2d7e0cd701202eb765b1b9c77bb658"></a><!-- doxytag: member="Ieee80211Mac::numInternalCollision" ref="aaf2d7e0cd701202eb765b1b9c77bb658" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#aaf2d7e0cd701202eb765b1b9c77bb658">Ieee80211Mac::numInternalCollision</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9820b65e4aa7296332430bb5a35bf68f">finish()</a>, <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a44149d10cf8b6f6b1f906d68d2157714"></a><!-- doxytag: member="Ieee80211Mac::numReceived" ref="a44149d10cf8b6f6b1f906d68d2157714" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#a44149d10cf8b6f6b1f906d68d2157714">Ieee80211Mac::numReceived</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9820b65e4aa7296332430bb5a35bf68f">finish()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>.</p>

</div>
</div>
<a class="anchor" id="a687d1cd47799dc6f23dba5fff9b65318"></a><!-- doxytag: member="Ieee80211Mac::numReceivedMulticast" ref="a687d1cd47799dc6f23dba5fff9b65318" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#a687d1cd47799dc6f23dba5fff9b65318">Ieee80211Mac::numReceivedMulticast</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>.</p>

</div>
</div>
<a class="anchor" id="ac9f8379cbc211038c510bef1c11ee3d2"></a><!-- doxytag: member="Ieee80211Mac::numReceivedOther" ref="ac9f8379cbc211038c510bef1c11ee3d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#ac9f8379cbc211038c510bef1c11ee3d2">Ieee80211Mac::numReceivedOther</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a82f4ea0e2f668f1ae81478595f446085"></a><!-- doxytag: member="Ieee80211Mac::numSentMulticast" ref="a82f4ea0e2f668f1ae81478595f446085" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#a82f4ea0e2f668f1ae81478595f446085">Ieee80211Mac::numSentMulticast</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>.</p>

</div>
</div>
<a class="anchor" id="ac4bf79c580118820bdecd1a001711049"></a><!-- doxytag: member="Ieee80211Mac::numSentTXOP" ref="ac4bf79c580118820bdecd1a001711049" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ieee80211_mac.html#ac4bf79c580118820bdecd1a001711049">Ieee80211Mac::numSentTXOP</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9820b65e4aa7296332430bb5a35bf68f">finish()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>.</p>

</div>
</div>
<a class="anchor" id="acfedb65b560767ae3701903e5dcdf141"></a><!-- doxytag: member="Ieee80211Mac::oldcurrentAC" ref="acfedb65b560767ae3701903e5dcdf141" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#acfedb65b560767ae3701903e5dcdf141">Ieee80211Mac::oldcurrentAC</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remember currentAC. </p>
<p>We need this to figure out internal colision. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, and <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>.</p>

</div>
</div>
<a class="anchor" id="a88adacd4e547adfce7f063b727bfa1af"></a><!-- doxytag: member="Ieee80211Mac::opMode" ref="a88adacd4e547adfce7f063b727bfa1af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="class_ieee80211_mac.html#a88adacd4e547adfce7f063b727bfa1af">Ieee80211Mac::opMode</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a38e18309549f34d7b355c1b1f4aab298">computeFrameDuration()</a>, <a class="el" href="class_ieee80211_mac.html#ade19198da5d240de1ea31321fef496c0">getControlAnswerMode()</a>, <a class="el" href="class_ieee80211_mac.html#a87bec8aaae96a4fe5d70816d48477183">getEIFS()</a>, <a class="el" href="class_ieee80211_mac.html#a95a64f0d0e6a5f300868187772051272">getHeaderTime()</a>, <a class="el" href="class_ieee80211_mac.html#a0397424fc4167432b39352caafd8ce82">getMaxBitrate()</a>, <a class="el" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS()</a>, <a class="el" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed()</a>, <a class="el" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">reportDataOk()</a>, and <a class="el" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">scheduleDataTimeoutPeriod()</a>.</p>

</div>
</div>
<a class="anchor" id="ad747f5e3abaad56a3fb03ec39426c27e"></a><!-- doxytag: member="Ieee80211Mac::pendingRadioConfigMsg" ref="ad747f5e3abaad56a3fb03ec39426c27e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#ad747f5e3abaad56a3fb03ec39426c27e">Ieee80211Mac::pendingRadioConfigMsg</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The last change channel message received and not yet sent to the physical layer, or NULL. </p>
<p>The message will be sent down when the state goes to IDLE or DEFER next time. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aedaaf3e337f2d4a0790dbe392ac9f481">handleCommand()</a>, <a class="el" href="class_ieee80211_mac.html#a34230eadfc933351daa3921147113e67">Ieee80211Mac()</a>, <a class="el" href="class_ieee80211_mac.html#af24a75754986f091cf9b5e6987bb7bf3">sendDownPendingRadioConfigMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#a5996f42ab538115f55c7f74121276f09">~Ieee80211Mac()</a>.</p>

</div>
</div>
<a class="anchor" id="a044b5bdca2b078f72cb44541a0524fcc"></a><!-- doxytag: member="Ieee80211Mac::PHY_HEADER_LENGTH" ref="a044b5bdca2b078f72cb44541a0524fcc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#a044b5bdca2b078f72cb44541a0524fcc">Ieee80211Mac::PHY_HEADER_LENGTH</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a38e18309549f34d7b355c1b1f4aab298">computeFrameDuration()</a>, <a class="el" href="class_ieee80211_mac.html#a87bec8aaae96a4fe5d70816d48477183">getEIFS()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="afa6210be8edc347e37ae15a2aaa0148c"></a><!-- doxytag: member="Ieee80211Mac::prioritizeMulticast" ref="afa6210be8edc347e37ae15a2aaa0148c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#afa6210be8edc347e37ae15a2aaa0148c">Ieee80211Mac::prioritizeMulticast</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#a692ea7349e92100524b65eb15649c0ea">mappingAccessCategory()</a>.</p>

</div>
</div>
<a class="anchor" id="adb1a6965d57d5bc64344ce47fdffc9bd"></a><!-- doxytag: member="Ieee80211Mac::purgeOldTuples" ref="adb1a6965d57d5bc64344ce47fdffc9bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#adb1a6965d57d5bc64344ce47fdffc9bd">Ieee80211Mac::purgeOldTuples</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a59cc1a59362db4fdf48b81b8e7f62d2e"></a><!-- doxytag: member="Ieee80211Mac::queueModule" ref="a59cc1a59362db4fdf48b81b8e7f62d2e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_passive_queue.html">IPassiveQueue</a>* <a class="el" href="class_ieee80211_mac.html#a59cc1a59362db4fdf48b81b8e7f62d2e">Ieee80211Mac::queueModule</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Passive queue module to request messages from. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a3c78df80f39331fe0c35a19b2a991714">handleUpperMsg()</a>, <a class="el" href="class_ieee80211_mac.html#a76503451f2ddc57bec7426c3f9f919ca">initializeQueueModule()</a>, and <a class="el" href="class_ieee80211_mac.html#af9ffa2b13e0336e9cc15334dea0122da">popTransmissionQueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a70d16f3fdb285db5b2ae29300f9497c3"></a><!-- doxytag: member="Ieee80211Mac::radioModule" ref="a70d16f3fdb285db5b2ae29300f9497c3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a70d16f3fdb285db5b2ae29300f9497c3">Ieee80211Mac::radioModule</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a08443ed66fd8def7cdbce3953cb732c0"></a><!-- doxytag: member="Ieee80211Mac::radioState" ref="a08443ed66fd8def7cdbce3953cb732c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449">RadioState::State</a> <a class="el" href="class_ieee80211_mac.html#a08443ed66fd8def7cdbce3953cb732c0">Ieee80211Mac::radioState</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>XXX Remember for which AC we wait for ACK. </p>
<p>Physical radio (medium) state copied from physical layer </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, <a class="el" href="class_ieee80211_mac.html#aa4550d6a69c5e5a56d2a72ac0dc86729">isMediumFree()</a>, <a class="el" href="class_ieee80211_mac.html#adf18b82f7ec2838535e84fba8ef43f3e">isMediumStateChange()</a>, <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>, <a class="el" href="class_ieee80211_mac.html#a6844cdfc80c0c0f6b2faadff8a9abef9">receiveChangeNotification()</a>, and <a class="el" href="class_ieee80211_mac.html#a21662171dd8c6356df3c8b050d7c9414">scheduleReservePeriod()</a>.</p>

</div>
</div>
<a class="anchor" id="a84539589b7715d29c69d1191a521f45b"></a><!-- doxytag: member="Ieee80211Mac::radioStateVector" ref="a84539589b7715d29c69d1191a521f45b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector <a class="el" href="class_ieee80211_mac.html#a84539589b7715d29c69d1191a521f45b">Ieee80211Mac::radioStateVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#a6844cdfc80c0c0f6b2faadff8a9abef9">receiveChangeNotification()</a>.</p>

</div>
</div>
<a class="anchor" id="a9264658abed42cbff1a44906634b823a"></a><!-- doxytag: member="Ieee80211Mac::rateControlMode" ref="a9264658abed42cbff1a44906634b823a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum { ... }   <a class="el" href="class_ieee80211_mac.html#a9264658abed42cbff1a44906634b823a">Ieee80211Mac::rateControlMode</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a4724f434c9447f8127bbe9ecf8959c4f">configureAutoBitRate()</a>, <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, <a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed()</a>, <a class="el" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">reportDataOk()</a>, <a class="el" href="class_ieee80211_mac.html#aa9441edca636fd2bc5c2194a4f3ed2d7">reportFailure()</a>, <a class="el" href="class_ieee80211_mac.html#a6b11301b46f8e34c5c9aecd8c3645ec3">reportRecoveryFailure()</a>, <a class="el" href="class_ieee80211_mac.html#ace0608e9ca57414b54817d04b184b120">resetStateVariables()</a>, <a class="el" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission()</a>, and <a class="el" href="class_ieee80211_mac.html#a8bcfae864475a658f025bdf618588ec9">setBitrateFrame()</a>.</p>

</div>
</div>
<a class="anchor" id="a48aeac1e36af33c685763297104bb124"></a><!-- doxytag: member="Ieee80211Mac::rateIndex" ref="a48aeac1e36af33c685763297104bb124" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a48aeac1e36af33c685763297104bb124">Ieee80211Mac::rateIndex</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed()</a>, and <a class="el" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">reportDataOk()</a>.</p>

</div>
</div>
<a class="anchor" id="a58859ce182dc8bee111ae1099d42415e"></a><!-- doxytag: member="Ieee80211Mac::recBytesOverPeriod" ref="a58859ce182dc8bee111ae1099d42415e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="class_ieee80211_mac.html#a58859ce182dc8bee111ae1099d42415e">Ieee80211Mac::recBytesOverPeriod</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a2197febe20e5c10f185ab3e1c27dfeb6"></a><!-- doxytag: member="Ieee80211Mac::recFrameModulationType" ref="a2197febe20e5c10f185ab3e1c27dfeb6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_modulation_type.html">ModulationType</a> <a class="el" href="class_ieee80211_mac.html#a2197febe20e5c10f185ab3e1c27dfeb6">Ieee80211Mac::recFrameModulationType</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>.</p>

</div>
</div>
<a class="anchor" id="a43577335d5075e95b8df5b50dc4c0fed"></a><!-- doxytag: member="Ieee80211Mac::recovery" ref="a43577335d5075e95b8df5b50dc4c0fed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#a43577335d5075e95b8df5b50dc4c0fed">Ieee80211Mac::recovery</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed()</a>, and <a class="el" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">reportDataOk()</a>.</p>

</div>
</div>
<a class="anchor" id="af754205c721d31e0013694d4900e1106"></a><!-- doxytag: member="Ieee80211Mac::recvdThroughput" ref="af754205c721d31e0013694d4900e1106" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#af754205c721d31e0013694d4900e1106">Ieee80211Mac::recvdThroughput</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a1bb03a4c3ab2056a1a3d9cab41388613"></a><!-- doxytag: member="Ieee80211Mac::rtsThreshold" ref="a1bb03a4c3ab2056a1a3d9cab41388613" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a1bb03a4c3ab2056a1a3d9cab41388613">Ieee80211Mac::rtsThreshold</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The minimum length of MPDU to use RTS/CTS mechanism. </p>
<p>0 means always, extremely large value means never. See spec 9.2.6 and 361. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a2ba2e2ad7c0755a57964a3ca70d2c1ad"></a><!-- doxytag: member="Ieee80211Mac::samplingCoeff" ref="a2ba2e2ad7c0755a57964a3ca70d2c1ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a2ba2e2ad7c0755a57964a3ca70d2c1ad">Ieee80211Mac::samplingCoeff</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a109b2d75d8fc4201674478a72bb31762"></a><!-- doxytag: member="Ieee80211Mac::sequenceNumber" ref="a109b2d75d8fc4201674478a72bb31762" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a109b2d75d8fc4201674478a72bb31762">Ieee80211Mac::sequenceNumber</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sequence number to be assigned to the next frame. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a3c78df80f39331fe0c35a19b2a991714">handleUpperMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="aa81f69ceacbbfe39e1a995d6633cf2f1"></a><!-- doxytag: member="Ieee80211Mac::snr" ref="aa81f69ceacbbfe39e1a995d6633cf2f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#aa81f69ceacbbfe39e1a995d6633cf2f1">Ieee80211Mac::snr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>.</p>

</div>
</div>
<a class="anchor" id="af0b94b02412119954ca9e58f497503d1"></a><!-- doxytag: member="Ieee80211Mac::ST" ref="af0b94b02412119954ca9e58f497503d1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#af0b94b02412119954ca9e58f497503d1">Ieee80211Mac::ST</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Slot time 9us(fast slot time 802.11g only) 20us(802.11b / 802.11g backward compatible) </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a784de8a16601c48f1f792adc9a35c321"></a><!-- doxytag: member="Ieee80211Mac::stateVector" ref="a784de8a16601c48f1f792adc9a35c321" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector <a class="el" href="class_ieee80211_mac.html#a784de8a16601c48f1f792adc9a35c321">Ieee80211Mac::stateVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="af5fa0eb384fc17a3a8450061aa4f11df"></a><!-- doxytag: member="Ieee80211Mac::successCoeff" ref="af5fa0eb384fc17a3a8450061aa4f11df" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#af5fa0eb384fc17a3a8450061aa4f11df">Ieee80211Mac::successCoeff</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a4724f434c9447f8127bbe9ecf8959c4f">configureAutoBitRate()</a>, and <a class="el" href="class_ieee80211_mac.html#a6b11301b46f8e34c5c9aecd8c3645ec3">reportRecoveryFailure()</a>.</p>

</div>
</div>
<a class="anchor" id="aab113076ebedf10680d4b5fd0753aea2"></a><!-- doxytag: member="Ieee80211Mac::successCounter" ref="aab113076ebedf10680d4b5fd0753aea2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#aab113076ebedf10680d4b5fd0753aea2">Ieee80211Mac::successCounter</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ac8fae129b2d3a0f489d2aa6fbadaa786">reportDataFailed()</a>, and <a class="el" href="class_ieee80211_mac.html#a6172a0a44f4ca1cbfa51b320c08a6ef6">reportDataOk()</a>.</p>

</div>
</div>
<a class="anchor" id="a5094bc880757a003fe136551735737b4"></a><!-- doxytag: member="Ieee80211Mac::successThreshold" ref="a5094bc880757a003fe136551735737b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a5094bc880757a003fe136551735737b4">Ieee80211Mac::successThreshold</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a4724f434c9447f8127bbe9ecf8959c4f">configureAutoBitRate()</a>, <a class="el" href="class_ieee80211_mac.html#a81af710061696a71d03a0134038c1889">getSuccessThreshold()</a>, and <a class="el" href="class_ieee80211_mac.html#a90d176964142b5fc4645b737a85674bc">setSuccessThreshold()</a>.</p>

</div>
</div>
<a class="anchor" id="afdd5aa78a078969d42c37cd9ae95bcab"></a><!-- doxytag: member="Ieee80211Mac::throughputLastPeriod" ref="afdd5aa78a078969d42c37cd9ae95bcab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#afdd5aa78a078969d42c37cd9ae95bcab">Ieee80211Mac::throughputLastPeriod</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>.</p>

</div>
</div>
<a class="anchor" id="a791b0124c72d0dc60dbc078412aab35b"></a><!-- doxytag: member="Ieee80211Mac::throughputTimePeriod" ref="a791b0124c72d0dc60dbc078412aab35b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#a791b0124c72d0dc60dbc078412aab35b">Ieee80211Mac::throughputTimePeriod</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="af6bf13854ffd2e58b9d536a1e808bbd8"></a><!-- doxytag: member="Ieee80211Mac::throughputTimer" ref="af6bf13854ffd2e58b9d536a1e808bbd8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ieee80211_mac.html#af6bf13854ffd2e58b9d536a1e808bbd8">Ieee80211Mac::throughputTimer</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>.</p>

</div>
</div>
<a class="anchor" id="a0126961db9255a9566252031d9f59a53"></a><!-- doxytag: member="Ieee80211Mac::timer" ref="a0126961db9255a9566252031d9f59a53" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a0126961db9255a9566252031d9f59a53">Ieee80211Mac::timer</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0e4312ce17d8f8bc193863061e3d55f4"></a><!-- doxytag: member="Ieee80211Mac::timerCoeff" ref="a0e4312ce17d8f8bc193863061e3d55f4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ieee80211_mac.html#a0e4312ce17d8f8bc193863061e3d55f4">Ieee80211Mac::timerCoeff</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a4724f434c9447f8127bbe9ecf8959c4f">configureAutoBitRate()</a>, and <a class="el" href="class_ieee80211_mac.html#a6b11301b46f8e34c5c9aecd8c3645ec3">reportRecoveryFailure()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f990a962356bd4e76e0059212d9c034"></a><!-- doxytag: member="Ieee80211Mac::timerTimeout" ref="a0f990a962356bd4e76e0059212d9c034" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a0f990a962356bd4e76e0059212d9c034">Ieee80211Mac::timerTimeout</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a4724f434c9447f8127bbe9ecf8959c4f">configureAutoBitRate()</a>, <a class="el" href="class_ieee80211_mac.html#ac522b02d2b52a53ea3e473e603ec3f9e">getTimerTimeout()</a>, and <a class="el" href="class_ieee80211_mac.html#a024353fcbe63876a1098dc7d3829b624">setTimerTimeout()</a>.</p>

</div>
</div>
<a class="anchor" id="a89c82053702cb058b0ae6bf7f0a835ba"></a><!-- doxytag: member="Ieee80211Mac::timeStampLastMessageReceived" ref="a89c82053702cb058b0ae6bf7f0a835ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ieee80211_mac.html#a89c82053702cb058b0ae6bf7f0a835ba">Ieee80211Mac::timeStampLastMessageReceived</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ef4f6b331003c2e2054428fa4534bd9"></a><!-- doxytag: member="Ieee80211Mac::transmissionLimit" ref="a7ef4f6b331003c2e2054428fa4534bd9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ieee80211_mac.html#a7ef4f6b331003c2e2054428fa4534bd9">Ieee80211Mac::transmissionLimit</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Maximum number of transmissions for a message. </p>
<p>This includes the initial transmission and all subsequent retransmissions. Thus a value 0 is invalid and a value 1 means no retransmissions. See: dot11ShortRetryLimit on page 484. 'This attribute shall indicate the maximum number of transmission attempts of a frame, the length of which is less than or equal to dot11RTSThreshold, that shall be made before a failure condition is indicated. The default value of this attribute shall be 7' </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#ab34517c360aa546041515d97c354dd43">computeBackoffPeriod()</a>, <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#a1140ac3364f8defb6d66deb76af9d55e">retryCurrentTransmission()</a>.</p>

</div>
</div>
<a class="anchor" id="a28e584ef028657e010105eb1041814ff"></a><!-- doxytag: member="Ieee80211Mac::txop" ref="a28e584ef028657e010105eb1041814ff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#a28e584ef028657e010105eb1041814ff">Ieee80211Mac::txop</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>True if we are in txop bursting packets. </p>

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a5806d200b6dc0abcd87732edb240479e">buildDataFrame()</a>, <a class="el" href="class_ieee80211_mac.html#a9c4e21cc98783e53810b622e0c6deda2">handleSelfMsg()</a>, <a class="el" href="class_ieee80211_mac.html#aa95e52e25b2792fb62dd4d758cac72a2">handleWithFSM()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, <a class="el" href="class_ieee80211_mac.html#ad2f7920d160c73976da41c6f22b38c63">initWatches()</a>, <a class="el" href="class_ieee80211_mac.html#a0cae572eab527e836aadae2ef9df5b3d">logState()</a>, and <a class="el" href="class_ieee80211_mac.html#a3283d9bfc1d01d05dc65887e6f0e8518">sendDataFrame()</a>.</p>

</div>
</div>
<a class="anchor" id="a8e05d7cf7a718c1e255e13f2ee6c132a"></a><!-- doxytag: member="Ieee80211Mac::useModulationParameters" ref="a8e05d7cf7a718c1e255e13f2ee6c132a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#a8e05d7cf7a718c1e255e13f2ee6c132a">Ieee80211Mac::useModulationParameters</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS()</a>, <a class="el" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">scheduleDataTimeoutPeriod()</a>.</p>

</div>
</div>
<a class="anchor" id="a254d1148be2a6837f462d2e17d0c8b9b"></a><!-- doxytag: member="Ieee80211Mac::validRecMode" ref="a254d1148be2a6837f462d2e17d0c8b9b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ieee80211_mac.html#a254d1148be2a6837f462d2e17d0c8b9b">Ieee80211Mac::validRecMode</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#af163e249ed0577fb5027e3e9cf54d6a5">handleLowerMsg()</a>, and <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="af5e0fd9af05f5494d1cce2821fb30d61"></a><!-- doxytag: member="Ieee80211Mac::wifiPreambleType" ref="af5e0fd9af05f5494d1cce2821fb30d61" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_wifi_preamble_type_8h.html#acc4e3ae44dc0fb54b8cb90d72b096887">WifiPreamble</a> <a class="el" href="class_ieee80211_mac.html#af5e0fd9af05f5494d1cce2821fb30d61">Ieee80211Mac::wifiPreambleType</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ieee80211_mac.html#a38e18309549f34d7b355c1b1f4aab298">computeFrameDuration()</a>, <a class="el" href="class_ieee80211_mac.html#a95a64f0d0e6a5f300868187772051272">getHeaderTime()</a>, <a class="el" href="class_ieee80211_mac.html#a502179f9e3503763304b8f3fd4ba32fa">getSIFS()</a>, <a class="el" href="class_ieee80211_mac.html#ace75d97f719d23cab2bf582ab26d083e">getSlotTime()</a>, <a class="el" href="class_ieee80211_mac.html#acc89ca1fc93ad17f2a78a01bd474f058">initialize()</a>, and <a class="el" href="class_ieee80211_mac.html#ab699599e2dc2ffb747a9a7ae8a8f98e8">scheduleDataTimeoutPeriod()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_ieee80211_mac_8h.html">Ieee80211Mac.h</a></li>
<li><a class="el" href="_ieee80211_mac_8cc.html">Ieee80211Mac.cc</a></li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_ieee80211_mac.html">Ieee80211Mac</a>      </li>

    <li class="footer">Generated on Tue Aug 7 2012 16:01:25 for INET Framework for OMNeT++/OMNEST by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
