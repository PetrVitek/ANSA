<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: EtherMAC Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_ether_m_a_c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">EtherMAC Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="EtherMAC" --><!-- doxytag: inherits="EtherMACBase" -->
<p><code>#include &lt;EtherMAC.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for EtherMAC:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_ether_m_a_c.png" usemap="#EtherMAC_map" alt=""/>
  <map id="EtherMAC_map" name="EtherMAC_map">
<area href="class_ether_m_a_c_base.html" alt="EtherMACBase" shape="rect" coords="0,56,99,80"/>
<area href="class_i_notifiable.html" alt="INotifiable" shape="rect" coords="0,0,99,24"/>
</map>
 </div></div>

<p><a href="class_ether_m_a_c-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a936a9d50c3e4cda99c3004c4778cadf4">EtherMAC</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a52727b8fdc3ddb6ead25d8beab1fe817">~EtherMAC</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a92d05279e9e43258d310d019ebe79ea0">initializeTxrate</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a32d76cb953c50e550638319aad976c89">finish</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a770c337725b006c9d89a81db7bff1985">processFrameFromUpperLayer</a> (EtherFrame *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a71c21fb4c966e819abbf041ea42f056f">processMsgFromNetwork</a> (cPacket *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#aac09d6f301dc86d8571b5357723df86a">handleEndIFGPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ac1bf54200283ab7e0345c959d7a42a5b">handleEndBackoffPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a1d46c3efdf2ba5b8ce90f68960541ca1">handleEndJammingPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a00e227576a4ff0bff41d35f06309c139">startAutoconfig</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a2155aa702e03e8c9341b69ae8ddfeea0">handleAutoconfigMessage</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ab1091e4dd64112bac3bbcfb3e43005af">printState</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a5b7f05eeb8fa2d3424256837b72e6305">scheduleEndRxPeriod</a> (cPacket *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a9631222986440dc566b8bba2f018d00a">sendJamSignal</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">handleRetransmission</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a388be3d4571873fa7251757a39d679a8">updateHasSubcribers</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a0cfed26778963f7ae08927551c45211b">autoconfigInProgress</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#adc8ea8365dd52091a665378c0e0fdecf">lowestTxrateSuggested</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a0b1a0ff4e165028710640042773459de">duplexVetoed</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EtherFrame *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ab33a400a74d73295145562de67ae0abf">endBackoffMsg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a1d0fc561153186e5cc32c3c7347fd175">endJammingMsg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a4a14c7389b4f0174c421ea2ab2e38884">totalCollisionTime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">totalSuccessfulRxTxTime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">channelBusySince</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a1102e2facae32b0696ca147ac0d1c8ee">numBackoffs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ac5eadf348b48dafe8f5bb2d879f65866">numCollisionsVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a3ba7ca3372df18a5c74e6792ebed9045">numBackoffsVector</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Ethernet MAC module. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a936a9d50c3e4cda99c3004c4778cadf4"></a><!-- doxytag: member="EtherMAC::EtherMAC" ref="a936a9d50c3e4cda99c3004c4778cadf4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EtherMAC::EtherMAC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a> = NULL;
    <a class="code" href="class_ether_m_a_c.html#a1d0fc561153186e5cc32c3c7347fd175">endJammingMsg</a> = <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a> = <a class="code" href="class_ether_m_a_c.html#ab33a400a74d73295145562de67ae0abf">endBackoffMsg</a> = NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52727b8fdc3ddb6ead25d8beab1fe817"></a><!-- doxytag: member="EtherMAC::~EtherMAC" ref="a52727b8fdc3ddb6ead25d8beab1fe817" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EtherMAC::~EtherMAC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keyword">delete</span> <a class="code" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a>;
    cancelAndDelete(<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
    cancelAndDelete(<a class="code" href="class_ether_m_a_c.html#ab33a400a74d73295145562de67ae0abf">endBackoffMsg</a>);
    cancelAndDelete(<a class="code" href="class_ether_m_a_c.html#a1d0fc561153186e5cc32c3c7347fd175">endJammingMsg</a>);
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a32d76cb953c50e550638319aad976c89"></a><!-- doxytag: member="EtherMAC::finish" ref="a32d76cb953c50e550638319aad976c89" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::finish </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#ab4c2f71e9ed4e6874e5ad62f488e51e5">EtherMACBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#a32d76cb953c50e550638319aad976c89">EtherMACBase::finish</a>();

    simtime_t t = simTime();
    simtime_t totalChannelIdleTime = t - <a class="code" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">totalSuccessfulRxTxTime</a> - <a class="code" href="class_ether_m_a_c.html#a4a14c7389b4f0174c421ea2ab2e38884">totalCollisionTime</a>;
    recordScalar(<span class="stringliteral">&quot;rx channel idle (%)&quot;</span>, 100*(totalChannelIdleTime/t));
    recordScalar(<span class="stringliteral">&quot;rx channel utilization (%)&quot;</span>, 100*(<a class="code" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">totalSuccessfulRxTxTime</a>/t));
    recordScalar(<span class="stringliteral">&quot;rx channel collision (%)&quot;</span>, 100*(totalCollisionTime/t));
    recordScalar(<span class="stringliteral">&quot;collisions&quot;</span>,     <a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a>);
    recordScalar(<span class="stringliteral">&quot;backoffs&quot;</span>,       <a class="code" href="class_ether_m_a_c.html#a1102e2facae32b0696ca147ac0d1c8ee">numBackoffs</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2155aa702e03e8c9341b69ae8ddfeea0"></a><!-- doxytag: member="EtherMAC::handleAutoconfigMessage" ref="a2155aa702e03e8c9341b69ae8ddfeea0" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::handleAutoconfigMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!msg-&gt;isSelfMessage())
    {
        <span class="keywordflow">if</span> (msg-&gt;getArrivalGate() == gate(<span class="stringliteral">&quot;upperLayerIn&quot;</span>))
        {
            <span class="comment">// from upper layer</span>
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Received frame from upper layer during autoconfig period: &quot;</span> &lt;&lt; msg &lt;&lt; endl;
            <a class="code" href="class_ether_m_a_c.html#a770c337725b006c9d89a81db7bff1985">processFrameFromUpperLayer</a>(check_and_cast&lt;EtherFrame *&gt;(msg));
        }
        <span class="keywordflow">else</span>
        {
            <span class="comment">// from network: must be autoconfig message</span>
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Message from network during autoconfig period: &quot;</span> &lt;&lt; msg &lt;&lt; endl;
            EtherAutoconfig *autoconf = check_and_cast&lt;EtherAutoconfig *&gt;(msg);
            <span class="keywordtype">double</span> acTxrate = autoconf-&gt;getTxrate();

            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Autoconfig message: &quot;</span>;
            <span class="keywordflow">if</span> (acTxrate&gt;0)
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; acTxrate/1000000 &lt;&lt; <span class="stringliteral">&quot;Mb &quot;</span>;
            <span class="keywordflow">if</span> (autoconf-&gt;getHalfDuplex())
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;non-duplex&quot;</span>;
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

            <span class="keywordflow">if</span> (acTxrate&gt;0 &amp;&amp; (acTxrate&lt;<a class="code" href="class_ether_m_a_c.html#adc8ea8365dd52091a665378c0e0fdecf">lowestTxrateSuggested</a> || <a class="code" href="class_ether_m_a_c.html#adc8ea8365dd52091a665378c0e0fdecf">lowestTxrateSuggested</a>==0))
                <a class="code" href="class_ether_m_a_c.html#adc8ea8365dd52091a665378c0e0fdecf">lowestTxrateSuggested</a> = acTxrate;
            <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c.html#a0b1a0ff4e165028710640042773459de">duplexVetoed</a> &amp;&amp; autoconf-&gt;getHalfDuplex())
                <a class="code" href="class_ether_m_a_c.html#a0b1a0ff4e165028710640042773459de">duplexVetoed</a> = <span class="keyword">true</span>;
            <span class="keyword">delete</span> msg;
        }
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// self-message signals end of autoconfig period</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Self-message during autoconfig period: &quot;</span> &lt;&lt; msg &lt;&lt; endl;

        <span class="keyword">delete</span> msg;
        <a class="code" href="class_ether_m_a_c.html#a0cfed26778963f7ae08927551c45211b">autoconfigInProgress</a> = <span class="keyword">false</span>;

        <span class="keywordtype">double</span> initialTxrate = par(<span class="stringliteral">&quot;txrate&quot;</span>);
        <span class="keywordtype">bool</span> duplexEnabled = par(<span class="stringliteral">&quot;duplexEnabled&quot;</span>);

        <a class="code" href="class_ether_m_a_c_base.html#a82f73bf45cef382be21dcc17c512e644">txrate</a> = (initialTxrate==0 &amp;&amp; <a class="code" href="class_ether_m_a_c.html#adc8ea8365dd52091a665378c0e0fdecf">lowestTxrateSuggested</a>==0) ? 100000000 <span class="comment">/* 100 Mb */</span>:
                 (initialTxrate==0) ? <a class="code" href="class_ether_m_a_c.html#adc8ea8365dd52091a665378c0e0fdecf">lowestTxrateSuggested</a> :
                 (<a class="code" href="class_ether_m_a_c.html#adc8ea8365dd52091a665378c0e0fdecf">lowestTxrateSuggested</a>==0) ? initialTxrate :
                 (<a class="code" href="class_ether_m_a_c.html#adc8ea8365dd52091a665378c0e0fdecf">lowestTxrateSuggested</a>&lt;initialTxrate) ? <a class="code" href="class_ether_m_a_c.html#adc8ea8365dd52091a665378c0e0fdecf">lowestTxrateSuggested</a> : initialTxrate;
        <a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> = (duplexEnabled &amp;&amp; !<a class="code" href="class_ether_m_a_c.html#a0b1a0ff4e165028710640042773459de">duplexVetoed</a>);
        <a class="code" href="class_ether_m_a_c_base.html#abf74598139ff3d6b072bdafdaea84a63">calculateParameters</a>();

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Parameters after autoconfig: txrate=&quot;</span> &lt;&lt; <a class="code" href="class_ether_m_a_c_base.html#a82f73bf45cef382be21dcc17c512e644">txrate</a>/1000000 &lt;&lt; <span class="stringliteral">&quot;Mb, &quot;</span> &lt;&lt; (<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> ? <span class="stringliteral">&quot;duplex&quot;</span> : <span class="stringliteral">&quot;half-duplex&quot;</span>) &lt;&lt; endl;

        <span class="keywordflow">if</span> (ev.isGUI())
        {
            <span class="keywordtype">char</span> modestr[64];
            sprintf(modestr, <span class="stringliteral">&quot;%dMb\n%s&quot;</span>, <span class="keywordtype">int</span>(<a class="code" href="class_ether_m_a_c_base.html#a82f73bf45cef382be21dcc17c512e644">txrate</a>/1000000), (<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> ? <span class="stringliteral">&quot;full duplex&quot;</span> : <span class="stringliteral">&quot;half duplex&quot;</span>));
            getDisplayString().setTagArg(<span class="stringliteral">&quot;t&quot;</span>,0,modestr);
            <span class="comment">//getDisplayString().setTagArg(&quot;t&quot;,1,&quot;r&quot;);</span>
            sprintf(modestr, <span class="stringliteral">&quot;%s: %dMb %s&quot;</span>, getFullName(), <span class="keywordtype">int</span>(<a class="code" href="class_ether_m_a_c_base.html#a82f73bf45cef382be21dcc17c512e644">txrate</a>/1000000), (<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> ? <span class="stringliteral">&quot;duplex&quot;</span> : <span class="stringliteral">&quot;half duplex&quot;</span>));
            getParentModule()-&gt;bubble(modestr);
        }

        <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#af821fd79d625be2536582fb50f4eadd9">txQueue</a>.empty())
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Autoconfig period over, starting to send frames\n&quot;</span>;
            <a class="code" href="class_ether_m_a_c_base.html#a42b361fc78ad32e17e3f33cf336d6a7f">scheduleEndIFGPeriod</a>();
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac1bf54200283ab7e0345c959d7a42a5b"></a><!-- doxytag: member="EtherMAC::handleEndBackoffPeriod" ref="ac1bf54200283ab7e0345c959d7a42a5b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::handleEndBackoffPeriod </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a1b69935f2d60c8df93d459b82da99dfc">transmitState</a> != <a class="code" href="_ether_m_a_c_base_8h.html#a6ef9793e5ef80133ad65789aab1e271f">BACKOFF_STATE</a>)
        error(<span class="stringliteral">&quot;At end of BACKOFF not in BACKOFF_STATE!&quot;</span>);
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#af821fd79d625be2536582fb50f4eadd9">txQueue</a>.empty())
        error(<span class="stringliteral">&quot;At end of BACKOFF and buffer empty!&quot;</span>);

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a>==<a class="code" href="_ether_m_a_c_base_8h.html#a172dd8a0691f58fedfadb4a29632fba8">RX_IDLE_STATE</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Backoff period ended, wait IFG\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c_base.html#a42b361fc78ad32e17e3f33cf336d6a7f">scheduleEndIFGPeriod</a>();
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Backoff period ended but channel not free, idling\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c_base.html#a1b69935f2d60c8df93d459b82da99dfc">transmitState</a> = <a class="code" href="_ether_m_a_c_base_8h.html#a743f3e7b25f8aea548d06e5ae9f574bd">TX_IDLE_STATE</a>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aac09d6f301dc86d8571b5357723df86a"></a><!-- doxytag: member="EtherMAC::handleEndIFGPeriod" ref="aac09d6f301dc86d8571b5357723df86a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::handleEndIFGPeriod </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#aa74e941ddd6ec84cba15b515a8637da0">EtherMACBase</a>.</p>

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#aac09d6f301dc86d8571b5357723df86a">EtherMACBase::handleEndIFGPeriod</a>();

    <span class="comment">// End of IFG period, okay to transmit, if Rx idle OR duplexMode</span>
    cPacket *frame = (cPacket *)<a class="code" href="class_ether_m_a_c_base.html#af821fd79d625be2536582fb50f4eadd9">txQueue</a>.front();

    <span class="comment">// Perform carrier extension if in Gigabit Ethernet</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#aad587d87f0ee21cf37f7c18ceb173a60">carrierExtension</a> &amp;&amp; frame-&gt;getByteLength() &lt; <a class="code" href="_ethernet_8h.html#a3111bb851481ce2404040b2385afe5de">GIGABIT_MIN_FRAME_WITH_EXT</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Performing carrier extension of small frame\n&quot;</span>;
        frame-&gt;setByteLength(<a class="code" href="_ethernet_8h.html#a3111bb851481ce2404040b2385afe5de">GIGABIT_MIN_FRAME_WITH_EXT</a>);
    }

    <span class="comment">// send frame to network</span>
    <a class="code" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1d46c3efdf2ba5b8ce90f68960541ca1"></a><!-- doxytag: member="EtherMAC::handleEndJammingPeriod" ref="a1d46c3efdf2ba5b8ce90f68960541ca1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::handleEndJammingPeriod </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a1b69935f2d60c8df93d459b82da99dfc">transmitState</a> != <a class="code" href="_ether_m_a_c_base_8h.html#a6148d5d92429d7c40e7dbc1da199afd6">JAMMING_STATE</a>)
        error(<span class="stringliteral">&quot;At end of JAMMING not in JAMMING_STATE!&quot;</span>);
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Jamming finished, executing backoff\n&quot;</span>;
    <a class="code" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">handleRetransmission</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac928ada773c433249bbfc213866ecd76"></a><!-- doxytag: member="EtherMAC::handleEndRxPeriod" ref="ac928ada773c433249bbfc213866ecd76" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::handleEndRxPeriod </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Frame reception complete\n&quot;</span>;
    simtime_t dt = simTime()-<a class="code" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">channelBusySince</a>;
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a>==<a class="code" href="_ether_m_a_c_base_8h.html#a2aca0dfa94e8e793bf8c576ca1dafae5">RECEIVING_STATE</a>) <span class="comment">// i.e. not RX_COLLISION_STATE</span>
    {
        EtherFrame *frame = <a class="code" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a>;
        <a class="code" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a> = NULL;
        <a class="code" href="class_ether_m_a_c_base.html#a08b5bf7bcb012584912397eb8fcae7fd">frameReceptionComplete</a>(frame);
        <a class="code" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">totalSuccessfulRxTxTime</a> += dt;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_ether_m_a_c.html#a4a14c7389b4f0174c421ea2ab2e38884">totalCollisionTime</a> += dt;
    }

    <a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a> = <a class="code" href="_ether_m_a_c_base_8h.html#a172dd8a0691f58fedfadb4a29632fba8">RX_IDLE_STATE</a>;
    <a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a> = 0;

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a1b69935f2d60c8df93d459b82da99dfc">transmitState</a>==<a class="code" href="_ether_m_a_c_base_8h.html#a743f3e7b25f8aea548d06e5ae9f574bd">TX_IDLE_STATE</a> &amp;&amp; !<a class="code" href="class_ether_m_a_c_base.html#af821fd79d625be2536582fb50f4eadd9">txQueue</a>.empty())
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Receiver now idle, can transmit frames in output buffer after IFG period\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c_base.html#a42b361fc78ad32e17e3f33cf336d6a7f">scheduleEndIFGPeriod</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af94eb578c2dcc59eba5f13c88910a2a7"></a><!-- doxytag: member="EtherMAC::handleEndTxPeriod" ref="af94eb578c2dcc59eba5f13c88910a2a7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::handleEndTxPeriod </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#aeef682be2263580f2bc857f326494ad7">EtherMACBase</a>.</p>

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">EtherMACBase::handleEndTxPeriod</a>();

    <span class="comment">// only count transmissions in totalSuccessfulRxTxTime if channel is half-duplex</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a>)
    {
        simtime_t dt = simTime()-<a class="code" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">channelBusySince</a>;
        <a class="code" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">totalSuccessfulRxTxTime</a> += dt;
    }

    <a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a> = 0;

    <span class="comment">// check for and obey received PAUSE frames after each transmission</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#aab5753d09b37edd82c1a853b8363d7b1">checkAndScheduleEndPausePeriod</a>())
        <span class="keywordflow">return</span>;

    <span class="comment">// Gigabit Ethernet: now decide if we transmit next frame right away (burst) or wait IFG</span>
    <span class="comment">// FIXME! this is not entirely correct, there must be IFG between burst frames too</span>
    <span class="keywordtype">bool</span> burstFrame=<span class="keyword">false</span>;
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a2d3576698535f9092562070198820198">frameBursting</a> &amp;&amp; !<a class="code" href="class_ether_m_a_c_base.html#af821fd79d625be2536582fb50f4eadd9">txQueue</a>.empty())
    {
        <span class="comment">// check if max bytes for burst not exceeded</span>
        <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a84c2b0ce05482d8dc50182d880f30d58">bytesSentInBurst</a>&lt;<a class="code" href="_ethernet_8h.html#afe56617bc748c0c74c417cdcc1b76505">GIGABIT_MAX_BURST_BYTES</a>)
        {
             burstFrame=<span class="keyword">true</span>;
             <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Transmitting next frame in current burst\n&quot;</span>;
        }
        <span class="keywordflow">else</span>
        {
             <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Next frame does not fit in current burst\n&quot;</span>;
        }
    }

    <span class="keywordflow">if</span> (burstFrame)
        <a class="code" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission</a>();
    <span class="keywordflow">else</span>
        <a class="code" href="class_ether_m_a_c_base.html#a1badd37f8bafc8901b37402dbe3184f2">beginSendFrames</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7b8fce39a1befbef2a3baddaf7fb8ecc"></a><!-- doxytag: member="EtherMAC::handleMessage" ref="a7b8fce39a1befbef2a3baddaf7fb8ecc" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::handleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a3ab55f66782d6fae503fd9c062896dc7">disabled</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;MAC is disabled -- dropping message &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">return</span>;
    }
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c.html#a0cfed26778963f7ae08927551c45211b">autoconfigInProgress</a>)
    {
        <a class="code" href="class_ether_m_a_c.html#a2155aa702e03e8c9341b69ae8ddfeea0">handleAutoconfigMessage</a>(msg);
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="class_ether_m_a_c.html#ab1091e4dd64112bac3bbcfb3e43005af">printState</a>();
    <span class="comment">// some consistency check</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> &amp;&amp; <a class="code" href="class_ether_m_a_c_base.html#a1b69935f2d60c8df93d459b82da99dfc">transmitState</a>==<a class="code" href="_ether_m_a_c_base_8h.html#a2cee1ac453a7df93ad9e888e99f01773">TRANSMITTING_STATE</a> &amp;&amp; <a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a>!=<a class="code" href="_ether_m_a_c_base_8h.html#a172dd8a0691f58fedfadb4a29632fba8">RX_IDLE_STATE</a>)
        error(<span class="stringliteral">&quot;Inconsistent state -- transmitting and receiving at the same time&quot;</span>);

    <span class="keywordflow">if</span> (!msg-&gt;isSelfMessage())
    {
        <span class="comment">// either frame from upper layer, or frame/jam signal from the network</span>
        <span class="keywordflow">if</span> (msg-&gt;getArrivalGate() == gate(<span class="stringliteral">&quot;upperLayerIn&quot;</span>))
            <a class="code" href="class_ether_m_a_c.html#a770c337725b006c9d89a81db7bff1985">processFrameFromUpperLayer</a>(check_and_cast&lt;EtherFrame *&gt;(msg));
        <span class="keywordflow">else</span>
            <a class="code" href="class_ether_m_a_c.html#a71c21fb4c966e819abbf041ea42f056f">processMsgFromNetwork</a>(<a class="code" href="_i_n_e_t_defs_8h.html#ae5b816f7de3c5248c812bdb6920f4e06">PK</a>(msg));
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// Process different self-messages (timer signals)</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Self-message &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot; received\n&quot;</span>;
        <span class="keywordflow">switch</span> (msg-&gt;getKind())
        {
            <span class="keywordflow">case</span> <a class="code" href="_ether_m_a_c_base_8h.html#ac45d3cc5822040e35e2937be632832b9">ENDIFG</a>:
                <a class="code" href="class_ether_m_a_c.html#aac09d6f301dc86d8571b5357723df86a">handleEndIFGPeriod</a>();
                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <a class="code" href="_ether_m_a_c_base_8h.html#a4bb2ae3fedcd3dacd0f824a7b658cff8">ENDTRANSMISSION</a>:
                <a class="code" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod</a>();
                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <a class="code" href="_ether_m_a_c_base_8h.html#a9330bc9c8a7ef3d0acef63b2e9573c08">ENDRECEPTION</a>:
                <a class="code" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod</a>();
                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <a class="code" href="_ether_m_a_c_base_8h.html#a64b191c4f0a78fe8aa485d15bb8ee30e">ENDBACKOFF</a>:
                <a class="code" href="class_ether_m_a_c.html#ac1bf54200283ab7e0345c959d7a42a5b">handleEndBackoffPeriod</a>();
                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <a class="code" href="_ether_m_a_c_base_8h.html#a4f424177ed127c705b0e598400fd60e9">ENDJAMMING</a>:
                <a class="code" href="class_ether_m_a_c.html#a1d46c3efdf2ba5b8ce90f68960541ca1">handleEndJammingPeriod</a>();
                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <a class="code" href="_ether_m_a_c_base_8h.html#a8c8095093aff928ef167df7aeca1ec59">ENDPAUSE</a>:
                <a class="code" href="class_ether_m_a_c_base.html#ae6b022b3261a68de11dd41fdcaf26adf">handleEndPausePeriod</a>();
                <span class="keywordflow">break</span>;

            <span class="keywordflow">default</span>:
                error(<span class="stringliteral">&quot;self-message with unexpected message kind %d&quot;</span>, msg-&gt;getKind());
        }
    }
    <a class="code" href="class_ether_m_a_c.html#ab1091e4dd64112bac3bbcfb3e43005af">printState</a>();

    <span class="keywordflow">if</span> (ev.isGUI())
        <a class="code" href="class_ether_m_a_c_base.html#a34f2526399ce9f2acc43eb80998f59bc">updateDisplayString</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="af15db7ca7aea23ee77e75c047bbd46a3"></a><!-- doxytag: member="EtherMAC::handleRetransmission" ref="af15db7ca7aea23ee77e75c047bbd46a3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::handleRetransmission </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a1d46c3efdf2ba5b8ce90f68960541ca1">handleEndJammingPeriod()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (++<a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a> &gt; <a class="code" href="_ethernet_8h.html#a7e1856ac7c6ed757978fc30bb92ace74">MAX_ATTEMPTS</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Number of retransmit attempts of frame exceeds maximum, cancelling transmission of frame\n&quot;</span>;
        <span class="keyword">delete</span> <a class="code" href="class_ether_m_a_c_base.html#af821fd79d625be2536582fb50f4eadd9">txQueue</a>.pop();

        <a class="code" href="class_ether_m_a_c_base.html#a1b69935f2d60c8df93d459b82da99dfc">transmitState</a> = <a class="code" href="_ether_m_a_c_base_8h.html#a743f3e7b25f8aea548d06e5ae9f574bd">TX_IDLE_STATE</a>;
        <a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a> = 0;
        <span class="comment">// no beginSendFrames(), because end of jam signal sending will trigger it automatically</span>
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Executing backoff procedure\n&quot;</span>;
    <span class="keywordtype">int</span> backoffrange = (<a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a>&gt;=<a class="code" href="_ethernet_8h.html#a1592d1d1a4a90325054c3a62b56337f3">BACKOFF_RANGE_LIMIT</a>) ? 1024 : (1 &lt;&lt; <a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a>);
    <span class="keywordtype">int</span> slotNumber = intuniform(0,backoffrange-1);
    simtime_t backofftime = slotNumber*<a class="code" href="class_ether_m_a_c_base.html#a172ecc082bd83ba47278fad39d3e656c">slotTime</a>;

    scheduleAt(simTime()+backofftime, <a class="code" href="class_ether_m_a_c.html#ab33a400a74d73295145562de67ae0abf">endBackoffMsg</a>);
    <a class="code" href="class_ether_m_a_c_base.html#a1b69935f2d60c8df93d459b82da99dfc">transmitState</a> = <a class="code" href="_ether_m_a_c_base_8h.html#a6ef9793e5ef80133ad65789aab1e271f">BACKOFF_STATE</a>;

    <a class="code" href="class_ether_m_a_c.html#a1102e2facae32b0696ca147ac0d1c8ee">numBackoffs</a>++;
    <a class="code" href="class_ether_m_a_c.html#a3ba7ca3372df18a5c74e6792ebed9045">numBackoffsVector</a>.record(<a class="code" href="class_ether_m_a_c.html#a1102e2facae32b0696ca147ac0d1c8ee">numBackoffs</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad8e31ebe719a1be991c6d390313cea51"></a><!-- doxytag: member="EtherMAC::initialize" ref="ad8e31ebe719a1be991c6d390313cea51" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#aeaef7b8c1c293ee6fa53e1786b7966ab">EtherMACBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">EtherMACBase::initialize</a>();

    <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;EndReception&quot;</span>, <a class="code" href="_ether_m_a_c_base_8h.html#a9330bc9c8a7ef3d0acef63b2e9573c08">ENDRECEPTION</a>);
    <a class="code" href="class_ether_m_a_c.html#ab33a400a74d73295145562de67ae0abf">endBackoffMsg</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;EndBackoff&quot;</span>, <a class="code" href="_ether_m_a_c_base_8h.html#a64b191c4f0a78fe8aa485d15bb8ee30e">ENDBACKOFF</a>);
    <a class="code" href="class_ether_m_a_c.html#a1d0fc561153186e5cc32c3c7347fd175">endJammingMsg</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;EndJamming&quot;</span>, <a class="code" href="_ether_m_a_c_base_8h.html#a4f424177ed127c705b0e598400fd60e9">ENDJAMMING</a>);

    <span class="comment">// check: datarate is forbidden with EtherMAC -- module&#39;s txrate must be used</span>
    cGate *g = <a class="code" href="class_ether_m_a_c_base.html#aa83bcb5c4f6024e598c2bbbd2f7773bf">physOutGate</a>;
    <span class="keywordflow">while</span> (g)
    {
        cDatarateChannel *chan = <span class="keyword">dynamic_cast&lt;</span>cDatarateChannel*<span class="keyword">&gt;</span>(g-&gt;getChannel());
        <span class="keywordflow">if</span> (chan &amp;&amp; chan-&gt;par(<span class="stringliteral">&quot;datarate&quot;</span>).doubleValue()&gt;0)
            error(<span class="stringliteral">&quot;connection on gate %s has data rate set: using data rate with EtherMAC &quot;</span>
                  <span class="stringliteral">&quot;is forbidden, module&#39;s txrate parameter must be used instead&quot;</span>,
                  g-&gt;getFullPath().c_str());
        g = g-&gt;getNextGate();
    }

    <span class="comment">// launch autoconfig process</span>
    <span class="keywordtype">bool</span> performAutoconfig = <span class="keyword">true</span>;
    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#a3ab55f66782d6fae503fd9c062896dc7">disabled</a> &amp;&amp; <a class="code" href="class_ether_m_a_c_base.html#ace95f162bb4a264cded6f61154885b04">connected</a> &amp;&amp; performAutoconfig)
    {
        <a class="code" href="class_ether_m_a_c.html#a00e227576a4ff0bff41d35f06309c139">startAutoconfig</a>();
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_ether_m_a_c.html#a0cfed26778963f7ae08927551c45211b">autoconfigInProgress</a> = <span class="keyword">false</span>;
        <a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> = par(<span class="stringliteral">&quot;duplexEnabled&quot;</span>);
        <a class="code" href="class_ether_m_a_c_base.html#abf74598139ff3d6b072bdafdaea84a63">calculateParameters</a>();
    }
    WATCH(<a class="code" href="class_ether_m_a_c.html#a0cfed26778963f7ae08927551c45211b">autoconfigInProgress</a>);

    <span class="comment">// initialize state info</span>
    <a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a> = 0;
    <a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a> = 0;

    WATCH(<a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a>);
    WATCH(<a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a>);

    <span class="comment">// initialize statistics</span>
    <a class="code" href="class_ether_m_a_c.html#a4a14c7389b4f0174c421ea2ab2e38884">totalCollisionTime</a> = 0.0;
    <a class="code" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">totalSuccessfulRxTxTime</a> = 0.0;
    <a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a> = <a class="code" href="class_ether_m_a_c.html#a1102e2facae32b0696ca147ac0d1c8ee">numBackoffs</a> = 0;

    WATCH(<a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a>);
    WATCH(<a class="code" href="class_ether_m_a_c.html#a1102e2facae32b0696ca147ac0d1c8ee">numBackoffs</a>);

    <a class="code" href="class_ether_m_a_c.html#ac5eadf348b48dafe8f5bb2d879f65866">numCollisionsVector</a>.setName(<span class="stringliteral">&quot;collisions&quot;</span>);
    <a class="code" href="class_ether_m_a_c.html#a3ba7ca3372df18a5c74e6792ebed9045">numBackoffsVector</a>.setName(<span class="stringliteral">&quot;backoffs&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a92d05279e9e43258d310d019ebe79ea0"></a><!-- doxytag: member="EtherMAC::initializeTxrate" ref="a92d05279e9e43258d310d019ebe79ea0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::initializeTxrate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="class_ether_m_a_c_base.html#a330aa19d171b33014ef6f26f05116b84">EtherMACBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c_base.html#a82f73bf45cef382be21dcc17c512e644">txrate</a> = par(<span class="stringliteral">&quot;txrate&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab1091e4dd64112bac3bbcfb3e43005af"></a><!-- doxytag: member="EtherMAC::printState" ref="ab1091e4dd64112bac3bbcfb3e43005af" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::printState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#define CASE(x) case x: EV &lt;&lt; #x; break</span>
<span class="preprocessor"></span>    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;transmitState: &quot;</span>;
    <span class="keywordflow">switch</span> (<a class="code" href="class_ether_m_a_c_base.html#a1b69935f2d60c8df93d459b82da99dfc">transmitState</a>) {
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_ether_m_a_c_base_8h.html#a743f3e7b25f8aea548d06e5ae9f574bd">TX_IDLE_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_ether_m_a_c_base_8h.html#ab1ad012473593829a3005e2fd881d987">WAIT_IFG_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_ether_m_a_c_base_8h.html#a2cee1ac453a7df93ad9e888e99f01773">TRANSMITTING_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_ether_m_a_c_base_8h.html#a6148d5d92429d7c40e7dbc1da199afd6">JAMMING_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_ether_m_a_c_base_8h.html#a6ef9793e5ef80133ad65789aab1e271f">BACKOFF_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_ether_m_a_c_base_8h.html#af922d8152d8f868d834d1627fbd90e81">PAUSE_STATE</a>);
    }
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;,  receiveState: &quot;</span>;
    <span class="keywordflow">switch</span> (<a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a>) {
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_ether_m_a_c_base_8h.html#a172dd8a0691f58fedfadb4a29632fba8">RX_IDLE_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_ether_m_a_c_base_8h.html#a2aca0dfa94e8e793bf8c576ca1dafae5">RECEIVING_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_ether_m_a_c_base_8h.html#a5bd43cc4f64aaeb7c20d49fc4e817fdc">RX_COLLISION_STATE</a>);
    }
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;,  backoffs: &quot;</span> &lt;&lt; <a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;,  numConcurrentTransmissions: &quot;</span> &lt;&lt; <a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;,  queueLength: &quot;</span> &lt;&lt; <a class="code" href="class_ether_m_a_c_base.html#af821fd79d625be2536582fb50f4eadd9">txQueue</a>.length() &lt;&lt; endl;
<span class="preprocessor">#undef CASE</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a770c337725b006c9d89a81db7bff1985"></a><!-- doxytag: member="EtherMAC::processFrameFromUpperLayer" ref="a770c337725b006c9d89a81db7bff1985" args="(EtherFrame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::processFrameFromUpperLayer </td>
          <td>(</td>
          <td class="paramtype">EtherFrame *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#ada0ba5f016929f0b6e1cfc36ea00d739">EtherMACBase</a>.</p>

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a2155aa702e03e8c9341b69ae8ddfeea0">handleAutoconfigMessage()</a>, and <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#a770c337725b006c9d89a81db7bff1985">EtherMACBase::processFrameFromUpperLayer</a>(frame);

    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c.html#a0cfed26778963f7ae08927551c45211b">autoconfigInProgress</a> &amp;&amp; (<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> || <a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a>==<a class="code" href="_ether_m_a_c_base_8h.html#a172dd8a0691f58fedfadb4a29632fba8">RX_IDLE_STATE</a>) &amp;&amp; <a class="code" href="class_ether_m_a_c_base.html#a1b69935f2d60c8df93d459b82da99dfc">transmitState</a>==<a class="code" href="_ether_m_a_c_base_8h.html#a743f3e7b25f8aea548d06e5ae9f574bd">TX_IDLE_STATE</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;No incoming carrier signals detected, frame clear to send, wait IFG first\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c_base.html#a42b361fc78ad32e17e3f33cf336d6a7f">scheduleEndIFGPeriod</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a71c21fb4c966e819abbf041ea42f056f"></a><!-- doxytag: member="EtherMAC::processMsgFromNetwork" ref="a71c21fb4c966e819abbf041ea42f056f" args="(cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::processMsgFromNetwork </td>
          <td>(</td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#a5ead8d1f0c2dcbe9a39b1c04c9730adc">EtherMACBase</a>.</p>

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#a71c21fb4c966e819abbf041ea42f056f">EtherMACBase::processMsgFromNetwork</a>(msg);

    simtime_t endRxTime = simTime() + msg-&gt;getBitLength()*<a class="code" href="class_ether_m_a_c_base.html#ad8c1ea02550aef25d24526dbacfd92f3">bitTime</a>;

    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> &amp;&amp; <a class="code" href="class_ether_m_a_c_base.html#a1b69935f2d60c8df93d459b82da99dfc">transmitState</a>==<a class="code" href="_ether_m_a_c_base_8h.html#a2cee1ac453a7df93ad9e888e99f01773">TRANSMITTING_STATE</a>)
    {
        <span class="comment">// since we&#39;re halfduplex, receiveState must be RX_IDLE_STATE (asserted at top of handleMessage)</span>
        <span class="keywordflow">if</span> (dynamic_cast&lt;EtherJam*&gt;(msg) != NULL)
            error(<span class="stringliteral">&quot;Stray jam signal arrived while transmitting (usual cause is cable length exceeding allowed maximum)&quot;</span>);

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Transmission interrupted by incoming frame, handling collision\n&quot;</span>;
        cancelEvent(<a class="code" href="class_ether_m_a_c_base.html#a9b054b17bf4311eae452c82b7345129c">endTxMsg</a>);

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Transmitting jam signal\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c.html#a9631222986440dc566b8bba2f018d00a">sendJamSignal</a>(); <span class="comment">// backoff will be executed when jamming finished</span>

        <span class="comment">// set receive state and schedule end of reception</span>
        <a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a> = <a class="code" href="_ether_m_a_c_base_8h.html#a5bd43cc4f64aaeb7c20d49fc4e817fdc">RX_COLLISION_STATE</a>;
        <a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a>++;
        simtime_t endJamTime = simTime()+<a class="code" href="class_ether_m_a_c_base.html#af44252e3f1e9b60d8ff8a8dbfb78bc3a">jamDuration</a>;
        scheduleAt(endRxTime&lt;endJamTime ? endJamTime : endRxTime, <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
        <span class="keyword">delete</span> msg;

        <a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a>++;
        <a class="code" href="class_ether_m_a_c.html#ac5eadf348b48dafe8f5bb2d879f65866">numCollisionsVector</a>.record(<a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a>);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a>==<a class="code" href="_ether_m_a_c_base_8h.html#a172dd8a0691f58fedfadb4a29632fba8">RX_IDLE_STATE</a>)
    {
        <span class="keywordflow">if</span> (dynamic_cast&lt;EtherJam*&gt;(msg) != NULL)
            error(<span class="stringliteral">&quot;Stray jam signal arrived (usual cause is cable length exceeding allowed maximum)&quot;</span>);

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Start reception of frame\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a>++;
        <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a>)
            error(<span class="stringliteral">&quot;frameBeingReceived!=0 in RX_IDLE_STATE&quot;</span>);
        <a class="code" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a> = (EtherFrame *)msg;
        <a class="code" href="class_ether_m_a_c.html#a5b7f05eeb8fa2d3424256837b72e6305">scheduleEndRxPeriod</a>(msg);
        <a class="code" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">channelBusySince</a> = simTime();
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a>==<a class="code" href="_ether_m_a_c_base_8h.html#a2aca0dfa94e8e793bf8c576ca1dafae5">RECEIVING_STATE</a> &amp;&amp; dynamic_cast&lt;EtherJam*&gt;(msg)==NULL &amp;&amp; <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>-&gt;getArrivalTime()-simTime()&lt;<a class="code" href="class_ether_m_a_c_base.html#ad8c1ea02550aef25d24526dbacfd92f3">bitTime</a>)
    {
        <span class="comment">// With the above condition we filter out &quot;false&quot; collisions that may occur with</span>
        <span class="comment">// back-to-back frames. That is: when &quot;beginning of frame&quot; message (this one) occurs</span>
        <span class="comment">// BEFORE &quot;end of previous frame&quot; event (endRxMsg) -- same simulation time,</span>
        <span class="comment">// only wrong order.</span>

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Back-to-back frames: completing reception of current frame, starting reception of next one\n&quot;</span>;

        <span class="comment">// complete reception of previous frame</span>
        cancelEvent(<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
        EtherFrame *frame = <a class="code" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a>;
        <a class="code" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a> = NULL;
        <a class="code" href="class_ether_m_a_c_base.html#a08b5bf7bcb012584912397eb8fcae7fd">frameReceptionComplete</a>(frame);

        <span class="comment">// start receiving next frame</span>
        <a class="code" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a> = (EtherFrame *)msg;
        <a class="code" href="class_ether_m_a_c.html#a5b7f05eeb8fa2d3424256837b72e6305">scheduleEndRxPeriod</a>(msg);
    }
    <span class="keywordflow">else</span> <span class="comment">// (receiveState==RECEIVING_STATE || receiveState==RX_COLLISION_STATE)</span>
    {
        <span class="comment">// handle overlapping receptions</span>
        <span class="keywordflow">if</span> (dynamic_cast&lt;EtherJam*&gt;(msg) != NULL)
        {
            <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a>&lt;=0)
                error(<span class="stringliteral">&quot;numConcurrentTransmissions=%d on jam arrival (stray jam?)&quot;</span>,<a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a>);

            <a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a>--;
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Jam signal received, this marks end of one transmission\n&quot;</span>;

            <span class="comment">// by the time jamming ends, all transmissions will have been aborted</span>
            <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a>==0)
            {
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Last jam signal received, collision will ends when jam ends\n&quot;</span>;
                cancelEvent(<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
                scheduleAt(endRxTime, <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
            }
        }
        <span class="keywordflow">else</span> <span class="comment">// EtherFrame or EtherPauseFrame</span>
        {
            <a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a>++;
            <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>-&gt;getArrivalTime() &lt; endRxTime)
            {
                <span class="comment">// otherwise just wait until the end of the longest transmission</span>
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Overlapping receptions -- setting collision state and extending collision period\n&quot;</span>;
                cancelEvent(<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
                scheduleAt(endRxTime, <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
            }
            <span class="keywordflow">else</span>
            {
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Overlapping receptions -- setting collision state\n&quot;</span>;
            }
        }

        <span class="comment">// delete collided frames: arrived frame as well as the one we&#39;re currently receiving</span>
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a>==<a class="code" href="_ether_m_a_c_base_8h.html#a2aca0dfa94e8e793bf8c576ca1dafae5">RECEIVING_STATE</a>)
        {
            <span class="keyword">delete</span> <a class="code" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a>;
            <a class="code" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a> = NULL;

            <a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a>++;
            <a class="code" href="class_ether_m_a_c.html#ac5eadf348b48dafe8f5bb2d879f65866">numCollisionsVector</a>.record(<a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a>);
        }

        <span class="comment">// go to collision state</span>
        <a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a> = <a class="code" href="_ether_m_a_c_base_8h.html#a5bd43cc4f64aaeb7c20d49fc4e817fdc">RX_COLLISION_STATE</a>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5b7f05eeb8fa2d3424256837b72e6305"></a><!-- doxytag: member="EtherMAC::scheduleEndRxPeriod" ref="a5b7f05eeb8fa2d3424256837b72e6305" args="(cPacket *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::scheduleEndRxPeriod </td>
          <td>(</td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a71c21fb4c966e819abbf041ea42f056f">processMsgFromNetwork()</a>.</p>
<div class="fragment"><pre class="fragment">{
    scheduleAt(simTime()+frame-&gt;getBitLength()*<a class="code" href="class_ether_m_a_c_base.html#ad8c1ea02550aef25d24526dbacfd92f3">bitTime</a>, <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
    <a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a> = <a class="code" href="_ether_m_a_c_base_8h.html#a2aca0dfa94e8e793bf8c576ca1dafae5">RECEIVING_STATE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9631222986440dc566b8bba2f018d00a"></a><!-- doxytag: member="EtherMAC::sendJamSignal" ref="a9631222986440dc566b8bba2f018d00a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::sendJamSignal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a71c21fb4c966e819abbf041ea42f056f">processMsgFromNetwork()</a>, and <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>.</p>
<div class="fragment"><pre class="fragment">{
    cPacket *jam = <span class="keyword">new</span> EtherJam(<span class="stringliteral">&quot;JAM_SIGNAL&quot;</span>);
    jam-&gt;setByteLength(<a class="code" href="_ethernet_8h.html#a7723123f880ac4868c09146452417300">JAM_SIGNAL_BYTES</a>);
    <span class="keywordflow">if</span> (ev.isGUI())  <a class="code" href="class_ether_m_a_c_base.html#aa827c8d34ae90fe0c4b63c2a7bb2fde5">updateConnectionColor</a>(<a class="code" href="_ether_m_a_c_base_8h.html#a6148d5d92429d7c40e7dbc1da199afd6">JAMMING_STATE</a>);
    send(jam, <a class="code" href="class_ether_m_a_c_base.html#aa83bcb5c4f6024e598c2bbbd2f7773bf">physOutGate</a>);

    scheduleAt(simTime()+<a class="code" href="class_ether_m_a_c_base.html#af44252e3f1e9b60d8ff8a8dbfb78bc3a">jamDuration</a>, <a class="code" href="class_ether_m_a_c.html#a1d0fc561153186e5cc32c3c7347fd175">endJammingMsg</a>);
    <a class="code" href="class_ether_m_a_c_base.html#a1b69935f2d60c8df93d459b82da99dfc">transmitState</a> = <a class="code" href="_ether_m_a_c_base_8h.html#a6148d5d92429d7c40e7dbc1da199afd6">JAMMING_STATE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a00e227576a4ff0bff41d35f06309c139"></a><!-- doxytag: member="EtherMAC::startAutoconfig" ref="a00e227576a4ff0bff41d35f06309c139" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::startAutoconfig </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#a0cfed26778963f7ae08927551c45211b">autoconfigInProgress</a> = <span class="keyword">true</span>;
    <a class="code" href="class_ether_m_a_c.html#adc8ea8365dd52091a665378c0e0fdecf">lowestTxrateSuggested</a> = 0;  <span class="comment">// none suggested</span>
    <a class="code" href="class_ether_m_a_c.html#a0b1a0ff4e165028710640042773459de">duplexVetoed</a> = <span class="keyword">false</span>;

    <span class="keywordtype">double</span> initialTxrate = par(<span class="stringliteral">&quot;txrate&quot;</span>);
    <span class="keywordtype">bool</span> duplexEnabled = par(<span class="stringliteral">&quot;duplexEnabled&quot;</span>);
    <a class="code" href="class_ether_m_a_c_base.html#a82f73bf45cef382be21dcc17c512e644">txrate</a> = 0;
    <a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> = duplexEnabled;
    <span class="keywordflow">if</span> (!duplexEnabled || initialTxrate&gt;0)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Autoconfig: advertising our settings: &quot;</span> &lt;&lt; initialTxrate/1000000 &lt;&lt; <span class="stringliteral">&quot;Mb, &quot;</span>
           &lt;&lt; (<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> ? <span class="stringliteral">&quot;duplex&quot;</span> : <span class="stringliteral">&quot;half-duplex&quot;</span>) &lt;&lt; endl;

        EtherAutoconfig *autoconf = <span class="keyword">new</span> EtherAutoconfig(<span class="stringliteral">&quot;autoconf&quot;</span>);
        <span class="keywordflow">if</span> (!duplexEnabled)
            autoconf-&gt;setHalfDuplex(<span class="keyword">true</span>);
        <span class="keywordflow">if</span> (initialTxrate&gt;0)
            autoconf-&gt;setTxrate(initialTxrate);
        send(autoconf, <a class="code" href="class_ether_m_a_c_base.html#aa83bcb5c4f6024e598c2bbbd2f7773bf">physOutGate</a>);
    }
    scheduleAt(simTime()+<a class="code" href="_ether_m_a_c_8h.html#a1df9f117db9f094bb52bf213fdf70628">AUTOCONFIG_PERIOD</a>, <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;EndAutoconfig&quot;</span>,<a class="code" href="_ether_m_a_c_base_8h.html#a24863fe0bcb7303a1201d982d1debea6">ENDAUTOCONFIG</a>));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a38a8c421c3bee0282b4fa9660d6e71bf"></a><!-- doxytag: member="EtherMAC::startFrameTransmission" ref="a38a8c421c3bee0282b4fa9660d6e71bf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::startFrameTransmission </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#aac09d6f301dc86d8571b5357723df86a">handleEndIFGPeriod()</a>, and <a class="el" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod()</a>.</p>
<div class="fragment"><pre class="fragment">{
    cPacket *origFrame = (cPacket *)<a class="code" href="class_ether_m_a_c_base.html#af821fd79d625be2536582fb50f4eadd9">txQueue</a>.front();
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Transmitting a copy of frame &quot;</span> &lt;&lt; origFrame &lt;&lt; endl;
    cPacket *frame = origFrame-&gt;dup();

    <span class="comment">// add preamble and SFD (Starting Frame Delimiter), then send out</span>
    frame-&gt;addByteLength(<a class="code" href="_ethernet_8h.html#a7d9c5baa3aead7d06ae791833bde0d88">PREAMBLE_BYTES</a>+<a class="code" href="_ethernet_8h.html#ad9ee8ec9d34ff29becf20068ee649edd">SFD_BYTES</a>);
    <span class="keywordflow">if</span> (ev.isGUI())  <a class="code" href="class_ether_m_a_c_base.html#aa827c8d34ae90fe0c4b63c2a7bb2fde5">updateConnectionColor</a>(<a class="code" href="_ether_m_a_c_base_8h.html#a2cee1ac453a7df93ad9e888e99f01773">TRANSMITTING_STATE</a>);
    send(frame, <a class="code" href="class_ether_m_a_c_base.html#aa83bcb5c4f6024e598c2bbbd2f7773bf">physOutGate</a>);

    <span class="comment">// update burst variables</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a2d3576698535f9092562070198820198">frameBursting</a>)
    {
        <a class="code" href="class_ether_m_a_c_base.html#a84c2b0ce05482d8dc50182d880f30d58">bytesSentInBurst</a> = frame-&gt;getByteLength();
        <a class="code" href="class_ether_m_a_c_base.html#ac375b2d52a008a9d67cc5a39d1142f94">framesSentInBurst</a>++;
    }

    <span class="comment">// check for collisions (there might be an ongoing reception which we don&#39;t know about, see below)</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> &amp;&amp; <a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a>!=<a class="code" href="_ether_m_a_c_base_8h.html#a172dd8a0691f58fedfadb4a29632fba8">RX_IDLE_STATE</a>)
    {
        <span class="comment">// During the IFG period the hardware cannot listen to the channel,</span>
        <span class="comment">// so it might happen that receptions have begun during the IFG,</span>
        <span class="comment">// and even collisions might be in progress.</span>
        <span class="comment">//</span>
        <span class="comment">// But we don&#39;t know of any ongoing transmission so we blindly</span>
        <span class="comment">// start transmitting, immediately collide and send a jam signal.</span>
        <span class="comment">//</span>
        <a class="code" href="class_ether_m_a_c.html#a9631222986440dc566b8bba2f018d00a">sendJamSignal</a>();
        <span class="comment">// numConcurrentTransmissions stays the same: +1 transmission, -1 jam</span>

        <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a>==<a class="code" href="_ether_m_a_c_base_8h.html#a2aca0dfa94e8e793bf8c576ca1dafae5">RECEIVING_STATE</a>)
        {
            <span class="keyword">delete</span> <a class="code" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a>;
            <a class="code" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">frameBeingReceived</a> = NULL;

            <a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a>++;
            <a class="code" href="class_ether_m_a_c.html#ac5eadf348b48dafe8f5bb2d879f65866">numCollisionsVector</a>.record(<a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a>);
        }
        <span class="comment">// go to collision state</span>
        <a class="code" href="class_ether_m_a_c_base.html#af65a4115222e836e9aa1883a50dd6859">receiveState</a> = <a class="code" href="_ether_m_a_c_base_8h.html#a5bd43cc4f64aaeb7c20d49fc4e817fdc">RX_COLLISION_STATE</a>;
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// no collision</span>
        <a class="code" href="class_ether_m_a_c_base.html#a53f70dc888b2e24464d524581de3f8f3">scheduleEndTxPeriod</a>(frame);

        <span class="comment">// only count transmissions in totalSuccessfulRxTxTime if channel is half-duplex</span>
        <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a>)
            <a class="code" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">channelBusySince</a> = simTime();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a388be3d4571873fa7251757a39d679a8"></a><!-- doxytag: member="EtherMAC::updateHasSubcribers" ref="a388be3d4571873fa7251757a39d679a8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC::updateHasSubcribers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="class_ether_m_a_c_base.html#ad217a66f7ba42eb71b960a63305f8ba6">EtherMACBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c_base.html#a302d966ed62ce375d5a3e320b2131ecd">hasSubscribers</a> = <span class="keyword">false</span>;  <span class="comment">// currently we don&#39;t fire any notifications</span>
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a0cfed26778963f7ae08927551c45211b"></a><!-- doxytag: member="EtherMAC::autoconfigInProgress" ref="a0cfed26778963f7ae08927551c45211b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ether_m_a_c.html#a0cfed26778963f7ae08927551c45211b">EtherMAC::autoconfigInProgress</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a2155aa702e03e8c9341b69ae8ddfeea0">handleAutoconfigMessage()</a>, <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>, <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, <a class="el" href="class_ether_m_a_c.html#a770c337725b006c9d89a81db7bff1985">processFrameFromUpperLayer()</a>, and <a class="el" href="class_ether_m_a_c.html#a00e227576a4ff0bff41d35f06309c139">startAutoconfig()</a>.</p>

</div>
</div>
<a class="anchor" id="adaa6c4898c554a32a5c527c3fa0cd61f"></a><!-- doxytag: member="EtherMAC::backoffs" ref="adaa6c4898c554a32a5c527c3fa0cd61f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">EtherMAC::backoffs</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">handleRetransmission()</a>, <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, and <a class="el" href="class_ether_m_a_c.html#ab1091e4dd64112bac3bbcfb3e43005af">printState()</a>.</p>

</div>
</div>
<a class="anchor" id="a092179c05dca493d0bfa237057c766f1"></a><!-- doxytag: member="EtherMAC::channelBusySince" ref="a092179c05dca493d0bfa237057c766f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">EtherMAC::channelBusySince</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#a71c21fb4c966e819abbf041ea42f056f">processMsgFromNetwork()</a>, and <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>.</p>

</div>
</div>
<a class="anchor" id="a0b1a0ff4e165028710640042773459de"></a><!-- doxytag: member="EtherMAC::duplexVetoed" ref="a0b1a0ff4e165028710640042773459de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_ether_m_a_c.html#a0b1a0ff4e165028710640042773459de">EtherMAC::duplexVetoed</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a2155aa702e03e8c9341b69ae8ddfeea0">handleAutoconfigMessage()</a>, and <a class="el" href="class_ether_m_a_c.html#a00e227576a4ff0bff41d35f06309c139">startAutoconfig()</a>.</p>

</div>
</div>
<a class="anchor" id="ab33a400a74d73295145562de67ae0abf"></a><!-- doxytag: member="EtherMAC::endBackoffMsg" ref="ab33a400a74d73295145562de67ae0abf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage * <a class="el" href="class_ether_m_a_c.html#ab33a400a74d73295145562de67ae0abf">EtherMAC::endBackoffMsg</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a936a9d50c3e4cda99c3004c4778cadf4">EtherMAC()</a>, <a class="el" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">handleRetransmission()</a>, <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, and <a class="el" href="class_ether_m_a_c.html#a52727b8fdc3ddb6ead25d8beab1fe817">~EtherMAC()</a>.</p>

</div>
</div>
<a class="anchor" id="a1d0fc561153186e5cc32c3c7347fd175"></a><!-- doxytag: member="EtherMAC::endJammingMsg" ref="a1d0fc561153186e5cc32c3c7347fd175" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage * <a class="el" href="class_ether_m_a_c.html#a1d0fc561153186e5cc32c3c7347fd175">EtherMAC::endJammingMsg</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a936a9d50c3e4cda99c3004c4778cadf4">EtherMAC()</a>, <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, <a class="el" href="class_ether_m_a_c.html#a9631222986440dc566b8bba2f018d00a">sendJamSignal()</a>, and <a class="el" href="class_ether_m_a_c.html#a52727b8fdc3ddb6ead25d8beab1fe817">~EtherMAC()</a>.</p>

</div>
</div>
<a class="anchor" id="ab79b95dcdd4fd99014b65b20480079ef"></a><!-- doxytag: member="EtherMAC::endRxMsg" ref="ab79b95dcdd4fd99014b65b20480079ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">EtherMAC::endRxMsg</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a936a9d50c3e4cda99c3004c4778cadf4">EtherMAC()</a>, <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, <a class="el" href="class_ether_m_a_c.html#a71c21fb4c966e819abbf041ea42f056f">processMsgFromNetwork()</a>, <a class="el" href="class_ether_m_a_c.html#a5b7f05eeb8fa2d3424256837b72e6305">scheduleEndRxPeriod()</a>, and <a class="el" href="class_ether_m_a_c.html#a52727b8fdc3ddb6ead25d8beab1fe817">~EtherMAC()</a>.</p>

</div>
</div>
<a class="anchor" id="a16f286d37d477fc83724c8b125ff5270"></a><!-- doxytag: member="EtherMAC::frameBeingReceived" ref="a16f286d37d477fc83724c8b125ff5270" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EtherFrame* <a class="el" href="class_ether_m_a_c.html#a16f286d37d477fc83724c8b125ff5270">EtherMAC::frameBeingReceived</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a936a9d50c3e4cda99c3004c4778cadf4">EtherMAC()</a>, <a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#a71c21fb4c966e819abbf041ea42f056f">processMsgFromNetwork()</a>, <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>, and <a class="el" href="class_ether_m_a_c.html#a52727b8fdc3ddb6ead25d8beab1fe817">~EtherMAC()</a>.</p>

</div>
</div>
<a class="anchor" id="adc8ea8365dd52091a665378c0e0fdecf"></a><!-- doxytag: member="EtherMAC::lowestTxrateSuggested" ref="adc8ea8365dd52091a665378c0e0fdecf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_ether_m_a_c.html#adc8ea8365dd52091a665378c0e0fdecf">EtherMAC::lowestTxrateSuggested</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a2155aa702e03e8c9341b69ae8ddfeea0">handleAutoconfigMessage()</a>, and <a class="el" href="class_ether_m_a_c.html#a00e227576a4ff0bff41d35f06309c139">startAutoconfig()</a>.</p>

</div>
</div>
<a class="anchor" id="a1102e2facae32b0696ca147ac0d1c8ee"></a><!-- doxytag: member="EtherMAC::numBackoffs" ref="a1102e2facae32b0696ca147ac0d1c8ee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long <a class="el" href="class_ether_m_a_c.html#a1102e2facae32b0696ca147ac0d1c8ee">EtherMAC::numBackoffs</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a32d76cb953c50e550638319aad976c89">finish()</a>, <a class="el" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">handleRetransmission()</a>, and <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a3ba7ca3372df18a5c74e6792ebed9045"></a><!-- doxytag: member="EtherMAC::numBackoffsVector" ref="a3ba7ca3372df18a5c74e6792ebed9045" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector <a class="el" href="class_ether_m_a_c.html#a3ba7ca3372df18a5c74e6792ebed9045">EtherMAC::numBackoffsVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">handleRetransmission()</a>, and <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="ab9950c06d98064cf81fc1421d01ae282"></a><!-- doxytag: member="EtherMAC::numCollisions" ref="ab9950c06d98064cf81fc1421d01ae282" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long <a class="el" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">EtherMAC::numCollisions</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a32d76cb953c50e550638319aad976c89">finish()</a>, <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, <a class="el" href="class_ether_m_a_c.html#a71c21fb4c966e819abbf041ea42f056f">processMsgFromNetwork()</a>, and <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>.</p>

</div>
</div>
<a class="anchor" id="ac5eadf348b48dafe8f5bb2d879f65866"></a><!-- doxytag: member="EtherMAC::numCollisionsVector" ref="ac5eadf348b48dafe8f5bb2d879f65866" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector <a class="el" href="class_ether_m_a_c.html#ac5eadf348b48dafe8f5bb2d879f65866">EtherMAC::numCollisionsVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, <a class="el" href="class_ether_m_a_c.html#a71c21fb4c966e819abbf041ea42f056f">processMsgFromNetwork()</a>, and <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>.</p>

</div>
</div>
<a class="anchor" id="ab387cd871e256012011122abfddab12a"></a><!-- doxytag: member="EtherMAC::numConcurrentTransmissions" ref="ab387cd871e256012011122abfddab12a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">EtherMAC::numConcurrentTransmissions</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, <a class="el" href="class_ether_m_a_c.html#ab1091e4dd64112bac3bbcfb3e43005af">printState()</a>, and <a class="el" href="class_ether_m_a_c.html#a71c21fb4c966e819abbf041ea42f056f">processMsgFromNetwork()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a14c7389b4f0174c421ea2ab2e38884"></a><!-- doxytag: member="EtherMAC::totalCollisionTime" ref="a4a14c7389b4f0174c421ea2ab2e38884" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ether_m_a_c.html#a4a14c7389b4f0174c421ea2ab2e38884">EtherMAC::totalCollisionTime</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a32d76cb953c50e550638319aad976c89">finish()</a>, <a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod()</a>, and <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ea84aee874e2a47b305917d5d05cb0e"></a><!-- doxytag: member="EtherMAC::totalSuccessfulRxTxTime" ref="a7ea84aee874e2a47b305917d5d05cb0e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">EtherMAC::totalSuccessfulRxTxTime</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a32d76cb953c50e550638319aad976c89">finish()</a>, <a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod()</a>, and <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_ether_m_a_c_8h.html">EtherMAC.h</a></li>
<li><a class="el" href="_ether_m_a_c_8cc.html">EtherMAC.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_ether_m_a_c.html">EtherMAC</a>      </li>
      <li class="footer">Generated on Fri Nov 18 2011 12:47:12 for INET Framework for OMNeT++/OMNEST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
