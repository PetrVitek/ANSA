<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>INET Framework for OMNeT++/OMNEST: EtherMAC Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_ether_m_a_c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">EtherMAC Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="EtherMAC" --><!-- doxytag: inherits="EtherMACBase" -->
<p>Ethernet MAC module which supports both half-duplex (CSMA/CD) and full-duplex operation.  
 <a href="class_ether_m_a_c.html#details">More...</a></p>

<p><code>#include &lt;EtherMAC.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for EtherMAC:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_ether_m_a_c.png" usemap="#EtherMAC_map" alt=""/>
  <map id="EtherMAC_map" name="EtherMAC_map">
<area href="class_ether_m_a_c_base.html" title="Base class for Ethernet MAC implementations." alt="EtherMACBase" shape="rect" coords="0,0,99,24"/>
</map>
 </div></div>

<p><a href="class_ether_m_a_c-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_ether_m_a_c_1_1_pk_id_rx_time.html">PkIdRxTime</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a936a9d50c3e4cda99c3004c4778cadf4">EtherMAC</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a52727b8fdc3ddb6ead25d8beab1fe817">~EtherMAC</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::list&lt; <a class="el" href="struct_ether_m_a_c_1_1_pk_id_rx_time.html">PkIdRxTime</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#abf7b66628081493e01cfd637f3f846d2">EndRxTimeList</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a3f71ecf267b96675b6fd535715b496e3">initializeFlags</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a3771e8ebee7f14ab668d14e8157327d9">initializeStatistics</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a32d76cb953c50e550638319aad976c89">finish</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a3a0bfc7f0c4e57a2b45618bfba2bfeac">handleSelfMessage</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#aac09d6f301dc86d8571b5357723df86a">handleEndIFGPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a14f0b83301df740d089efb6540d7e66a">handleEndPausePeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ac1bf54200283ab7e0345c959d7a42a5b">handleEndBackoffPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a1d46c3efdf2ba5b8ce90f68960541ca1">handleEndJammingPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">handleRetransmission</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ac8c224f7382adfa94c2753e1ccb0dbca">readChannelParameters</a> (bool errorWhenAsymmetric)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates datarates, etc.  <a href="#ac8c224f7382adfa94c2753e1ccb0dbca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a770c337725b006c9d89a81db7bff1985">processFrameFromUpperLayer</a> (<a class="el" href="class_ether_frame.html">EtherFrame</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork</a> (<a class="el" href="class_ether_traffic.html">EtherTraffic</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a6e75c72197375b139f615f77cbc39756">scheduleEndIFGPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#aeaf7d9b1fa62e3dda408bfec708477eb">scheduleEndTxPeriod</a> (<a class="el" href="class_ether_frame.html">EtherFrame</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a0229250b38c99446bc6bdf0eeab0dd7d">scheduleEndRxPeriod</a> (<a class="el" href="class_ether_traffic.html">EtherTraffic</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a8377d4c7c2248e98dd73f6c4c2f65393">scheduleEndPausePeriod</a> (int pauseUnits)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ada3fd6c227bdf3c3248693edb0332693">beginSendFrames</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a9631222986440dc566b8bba2f018d00a">sendJamSignal</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ab1866c852c77eed64de21abf79f3fa13">frameReceptionComplete</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#aa33ddbf7b79b5ea62db2b6ff8822c1b1">processReceivedDataFrame</a> (<a class="el" href="class_ether_frame.html">EtherFrame</a> *frame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#af3f7bc3979db3ba51dbf4b16f1213167">processReceivedJam</a> (<a class="el" href="class_ether_jam.html">EtherJam</a> *jam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ab0c3eee5e46d5f2582eb570a23769393">processReceivedPauseFrame</a> (<a class="el" href="class_ether_pause_frame.html">EtherPauseFrame</a> *frame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a107f07a55358ac4bc5066d23a02beb1c">processConnectDisconnect</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a87ebdef798d4cd28fef1e76bbc465fb7">addReception</a> (simtime_t endRxTime)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#af2a0d9b17daa0bd3d0b47a15163d9ace">addReceptionInReconnectState</a> (long <a class="el" href="_t_c_p___n_s_c___connection_8cc.html#a4fc3a0c58dfbd1e68224521185cb9384">id</a>, simtime_t endRxTime)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a2b1484987f4e6c34560f38290da7066b">processDetectedCollision</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ab1091e4dd64112bac3bbcfb3e43005af">printState</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a34bbf663bbc4d1f2d47b022ed47a6de8">currentSendPkTreeID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ether_traffic.html">EtherTraffic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">frameBeingReceived</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ab33a400a74d73295145562de67ae0abf">endBackoffMsg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a1d0fc561153186e5cc32c3c7347fd175">endJammingMsg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ether_m_a_c.html#abf7b66628081493e01cfd637f3f846d2">EndRxTimeList</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">endRxTimeList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a4a14c7389b4f0174c421ea2ab2e38884">totalCollisionTime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">totalSuccessfulRxTxTime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">channelBusySince</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a1102e2facae32b0696ca147ac0d1c8ee">numBackoffs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#ab92fac1188d0a881355664c1f6defcc0">framesSentInBurst</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a0dc55056c383a44f1ffc6c24b6dd3cff">bytesSentInBurst</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static simsignal_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a3d99bac1e7b9064258ac53d7927d311a">collisionSignal</a> = SIMSIGNAL_NULL</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static simsignal_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c.html#a8b31c64584ab13b6c290aa9a37900fc0">backoffSignal</a> = SIMSIGNAL_NULL</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Ethernet MAC module which supports both half-duplex (CSMA/CD) and full-duplex operation. </p>
<p>(See also <a class="el" href="class_ether_m_a_c_full_duplex.html" title="A simplified version of EtherMAC.">EtherMACFullDuplex</a> which has a considerably smaller code with all the CSMA/CD complexity removed.)</p>
<p>See NED file for more details. </p>
</div><hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="abf7b66628081493e01cfd637f3f846d2"></a><!-- doxytag: member="EtherMAC::EndRxTimeList" ref="abf7b66628081493e01cfd637f3f846d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::list&lt;<a class="el" href="struct_ether_m_a_c_1_1_pk_id_rx_time.html">PkIdRxTime</a>&gt; <a class="el" href="class_ether_m_a_c.html#abf7b66628081493e01cfd637f3f846d2">EtherMAC::EndRxTimeList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a936a9d50c3e4cda99c3004c4778cadf4"></a><!-- doxytag: member="EtherMAC::EtherMAC" ref="a936a9d50c3e4cda99c3004c4778cadf4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ether_m_a_c.html#a936a9d50c3e4cda99c3004c4778cadf4">EtherMAC::EtherMAC</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">frameBeingReceived</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <a class="code" href="class_ether_m_a_c.html#a1d0fc561153186e5cc32c3c7347fd175">endJammingMsg</a> = <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a> = <a class="code" href="class_ether_m_a_c.html#ab33a400a74d73295145562de67ae0abf">endBackoffMsg</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52727b8fdc3ddb6ead25d8beab1fe817"></a><!-- doxytag: member="EtherMAC::~EtherMAC" ref="a52727b8fdc3ddb6ead25d8beab1fe817" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ether_m_a_c.html#a52727b8fdc3ddb6ead25d8beab1fe817">EtherMAC::~EtherMAC</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keyword">delete</span> <a class="code" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">frameBeingReceived</a>;
    cancelAndDelete(<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
    cancelAndDelete(<a class="code" href="class_ether_m_a_c.html#ab33a400a74d73295145562de67ae0abf">endBackoffMsg</a>);
    cancelAndDelete(<a class="code" href="class_ether_m_a_c.html#a1d0fc561153186e5cc32c3c7347fd175">endJammingMsg</a>);
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a87ebdef798d4cd28fef1e76bbc465fb7"></a><!-- doxytag: member="EtherMAC::addReception" ref="a87ebdef798d4cd28fef1e76bbc465fb7" args="(simtime_t endRxTime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a87ebdef798d4cd28fef1e76bbc465fb7">EtherMAC::addReception</a> </td>
          <td>(</td>
          <td class="paramtype">simtime_t&#160;</td>
          <td class="paramname"><em>endRxTime</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork()</a>, and <a class="el" href="class_ether_m_a_c.html#a0229250b38c99446bc6bdf0eeab0dd7d">scheduleEndRxPeriod()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a>++;

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>-&gt;getArrivalTime() &lt; endRxTime)
    {
        cancelEvent(<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
        scheduleAt(endRxTime, <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af2a0d9b17daa0bd3d0b47a15163d9ace"></a><!-- doxytag: member="EtherMAC::addReceptionInReconnectState" ref="af2a0d9b17daa0bd3d0b47a15163d9ace" args="(long id, simtime_t endRxTime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#af2a0d9b17daa0bd3d0b47a15163d9ace">EtherMAC::addReceptionInReconnectState</a> </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&#160;</td>
          <td class="paramname"><em>endRxTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a107f07a55358ac4bc5066d23a02beb1c">processConnectDisconnect()</a>, and <a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// note: packetTreeId==-1 is legal, and represents a special entry that marks the end of the reconnect state</span>

    <span class="comment">// housekeeping: remove expired entries from endRxTimeList</span>
    simtime_t now = simTime();
    <span class="keywordflow">while</span> (!<a class="code" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">endRxTimeList</a>.empty() &amp;&amp; <a class="code" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">endRxTimeList</a>.front().endTime &lt;= now)
        <a class="code" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">endRxTimeList</a>.pop_front();

    EndRxTimeList::iterator i;

    <span class="comment">// remove old entry with same packet tree ID (typically: a frame reception</span>
    <span class="comment">// doesn&#39;t go through but is canceled by a jam signal)</span>
    <span class="keywordflow">for</span> (i = <a class="code" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">endRxTimeList</a>.begin(); i != <a class="code" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">endRxTimeList</a>.end(); i++)
    {
        <span class="keywordflow">if</span> (i-&gt;packetTreeId == packetTreeId)
        {
            <a class="code" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">endRxTimeList</a>.erase(i);
            <span class="keywordflow">break</span>;
        }
    }

    <span class="comment">// find insertion position and insert new entry (list is ordered by endRxTime)</span>
    <span class="keywordflow">for</span> (i = <a class="code" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">endRxTimeList</a>.begin(); i != <a class="code" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">endRxTimeList</a>.end() &amp;&amp; i-&gt;endTime &lt;= endRxTime; i++)
        ;
    PkIdRxTime item(packetTreeId, endRxTime);
    <a class="code" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">endRxTimeList</a>.insert(i, item);

    <span class="comment">// adjust endRxMsg if needed (we&#39;ll exit reconnect mode when endRxMsg expires)</span>
    simtime_t maxRxTime = <a class="code" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">endRxTimeList</a>.back().endTime;
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>-&gt;getArrivalTime() != maxRxTime)
    {
        cancelEvent(<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
        scheduleAt(maxRxTime, <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ada3fd6c227bdf3c3248693edb0332693"></a><!-- doxytag: member="EtherMAC::beginSendFrames" ref="ada3fd6c227bdf3c3248693edb0332693" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#ada3fd6c227bdf3c3248693edb0332693">EtherMAC::beginSendFrames</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a14f0b83301df740d089efb6540d7e66a">handleEndPausePeriod()</a>, <a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod()</a>, and <a class="el" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">handleRetransmission()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a>)
    {
        <span class="comment">// Other frames are queued, therefore wait IFG period and transmit next frame</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Will transmit next frame in output queue after IFG period\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c.html#a6e75c72197375b139f615f77cbc39756">scheduleEndIFGPeriod</a>();
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// No more frames, set transmitter to idle</span>
        <a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> = <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca335e9523aa0e5a68b054efdd11a70959">TX_IDLE_STATE</a>;
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;No more frames to send, transmitter set to idle\n&quot;</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a32d76cb953c50e550638319aad976c89"></a><!-- doxytag: member="EtherMAC::finish" ref="a32d76cb953c50e550638319aad976c89" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a32d76cb953c50e550638319aad976c89">EtherMAC::finish</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#ab4c2f71e9ed4e6874e5ad62f488e51e5">EtherMACBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#a32d76cb953c50e550638319aad976c89">EtherMACBase::finish</a>();

    simtime_t t = simTime();
    simtime_t totalChannelIdleTime = t - <a class="code" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">totalSuccessfulRxTxTime</a> - <a class="code" href="class_ether_m_a_c.html#a4a14c7389b4f0174c421ea2ab2e38884">totalCollisionTime</a>;
    recordScalar(<span class="stringliteral">&quot;rx channel idle (%)&quot;</span>, 100*(totalChannelIdleTime/t));
    recordScalar(<span class="stringliteral">&quot;rx channel utilization (%)&quot;</span>, 100*(<a class="code" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">totalSuccessfulRxTxTime</a>/t));
    recordScalar(<span class="stringliteral">&quot;rx channel collision (%)&quot;</span>, 100*(totalCollisionTime/t));
    recordScalar(<span class="stringliteral">&quot;collisions&quot;</span>, <a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a>);
    recordScalar(<span class="stringliteral">&quot;backoffs&quot;</span>, <a class="code" href="class_ether_m_a_c.html#a1102e2facae32b0696ca147ac0d1c8ee">numBackoffs</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab1866c852c77eed64de21abf79f3fa13"></a><!-- doxytag: member="EtherMAC::frameReceptionComplete" ref="ab1866c852c77eed64de21abf79f3fa13" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#ab1866c852c77eed64de21abf79f3fa13">EtherMAC::frameReceptionComplete</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod()</a>, and <a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_traffic.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherTraffic</a> *msg = <a class="code" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">frameBeingReceived</a>;
    <a class="code" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">frameBeingReceived</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

    <span class="keywordflow">if</span> (dynamic_cast&lt;EtherIFG*&gt;(msg) != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="class_ether_frame.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherFrame</a> *frame = check_and_cast&lt;<a class="code" href="class_ether_frame.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherFrame</a> *&gt;(msg);

    emit(<a class="code" href="class_ether_m_a_c_base.html#a1612fdce1af6b3e1cc541e27bc0963cd">packetReceivedFromLowerSignal</a>, frame);

    <span class="comment">// bit errors</span>
    <span class="keywordflow">if</span> (frame-&gt;hasBitError())
    {
        <a class="code" href="class_ether_m_a_c_base.html#a967dc8c880a1513816466c776202ea4f">numDroppedBitError</a>++;
        emit(<a class="code" href="class_ether_m_a_c_base.html#a61f3d3d4ad67d730751d80e8c6b24112">dropPkBitErrorSignal</a>, frame);
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a2f0f9bbcb70b987de66f83c6ba0d401e" title="Checks destination address and drops the frame when frame is not for us; returns true if frame is dro...">dropFrameNotForUs</a>(frame))
        <span class="keywordflow">return</span>;

    <span class="keywordflow">if</span> (dynamic_cast&lt;EtherPauseFrame*&gt;(frame) != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="class_ether_m_a_c.html#ab0c3eee5e46d5f2582eb570a23769393">processReceivedPauseFrame</a>((<a class="code" href="class_ether_pause_frame.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherPauseFrame</a>*)frame);
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_ether_m_a_c.html#aa33ddbf7b79b5ea62db2b6ff8822c1b1">processReceivedDataFrame</a>(check_and_cast&lt;EtherFrame *&gt;(frame));
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac1bf54200283ab7e0345c959d7a42a5b"></a><!-- doxytag: member="EtherMAC::handleEndBackoffPeriod" ref="ac1bf54200283ab7e0345c959d7a42a5b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#ac1bf54200283ab7e0345c959d7a42a5b">EtherMAC::handleEndBackoffPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a3a0bfc7f0c4e57a2b45618bfba2bfeac">handleSelfMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> != <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca9d91dadc5b704a3f1a271dfd4b2bea77">BACKOFF_STATE</a>)
        error(<span class="stringliteral">&quot;At end of BACKOFF and not in BACKOFF_STATE&quot;</span>);

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        error(<span class="stringliteral">&quot;At end of BACKOFF and no frame to transmit&quot;</span>);

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> == <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da9247b6c558b71ecb99bf0fdb4ec85bfd">RX_IDLE_STATE</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Backoff period ended, wait IFG\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c.html#a6e75c72197375b139f615f77cbc39756">scheduleEndIFGPeriod</a>();
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Backoff period ended but channel is not free, idling\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> = <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca335e9523aa0e5a68b054efdd11a70959">TX_IDLE_STATE</a>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aac09d6f301dc86d8571b5357723df86a"></a><!-- doxytag: member="EtherMAC::handleEndIFGPeriod" ref="aac09d6f301dc86d8571b5357723df86a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#aac09d6f301dc86d8571b5357723df86a">EtherMAC::handleEndIFGPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a3a0bfc7f0c4e57a2b45618bfba2bfeac">handleSelfMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> != <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca3c6cade3f5d1e523147657a295846ff0">WAIT_IFG_STATE</a> &amp;&amp; <a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> != <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca1e35748f4be2a94311da7b1abb816036">SEND_IFG_STATE</a>)
        error(<span class="stringliteral">&quot;Not in WAIT_IFG_STATE at the end of IFG period&quot;</span>);

    <a class="code" href="class_ether_m_a_c.html#a34bbf663bbc4d1f2d47b022ed47a6de8">currentSendPkTreeID</a> = 0;

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        error(<span class="stringliteral">&quot;End of IFG and no frame to transmit&quot;</span>);

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;IFG elapsed, starting transmission of frame &quot;</span> &lt;&lt; <a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a> &lt;&lt; endl;

    <span class="comment">// End of IFG period, okay to transmit, if Rx idle OR duplexMode ( checked in startFrameTransmission(); )</span>

    <span class="comment">// send frame to network</span>
    <a class="code" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1d46c3efdf2ba5b8ce90f68960541ca1"></a><!-- doxytag: member="EtherMAC::handleEndJammingPeriod" ref="a1d46c3efdf2ba5b8ce90f68960541ca1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a1d46c3efdf2ba5b8ce90f68960541ca1">EtherMAC::handleEndJammingPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a3a0bfc7f0c4e57a2b45618bfba2bfeac">handleSelfMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> != <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613caf7a7ef1c31b7b1e56fcc7c8f7f4ba506">JAMMING_STATE</a>)
        error(<span class="stringliteral">&quot;At end of JAMMING but not in JAMMING_STATE&quot;</span>);

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Jamming finished, executing backoff\n&quot;</span>;
    <a class="code" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">handleRetransmission</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a14f0b83301df740d089efb6540d7e66a"></a><!-- doxytag: member="EtherMAC::handleEndPausePeriod" ref="a14f0b83301df740d089efb6540d7e66a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a14f0b83301df740d089efb6540d7e66a">EtherMAC::handleEndPausePeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a3a0bfc7f0c4e57a2b45618bfba2bfeac">handleSelfMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> != <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613cab787ee5655a1d600803db7207548df2e">PAUSE_STATE</a>)
        error(<span class="stringliteral">&quot;At end of PAUSE and not in PAUSE_STATE&quot;</span>);

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Pause finished, resuming transmissions\n&quot;</span>;
    <a class="code" href="class_ether_m_a_c.html#ada3fd6c227bdf3c3248693edb0332693">beginSendFrames</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac928ada773c433249bbfc213866ecd76"></a><!-- doxytag: member="EtherMAC::handleEndRxPeriod" ref="ac928ada773c433249bbfc213866ecd76" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">EtherMAC::handleEndRxPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a3a0bfc7f0c4e57a2b45618bfba2bfeac">handleSelfMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    simtime_t dt = simTime() - <a class="code" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">channelBusySince</a>;

    <span class="keywordflow">switch</span> (<a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a>)
    {
        <span class="keywordflow">case</span> <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da4ef16ff2d576b85debe8b6425317521a">RECEIVING_STATE</a>:
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Frame reception complete\n&quot;</span>;
            <a class="code" href="class_ether_m_a_c.html#ab1866c852c77eed64de21abf79f3fa13">frameReceptionComplete</a>();
            <a class="code" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">totalSuccessfulRxTxTime</a> += dt;
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da731b0215286559c7f677e9a4aaf505ee">RX_COLLISION_STATE</a>:
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Incoming signals finished after collision\n&quot;</span>;
            <a class="code" href="class_ether_m_a_c.html#a4a14c7389b4f0174c421ea2ab2e38884">totalCollisionTime</a> += dt;
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da64512cf785577999692e79e96f341990">RX_RECONNECT_STATE</a>:
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Incoming signals finished or reconnect time elapsed after reconnect\n&quot;</span>;
            <a class="code" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">endRxTimeList</a>.clear();
            <span class="keywordflow">break</span>;

        <span class="keywordflow">default</span>:
            <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;model error: invalid receiveState %d&quot;</span>, <a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a>);
    }

    <a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> = <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da9247b6c558b71ecb99bf0fdb4ec85bfd">RX_IDLE_STATE</a>;
    <a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a> = 0;

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> == <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca335e9523aa0e5a68b054efdd11a70959">TX_IDLE_STATE</a>)
        <a class="code" href="class_ether_m_a_c.html#ada3fd6c227bdf3c3248693edb0332693">beginSendFrames</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="af94eb578c2dcc59eba5f13c88910a2a7"></a><!-- doxytag: member="EtherMAC::handleEndTxPeriod" ref="af94eb578c2dcc59eba5f13c88910a2a7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">EtherMAC::handleEndTxPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a3a0bfc7f0c4e57a2b45618bfba2bfeac">handleSelfMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// we only get here if transmission has finished successfully, without collision</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> != <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca5c7b701b9627caf6bc2137fc38692ca2">TRANSMITTING_STATE</a> || (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> &amp;&amp; <a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> != <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da9247b6c558b71ecb99bf0fdb4ec85bfd">RX_IDLE_STATE</a>))
        error(<span class="stringliteral">&quot;End of transmission, and incorrect state detected&quot;</span>);

    <a class="code" href="class_ether_m_a_c.html#a34bbf663bbc4d1f2d47b022ed47a6de8">currentSendPkTreeID</a> = 0;

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        error(<span class="stringliteral">&quot;Frame under transmission cannot be found&quot;</span>);

    emit(<a class="code" href="class_ether_m_a_c_base.html#af48a6fcf07cec44a9ebd052570ad4d49">packetSentToLowerSignal</a>, <a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a>);  <span class="comment">//consider: emit with start time of frame</span>

    <span class="keywordflow">if</span> (dynamic_cast&lt;EtherPauseFrame*&gt;(<a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a>) != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="class_ether_m_a_c_base.html#a8d966a21b0811d3fec20d668fc417936">numPauseFramesSent</a>++;
        emit(<a class="code" href="class_ether_m_a_c_base.html#a0b191aefc3f14f5e8de320b4ce02d723">txPausePkUnitsSignal</a>, ((<a class="code" href="class_ether_pause_frame.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherPauseFrame</a>*)<a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a>)-&gt;getPauseTime());
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> curBytes = <a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a>-&gt;<a class="code" href="class_ether_frame.html#a2676827c50740f9e3a70e8c87e8b200c">getFrameByteLength</a>();
        <a class="code" href="class_ether_m_a_c_base.html#a4a3c84673aeee74535c9d45db732ac74">numFramesSent</a>++;
        <a class="code" href="class_ether_m_a_c_base.html#a99c30e737395408d0b501f39864441ad">numBytesSent</a> += curBytes;
        emit(<a class="code" href="class_ether_m_a_c_base.html#a66f1440dab84ccea4148b350100e6fba">txPkSignal</a>, <a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a>);
    }

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Transmission of &quot;</span> &lt;&lt; <a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a> &lt;&lt; <span class="stringliteral">&quot; successfully completed\n&quot;</span>;
    <span class="keyword">delete</span> <a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a>;
    curTxFrame = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <a class="code" href="class_ether_m_a_c_base.html#abd8194feb05e81cf0ba84858627d3f51">lastTxFinishTime</a> = simTime();
    <a class="code" href="class_ether_m_a_c_base.html#af1c1e437afc65392a066194b26a1b7ae">getNextFrameFromQueue</a>();

    <span class="comment">// only count transmissions in totalSuccessfulRxTxTime if channel is half-duplex</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a>)
    {
        simtime_t dt = simTime() - <a class="code" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">channelBusySince</a>;
        <a class="code" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">totalSuccessfulRxTxTime</a> += dt;
    }

    <a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a> = 0;

    <span class="comment">// check for and obey received PAUSE frames after each transmission</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#af09fa6fddf8c72c22c3ff25d4802aef2">pauseUnitsRequested</a> &gt; 0)
    {
        <span class="comment">// if we received a PAUSE frame recently, go into PAUSE state</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Going to PAUSE mode for &quot;</span> &lt;&lt; <a class="code" href="class_ether_m_a_c_base.html#af09fa6fddf8c72c22c3ff25d4802aef2">pauseUnitsRequested</a> &lt;&lt; <span class="stringliteral">&quot; time units\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c.html#a8377d4c7c2248e98dd73f6c4c2f65393">scheduleEndPausePeriod</a>(pauseUnitsRequested);
        pauseUnitsRequested = 0;
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="class_ether_m_a_c.html#ada3fd6c227bdf3c3248693edb0332693">beginSendFrames</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7b8fce39a1befbef2a3baddaf7fb8ecc"></a><!-- doxytag: member="EtherMAC::handleMessage" ref="a7b8fce39a1befbef2a3baddaf7fb8ecc" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">EtherMAC::handleMessage</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a4ce61c9c8bafdc4268f4bd2076f66661">dataratesDiffer</a>)
        <a class="code" href="class_ether_m_a_c.html#ac8c224f7382adfa94c2753e1ccb0dbca" title="Calculates datarates, etc.">readChannelParameters</a>(<span class="keyword">true</span>);

    <a class="code" href="class_ether_m_a_c.html#ab1091e4dd64112bac3bbcfb3e43005af">printState</a>();

    <span class="comment">// some consistency check</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> &amp;&amp; <a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> == <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca5c7b701b9627caf6bc2137fc38692ca2">TRANSMITTING_STATE</a> &amp;&amp; <a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> != <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da9247b6c558b71ecb99bf0fdb4ec85bfd">RX_IDLE_STATE</a>)
        error(<span class="stringliteral">&quot;Inconsistent state -- transmitting and receiving at the same time&quot;</span>);

    <span class="keywordflow">if</span> (msg-&gt;isSelfMessage())
        <a class="code" href="class_ether_m_a_c.html#a3a0bfc7f0c4e57a2b45618bfba2bfeac">handleSelfMessage</a>(msg);
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getArrivalGate() == <a class="code" href="class_ether_m_a_c_base.html#a2c0aff095394d64df3c08e8ef84d5504">upperLayerInGate</a>)
        <a class="code" href="class_ether_m_a_c.html#a770c337725b006c9d89a81db7bff1985">processFrameFromUpperLayer</a>(check_and_cast&lt;EtherFrame *&gt;(msg));
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getArrivalGate() == <a class="code" href="class_ether_m_a_c_base.html#a803f4faf38e1410d98d97de5e55b3d4d">physInGate</a>)
        <a class="code" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork</a>(check_and_cast&lt;EtherTraffic *&gt;(msg));
    <span class="keywordflow">else</span>
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Message received from unknown gate&quot;</span>);

    <span class="keywordflow">if</span> (ev.isGUI())
        <a class="code" href="class_ether_m_a_c_base.html#a34f2526399ce9f2acc43eb80998f59bc">updateDisplayString</a>();

    <a class="code" href="class_ether_m_a_c.html#ab1091e4dd64112bac3bbcfb3e43005af">printState</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="af15db7ca7aea23ee77e75c047bbd46a3"></a><!-- doxytag: member="EtherMAC::handleRetransmission" ref="af15db7ca7aea23ee77e75c047bbd46a3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">EtherMAC::handleRetransmission</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a1d46c3efdf2ba5b8ce90f68960541ca1">handleEndJammingPeriod()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (++<a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a> &gt; <a class="code" href="_ethernet_8h.html#a7e1856ac7c6ed757978fc30bb92ace74">MAX_ATTEMPTS</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Number of retransmit attempts of frame exceeds maximum, cancelling transmission of frame\n&quot;</span>;
        <span class="keyword">delete</span> <a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a>;
        <a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        <a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> = <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca335e9523aa0e5a68b054efdd11a70959">TX_IDLE_STATE</a>;
        <a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a> = 0;
        <a class="code" href="class_ether_m_a_c_base.html#af1c1e437afc65392a066194b26a1b7ae">getNextFrameFromQueue</a>();
        <a class="code" href="class_ether_m_a_c.html#ada3fd6c227bdf3c3248693edb0332693">beginSendFrames</a>();
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Executing backoff procedure\n&quot;</span>;
    <span class="keywordtype">int</span> backoffRange = (<a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a> &gt;= <a class="code" href="_ethernet_8h.html#a1592d1d1a4a90325054c3a62b56337f3">BACKOFF_RANGE_LIMIT</a>) ? 1024 : (1 &lt;&lt; <a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a>);
    <span class="keywordtype">int</span> slotNumber = intuniform(0, backoffRange-1);

    scheduleAt(simTime() + slotNumber *<a class="code" href="class_ether_m_a_c_base.html#a131df388b990b0cae44ef9ee58b61981">curEtherDescr</a>-&gt;<a class="code" href="struct_ether_m_a_c_base_1_1_ether_descr.html#a5072eb11746832e193d494aa4be7d357">slotTime</a>, <a class="code" href="class_ether_m_a_c.html#ab33a400a74d73295145562de67ae0abf">endBackoffMsg</a>);
    <a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> = <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca9d91dadc5b704a3f1a271dfd4b2bea77">BACKOFF_STATE</a>;

    <a class="code" href="class_ether_m_a_c.html#a1102e2facae32b0696ca147ac0d1c8ee">numBackoffs</a>++;
    emit(<a class="code" href="class_ether_m_a_c.html#a8b31c64584ab13b6c290aa9a37900fc0">backoffSignal</a>, 1L);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3a0bfc7f0c4e57a2b45618bfba2bfeac"></a><!-- doxytag: member="EtherMAC::handleSelfMessage" ref="a3a0bfc7f0c4e57a2b45618bfba2bfeac" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a3a0bfc7f0c4e57a2b45618bfba2bfeac">EtherMAC::handleSelfMessage</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Process different self-messages (timer signals)</span>
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Self-message &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot; received\n&quot;</span>;

    <span class="keywordflow">switch</span> (msg-&gt;getKind())
    {
        <span class="keywordflow">case</span> <a class="code" href="class_ether_m_a_c_base.html#a34007ce877cd4f12d1e0395505353c96a3b53843daeb8ce7ec06c838972f005c8">ENDIFG</a>:
            <a class="code" href="class_ether_m_a_c.html#aac09d6f301dc86d8571b5357723df86a">handleEndIFGPeriod</a>();
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="class_ether_m_a_c_base.html#a34007ce877cd4f12d1e0395505353c96ace8bdbb6c6a62f9c2ce0e955c0f6002b">ENDTRANSMISSION</a>:
            <a class="code" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod</a>();
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="class_ether_m_a_c_base.html#a34007ce877cd4f12d1e0395505353c96a71dbfe9f91ba66f42b5830d3a7b26cc4">ENDRECEPTION</a>:
            <a class="code" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod</a>();
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="class_ether_m_a_c_base.html#a34007ce877cd4f12d1e0395505353c96a559a9e54a018eaf6715ff3f8369fb7aa">ENDBACKOFF</a>:
            <a class="code" href="class_ether_m_a_c.html#ac1bf54200283ab7e0345c959d7a42a5b">handleEndBackoffPeriod</a>();
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="class_ether_m_a_c_base.html#a34007ce877cd4f12d1e0395505353c96aaf76fa0d71de50506a445e9cc9367090">ENDJAMMING</a>:
            <a class="code" href="class_ether_m_a_c.html#a1d46c3efdf2ba5b8ce90f68960541ca1">handleEndJammingPeriod</a>();
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> <a class="code" href="class_ether_m_a_c_base.html#a34007ce877cd4f12d1e0395505353c96af3144f20a8547ce98eb1ff9d292ba34c">ENDPAUSE</a>:
            <a class="code" href="class_ether_m_a_c.html#a14f0b83301df740d089efb6540d7e66a">handleEndPausePeriod</a>();
            <span class="keywordflow">break</span>;

        <span class="keywordflow">default</span>:
            <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Self-message with unexpected message kind %d&quot;</span>, msg-&gt;getKind());
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad8e31ebe719a1be991c6d390313cea51"></a><!-- doxytag: member="EtherMAC::initialize" ref="ad8e31ebe719a1be991c6d390313cea51" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">EtherMAC::initialize</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#aeaef7b8c1c293ee6fa53e1786b7966ab">EtherMACBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">EtherMACBase::initialize</a>();

    <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;EndReception&quot;</span>, <a class="code" href="class_ether_m_a_c_base.html#a34007ce877cd4f12d1e0395505353c96a71dbfe9f91ba66f42b5830d3a7b26cc4">ENDRECEPTION</a>);
    <a class="code" href="class_ether_m_a_c.html#ab33a400a74d73295145562de67ae0abf">endBackoffMsg</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;EndBackoff&quot;</span>, <a class="code" href="class_ether_m_a_c_base.html#a34007ce877cd4f12d1e0395505353c96a559a9e54a018eaf6715ff3f8369fb7aa">ENDBACKOFF</a>);
    <a class="code" href="class_ether_m_a_c.html#a1d0fc561153186e5cc32c3c7347fd175">endJammingMsg</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;EndJamming&quot;</span>, <a class="code" href="class_ether_m_a_c_base.html#a34007ce877cd4f12d1e0395505353c96aaf76fa0d71de50506a445e9cc9367090">ENDJAMMING</a>);

    <span class="comment">// initialize state info</span>
    <a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a> = 0;
    <a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a> = 0;
    <a class="code" href="class_ether_m_a_c.html#a34bbf663bbc4d1f2d47b022ed47a6de8">currentSendPkTreeID</a> = 0;

    WATCH(<a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a>);
    WATCH(<a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3f71ecf267b96675b6fd535715b496e3"></a><!-- doxytag: member="EtherMAC::initializeFlags" ref="a3f71ecf267b96675b6fd535715b496e3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a3f71ecf267b96675b6fd535715b496e3">EtherMAC::initializeFlags</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#a77c3453b8c67baa5561f8891b8470817">EtherMACBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#a3f71ecf267b96675b6fd535715b496e3">EtherMACBase::initializeFlags</a>();

    <a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> = par(<span class="stringliteral">&quot;duplexMode&quot;</span>).boolValue();
    <a class="code" href="class_ether_m_a_c_base.html#a2d3576698535f9092562070198820198">frameBursting</a> = !<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> &amp;&amp; par(<span class="stringliteral">&quot;frameBursting&quot;</span>).boolValue();
    <a class="code" href="class_ether_m_a_c_base.html#a803f4faf38e1410d98d97de5e55b3d4d">physInGate</a>-&gt;setDeliverOnReceptionStart(<span class="keyword">true</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3771e8ebee7f14ab668d14e8157327d9"></a><!-- doxytag: member="EtherMAC::initializeStatistics" ref="a3771e8ebee7f14ab668d14e8157327d9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a3771e8ebee7f14ab668d14e8157327d9">EtherMAC::initializeStatistics</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#ac87b0bdc6d72b719a389e12568afefe1">EtherMACBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#a3771e8ebee7f14ab668d14e8157327d9">EtherMACBase::initializeStatistics</a>();

    <a class="code" href="class_ether_m_a_c.html#ab92fac1188d0a881355664c1f6defcc0">framesSentInBurst</a> = 0;
    <a class="code" href="class_ether_m_a_c.html#a0dc55056c383a44f1ffc6c24b6dd3cff">bytesSentInBurst</a> = 0;

    WATCH(<a class="code" href="class_ether_m_a_c.html#ab92fac1188d0a881355664c1f6defcc0">framesSentInBurst</a>);
    WATCH(<a class="code" href="class_ether_m_a_c.html#a0dc55056c383a44f1ffc6c24b6dd3cff">bytesSentInBurst</a>);

    <span class="comment">// initialize statistics</span>
    <a class="code" href="class_ether_m_a_c.html#a4a14c7389b4f0174c421ea2ab2e38884">totalCollisionTime</a> = 0.0;
    <a class="code" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">totalSuccessfulRxTxTime</a> = 0.0;
    <a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a> = <a class="code" href="class_ether_m_a_c.html#a1102e2facae32b0696ca147ac0d1c8ee">numBackoffs</a> = 0;

    WATCH(<a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a>);
    WATCH(<a class="code" href="class_ether_m_a_c.html#a1102e2facae32b0696ca147ac0d1c8ee">numBackoffs</a>);

    <a class="code" href="class_ether_m_a_c.html#a3d99bac1e7b9064258ac53d7927d311a">collisionSignal</a> = registerSignal(<span class="stringliteral">&quot;collision&quot;</span>);
    <a class="code" href="class_ether_m_a_c.html#a8b31c64584ab13b6c290aa9a37900fc0">backoffSignal</a> = registerSignal(<span class="stringliteral">&quot;backoff&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab1091e4dd64112bac3bbcfb3e43005af"></a><!-- doxytag: member="EtherMAC::printState" ref="ab1091e4dd64112bac3bbcfb3e43005af" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#ab1091e4dd64112bac3bbcfb3e43005af">EtherMAC::printState</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>, and <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#define CASE(x) case x: EV &lt;&lt; #x; break</span>
<span class="preprocessor"></span>
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;transmitState: &quot;</span>;
    <span class="keywordflow">switch</span> (<a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a>)
    {
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca335e9523aa0e5a68b054efdd11a70959">TX_IDLE_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca3c6cade3f5d1e523147657a295846ff0">WAIT_IFG_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca1e35748f4be2a94311da7b1abb816036">SEND_IFG_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca5c7b701b9627caf6bc2137fc38692ca2">TRANSMITTING_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613caf7a7ef1c31b7b1e56fcc7c8f7f4ba506">JAMMING_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca9d91dadc5b704a3f1a271dfd4b2bea77">BACKOFF_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613cab787ee5655a1d600803db7207548df2e">PAUSE_STATE</a>);
    }

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;,  receiveState: &quot;</span>;
    <span class="keywordflow">switch</span> (<a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a>)
    {
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da9247b6c558b71ecb99bf0fdb4ec85bfd">RX_IDLE_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da4ef16ff2d576b85debe8b6425317521a">RECEIVING_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da731b0215286559c7f677e9a4aaf505ee">RX_COLLISION_STATE</a>);
        <a class="code" href="_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da64512cf785577999692e79e96f341990">RX_RECONNECT_STATE</a>);
    }

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;,  backoffs: &quot;</span> &lt;&lt; <a class="code" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">backoffs</a>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;,  numConcurrentRxTransmissions: &quot;</span> &lt;&lt; <a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a>;

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#ad4d15ad4cbd92f71058d91dac821aba7">txQueue</a>.<a class="code" href="class_ether_m_a_c_base_1_1_mac_queue.html#a7521e824dc4708268a2c3753e6a4cc02">innerQueue</a>)
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;,  queueLength: &quot;</span> &lt;&lt; <a class="code" href="class_ether_m_a_c_base.html#ad4d15ad4cbd92f71058d91dac821aba7">txQueue</a>.<a class="code" href="class_ether_m_a_c_base_1_1_mac_queue.html#a7521e824dc4708268a2c3753e6a4cc02">innerQueue</a>-&gt;<a class="code" href="class_ether_m_a_c_base_1_1_inner_queue.html#ab81d3eb647bb596799fbf5356da9537d">length</a>();

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; endl;

<span class="preprocessor">#undef CASE</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a107f07a55358ac4bc5066d23a02beb1c"></a><!-- doxytag: member="EtherMAC::processConnectDisconnect" ref="a107f07a55358ac4bc5066d23a02beb1c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a107f07a55358ac4bc5066d23a02beb1c">EtherMAC::processConnectDisconnect</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#a525a5220598c7b57985f9e3d091dd931">EtherMACBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ace95f162bb4a264cded6f61154885b04">connected</a>)
    {
        <span class="keyword">delete</span> <a class="code" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">frameBeingReceived</a>;
        <a class="code" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">frameBeingReceived</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        cancelEvent(<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
        cancelEvent(<a class="code" href="class_ether_m_a_c.html#ab33a400a74d73295145562de67ae0abf">endBackoffMsg</a>);
        cancelEvent(<a class="code" href="class_ether_m_a_c.html#a1d0fc561153186e5cc32c3c7347fd175">endJammingMsg</a>);
        <a class="code" href="class_ether_m_a_c.html#a0dc55056c383a44f1ffc6c24b6dd3cff">bytesSentInBurst</a> = 0;
        <a class="code" href="class_ether_m_a_c.html#ab92fac1188d0a881355664c1f6defcc0">framesSentInBurst</a> = 0;
    }

    <a class="code" href="class_ether_m_a_c.html#a107f07a55358ac4bc5066d23a02beb1c">EtherMACBase::processConnectDisconnect</a>();

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#ace95f162bb4a264cded6f61154885b04">connected</a>)
    {
        <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a>)
        {
            <span class="comment">// start RX_RECONNECT_STATE</span>
            <a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> = <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da64512cf785577999692e79e96f341990">RX_RECONNECT_STATE</a>;
            simtime_t reconnectEndTime = simTime() + 8 * (<a class="code" href="_ethernet_8h.html#a46556edb8f0106b1ea6d611fce22f2df">MAX_ETHERNET_FRAME_BYTES</a> + <a class="code" href="_ethernet_8h.html#a7723123f880ac4868c09146452417300">JAM_SIGNAL_BYTES</a>) / <a class="code" href="class_ether_m_a_c_base.html#a131df388b990b0cae44ef9ee58b61981">curEtherDescr</a>-&gt;<a class="code" href="struct_ether_m_a_c_base_1_1_ether_descr.html#a646254a5ddf364628fa178836bb15691">txrate</a>;
            <a class="code" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">endRxTimeList</a>.clear();
            <a class="code" href="class_ether_m_a_c.html#af2a0d9b17daa0bd3d0b47a15163d9ace">addReceptionInReconnectState</a>(-1, reconnectEndTime);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2b1484987f4e6c34560f38290da7066b"></a><!-- doxytag: member="EtherMAC::processDetectedCollision" ref="a2b1484987f4e6c34560f38290da7066b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a2b1484987f4e6c34560f38290da7066b">EtherMAC::processDetectedCollision</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork()</a>, and <a class="el" href="class_ether_m_a_c.html#af3f7bc3979db3ba51dbf4b16f1213167">processReceivedJam()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> != <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da731b0215286559c7f677e9a4aaf505ee">RX_COLLISION_STATE</a>)
    {
        <span class="keyword">delete</span> <a class="code" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">frameBeingReceived</a>;
        <a class="code" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">frameBeingReceived</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

        <a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a>++;
        emit(<a class="code" href="class_ether_m_a_c.html#a3d99bac1e7b9064258ac53d7927d311a">collisionSignal</a>, 1L);
        <span class="comment">// go to collision state</span>
        <a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> = <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da731b0215286559c7f677e9a4aaf505ee">RX_COLLISION_STATE</a>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a770c337725b006c9d89a81db7bff1985"></a><!-- doxytag: member="EtherMAC::processFrameFromUpperLayer" ref="a770c337725b006c9d89a81db7bff1985" args="(EtherFrame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a770c337725b006c9d89a81db7bff1985">EtherMAC::processFrameFromUpperLayer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ether_frame.html">EtherFrame</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (frame-&gt;getByteLength() &lt; <a class="code" href="_ethernet_8h.html#af1aeba82bae190f10e219e04546e8cb7">MIN_ETHERNET_FRAME_BYTES</a>)
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Ethernet frame too short, must be at least 64 bytes (padding should be done at encapsulation)&quot;</span>);

    frame-&gt;setFrameByteLength(frame-&gt;getByteLength());

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Received frame from upper layer: &quot;</span> &lt;&lt; frame &lt;&lt; endl;

    emit(<a class="code" href="class_ether_m_a_c_base.html#a0edc734cf8b88779dda4f6788f890955">packetReceivedFromUpperSignal</a>, frame);

    <span class="keywordflow">if</span> (frame-&gt;getDest().equals(<a class="code" href="class_ether_m_a_c_base.html#aebb1b775724f697d509aa9594d590ffc">address</a>))
    {
        error(<span class="stringliteral">&quot;Logic error: frame %s from higher layer has local MAC address as dest (%s)&quot;</span>,
                frame-&gt;getFullName(), frame-&gt;getDest().str().c_str());
    }

    <span class="keywordflow">if</span> (frame-&gt;getByteLength() &gt; <a class="code" href="_ethernet_8h.html#a46556edb8f0106b1ea6d611fce22f2df">MAX_ETHERNET_FRAME_BYTES</a>)
    {
        error(<span class="stringliteral">&quot;Packet from higher layer (%d bytes) exceeds maximum Ethernet frame size (%d)&quot;</span>,
                (<span class="keywordtype">int</span>)(frame-&gt;getByteLength()), <a class="code" href="_ethernet_8h.html#a46556edb8f0106b1ea6d611fce22f2df">MAX_ETHERNET_FRAME_BYTES</a>);
    }

    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ace95f162bb4a264cded6f61154885b04">connected</a> || <a class="code" href="class_ether_m_a_c_base.html#a3ab55f66782d6fae503fd9c062896dc7">disabled</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; (!<a class="code" href="class_ether_m_a_c_base.html#ace95f162bb4a264cded6f61154885b04">connected</a> ? <span class="stringliteral">&quot;Interface is not connected&quot;</span> : <span class="stringliteral">&quot;MAC is disabled&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; -- dropping packet &quot;</span> &lt;&lt; frame &lt;&lt; endl;
        emit(<a class="code" href="class_ether_m_a_c_base.html#ae4ea0fb0b420ba39118c9efe5c5e44f7">dropPkFromHLIfaceDownSignal</a>, frame);
        <a class="code" href="class_ether_m_a_c_base.html#ab91f2d65a7833c5c920a42f397ae54b8">numDroppedPkFromHLIfaceDown</a>++;
        <span class="keyword">delete</span> frame;

        <a class="code" href="class_ether_m_a_c_base.html#a73bdf217918db8aab4f2d0071863a57e">requestNextFrameFromExtQueue</a>();
        <span class="keywordflow">return</span>;
    }

    <span class="comment">// fill in src address if not set</span>
    <span class="keywordflow">if</span> (frame-&gt;getSrc().isUnspecified())
        frame-&gt;setSrc(<a class="code" href="class_ether_m_a_c_base.html#aebb1b775724f697d509aa9594d590ffc">address</a>);

    <span class="keywordtype">bool</span> isPauseFrame = (<span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ether_pause_frame.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherPauseFrame</a>*<span class="keyword">&gt;</span>(frame) != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);

    <span class="keywordflow">if</span> (!isPauseFrame)
    {
        <a class="code" href="class_ether_m_a_c_base.html#aa023724e043a0b1ee29b57c240d2a446">numFramesFromHL</a>++;
        emit(<a class="code" href="class_ether_m_a_c_base.html#a46c54a735e2f730a9dad4b4be007b4ca">rxPkFromHLSignal</a>, frame);
    }

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#ad4d15ad4cbd92f71058d91dac821aba7">txQueue</a>.<a class="code" href="class_ether_m_a_c_base_1_1_mac_queue.html#a1b11f67c7c52077106727d4d85875aec">extQueue</a>)
    {
        ASSERT(<a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
        <a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a> = frame;
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#ad4d15ad4cbd92f71058d91dac821aba7">txQueue</a>.<a class="code" href="class_ether_m_a_c_base_1_1_mac_queue.html#a7521e824dc4708268a2c3753e6a4cc02">innerQueue</a>-&gt;<a class="code" href="class_ether_m_a_c_base_1_1_inner_queue.html#a382b6f53d77330894c81c714349268a2">isFull</a>())
            error(<span class="stringliteral">&quot;txQueue length exceeds %d -- this is probably due to &quot;</span>
                  <span class="stringliteral">&quot;a bogus app model generating excessive traffic &quot;</span>
                  <span class="stringliteral">&quot;(or if this is normal, increase txQueueLimit!)&quot;</span>,
                  <a class="code" href="class_ether_m_a_c_base.html#ad4d15ad4cbd92f71058d91dac821aba7">txQueue</a>.<a class="code" href="class_ether_m_a_c_base_1_1_mac_queue.html#a7521e824dc4708268a2c3753e6a4cc02">innerQueue</a>-&gt;<a class="code" href="class_ether_m_a_c_base_1_1_inner_queue.html#ab2d072e584282dc3930fb95cd8b1cace">getQueueLimit</a>());

        <span class="comment">// store frame and possibly begin transmitting</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Frame &quot;</span> &lt;&lt; frame &lt;&lt; <span class="stringliteral">&quot; arrived from higher layer, enqueueing\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c_base.html#ad4d15ad4cbd92f71058d91dac821aba7">txQueue</a>.<a class="code" href="class_ether_m_a_c_base_1_1_mac_queue.html#a7521e824dc4708268a2c3753e6a4cc02">innerQueue</a>-&gt;<a class="code" href="class_ether_m_a_c_base_1_1_inner_queue.html#a934176fc125fb9602a84d7e96b6a23c5">insertFrame</a>(frame);

        <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a> &amp;&amp; !<a class="code" href="class_ether_m_a_c_base.html#ad4d15ad4cbd92f71058d91dac821aba7">txQueue</a>.<a class="code" href="class_ether_m_a_c_base_1_1_mac_queue.html#a7521e824dc4708268a2c3753e6a4cc02">innerQueue</a>-&gt;<a class="code" href="class_ether_m_a_c_base_1_1_inner_queue.html#ac9dbd43109f1b259df2f6722da968ce3">empty</a>())
            <a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a> = (<a class="code" href="class_ether_frame.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherFrame</a>*)<a class="code" href="class_ether_m_a_c_base.html#ad4d15ad4cbd92f71058d91dac821aba7">txQueue</a>.<a class="code" href="class_ether_m_a_c_base_1_1_mac_queue.html#a7521e824dc4708268a2c3753e6a4cc02">innerQueue</a>-&gt;<a class="code" href="class_ether_m_a_c_base_1_1_inner_queue.html#af2833699eeced09ab2864ecbc0e8631c">pop</a>();
    }

    <span class="keywordflow">if</span> ((<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> || <a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> == <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da9247b6c558b71ecb99bf0fdb4ec85bfd">RX_IDLE_STATE</a>) &amp;&amp; <a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> == <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca335e9523aa0e5a68b054efdd11a70959">TX_IDLE_STATE</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;No incoming carrier signals detected, frame clear to send, wait IFG first\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c.html#a6e75c72197375b139f615f77cbc39756">scheduleEndIFGPeriod</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae77c4fe8c34ee6b48221cf047507ad04"></a><!-- doxytag: member="EtherMAC::processMsgFromNetwork" ref="ae77c4fe8c34ee6b48221cf047507ad04" args="(EtherTraffic *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">EtherMAC::processMsgFromNetwork</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ether_traffic.html">EtherTraffic</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Received frame from network: &quot;</span> &lt;&lt; msg &lt;&lt; endl;

    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ace95f162bb4a264cded6f61154885b04">connected</a> || <a class="code" href="class_ether_m_a_c_base.html#a3ab55f66782d6fae503fd9c062896dc7">disabled</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; (!<a class="code" href="class_ether_m_a_c_base.html#ace95f162bb4a264cded6f61154885b04">connected</a> ? <span class="stringliteral">&quot;Interface is not connected&quot;</span> : <span class="stringliteral">&quot;MAC is disabled&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; -- dropping msg &quot;</span> &lt;&lt; msg &lt;&lt; endl;
        <span class="keywordflow">if</span> (dynamic_cast&lt;EtherFrame *&gt;(msg))    <span class="comment">// do not count JAM and IFG packets</span>
        {
            emit(<a class="code" href="class_ether_m_a_c_base.html#ae19f36a33388144877f2b112cba04417">dropPkIfaceDownSignal</a>, msg);
            <a class="code" href="class_ether_m_a_c_base.html#a3758c9954f38a63de0398d3f9ccaf581">numDroppedIfaceDown</a>++;
        }
        <span class="keyword">delete</span> msg;

        <span class="keywordflow">return</span>;
    }

    <span class="comment">// detect cable length violation in half-duplex mode</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a>)
    {
        simtime_t propagationTime = simTime() - msg-&gt;getSendingTime();
        <span class="keywordflow">if</span> (propagationTime &gt;= <a class="code" href="class_ether_m_a_c_base.html#a131df388b990b0cae44ef9ee58b61981">curEtherDescr</a>-&gt;<a class="code" href="struct_ether_m_a_c_base_1_1_ether_descr.html#a7cd9d7bf8c7f0458888981075b1736d7">maxPropagationDelay</a>)
        {
            error(<span class="stringliteral">&quot;Very long frame propagation time detected, maybe cable exceeds &quot;</span>
                  <span class="stringliteral">&quot;maximum allowed length? (%lgs corresponds to an approx. %lgm cable)&quot;</span>,
                  SIMTIME_STR(propagationTime),
                  SIMTIME_STR(propagationTime * <a class="code" href="class_ether_m_a_c_base.html#ae62b4538ab1e7523ec5b5e87cf4214e1">SPEED_OF_LIGHT_IN_CABLE</a>));
        }
    }

    simtime_t endRxTime = simTime() + msg-&gt;getDuration();
    <a class="code" href="class_ether_jam.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherJam</a> *jamMsg = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_ether_jam.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherJam</a>*<span class="keyword">&gt;</span>(msg);

    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> &amp;&amp; <a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> == <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da64512cf785577999692e79e96f341990">RX_RECONNECT_STATE</a>)
    {
        <span class="keywordtype">long</span> treeId = jamMsg ? jamMsg-&gt;<a class="code" href="class_ether_jam.html#a609a748dc4d15d77940a113e79dbc272">getAbortedPkTreeID</a>() : msg-&gt;getTreeId();
        <a class="code" href="class_ether_m_a_c.html#af2a0d9b17daa0bd3d0b47a15163d9ace">addReceptionInReconnectState</a>(treeId, endRxTime);
        <span class="keyword">delete</span> msg;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> &amp;&amp; (<a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> == <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca5c7b701b9627caf6bc2137fc38692ca2">TRANSMITTING_STATE</a> || <a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> == <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca1e35748f4be2a94311da7b1abb816036">SEND_IFG_STATE</a>))
    {
        <span class="comment">// since we&#39;re half-duplex, receiveState must be RX_IDLE_STATE (asserted at top of handleMessage)</span>
        <span class="keywordflow">if</span> (jamMsg)
            error(<span class="stringliteral">&quot;Stray jam signal arrived while transmitting (usual cause is cable length exceeding allowed maximum)&quot;</span>);

        <span class="comment">// set receive state and schedule end of reception</span>
        <a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> = <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da731b0215286559c7f677e9a4aaf505ee">RX_COLLISION_STATE</a>;

        <a class="code" href="class_ether_m_a_c.html#a87ebdef798d4cd28fef1e76bbc465fb7">addReception</a>(endRxTime);
        <span class="keyword">delete</span> msg;

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Transmission interrupted by incoming frame, handling collision\n&quot;</span>;
        cancelEvent((<a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a>==<a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca5c7b701b9627caf6bc2137fc38692ca2">TRANSMITTING_STATE</a>) ? <a class="code" href="class_ether_m_a_c_base.html#a9b054b17bf4311eae452c82b7345129c">endTxMsg</a> : <a class="code" href="class_ether_m_a_c_base.html#aff45e7c294f90d4c381091e69227e409">endIFGMsg</a>);

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Transmitting jam signal\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c.html#a9631222986440dc566b8bba2f018d00a">sendJamSignal</a>(); <span class="comment">// backoff will be executed when jamming finished</span>

        <a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a>++;
        emit(<a class="code" href="class_ether_m_a_c.html#a3d99bac1e7b9064258ac53d7927d311a">collisionSignal</a>, 1L);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> == <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da9247b6c558b71ecb99bf0fdb4ec85bfd">RX_IDLE_STATE</a>)
    {
        <span class="keywordflow">if</span> (jamMsg)
            error(<span class="stringliteral">&quot;Stray jam signal arrived (usual cause is cable length exceeding allowed maximum)&quot;</span>);

        <a class="code" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">channelBusySince</a> = simTime();
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Start reception of frame\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c.html#a0229250b38c99446bc6bdf0eeab0dd7d">scheduleEndRxPeriod</a>(msg);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> == <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da4ef16ff2d576b85debe8b6425317521a">RECEIVING_STATE</a>
            &amp;&amp; !jamMsg
            &amp;&amp; <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>-&gt;getArrivalTime() - simTime() &lt; <a class="code" href="class_ether_m_a_c_base.html#a131df388b990b0cae44ef9ee58b61981">curEtherDescr</a>-&gt;<a class="code" href="struct_ether_m_a_c_base_1_1_ether_descr.html#a3a2eb2614faa268202bff2ccf93f09b5">halfBitTime</a>)
    {
        <span class="comment">// With the above condition we filter out &quot;false&quot; collisions that may occur with</span>
        <span class="comment">// back-to-back frames. That is: when &quot;beginning of frame&quot; message (this one) occurs</span>
        <span class="comment">// BEFORE &quot;end of previous frame&quot; event (endRxMsg) -- same simulation time,</span>
        <span class="comment">// only wrong order.</span>

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Back-to-back frames: completing reception of current frame, starting reception of next one\n&quot;</span>;

        <span class="comment">// complete reception of previous frame</span>
        cancelEvent(<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
        <a class="code" href="class_ether_m_a_c.html#ab1866c852c77eed64de21abf79f3fa13">frameReceptionComplete</a>();

        <span class="comment">// calculate usability</span>
        <a class="code" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">totalSuccessfulRxTxTime</a> += simTime()-<a class="code" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">channelBusySince</a>;
        <a class="code" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">channelBusySince</a> = simTime();

        <span class="comment">// start receiving next frame</span>
        <a class="code" href="class_ether_m_a_c.html#a0229250b38c99446bc6bdf0eeab0dd7d">scheduleEndRxPeriod</a>(msg);
    }
    <span class="keywordflow">else</span> <span class="comment">// (receiveState==RECEIVING_STATE || receiveState==RX_COLLISION_STATE)</span>
    {
        <span class="comment">// handle overlapping receptions</span>
        <span class="keywordflow">if</span> (jamMsg)
        {
            <a class="code" href="class_ether_m_a_c.html#af3f7bc3979db3ba51dbf4b16f1213167">processReceivedJam</a>(jamMsg);
        }
        <span class="keywordflow">else</span> <span class="comment">// EtherFrame or EtherPauseFrame</span>
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Overlapping receptions -- setting collision state\n&quot;</span>;
            <a class="code" href="class_ether_m_a_c.html#a87ebdef798d4cd28fef1e76bbc465fb7">addReception</a>(endRxTime);
            <span class="comment">// delete collided frames: arrived frame as well as the one we&#39;re currently receiving</span>
            <span class="keyword">delete</span> msg;
            <a class="code" href="class_ether_m_a_c.html#a2b1484987f4e6c34560f38290da7066b">processDetectedCollision</a>();
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa33ddbf7b79b5ea62db2b6ff8822c1b1"></a><!-- doxytag: member="EtherMAC::processReceivedDataFrame" ref="aa33ddbf7b79b5ea62db2b6ff8822c1b1" args="(EtherFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#aa33ddbf7b79b5ea62db2b6ff8822c1b1">EtherMAC::processReceivedDataFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ether_frame.html">EtherFrame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ab1866c852c77eed64de21abf79f3fa13">frameReceptionComplete()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// strip physical layer overhead (preamble, SFD, carrier extension) from frame</span>
    frame-&gt;setByteLength(frame-&gt;<a class="code" href="class_ether_frame.html#a2676827c50740f9e3a70e8c87e8b200c">getFrameByteLength</a>());

    <span class="comment">// statistics</span>
    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> curBytes = frame-&gt;getByteLength();
    <a class="code" href="class_ether_m_a_c_base.html#ab362e3dab6588c7bd7d06a951731055f">numFramesReceivedOK</a>++;
    <a class="code" href="class_ether_m_a_c_base.html#a2a20de751837dad02bb913e42c00bed7">numBytesReceivedOK</a> += curBytes;
    emit(<a class="code" href="class_ether_m_a_c_base.html#a636359fc873a9bc1adb573b844b60da2">rxPkOkSignal</a>, frame);

    <a class="code" href="class_ether_m_a_c_base.html#a77c26a21dc9b1cc9a759d78c52d43b99">numFramesPassedToHL</a>++;
    emit(<a class="code" href="class_ether_m_a_c_base.html#a5e9a8b1503fce5b9990dd8efae45f66e">packetSentToUpperSignal</a>, frame);
    <span class="comment">// pass up to upper layer</span>
    send(frame, <span class="stringliteral">&quot;upperLayerOut&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af3f7bc3979db3ba51dbf4b16f1213167"></a><!-- doxytag: member="EtherMAC::processReceivedJam" ref="af3f7bc3979db3ba51dbf4b16f1213167" args="(EtherJam *jam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#af3f7bc3979db3ba51dbf4b16f1213167">EtherMAC::processReceivedJam</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ether_jam.html">EtherJam</a> *&#160;</td>
          <td class="paramname"><em>jam</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork()</a>.</p>
<div class="fragment"><pre class="fragment">{
    simtime_t endRxTime = simTime() + jam-&gt;getDuration();
    <span class="keyword">delete</span> jam;

    <a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a>--;
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a> &lt; 0)
        error(<span class="stringliteral">&quot;Received JAM without message&quot;</span>);

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">numConcurrentTransmissions</a> == 0 || <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>-&gt;getArrivalTime() &lt; endRxTime)
    {
        cancelEvent(<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
        scheduleAt(endRxTime, <a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>);
    }

    <a class="code" href="class_ether_m_a_c.html#a2b1484987f4e6c34560f38290da7066b">processDetectedCollision</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab0c3eee5e46d5f2582eb570a23769393"></a><!-- doxytag: member="EtherMAC::processReceivedPauseFrame" ref="ab0c3eee5e46d5f2582eb570a23769393" args="(EtherPauseFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#ab0c3eee5e46d5f2582eb570a23769393">EtherMAC::processReceivedPauseFrame</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ether_pause_frame.html">EtherPauseFrame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ab1866c852c77eed64de21abf79f3fa13">frameReceptionComplete()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> pauseUnits = frame-&gt;<a class="code" href="class_ether_pause_frame.html#a42dc3eb8f15fac476a1677592a5c1fa6">getPauseTime</a>();
    <span class="keyword">delete</span> frame;

    <a class="code" href="class_ether_m_a_c_base.html#a5b2a8fc5412d43839ac22eb117222ef4">numPauseFramesRcvd</a>++;
    emit(<a class="code" href="class_ether_m_a_c_base.html#a8cefaa45902cc172eef6e8eb318f3f66">rxPausePkUnitsSignal</a>, pauseUnits);

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> == <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca335e9523aa0e5a68b054efdd11a70959">TX_IDLE_STATE</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;PAUSE frame received, pausing for &quot;</span> &lt;&lt; <a class="code" href="class_ether_m_a_c_base.html#af09fa6fddf8c72c22c3ff25d4802aef2">pauseUnitsRequested</a> &lt;&lt; <span class="stringliteral">&quot; time units\n&quot;</span>;
        <span class="keywordflow">if</span> (pauseUnits &gt; 0)
            <a class="code" href="class_ether_m_a_c.html#a8377d4c7c2248e98dd73f6c4c2f65393">scheduleEndPausePeriod</a>(pauseUnits);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> == <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613cab787ee5655a1d600803db7207548df2e">PAUSE_STATE</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;PAUSE frame received, pausing for &quot;</span> &lt;&lt; pauseUnitsRequested
           &lt;&lt; <span class="stringliteral">&quot; more time units from now\n&quot;</span>;
        cancelEvent(<a class="code" href="class_ether_m_a_c_base.html#ae21daac2e0436b82e7c3bcd7ff673d71">endPauseMsg</a>);

        <span class="keywordflow">if</span> (pauseUnits &gt; 0)
            <a class="code" href="class_ether_m_a_c.html#a8377d4c7c2248e98dd73f6c4c2f65393">scheduleEndPausePeriod</a>(pauseUnits);
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// transmitter busy -- wait until it finishes with current frame (endTx)</span>
        <span class="comment">// and then it&#39;ll go to PAUSE state</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;PAUSE frame received, storing pause request\n&quot;</span>;
        pauseUnitsRequested = pauseUnits;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac8c224f7382adfa94c2753e1ccb0dbca"></a><!-- doxytag: member="EtherMAC::readChannelParameters" ref="ac8c224f7382adfa94c2753e1ccb0dbca" args="(bool errorWhenAsymmetric)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#ac8c224f7382adfa94c2753e1ccb0dbca">EtherMAC::readChannelParameters</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>errorWhenAsymmetric</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates datarates, etc. </p>
<p>Verifies the datarates on the incoming/outgoing channels, and throws error when they differ and the parameter errorWhenAsymmetric is true. </p>

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#a348b5ddcb868f61daf5f8fb19d0eee3f">EtherMACBase</a>.</p>

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a7b8fce39a1befbef2a3baddaf7fb8ecc">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c.html#ac8c224f7382adfa94c2753e1ccb0dbca" title="Calculates datarates, etc.">EtherMACBase::readChannelParameters</a>(errorWhenAsymmetric);

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#ace95f162bb4a264cded6f61154885b04">connected</a> &amp;&amp; !<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a>)
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a131df388b990b0cae44ef9ee58b61981">curEtherDescr</a>-&gt;<a class="code" href="struct_ether_m_a_c_base_1_1_ether_descr.html#a5078da48d7e73bcfa2a3d2f175166a06">halfDuplexFrameMinBytes</a> &lt; 0.0)
            error(<span class="stringliteral">&quot;%g bps Ethernet only supports full-duplex links&quot;</span>, <a class="code" href="class_ether_m_a_c_base.html#a131df388b990b0cae44ef9ee58b61981">curEtherDescr</a>-&gt;<a class="code" href="struct_ether_m_a_c_base_1_1_ether_descr.html#a646254a5ddf364628fa178836bb15691">txrate</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6e75c72197375b139f615f77cbc39756"></a><!-- doxytag: member="EtherMAC::scheduleEndIFGPeriod" ref="a6e75c72197375b139f615f77cbc39756" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a6e75c72197375b139f615f77cbc39756">EtherMAC::scheduleEndIFGPeriod</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ada3fd6c227bdf3c3248693edb0332693">beginSendFrames()</a>, <a class="el" href="class_ether_m_a_c.html#ac1bf54200283ab7e0345c959d7a42a5b">handleEndBackoffPeriod()</a>, and <a class="el" href="class_ether_m_a_c.html#a770c337725b006c9d89a81db7bff1985">processFrameFromUpperLayer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(<a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a>);

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a2d3576698535f9092562070198820198">frameBursting</a>
            &amp;&amp; (simTime() == <a class="code" href="class_ether_m_a_c_base.html#abd8194feb05e81cf0ba84858627d3f51">lastTxFinishTime</a>)
            &amp;&amp; (<a class="code" href="class_ether_m_a_c.html#ab92fac1188d0a881355664c1f6defcc0">framesSentInBurst</a> &gt; 0)
            &amp;&amp; (framesSentInBurst &lt; curEtherDescr-&gt;maxFramesInBurst)
            &amp;&amp; (<a class="code" href="class_ether_m_a_c.html#a0dc55056c383a44f1ffc6c24b6dd3cff">bytesSentInBurst</a> + (<a class="code" href="_ethernet_8h.html#ac417a97debcbbfc4433c8b8b8c8b8808">INTERFRAME_GAP_BITS</a> / 8) + <a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a>-&gt;getByteLength()
                    &lt;= <a class="code" href="class_ether_m_a_c_base.html#a131df388b990b0cae44ef9ee58b61981">curEtherDescr</a>-&gt;<a class="code" href="struct_ether_m_a_c_base_1_1_ether_descr.html#a51526b8b50c5b70772c9dc89eb842ad4">maxBytesInBurst</a>)
       )
    {
        <a class="code" href="class_ether_i_f_g.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherIFG</a> *gap = <span class="keyword">new</span> <a class="code" href="class_ether_i_f_g.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherIFG</a>(<span class="stringliteral">&quot;IFG&quot;</span>);
        <a class="code" href="class_ether_m_a_c.html#a0dc55056c383a44f1ffc6c24b6dd3cff">bytesSentInBurst</a> += gap-&gt;getByteLength();
        <a class="code" href="class_ether_m_a_c.html#a34bbf663bbc4d1f2d47b022ed47a6de8">currentSendPkTreeID</a> = gap-&gt;getTreeId();
        send(gap, <a class="code" href="class_ether_m_a_c_base.html#aa83bcb5c4f6024e598c2bbbd2f7773bf">physOutGate</a>);
        <a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> = <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca1e35748f4be2a94311da7b1abb816036">SEND_IFG_STATE</a>;
        scheduleAt(<a class="code" href="class_ether_m_a_c_base.html#a6a5e3849cbc79a7b56361ee7c0d01371">transmissionChannel</a>-&gt;getTransmissionFinishTime(), <a class="code" href="class_ether_m_a_c_base.html#aff45e7c294f90d4c381091e69227e409">endIFGMsg</a>);
        <span class="comment">// FIXME Check collision?</span>
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_ether_i_f_g.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherIFG</a> gap;
        <a class="code" href="class_ether_m_a_c.html#a0dc55056c383a44f1ffc6c24b6dd3cff">bytesSentInBurst</a> = 0;
        <a class="code" href="class_ether_m_a_c.html#ab92fac1188d0a881355664c1f6defcc0">framesSentInBurst</a> = 0;
        <a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> = <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca3c6cade3f5d1e523147657a295846ff0">WAIT_IFG_STATE</a>;
        scheduleAt(simTime() + <a class="code" href="class_ether_m_a_c_base.html#a6a5e3849cbc79a7b56361ee7c0d01371">transmissionChannel</a>-&gt;calculateDuration(&amp;gap), <a class="code" href="class_ether_m_a_c_base.html#aff45e7c294f90d4c381091e69227e409">endIFGMsg</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8377d4c7c2248e98dd73f6c4c2f65393"></a><!-- doxytag: member="EtherMAC::scheduleEndPausePeriod" ref="a8377d4c7c2248e98dd73f6c4c2f65393" args="(int pauseUnits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a8377d4c7c2248e98dd73f6c4c2f65393">EtherMAC::scheduleEndPausePeriod</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pauseUnits</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod()</a>, and <a class="el" href="class_ether_m_a_c.html#ab0c3eee5e46d5f2582eb570a23769393">processReceivedPauseFrame()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// length is interpreted as 512-bit-time units</span>
    simtime_t pausePeriod = pauseUnits * <a class="code" href="_ethernet_8h.html#a4b6efb461da967a857bcc4405c703456">PAUSE_UNIT_BITS</a> / <a class="code" href="class_ether_m_a_c_base.html#a131df388b990b0cae44ef9ee58b61981">curEtherDescr</a>-&gt;<a class="code" href="struct_ether_m_a_c_base_1_1_ether_descr.html#a646254a5ddf364628fa178836bb15691">txrate</a>;
    scheduleAt(simTime() + pausePeriod, <a class="code" href="class_ether_m_a_c_base.html#ae21daac2e0436b82e7c3bcd7ff673d71">endPauseMsg</a>);
    <a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> = <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613cab787ee5655a1d600803db7207548df2e">PAUSE_STATE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0229250b38c99446bc6bdf0eeab0dd7d"></a><!-- doxytag: member="EtherMAC::scheduleEndRxPeriod" ref="a0229250b38c99446bc6bdf0eeab0dd7d" args="(EtherTraffic *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a0229250b38c99446bc6bdf0eeab0dd7d">EtherMAC::scheduleEndRxPeriod</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ether_traffic.html">EtherTraffic</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(<a class="code" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">frameBeingReceived</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
    ASSERT(!<a class="code" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">endRxMsg</a>-&gt;isScheduled());

    <a class="code" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">frameBeingReceived</a> = frame;
    <a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> = <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da4ef16ff2d576b85debe8b6425317521a">RECEIVING_STATE</a>;
    <a class="code" href="class_ether_m_a_c.html#a87ebdef798d4cd28fef1e76bbc465fb7">addReception</a>(simTime() + frame-&gt;getDuration());
}
</pre></div>
</div>
</div>
<a class="anchor" id="aeaf7d9b1fa62e3dda408bfec708477eb"></a><!-- doxytag: member="EtherMAC::scheduleEndTxPeriod" ref="aeaf7d9b1fa62e3dda408bfec708477eb" args="(EtherFrame *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#aeaf7d9b1fa62e3dda408bfec708477eb">EtherMAC::scheduleEndTxPeriod</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ether_frame.html">EtherFrame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// update burst variables</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a2d3576698535f9092562070198820198">frameBursting</a>)
    {
        <a class="code" href="class_ether_m_a_c.html#a0dc55056c383a44f1ffc6c24b6dd3cff">bytesSentInBurst</a> += frame-&gt;getByteLength();
        <a class="code" href="class_ether_m_a_c.html#ab92fac1188d0a881355664c1f6defcc0">framesSentInBurst</a>++;
    }

    scheduleAt(<a class="code" href="class_ether_m_a_c_base.html#a6a5e3849cbc79a7b56361ee7c0d01371">transmissionChannel</a>-&gt;getTransmissionFinishTime(), <a class="code" href="class_ether_m_a_c_base.html#a9b054b17bf4311eae452c82b7345129c">endTxMsg</a>);
    <a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> = <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca5c7b701b9627caf6bc2137fc38692ca2">TRANSMITTING_STATE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9631222986440dc566b8bba2f018d00a"></a><!-- doxytag: member="EtherMAC::sendJamSignal" ref="a9631222986440dc566b8bba2f018d00a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a9631222986440dc566b8bba2f018d00a">EtherMAC::sendJamSignal</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork()</a>, and <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c.html#a34bbf663bbc4d1f2d47b022ed47a6de8">currentSendPkTreeID</a> == 0)
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Model error: sending JAM while not transmitting&quot;</span>);

    <a class="code" href="class_ether_jam.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherJam</a> *jam = <span class="keyword">new</span> <a class="code" href="class_ether_jam.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherJam</a>(<span class="stringliteral">&quot;JAM_SIGNAL&quot;</span>);
    jam-&gt;setByteLength(<a class="code" href="_ethernet_8h.html#a7723123f880ac4868c09146452417300">JAM_SIGNAL_BYTES</a>);
    jam-&gt;<a class="code" href="class_ether_jam.html#a11611d05ac5be1275195b6b7ce51da11">setAbortedPkTreeID</a>(<a class="code" href="class_ether_m_a_c.html#a34bbf663bbc4d1f2d47b022ed47a6de8">currentSendPkTreeID</a>);

    <a class="code" href="class_ether_m_a_c_base.html#a6a5e3849cbc79a7b56361ee7c0d01371">transmissionChannel</a>-&gt;forceTransmissionFinishTime(SIMTIME_ZERO);
    emit(<a class="code" href="class_ether_m_a_c_base.html#af48a6fcf07cec44a9ebd052570ad4d49">packetSentToLowerSignal</a>, jam);
    send(jam, <a class="code" href="class_ether_m_a_c_base.html#aa83bcb5c4f6024e598c2bbbd2f7773bf">physOutGate</a>);

    scheduleAt(<a class="code" href="class_ether_m_a_c_base.html#a6a5e3849cbc79a7b56361ee7c0d01371">transmissionChannel</a>-&gt;getTransmissionFinishTime(), <a class="code" href="class_ether_m_a_c.html#a1d0fc561153186e5cc32c3c7347fd175">endJammingMsg</a>);
    <a class="code" href="class_ether_m_a_c_base.html#a809b740ff0ac37138fd54f53ca04cac0">transmitState</a> = <a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613caf7a7ef1c31b7b1e56fcc7c8f7f4ba506">JAMMING_STATE</a>;

    <span class="keywordflow">if</span> (ev.isGUI())
        <a class="code" href="class_ether_m_a_c_base.html#aa827c8d34ae90fe0c4b63c2a7bb2fde5">updateConnectionColor</a>(<a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613caf7a7ef1c31b7b1e56fcc7c8f7f4ba506">JAMMING_STATE</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a38a8c421c3bee0282b4fa9660d6e71bf"></a><!-- doxytag: member="EtherMAC::startFrameTransmission" ref="a38a8c421c3bee0282b4fa9660d6e71bf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">EtherMAC::startFrameTransmission</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#aac09d6f301dc86d8571b5357723df86a">handleEndIFGPeriod()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Transmitting a copy of frame &quot;</span> &lt;&lt; <a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a> &lt;&lt; endl;

    <a class="code" href="class_ether_frame.html" title="Class generated from linklayer/ethernet/EtherFrame.msg by opp_msgc.">EtherFrame</a> *frame = <a class="code" href="class_ether_m_a_c_base.html#a523b136d474a676ca35db2beee64278a">curTxFrame</a>-&gt;<a class="code" href="class_ether_frame.html#a21018a0098400ffe10c9b06bc6537ace">dup</a>();

    <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="class_ether_frame.html#ad28a0f89c2e9e5dbe274ed8b9fd419a7">getSrc</a>().<a class="code" href="class_m_a_c_address.html#ae41af013d782b46483e7d0c84f0ed107" title="Returns true if all address bytes are zero.">isUnspecified</a>())
        frame-&gt;<a class="code" href="class_ether_frame.html#a969e744a68054035d3efa84c1ac40578">setSrc</a>(<a class="code" href="class_ether_m_a_c_base.html#aebb1b775724f697d509aa9594d590ffc">address</a>);

    <span class="keywordtype">bool</span> inBurst = <a class="code" href="class_ether_m_a_c_base.html#a2d3576698535f9092562070198820198">frameBursting</a> &amp;&amp; <a class="code" href="class_ether_m_a_c.html#ab92fac1188d0a881355664c1f6defcc0">framesSentInBurst</a>;
    int64 minFrameLength = <a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> ? <a class="code" href="class_ether_m_a_c_base.html#a131df388b990b0cae44ef9ee58b61981">curEtherDescr</a>-&gt;<a class="code" href="struct_ether_m_a_c_base_1_1_ether_descr.html#a79d0a3a9fe9dcb20b465884ea4d08129">frameMinBytes</a> : (inBurst ? <a class="code" href="class_ether_m_a_c_base.html#a131df388b990b0cae44ef9ee58b61981">curEtherDescr</a>-&gt;<a class="code" href="struct_ether_m_a_c_base_1_1_ether_descr.html#a1b98f3c10b66c79b42e34d6ccc675dc0">frameInBurstMinBytes</a> : <a class="code" href="class_ether_m_a_c_base.html#a131df388b990b0cae44ef9ee58b61981">curEtherDescr</a>-&gt;<a class="code" href="struct_ether_m_a_c_base_1_1_ether_descr.html#a5078da48d7e73bcfa2a3d2f175166a06">halfDuplexFrameMinBytes</a>);

    <span class="keywordflow">if</span> (frame-&gt;getByteLength() &lt; minFrameLength)
        frame-&gt;setByteLength(minFrameLength);

    <span class="comment">// add preamble and SFD (Starting Frame Delimiter), then send out</span>
    frame-&gt;addByteLength(<a class="code" href="_ethernet_8h.html#a7d9c5baa3aead7d06ae791833bde0d88">PREAMBLE_BYTES</a>+<a class="code" href="_ethernet_8h.html#ad9ee8ec9d34ff29becf20068ee649edd">SFD_BYTES</a>);

    <span class="keywordflow">if</span> (ev.isGUI())
        <a class="code" href="class_ether_m_a_c_base.html#aa827c8d34ae90fe0c4b63c2a7bb2fde5">updateConnectionColor</a>(<a class="code" href="class_ether_m_a_c_base.html#a5c8eb3270603bc0fc8a04ae4f559613ca5c7b701b9627caf6bc2137fc38692ca2">TRANSMITTING_STATE</a>);

    <a class="code" href="class_ether_m_a_c.html#a34bbf663bbc4d1f2d47b022ed47a6de8">currentSendPkTreeID</a> = frame-&gt;getTreeId();
    send(frame, <a class="code" href="class_ether_m_a_c_base.html#aa83bcb5c4f6024e598c2bbbd2f7773bf">physOutGate</a>);

    <span class="comment">// check for collisions (there might be an ongoing reception which we don&#39;t know about, see below)</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> &amp;&amp; <a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> != <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da9247b6c558b71ecb99bf0fdb4ec85bfd">RX_IDLE_STATE</a>)
    {
        <span class="comment">// During the IFG period the hardware cannot listen to the channel,</span>
        <span class="comment">// so it might happen that receptions have begun during the IFG,</span>
        <span class="comment">// and even collisions might be in progress.</span>
        <span class="comment">//</span>
        <span class="comment">// But we don&#39;t know of any ongoing transmission so we blindly</span>
        <span class="comment">// start transmitting, immediately collide and send a jam signal.</span>
        <span class="comment">//</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;startFrameTransmission(): sending JAM signal.\n&quot;</span>;
        <a class="code" href="class_ether_m_a_c.html#ab1091e4dd64112bac3bbcfb3e43005af">printState</a>();

        <a class="code" href="class_ether_m_a_c.html#a9631222986440dc566b8bba2f018d00a">sendJamSignal</a>();
        <span class="comment">// numConcurrentRxTransmissions stays the same: +1 transmission, -1 jam</span>

        <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> == <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da4ef16ff2d576b85debe8b6425317521a">RECEIVING_STATE</a>)
        {
            <span class="keyword">delete</span> <a class="code" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">frameBeingReceived</a>;
            <a class="code" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">frameBeingReceived</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

            <a class="code" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">numCollisions</a>++;
            emit(<a class="code" href="class_ether_m_a_c.html#a3d99bac1e7b9064258ac53d7927d311a">collisionSignal</a>, 1L);
        }
        <span class="comment">// go to collision state</span>
        <a class="code" href="class_ether_m_a_c_base.html#adf71092a98b83728ce8cb08998afe528">receiveState</a> = <a class="code" href="class_ether_m_a_c_base.html#ae46c9696a22b1b2442986314bdfefe4da731b0215286559c7f677e9a4aaf505ee">RX_COLLISION_STATE</a>;
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// no collision</span>
        <a class="code" href="class_ether_m_a_c.html#aeaf7d9b1fa62e3dda408bfec708477eb">scheduleEndTxPeriod</a>(frame);

        <span class="comment">// only count transmissions in totalSuccessfulRxTxTime if channel is half-duplex</span>
        <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a>)
            <a class="code" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">channelBusySince</a> = simTime();
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="adaa6c4898c554a32a5c527c3fa0cd61f"></a><!-- doxytag: member="EtherMAC::backoffs" ref="adaa6c4898c554a32a5c527c3fa0cd61f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ether_m_a_c.html#adaa6c4898c554a32a5c527c3fa0cd61f">EtherMAC::backoffs</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">handleRetransmission()</a>, <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, and <a class="el" href="class_ether_m_a_c.html#ab1091e4dd64112bac3bbcfb3e43005af">printState()</a>.</p>

</div>
</div>
<a class="anchor" id="a8b31c64584ab13b6c290aa9a37900fc0"></a><!-- doxytag: member="EtherMAC::backoffSignal" ref="a8b31c64584ab13b6c290aa9a37900fc0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simsignal_t <a class="el" href="class_ether_m_a_c.html#a8b31c64584ab13b6c290aa9a37900fc0">EtherMAC::backoffSignal</a> = SIMSIGNAL_NULL<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">handleRetransmission()</a>, and <a class="el" href="class_ether_m_a_c.html#a3771e8ebee7f14ab668d14e8157327d9">initializeStatistics()</a>.</p>

</div>
</div>
<a class="anchor" id="a0dc55056c383a44f1ffc6c24b6dd3cff"></a><!-- doxytag: member="EtherMAC::bytesSentInBurst" ref="a0dc55056c383a44f1ffc6c24b6dd3cff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ether_m_a_c.html#a0dc55056c383a44f1ffc6c24b6dd3cff">EtherMAC::bytesSentInBurst</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a3771e8ebee7f14ab668d14e8157327d9">initializeStatistics()</a>, <a class="el" href="class_ether_m_a_c.html#a107f07a55358ac4bc5066d23a02beb1c">processConnectDisconnect()</a>, <a class="el" href="class_ether_m_a_c.html#a6e75c72197375b139f615f77cbc39756">scheduleEndIFGPeriod()</a>, and <a class="el" href="class_ether_m_a_c.html#aeaf7d9b1fa62e3dda408bfec708477eb">scheduleEndTxPeriod()</a>.</p>

</div>
</div>
<a class="anchor" id="a092179c05dca493d0bfa237057c766f1"></a><!-- doxytag: member="EtherMAC::channelBusySince" ref="a092179c05dca493d0bfa237057c766f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ether_m_a_c.html#a092179c05dca493d0bfa237057c766f1">EtherMAC::channelBusySince</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork()</a>, and <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d99bac1e7b9064258ac53d7927d311a"></a><!-- doxytag: member="EtherMAC::collisionSignal" ref="a3d99bac1e7b9064258ac53d7927d311a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simsignal_t <a class="el" href="class_ether_m_a_c.html#a3d99bac1e7b9064258ac53d7927d311a">EtherMAC::collisionSignal</a> = SIMSIGNAL_NULL<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a3771e8ebee7f14ab668d14e8157327d9">initializeStatistics()</a>, <a class="el" href="class_ether_m_a_c.html#a2b1484987f4e6c34560f38290da7066b">processDetectedCollision()</a>, <a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork()</a>, and <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>.</p>

</div>
</div>
<a class="anchor" id="a34bbf663bbc4d1f2d47b022ed47a6de8"></a><!-- doxytag: member="EtherMAC::currentSendPkTreeID" ref="a34bbf663bbc4d1f2d47b022ed47a6de8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_ether_m_a_c.html#a34bbf663bbc4d1f2d47b022ed47a6de8">EtherMAC::currentSendPkTreeID</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#aac09d6f301dc86d8571b5357723df86a">handleEndIFGPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, <a class="el" href="class_ether_m_a_c.html#a6e75c72197375b139f615f77cbc39756">scheduleEndIFGPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#a9631222986440dc566b8bba2f018d00a">sendJamSignal()</a>, and <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>.</p>

</div>
</div>
<a class="anchor" id="ab33a400a74d73295145562de67ae0abf"></a><!-- doxytag: member="EtherMAC::endBackoffMsg" ref="ab33a400a74d73295145562de67ae0abf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage * <a class="el" href="class_ether_m_a_c.html#ab33a400a74d73295145562de67ae0abf">EtherMAC::endBackoffMsg</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a936a9d50c3e4cda99c3004c4778cadf4">EtherMAC()</a>, <a class="el" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">handleRetransmission()</a>, <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, <a class="el" href="class_ether_m_a_c.html#a107f07a55358ac4bc5066d23a02beb1c">processConnectDisconnect()</a>, and <a class="el" href="class_ether_m_a_c.html#a52727b8fdc3ddb6ead25d8beab1fe817">~EtherMAC()</a>.</p>

</div>
</div>
<a class="anchor" id="a1d0fc561153186e5cc32c3c7347fd175"></a><!-- doxytag: member="EtherMAC::endJammingMsg" ref="a1d0fc561153186e5cc32c3c7347fd175" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage * <a class="el" href="class_ether_m_a_c.html#a1d0fc561153186e5cc32c3c7347fd175">EtherMAC::endJammingMsg</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a936a9d50c3e4cda99c3004c4778cadf4">EtherMAC()</a>, <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, <a class="el" href="class_ether_m_a_c.html#a107f07a55358ac4bc5066d23a02beb1c">processConnectDisconnect()</a>, <a class="el" href="class_ether_m_a_c.html#a9631222986440dc566b8bba2f018d00a">sendJamSignal()</a>, and <a class="el" href="class_ether_m_a_c.html#a52727b8fdc3ddb6ead25d8beab1fe817">~EtherMAC()</a>.</p>

</div>
</div>
<a class="anchor" id="ab79b95dcdd4fd99014b65b20480079ef"></a><!-- doxytag: member="EtherMAC::endRxMsg" ref="ab79b95dcdd4fd99014b65b20480079ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_ether_m_a_c.html#ab79b95dcdd4fd99014b65b20480079ef">EtherMAC::endRxMsg</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a87ebdef798d4cd28fef1e76bbc465fb7">addReception()</a>, <a class="el" href="class_ether_m_a_c.html#af2a0d9b17daa0bd3d0b47a15163d9ace">addReceptionInReconnectState()</a>, <a class="el" href="class_ether_m_a_c.html#a936a9d50c3e4cda99c3004c4778cadf4">EtherMAC()</a>, <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, <a class="el" href="class_ether_m_a_c.html#a107f07a55358ac4bc5066d23a02beb1c">processConnectDisconnect()</a>, <a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork()</a>, <a class="el" href="class_ether_m_a_c.html#af3f7bc3979db3ba51dbf4b16f1213167">processReceivedJam()</a>, <a class="el" href="class_ether_m_a_c.html#a0229250b38c99446bc6bdf0eeab0dd7d">scheduleEndRxPeriod()</a>, and <a class="el" href="class_ether_m_a_c.html#a52727b8fdc3ddb6ead25d8beab1fe817">~EtherMAC()</a>.</p>

</div>
</div>
<a class="anchor" id="abe0072e98ae4d2c13bbef1842604b52b"></a><!-- doxytag: member="EtherMAC::endRxTimeList" ref="abe0072e98ae4d2c13bbef1842604b52b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ether_m_a_c.html#abf7b66628081493e01cfd637f3f846d2">EndRxTimeList</a> <a class="el" href="class_ether_m_a_c.html#abe0072e98ae4d2c13bbef1842604b52b">EtherMAC::endRxTimeList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#af2a0d9b17daa0bd3d0b47a15163d9ace">addReceptionInReconnectState()</a>, <a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod()</a>, and <a class="el" href="class_ether_m_a_c.html#a107f07a55358ac4bc5066d23a02beb1c">processConnectDisconnect()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f3740a7d560c9b2f2fcf8a949eaba25"></a><!-- doxytag: member="EtherMAC::frameBeingReceived" ref="a6f3740a7d560c9b2f2fcf8a949eaba25" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ether_traffic.html">EtherTraffic</a>* <a class="el" href="class_ether_m_a_c.html#a6f3740a7d560c9b2f2fcf8a949eaba25">EtherMAC::frameBeingReceived</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a936a9d50c3e4cda99c3004c4778cadf4">EtherMAC()</a>, <a class="el" href="class_ether_m_a_c.html#ab1866c852c77eed64de21abf79f3fa13">frameReceptionComplete()</a>, <a class="el" href="class_ether_m_a_c.html#a107f07a55358ac4bc5066d23a02beb1c">processConnectDisconnect()</a>, <a class="el" href="class_ether_m_a_c.html#a2b1484987f4e6c34560f38290da7066b">processDetectedCollision()</a>, <a class="el" href="class_ether_m_a_c.html#a0229250b38c99446bc6bdf0eeab0dd7d">scheduleEndRxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>, and <a class="el" href="class_ether_m_a_c.html#a52727b8fdc3ddb6ead25d8beab1fe817">~EtherMAC()</a>.</p>

</div>
</div>
<a class="anchor" id="ab92fac1188d0a881355664c1f6defcc0"></a><!-- doxytag: member="EtherMAC::framesSentInBurst" ref="ab92fac1188d0a881355664c1f6defcc0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_ether_m_a_c.html#ab92fac1188d0a881355664c1f6defcc0">EtherMAC::framesSentInBurst</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a3771e8ebee7f14ab668d14e8157327d9">initializeStatistics()</a>, <a class="el" href="class_ether_m_a_c.html#a107f07a55358ac4bc5066d23a02beb1c">processConnectDisconnect()</a>, <a class="el" href="class_ether_m_a_c.html#a6e75c72197375b139f615f77cbc39756">scheduleEndIFGPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#aeaf7d9b1fa62e3dda408bfec708477eb">scheduleEndTxPeriod()</a>, and <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>.</p>

</div>
</div>
<a class="anchor" id="a1102e2facae32b0696ca147ac0d1c8ee"></a><!-- doxytag: member="EtherMAC::numBackoffs" ref="a1102e2facae32b0696ca147ac0d1c8ee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long <a class="el" href="class_ether_m_a_c.html#a1102e2facae32b0696ca147ac0d1c8ee">EtherMAC::numBackoffs</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a32d76cb953c50e550638319aad976c89">finish()</a>, <a class="el" href="class_ether_m_a_c.html#af15db7ca7aea23ee77e75c047bbd46a3">handleRetransmission()</a>, and <a class="el" href="class_ether_m_a_c.html#a3771e8ebee7f14ab668d14e8157327d9">initializeStatistics()</a>.</p>

</div>
</div>
<a class="anchor" id="ab9950c06d98064cf81fc1421d01ae282"></a><!-- doxytag: member="EtherMAC::numCollisions" ref="ab9950c06d98064cf81fc1421d01ae282" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long <a class="el" href="class_ether_m_a_c.html#ab9950c06d98064cf81fc1421d01ae282">EtherMAC::numCollisions</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a32d76cb953c50e550638319aad976c89">finish()</a>, <a class="el" href="class_ether_m_a_c.html#a3771e8ebee7f14ab668d14e8157327d9">initializeStatistics()</a>, <a class="el" href="class_ether_m_a_c.html#a2b1484987f4e6c34560f38290da7066b">processDetectedCollision()</a>, <a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork()</a>, and <a class="el" href="class_ether_m_a_c.html#a38a8c421c3bee0282b4fa9660d6e71bf">startFrameTransmission()</a>.</p>

</div>
</div>
<a class="anchor" id="ab387cd871e256012011122abfddab12a"></a><!-- doxytag: member="EtherMAC::numConcurrentTransmissions" ref="ab387cd871e256012011122abfddab12a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_ether_m_a_c.html#ab387cd871e256012011122abfddab12a">EtherMAC::numConcurrentTransmissions</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a87ebdef798d4cd28fef1e76bbc465fb7">addReception()</a>, <a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#ad8e31ebe719a1be991c6d390313cea51">initialize()</a>, <a class="el" href="class_ether_m_a_c.html#ab1091e4dd64112bac3bbcfb3e43005af">printState()</a>, and <a class="el" href="class_ether_m_a_c.html#af3f7bc3979db3ba51dbf4b16f1213167">processReceivedJam()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a14c7389b4f0174c421ea2ab2e38884"></a><!-- doxytag: member="EtherMAC::totalCollisionTime" ref="a4a14c7389b4f0174c421ea2ab2e38884" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ether_m_a_c.html#a4a14c7389b4f0174c421ea2ab2e38884">EtherMAC::totalCollisionTime</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a32d76cb953c50e550638319aad976c89">finish()</a>, <a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod()</a>, and <a class="el" href="class_ether_m_a_c.html#a3771e8ebee7f14ab668d14e8157327d9">initializeStatistics()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ea84aee874e2a47b305917d5d05cb0e"></a><!-- doxytag: member="EtherMAC::totalSuccessfulRxTxTime" ref="a7ea84aee874e2a47b305917d5d05cb0e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_ether_m_a_c.html#a7ea84aee874e2a47b305917d5d05cb0e">EtherMAC::totalSuccessfulRxTxTime</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c.html#a32d76cb953c50e550638319aad976c89">finish()</a>, <a class="el" href="class_ether_m_a_c.html#ac928ada773c433249bbfc213866ecd76">handleEndRxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#af94eb578c2dcc59eba5f13c88910a2a7">handleEndTxPeriod()</a>, <a class="el" href="class_ether_m_a_c.html#a3771e8ebee7f14ab668d14e8157327d9">initializeStatistics()</a>, and <a class="el" href="class_ether_m_a_c.html#ae77c4fe8c34ee6b48221cf047507ad04">processMsgFromNetwork()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_ether_m_a_c_8h.html">EtherMAC.h</a></li>
<li><a class="el" href="_ether_m_a_c_8cc.html">EtherMAC.cc</a></li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_ether_m_a_c.html">EtherMAC</a>      </li>

    <li class="footer">Generated on Tue Aug 7 2012 16:01:23 for INET Framework for OMNeT++/OMNEST by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
