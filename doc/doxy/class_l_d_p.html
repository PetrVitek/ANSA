<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>INET Framework for OMNeT++/OMNEST: LDP Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_l_d_p.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">LDP Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="LDP" --><!-- doxytag: inherits="TCPSocket::CallbackInterface,IClassifier,INotifiable" -->
<p><code>#include &lt;<a class="el" href="_l_d_p_8h_source.html">LDP.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for LDP:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_l_d_p.png" usemap="#LDP_map" alt=""/>
  <map id="LDP_map" name="LDP_map">
<area href="class_t_c_p_socket_1_1_callback_interface.html" alt="TCPSocket::CallbackInterface" shape="rect" coords="0,0,179,24"/>
<area href="class_i_classifier.html" alt="IClassifier" shape="rect" coords="189,0,368,24"/>
<area href="class_i_notifiable.html" alt="INotifiable" shape="rect" coords="378,0,557,24"/>
</map>
 </div></div>

<p><a href="class_l_d_p-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_l_d_p_1_1fec__bind__t.html">fec_bind_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_l_d_p_1_1fec__t.html">fec_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_l_d_p_1_1peer__info.html">peer_info</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_l_d_p_1_1pending__req__t.html">pending_req_t</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="struct_l_d_p_1_1fec__t.html">fec_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a8885142cabdbcdfb12cb843004e106b9">FecVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="struct_l_d_p_1_1fec__bind__t.html">fec_bind_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#ac4dfef44f74ce936740e748b38e3fbb9">FecBindVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::vector<br class="typebreak"/>
&lt; <a class="el" href="struct_l_d_p_1_1pending__req__t.html">pending_req_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a6760a0b95012016f5c82715e458bdc86">PendingVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="struct_l_d_p_1_1peer__info.html">peer_info</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#aac430f243de69caa1cc37820afd1e9bc">PeerVector</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#adbf35af62eaaade603f94900fda0b1a5">LDP</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#ab28df2db356d20638408f1021df8b410">~LDP</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#adc10a0f7fdde1daef9a2b236fdd5de00">locateNextHop</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> dest)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a057c06f71b085683639b467bd47b4abd">findPeerAddrFromInterface</a> (std::string interfaceName)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#ab124d80cf623c4a5d4551075612b1243">findInterfaceFromPeerAddr</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> peerIP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#aaf2b4ec7ae7b2006fccd8d208dfbb471">findPeer</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> peerAddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_t_c_p_socket.html">TCPSocket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a37df6239993d84988793c63eaf8f1940">getPeerSocket</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> peerAddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_t_c_p_socket.html">TCPSocket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a43170c3c37870c56f321b8a2e24ec420">findPeerSocket</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> peerAddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a05a988b6638a853db0ea2fe3cdef0f12">sendToPeer</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> dest, cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">FecVector::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a> (<a class="el" href="class_l_d_p.html#a8885142cabdbcdfb12cb843004e106b9">FecVector</a> &amp;fecs, <a class="el" href="class_i_p_address.html">IPAddress</a> addr, int length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">FecBindVector::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a3f922572f5c41fd96b2cbf7944526baa">findFecEntry</a> (<a class="el" href="class_l_d_p.html#ac4dfef44f74ce936740e748b38e3fbb9">FecBindVector</a> &amp;fecs, int fecid, <a class="el" href="class_i_p_address.html">IPAddress</a> peer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a27a71323af2adb9a34afc88393757312">sendMappingRequest</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> dest, <a class="el" href="class_i_p_address.html">IPAddress</a> addr, int length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a3aade2e69231697175fe874a2ef9d2b2">sendMapping</a> (int type, <a class="el" href="class_i_p_address.html">IPAddress</a> dest, int label, <a class="el" href="class_i_p_address.html">IPAddress</a> addr, int length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a266295145a120bfc4392554603e3a15a">sendNotify</a> (int status, <a class="el" href="class_i_p_address.html">IPAddress</a> dest, <a class="el" href="class_i_p_address.html">IPAddress</a> addr, int length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a4f61fee380b47683aef8f450b4704940">rebuildFecList</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a33bd46c81cf3f06f6f082c9d67ff58c5">updateFecList</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> nextHop)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a9ebd9c14dc3c8b3818252dad37dcc5a5">updateFecListEntry</a> (<a class="el" href="struct_l_d_p_1_1fec__t.html">fec_t</a> oldItem)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a62f103f31701a61dd42b6814770245fe">announceLinkChange</a> (int tedlinkindex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#ad7c6de4d194eef082693fe60ae841419">numInitStages</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a62dffe5f68da37887959520d2d9c8aa9">initialize</a> (int stage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a68767ac9540ebd2165892d2a2a7c7fbb">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#af8f8d5cf6344ca5fa0c0ee4656f60f89">sendHelloTo</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> dest)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a3a85856691c0af7af8d927f80a4e3eca">openTCPConnectionToPeer</a> (int peerIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a129493952b252d5c5d426c4056197a4f">processLDPHello</a> (<a class="el" href="class_l_d_p_hello.html">LDPHello</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#aa11dcfcdebea0304d26343746d28eb6c">processHelloTimeout</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#ae2a3dbb01c3f0c5b317271bb50abd98f">processMessageFromTCP</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#ac330a2d78f69dddd1eb1f9479cb16709">processLDPPacketFromTCP</a> (<a class="el" href="class_l_d_p_packet.html">LDPPacket</a> *ldpPacket)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#ad4960396a93e0b4b3b71f9cd16c2a9b7">processLABEL_MAPPING</a> (<a class="el" href="class_l_d_p_label_mapping.html">LDPLabelMapping</a> *packet)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a8bbf321fe7b9eb4c2ebbc06a2a12c8d4">processLABEL_REQUEST</a> (<a class="el" href="class_l_d_p_label_request.html">LDPLabelRequest</a> *packet)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a266cf0a6e2fe508f383e88a640697afd">processLABEL_RELEASE</a> (<a class="el" href="class_l_d_p_label_mapping.html">LDPLabelMapping</a> *packet)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a615dc36ac669f35619acc9d4a7f35d2b">processLABEL_WITHDRAW</a> (<a class="el" href="class_l_d_p_label_mapping.html">LDPLabelMapping</a> *packet)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#aba440f5b0dc9e2ee2a8360388a8503bc">processNOTIFICATION</a> (<a class="el" href="class_l_d_p_notify.html">LDPNotify</a> *packet)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a32c1d82d8c9a523a4c1e09858f14d315">lookupLabel</a> (<a class="el" href="class_i_p_datagram.html">IPDatagram</a> *ipdatagram, <a class="el" href="_l_i_b_table_8h.html#a40d505abe4d03bca1c9776ebb1a874e5">LabelOpVector</a> &amp;outLabel, std::string &amp;outInterface, int &amp;color)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a075009e8998b02f670d1439c33863e90">receiveChangeNotification</a> (int category, const cPolymorphic *details)</td></tr>
<tr><td colspan="2"><div class="groupHeader">TCPSocket::CallbackInterface callback methods</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a014504d9ed3ccbb4a0366e95870eea56">socketEstablished</a> (int connId, void *yourPtr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a7a960a6e6fdddbf58e4978ed432e63de">socketDataArrived</a> (int connId, void *yourPtr, cPacket *msg, bool urgent)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a8b0190937343b4847d6cbc830f15b2ca">socketPeerClosed</a> (int connId, void *yourPtr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a11b3f4de91cc4a962ec28a94c4c7c6cb">socketClosed</a> (int connId, void *yourPtr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a9e552b940ba57ad9e27d5cbeb31befa2">socketFailure</a> (int connId, void *yourPtr, int code)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#af37813ef12cecdb4c52ead27c251c23f">socketStatusArrived</a> (int connId, void *yourPtr, <a class="el" href="class_t_c_p_status_info.html">TCPStatusInfo</a> *status)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#adc72dc310e10bc94348b8ba0441730bd">holdTime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a64dabef28e6cf564b2cdfa47f11e31d5">helloInterval</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_l_d_p.html#a8885142cabdbcdfb12cb843004e106b9">FecVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_l_d_p.html#ac4dfef44f74ce936740e748b38e3fbb9">FecBindVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_l_d_p.html#ac4dfef44f74ce936740e748b38e3fbb9">FecBindVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_l_d_p.html#a6760a0b95012016f5c82715e458bdc86">PendingVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a057aa332bfc1ddcbc2d66e73de161af9">pending</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_l_d_p.html#aac430f243de69caa1cc37820afd1e9bc">PeerVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_interface_table.html">IInterfaceTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#ae0de7c03b5ac9168386ed3cd6f920c3e">ift</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_routing_table.html">IRoutingTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_l_i_b_table.html">LIBTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#ad01cfb57e93718e4bcb371baa1b40b2c">lt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_e_d.html">TED</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a0acc2a4c56957b0b30f0e8a6b2c2075f">tedmod</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_notification_board.html">NotificationBoard</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a6cd3cdeb303dcbcd51acecae0615ffbd">nb</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_u_d_p_socket.html">UDPSocket</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a70faa45ced5c6b6f18c5015bae134956">udpSocket</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_c_p_socket.html">TCPSocket</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#ae42af8d69e1e21c9dc7ac7f6fe7a35bc">serverSocket</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_c_p_socket_map.html">TCPSocketMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a168d3444b4455a308d211a24b089b5a4">socketMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#a326553c22a6176ba6ee7afcb4647815e">sendHelloMsg</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_l_d_p.html#aa95d15f32ce708d1cc9817586ad05857">maxFecid</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_l_d_p.html">LDP</a> (rfc 3036) protocol implementation. </p>

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00048">48</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>
</div><hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="ac4dfef44f74ce936740e748b38e3fbb9"></a><!-- doxytag: member="LDP::FecBindVector" ref="ac4dfef44f74ce936740e748b38e3fbb9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="struct_l_d_p_1_1fec__bind__t.html">fec_bind_t</a>&gt; <a class="el" href="class_l_d_p.html#ac4dfef44f74ce936740e748b38e3fbb9">LDP::FecBindVector</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00076">76</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8885142cabdbcdfb12cb843004e106b9"></a><!-- doxytag: member="LDP::FecVector" ref="a8885142cabdbcdfb12cb843004e106b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="struct_l_d_p_1_1fec__t.html">fec_t</a>&gt; <a class="el" href="class_l_d_p.html#a8885142cabdbcdfb12cb843004e106b9">LDP::FecVector</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00066">66</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

</div>
</div>
<a class="anchor" id="aac430f243de69caa1cc37820afd1e9bc"></a><!-- doxytag: member="LDP::PeerVector" ref="aac430f243de69caa1cc37820afd1e9bc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="struct_l_d_p_1_1peer__info.html">peer_info</a>&gt; <a class="el" href="class_l_d_p.html#aac430f243de69caa1cc37820afd1e9bc">LDP::PeerVector</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00094">94</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6760a0b95012016f5c82715e458bdc86"></a><!-- doxytag: member="LDP::PendingVector" ref="a6760a0b95012016f5c82715e458bdc86" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="struct_l_d_p_1_1pending__req__t.html">pending_req_t</a>&gt; <a class="el" href="class_l_d_p.html#a6760a0b95012016f5c82715e458bdc86">LDP::PendingVector</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00084">84</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="adbf35af62eaaade603f94900fda0b1a5"></a><!-- doxytag: member="LDP::LDP" ref="adbf35af62eaaade603f94900fda0b1a5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_l_d_p.html#adbf35af62eaaade603f94900fda0b1a5">LDP::LDP</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00084">84</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_l_d_p.html#a326553c22a6176ba6ee7afcb4647815e">sendHelloMsg</a> = NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab28df2db356d20638408f1021df8b410"></a><!-- doxytag: member="LDP::~LDP" ref="ab28df2db356d20638408f1021df8b410" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_l_d_p.html#ab28df2db356d20638408f1021df8b410">LDP::~LDP</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00089">89</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>=0; <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>&lt;<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>.size(); <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>++)
        cancelAndDelete(<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[<a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>].<a class="code" href="_r_i_p_timer__m_8h.html#a8c453bfd16599e8a0b20f94bdc7c7506a51a69776ef0949e2b87cdae793625906">timeout</a>);

    cancelAndDelete(<a class="code" href="class_l_d_p.html#a326553c22a6176ba6ee7afcb4647815e">sendHelloMsg</a>);
    <span class="comment">//this causes segfault at the end of simulation       -- Vojta</span>
    <span class="comment">//socketMap.deleteSockets();</span>
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a62f103f31701a61dd42b6814770245fe"></a><!-- doxytag: member="LDP::announceLinkChange" ref="a62f103f31701a61dd42b6814770245fe" args="(int tedlinkindex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a62f103f31701a61dd42b6814770245fe">LDP::announceLinkChange</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tedlinkindex</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l01247">1247</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00411">processHelloTimeout()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00484">processLDPHello()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_t_e_d_change_info.html">TEDChangeInfo</a> d;
    d.<a class="code" href="class_t_e_d_change_info.html#a9b38462cb6f5358730bfc8c84ce2edf8">setTedLinkIndicesArraySize</a>(1);
    d.<a class="code" href="class_t_e_d_change_info.html#a69a82956ff27d4163012400c0d11628f">setTedLinkIndices</a>(0, tedlinkindex);
    <a class="code" href="class_l_d_p.html#a6cd3cdeb303dcbcd51acecae0615ffbd">nb</a>-&gt;<a class="code" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba8434e8b760269c6f9680f8fdb45b8a2c">NF_TED_CHANGED</a>, &amp;d);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab4e2317f84829818f0e37149da27853c"></a><!-- doxytag: member="LDP::findFecEntry" ref="ab4e2317f84829818f0e37149da27853c" args="(FecVector &amp;fecs, IPAddress addr, int length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LDP::FecVector::iterator <a class="el" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">LDP::findFecEntry</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_l_d_p.html#a8885142cabdbcdfb12cb843004e106b9">FecVector</a> &amp;&#160;</td>
          <td class="paramname"><em>fecs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00806">806</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l01186">lookupLabel()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01101">processLABEL_MAPPING()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01017">processLABEL_RELEASE()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00921">processLABEL_REQUEST()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01057">processLABEL_WITHDRAW()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00860">processNOTIFICATION()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00262">rebuildFecList()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00201">updateFecListEntry()</a>.</p>
<div class="fragment"><pre class="fragment">{
    FecVector::iterator it;
    <span class="keywordflow">for</span> (it = fecs.begin(); it != fecs.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;length != length)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (it-&gt;addr != addr) <span class="comment">// XXX compare only relevant part (?)</span>
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">break</span>;
    }
    <span class="keywordflow">return</span> it;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3f922572f5c41fd96b2cbf7944526baa"></a><!-- doxytag: member="LDP::findFecEntry" ref="a3f922572f5c41fd96b2cbf7944526baa" args="(FecBindVector &amp;fecs, int fecid, IPAddress peer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LDP::FecBindVector::iterator <a class="el" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">LDP::findFecEntry</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_l_d_p.html#ac4dfef44f74ce936740e748b38e3fbb9">FecBindVector</a> &amp;&#160;</td>
          <td class="paramname"><em>fecs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fecid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00790">790</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    FecBindVector::iterator it;
    <span class="keywordflow">for</span> (it = fecs.begin(); it != fecs.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;fecid != fecid)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (it-&gt;peer != peer)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">break</span>;
    }
    <span class="keywordflow">return</span> it;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab124d80cf623c4a5d4551075612b1243"></a><!-- doxytag: member="LDP::findInterfaceFromPeerAddr" ref="ab124d80cf623c4a5d4551075612b1243" args="(IPAddress peerIP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_l_d_p.html#ab124d80cf623c4a5d4551075612b1243">LDP::findInterfaceFromPeerAddr</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>peerIP</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00762">762</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l01186">lookupLabel()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01101">processLABEL_MAPPING()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00921">processLABEL_REQUEST()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00201">updateFecListEntry()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">/*</span>
<span class="comment">    int i;</span>
<span class="comment">    for (unsigned int i=0;i&lt;myPeers.size();i++)</span>
<span class="comment">    {</span>
<span class="comment">        if (myPeers[i].peerIP == peerIP)</span>
<span class="comment">            return string(myPeers[i].linkInterface);</span>
<span class="comment">    }</span>
<span class="comment">    return string(&quot;X&quot;);</span>
<span class="comment">*/</span>
<span class="comment">//    Rely on port index to find the interface name</span>

    <span class="comment">// this function is a misnomer, we must recognize our own address too</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a3dad8d703bfa05731c44b3b2f0bb4ae5">isLocalAddress</a>(peerIP))
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;lo0&quot;</span>;

    <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a0dda4a87779a949284ccead75001fa30">getInterfaceForDestAddr</a>(peerIP);
    <span class="keywordflow">if</span> (!ie)
        error(<span class="stringliteral">&quot;findInterfaceFromPeerAddr(): %s is not routable&quot;</span>, peerIP.<a class="code" href="class_i_p_address.html#a50f58febbf2ded78b9f6e32e579f5d2b">str</a>().c_str());
    <span class="keywordflow">return</span> ie-&gt;getName();
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaf2b4ec7ae7b2006fccd8d208dfbb471"></a><!-- doxytag: member="LDP::findPeer" ref="aaf2b4ec7ae7b2006fccd8d208dfbb471" args="(IPAddress peerAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_l_d_p.html#aaf2b4ec7ae7b2006fccd8d208dfbb471">LDP::findPeer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>peerAddr</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: return peer's index in myPeers table, or -1 if not found </p>

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l01160">1160</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l01168">findPeerSocket()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00484">processLDPHello()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00556">processMessageFromTCP()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (PeerVector::iterator <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>=<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>.begin(); <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>!=<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>.end(); ++<a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>)
        <span class="keywordflow">if</span> (<a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>-&gt;peerIP==peerAddr)
            <span class="keywordflow">return</span> <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>-<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>.begin();
    <span class="keywordflow">return</span> -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a057c06f71b085683639b467bd47b4abd"></a><!-- doxytag: member="LDP::findPeerAddrFromInterface" ref="a057c06f71b085683639b467bd47b4abd" args="(std::string interfaceName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_p_address.html">IPAddress</a> <a class="el" href="class_l_d_p.html#a057c06f71b085683639b467bd47b4abd">LDP::findPeerAddrFromInterface</a> </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>interfaceName</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This method maps the peerIP with the interface name in routing table. It is expected that for <a class="el" href="class_m_p_l_s.html">MPLS</a> host, entries linked to <a class="el" href="class_m_p_l_s.html">MPLS</a> peers are available. In case no corresponding peerIP found, a peerIP (not deterministic) will be returned. </p>

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00723">723</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00689">locateNextHop()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a> = 0;
    <span class="keywordtype">int</span> k = 0;
    <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_l_d_p.html#ae0de7c03b5ac9168386ed3cd6f920c3e">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a8ad86ee823d6200b4f558383b39af658">getInterfaceByName</a>(interfaceName.c_str());

    <span class="keyword">const</span> <a class="code" href="class_i_p_route.html">IPRoute</a> *anEntry;

    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#ada2fac98d1d1c80c291be239b075c63b">getNumRoutes</a>(); i++)
    {
        <span class="keywordflow">for</span> (k = 0; k &lt; (int)<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>.size(); k++)
        {
            anEntry = <a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a89f3eb433e309043cde517238eef5214">getRoute</a>(i);
            <span class="keywordflow">if</span> (anEntry-&gt;<a class="code" href="class_i_p_route.html#a07adcdcc04cb4d50f12f060c7206b73e">getHost</a>()==<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[k].peerIP &amp;&amp; anEntry-&gt;<a class="code" href="class_i_p_route.html#a1b01dfecb70fc9384695ce312dcab0a4">getInterface</a>()==ie)
            {
                <span class="keywordflow">return</span> <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[k].peerIP;
            }
            <span class="comment">// addresses-&gt;push_back(peerIP[k]);</span>
        }
    }

    <span class="comment">// Return any IP which has default route - not in routing table entries</span>
    <span class="keywordflow">for</span> (i = 0; i &lt; (int)<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>.size(); i++)
    {
        <span class="keywordflow">for</span> (k = 0; k &lt; <a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#ada2fac98d1d1c80c291be239b075c63b">getNumRoutes</a>(); k++)
        {
            anEntry = <a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a89f3eb433e309043cde517238eef5214">getRoute</a>(i);
            <span class="keywordflow">if</span> (anEntry-&gt;<a class="code" href="class_i_p_route.html#a07adcdcc04cb4d50f12f060c7206b73e">getHost</a>() == <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[<a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>].peerIP)
                <span class="keywordflow">break</span>;
        }
        <span class="keywordflow">if</span> (k == <a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#ada2fac98d1d1c80c291be239b075c63b">getNumRoutes</a>())
            <span class="keywordflow">break</span>;
    }

    <span class="comment">// return the peer&#39;s address if found, unspecified address otherwise</span>
    <span class="keywordflow">return</span> i==(int)<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>.size() ? <a class="code" href="class_i_p_address.html">IPAddress</a>() : <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[i].peerIP;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a43170c3c37870c56f321b8a2e24ec420"></a><!-- doxytag: member="LDP::findPeerSocket" ref="a43170c3c37870c56f321b8a2e24ec420" args="(IPAddress peerAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p_socket.html">TCPSocket</a> * <a class="el" href="class_l_d_p.html#a43170c3c37870c56f321b8a2e24ec420">LDP::findPeerSocket</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>peerAddr</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: return socket for given peer, and NULL if session doesn't exist </p>

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l01168">1168</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l01177">getPeerSocket()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00921">processLABEL_REQUEST()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00201">updateFecListEntry()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// find peer in table and return its socket</span>
    <span class="keywordtype">int</span> <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a> = <a class="code" href="class_l_d_p.html#aaf2b4ec7ae7b2006fccd8d208dfbb471">findPeer</a>(peerAddr);
    <span class="keywordflow">if</span> (i==-1 || !(<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[i].socket) || <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[i].socket-&gt;getState()!=<a class="code" href="class_t_c_p_socket.html#a67a345df44f8b47c59c59cca81c9f7f9a45c2bba31a1f55997af51b27d0df4d72">TCPSocket::CONNECTED</a>)
        <span class="keywordflow">return</span> NULL; <span class="comment">// we don&#39;t have an LDP session to this peer</span>
    <span class="keywordflow">return</span> <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[<a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>].socket;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a37df6239993d84988793c63eaf8f1940"></a><!-- doxytag: member="LDP::getPeerSocket" ref="a37df6239993d84988793c63eaf8f1940" args="(IPAddress peerAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p_socket.html">TCPSocket</a> * <a class="el" href="class_l_d_p.html#a37df6239993d84988793c63eaf8f1940">LDP::getPeerSocket</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>peerAddr</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Utility: return socket for given peer. Throws error if there's no <a class="el" href="class_t_c_p.html">TCP</a> connection </p>

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l01177">1177</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00179">sendToPeer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_t_c_p_socket.html">TCPSocket</a> *sock = <a class="code" href="class_l_d_p.html#a43170c3c37870c56f321b8a2e24ec420">findPeerSocket</a>(peerAddr);
    ASSERT(sock);
    <span class="keywordflow">if</span> (!sock)
        error(<span class="stringliteral">&quot;No LDP session to peer %s yet&quot;</span>, peerAddr.<a class="code" href="class_i_p_address.html#a50f58febbf2ded78b9f6e32e579f5d2b">str</a>().c_str());
    <span class="keywordflow">return</span> sock;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a68767ac9540ebd2165892d2a2a7c7fbb"></a><!-- doxytag: member="LDP::handleMessage" ref="a68767ac9540ebd2165892d2a2a7c7fbb" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a68767ac9540ebd2165892d2a2a7c7fbb">LDP::handleMessage</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00143">143</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Received: (&quot;</span> &lt;&lt; msg-&gt;getClassName() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; msg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
    <span class="keywordflow">if</span> (msg==<a class="code" href="class_l_d_p.html#a326553c22a6176ba6ee7afcb4647815e">sendHelloMsg</a>)
    {
        <span class="comment">// every LDP capable router periodically sends HELLO messages to the</span>
        <span class="comment">// &quot;all routers in the sub-network&quot; multicast address</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Multicasting LDP Hello to neighboring routers\n&quot;</span>;
        <a class="code" href="class_l_d_p.html#af8f8d5cf6344ca5fa0c0ee4656f60f89">sendHelloTo</a>(<a class="code" href="class_i_p_address.html#a06a37c2c04f547c86017875d353ea3eb" title="224.0.0.2 All routers on a subnet">IPAddress::ALL_ROUTERS_MCAST</a>);

        <span class="comment">// schedule next hello</span>
        scheduleAt(simTime() + <a class="code" href="class_l_d_p.html#a64dabef28e6cf564b2cdfa47f11e31d5">helloInterval</a>, <a class="code" href="class_l_d_p.html#a326553c22a6176ba6ee7afcb4647815e">sendHelloMsg</a>);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;isSelfMessage())
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Timer &quot;</span> &lt;&lt; msg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; expired\n&quot;</span>;
        <span class="keywordflow">if</span> (!strcmp(msg-&gt;getName(), <span class="stringliteral">&quot;HelloTimeout&quot;</span>))
        {
            <a class="code" href="class_l_d_p.html#aa11dcfcdebea0304d26343746d28eb6c">processHelloTimeout</a>(msg);
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_l_d_p.html#aba440f5b0dc9e2ee2a8360388a8503bc">processNOTIFICATION</a>(check_and_cast&lt;LDPNotify*&gt;(msg));
        }
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(msg-&gt;getArrivalGate()-&gt;getName(), <span class="stringliteral">&quot;udpIn&quot;</span>))
    {
        <span class="comment">// we can only receive LDP Hello from UDP (everything else goes over TCP)</span>
        <a class="code" href="class_l_d_p.html#a129493952b252d5c5d426c4056197a4f">processLDPHello</a>(check_and_cast&lt;LDPHello *&gt;(msg));
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(msg-&gt;getArrivalGate()-&gt;getName(), <span class="stringliteral">&quot;tcpIn&quot;</span>))
    {
        <a class="code" href="class_l_d_p.html#ae2a3dbb01c3f0c5b317271bb50abd98f">processMessageFromTCP</a>(msg);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a62dffe5f68da37887959520d2d9c8aa9"></a><!-- doxytag: member="LDP::initialize" ref="a62dffe5f68da37887959520d2d9c8aa9" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a62dffe5f68da37887959520d2d9c8aa9">LDP::initialize</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00099">99</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (stage != 3)
        <span class="keywordflow">return</span>; <span class="comment">// wait for routing table to initialize first</span>

    <a class="code" href="class_l_d_p.html#adc72dc310e10bc94348b8ba0441730bd">holdTime</a> = par(<span class="stringliteral">&quot;holdTime&quot;</span>).doubleValue();
    <a class="code" href="class_l_d_p.html#a64dabef28e6cf564b2cdfa47f11e31d5">helloInterval</a> = par(<span class="stringliteral">&quot;helloInterval&quot;</span>).doubleValue();

    <a class="code" href="class_l_d_p.html#ae0de7c03b5ac9168386ed3cd6f920c3e">ift</a> = <a class="code" href="class_interface_table_access.html">InterfaceTableAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
    <a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a> = <a class="code" href="class_routing_table_access.html">RoutingTableAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
    <a class="code" href="class_l_d_p.html#ad01cfb57e93718e4bcb371baa1b40b2c">lt</a> = <a class="code" href="class_l_i_b_table_access.html">LIBTableAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
    <a class="code" href="class_l_d_p.html#a0acc2a4c56957b0b30f0e8a6b2c2075f">tedmod</a> = <a class="code" href="class_t_e_d_access.html">TEDAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
    <a class="code" href="class_l_d_p.html#a6cd3cdeb303dcbcd51acecae0615ffbd">nb</a> = <a class="code" href="class_notification_board_access.html">NotificationBoardAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();

    WATCH_VECTOR(<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>);
    WATCH_VECTOR(<a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>);
    WATCH_VECTOR(<a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>);
    WATCH_VECTOR(<a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>);
    WATCH_VECTOR(<a class="code" href="class_l_d_p.html#a057aa332bfc1ddcbc2d66e73de161af9">pending</a>);

    <a class="code" href="class_l_d_p.html#aa95d15f32ce708d1cc9817586ad05857">maxFecid</a> = 0;

    <span class="comment">// schedule first hello</span>
    <a class="code" href="class_l_d_p.html#a326553c22a6176ba6ee7afcb4647815e">sendHelloMsg</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;LDPSendHello&quot;</span>);
    scheduleAt(simTime() + exponential(0.1), <a class="code" href="class_l_d_p.html#a326553c22a6176ba6ee7afcb4647815e">sendHelloMsg</a>);

    <span class="comment">// bind UDP socket</span>
    <a class="code" href="class_l_d_p.html#a70faa45ced5c6b6f18c5015bae134956">udpSocket</a>.<a class="code" href="class_u_d_p_socket.html#a606e9a6e14bcd2e68bb2906b0dc5a6b7">setOutputGate</a>(gate(<span class="stringliteral">&quot;udpOut&quot;</span>));
    <a class="code" href="class_l_d_p.html#a70faa45ced5c6b6f18c5015bae134956">udpSocket</a>.<a class="code" href="class_u_d_p_socket.html#a4f85cea0efe5b7963fbc4103bad665c3">bind</a>(<a class="code" href="_l_d_p_8h.html#a10b9b0d50dcb805c5a1db8aa8c02ca3d">LDP_PORT</a>);

    <span class="comment">// start listening for incoming TCP conns</span>
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Starting to listen on port &quot;</span> &lt;&lt; <a class="code" href="_l_d_p_8h.html#a10b9b0d50dcb805c5a1db8aa8c02ca3d">LDP_PORT</a> &lt;&lt; <span class="stringliteral">&quot; for incoming LDP sessions\n&quot;</span>;
    <a class="code" href="class_l_d_p.html#ae42af8d69e1e21c9dc7ac7f6fe7a35bc">serverSocket</a>.<a class="code" href="class_t_c_p_socket.html#ab6563d5ef32687b2072e5c08317ba519">setOutputGate</a>(gate(<span class="stringliteral">&quot;tcpOut&quot;</span>));
    <a class="code" href="class_l_d_p.html#ae42af8d69e1e21c9dc7ac7f6fe7a35bc">serverSocket</a>.<a class="code" href="class_t_c_p_socket.html#a2c4f6131103b0c9773728d706140aa0d">bind</a>(LDP_PORT);
    <a class="code" href="class_l_d_p.html#ae42af8d69e1e21c9dc7ac7f6fe7a35bc">serverSocket</a>.<a class="code" href="class_t_c_p_socket.html#abfd870650b679461fa75fbe473c89d30">listen</a>();

    <span class="comment">// build list of recognized FECs</span>
    <a class="code" href="class_l_d_p.html#a4f61fee380b47683aef8f450b4704940">rebuildFecList</a>();

    <span class="comment">// listen for routing table modifications</span>
    <a class="code" href="class_l_d_p.html#a6cd3cdeb303dcbcd51acecae0615ffbd">nb</a>-&gt;<a class="code" href="class_notification_board.html#aeb02a282e6c807c1cb064a28e8409ff2">subscribe</a>(<span class="keyword">this</span>, <a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba38a4632902da5c126d1b1bc992799303">NF_IPv4_ROUTE_ADDED</a>);
    <a class="code" href="class_l_d_p.html#a6cd3cdeb303dcbcd51acecae0615ffbd">nb</a>-&gt;<a class="code" href="class_notification_board.html#aeb02a282e6c807c1cb064a28e8409ff2">subscribe</a>(<span class="keyword">this</span>, <a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba250243f132a5001e082e2c58b25eb0f1">NF_IPv4_ROUTE_DELETED</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="adc10a0f7fdde1daef9a2b236fdd5de00"></a><!-- doxytag: member="LDP::locateNextHop" ref="adc10a0f7fdde1daef9a2b236fdd5de00" args="(IPAddress dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_p_address.html">IPAddress</a> <a class="el" href="class_l_d_p.html#adc10a0f7fdde1daef9a2b236fdd5de00">LDP::locateNextHop</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>dest</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This method finds next peer in upstream direction </p>

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00689">689</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Mapping L3 IP-host of next hop to L2 peer address.</span>

    <span class="comment">// Lookup the routing table, rfc3036</span>
    <span class="comment">// &quot;When the FEC for which a label is requested is a Prefix FEC Element or</span>
    <span class="comment">//  a Host Address FEC Element, the receiving LSR uses its routing table to determine</span>
    <span class="comment">//  its response. Unless its routing table includes an entry that exactly matches</span>
    <span class="comment">//  the requested Prefix or Host Address, the LSR must respond with a</span>
    <span class="comment">//  No Route Notification message.&quot;</span>
    <span class="comment">//</span>
    <span class="comment">// FIXME the code below (though seems like that&#39;s what the RFC refers to) doesn&#39;t work</span>
    <span class="comment">// -- we can&#39;t reasonably expect the destination host to be exaplicitly in an</span>
    <span class="comment">// LSR&#39;s routing table!!! Use simple IP routing instead. --Andras</span>
    <span class="comment">//</span>
    <span class="comment">// Wrong code:</span>
    <span class="comment">//int i;</span>
    <span class="comment">//for (i=0; i &lt; rt-&gt;getNumRoutes(); i++)</span>
    <span class="comment">//    if (rt-&gt;getRoute(i)-&gt;host == dest)</span>
    <span class="comment">//        break;</span>
    <span class="comment">//</span>
    <span class="comment">//if (i == rt-&gt;getNumRoutes())</span>
    <span class="comment">//    return IPAddress();  // Signal an NOTIFICATION of NO ROUTE</span>
    <span class="comment">//</span>
    <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a0dda4a87779a949284ccead75001fa30">getInterfaceForDestAddr</a>(dest);
    <span class="keywordflow">if</span> (!ie)
        <span class="keywordflow">return</span> <a class="code" href="class_i_p_address.html">IPAddress</a>();  <span class="comment">// no route</span>

    std::string iName = ie-&gt;getName(); <span class="comment">// FIXME why use name for lookup?</span>
    <span class="keywordflow">return</span> <a class="code" href="class_l_d_p.html#a057c06f71b085683639b467bd47b4abd">findPeerAddrFromInterface</a>(iName);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a32c1d82d8c9a523a4c1e09858f14d315"></a><!-- doxytag: member="LDP::lookupLabel" ref="a32c1d82d8c9a523a4c1e09858f14d315" args="(IPDatagram *ipdatagram, LabelOpVector &amp;outLabel, std::string &amp;outInterface, int &amp;color)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_l_d_p.html#a32c1d82d8c9a523a4c1e09858f14d315">LDP::lookupLabel</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_datagram.html">IPDatagram</a> *&#160;</td>
          <td class="paramname"><em>ipdatagram</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_l_i_b_table_8h.html#a40d505abe4d03bca1c9776ebb1a874e5">LabelOpVector</a> &amp;&#160;</td>
          <td class="paramname"><em>outLabel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>outInterface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The ipdatagram argument is an input parameter, the rest (outLabel, outInterface, color) are output parameters only.</p>
<p>In subclasses, this function should be implemented to determine the forwarding equivalence class for the <a class="el" href="class_i_p.html">IP</a> datagram passed, and map it to an outLabel and outInterface.</p>
<p>The color parameter (which can be set to an arbitrary value) will only be used for the NAM trace if one will be recorded. </p>

<p>Implements <a class="el" href="class_i_classifier.html#aba6e1b589f1c6a6416a6118001b33e31">IClassifier</a>.</p>

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l01186">1186</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_i_p_address.html">IPAddress</a> destAddr = ipdatagram-&gt;<a class="code" href="class_i_p_datagram.html#afe5a14d5aefc5cc9e0ffeedb31a62d1c">getDestAddress</a>();
    <span class="keywordtype">int</span> protocol = ipdatagram-&gt;<a class="code" href="class_i_p_datagram.html#acbe285538d27d18ab788c63399e81947">getTransportProtocol</a>();

    <span class="comment">// never match and always route via L3 if:</span>

    <span class="comment">// OSPF traffic (TED)</span>
    <span class="keywordflow">if</span> (protocol == <a class="code" href="_i_p_protocol_id__m_8h.html#a4297c2f400ba53cf6866e6d45bc81b70a286260df5de676497bee26c4c6ea7f1e">IP_PROT_OSPF</a>)
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="comment">// LDP traffic (both discovery...</span>
    <span class="keywordflow">if</span> (protocol == <a class="code" href="_i_p_protocol_id__m_8h.html#a4297c2f400ba53cf6866e6d45bc81b70ab9e6b0f8ec9223d758f4825004489bd2">IP_PROT_UDP</a> &amp;&amp; check_and_cast&lt;UDPPacket*&gt;(ipdatagram-&gt;getEncapsulatedPacket())-&gt;getDestinationPort() == <a class="code" href="_l_d_p_8h.html#a10b9b0d50dcb805c5a1db8aa8c02ca3d">LDP_PORT</a>)
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="comment">// ...and session)</span>
    <span class="keywordflow">if</span> (protocol == <a class="code" href="_i_p_protocol_id__m_8h.html#a4297c2f400ba53cf6866e6d45bc81b70a69fd8777dfd279b247a88b6eec793bd7">IP_PROT_TCP</a> &amp;&amp; check_and_cast&lt;TCPSegment*&gt;(ipdatagram-&gt;getEncapsulatedPacket())-&gt;getDestPort() == <a class="code" href="_l_d_p_8h.html#a10b9b0d50dcb805c5a1db8aa8c02ca3d">LDP_PORT</a>)
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="keywordflow">if</span> (protocol == <a class="code" href="_i_p_protocol_id__m_8h.html#a4297c2f400ba53cf6866e6d45bc81b70a69fd8777dfd279b247a88b6eec793bd7">IP_PROT_TCP</a> &amp;&amp; check_and_cast&lt;TCPSegment*&gt;(ipdatagram-&gt;getEncapsulatedPacket())-&gt;getSrcPort() == <a class="code" href="_l_d_p_8h.html#a10b9b0d50dcb805c5a1db8aa8c02ca3d">LDP_PORT</a>)
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="comment">// regular traffic, classify, label etc.</span>

    FecVector::iterator it;
    <span class="keywordflow">for</span> (it = <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.begin(); it != <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (!destAddr.<a class="code" href="class_i_p_address.html#aedd7377a261c477938810b12ad214bbe">prefixMatches</a>(it-&gt;addr, it-&gt;length))
            <span class="keywordflow">continue</span>;

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;FEC matched: &quot;</span> &lt;&lt; *it &lt;&lt; endl;

        FecBindVector::iterator dit = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(<a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>, it-&gt;fecid, it-&gt;nextHop);
        <span class="keywordflow">if</span> (dit != <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.end())
        {
            outLabel = <a class="code" href="class_l_i_b_table.html#ac2df27758d1ee76e52d22d3ced09bbbd">LIBTable::pushLabel</a>(dit-&gt;label);
            outInterface = <a class="code" href="class_l_d_p.html#ab124d80cf623c4a5d4551075612b1243">findInterfaceFromPeerAddr</a>(it-&gt;nextHop);
            color = <a class="code" href="_l_d_p_8h.html#a819e3794dd985814c77459acdb71042f">LDP_USER_TRAFFIC</a>;
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;mapping found, outLabel=&quot;</span> &lt;&lt; outLabel &lt;&lt; <span class="stringliteral">&quot;, outInterface=&quot;</span> &lt;&lt; outInterface &lt;&lt; endl;
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;no mapping for this FEC exists&quot;</span> &lt;&lt; endl;
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad7c6de4d194eef082693fe60ae841419"></a><!-- doxytag: member="LDP::numInitStages" ref="ad7c6de4d194eef082693fe60ae841419" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int <a class="el" href="class_l_d_p.html#ad7c6de4d194eef082693fe60ae841419">LDP::numInitStages</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00180">180</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> 4;}
</pre></div>
</div>
</div>
<a class="anchor" id="a3a85856691c0af7af8d927f80a4e3eca"></a><!-- doxytag: member="LDP::openTCPConnectionToPeer" ref="a3a85856691c0af7af8d927f80a4e3eca" args="(int peerIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a3a85856691c0af7af8d927f80a4e3eca">LDP::openTCPConnectionToPeer</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>peerIndex</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00544">544</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00484">processLDPHello()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_t_c_p_socket.html">TCPSocket</a> *socket = <span class="keyword">new</span> <a class="code" href="class_t_c_p_socket.html">TCPSocket</a>();
    socket-&gt;<a class="code" href="class_t_c_p_socket.html#ab6563d5ef32687b2072e5c08317ba519">setOutputGate</a>(gate(<span class="stringliteral">&quot;tcpOut&quot;</span>));
    socket-&gt;<a class="code" href="class_t_c_p_socket.html#a5aa6b7b21ebe1f98801eade44e0de8eb">setCallbackObject</a>(<span class="keyword">this</span>, (<span class="keywordtype">void</span>*)peerIndex);
    socket-&gt;<a class="code" href="class_t_c_p_socket.html#a2c4f6131103b0c9773728d706140aa0d">bind</a>(<a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a64a9a5b1414f4da0b7b0a3e079091f62">getRouterId</a>(), 0);
    <a class="code" href="class_l_d_p.html#a168d3444b4455a308d211a24b089b5a4">socketMap</a>.<a class="code" href="class_t_c_p_socket_map.html#ac19937a0e8bd2dfcda6e7f831b835fd8">addSocket</a>(socket);
    <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[peerIndex].socket = socket;

    socket-&gt;<a class="code" href="class_t_c_p_socket.html#a7223e3a9189b0b156516d84c188cea6d">connect</a>(<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[peerIndex].peerIP, <a class="code" href="_l_d_p_8h.html#a10b9b0d50dcb805c5a1db8aa8c02ca3d">LDP_PORT</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa11dcfcdebea0304d26343746d28eb6c"></a><!-- doxytag: member="LDP::processHelloTimeout" ref="aa11dcfcdebea0304d26343746d28eb6c" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#aa11dcfcdebea0304d26343746d28eb6c">LDP::processHelloTimeout</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00411">411</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00143">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// peer is gone</span>

    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>;
    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>.size(); i++)
        <span class="keywordflow">if</span> (<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[i].<a class="code" href="_r_i_p_timer__m_8h.html#a8c453bfd16599e8a0b20f94bdc7c7506a51a69776ef0949e2b87cdae793625906">timeout</a> == msg)
            <span class="keywordflow">break</span>;
    ASSERT(i &lt; <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>.size());

    <a class="code" href="class_i_p_address.html">IPAddress</a> peerIP = <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[<a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>].peerIP;

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;peer=&quot;</span> &lt;&lt; peerIP &lt;&lt; <span class="stringliteral">&quot; is gone, removing adjacency&quot;</span> &lt;&lt; endl;

    ASSERT(!<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[i].<a class="code" href="_r_i_p_timer__m_8h.html#a8c453bfd16599e8a0b20f94bdc7c7506a51a69776ef0949e2b87cdae793625906">timeout</a>-&gt;isScheduled());
    <span class="keyword">delete</span> <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[<a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>].timeout;
    ASSERT(<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[i].socket);
    <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[<a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>].socket-&gt;abort(); <span class="comment">// should we only close?</span>
    <span class="keyword">delete</span> <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[<a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>].socket;
    <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>.erase(<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>.begin() + <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>);

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing (stale) bindings from fecDown for peer=&quot;</span> &lt;&lt; peerIP &lt;&lt; endl;

    FecBindVector::iterator dit;
    <span class="keywordflow">for</span> (dit = <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.begin(); dit != <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.end();)
    {
        <span class="keywordflow">if</span> (dit-&gt;peer != peerIP)
        {
            dit++;
            <span class="keywordflow">continue</span>;
        }

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;label=&quot;</span> &lt;&lt; dit-&gt;label &lt;&lt; endl;

        <span class="comment">// send release message just in case (?)</span>
        <span class="comment">// what happens if peer is not really down and</span>
        <span class="comment">// hello messages just disappeared?</span>
        <span class="comment">// does the protocol recover on its own (XXX check this)</span>

        dit = <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.erase(dit);
    }

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing bindings from sent to peer=&quot;</span> &lt;&lt; peerIP &lt;&lt; <span class="stringliteral">&quot; from fecUp&quot;</span> &lt;&lt; endl;

    FecBindVector::iterator uit;
    <span class="keywordflow">for</span> (uit = <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.begin(); uit != <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.end();)
    {
        <span class="keywordflow">if</span> (uit-&gt;peer != peerIP)
        {
            uit++;
            <span class="keywordflow">continue</span>;
        }

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;label=&quot;</span> &lt;&lt; uit-&gt;label &lt;&lt; endl;

        <span class="comment">// send withdraw message just in case (?)</span>
        <span class="comment">// see comment above...</span>

        uit = <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.erase(uit);
    }

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;updating fecList&quot;</span> &lt;&lt; endl;

    <a class="code" href="class_l_d_p.html#a33bd46c81cf3f06f6f082c9d67ff58c5">updateFecList</a>(peerIP);

    <span class="comment">// update TED and routing table</span>

    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespacecesnet.html#a7af5ca969f2a4fc726050202336e75e5">index</a> = <a class="code" href="class_l_d_p.html#a0acc2a4c56957b0b30f0e8a6b2c2075f">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aff4add6e86b7bc9ea84079aae0bb3e51">linkIndex</a>(<a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a64a9a5b1414f4da0b7b0a3e079091f62">getRouterId</a>(), peerIP);
    <a class="code" href="class_l_d_p.html#a0acc2a4c56957b0b30f0e8a6b2c2075f">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[<a class="code" href="namespacecesnet.html#a7af5ca969f2a4fc726050202336e75e5">index</a>].state = <span class="keyword">false</span>;
    <a class="code" href="class_l_d_p.html#a62f103f31701a61dd42b6814770245fe">announceLinkChange</a>(index);
    <a class="code" href="class_l_d_p.html#a0acc2a4c56957b0b30f0e8a6b2c2075f">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad4960396a93e0b4b3b71f9cd16c2a9b7"></a><!-- doxytag: member="LDP::processLABEL_MAPPING" ref="ad4960396a93e0b4b3b71f9cd16c2a9b7" args="(LDPLabelMapping *packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#ad4960396a93e0b4b3b71f9cd16c2a9b7">LDP::processLABEL_MAPPING</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_l_d_p_label_mapping.html">LDPLabelMapping</a> *&#160;</td>
          <td class="paramname"><em>packet</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l01101">1101</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00647">processLDPPacketFromTCP()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct_f_e_c___t_l_v.html">FEC_TLV</a> fec = packet-&gt;<a class="code" href="class_l_d_p_label_mapping.html#ab4363c064c8a65a3a5eec995462bff66">getFec</a>();
    <span class="keywordtype">int</span> label = packet-&gt;<a class="code" href="class_l_d_p_label_mapping.html#a948b6496f30a911cb48ae3dc744f676f">getLabel</a>();
    <a class="code" href="class_i_p_address.html">IPAddress</a> fromIP = packet-&gt;<a class="code" href="class_l_d_p_packet.html#a5969f516c19ff0d0c6b4ce6429e49f76">getSenderAddress</a>();

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Label mapping label=&quot;</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">&quot; received for fec=&quot;</span> &lt;&lt; fec &lt;&lt; <span class="stringliteral">&quot; from &quot;</span> &lt;&lt; fromIP &lt;&lt; endl;

    ASSERT(label &gt; 0);

    FecVector::iterator it = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(<a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#af9f89829e9c1029ee0a2718adeea93ab">addr</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#a2458693c3117cfa3fc4e43aa0c17f84e">length</a>);
    ASSERT(it != <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.end());

    FecBindVector::iterator dit = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(<a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>, it-&gt;fecid, fromIP);
    ASSERT(dit == <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.end());

    <span class="comment">// insert among received mappings</span>

    fec_bind_t newItem;
    newItem.fecid = it-&gt;fecid;
    newItem.peer = fromIP;
    newItem.label = label;
    <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.push_back(newItem);

    <span class="comment">// respond to pending requests</span>

    PendingVector::iterator pit;
    <span class="keywordflow">for</span> (pit = <a class="code" href="class_l_d_p.html#a057aa332bfc1ddcbc2d66e73de161af9">pending</a>.begin(); pit != <a class="code" href="class_l_d_p.html#a057aa332bfc1ddcbc2d66e73de161af9">pending</a>.end();)
    {
        <span class="keywordflow">if</span> (pit-&gt;fecid != it-&gt;fecid)
        {
            pit++;
            <span class="keywordflow">continue</span>;
        }

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;there&#39;s pending request for this FEC from &quot;</span> &lt;&lt; pit-&gt;peer &lt;&lt; <span class="stringliteral">&quot;, sending mapping&quot;</span> &lt;&lt; endl;

        std::string inInterface = <a class="code" href="class_l_d_p.html#ab124d80cf623c4a5d4551075612b1243">findInterfaceFromPeerAddr</a>(pit-&gt;peer);
        std::string outInterface = <a class="code" href="class_l_d_p.html#ab124d80cf623c4a5d4551075612b1243">findInterfaceFromPeerAddr</a>(fromIP);
        <a class="code" href="_l_i_b_table_8h.html#a40d505abe4d03bca1c9776ebb1a874e5">LabelOpVector</a> outLabel = <a class="code" href="class_l_i_b_table.html#adc5fdcd5d807e663b467ff91e719873f">LIBTable::swapLabel</a>(label);

        fec_bind_t newItem;
        newItem.fecid = it-&gt;fecid;
        newItem.peer = pit-&gt;peer;
        newItem.label = <a class="code" href="class_l_d_p.html#ad01cfb57e93718e4bcb371baa1b40b2c">lt</a>-&gt;<a class="code" href="class_l_i_b_table.html#a6599a694b9035a18dbc01bd0c52b54f7">installLibEntry</a>(-1, inInterface, outLabel, outInterface, <a class="code" href="_l_d_p_8h.html#a819e3794dd985814c77459acdb71042f">LDP_USER_TRAFFIC</a>);
        <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.push_back(newItem);

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;installed LIB entry inLabel=&quot;</span> &lt;&lt; newItem.label &lt;&lt; <span class="stringliteral">&quot; inInterface=&quot;</span> &lt;&lt; inInterface &lt;&lt;
                <span class="stringliteral">&quot; outLabel=&quot;</span> &lt;&lt; outLabel &lt;&lt; <span class="stringliteral">&quot; outInterface=&quot;</span> &lt;&lt; outInterface &lt;&lt; endl;

        <a class="code" href="class_l_d_p.html#a3aade2e69231697175fe874a2ef9d2b2">sendMapping</a>(<a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3a21684054f4791ac4ad3ecd4cffd4c8f4">LABEL_MAPPING</a>, pit-&gt;peer, newItem.label, it-&gt;addr, it-&gt;length);

        <span class="comment">// remove request from the list</span>
        pit = <a class="code" href="class_l_d_p.html#a057aa332bfc1ddcbc2d66e73de161af9">pending</a>.erase(pit);
    }

    <span class="keyword">delete</span> packet;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a266cf0a6e2fe508f383e88a640697afd"></a><!-- doxytag: member="LDP::processLABEL_RELEASE" ref="a266cf0a6e2fe508f383e88a640697afd" args="(LDPLabelMapping *packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a266cf0a6e2fe508f383e88a640697afd">LDP::processLABEL_RELEASE</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_l_d_p_label_mapping.html">LDPLabelMapping</a> *&#160;</td>
          <td class="paramname"><em>packet</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l01017">1017</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00647">processLDPPacketFromTCP()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct_f_e_c___t_l_v.html">FEC_TLV</a> fec = packet-&gt;<a class="code" href="class_l_d_p_label_mapping.html#ab4363c064c8a65a3a5eec995462bff66">getFec</a>();
    <span class="keywordtype">int</span> label = packet-&gt;<a class="code" href="class_l_d_p_label_mapping.html#a948b6496f30a911cb48ae3dc744f676f">getLabel</a>();
    <a class="code" href="class_i_p_address.html">IPAddress</a> fromIP = packet-&gt;<a class="code" href="class_l_d_p_packet.html#a5969f516c19ff0d0c6b4ce6429e49f76">getSenderAddress</a>();

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Mapping release received for label=&quot;</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">&quot; fec=&quot;</span> &lt;&lt; fec &lt;&lt; <span class="stringliteral">&quot; from &quot;</span> &lt;&lt; fromIP &lt;&lt; endl;

    ASSERT(label &gt; 0);

    <span class="comment">// remove label from fecUp</span>

    FecVector::iterator it = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(<a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#af9f89829e9c1029ee0a2718adeea93ab">addr</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#a2458693c3117cfa3fc4e43aa0c17f84e">length</a>);
    <span class="keywordflow">if</span> (it == <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.end())
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;FEC no longer recognized here, ignoring&quot;</span> &lt;&lt; endl;
        <span class="keyword">delete</span> packet;
        <span class="keywordflow">return</span>;
    }

    FecBindVector::iterator uit = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(<a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>, it-&gt;fecid, fromIP);
    <span class="keywordflow">if</span> (uit == <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.end() || label != uit-&gt;label)
    {
        <span class="comment">// this is ok and may happen; e.g. we removed the mapping because downstream</span>
        <span class="comment">// neighbour withdrew its mapping. we sent withdraw upstream as well and</span>
        <span class="comment">// this is upstream&#39;s response</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;mapping not found among sent mappings, ignoring&quot;</span> &lt;&lt; endl;
        <span class="keyword">delete</span> packet;
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing from LIB table label=&quot;</span> &lt;&lt; uit-&gt;label &lt;&lt; endl;
    <a class="code" href="class_l_d_p.html#ad01cfb57e93718e4bcb371baa1b40b2c">lt</a>-&gt;<a class="code" href="class_l_i_b_table.html#aeaf750f1e663ddd1a5a6e76406ad8a14">removeLibEntry</a>(uit-&gt;label);

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing label from list of sent mappings&quot;</span> &lt;&lt; endl;
    <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.erase(uit);

    <span class="keyword">delete</span> packet;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8bbf321fe7b9eb4c2ebbc06a2a12c8d4"></a><!-- doxytag: member="LDP::processLABEL_REQUEST" ref="a8bbf321fe7b9eb4c2ebbc06a2a12c8d4" args="(LDPLabelRequest *packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a8bbf321fe7b9eb4c2ebbc06a2a12c8d4">LDP::processLABEL_REQUEST</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_l_d_p_label_request.html">LDPLabelRequest</a> *&#160;</td>
          <td class="paramname"><em>packet</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00921">921</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00647">processLDPPacketFromTCP()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct_f_e_c___t_l_v.html">FEC_TLV</a> fec = packet-&gt;<a class="code" href="class_l_d_p_label_request.html#aa7f29cdcd7e83e8c5e684495a9fcf4c3">getFec</a>();
    <a class="code" href="class_i_p_address.html">IPAddress</a> srcAddr = packet-&gt;<a class="code" href="class_l_d_p_packet.html#a5969f516c19ff0d0c6b4ce6429e49f76">getSenderAddress</a>();

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Label Request from LSR &quot;</span> &lt;&lt; srcAddr &lt;&lt; <span class="stringliteral">&quot; for FEC &quot;</span> &lt;&lt; fec &lt;&lt; endl;

    FecVector::iterator it = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(<a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#af9f89829e9c1029ee0a2718adeea93ab">addr</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#a2458693c3117cfa3fc4e43aa0c17f84e">length</a>);
    <span class="keywordflow">if</span> (it == <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.end())
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;FEC not recognized, sending back No route message&quot;</span> &lt;&lt; endl;

        <a class="code" href="class_l_d_p.html#a266295145a120bfc4392554603e3a15a">sendNotify</a>(<a class="code" href="_l_d_p_packet__m_8h.html#ad97f39f1c02ee4465a8cd420fc590d0aa7f3989f2a6e77f5c6df85ff6210c6b5f">NO_ROUTE</a>, srcAddr, fec.<a class="code" href="struct_f_e_c___t_l_v.html#af9f89829e9c1029ee0a2718adeea93ab">addr</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#a2458693c3117cfa3fc4e43aa0c17f84e">length</a>);

        <span class="keyword">delete</span> packet;
        <span class="keywordflow">return</span>;
    }

    <span class="comment">// do we already have mapping for this fec from our downstream peer?</span>

    <span class="comment">//</span>
    <span class="comment">// XXX this code duplicates rebuildFecList</span>
    <span class="comment">//</span>

    <span class="comment">// does upstream have mapping from us?</span>
    FecBindVector::iterator uit = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(<a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>, it-&gt;fecid, srcAddr);

    <span class="comment">// shouldn&#39;t!</span>
    ASSERT(uit == <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.end());

    <span class="comment">// do we have mapping from downstream?</span>
    FecBindVector::iterator dit = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(<a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>, it-&gt;fecid, it-&gt;nextHop);

    <span class="comment">// is next hop our LDP peer?</span>
    <span class="keywordtype">bool</span> ER = !<a class="code" href="class_l_d_p.html#a43170c3c37870c56f321b8a2e24ec420">findPeerSocket</a>(it-&gt;nextHop);

    ASSERT(!(ER &amp;&amp; dit != <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.end())); <span class="comment">// can&#39;t be egress and have mapping at the same time</span>

    <span class="keywordflow">if</span> (ER || dit != <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.end())
    {
        fec_bind_t newItem;
        newItem.fecid = it-&gt;fecid;
        newItem.label = -1;
        newItem.peer = srcAddr;
        <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.push_back(newItem);
        uit = <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.end() - 1;
    }

    std::string inInterface = <a class="code" href="class_l_d_p.html#ab124d80cf623c4a5d4551075612b1243">findInterfaceFromPeerAddr</a>(srcAddr);
    std::string outInterface = <a class="code" href="class_l_d_p.html#ab124d80cf623c4a5d4551075612b1243">findInterfaceFromPeerAddr</a>(it-&gt;nextHop);

    <span class="keywordflow">if</span> (ER)
    {
        <span class="comment">// we are egress, that&#39;s easy:</span>
        <a class="code" href="_l_i_b_table_8h.html#a40d505abe4d03bca1c9776ebb1a874e5">LabelOpVector</a> outLabel = <a class="code" href="class_l_i_b_table.html#ad7eebe93833f85b136e60bc6ac30941e">LIBTable::popLabel</a>();

        uit-&gt;label = <a class="code" href="class_l_d_p.html#ad01cfb57e93718e4bcb371baa1b40b2c">lt</a>-&gt;<a class="code" href="class_l_i_b_table.html#a6599a694b9035a18dbc01bd0c52b54f7">installLibEntry</a>(uit-&gt;label, inInterface, outLabel, outInterface, 0);

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;installed (egress) LIB entry inLabel=&quot;</span> &lt;&lt; uit-&gt;label &lt;&lt; <span class="stringliteral">&quot; inInterface=&quot;</span> &lt;&lt; inInterface &lt;&lt;
                <span class="stringliteral">&quot; outLabel=&quot;</span> &lt;&lt; outLabel &lt;&lt; <span class="stringliteral">&quot; outInterface=&quot;</span> &lt;&lt; outInterface &lt;&lt; endl;

        <span class="comment">// We are egress, let our upstream peer know</span>
        <span class="comment">// about it by sending back a Label Mapping message</span>

        <a class="code" href="class_l_d_p.html#a3aade2e69231697175fe874a2ef9d2b2">sendMapping</a>(<a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3a21684054f4791ac4ad3ecd4cffd4c8f4">LABEL_MAPPING</a>, srcAddr, uit-&gt;label, fec.<a class="code" href="struct_f_e_c___t_l_v.html#af9f89829e9c1029ee0a2718adeea93ab">addr</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#a2458693c3117cfa3fc4e43aa0c17f84e">length</a>);

    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dit != <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.end())
    {
        <span class="comment">// we have mapping from DS, that&#39;s easy</span>
        <a class="code" href="_l_i_b_table_8h.html#a40d505abe4d03bca1c9776ebb1a874e5">LabelOpVector</a> outLabel = <a class="code" href="class_l_i_b_table.html#adc5fdcd5d807e663b467ff91e719873f">LIBTable::swapLabel</a>(dit-&gt;label);
        uit-&gt;label = <a class="code" href="class_l_d_p.html#ad01cfb57e93718e4bcb371baa1b40b2c">lt</a>-&gt;<a class="code" href="class_l_i_b_table.html#a6599a694b9035a18dbc01bd0c52b54f7">installLibEntry</a>(uit-&gt;label, inInterface, outLabel, outInterface, <a class="code" href="_l_d_p_8h.html#a819e3794dd985814c77459acdb71042f">LDP_USER_TRAFFIC</a>);

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;installed LIB entry inLabel=&quot;</span> &lt;&lt; uit-&gt;label &lt;&lt; <span class="stringliteral">&quot; inInterface=&quot;</span> &lt;&lt; inInterface &lt;&lt;
                <span class="stringliteral">&quot; outLabel=&quot;</span> &lt;&lt; outLabel &lt;&lt; <span class="stringliteral">&quot; outInterface=&quot;</span> &lt;&lt; outInterface &lt;&lt; endl;

        <span class="comment">// We already have a mapping for this FEC, let our upstream peer know</span>
        <span class="comment">// about it by sending back a Label Mapping message</span>

        <a class="code" href="class_l_d_p.html#a3aade2e69231697175fe874a2ef9d2b2">sendMapping</a>(<a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3a21684054f4791ac4ad3ecd4cffd4c8f4">LABEL_MAPPING</a>, srcAddr, uit-&gt;label, fec.<a class="code" href="struct_f_e_c___t_l_v.html#af9f89829e9c1029ee0a2718adeea93ab">addr</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#a2458693c3117cfa3fc4e43aa0c17f84e">length</a>);
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// no mapping from DS, mark as pending</span>

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;no mapping for this FEC from the downstream router, marking as pending&quot;</span> &lt;&lt; endl;

        pending_req_t newItem;
        newItem.fecid = it-&gt;fecid;
        newItem.peer = srcAddr;
        <a class="code" href="class_l_d_p.html#a057aa332bfc1ddcbc2d66e73de161af9">pending</a>.push_back(newItem);
    }

    <span class="keyword">delete</span> packet;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a615dc36ac669f35619acc9d4a7f35d2b"></a><!-- doxytag: member="LDP::processLABEL_WITHDRAW" ref="a615dc36ac669f35619acc9d4a7f35d2b" args="(LDPLabelMapping *packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a615dc36ac669f35619acc9d4a7f35d2b">LDP::processLABEL_WITHDRAW</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_l_d_p_label_mapping.html">LDPLabelMapping</a> *&#160;</td>
          <td class="paramname"><em>packet</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l01057">1057</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00647">processLDPPacketFromTCP()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct_f_e_c___t_l_v.html">FEC_TLV</a> fec = packet-&gt;<a class="code" href="class_l_d_p_label_mapping.html#ab4363c064c8a65a3a5eec995462bff66">getFec</a>();
    <span class="keywordtype">int</span> label = packet-&gt;<a class="code" href="class_l_d_p_label_mapping.html#a948b6496f30a911cb48ae3dc744f676f">getLabel</a>();
    <a class="code" href="class_i_p_address.html">IPAddress</a> fromIP = packet-&gt;<a class="code" href="class_l_d_p_packet.html#a5969f516c19ff0d0c6b4ce6429e49f76">getSenderAddress</a>();

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Mapping withdraw received for label=&quot;</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">&quot; fec=&quot;</span> &lt;&lt; fec &lt;&lt; <span class="stringliteral">&quot; from &quot;</span> &lt;&lt; fromIP &lt;&lt; endl;

    ASSERT(label &gt; 0);

    <span class="comment">// remove label from fecDown</span>

    FecVector::iterator it = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(<a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#af9f89829e9c1029ee0a2718adeea93ab">addr</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#a2458693c3117cfa3fc4e43aa0c17f84e">length</a>);
    <span class="keywordflow">if</span> (it == <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.end())
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;matching FEC not found, ignoring withdraw message&quot;</span> &lt;&lt; endl;
        <span class="keyword">delete</span> packet;
        <span class="keywordflow">return</span>;
    }

    FecBindVector::iterator dit = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(<a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>, it-&gt;fecid, fromIP);

    <span class="keywordflow">if</span> (dit == <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.end() || label != dit-&gt;label)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;matching mapping not found, ignoring withdraw message&quot;</span> &lt;&lt; endl;
        <span class="keyword">delete</span> packet;
        <span class="keywordflow">return</span>;
    }

    ASSERT(dit != <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.end());
    ASSERT(label == dit-&gt;label);

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing label from list of received mappings&quot;</span> &lt;&lt; endl;
    <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.erase(dit);

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending back relase message&quot;</span> &lt;&lt; endl;
    packet-&gt;<a class="code" href="class_l_d_p_packet.html#a1662e3d74b2fed0a3c3f48651fb62679">setType</a>(<a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3ad4cdfab707c90f09c9bd6481e3c2406d">LABEL_RELEASE</a>);

    <span class="comment">// send msg to peer over TCP</span>
    <a class="code" href="class_l_d_p.html#a05a988b6638a853db0ea2fe3cdef0f12">sendToPeer</a>(fromIP, packet);

    <a class="code" href="class_l_d_p.html#a9ebd9c14dc3c8b3818252dad37dcc5a5">updateFecListEntry</a>(*it);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a129493952b252d5c5d426c4056197a4f"></a><!-- doxytag: member="LDP::processLDPHello" ref="a129493952b252d5c5d426c4056197a4f" args="(LDPHello *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a129493952b252d5c5d426c4056197a4f">LDP::processLDPHello</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_l_d_p_hello.html">LDPHello</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00484">484</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00143">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a> *controlInfo = check_and_cast&lt;<a class="code" href="class_u_d_p_control_info.html">UDPControlInfo</a> *&gt;(msg-&gt;getControlInfo());
    <span class="comment">//IPAddress peerAddr = controlInfo-&gt;getSrcAddr().get4();</span>
    <a class="code" href="class_i_p_address.html">IPAddress</a> peerAddr = msg-&gt;<a class="code" href="class_l_d_p_packet.html#a5969f516c19ff0d0c6b4ce6429e49f76">getSenderAddress</a>();
    <span class="keywordtype">int</span> interfaceId = controlInfo-&gt;<a class="code" href="class_u_d_p_control_info.html#a371cfc0b09b71bf2cb851dfcfdc37583">getInterfaceId</a>();
    <span class="keyword">delete</span> msg;

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Received LDP Hello from &quot;</span> &lt;&lt; peerAddr &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;

    <span class="keywordflow">if</span> (peerAddr.isUnspecified() || peerAddr==<a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a64a9a5b1414f4da0b7b0a3e079091f62">getRouterId</a>())
    {
        <span class="comment">// must be ourselves (we&#39;re also in the all-routers multicast group), ignore</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;that&#39;s myself, ignore\n&quot;</span>;
        <span class="keywordflow">return</span>;
    }

    <span class="comment">// mark link as working if it was failed, and rebuild table</span>
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespacecesnet.html#a7af5ca969f2a4fc726050202336e75e5">index</a> = <a class="code" href="class_l_d_p.html#a0acc2a4c56957b0b30f0e8a6b2c2075f">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aff4add6e86b7bc9ea84079aae0bb3e51">linkIndex</a>(<a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a64a9a5b1414f4da0b7b0a3e079091f62">getRouterId</a>(), peerAddr);
    <span class="keywordflow">if</span> (!<a class="code" href="class_l_d_p.html#a0acc2a4c56957b0b30f0e8a6b2c2075f">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[index].state)
    {
        <a class="code" href="class_l_d_p.html#a0acc2a4c56957b0b30f0e8a6b2c2075f">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[<a class="code" href="namespacecesnet.html#a7af5ca969f2a4fc726050202336e75e5">index</a>].state = <span class="keyword">true</span>;
        <a class="code" href="class_l_d_p.html#a0acc2a4c56957b0b30f0e8a6b2c2075f">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable</a>();
        <a class="code" href="class_l_d_p.html#a62f103f31701a61dd42b6814770245fe">announceLinkChange</a>(index);
    }

    <span class="comment">// peer already in table?</span>
    <span class="keywordtype">int</span> <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a> = <a class="code" href="class_l_d_p.html#aaf2b4ec7ae7b2006fccd8d208dfbb471">findPeer</a>(peerAddr);
    <span class="keywordflow">if</span> (i!=-1)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;already in my peer table, rescheduling timeout&quot;</span> &lt;&lt; endl;
        ASSERT(<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[i].<a class="code" href="_r_i_p_timer__m_8h.html#a8c453bfd16599e8a0b20f94bdc7c7506a51a69776ef0949e2b87cdae793625906">timeout</a>);
        cancelEvent(<a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[i].<a class="code" href="_r_i_p_timer__m_8h.html#a8c453bfd16599e8a0b20f94bdc7c7506a51a69776ef0949e2b87cdae793625906">timeout</a>);
        scheduleAt(simTime() + <a class="code" href="class_l_d_p.html#adc72dc310e10bc94348b8ba0441730bd">holdTime</a>, <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[i].<a class="code" href="_r_i_p_timer__m_8h.html#a8c453bfd16599e8a0b20f94bdc7c7506a51a69776ef0949e2b87cdae793625906">timeout</a>);
        <span class="keywordflow">return</span>;
    }

    <span class="comment">// not in table, add it</span>
    peer_info info;
    info.peerIP = peerAddr;
    info.linkInterface = <a class="code" href="class_l_d_p.html#ae0de7c03b5ac9168386ed3cd6f920c3e">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a92764d620c345b7261de20e9ee5247d7">getInterfaceById</a>(interfaceId)-&gt;getName();
    info.activeRole = peerAddr.getInt() &gt; <a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a64a9a5b1414f4da0b7b0a3e079091f62">getRouterId</a>().<a class="code" href="class_i_p_address.html#a807ca46964a8403cf0c70f0772179524">getInt</a>();
    info.socket = NULL;
    info.timeout = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;HelloTimeout&quot;</span>);
    scheduleAt(simTime() + <a class="code" href="class_l_d_p.html#adc72dc310e10bc94348b8ba0441730bd">holdTime</a>, info.timeout);
    <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>.push_back(info);
    <span class="keywordtype">int</span> peerIndex = <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>.size()-1;

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;added to peer table\n&quot;</span>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;We&#39;ll be &quot;</span> &lt;&lt; (info.activeRole ? <span class="stringliteral">&quot;ACTIVE&quot;</span> : <span class="stringliteral">&quot;PASSIVE&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; in this session\n&quot;</span>;

    <span class="comment">// introduce ourselves with a Hello, then connect if we&#39;re in ACTIVE role</span>
    <a class="code" href="class_l_d_p.html#af8f8d5cf6344ca5fa0c0ee4656f60f89">sendHelloTo</a>(peerAddr);
    <span class="keywordflow">if</span> (info.activeRole)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Establishing session with it\n&quot;</span>;
        <a class="code" href="class_l_d_p.html#a3a85856691c0af7af8d927f80a4e3eca">openTCPConnectionToPeer</a>(peerIndex);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac330a2d78f69dddd1eb1f9479cb16709"></a><!-- doxytag: member="LDP::processLDPPacketFromTCP" ref="ac330a2d78f69dddd1eb1f9479cb16709" args="(LDPPacket *ldpPacket)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#ac330a2d78f69dddd1eb1f9479cb16709">LDP::processLDPPacketFromTCP</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_l_d_p_packet.html">LDPPacket</a> *&#160;</td>
          <td class="paramname"><em>ldpPacket</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00647">647</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00601">socketDataArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">switch</span> (ldpPacket-&gt;<a class="code" href="class_l_d_p_packet.html#ace0e4e87ace7cdcbfc4468e464db4f69">getType</a>())
    {
    <span class="keywordflow">case</span> <a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3a572e2128aeb8cc392386eb1610a1fada">HELLO</a>:
        error(<span class="stringliteral">&quot;Received LDP HELLO over TCP (should arrive over UDP)&quot;</span>);

    <span class="keywordflow">case</span> <a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3a4fabbaac7b5e57d7b8b019a0f79ce492">ADDRESS</a>:
        <span class="comment">// processADDRESS(ldpPacket);</span>
        error(<span class="stringliteral">&quot;Received LDP ADDRESS message, unsupported in this version&quot;</span>);
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3a0dee6cb4ef910becd493a70e655b8768">ADDRESS_WITHDRAW</a>:
        <span class="comment">// processADDRESS_WITHDRAW(ldpPacket);</span>
        error(<span class="stringliteral">&quot;LDP PROC DEBUG: Received LDP ADDRESS_WITHDRAW message, unsupported in this version&quot;</span>);
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3a21684054f4791ac4ad3ecd4cffd4c8f4">LABEL_MAPPING</a>:
        <a class="code" href="class_l_d_p.html#ad4960396a93e0b4b3b71f9cd16c2a9b7">processLABEL_MAPPING</a>(check_and_cast&lt;LDPLabelMapping *&gt;(ldpPacket));
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3a13f9e4988522509bb13178c320a7f5c3">LABEL_REQUEST</a>:
        <a class="code" href="class_l_d_p.html#a8bbf321fe7b9eb4c2ebbc06a2a12c8d4">processLABEL_REQUEST</a>(check_and_cast&lt;LDPLabelRequest *&gt;(ldpPacket));
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3a7fd292325bd8d0d4a4d466f1e969c494">LABEL_WITHDRAW</a>:
        <a class="code" href="class_l_d_p.html#a615dc36ac669f35619acc9d4a7f35d2b">processLABEL_WITHDRAW</a>(check_and_cast&lt;LDPLabelMapping *&gt;(ldpPacket));
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3ad4cdfab707c90f09c9bd6481e3c2406d">LABEL_RELEASE</a>:
        <a class="code" href="class_l_d_p.html#a266cf0a6e2fe508f383e88a640697afd">processLABEL_RELEASE</a>(check_and_cast&lt;LDPLabelMapping *&gt;(ldpPacket));
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3ac471f802051d229d2e12947bbf886f96">NOTIFICATION</a>:
        <a class="code" href="class_l_d_p.html#aba440f5b0dc9e2ee2a8360388a8503bc">processNOTIFICATION</a>(check_and_cast&lt;LDPNotify*&gt;(ldpPacket));
        <span class="keywordflow">break</span>;

    <span class="keywordflow">default</span>:
        error(<span class="stringliteral">&quot;LDP PROC DEBUG: Unrecognized LDP Message Type, type is %d&quot;</span>, ldpPacket-&gt;<a class="code" href="class_l_d_p_packet.html#ace0e4e87ace7cdcbfc4468e464db4f69">getType</a>());
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae2a3dbb01c3f0c5b317271bb50abd98f"></a><!-- doxytag: member="LDP::processMessageFromTCP" ref="ae2a3dbb01c3f0c5b317271bb50abd98f" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#ae2a3dbb01c3f0c5b317271bb50abd98f">LDP::processMessageFromTCP</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00556">556</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00143">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_t_c_p_socket.html">TCPSocket</a> *socket = <a class="code" href="class_l_d_p.html#a168d3444b4455a308d211a24b089b5a4">socketMap</a>.<a class="code" href="class_t_c_p_socket_map.html#ad96c686c0e0536b8b8e279728a53b17e">findSocketFor</a>(msg);
    <span class="keywordflow">if</span> (!socket)
    {
        <span class="comment">// not yet in socketMap, must be new incoming connection.</span>
        <span class="comment">// find which peer it is and register connection</span>
        socket = <span class="keyword">new</span> <a class="code" href="class_t_c_p_socket.html">TCPSocket</a>(msg);
        socket-&gt;<a class="code" href="class_t_c_p_socket.html#ab6563d5ef32687b2072e5c08317ba519">setOutputGate</a>(gate(<span class="stringliteral">&quot;tcpOut&quot;</span>));

        <span class="comment">// FIXME there seems to be some confusion here. Is it sure that</span>
        <span class="comment">// routerIds we use as peerAddrs are the same as IP addresses</span>
        <span class="comment">// the routing is based on? --Andras</span>
        <a class="code" href="class_i_p_address.html">IPAddress</a> peerAddr = socket-&gt;<a class="code" href="class_t_c_p_socket.html#a0ac232127ecca9558ca205db643cf347">getRemoteAddress</a>().<a class="code" href="class_i_pv_x_address.html#a00acd2be0fc0f254afb2eb7540a4ea6e">get4</a>();

        <span class="keywordtype">int</span> <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a> = <a class="code" href="class_l_d_p.html#aaf2b4ec7ae7b2006fccd8d208dfbb471">findPeer</a>(peerAddr);
        <span class="keywordflow">if</span> (i==-1 || <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[i].socket)
        {
            <span class="comment">// nothing known about this guy, or already connected: refuse</span>
            socket-&gt;close(); <span class="comment">// reset()?</span>
            <span class="keyword">delete</span> socket;
            <span class="keyword">delete</span> msg;
            <span class="keywordflow">return</span>;
        }
        <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[<a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>].socket = socket;
        socket-&gt;setCallbackObject(<span class="keyword">this</span>, (<span class="keywordtype">void</span> *)i);
        <a class="code" href="class_l_d_p.html#a168d3444b4455a308d211a24b089b5a4">socketMap</a>.<a class="code" href="class_t_c_p_socket_map.html#ac19937a0e8bd2dfcda6e7f831b835fd8">addSocket</a>(socket);
    }

    <span class="comment">// dispatch to socketEstablished(), socketDataArrived(), socketPeerClosed()</span>
    <span class="comment">// or socketFailure()</span>
    socket-&gt;processMessage(msg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aba440f5b0dc9e2ee2a8360388a8503bc"></a><!-- doxytag: member="LDP::processNOTIFICATION" ref="aba440f5b0dc9e2ee2a8360388a8503bc" args="(LDPNotify *packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#aba440f5b0dc9e2ee2a8360388a8503bc">LDP::processNOTIFICATION</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_l_d_p_notify.html">LDPNotify</a> *&#160;</td>
          <td class="paramname"><em>packet</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00860">860</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00143">handleMessage()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00647">processLDPPacketFromTCP()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct_f_e_c___t_l_v.html">FEC_TLV</a> fec = packet-&gt;<a class="code" href="class_l_d_p_notify.html#ada26aa7a219c92a899d538164510c331">getFec</a>();
    <a class="code" href="class_i_p_address.html">IPAddress</a> srcAddr = packet-&gt;<a class="code" href="class_l_d_p_packet.html#a5969f516c19ff0d0c6b4ce6429e49f76">getSenderAddress</a>();
    <span class="keywordtype">int</span> status = packet-&gt;<a class="code" href="class_l_d_p_notify.html#af64186cdd2b7e4182809cfbb4b97641d">getStatus</a>();

    <span class="comment">// XXX FIXME NO_ROUTE processing should probably be split into two functions,</span>
    <span class="comment">// this is not the cleanest thing I ever wrote :)   --Vojta</span>

    <span class="keywordflow">if</span> (packet-&gt;isSelfMessage())
    {
        <span class="comment">// re-scheduled by ourselves</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;notification retry for peer=&quot;</span> &lt;&lt; srcAddr &lt;&lt; <span class="stringliteral">&quot; fec=&quot;</span> &lt;&lt; fec &lt;&lt; <span class="stringliteral">&quot; status=&quot;</span> &lt;&lt; status &lt;&lt; endl;
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// received via network</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;notification received from=&quot;</span> &lt;&lt; srcAddr &lt;&lt; <span class="stringliteral">&quot; fec=&quot;</span> &lt;&lt; fec &lt;&lt; <span class="stringliteral">&quot; status=&quot;</span> &lt;&lt; status &lt;&lt; endl;
    }

    <span class="keywordflow">switch</span>(status)
    {
        <span class="keywordflow">case</span> <a class="code" href="_l_d_p_packet__m_8h.html#ad97f39f1c02ee4465a8cd420fc590d0aa7f3989f2a6e77f5c6df85ff6210c6b5f">NO_ROUTE</a>:
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;route does not exit on that peer&quot;</span> &lt;&lt; endl;

            FecVector::iterator it = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(<a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#af9f89829e9c1029ee0a2718adeea93ab">addr</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#a2458693c3117cfa3fc4e43aa0c17f84e">length</a>);
            <span class="keywordflow">if</span> (it != <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.end())
            {
                <span class="keywordflow">if</span> (it-&gt;nextHop == srcAddr)
                {
                    <span class="keywordflow">if</span> (!packet-&gt;isSelfMessage())
                    {
                        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;we are still interesed in this mapping, we will retry later&quot;</span> &lt;&lt; endl;

                        scheduleAt(simTime() + 1.0 <span class="comment">/* XXX FIXME */</span>, packet);
                        <span class="keywordflow">return</span>;
                    }
                    <span class="keywordflow">else</span>
                    {
                        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;reissuing request&quot;</span> &lt;&lt; endl;

                        <a class="code" href="class_l_d_p.html#a27a71323af2adb9a34afc88393757312">sendMappingRequest</a>(srcAddr, fec.<a class="code" href="struct_f_e_c___t_l_v.html#af9f89829e9c1029ee0a2718adeea93ab">addr</a>, fec.<a class="code" href="struct_f_e_c___t_l_v.html#a2458693c3117cfa3fc4e43aa0c17f84e">length</a>);
                    }
                }
                <span class="keywordflow">else</span>
                    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;and we still recognize this FEC, but we use different next hop, forget it&quot;</span> &lt;&lt; endl;
            }
            <span class="keywordflow">else</span>
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;and we do not recognize this any longer, forget it&quot;</span> &lt;&lt; endl;

            <span class="keywordflow">break</span>;
        }

        <span class="keywordflow">default</span>:
            ASSERT(<span class="keyword">false</span>);
    }

    <span class="keyword">delete</span> packet;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4f61fee380b47683aef8f450b4704940"></a><!-- doxytag: member="LDP::rebuildFecList" ref="a4f61fee380b47683aef8f450b4704940" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a4f61fee380b47683aef8f450b4704940">LDP::rebuildFecList</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00262">262</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l01235">receiveChangeNotification()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;make list of recognized FECs&quot;</span> &lt;&lt; endl;

    <a class="code" href="class_l_d_p.html#a8885142cabdbcdfb12cb843004e106b9">FecVector</a> oldList = <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>;
    <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.clear();

    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a> = 0; <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a> &lt; <a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#ada2fac98d1d1c80c291be239b075c63b">getNumRoutes</a>(); <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>++)
    {
        <span class="comment">// every entry in the routing table</span>

        <span class="keyword">const</span> <a class="code" href="class_i_p_route.html">IPRoute</a> *re = <a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a89f3eb433e309043cde517238eef5214">getRoute</a>(<a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>);

        <span class="comment">// ignore multicast routes</span>
        <span class="keywordflow">if</span> (re-&gt;<a class="code" href="class_i_p_route.html#a07adcdcc04cb4d50f12f060c7206b73e">getHost</a>().<a class="code" href="class_i_p_address.html#a9b6b5a118e8e1f6f83f2ccffd5a72125">isMulticast</a>())
            <span class="keywordflow">continue</span>;

        <span class="comment">// find out current next hop according to routing table</span>
        <a class="code" href="class_i_p_address.html">IPAddress</a> nextHop = (re-&gt;<a class="code" href="class_i_p_route.html#ae1e091d2b6a8492e36c3b7bac483e7af">getType</a>() == <a class="code" href="class_i_p_route.html#affdd22b24049e9d8d991b955a973d32eab46216a10952298ab9565997122d7225" title="Directly attached to the router.">IPRoute::DIRECT</a>) ? re-&gt;<a class="code" href="class_i_p_route.html#a07adcdcc04cb4d50f12f060c7206b73e">getHost</a>() : re-&gt;<a class="code" href="class_i_p_route.html#aa1aa349eb850c0d9acb3f01ba0ee61d5">getGateway</a>();
        ASSERT(!nextHop.<a class="code" href="class_i_p_address.html#a7fb3c274d7a8600be890f83c028d5f96">isUnspecified</a>());

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;nextHop &lt;-- &quot;</span> &lt;&lt; nextHop &lt;&lt; endl;

        FecVector::iterator it = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(oldList, re-&gt;<a class="code" href="class_i_p_route.html#a07adcdcc04cb4d50f12f060c7206b73e">getHost</a>(), re-&gt;<a class="code" href="class_i_p_route.html#ad69bc8024a13bf6ec528e9afdf1aa7e1">getNetmask</a>().<a class="code" href="class_i_p_address.html#abf9da0dfc5c11a7b09260060207b0fc9">getNetmaskLength</a>());

        <span class="keywordflow">if</span> (it == oldList.end())
        {
            <span class="comment">// fec didn&#39;t exist, it was just created</span>
            fec_t newItem;
            newItem.fecid = ++<a class="code" href="class_l_d_p.html#aa95d15f32ce708d1cc9817586ad05857">maxFecid</a>;
            newItem.addr = re-&gt;<a class="code" href="class_i_p_route.html#a07adcdcc04cb4d50f12f060c7206b73e">getHost</a>();
            newItem.length = re-&gt;<a class="code" href="class_i_p_route.html#ad69bc8024a13bf6ec528e9afdf1aa7e1">getNetmask</a>().<a class="code" href="class_i_p_address.html#abf9da0dfc5c11a7b09260060207b0fc9">getNetmaskLength</a>();
            newItem.nextHop = nextHop;
            <a class="code" href="class_l_d_p.html#a9ebd9c14dc3c8b3818252dad37dcc5a5">updateFecListEntry</a>(newItem);
            <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.push_back(newItem);
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (it-&gt;nextHop != nextHop)
        {
            <span class="comment">// next hop for this FEC changed,</span>
            it-&gt;nextHop = nextHop;
            <a class="code" href="class_l_d_p.html#a9ebd9c14dc3c8b3818252dad37dcc5a5">updateFecListEntry</a>(*it);
            <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.push_back(*it);
            oldList.erase(it);
        }
        <span class="keywordflow">else</span>
        {
            <span class="comment">// FEC didn&#39;t change, reusing old values</span>
            <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.push_back(*it);
            oldList.erase(it);
            <span class="keywordflow">continue</span>;
        }
    }


    <span class="comment">// our own addresses (XXX is it needed?)</span>

    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a> = 0; <a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>&lt; <a class="code" href="class_l_d_p.html#ae0de7c03b5ac9168386ed3cd6f920c3e">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a2b0ce46cd92da6f64fc363410dc71904">getNumInterfaces</a>(); ++<a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>)
    {
        <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_l_d_p.html#ae0de7c03b5ac9168386ed3cd6f920c3e">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a19ce4ca3b47b52b8e2b67c25806c4b49">getInterface</a>(<a class="code" href="namespacecesnet.html#a2d959620f0e772e579c21833995d082e">i</a>);
        <span class="keywordflow">if</span> (ie-&gt;<a class="code" href="class_interface_entry.html#a315657b6b5281241a69bed8e1171ef6f">getNetworkLayerGateIndex</a>() &lt; 0)
            <span class="keywordflow">continue</span>;

        FecVector::iterator it = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(oldList, ie-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aec8ebefd03acad479ac89d31d7228331">getIPAddress</a>(), 32);
        <span class="keywordflow">if</span> (it == oldList.end())
        {
            fec_t newItem;
            newItem.fecid = ++<a class="code" href="class_l_d_p.html#aa95d15f32ce708d1cc9817586ad05857">maxFecid</a>;
            newItem.addr = ie-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aec8ebefd03acad479ac89d31d7228331">getIPAddress</a>();
            newItem.length = 32;
            newItem.nextHop = ie-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aec8ebefd03acad479ac89d31d7228331">getIPAddress</a>();
            <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.push_back(newItem);
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.push_back(*it);
            oldList.erase(it);
        }
    }

    <span class="keywordflow">if</span> (oldList.size() &gt; 0)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;there are &quot;</span> &lt;&lt; oldList.size() &lt;&lt; <span class="stringliteral">&quot; deprecated FECs, removing them&quot;</span> &lt;&lt; endl;

        FecVector::iterator it;
        <span class="keywordflow">for</span> (it = oldList.begin(); it != oldList.end(); it++)
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing FEC= &quot;</span> &lt;&lt; *it &lt;&lt; endl;

            FecBindVector::iterator dit;
            <span class="keywordflow">for</span> (dit = <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.begin(); dit != <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.end(); dit++)
            {
                <span class="keywordflow">if</span> (dit-&gt;fecid != it-&gt;fecid)
                    <span class="keywordflow">continue</span>;

                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending release label=&quot;</span> &lt;&lt; dit-&gt;label &lt;&lt; <span class="stringliteral">&quot; downstream to &quot;</span> &lt;&lt; dit-&gt;peer &lt;&lt; endl;

                <a class="code" href="class_l_d_p.html#a3aade2e69231697175fe874a2ef9d2b2">sendMapping</a>(<a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3ad4cdfab707c90f09c9bd6481e3c2406d">LABEL_RELEASE</a>, dit-&gt;peer, dit-&gt;label, it-&gt;addr, it-&gt;length);
            }

            FecBindVector::iterator uit;
            <span class="keywordflow">for</span> (uit = <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.begin(); uit != <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.end(); uit++)
            {
                <span class="keywordflow">if</span> (uit-&gt;fecid != it-&gt;fecid)
                    <span class="keywordflow">continue</span>;

                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending withdraw label=&quot;</span> &lt;&lt; uit-&gt;label &lt;&lt; <span class="stringliteral">&quot; upstream to &quot;</span> &lt;&lt; uit-&gt;peer &lt;&lt; endl;

                <a class="code" href="class_l_d_p.html#a3aade2e69231697175fe874a2ef9d2b2">sendMapping</a>(<a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3a7fd292325bd8d0d4a4d466f1e969c494">LABEL_WITHDRAW</a>, uit-&gt;peer, uit-&gt;label, it-&gt;addr, it-&gt;length);

                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing entry inLabel=&quot;</span> &lt;&lt; uit-&gt;label &lt;&lt; <span class="stringliteral">&quot; from LIB&quot;</span> &lt;&lt; endl;

                <a class="code" href="class_l_d_p.html#ad01cfb57e93718e4bcb371baa1b40b2c">lt</a>-&gt;<a class="code" href="class_l_i_b_table.html#aeaf750f1e663ddd1a5a6e76406ad8a14">removeLibEntry</a>(uit-&gt;label);
            }

        }
    }

    <span class="comment">// we must keep this list sorted for matching to work correctly</span>
    <span class="comment">// this is probably slower than it must be</span>
    std::sort(<a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.begin(), <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.end(), <a class="code" href="_l_d_p_8cc.html#a1e6892349ebc14dde68f926f1b8d87cd">fecPrefixCompare</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a075009e8998b02f670d1439c33863e90"></a><!-- doxytag: member="LDP::receiveChangeNotification" ref="a075009e8998b02f670d1439c33863e90" args="(int category, const cPolymorphic *details)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a075009e8998b02f670d1439c33863e90">LDP::receiveChangeNotification</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cPolymorphic *&#160;</td>
          <td class="paramname"><em>details</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called by the <a class="el" href="class_notification_board.html">NotificationBoard</a> whenever a change of a category occurs to which this client has subscribed. </p>

<p>Implements <a class="el" href="class_i_notifiable.html#a67d757190e1128eaec8f0a8e51ed38f6">INotifiable</a>.</p>

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l01235">1235</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();
    <a class="code" href="_notifier_consts_8cc.html#a68fd4b933fae636048bb9ee52fd922e5">printNotificationBanner</a>(category, details);

    ASSERT(category==<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba38a4632902da5c126d1b1bc992799303">NF_IPv4_ROUTE_ADDED</a> || category==<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba250243f132a5001e082e2c58b25eb0f1">NF_IPv4_ROUTE_DELETED</a>);

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;routing table changed, rebuild list of known FEC&quot;</span> &lt;&lt; endl;

    <a class="code" href="class_l_d_p.html#a4f61fee380b47683aef8f450b4704940">rebuildFecList</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="af8f8d5cf6344ca5fa0c0ee4656f60f89"></a><!-- doxytag: member="LDP::sendHelloTo" ref="af8f8d5cf6344ca5fa0c0ee4656f60f89" args="(IPAddress dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#af8f8d5cf6344ca5fa0c0ee4656f60f89">LDP::sendHelloTo</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>dest</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00396">396</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00143">handleMessage()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00484">processLDPHello()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_l_d_p_hello.html">LDPHello</a> *<a class="code" href="_r_i_p_timer__m_8h.html#a8c453bfd16599e8a0b20f94bdc7c7506ae9c8944923f9ffef5a2ff2c12fc6a183">hello</a> = <span class="keyword">new</span> <a class="code" href="class_l_d_p_hello.html">LDPHello</a>(<span class="stringliteral">&quot;LDP-Hello&quot;</span>);
    hello-&gt;setByteLength(<a class="code" href="_l_d_p_packet__m_8h.html#ae5cdb34a890024cf1fb6cc148a76adfa">LDP_HEADER_BYTES</a>);
    hello-&gt;<a class="code" href="class_l_d_p_packet.html#a1662e3d74b2fed0a3c3f48651fb62679">setType</a>(<a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3a572e2128aeb8cc392386eb1610a1fada">HELLO</a>);
    hello-&gt;<a class="code" href="class_l_d_p_packet.html#a00eba911e4fe69d2feb59df4934db444">setSenderAddress</a>(<a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a64a9a5b1414f4da0b7b0a3e079091f62">getRouterId</a>());
    <span class="comment">//hello-&gt;setReceiverAddress(...);</span>
    hello-&gt;<a class="code" href="class_l_d_p_hello.html#a80d90b2b7a8c244a86f847ca8bc2cb0a">setHoldTime</a>(SIMTIME_DBL(<a class="code" href="class_l_d_p.html#adc72dc310e10bc94348b8ba0441730bd">holdTime</a>));
    <span class="comment">//hello-&gt;setRbit(...);</span>
    <span class="comment">//hello-&gt;setTbit(...);</span>
    hello-&gt;addPar(<span class="stringliteral">&quot;color&quot;</span>) = <a class="code" href="_l_d_p_8h.html#ac61edad3b726cd30ff860a571266ff50">LDP_HELLO_TRAFFIC</a>;

    <a class="code" href="class_l_d_p.html#a70faa45ced5c6b6f18c5015bae134956">udpSocket</a>.<a class="code" href="class_u_d_p_socket.html#ae24c4132eb222af55be418025c6b20e9">sendTo</a>(hello, dest, <a class="code" href="_l_d_p_8h.html#a10b9b0d50dcb805c5a1db8aa8c02ca3d">LDP_PORT</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3aade2e69231697175fe874a2ef9d2b2"></a><!-- doxytag: member="LDP::sendMapping" ref="a3aade2e69231697175fe874a2ef9d2b2" args="(int type, IPAddress dest, int label, IPAddress addr, int length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a3aade2e69231697175fe874a2ef9d2b2">LDP::sendMapping</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00841">841</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l01101">processLABEL_MAPPING()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00921">processLABEL_REQUEST()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00262">rebuildFecList()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00201">updateFecListEntry()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Send LABEL MAPPING downstream</span>
    <a class="code" href="class_l_d_p_label_mapping.html">LDPLabelMapping</a> *lmMessage = <span class="keyword">new</span> <a class="code" href="class_l_d_p_label_mapping.html">LDPLabelMapping</a>(<span class="stringliteral">&quot;Lb-Mapping&quot;</span>);
    lmMessage-&gt;setByteLength(<a class="code" href="_l_d_p_packet__m_8h.html#ae5cdb34a890024cf1fb6cc148a76adfa">LDP_HEADER_BYTES</a>); <span class="comment">// FIXME find out actual length</span>
    lmMessage-&gt;<a class="code" href="class_l_d_p_packet.html#a1662e3d74b2fed0a3c3f48651fb62679">setType</a>(type);
    lmMessage-&gt;<a class="code" href="class_l_d_p_packet.html#a9c35781df8428fd8e1d5f4f123853666">setReceiverAddress</a>(dest);
    lmMessage-&gt;<a class="code" href="class_l_d_p_packet.html#a00eba911e4fe69d2feb59df4934db444">setSenderAddress</a>(<a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a64a9a5b1414f4da0b7b0a3e079091f62">getRouterId</a>());
    lmMessage-&gt;<a class="code" href="class_l_d_p_label_mapping.html#a18b59d07067870e26c60a497e078f7c9">setLabel</a>(label);

    <a class="code" href="struct_f_e_c___t_l_v.html">FEC_TLV</a> fec;
    fec.<a class="code" href="struct_f_e_c___t_l_v.html#af9f89829e9c1029ee0a2718adeea93ab">addr</a> = addr;
    fec.<a class="code" href="struct_f_e_c___t_l_v.html#a2458693c3117cfa3fc4e43aa0c17f84e">length</a> = length;

    lmMessage-&gt;<a class="code" href="class_l_d_p_label_mapping.html#a05bb5d38f289e97fae2bcad409b11a0b">setFec</a>(fec);

    <a class="code" href="class_l_d_p.html#a05a988b6638a853db0ea2fe3cdef0f12">sendToPeer</a>(dest, lmMessage);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a27a71323af2adb9a34afc88393757312"></a><!-- doxytag: member="LDP::sendMappingRequest" ref="a27a71323af2adb9a34afc88393757312" args="(IPAddress dest, IPAddress addr, int length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a27a71323af2adb9a34afc88393757312">LDP::sendMappingRequest</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00184">184</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00860">processNOTIFICATION()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00201">updateFecListEntry()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_l_d_p_label_request.html">LDPLabelRequest</a> *requestMsg = <span class="keyword">new</span> <a class="code" href="class_l_d_p_label_request.html">LDPLabelRequest</a>(<span class="stringliteral">&quot;Lb-Req&quot;</span>);
    requestMsg-&gt;setByteLength(<a class="code" href="_l_d_p_packet__m_8h.html#ae5cdb34a890024cf1fb6cc148a76adfa">LDP_HEADER_BYTES</a>); <span class="comment">// FIXME find out actual length</span>
    requestMsg-&gt;<a class="code" href="class_l_d_p_packet.html#a1662e3d74b2fed0a3c3f48651fb62679">setType</a>(<a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3a13f9e4988522509bb13178c320a7f5c3">LABEL_REQUEST</a>);

    <a class="code" href="struct_f_e_c___t_l_v.html">FEC_TLV</a> fec;
    fec.<a class="code" href="struct_f_e_c___t_l_v.html#af9f89829e9c1029ee0a2718adeea93ab">addr</a> = addr;
    fec.<a class="code" href="struct_f_e_c___t_l_v.html#a2458693c3117cfa3fc4e43aa0c17f84e">length</a> = length;
    requestMsg-&gt;<a class="code" href="class_l_d_p_label_request.html#ad4edebef638c956bc43e6074f3ef65bb">setFec</a>(fec);

    requestMsg-&gt;<a class="code" href="class_l_d_p_packet.html#a9c35781df8428fd8e1d5f4f123853666">setReceiverAddress</a>(dest);
    requestMsg-&gt;<a class="code" href="class_l_d_p_packet.html#a00eba911e4fe69d2feb59df4934db444">setSenderAddress</a>(<a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a64a9a5b1414f4da0b7b0a3e079091f62">getRouterId</a>());

    <a class="code" href="class_l_d_p.html#a05a988b6638a853db0ea2fe3cdef0f12">sendToPeer</a>(dest, requestMsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a266295145a120bfc4392554603e3a15a"></a><!-- doxytag: member="LDP::sendNotify" ref="a266295145a120bfc4392554603e3a15a" args="(int status, IPAddress dest, IPAddress addr, int length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a266295145a120bfc4392554603e3a15a">LDP::sendNotify</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00822">822</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00921">processLABEL_REQUEST()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Send NOTIFY message</span>
    <a class="code" href="class_l_d_p_notify.html">LDPNotify</a> *lnMessage = <span class="keyword">new</span> <a class="code" href="class_l_d_p_notify.html">LDPNotify</a>(<span class="stringliteral">&quot;Lb-Notify&quot;</span>);
    lnMessage-&gt;setByteLength(<a class="code" href="_l_d_p_packet__m_8h.html#ae5cdb34a890024cf1fb6cc148a76adfa">LDP_HEADER_BYTES</a>); <span class="comment">// FIXME find out actual length</span>
    lnMessage-&gt;<a class="code" href="class_l_d_p_packet.html#a1662e3d74b2fed0a3c3f48651fb62679">setType</a>(<a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3ac471f802051d229d2e12947bbf886f96">NOTIFICATION</a>);
    lnMessage-&gt;<a class="code" href="class_l_d_p_notify.html#aafdbf669aa2cfa2a201a5bacce054810">setStatus</a>(<a class="code" href="_l_d_p_packet__m_8h.html#ad97f39f1c02ee4465a8cd420fc590d0aa7f3989f2a6e77f5c6df85ff6210c6b5f">NO_ROUTE</a>);
    lnMessage-&gt;<a class="code" href="class_l_d_p_packet.html#a9c35781df8428fd8e1d5f4f123853666">setReceiverAddress</a>(dest);
    lnMessage-&gt;<a class="code" href="class_l_d_p_packet.html#a00eba911e4fe69d2feb59df4934db444">setSenderAddress</a>(<a class="code" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a64a9a5b1414f4da0b7b0a3e079091f62">getRouterId</a>());

    <a class="code" href="struct_f_e_c___t_l_v.html">FEC_TLV</a> fec;
    fec.<a class="code" href="struct_f_e_c___t_l_v.html#af9f89829e9c1029ee0a2718adeea93ab">addr</a> = addr;
    fec.<a class="code" href="struct_f_e_c___t_l_v.html#a2458693c3117cfa3fc4e43aa0c17f84e">length</a> = length;

    lnMessage-&gt;<a class="code" href="class_l_d_p_notify.html#aeec1434f852048dfeb26143ee7ad0cb1">setFec</a>(fec);

    <a class="code" href="class_l_d_p.html#a05a988b6638a853db0ea2fe3cdef0f12">sendToPeer</a>(dest, lnMessage);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a05a988b6638a853db0ea2fe3cdef0f12"></a><!-- doxytag: member="LDP::sendToPeer" ref="a05a988b6638a853db0ea2fe3cdef0f12" args="(IPAddress dest, cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a05a988b6638a853db0ea2fe3cdef0f12">LDP::sendToPeer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00179">179</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l01057">processLABEL_WITHDRAW()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00841">sendMapping()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00184">sendMappingRequest()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00822">sendNotify()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_l_d_p.html#a37df6239993d84988793c63eaf8f1940">getPeerSocket</a>(dest)-&gt;<a class="code" href="class_t_c_p_socket.html#a5bd53af740d4cde0d5460fdf481e7a7a">send</a>(msg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a11b3f4de91cc4a962ec28a94c4c7c6cb"></a><!-- doxytag: member="LDP::socketClosed" ref="a11b3f4de91cc4a962ec28a94c4c7c6cb" args="(int connId, void *yourPtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a11b3f4de91cc4a962ec28a94c4c7c6cb">LDP::socketClosed</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>yourPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_t_c_p_socket_1_1_callback_interface.html#a9a4049a13ace6e455d62c744ec7bf35e">TCPSocket::CallbackInterface</a>.</p>

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00627">627</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    peer_info&amp; peer = <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[(long)yourPtr];
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;TCP connection to peer &quot;</span> &lt;&lt; peer.peerIP &lt;&lt; <span class="stringliteral">&quot; closed\n&quot;</span>;

    ASSERT(<span class="keyword">false</span>);

    <span class="comment">// FIXME what now? reconnect after a delay?</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7a960a6e6fdddbf58e4978ed432e63de"></a><!-- doxytag: member="LDP::socketDataArrived" ref="a7a960a6e6fdddbf58e4978ed432e63de" args="(int connId, void *yourPtr, cPacket *msg, bool urgent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a7a960a6e6fdddbf58e4978ed432e63de">LDP::socketDataArrived</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>yourPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>urgent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="class_t_c_p_socket_1_1_callback_interface.html#ae4fe36908e06127f0fe32454e63287f9">TCPSocket::CallbackInterface</a>.</p>

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00601">601</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    peer_info&amp; peer = <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[(long)yourPtr];
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Message arrived over TCP from peer &quot;</span> &lt;&lt; peer.peerIP &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

    <span class="keyword">delete</span> msg-&gt;removeControlInfo();
    <a class="code" href="class_l_d_p.html#ac330a2d78f69dddd1eb1f9479cb16709">processLDPPacketFromTCP</a>(check_and_cast&lt;LDPPacket *&gt;(msg));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a014504d9ed3ccbb4a0366e95870eea56"></a><!-- doxytag: member="LDP::socketEstablished" ref="a014504d9ed3ccbb4a0366e95870eea56" args="(int connId, void *yourPtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a014504d9ed3ccbb4a0366e95870eea56">LDP::socketEstablished</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>yourPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_t_c_p_socket_1_1_callback_interface.html#a9465870ddf580bea5b18c069d609fec2">TCPSocket::CallbackInterface</a>.</p>

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00590">590</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    peer_info&amp; peer = <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[(long)yourPtr];
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;TCP connection established with peer &quot;</span> &lt;&lt; peer.peerIP &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

    <span class="comment">// we must update all entries with nextHop == peerIP</span>
    <a class="code" href="class_l_d_p.html#a33bd46c81cf3f06f6f082c9d67ff58c5">updateFecList</a>(peer.peerIP);

    <span class="comment">// FIXME start LDP session setup (if we&#39;re on the active side?)</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9e552b940ba57ad9e27d5cbeb31befa2"></a><!-- doxytag: member="LDP::socketFailure" ref="a9e552b940ba57ad9e27d5cbeb31befa2" args="(int connId, void *yourPtr, int code)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a9e552b940ba57ad9e27d5cbeb31befa2">LDP::socketFailure</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>yourPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_t_c_p_socket_1_1_callback_interface.html#af4fc128f905d181c511114849d0b8da1">TCPSocket::CallbackInterface</a>.</p>

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00637">637</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    peer_info&amp; peer = <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[(long)yourPtr];
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;TCP connection to peer &quot;</span> &lt;&lt; peer.peerIP &lt;&lt; <span class="stringliteral">&quot; broken\n&quot;</span>;

    ASSERT(<span class="keyword">false</span>);

    <span class="comment">// FIXME what now? reconnect after a delay?</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8b0190937343b4847d6cbc830f15b2ca"></a><!-- doxytag: member="LDP::socketPeerClosed" ref="a8b0190937343b4847d6cbc830f15b2ca" args="(int connId, void *yourPtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a8b0190937343b4847d6cbc830f15b2ca">LDP::socketPeerClosed</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>yourPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_t_c_p_socket_1_1_callback_interface.html#a77899a66e256304949deb2bfd7d820c7">TCPSocket::CallbackInterface</a>.</p>

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00610">610</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    peer_info&amp; peer = <a class="code" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">myPeers</a>[(long)yourPtr];
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Peer &quot;</span> &lt;&lt; peer.peerIP &lt;&lt; <span class="stringliteral">&quot; closed TCP connection\n&quot;</span>;

    ASSERT(<span class="keyword">false</span>);

<span class="comment">/*</span>
<span class="comment">    // close the connection (if not already closed)</span>
<span class="comment">    if (socket.getState()==TCPSocket::PEER_CLOSED)</span>
<span class="comment">    {</span>
<span class="comment">        EV &lt;&lt; &quot;remote TCP closed, closing here as well\n&quot;;</span>
<span class="comment">        close();</span>
<span class="comment">    }</span>
<span class="comment">*/</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="af37813ef12cecdb4c52ead27c251c23f"></a><!-- doxytag: member="LDP::socketStatusArrived" ref="af37813ef12cecdb4c52ead27c251c23f" args="(int connId, void *yourPtr, TCPStatusInfo *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="class_l_d_p.html#af37813ef12cecdb4c52ead27c251c23f">LDP::socketStatusArrived</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>yourPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_c_p_status_info.html">TCPStatusInfo</a> *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_t_c_p_socket_1_1_callback_interface.html#a8299015159dbe4f70075d1a2e4ed2407">TCPSocket::CallbackInterface</a>.</p>

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00205">205</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keyword">delete</span> status;}
</pre></div>
</div>
</div>
<a class="anchor" id="a33bd46c81cf3f06f6f082c9d67ff58c5"></a><!-- doxytag: member="LDP::updateFecList" ref="a33bd46c81cf3f06f6f082c9d67ff58c5" args="(IPAddress nextHop)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a33bd46c81cf3f06f6f082c9d67ff58c5">LDP::updateFecList</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>nextHop</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00384">384</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00411">processHelloTimeout()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00590">socketEstablished()</a>.</p>
<div class="fragment"><pre class="fragment">{
    FecVector::iterator it;
    <span class="keywordflow">for</span> (it = <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.begin(); it != <a class="code" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">fecList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;nextHop != nextHop)
            <span class="keywordflow">continue</span>;

        <a class="code" href="class_l_d_p.html#a9ebd9c14dc3c8b3818252dad37dcc5a5">updateFecListEntry</a>(*it);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9ebd9c14dc3c8b3818252dad37dcc5a5"></a><!-- doxytag: member="LDP::updateFecListEntry" ref="a9ebd9c14dc3c8b3818252dad37dcc5a5" args="(fec_t oldItem)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_l_d_p.html#a9ebd9c14dc3c8b3818252dad37dcc5a5">LDP::updateFecListEntry</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_l_d_p_1_1fec__t.html">LDP::fec_t</a>&#160;</td>
          <td class="paramname"><em>oldItem</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8cc_source.html#l00201">201</a> of file <a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l01057">processLABEL_WITHDRAW()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00262">rebuildFecList()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00384">updateFecList()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// do we have mapping from downstream?</span>
    FecBindVector::iterator dit = <a class="code" href="class_l_d_p.html#ab4e2317f84829818f0e37149da27853c">findFecEntry</a>(<a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>, oldItem.<a class="code" href="struct_l_d_p_1_1fec__t.html#afc947259edf916031b6a940e0cd64ae5">fecid</a>, oldItem.<a class="code" href="struct_l_d_p_1_1fec__t.html#a1a70d4a30cc8629549ffe3948c90f750">nextHop</a>);

    <span class="comment">// is next hop our LDP peer?</span>
    <span class="keywordtype">bool</span> ER = <a class="code" href="class_l_d_p.html#a43170c3c37870c56f321b8a2e24ec420">findPeerSocket</a>(oldItem.<a class="code" href="struct_l_d_p_1_1fec__t.html#a1a70d4a30cc8629549ffe3948c90f750">nextHop</a>)==NULL;

    ASSERT(!(ER &amp;&amp; dit != <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.end())); <span class="comment">// can&#39;t be egress and have mapping at the same time</span>

    <span class="comment">// adjust upstream mappings</span>
    FecBindVector::iterator uit;
    <span class="keywordflow">for</span> (uit = <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.begin(); uit != <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.end();)
    {
        <span class="keywordflow">if</span> (uit-&gt;fecid != oldItem.<a class="code" href="struct_l_d_p_1_1fec__t.html#afc947259edf916031b6a940e0cd64ae5">fecid</a>)
        {
            uit++;
            <span class="keywordflow">continue</span>;
        }

        std::string inInterface = <a class="code" href="class_l_d_p.html#ab124d80cf623c4a5d4551075612b1243">findInterfaceFromPeerAddr</a>(uit-&gt;peer);
        std::string outInterface = <a class="code" href="class_l_d_p.html#ab124d80cf623c4a5d4551075612b1243">findInterfaceFromPeerAddr</a>(oldItem.<a class="code" href="struct_l_d_p_1_1fec__t.html#a1a70d4a30cc8629549ffe3948c90f750">nextHop</a>);
        <span class="keywordflow">if</span> (ER)
        {
            <span class="comment">// we are egress, that&#39;s easy:</span>
            <a class="code" href="_l_i_b_table_8h.html#a40d505abe4d03bca1c9776ebb1a874e5">LabelOpVector</a> outLabel = <a class="code" href="class_l_i_b_table.html#ad7eebe93833f85b136e60bc6ac30941e">LIBTable::popLabel</a>();
            uit-&gt;label = <a class="code" href="class_l_d_p.html#ad01cfb57e93718e4bcb371baa1b40b2c">lt</a>-&gt;<a class="code" href="class_l_i_b_table.html#a6599a694b9035a18dbc01bd0c52b54f7">installLibEntry</a>(uit-&gt;label, inInterface, outLabel, outInterface, <a class="code" href="_l_d_p_8h.html#a819e3794dd985814c77459acdb71042f">LDP_USER_TRAFFIC</a>);

            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;installed (egress) LIB entry inLabel=&quot;</span> &lt;&lt; uit-&gt;label &lt;&lt; <span class="stringliteral">&quot; inInterface=&quot;</span> &lt;&lt; inInterface &lt;&lt;
                    <span class="stringliteral">&quot; outLabel=&quot;</span> &lt;&lt; outLabel &lt;&lt; <span class="stringliteral">&quot; outInterface=&quot;</span> &lt;&lt; outInterface &lt;&lt; endl;
            uit++;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dit != <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.end())
        {
            <span class="comment">// we have mapping from DS, that&#39;s easy</span>
            <a class="code" href="_l_i_b_table_8h.html#a40d505abe4d03bca1c9776ebb1a874e5">LabelOpVector</a> outLabel = <a class="code" href="class_l_i_b_table.html#adc5fdcd5d807e663b467ff91e719873f">LIBTable::swapLabel</a>(dit-&gt;label);
            uit-&gt;label = <a class="code" href="class_l_d_p.html#ad01cfb57e93718e4bcb371baa1b40b2c">lt</a>-&gt;<a class="code" href="class_l_i_b_table.html#a6599a694b9035a18dbc01bd0c52b54f7">installLibEntry</a>(uit-&gt;label, inInterface, outLabel, outInterface, <a class="code" href="_l_d_p_8h.html#a819e3794dd985814c77459acdb71042f">LDP_USER_TRAFFIC</a>);

            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;installed LIB entry inLabel=&quot;</span> &lt;&lt; uit-&gt;label &lt;&lt; <span class="stringliteral">&quot; inInterface=&quot;</span> &lt;&lt; inInterface &lt;&lt;
                    <span class="stringliteral">&quot; outLabel=&quot;</span> &lt;&lt; outLabel &lt;&lt; <span class="stringliteral">&quot; outInterface=&quot;</span> &lt;&lt; outInterface &lt;&lt; endl;
            uit++;
        }
        <span class="keywordflow">else</span>
        {
            <span class="comment">// no mapping from DS, withdraw mapping US</span>
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending withdraw message upstream&quot;</span> &lt;&lt; endl;
            <a class="code" href="class_l_d_p.html#a3aade2e69231697175fe874a2ef9d2b2">sendMapping</a>(<a class="code" href="_l_d_p_packet__m_8h.html#a0427916c08194b31d2adf5da83f635b3a7fd292325bd8d0d4a4d466f1e969c494">LABEL_WITHDRAW</a>, uit-&gt;peer, uit-&gt;label, oldItem.<a class="code" href="struct_l_d_p_1_1fec__t.html#a56c9f3a1e36f0a59c7e624cf5c3592dc">addr</a>, oldItem.<a class="code" href="struct_l_d_p_1_1fec__t.html#a61ca593ecfffd6a5a13466623d3f8ea8">length</a>);

            <span class="comment">// remove from US mappings</span>
            uit = <a class="code" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">fecUp</a>.erase(uit);
        }
    }

    <span class="keywordflow">if</span> (!ER &amp;&amp; dit == <a class="code" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">fecDown</a>.end())
    {
        <span class="comment">// and ask DS for mapping</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending request message downstream&quot;</span> &lt;&lt; endl;
        <a class="code" href="class_l_d_p.html#a27a71323af2adb9a34afc88393757312">sendMappingRequest</a>(oldItem.<a class="code" href="struct_l_d_p_1_1fec__t.html#a1a70d4a30cc8629549ffe3948c90f750">nextHop</a>, oldItem.<a class="code" href="struct_l_d_p_1_1fec__t.html#a56c9f3a1e36f0a59c7e624cf5c3592dc">addr</a>, oldItem.<a class="code" href="struct_l_d_p_1_1fec__t.html#a61ca593ecfffd6a5a13466623d3f8ea8">length</a>);
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ae1b59d4f467febb09406e13f610f7c7c"></a><!-- doxytag: member="LDP::fecDown" ref="ae1b59d4f467febb09406e13f610f7c7c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_l_d_p.html#ac4dfef44f74ce936740e748b38e3fbb9">FecBindVector</a> <a class="el" href="class_l_d_p.html#ae1b59d4f467febb09406e13f610f7c7c">LDP::fecDown</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00106">106</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01186">lookupLabel()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00411">processHelloTimeout()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01101">processLABEL_MAPPING()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00921">processLABEL_REQUEST()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01057">processLABEL_WITHDRAW()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00262">rebuildFecList()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00201">updateFecListEntry()</a>.</p>

</div>
</div>
<a class="anchor" id="a9e200f70feb90376616a54cc2f097495"></a><!-- doxytag: member="LDP::fecList" ref="a9e200f70feb90376616a54cc2f097495" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_l_d_p.html#a8885142cabdbcdfb12cb843004e106b9">FecVector</a> <a class="el" href="class_l_d_p.html#a9e200f70feb90376616a54cc2f097495">LDP::fecList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00102">102</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01186">lookupLabel()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01101">processLABEL_MAPPING()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01017">processLABEL_RELEASE()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00921">processLABEL_REQUEST()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01057">processLABEL_WITHDRAW()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00860">processNOTIFICATION()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00262">rebuildFecList()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00384">updateFecList()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a68ff892f3bf90bf48be17ab784ab68"></a><!-- doxytag: member="LDP::fecUp" ref="a4a68ff892f3bf90bf48be17ab784ab68" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_l_d_p.html#ac4dfef44f74ce936740e748b38e3fbb9">FecBindVector</a> <a class="el" href="class_l_d_p.html#a4a68ff892f3bf90bf48be17ab784ab68">LDP::fecUp</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00104">104</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00411">processHelloTimeout()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01101">processLABEL_MAPPING()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01017">processLABEL_RELEASE()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00921">processLABEL_REQUEST()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00262">rebuildFecList()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00201">updateFecListEntry()</a>.</p>

</div>
</div>
<a class="anchor" id="a64dabef28e6cf564b2cdfa47f11e31d5"></a><!-- doxytag: member="LDP::helloInterval" ref="a64dabef28e6cf564b2cdfa47f11e31d5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_l_d_p.html#a64dabef28e6cf564b2cdfa47f11e31d5">LDP::helloInterval</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00099">99</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00143">handleMessage()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="adc72dc310e10bc94348b8ba0441730bd"></a><!-- doxytag: member="LDP::holdTime" ref="adc72dc310e10bc94348b8ba0441730bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_l_d_p.html#adc72dc310e10bc94348b8ba0441730bd">LDP::holdTime</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00098">98</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00484">processLDPHello()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00396">sendHelloTo()</a>.</p>

</div>
</div>
<a class="anchor" id="ae0de7c03b5ac9168386ed3cd6f920c3e"></a><!-- doxytag: member="LDP::ift" ref="ae0de7c03b5ac9168386ed3cd6f920c3e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_interface_table.html">IInterfaceTable</a>* <a class="el" href="class_l_d_p.html#ae0de7c03b5ac9168386ed3cd6f920c3e">LDP::ift</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00116">116</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00723">findPeerAddrFromInterface()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00484">processLDPHello()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00262">rebuildFecList()</a>.</p>

</div>
</div>
<a class="anchor" id="ad01cfb57e93718e4bcb371baa1b40b2c"></a><!-- doxytag: member="LDP::lt" ref="ad01cfb57e93718e4bcb371baa1b40b2c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_l_i_b_table.html">LIBTable</a>* <a class="el" href="class_l_d_p.html#ad01cfb57e93718e4bcb371baa1b40b2c">LDP::lt</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00118">118</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01101">processLABEL_MAPPING()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01017">processLABEL_RELEASE()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00921">processLABEL_REQUEST()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00262">rebuildFecList()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00201">updateFecListEntry()</a>.</p>

</div>
</div>
<a class="anchor" id="aa95d15f32ce708d1cc9817586ad05857"></a><!-- doxytag: member="LDP::maxFecid" ref="aa95d15f32ce708d1cc9817586ad05857" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_l_d_p.html#aa95d15f32ce708d1cc9817586ad05857">LDP::maxFecid</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00129">129</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00262">rebuildFecList()</a>.</p>

</div>
</div>
<a class="anchor" id="ac6b7a183f4c0b9b0ee62844602c81234"></a><!-- doxytag: member="LDP::myPeers" ref="ac6b7a183f4c0b9b0ee62844602c81234" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_l_d_p.html#aac430f243de69caa1cc37820afd1e9bc">PeerVector</a> <a class="el" href="class_l_d_p.html#ac6b7a183f4c0b9b0ee62844602c81234">LDP::myPeers</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00111">111</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l01160">findPeer()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00723">findPeerAddrFromInterface()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01168">findPeerSocket()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00544">openTCPConnectionToPeer()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00411">processHelloTimeout()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00484">processLDPHello()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00556">processMessageFromTCP()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00627">socketClosed()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00601">socketDataArrived()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00590">socketEstablished()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00637">socketFailure()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00610">socketPeerClosed()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00089">~LDP()</a>.</p>

</div>
</div>
<a class="anchor" id="a6cd3cdeb303dcbcd51acecae0615ffbd"></a><!-- doxytag: member="LDP::nb" ref="a6cd3cdeb303dcbcd51acecae0615ffbd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_notification_board.html">NotificationBoard</a>* <a class="el" href="class_l_d_p.html#a6cd3cdeb303dcbcd51acecae0615ffbd">LDP::nb</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00120">120</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l01247">announceLinkChange()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a057aa332bfc1ddcbc2d66e73de161af9"></a><!-- doxytag: member="LDP::pending" ref="a057aa332bfc1ddcbc2d66e73de161af9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_l_d_p.html#a6760a0b95012016f5c82715e458bdc86">PendingVector</a> <a class="el" href="class_l_d_p.html#a057aa332bfc1ddcbc2d66e73de161af9">LDP::pending</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00108">108</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, <a class="el" href="_l_d_p_8cc_source.html#l01101">processLABEL_MAPPING()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00921">processLABEL_REQUEST()</a>.</p>

</div>
</div>
<a class="anchor" id="a7eb3dc232661ebe9a2dcaf681f219aae"></a><!-- doxytag: member="LDP::rt" ref="a7eb3dc232661ebe9a2dcaf681f219aae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_routing_table.html">IRoutingTable</a>* <a class="el" href="class_l_d_p.html#a7eb3dc232661ebe9a2dcaf681f219aae">LDP::rt</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00117">117</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00762">findInterfaceFromPeerAddr()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00723">findPeerAddrFromInterface()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00689">locateNextHop()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00544">openTCPConnectionToPeer()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00411">processHelloTimeout()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00484">processLDPHello()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00262">rebuildFecList()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00396">sendHelloTo()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00841">sendMapping()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00184">sendMappingRequest()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00822">sendNotify()</a>.</p>

</div>
</div>
<a class="anchor" id="a326553c22a6176ba6ee7afcb4647815e"></a><!-- doxytag: member="LDP::sendHelloMsg" ref="a326553c22a6176ba6ee7afcb4647815e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_l_d_p.html#a326553c22a6176ba6ee7afcb4647815e">LDP::sendHelloMsg</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00127">127</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00143">handleMessage()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00084">LDP()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00089">~LDP()</a>.</p>

</div>
</div>
<a class="anchor" id="ae42af8d69e1e21c9dc7ac7f6fe7a35bc"></a><!-- doxytag: member="LDP::serverSocket" ref="ae42af8d69e1e21c9dc7ac7f6fe7a35bc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p_socket.html">TCPSocket</a> <a class="el" href="class_l_d_p.html#ae42af8d69e1e21c9dc7ac7f6fe7a35bc">LDP::serverSocket</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00123">123</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a168d3444b4455a308d211a24b089b5a4"></a><!-- doxytag: member="LDP::socketMap" ref="a168d3444b4455a308d211a24b089b5a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p_socket_map.html">TCPSocketMap</a> <a class="el" href="class_l_d_p.html#a168d3444b4455a308d211a24b089b5a4">LDP::socketMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00124">124</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00544">openTCPConnectionToPeer()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00556">processMessageFromTCP()</a>.</p>

</div>
</div>
<a class="anchor" id="a0acc2a4c56957b0b30f0e8a6b2c2075f"></a><!-- doxytag: member="LDP::tedmod" ref="a0acc2a4c56957b0b30f0e8a6b2c2075f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_e_d.html">TED</a>* <a class="el" href="class_l_d_p.html#a0acc2a4c56957b0b30f0e8a6b2c2075f">LDP::tedmod</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00119">119</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, <a class="el" href="_l_d_p_8cc_source.html#l00411">processHelloTimeout()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00484">processLDPHello()</a>.</p>

</div>
</div>
<a class="anchor" id="a70faa45ced5c6b6f18c5015bae134956"></a><!-- doxytag: member="LDP::udpSocket" ref="a70faa45ced5c6b6f18c5015bae134956" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_u_d_p_socket.html">UDPSocket</a> <a class="el" href="class_l_d_p.html#a70faa45ced5c6b6f18c5015bae134956">LDP::udpSocket</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_l_d_p_8h_source.html#l00122">122</a> of file <a class="el" href="_l_d_p_8h_source.html">LDP.h</a>.</p>

<p>Referenced by <a class="el" href="_l_d_p_8cc_source.html#l00099">initialize()</a>, and <a class="el" href="_l_d_p_8cc_source.html#l00396">sendHelloTo()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_l_d_p_8h_source.html">LDP.h</a></li>
<li><a class="el" href="_l_d_p_8cc_source.html">LDP.cc</a></li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_l_d_p.html">LDP</a>      </li>

    <li class="footer">Generated on Thu Aug 30 2012 22:56:50 for INET Framework for OMNeT++/OMNEST by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
