<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: RSVP Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_r_s_v_p.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">RSVP Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="RSVP" --><!-- doxytag: inherits="IScriptable" -->
<p><code>#include &lt;RSVP.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for RSVP:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_r_s_v_p.png" usemap="#RSVP_map" alt=""/>
  <map id="RSVP_map" name="RSVP_map">
<area href="class_i_scriptable.html" alt="IScriptable" shape="rect" coords="0,0,72,24"/>
</map>
 </div></div>

<p><a href="class_r_s_v_p-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_r_s_v_p_1_1_hello_state__t.html">HelloState_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_r_s_v_p_1_1traffic__path__t.html">traffic_path_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_r_s_v_p_1_1traffic__session__t.html">traffic_session_t</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#ad355cd8179b4c281f7164a498c9bb43e">RSVP</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#aca71f498907770d708d6be9a4480522a">~RSVP</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::vector<br class="typebreak"/>
&lt; <a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#aa2a110dcc9fd3eb0f59fe5d4be909961">PSBVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::vector<br class="typebreak"/>
&lt; <a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a0f8968a708f4b7d59fe5d714611df147">RSBVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="struct_r_s_v_p_1_1_hello_state__t.html">HelloState_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#ab37d8b4656962b40e0e3d4ead1b09652">HelloVector</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a6393538e367792874a6e1a9d9a245ded">processSignallingMessage</a> (SignallingMsg *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a18f4a987254edd684d0d57345c818c81">processPSB_TIMER</a> (PsbTimerMsg *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a5bc9ab7d3a8b3db1c563d7e7adddb8d6">processPSB_TIMEOUT</a> (PsbTimeoutMsg *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a7b967a2ab4a53edc0bdd12c8ad3a4c99">processRSB_REFRESH_TIMER</a> (RsbRefreshTimerMsg *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a7e760e4263df7614b1dfbea8e39cc8f3">processRSB_COMMIT_TIMER</a> (RsbCommitTimerMsg *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a2fc38252a7b31028e80b360fc8dc7af3">processRSB_TIMEOUT</a> (RsbTimeoutMsg *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a5c7ef8c3f1f0a9b7061f499891a82ad6">processHELLO_TIMER</a> (HelloTimerMsg *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">processHELLO_TIMEOUT</a> (HelloTimeoutMsg *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a046faf4019fa1dd31f24ee445236236b">processPATH_NOTIFY</a> (PathNotifyMsg *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a604c7cdcbec35b1c1facf476ddc27eb9">processRSVPMessage</a> (RSVPMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a4248b4a0ff4175b4be496ec30aee8672">processHelloMsg</a> (<a class="el" href="class_r_s_v_p_hello_msg.html">RSVPHelloMsg</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">processPathMsg</a> (<a class="el" href="class_r_s_v_p_path_msg.html">RSVPPathMsg</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#aaebd61f0dcf0f517e95c4b1e81fea967">processResvMsg</a> (<a class="el" href="class_r_s_v_p_resv_msg.html">RSVPResvMsg</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a9d40c6ab5084f41b18645183f85fecc9">processPathTearMsg</a> (<a class="el" href="class_r_s_v_p_path_tear.html">RSVPPathTear</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#aaa1b0102445119825a264bf187aca6e9">processPathErrMsg</a> (<a class="el" href="class_r_s_v_p_path_error.html">RSVPPathError</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a4c582acc45b47942f56a34aa35fcfc70">createPSB</a> (<a class="el" href="class_r_s_v_p_path_msg.html">RSVPPathMsg</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a46e933eb87d8a3b105a313a0e48403a3">createIngressPSB</a> (const <a class="el" href="struct_r_s_v_p_1_1traffic__session__t.html">traffic_session_t</a> &amp;session, const <a class="el" href="struct_r_s_v_p_1_1traffic__path__t.html">traffic_path_t</a> &amp;path)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a43b1c666eee1f02f7070d7b39e3dea0f">removePSB</a> (<a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *psb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#ad53a7a49e12f3cc0ff339e20624406fe">createRSB</a> (<a class="el" href="class_r_s_v_p_resv_msg.html">RSVPResvMsg</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#af34403ca300fb9425d67e609c7bbf9a3">createEgressRSB</a> (<a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *psb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a2d374e27ad177a0e0e0500deaf1affb7">updateRSB</a> (<a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *rsb, <a class="el" href="class_r_s_v_p_resv_msg.html">RSVPResvMsg</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#af0469af2686bf9440e3d7320c57bfb6f">removeRSB</a> (<a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *rsb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a0a010c3a16c0b7fbc37dec6368d9ad03">removeRsbFilter</a> (<a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *rsb, unsigned int index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#acc0978a512bc47c6cbeea226904a4e51">refreshPath</a> (<a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *psbEle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a8745c357a38f4ab3b5c39668b5498820">refreshResv</a> (<a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *rsbEle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#af84a7ab872ddde72e4e6394c904285ab">refreshResv</a> (<a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *rsbEle, <a class="el" href="class_i_p_address.html">IPAddress</a> PHOP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv</a> (<a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *rsb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a130138413206f03179fc63d56f4937cd">scheduleRefreshTimer</a> (<a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *psbEle, simtime_t delay)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#ac4faa2c6f7a952138fb145bc948c79eb">scheduleTimeout</a> (<a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *psbEle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a67c62268de3b1946288d7f2c451649b0">scheduleRefreshTimer</a> (<a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *rsbEle, simtime_t delay)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a269cab6db09df7ab124076afe9515a6f">scheduleCommitTimer</a> (<a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *rsbEle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a8d7428629dfacb146e7b6c6608ae21d8">scheduleTimeout</a> (<a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *rsbEle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#aede65339bca2fcd134158dd9784100e2">sendPathErrorMessage</a> (<a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *psb, int errCode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a39d87f7b6317e6a613fd0dee613ab34e">sendPathErrorMessage</a> (SessionObj_t session, SenderTemplateObj_t sender, SenderTspecObj_t tspec, <a class="el" href="class_i_p_address.html">IPAddress</a> nextHop, int errCode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#ab1e3e1ec1c7be3d59e249a147f3f3862">sendPathTearMessage</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> peerIP, const SessionObj_t &amp;session, const SenderTemplateObj_t &amp;sender, <a class="el" href="class_i_p_address.html">IPAddress</a> LIH, <a class="el" href="class_i_p_address.html">IPAddress</a> NHOP, bool force)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a472ceb4e889ba0fc93649dff8e5d549a">sendPathNotify</a> (int handler, const SessionObj_t &amp;session, const SenderTemplateObj_t &amp;sender, int status, simtime_t delay)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a56c68314c8b1e8b82370416d2b2f4785">setupHello</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#ad50bb2638d5ca3d9bc42b3364cffabbb">startHello</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> peer, simtime_t delay)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a771e852915d4521e65a3d243bdf1a82c">recoveryEvent</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> peer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a58055c8fd6f3b98c57ef68adeaa009e3">allocateResource</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> OI, const SessionObj_t &amp;session, double bandwidth)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a933ffa437ba9f3cef9efdfc5f1ac18a9">preempt</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> OI, int priority, double bandwidth)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a05e7433548bd2ecc502fa40210d85f46">doCACCheck</a> (const SessionObj_t &amp;session, const SenderTspecObj_t &amp;tspec, <a class="el" href="class_i_p_address.html">IPAddress</a> OI)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#ab63d5bdece74e8218d703ca07604dbe6">announceLinkChange</a> (int tedlinkindex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#afe54ffd483063082234277edce5e792d">sendToIP</a> (cMessage *msg, <a class="el" href="class_i_p_address.html">IPAddress</a> destAddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a74c8cb3303ae62d7e118cbacacf0c5e0">evalNextHopInterface</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> destAddr, const EroVector &amp;ERO, <a class="el" href="class_i_p_address.html">IPAddress</a> &amp;OI)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#adda3d6bf44e6f8181f0f2083f243474d">findPSB</a> (const SessionObj_t &amp;session, const SenderTemplateObj_t &amp;sender)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a7741a01ced48d4fbf371cb7b846a27aa">findRSB</a> (const SessionObj_t &amp;session, const SenderTemplateObj_t &amp;sender, unsigned int &amp;index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a15d8d2605257b63906833bf6dcb7e7f9">findPsbById</a> (int id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a96e4fae87f154aec8efed1f306864d81">findRsbById</a> (int id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct_r_s_v_p_1_1traffic__session__t.html">traffic_session_t</a> &gt;<br class="typebreak"/>
::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#adbc9840e5bb15c37459aacb83385bdc0">findSession</a> (const SessionObj_t &amp;session)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct_r_s_v_p_1_1traffic__path__t.html">traffic_path_t</a> &gt;<br class="typebreak"/>
::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a92c0c4053e1f2d4a7fa85fed30d9a49d">findPath</a> (<a class="el" href="struct_r_s_v_p_1_1traffic__session__t.html">traffic_session_t</a> *session, const SenderTemplateObj_t &amp;sender)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="struct_r_s_v_p_1_1_hello_state__t.html">HelloState_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a04c45fcf64189ff23bc0233639956459">findHello</a> (<a class="el" href="class_i_p_address.html">IPAddress</a> peer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a95acc5695ef5d439aec6996abfb98a0c">print</a> (<a class="el" href="class_r_s_v_p_path_msg.html">RSVPPathMsg</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a90209c6a16793748ba35624d55ec167e">print</a> (<a class="el" href="class_r_s_v_p_resv_msg.html">RSVPResvMsg</a> *r)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a7afe215d5b5f46066a7d2db44ac93369">readTrafficFromXML</a> (const cXMLElement *<a class="el" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#adada9d53651da0e8c535e7ed47f931fd">readTrafficSessionFromXML</a> (const cXMLElement *session)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EroVector&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a14bfd32e0426538ba9b59a18037bb57a">readTrafficRouteFromXML</a> (const cXMLElement *route)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a820c09dd3002f2309aeaa1f30d092887">createPath</a> (const SessionObj_t &amp;session, const SenderTemplateObj_t &amp;sender)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">pathProblem</a> (<a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *psb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#aa8c17ae4390aeedc6b6d1bc6e0743c5f">addSession</a> (const cXMLElement &amp;node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a1578adc0aa64e000a877ab117a3e9060">delSession</a> (const cXMLElement &amp;node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a09621c3f70738316d5cc1380ed54212b">getInLabel</a> (const SessionObj_t &amp;session, const SenderTemplateObj_t &amp;sender)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a4c9e7e6120185700741ea3394ae65c0a">numInitStages</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize</a> (int stage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a4772469f02e97f0d99a3c00f298322dd">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a33de1da9c058e57354d8c76a026ce036">processCommand</a> (const cXMLElement &amp;node)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct_r_s_v_p_1_1traffic__session__t.html">traffic_session_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#af5bdcd75e4a984969f22119c8cb4d89b">helloInterval</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a5873d10d15860ed9e24e941f851f4b71">helloTimeout</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a469e284ac5acfa70db603d70691b06ef">retryInterval</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_e_d.html">TED</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_routing_table.html">IRoutingTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a9f89cdfc58368bf8e0c491b7da2dd113">rt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_interface_table.html">IInterfaceTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a52533534d5e3afbfc42030440071a5d3">ift</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_l_i_b_table.html">LIBTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#ad137623f6252e3398084176dc311885f">lt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_notification_board.html">NotificationBoard</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a0f1e35ac657ccaeca38a235d1b4a3414">nb</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_r_s_v_p_classifier.html">IRSVPClassifier</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a44fd3dc334665b246ce0a555cb35e34f">rpct</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a18c51012884262a7a68bc2ef3fee90a1">maxPsbId</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a8df043f6a88c29e65a22c37ec7294ff0">maxRsbId</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a9cd7607aca27a1351bb82ddc7f37937f">maxSrcInstance</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_r_s_v_p.html#aa2a110dcc9fd3eb0f59fe5d4be909961">PSBVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_r_s_v_p.html#a0f8968a708f4b7d59fe5d714611df147">RSBVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_r_s_v_p.html#ab37d8b4656962b40e0e3d4ead1b09652">HelloVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#a1070041b2d075e1d4c8cbf18f0fe2faf">HelloList</a></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_r_s_v_p.html#aab8856a7428469eb2467b9a30355b2fd">SimpleClassifier</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>TODO documentation </p>
</div><hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="ab37d8b4656962b40e0e3d4ead1b09652"></a><!-- doxytag: member="RSVP::HelloVector" ref="ab37d8b4656962b40e0e3d4ead1b09652" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="struct_r_s_v_p_1_1_hello_state__t.html">HelloState_t</a>&gt; <a class="el" href="class_r_s_v_p.html#ab37d8b4656962b40e0e3d4ead1b09652">RSVP::HelloVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa2a110dcc9fd3eb0f59fe5d4be909961"></a><!-- doxytag: member="RSVP::PSBVector" ref="aa2a110dcc9fd3eb0f59fe5d4be909961" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a>&gt; <a class="el" href="class_r_s_v_p.html#aa2a110dcc9fd3eb0f59fe5d4be909961">RSVP::PSBVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0f8968a708f4b7d59fe5d714611df147"></a><!-- doxytag: member="RSVP::RSBVector" ref="a0f8968a708f4b7d59fe5d714611df147" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a>&gt; <a class="el" href="class_r_s_v_p.html#a0f8968a708f4b7d59fe5d714611df147">RSVP::RSBVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad355cd8179b4c281f7164a498c9bb43e"></a><!-- doxytag: member="RSVP::RSVP" ref="ad355cd8179b4c281f7164a498c9bb43e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RSVP::RSVP </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<a class="anchor" id="aca71f498907770d708d6be9a4480522a"></a><!-- doxytag: member="RSVP::~RSVP" ref="aca71f498907770d708d6be9a4480522a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RSVP::~RSVP </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="comment">// TODO cancelAndDelete timers in all data structures</span>
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aa8c17ae4390aeedc6b6d1bc6e0743c5f"></a><!-- doxytag: member="RSVP::addSession" ref="aa8c17ae4390aeedc6b6d1bc6e0743c5f" args="(const cXMLElement &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::addSession </td>
          <td>(</td>
          <td class="paramtype">const cXMLElement &amp;&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a33de1da9c058e57354d8c76a026ce036">processCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();

    <a class="code" href="class_r_s_v_p.html#adada9d53651da0e8c535e7ed47f931fd">readTrafficSessionFromXML</a>(&amp;node);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a58055c8fd6f3b98c57ef68adeaa009e3"></a><!-- doxytag: member="RSVP::allocateResource" ref="a58055c8fd6f3b98c57ef68adeaa009e3" args="(IPAddress OI, const SessionObj_t &amp;session, double bandwidth)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RSVP::allocateResource </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>OI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SessionObj_t &amp;&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>bandwidth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv()</a>, and <a class="el" href="class_r_s_v_p.html#af0469af2686bf9440e3d7320c57bfb6f">removeRSB()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (OI.<a class="code" href="class_i_p_address.html#a7fb3c274d7a8600be890f83c028d5f96">isUnspecified</a>())
        <span class="keywordflow">return</span> <span class="keyword">true</span>;

    <span class="keywordflow">if</span> (!<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a>(OI))
        <span class="keywordflow">return</span> <span class="keyword">true</span>;

    <span class="keywordflow">if</span> (bandwidth == 0.0)
        <span class="keywordflow">return</span> <span class="keyword">true</span>;

    <span class="keywordtype">int</span> setupPri = session.setupPri;
    <span class="keywordtype">int</span> holdingPri = session.holdingPri;

    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aff4add6e86b7bc9ea84079aae0bb3e51">linkIndex</a>(OI);

    <span class="comment">// Note: UnRB[7] &lt;= UnRW[setupPri] &lt;= UnRW[holdingPri] &lt;= BW[0]</span>
    <span class="comment">// UnRW[7] is the actual BW left on the link</span>

    <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[index].UnResvBandwidth[setupPri] &lt; bandwidth)
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p = holdingPri; p &lt; 8; p++)
    {
        <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[index].UnResvBandwidth[p] -= bandwidth;

        <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[index].UnResvBandwidth[p] &lt; 0.0)
            <a class="code" href="class_r_s_v_p.html#a933ffa437ba9f3cef9efdfc5f1ac18a9">preempt</a>(OI, p, -<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[index].UnResvBandwidth[p]);
    }

    <span class="comment">// announce changes</span>

    <a class="code" href="class_r_s_v_p.html#ab63d5bdece74e8218d703ca07604dbe6">announceLinkChange</a>(index);

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab63d5bdece74e8218d703ca07604dbe6"></a><!-- doxytag: member="RSVP::announceLinkChange" ref="ab63d5bdece74e8218d703ca07604dbe6" args="(int tedlinkindex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::announceLinkChange </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tedlinkindex</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a58055c8fd6f3b98c57ef68adeaa009e3">allocateResource()</a>, <a class="el" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">processHELLO_TIMEOUT()</a>, and <a class="el" href="class_r_s_v_p.html#a771e852915d4521e65a3d243bdf1a82c">recoveryEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    TEDChangeInfo d;
    d.setTedLinkIndicesArraySize(1);
    d.setTedLinkIndices(0, tedlinkindex);
    <a class="code" href="class_r_s_v_p.html#a0f1e35ac657ccaeca38a235d1b4a3414">nb</a>-&gt;<a class="code" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba8434e8b760269c6f9680f8fdb45b8a2c">NF_TED_CHANGED</a>, &amp;d);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5418c3bcb4cf57a5965c6a7067b7f678"></a><!-- doxytag: member="RSVP::commitResv" ref="a5418c3bcb4cf57a5965c6a7067b7f678" args="(ResvStateBlock_t *rsb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::commitResv </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>rsb</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a7e760e4263df7614b1dfbea8e39cc8f3">processRSB_COMMIT_TIMER()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;commit reservation (RSB &quot;</span> &lt;&lt; rsb-&gt;id &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;

    <span class="comment">// allocate bandwidth as needed</span>

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;currently allocated: &quot;</span> &lt;&lt; rsb-&gt;Flowspec_Object &lt;&lt; endl;

    <span class="keywordflow">while</span>(<span class="keyword">true</span>)
    {
        <span class="comment">// remove RSB if empty</span>

        <span class="keywordflow">if</span> (rsb-&gt;FlowDescriptor.size() == 0)
        {
            <a class="code" href="class_r_s_v_p.html#af0469af2686bf9440e3d7320c57bfb6f">removeRSB</a>(rsb);
            <span class="keywordflow">return</span>;
        }

        FlowSpecObj_t req;
        req.req_bandwidth = 0.0;

        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxFlowIndex;
        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; rsb-&gt;FlowDescriptor.size(); i++)
        {
            <span class="keywordflow">if</span> (rsb-&gt;FlowDescriptor[i].Flowspec_Object.req_bandwidth &gt; req.req_bandwidth)
            {
                req.req_bandwidth = rsb-&gt;FlowDescriptor[i].Flowspec_Object.req_bandwidth;
                maxFlowIndex = i;
            }
        }

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;currently required: &quot;</span> &lt;&lt; req &lt;&lt; endl;

        <span class="keywordtype">double</span> needed = req.req_bandwidth - rsb-&gt;Flowspec_Object.req_bandwidth;

        <span class="keywordflow">if</span> (needed != 0.0)
        {
            <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#a58055c8fd6f3b98c57ef68adeaa009e3">allocateResource</a>(rsb-&gt;OI, rsb-&gt;Session_Object, needed))
            {
                <span class="comment">// allocated (deallocated) successfully</span>

                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;additional bandwidth of &quot;</span> &lt;&lt; needed &lt;&lt; <span class="stringliteral">&quot; allocated sucessfully&quot;</span> &lt;&lt; endl;

                rsb-&gt;Flowspec_Object.req_bandwidth += needed;
            }
            <span class="keywordflow">else</span>
            {
                <span class="comment">// bandwidth not available</span>

                ASSERT(rsb-&gt;inLabelVector.size() == rsb-&gt;FlowDescriptor.size());

                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;not enough bandwidth to accommodate this RSB&quot;</span> &lt;&lt; endl;

                <span class="keywordtype">int</span> lspid = rsb-&gt;FlowDescriptor[maxFlowIndex].Filter_Spec_Object.Lsp_Id;
                <span class="keywordtype">int</span> oldInLabel = rsb-&gt;inLabelVector[maxFlowIndex];
                PathStateBlock_t *psb = <a class="code" href="class_r_s_v_p.html#adda3d6bf44e6f8181f0f2083f243474d">findPSB</a>(rsb-&gt;Session_Object, (SenderTemplateObj_t&amp;)rsb-&gt;FlowDescriptor[maxFlowIndex].Filter_Spec_Object);

                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing filter lspid=&quot;</span> &lt;&lt; lspid &lt;&lt; <span class="stringliteral">&quot; (max. flow)&quot;</span> &lt;&lt; endl;

                rsb-&gt;FlowDescriptor.erase(rsb-&gt;FlowDescriptor.begin() + maxFlowIndex);
                rsb-&gt;inLabelVector.erase(rsb-&gt;inLabelVector.begin() + maxFlowIndex);

                <span class="keywordflow">if</span> (oldInLabel != -1)
                {
                    <span class="comment">// path already existed, this must be preemption</span>

                    <a class="code" href="class_r_s_v_p.html#aede65339bca2fcd134158dd9784100e2">sendPathErrorMessage</a>(psb, <a class="code" href="_r_s_v_p_8cc.html#ade6fa078d09732210f77de2f6be3aba2">PATH_ERR_PREEMPTED</a>);

                    <a class="code" href="class_r_s_v_p.html#ad137623f6252e3398084176dc311885f">lt</a>-&gt;<a class="code" href="class_l_i_b_table.html#aeaf750f1e663ddd1a5a6e76406ad8a14">removeLibEntry</a>(oldInLabel);
                }
                <span class="keywordflow">else</span>
                {
                    <span class="comment">// path not established yet, report as unfeasible</span>

                    <a class="code" href="class_r_s_v_p.html#aede65339bca2fcd134158dd9784100e2">sendPathErrorMessage</a>(psb, <a class="code" href="_r_s_v_p_8cc.html#aa99604209fc07fe495c4601f85ba8fae">PATH_ERR_UNFEASIBLE</a>);
                }

                <span class="keywordflow">continue</span>;
            }

        }

        <span class="keywordflow">break</span>;
    }

    <span class="comment">// install labels into lib</span>

    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; rsb-&gt;FlowDescriptor.size(); i++)
    {
        <span class="keywordtype">int</span> lspid = rsb-&gt;FlowDescriptor[i].Filter_Spec_Object.Lsp_Id;

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;processing lspid=&quot;</span> &lt;&lt; lspid &lt;&lt; endl;

        PathStateBlock_t *psb = <a class="code" href="class_r_s_v_p.html#adda3d6bf44e6f8181f0f2083f243474d">findPSB</a>(rsb-&gt;Session_Object, rsb-&gt;FlowDescriptor[i].Filter_Spec_Object);

        <a class="code" href="_l_i_b_table_8h.html#a40d505abe4d03bca1c9776ebb1a874e5">LabelOpVector</a> outLabel;
        std::string inInterface, outInterface;

        <span class="keywordtype">bool</span> IR = (psb-&gt;Previous_Hop_Address == <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>);
        <span class="comment">//bool ER = psb-&gt;OutInterface.isUnspecified();</span>
        <span class="keywordflow">if</span> (!IR)
        {
            <a class="code" href="class_i_p_address.html">IPAddress</a> localInf = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aa83e78954a200bcb27bb2404bb5b8b25">getInterfaceAddrByPeerAddress</a>(psb-&gt;Previous_Hop_Address);
            inInterface = <a class="code" href="class_r_s_v_p.html#a9f89cdfc58368bf8e0c491b7da2dd113">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a57e790dfac86432f349e15116e5961d1">getInterfaceByAddress</a>(localInf)-&gt;getName();
        }
        <span class="keywordflow">else</span>
            inInterface = <span class="stringliteral">&quot;any&quot;</span>;

        <span class="comment">// outlabel and outgoing interface</span>

        <a class="code" href="struct_label_op.html">LabelOp</a> lop;

        <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a>(psb-&gt;OutInterface))
        {
            <span class="comment">// regular next hop</span>

            lop.<a class="code" href="struct_label_op.html#a600bcf4f3fffd52d81b9bb0d414a48f6">optcode</a> = IR? <a class="code" href="_l_i_b_table_8h.html#a65b91ade86c62b52fbee5d49482c7e0d">PUSH_OPER</a>: <a class="code" href="_l_i_b_table_8h.html#a987e9fc2a7ff421450ac8779ccbd336f">SWAP_OPER</a>;
            lop.<a class="code" href="struct_label_op.html#a80b1880188a87fb773e25cce4b7e3119">label</a> = rsb-&gt;FlowDescriptor[i].label;
            outLabel.push_back(lop);

            outInterface = <a class="code" href="class_r_s_v_p.html#a9f89cdfc58368bf8e0c491b7da2dd113">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a57e790dfac86432f349e15116e5961d1">getInterfaceByAddress</a>(psb-&gt;OutInterface)-&gt;getName();
        }
        <span class="keywordflow">else</span>
        {
            <span class="comment">// egress router</span>

            lop.<a class="code" href="struct_label_op.html#a80b1880188a87fb773e25cce4b7e3119">label</a> = 0;
            lop.<a class="code" href="struct_label_op.html#a600bcf4f3fffd52d81b9bb0d414a48f6">optcode</a> = <a class="code" href="_l_i_b_table_8h.html#ab10ea02f37621d1407e5fec0b9206ce6">POP_OPER</a>;
            outLabel.push_back(lop);

            outInterface = <span class="stringliteral">&quot;lo0&quot;</span>;

            <span class="keywordflow">if</span> (!<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a>(psb-&gt;Session_Object.DestAddress))
            {
                <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_r_s_v_p.html#a9f89cdfc58368bf8e0c491b7da2dd113">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a0dda4a87779a949284ccead75001fa30">getInterfaceForDestAddr</a>(psb-&gt;Session_Object.DestAddress);
                <span class="keywordflow">if</span> (ie)
                    outInterface = ie-&gt;getName(); <span class="comment">// FIXME why use name to identify an interface?</span>
            }
        }

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;installing label for &quot;</span> &lt;&lt; lspid &lt;&lt; <span class="stringliteral">&quot; outLabel=&quot;</span> &lt;&lt; outLabel &lt;&lt;
            <span class="stringliteral">&quot; outInterface=&quot;</span> &lt;&lt; outInterface &lt;&lt; endl;

        ASSERT(rsb-&gt;inLabelVector.size() == rsb-&gt;FlowDescriptor.size());

        <span class="keywordtype">int</span> inLabel = <a class="code" href="class_r_s_v_p.html#ad137623f6252e3398084176dc311885f">lt</a>-&gt;<a class="code" href="class_l_i_b_table.html#a6599a694b9035a18dbc01bd0c52b54f7">installLibEntry</a>(rsb-&gt;inLabelVector[i], inInterface,
                outLabel, outInterface, psb-&gt;color);

        ASSERT(inLabel &gt;= 0);

        <span class="keywordflow">if</span> (IR &amp;&amp; rsb-&gt;inLabelVector[i] == -1)
        {
            <span class="comment">// path established</span>
            <a class="code" href="class_r_s_v_p.html#a472ceb4e889ba0fc93649dff8e5d549a">sendPathNotify</a>(psb-&gt;handler, psb-&gt;Session_Object, psb-&gt;Sender_Template_Object, PATH_CREATED, 0.0);
        }

        <span class="keywordflow">if</span> (rsb-&gt;inLabelVector[i] != inLabel)
        {
            <span class="comment">// remember our current label</span>
            rsb-&gt;inLabelVector[i] = inLabel;

            <span class="comment">// bind fec</span>
            <a class="code" href="class_r_s_v_p.html#a44fd3dc334665b246ce0a555cb35e34f">rpct</a>-&gt;<a class="code" href="class_i_r_s_v_p_classifier.html#a4351df463434c522af578c9a66bac594">bind</a>(psb-&gt;Session_Object, psb-&gt;Sender_Template_Object, inLabel);
        }

        <span class="comment">// schedule commit of merging backups too...</span>
        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.size(); j++)
        {
            <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>[j].OI != lspid)
                <span class="keywordflow">continue</span>;

            <a class="code" href="class_r_s_v_p.html#a269cab6db09df7ab124076afe9515a6f">scheduleCommitTimer</a>(&amp;<a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>[j]);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af34403ca300fb9425d67e609c7bbf9a3"></a><!-- doxytag: member="RSVP::createEgressRSB" ref="af34403ca300fb9425d67e609c7bbf9a3" args="(PathStateBlock_t *psb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">RSVP::ResvStateBlock_t</a> * RSVP::createEgressRSB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>psb</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">processPathMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ResvStateBlock_t rsbEle;

    rsbEle.id = ++<a class="code" href="class_r_s_v_p.html#a8df043f6a88c29e65a22c37ec7294ff0">maxRsbId</a>;

    rsbEle.timeoutMsg = <span class="keyword">new</span> RsbTimeoutMsg(<span class="stringliteral">&quot;rsb timeout&quot;</span>);
    rsbEle.timeoutMsg-&gt;setId(rsbEle.id);

    rsbEle.refreshTimerMsg = <span class="keyword">new</span> RsbRefreshTimerMsg(<span class="stringliteral">&quot;rsb timer&quot;</span>);
    rsbEle.refreshTimerMsg-&gt;setId(rsbEle.id);

    rsbEle.commitTimerMsg = <span class="keyword">new</span> RsbCommitTimerMsg(<span class="stringliteral">&quot;rsb commit&quot;</span>);
    rsbEle.commitTimerMsg-&gt;setId(rsbEle.id);

    rsbEle.Session_Object = psb-&gt;Session_Object;
    rsbEle.Next_Hop_Address = psb-&gt;Previous_Hop_Address;

    rsbEle.OI = psb-&gt;OutInterface;

    FlowDescriptor_t flow;
    flow.Flowspec_Object = (FlowSpecObj_t&amp;)psb-&gt;Sender_Tspec_Object;
    flow.Filter_Spec_Object = (FilterSpecObj_t&amp;)psb-&gt;Sender_Template_Object;
    flow.label = -1;

    rsbEle.FlowDescriptor.push_back(flow);
    rsbEle.inLabelVector.push_back(-1);

    <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.push_back(rsbEle);
    ResvStateBlock_t *rsb = &amp;(*(<a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.end() - 1));

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;created new (egress) RSB &quot;</span> &lt;&lt; rsb-&gt;id &lt;&lt; endl;

    <span class="keywordflow">return</span> rsb;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a46e933eb87d8a3b105a313a0e48403a3"></a><!-- doxytag: member="RSVP::createIngressPSB" ref="a46e933eb87d8a3b105a313a0e48403a3" args="(const traffic_session_t &amp;session, const traffic_path_t &amp;path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">RSVP::PathStateBlock_t</a> * RSVP::createIngressPSB </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_r_s_v_p_1_1traffic__session__t.html">traffic_session_t</a> &amp;&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_r_s_v_p_1_1traffic__path__t.html">traffic_path_t</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a820c09dd3002f2309aeaa1f30d092887">createPath()</a>.</p>
<div class="fragment"><pre class="fragment">{
    EroVector ERO = path.ERO;

    <span class="keywordflow">while</span>(ERO.size() &gt; 0 &amp;&amp; ERO[0].node == <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>)
    {
        <span class="comment">// remove ourselves from the beginning of the hop list</span>
        ERO.erase(ERO.begin());
    }

    <a class="code" href="class_i_p_address.html">IPAddress</a> OI;

    <span class="keywordflow">if</span> (!<a class="code" href="class_r_s_v_p.html#a74c8cb3303ae62d7e118cbacacf0c5e0">evalNextHopInterface</a>(session.sobj.DestAddress, ERO, OI))
        <span class="keywordflow">return</span> NULL;

    <span class="keywordflow">if</span> (!<a class="code" href="class_r_s_v_p.html#a05e7433548bd2ecc502fa40210d85f46">doCACCheck</a>(session.sobj, path.tspec, OI))
        <span class="keywordflow">return</span> NULL;

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;CACCheck passed, creating PSB&quot;</span> &lt;&lt; endl;

    PathStateBlock_t psbEle;
    psbEle.id = ++<a class="code" href="class_r_s_v_p.html#a18c51012884262a7a68bc2ef3fee90a1">maxPsbId</a>;

    psbEle.timeoutMsg = <span class="keyword">new</span> PsbTimeoutMsg(<span class="stringliteral">&quot;psb timeout&quot;</span>);
    psbEle.timeoutMsg-&gt;setId(psbEle.id);

    psbEle.timerMsg = <span class="keyword">new</span> PsbTimerMsg(<span class="stringliteral">&quot;psb timer&quot;</span>);
    psbEle.timerMsg-&gt;setId(psbEle.id);

    psbEle.Session_Object = session.sobj;
    psbEle.Sender_Template_Object = path.sender;
    psbEle.Sender_Tspec_Object = path.tspec;

    psbEle.Previous_Hop_Address = <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>;

    psbEle.OutInterface = OI;
    psbEle.ERO = ERO;
    psbEle.color = path.color;

    psbEle.handler = path.owner;

    <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.push_back(psbEle);
    PathStateBlock_t *cPSB = &amp;(*(<a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.end() - 1));

    <span class="keywordflow">return</span> cPSB;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a820c09dd3002f2309aeaa1f30d092887"></a><!-- doxytag: member="RSVP::createPath" ref="a820c09dd3002f2309aeaa1f30d092887" args="(const SessionObj_t &amp;session, const SenderTemplateObj_t &amp;sender)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::createPath </td>
          <td>(</td>
          <td class="paramtype">const SessionObj_t &amp;&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SenderTemplateObj_t &amp;&#160;</td>
          <td class="paramname"><em>sender</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a046faf4019fa1dd31f24ee445236236b">processPATH_NOTIFY()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#adda3d6bf44e6f8181f0f2083f243474d">findPSB</a>(session, sender))
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;path (PSB) already exists, doing nothing&quot;</span> &lt;&lt; endl;
        <span class="keywordflow">return</span>;
    }

    <span class="comment">// find entry in traffic database</span>

    std::vector&lt;traffic_session_t&gt;::iterator sit;
    sit = <a class="code" href="class_r_s_v_p.html#adbc9840e5bb15c37459aacb83385bdc0">findSession</a>(session);

    <span class="keywordflow">if</span> (sit == <a class="code" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a>.end())
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;session not found in traffic database, path won&#39;t be created&quot;</span> &lt;&lt; endl;
        <span class="keywordflow">return</span>;
    }

    std::vector&lt;traffic_path_t&gt;::iterator pit;
    pit = <a class="code" href="class_r_s_v_p.html#a92c0c4053e1f2d4a7fa85fed30d9a49d">findPath</a>(&amp;(*sit), sender);

    <span class="keywordflow">if</span> (pit == sit-&gt;paths.end())
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;path doesn&#39;t belong to this session according to our database, doing nothing&quot;</span> &lt;&lt; endl;
        <span class="keywordflow">return</span>;
    }

    PathStateBlock_t *psb = <a class="code" href="class_r_s_v_p.html#a46e933eb87d8a3b105a313a0e48403a3">createIngressPSB</a>(*sit, *pit);
    <span class="keywordflow">if</span> (psb)
    {
        <span class="comment">// PSB successfully created, send path message downstream</span>
        <a class="code" href="class_r_s_v_p.html#a130138413206f03179fc63d56f4937cd">scheduleRefreshTimer</a>(psb, 0.0);
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;ingress PSB couln&#39;t be created&quot;</span> &lt;&lt; endl;

        <span class="comment">// inform the owner of this path</span>
        <a class="code" href="class_r_s_v_p.html#a472ceb4e889ba0fc93649dff8e5d549a">sendPathNotify</a>(pit-&gt;owner, sit-&gt;sobj, pit-&gt;sender, PATH_UNFEASIBLE, 0.0);

        <span class="comment">// remove non-permanent path</span>
        <span class="keywordflow">if</span> (!pit-&gt;permanent)
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing path from traffic database&quot;</span> &lt;&lt; endl;

            sit-&gt;paths.erase(pit--);
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;path is permanent, we will try again later&quot;</span> &lt;&lt; endl;

            <a class="code" href="class_r_s_v_p.html#a472ceb4e889ba0fc93649dff8e5d549a">sendPathNotify</a>(getId(), sit-&gt;sobj, pit-&gt;sender, PATH_RETRY, <a class="code" href="class_r_s_v_p.html#a469e284ac5acfa70db603d70691b06ef">retryInterval</a>);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4c582acc45b47942f56a34aa35fcfc70"></a><!-- doxytag: member="RSVP::createPSB" ref="a4c582acc45b47942f56a34aa35fcfc70" args="(RSVPPathMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">RSVP::PathStateBlock_t</a> * RSVP::createPSB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_r_s_v_p_path_msg.html">RSVPPathMsg</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">processPathMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> EroVector&amp; ERO = msg-&gt;getERO();
    <a class="code" href="class_i_p_address.html">IPAddress</a> destAddr = msg-&gt;getDestAddress();

    <span class="comment">//</span>

    <a class="code" href="class_i_p_address.html">IPAddress</a> OI;

    <span class="keywordflow">if</span> (!<a class="code" href="class_r_s_v_p.html#a74c8cb3303ae62d7e118cbacacf0c5e0">evalNextHopInterface</a>(destAddr, ERO, OI))
        <span class="keywordflow">return</span> NULL;

    <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a>(OI) &amp;&amp; !<a class="code" href="class_r_s_v_p.html#a05e7433548bd2ecc502fa40210d85f46">doCACCheck</a>(msg-&gt;getSession(), msg-&gt;<a class="code" href="class_r_s_v_p_path_msg.html#ae076819f0798afd76bd5ab68453fcdb4">getSenderTspec</a>(), OI))
        <span class="keywordflow">return</span> NULL; <span class="comment">// not enough resources</span>

    PathStateBlock_t psbEle;

    psbEle.id = ++<a class="code" href="class_r_s_v_p.html#a18c51012884262a7a68bc2ef3fee90a1">maxPsbId</a>;

    psbEle.timeoutMsg = <span class="keyword">new</span> PsbTimeoutMsg(<span class="stringliteral">&quot;psb timeout&quot;</span>);
    psbEle.timeoutMsg-&gt;setId(psbEle.id);

    psbEle.timerMsg = <span class="keyword">new</span> PsbTimerMsg(<span class="stringliteral">&quot;psb timer&quot;</span>);
    psbEle.timerMsg-&gt;setId(psbEle.id);

    psbEle.Session_Object = msg-&gt;getSession();
    psbEle.Sender_Template_Object = msg-&gt;<a class="code" href="class_r_s_v_p_path_msg.html#a464ac49e22b9c21e971bf15634ea0626">getSenderTemplate</a>();
    psbEle.Sender_Tspec_Object = msg-&gt;<a class="code" href="class_r_s_v_p_path_msg.html#ae076819f0798afd76bd5ab68453fcdb4">getSenderTspec</a>();

    psbEle.Previous_Hop_Address = msg-&gt;<a class="code" href="class_r_s_v_p_path_msg.html#a3c732fc83aa501ffd914cc1294d2caf0">getNHOP</a>();
    <span class="comment">//psbEle.LIH = msg-&gt;getLIH();</span>

    psbEle.OutInterface = OI;
    psbEle.ERO = ERO;

    psbEle.color = msg-&gt;getColor();
    psbEle.handler = -1;

    <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.push_back(psbEle);
    PathStateBlock_t *cPSB = &amp;(*(<a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.end() - 1));

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;created new PSB &quot;</span> &lt;&lt; cPSB-&gt;id &lt;&lt; endl;

    <span class="keywordflow">return</span> cPSB;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad53a7a49e12f3cc0ff339e20624406fe"></a><!-- doxytag: member="RSVP::createRSB" ref="ad53a7a49e12f3cc0ff339e20624406fe" args="(RSVPResvMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">RSVP::ResvStateBlock_t</a> * RSVP::createRSB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_r_s_v_p_resv_msg.html">RSVPResvMsg</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#aaebd61f0dcf0f517e95c4b1e81fea967">processResvMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ResvStateBlock_t rsbEle;

    rsbEle.id = ++<a class="code" href="class_r_s_v_p.html#a8df043f6a88c29e65a22c37ec7294ff0">maxRsbId</a>;

    rsbEle.timeoutMsg = <span class="keyword">new</span> RsbTimeoutMsg(<span class="stringliteral">&quot;rsb timeout&quot;</span>);
    rsbEle.timeoutMsg-&gt;setId(rsbEle.id);

    rsbEle.refreshTimerMsg = <span class="keyword">new</span> RsbRefreshTimerMsg(<span class="stringliteral">&quot;rsb timer&quot;</span>);
    rsbEle.refreshTimerMsg-&gt;setId(rsbEle.id);

    rsbEle.commitTimerMsg = <span class="keyword">new</span> RsbCommitTimerMsg(<span class="stringliteral">&quot;rsb commit&quot;</span>);
    rsbEle.commitTimerMsg-&gt;setId(rsbEle.id);

    rsbEle.Session_Object = msg-&gt;getSession();
    rsbEle.Next_Hop_Address = msg-&gt;<a class="code" href="class_r_s_v_p_resv_msg.html#acba305cab60cbda25aabda67c227e8f1">getNHOP</a>();
    rsbEle.OI = msg-&gt;<a class="code" href="class_r_s_v_p_resv_msg.html#a256dcad2154833acf6b0658aef2a9541">getLIH</a>();

    ASSERT(rsbEle.inLabelVector.size() == rsbEle.FlowDescriptor.size());

    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; msg-&gt;getFlowDescriptor().size(); i++)
    {
        FlowDescriptor_t flow = msg-&gt;getFlowDescriptor()[i];
        rsbEle.FlowDescriptor.push_back(flow);
        rsbEle.inLabelVector.push_back(-1);
    }

    <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.push_back(rsbEle);
    ResvStateBlock_t *rsb = &amp;(*(<a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.end() - 1));

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;created new RSB &quot;</span> &lt;&lt; rsb-&gt;id &lt;&lt; endl;

    <span class="keywordflow">return</span> rsb;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1578adc0aa64e000a877ab117a3e9060"></a><!-- doxytag: member="RSVP::delSession" ref="a1578adc0aa64e000a877ab117a3e9060" args="(const cXMLElement &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::delSession </td>
          <td>(</td>
          <td class="paramtype">const cXMLElement &amp;&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a33de1da9c058e57354d8c76a026ce036">processCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();

    <a class="code" href="_x_m_l_utils_8cc.html#a10d193d56ab9828e48d984d940cc30c0">checkTags</a>(&amp;node, <span class="stringliteral">&quot;tunnel_id extended_tunnel_id endpoint paths&quot;</span>);

    SessionObj_t sobj;

    sobj.Tunnel_Id = <a class="code" href="_x_m_l_utils_8cc.html#a904310d712761c82c65e7975800e817b">getParameterIntValue</a>(&amp;node, <span class="stringliteral">&quot;tunnel_id&quot;</span>);
    sobj.Extended_Tunnel_Id = <a class="code" href="_x_m_l_utils_8cc.html#abc530a666bb91e5d1305f0d0fc5525c7">getParameterIPAddressValue</a>(&amp;node, <span class="stringliteral">&quot;extended_tunnel_id&quot;</span>, <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>).<a class="code" href="class_i_p_address.html#a807ca46964a8403cf0c70f0772179524">getInt</a>();
    sobj.DestAddress = <a class="code" href="_x_m_l_utils_8cc.html#abc530a666bb91e5d1305f0d0fc5525c7">getParameterIPAddressValue</a>(&amp;node, <span class="stringliteral">&quot;endpoint&quot;</span>);

    std::vector&lt;traffic_session_t&gt;::iterator sit = <a class="code" href="class_r_s_v_p.html#adbc9840e5bb15c37459aacb83385bdc0">findSession</a>(sobj);
    ASSERT(sit != <a class="code" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a>.end());
    traffic_session_t *session = &amp;(*sit);

    <span class="keyword">const</span> cXMLElement *paths = <a class="code" href="_x_m_l_utils_8cc.html#a354dec476d4b54e6a7d45e7c02dfdab3">getUniqueChildIfExists</a>(&amp;node, <span class="stringliteral">&quot;paths&quot;</span>);
    cXMLElementList pathList;
    <span class="keywordflow">if</span> (paths)
    {
        <span class="comment">// only specified paths will be removed, session remains</span>

        <a class="code" href="_x_m_l_utils_8cc.html#a10d193d56ab9828e48d984d940cc30c0">checkTags</a>(paths, <span class="stringliteral">&quot;path&quot;</span>);
        pathList = paths-&gt;getChildrenByTagName(<span class="stringliteral">&quot;path&quot;</span>);
    }

    std::vector&lt;traffic_path_t&gt;::iterator it;
    <span class="keywordflow">for</span> (it = session-&gt;paths.begin(); it != session-&gt;paths.end(); it++)
    {
        <span class="keywordtype">bool</span> <span class="keyword">remove</span>;

        <span class="keywordflow">if</span> (paths)
        {
            <span class="keyword">remove</span> = <span class="keyword">false</span>;

            <span class="keywordflow">for</span> (cXMLElementList::iterator p=pathList.begin(); p != pathList.end(); p++)
            {
                <span class="keywordflow">if</span> (it-&gt;sender.Lsp_Id != <a class="code" href="_x_m_l_utils_8cc.html#a904310d712761c82c65e7975800e817b">getParameterIntValue</a>(*p, <span class="stringliteral">&quot;lspid&quot;</span>))
                    <span class="keywordflow">continue</span>;

                <span class="comment">// remove path from session</span>

                <span class="keyword">remove</span> = <span class="keyword">true</span>;
                <span class="keywordflow">break</span>;
            }
        }
        <span class="keywordflow">else</span>
        {
            <span class="comment">// remove all paths</span>

            <span class="keyword">remove</span> = <span class="keyword">true</span>;
        }

        <span class="keywordflow">if</span> (<span class="keyword">remove</span>)
        {
            PathStateBlock_t *psb = <a class="code" href="class_r_s_v_p.html#adda3d6bf44e6f8181f0f2083f243474d">findPSB</a>(session-&gt;sobj, it-&gt;sender);
            <span class="keywordflow">if</span> (psb)
            {
                ASSERT(psb-&gt;ERO.size() &gt; 0);

                <a class="code" href="class_r_s_v_p.html#ab1e3e1ec1c7be3d59e249a147f3f3862">sendPathTearMessage</a>(psb-&gt;ERO[0].node, psb-&gt;Session_Object, psb-&gt;Sender_Template_Object,
                        <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aa83e78954a200bcb27bb2404bb5b8b25">getInterfaceAddrByPeerAddress</a>(psb-&gt;ERO[0].node), <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>, <span class="keyword">true</span>);

                <a class="code" href="class_r_s_v_p.html#a43b1c666eee1f02f7070d7b39e3dea0f">removePSB</a>(psb);
            }

            session-&gt;paths.erase(it--);
        }
    }

    <span class="keywordflow">if</span> (!paths)
    {
        <a class="code" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a>.erase(sit);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a05e7433548bd2ecc502fa40210d85f46"></a><!-- doxytag: member="RSVP::doCACCheck" ref="a05e7433548bd2ecc502fa40210d85f46" args="(const SessionObj_t &amp;session, const SenderTspecObj_t &amp;tspec, IPAddress OI)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RSVP::doCACCheck </td>
          <td>(</td>
          <td class="paramtype">const SessionObj_t &amp;&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SenderTspecObj_t &amp;&#160;</td>
          <td class="paramname"><em>tspec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>OI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a46e933eb87d8a3b105a313a0e48403a3">createIngressPSB()</a>, and <a class="el" href="class_r_s_v_p.html#a4c582acc45b47942f56a34aa35fcfc70">createPSB()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a>(OI));

    <span class="keywordtype">int</span> k = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aff4add6e86b7bc9ea84079aae0bb3e51">linkIndex</a>(OI);

    <span class="keywordtype">double</span> sharedBW = 0.0;

    <span class="keywordflow">for</span> (RSBVector::iterator it = <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;Session_Object != session)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (it-&gt;Flowspec_Object.req_bandwidth &lt;= sharedBW)
            <span class="keywordflow">continue</span>;

        sharedBW = it-&gt;Flowspec_Object.req_bandwidth;
    }

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;CACCheck: link=&quot;</span> &lt;&lt; OI &lt;&lt;
        <span class="stringliteral">&quot; requested=&quot;</span> &lt;&lt; tspec.req_bandwidth &lt;&lt;
        <span class="stringliteral">&quot; shared=&quot;</span> &lt;&lt; sharedBW &lt;&lt;
        <span class="stringliteral">&quot; available (immediately)=&quot;</span> &lt;&lt; <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[k].UnResvBandwidth[7] &lt;&lt;
        <span class="stringliteral">&quot; available (preemptible)=&quot;</span> &lt;&lt; <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[k].UnResvBandwidth[session.setupPri] &lt;&lt; endl;

    <span class="keywordflow">return</span> (<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[k].UnResvBandwidth[session.setupPri] + sharedBW &gt;= tspec.req_bandwidth);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a74c8cb3303ae62d7e118cbacacf0c5e0"></a><!-- doxytag: member="RSVP::evalNextHopInterface" ref="a74c8cb3303ae62d7e118cbacacf0c5e0" args="(IPAddress destAddr, const EroVector &amp;ERO, IPAddress &amp;OI)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RSVP::evalNextHopInterface </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>destAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const EroVector &amp;&#160;</td>
          <td class="paramname"><em>ERO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>OI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a46e933eb87d8a3b105a313a0e48403a3">createIngressPSB()</a>, and <a class="el" href="class_r_s_v_p.html#a4c582acc45b47942f56a34aa35fcfc70">createPSB()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ERO.size() &gt; 0)
    {
        <span class="comment">// explicit routing</span>

        <span class="keywordflow">if</span> (ERO[0].L)
        {
            <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_r_s_v_p.html#a9f89cdfc58368bf8e0c491b7da2dd113">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a0dda4a87779a949284ccead75001fa30">getInterfaceForDestAddr</a>(ERO[0].node);

            <span class="keywordflow">if</span> (!ie)
            {
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;next (loose) hop address &quot;</span> &lt;&lt; ERO[0].node &lt;&lt; <span class="stringliteral">&quot; is currently unroutable&quot;</span> &lt;&lt; endl;
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }

            OI = ie-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aec8ebefd03acad479ac89d31d7228331">getIPAddress</a>();

        }
        <span class="keywordflow">else</span>
        {
            OI = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aa83e78954a200bcb27bb2404bb5b8b25">getInterfaceAddrByPeerAddress</a>(ERO[0].node);
        }

        <a class="code" href="class_i_p_address.html">IPAddress</a> peer = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#ab55f38433f365eb6411ce8d0caf20ca7">getPeerByLocalAddress</a>(OI);
        HelloState_t *h = <a class="code" href="class_r_s_v_p.html#a04c45fcf64189ff23bc0233639956459">findHello</a>(peer);
        <span class="keywordflow">if</span> (!h)
            error(<span class="stringliteral">&quot;Peer %s on interface %s is not an RSVP peer&quot;</span>, peer.<a class="code" href="class_i_p_address.html#a50f58febbf2ded78b9f6e32e579f5d2b">str</a>().c_str(), OI.<a class="code" href="class_i_p_address.html#a50f58febbf2ded78b9f6e32e579f5d2b">str</a>().c_str());

        <span class="comment">// ok, only if next hop is up and running</span>

        <span class="keywordflow">return</span> h-&gt;ok;
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// hop-by-hop routing</span>

        <span class="keywordflow">if</span> (!<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a>(destAddr))
        {
            <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *ie = <a class="code" href="class_r_s_v_p.html#a9f89cdfc58368bf8e0c491b7da2dd113">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a0dda4a87779a949284ccead75001fa30">getInterfaceForDestAddr</a>(destAddr);

            <span class="keywordflow">if</span> (!ie)
            {
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;destination address &quot;</span> &lt;&lt; destAddr &lt;&lt; <span class="stringliteral">&quot; is currently unroutable&quot;</span> &lt;&lt; endl;
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }

            OI = ie-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aec8ebefd03acad479ac89d31d7228331">getIPAddress</a>();

            HelloState_t *h = <a class="code" href="class_r_s_v_p.html#a04c45fcf64189ff23bc0233639956459">findHello</a>(<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#ab55f38433f365eb6411ce8d0caf20ca7">getPeerByLocalAddress</a>(OI));
            <span class="keywordflow">if</span> (!h)
            {
                <span class="comment">// outgoing interface is not LSR, we are egress router</span>

                OI = <a class="code" href="class_i_p_address.html">IPAddress</a>();

                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }
            <span class="keywordflow">else</span>
            {
                <span class="comment">// outgoing interface is LSR</span>

                ASSERT(h-&gt;ok); <span class="comment">// rt-&gt;getInterfaceForDestAddr() wouldn&#39;t choose this entry</span>

                <span class="keywordflow">return</span> h-&gt;ok;
            }
        }
        <span class="keywordflow">else</span>
        {
            <span class="comment">// destAddress is ours, we&#39;re egress</span>

            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a04c45fcf64189ff23bc0233639956459"></a><!-- doxytag: member="RSVP::findHello" ref="a04c45fcf64189ff23bc0233639956459" args="(IPAddress peer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_s_v_p_1_1_hello_state__t.html">RSVP::HelloState_t</a> * RSVP::findHello </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>peer</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a74c8cb3303ae62d7e118cbacacf0c5e0">evalNextHopInterface()</a>, <a class="el" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">processHELLO_TIMEOUT()</a>, <a class="el" href="class_r_s_v_p.html#a5c7ef8c3f1f0a9b7061f499891a82ad6">processHELLO_TIMER()</a>, <a class="el" href="class_r_s_v_p.html#a4248b4a0ff4175b4be496ec30aee8672">processHelloMsg()</a>, and <a class="el" href="class_r_s_v_p.html#ad50bb2638d5ca3d9bc42b3364cffabbb">startHello()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (HelloVector::iterator it = <a class="code" href="class_r_s_v_p.html#a1070041b2d075e1d4c8cbf18f0fe2faf">HelloList</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#a1070041b2d075e1d4c8cbf18f0fe2faf">HelloList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;peer != peer)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">return</span> &amp;(*it);
    }
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a92c0c4053e1f2d4a7fa85fed30d9a49d"></a><!-- doxytag: member="RSVP::findPath" ref="a92c0c4053e1f2d4a7fa85fed30d9a49d" args="(traffic_session_t *session, const SenderTemplateObj_t &amp;sender)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="struct_r_s_v_p_1_1traffic__path__t.html">RSVP::traffic_path_t</a> &gt;::iterator RSVP::findPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1traffic__session__t.html">traffic_session_t</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SenderTemplateObj_t &amp;&#160;</td>
          <td class="paramname"><em>sender</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a820c09dd3002f2309aeaa1f30d092887">createPath()</a>, <a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">pathProblem()</a>, and <a class="el" href="class_r_s_v_p.html#adada9d53651da0e8c535e7ed47f931fd">readTrafficSessionFromXML()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::vector&lt;traffic_path_t&gt;::iterator it;
    <span class="keywordflow">for</span> (it = session-&gt;paths.begin(); it != session-&gt;paths.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;sender != sender)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">break</span>;
    }
    <span class="keywordflow">return</span> it;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adda3d6bf44e6f8181f0f2083f243474d"></a><!-- doxytag: member="RSVP::findPSB" ref="adda3d6bf44e6f8181f0f2083f243474d" args="(const SessionObj_t &amp;session, const SenderTemplateObj_t &amp;sender)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">RSVP::PathStateBlock_t</a> * RSVP::findPSB </td>
          <td>(</td>
          <td class="paramtype">const SessionObj_t &amp;&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SenderTemplateObj_t &amp;&#160;</td>
          <td class="paramname"><em>sender</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv()</a>, <a class="el" href="class_r_s_v_p.html#a820c09dd3002f2309aeaa1f30d092887">createPath()</a>, <a class="el" href="class_r_s_v_p.html#a1578adc0aa64e000a877ab117a3e9060">delSession()</a>, <a class="el" href="class_r_s_v_p.html#a046faf4019fa1dd31f24ee445236236b">processPATH_NOTIFY()</a>, <a class="el" href="class_r_s_v_p.html#aaa1b0102445119825a264bf187aca6e9">processPathErrMsg()</a>, <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">processPathMsg()</a>, <a class="el" href="class_r_s_v_p.html#a9d40c6ab5084f41b18645183f85fecc9">processPathTearMsg()</a>, and <a class="el" href="class_r_s_v_p.html#aaebd61f0dcf0f517e95c4b1e81fea967">processResvMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    PSBVector::iterator it;
    <span class="keywordflow">for</span> (it = <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;Session_Object != session)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (it-&gt;Sender_Template_Object != sender)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">return</span> &amp;(*it);
    }

    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a15d8d2605257b63906833bf6dcb7e7f9"></a><!-- doxytag: member="RSVP::findPsbById" ref="a15d8d2605257b63906833bf6dcb7e7f9" args="(int id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">RSVP::PathStateBlock_t</a> * RSVP::findPsbById </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5bc9ab7d3a8b3db1c563d7e7adddb8d6">processPSB_TIMEOUT()</a>, and <a class="el" href="class_r_s_v_p.html#a18f4a987254edd684d0d57345c818c81">processPSB_TIMER()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.size(); i++)
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>[i].<span class="keywordtype">id</span> != <span class="keywordtype">id</span>)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">return</span> &amp;<a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>[i];
    }
    ASSERT(<span class="keyword">false</span>);
    <span class="keywordflow">return</span> NULL; <span class="comment">// prevent warning</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7741a01ced48d4fbf371cb7b846a27aa"></a><!-- doxytag: member="RSVP::findRSB" ref="a7741a01ced48d4fbf371cb7b846a27aa" args="(const SessionObj_t &amp;session, const SenderTemplateObj_t &amp;sender, unsigned int &amp;index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">RSVP::ResvStateBlock_t</a> * RSVP::findRSB </td>
          <td>(</td>
          <td class="paramtype">const SessionObj_t &amp;&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SenderTemplateObj_t &amp;&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int &amp;&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a09621c3f70738316d5cc1380ed54212b">getInLabel()</a>, <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">processPathMsg()</a>, and <a class="el" href="class_r_s_v_p.html#a43b1c666eee1f02f7070d7b39e3dea0f">removePSB()</a>.</p>
<div class="fragment"><pre class="fragment">{
    RSBVector::iterator it;

    <span class="keywordflow">for</span> (it = <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;Session_Object != session)
            <span class="keywordflow">continue</span>;

        FlowDescriptorVector::iterator fit;
        index = 0;
        <span class="keywordflow">for</span> (fit = it-&gt;FlowDescriptor.begin(); fit != it-&gt;FlowDescriptor.end(); fit++)
        {
            <span class="keywordflow">if</span> ((SenderTemplateObj_t&amp;)fit-&gt;Filter_Spec_Object != sender)
            {
                ++index;
                <span class="keywordflow">continue</span>;
            }

            <span class="keywordflow">return</span> &amp;(*it);
        }

        <span class="comment">// don&#39;t break here, may be in different (if outInterface is different)</span>
    }
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a96e4fae87f154aec8efed1f306864d81"></a><!-- doxytag: member="RSVP::findRsbById" ref="a96e4fae87f154aec8efed1f306864d81" args="(int id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">RSVP::ResvStateBlock_t</a> * RSVP::findRsbById </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a7e760e4263df7614b1dfbea8e39cc8f3">processRSB_COMMIT_TIMER()</a>, <a class="el" href="class_r_s_v_p.html#a7b967a2ab4a53edc0bdd12c8ad3a4c99">processRSB_REFRESH_TIMER()</a>, and <a class="el" href="class_r_s_v_p.html#a2fc38252a7b31028e80b360fc8dc7af3">processRSB_TIMEOUT()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.size(); i++)
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>[i].<span class="keywordtype">id</span> != <span class="keywordtype">id</span>)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">return</span> &amp;<a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>[i];
    }
    ASSERT(<span class="keyword">false</span>);
    <span class="keywordflow">return</span> NULL; <span class="comment">// prevent warning</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="adbc9840e5bb15c37459aacb83385bdc0"></a><!-- doxytag: member="RSVP::findSession" ref="adbc9840e5bb15c37459aacb83385bdc0" args="(const SessionObj_t &amp;session)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="struct_r_s_v_p_1_1traffic__session__t.html">RSVP::traffic_session_t</a> &gt;::iterator RSVP::findSession </td>
          <td>(</td>
          <td class="paramtype">const SessionObj_t &amp;&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a820c09dd3002f2309aeaa1f30d092887">createPath()</a>, <a class="el" href="class_r_s_v_p.html#a1578adc0aa64e000a877ab117a3e9060">delSession()</a>, <a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">pathProblem()</a>, and <a class="el" href="class_r_s_v_p.html#adada9d53651da0e8c535e7ed47f931fd">readTrafficSessionFromXML()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::vector&lt;traffic_session_t&gt;::iterator it;
    <span class="keywordflow">for</span> (it = <a class="code" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;sobj != session)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">break</span>;
    }

    <span class="keywordflow">return</span> it;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a09621c3f70738316d5cc1380ed54212b"></a><!-- doxytag: member="RSVP::getInLabel" ref="a09621c3f70738316d5cc1380ed54212b" args="(const SessionObj_t &amp;session, const SenderTemplateObj_t &amp;sender)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int RSVP::getInLabel </td>
          <td>(</td>
          <td class="paramtype">const SessionObj_t &amp;&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SenderTemplateObj_t &amp;&#160;</td>
          <td class="paramname"><em>sender</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_simple_classifier.html#a56186b812abd918d7355d5d6dd26aba0">SimpleClassifier::readItemFromXML()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index;
    ResvStateBlock_t *rsb = <a class="code" href="class_r_s_v_p.html#a7741a01ced48d4fbf371cb7b846a27aa">findRSB</a>(session, sender, index);
    <span class="keywordflow">if</span> (!rsb)
        <span class="keywordflow">return</span> -1;

    <span class="keywordflow">return</span> rsb-&gt;inLabelVector[index];
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4772469f02e97f0d99a3c00f298322dd"></a><!-- doxytag: member="RSVP::handleMessage" ref="a4772469f02e97f0d99a3c00f298322dd" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::handleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    SignallingMsg *sMsg = <span class="keyword">dynamic_cast&lt;</span>SignallingMsg*<span class="keyword">&gt;</span>(msg);
    RSVPMessage *rMsg = <span class="keyword">dynamic_cast&lt;</span>RSVPMessage*<span class="keyword">&gt;</span>(msg);

    <span class="keywordflow">if</span> (sMsg)
    {
        <a class="code" href="class_r_s_v_p.html#a6393538e367792874a6e1a9d9a245ded">processSignallingMessage</a>(sMsg);
        <span class="keywordflow">return</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rMsg)
    {
        <a class="code" href="class_r_s_v_p.html#a604c7cdcbec35b1c1facf476ddc27eb9">processRSVPMessage</a>(rMsg);
        <span class="keywordflow">return</span>;
    }
    <span class="keywordflow">else</span>
        ASSERT(<span class="keyword">false</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad55ae7e15d484d73cdfe053442f345ad"></a><!-- doxytag: member="RSVP::initialize" ref="ad55ae7e15d484d73cdfe053442f345ad" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::initialize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="comment">// we have to wait for stage 2 until interfaces get registered (stage 0)</span>
    <span class="comment">// and get their auto-assigned IP addresses (stage 2); routerId gets</span>
    <span class="comment">// assigned in state 3</span>
    <span class="keywordflow">if</span> (stage==4)
    {
        <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a> = <a class="code" href="class_t_e_d_access.html">TEDAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
        <a class="code" href="class_r_s_v_p.html#a9f89cdfc58368bf8e0c491b7da2dd113">rt</a> = <a class="code" href="class_routing_table_access.html">RoutingTableAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
        <a class="code" href="class_r_s_v_p.html#a52533534d5e3afbfc42030440071a5d3">ift</a> = <a class="code" href="class_interface_table_access.html">InterfaceTableAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
        <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a> = <a class="code" href="class_r_s_v_p.html#a9f89cdfc58368bf8e0c491b7da2dd113">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a64a9a5b1414f4da0b7b0a3e079091f62">getRouterId</a>();
        <a class="code" href="class_r_s_v_p.html#ad137623f6252e3398084176dc311885f">lt</a> = <a class="code" href="class_l_i_b_table_access.html">LIBTableAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
        <a class="code" href="class_r_s_v_p.html#a0f1e35ac657ccaeca38a235d1b4a3414">nb</a> = <a class="code" href="class_notification_board_access.html">NotificationBoardAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();

        <a class="code" href="class_r_s_v_p.html#a44fd3dc334665b246ce0a555cb35e34f">rpct</a> = check_and_cast&lt;<a class="code" href="class_i_r_s_v_p_classifier.html">IRSVPClassifier</a>*&gt;(getParentModule()-&gt;getSubmodule(<span class="stringliteral">&quot;classifier&quot;</span>));

        <a class="code" href="class_r_s_v_p.html#a18c51012884262a7a68bc2ef3fee90a1">maxPsbId</a> = 0;
        <a class="code" href="class_r_s_v_p.html#a8df043f6a88c29e65a22c37ec7294ff0">maxRsbId</a> = 0;
        <a class="code" href="class_r_s_v_p.html#a9cd7607aca27a1351bb82ddc7f37937f">maxSrcInstance</a> = 0;

        <a class="code" href="class_r_s_v_p.html#a469e284ac5acfa70db603d70691b06ef">retryInterval</a> = 1.0;

        <span class="comment">// setup hello</span>
        <a class="code" href="class_r_s_v_p.html#a56c68314c8b1e8b82370416d2b2f4785">setupHello</a>();

        <span class="comment">// process traffic configuration</span>
        <a class="code" href="class_r_s_v_p.html#a7afe215d5b5f46066a7d2db44ac93369">readTrafficFromXML</a>(par(<span class="stringliteral">&quot;traffic&quot;</span>).xmlValue());
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4c9e7e6120185700741ea3394ae65c0a"></a><!-- doxytag: member="RSVP::numInitStages" ref="a4c9e7e6120185700741ea3394ae65c0a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int RSVP::numInitStages </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> 5;}
</pre></div>
</div>
</div>
<a class="anchor" id="aa1c0596a9dfde9005405cbdebbd3a6a9"></a><!-- doxytag: member="RSVP::pathProblem" ref="aa1c0596a9dfde9005405cbdebbd3a6a9" args="(PathStateBlock_t *psb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::pathProblem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>psb</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a046faf4019fa1dd31f24ee445236236b">processPATH_NOTIFY()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(psb);
    ASSERT(!psb-&gt;OutInterface.isUnspecified());

    <a class="code" href="class_i_p_address.html">IPAddress</a> nextHop = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#ab55f38433f365eb6411ce8d0caf20ca7">getPeerByLocalAddress</a>(psb-&gt;OutInterface);

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending PathTear to &quot;</span> &lt;&lt; nextHop &lt;&lt; endl;

    <a class="code" href="class_r_s_v_p.html#ab1e3e1ec1c7be3d59e249a147f3f3862">sendPathTearMessage</a>(nextHop, psb-&gt;Session_Object, psb-&gt;Sender_Template_Object,
                        <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aa83e78954a200bcb27bb2404bb5b8b25">getInterfaceAddrByPeerAddress</a>(nextHop), <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>, <span class="keyword">true</span>);

    <span class="comment">// schedule re-creation if path is permanent</span>

    std::vector&lt;traffic_session_t&gt;::iterator sit = <a class="code" href="class_r_s_v_p.html#adbc9840e5bb15c37459aacb83385bdc0">findSession</a>(psb-&gt;Session_Object);
    ASSERT(sit != <a class="code" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a>.end());
    traffic_session_t *s = &amp;(*sit);

    std::vector&lt;traffic_path_t&gt;::iterator pit = <a class="code" href="class_r_s_v_p.html#a92c0c4053e1f2d4a7fa85fed30d9a49d">findPath</a>(s, psb-&gt;Sender_Template_Object);
    ASSERT(pit != s-&gt;paths.end());
    traffic_path_t *p = &amp;(*pit);

    <span class="keywordflow">if</span> (p-&gt;permanent)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;this path is permanent, we will try to re-create it later&quot;</span> &lt;&lt; endl;

        <a class="code" href="class_r_s_v_p.html#a472ceb4e889ba0fc93649dff8e5d549a">sendPathNotify</a>(getId(), psb-&gt;Session_Object, psb-&gt;Sender_Template_Object, PATH_RETRY, <a class="code" href="class_r_s_v_p.html#a469e284ac5acfa70db603d70691b06ef">retryInterval</a>);

    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing path from traffic database&quot;</span> &lt;&lt; endl;

        sit-&gt;paths.erase(pit);
    }

    <span class="comment">// remove path</span>

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing PSB&quot;</span> &lt;&lt; endl;

    <a class="code" href="class_r_s_v_p.html#a43b1c666eee1f02f7070d7b39e3dea0f">removePSB</a>(psb);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a933ffa437ba9f3cef9efdfc5f1ac18a9"></a><!-- doxytag: member="RSVP::preempt" ref="a933ffa437ba9f3cef9efdfc5f1ac18a9" args="(IPAddress OI, int priority, double bandwidth)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::preempt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>OI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>bandwidth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a58055c8fd6f3b98c57ef68adeaa009e3">allocateResource()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a>(OI));

    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aff4add6e86b7bc9ea84079aae0bb3e51">linkIndex</a>(OI);

    <span class="keywordflow">for</span> (RSBVector::iterator it = <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;OI != OI)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (it-&gt;Session_Object.holdingPri != priority)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (it-&gt;Flowspec_Object.req_bandwidth == 0.0)
            <span class="keywordflow">continue</span>;

        <span class="comment">// preempt RSB</span>

        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = priority; i &lt; 8; i++)
            <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[index].UnResvBandwidth[i] += it-&gt;Flowspec_Object.req_bandwidth;

        bandwidth -= it-&gt;Flowspec_Object.req_bandwidth;
        it-&gt;Flowspec_Object.req_bandwidth = 0.0;

        <a class="code" href="class_r_s_v_p.html#a269cab6db09df7ab124076afe9515a6f">scheduleCommitTimer</a>(&amp;(*it));

        <span class="comment">//</span>

        <span class="keywordflow">if</span> (bandwidth &lt;= 0.0)
            <span class="keywordflow">break</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a95acc5695ef5d439aec6996abfb98a0c"></a><!-- doxytag: member="RSVP::print" ref="a95acc5695ef5d439aec6996abfb98a0c" args="(RSVPPathMsg *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::print </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_r_s_v_p_path_msg.html">RSVPPathMsg</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">processPathMsg()</a>, and <a class="el" href="class_r_s_v_p.html#aaebd61f0dcf0f517e95c4b1e81fea967">processResvMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;PATH_MESSAGE: lspid &quot;</span> &lt;&lt; p-&gt;<a class="code" href="class_r_s_v_p_path_msg.html#aca22e0fb8de172b46a76a7eff4c46773">getLspId</a>() &lt;&lt; <span class="stringliteral">&quot; ERO &quot;</span> &lt;&lt; <a class="code" href="common_8cc.html#a91f0d11e7f76b141cb75b84c14d15e93">vectorToString</a>(p-&gt;getERO()) &lt;&lt; endl;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a90209c6a16793748ba35624d55ec167e"></a><!-- doxytag: member="RSVP::print" ref="a90209c6a16793748ba35624d55ec167e" args="(RSVPResvMsg *r)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::print </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_r_s_v_p_resv_msg.html">RSVPResvMsg</a> *&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;RESV_MESSAGE: &quot;</span> &lt;&lt; endl;
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; r-&gt;getFlowDescriptor().size(); i++)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot; lspid &quot;</span> &lt;&lt; r-&gt;getFlowDescriptor()[i].Filter_Spec_Object.Lsp_Id &lt;&lt;
            <span class="stringliteral">&quot; label &quot;</span> &lt;&lt; r-&gt;getFlowDescriptor()[i].label &lt;&lt; endl;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a33de1da9c058e57354d8c76a026ce036"></a><!-- doxytag: member="RSVP::processCommand" ref="a33de1da9c058e57354d8c76a026ce036" args="(const cXMLElement &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processCommand </td>
          <td>(</td>
          <td class="paramtype">const cXMLElement &amp;&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called by <a class="el" href="class_scenario_manager.html">ScenarioManager</a> whenever a script command needs to be carried out by the module.</p>
<p>The command is represented by the XML element or element tree. The command name can be obtained as:</p>
<pre>
 const char *command = node-&gt;getTagName()
 </pre><p>Parameters are XML attributes, e.g. a "neighbour" parameter can be retrieved as:</p>
<pre>
 const char *attr = node-&gt;getAttribute("neighbour")
 </pre><p>More complex input can be passed in child elements.</p>
<dl class="see"><dt><b>See also:</b></dt><dd>cXMLElement </dd></dl>

<p>Implements <a class="el" href="class_i_scriptable.html#a8bb88a1ef72797e9e9c9f30f72f9dafe">IScriptable</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!strcmp(node.getTagName(), <span class="stringliteral">&quot;add-session&quot;</span>))
    {
        <a class="code" href="class_r_s_v_p.html#aa8c17ae4390aeedc6b6d1bc6e0743c5f">addSession</a>(node);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(node.getTagName(), <span class="stringliteral">&quot;del-session&quot;</span>))
    {
        <a class="code" href="class_r_s_v_p.html#a1578adc0aa64e000a877ab117a3e9060">delSession</a>(node);
    }
    <span class="keywordflow">else</span>
        ASSERT(<span class="keyword">false</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a41999b24ba006f359ce2ee9b4638ee96"></a><!-- doxytag: member="RSVP::processHELLO_TIMEOUT" ref="a41999b24ba006f359ce2ee9b4638ee96" args="(HelloTimeoutMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processHELLO_TIMEOUT </td>
          <td>(</td>
          <td class="paramtype">HelloTimeoutMsg *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a6393538e367792874a6e1a9d9a245ded">processSignallingMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_i_p_address.html">IPAddress</a> peer = msg-&gt;getPeer();

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;hello timeout, considering &quot;</span> &lt;&lt; peer &lt;&lt; <span class="stringliteral">&quot; failed&quot;</span> &lt;&lt; endl;

    <span class="comment">// update hello state (set to failed and turn hello off)</span>

    HelloState_t *hello = <a class="code" href="class_r_s_v_p.html#a04c45fcf64189ff23bc0233639956459">findHello</a>(peer);
    ASSERT(hello);
    hello-&gt;ok = <span class="keyword">false</span>;
    ASSERT(!hello-&gt;timeout-&gt;isScheduled());
    cancelEvent(hello-&gt;timer);

    <span class="comment">// update TED and routing table</span>

    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aff4add6e86b7bc9ea84079aae0bb3e51">linkIndex</a>(<a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>, peer);
    <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[index].state = <span class="keyword">false</span>;
    <a class="code" href="class_r_s_v_p.html#ab63d5bdece74e8218d703ca07604dbe6">announceLinkChange</a>(index);
    <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable</a>();

    <span class="comment">// send PATH_ERROR for existing paths</span>

    <span class="keywordflow">for</span> (PSBVector::iterator it = <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;OutInterface != <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[index].local)
            <span class="keywordflow">continue</span>;

        <a class="code" href="class_r_s_v_p.html#aede65339bca2fcd134158dd9784100e2">sendPathErrorMessage</a>(&amp;(*it), <a class="code" href="_r_s_v_p_8cc.html#ac45d25ecca4b9be780471dde70968a11">PATH_ERR_NEXTHOP_FAILED</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5c7ef8c3f1f0a9b7061f499891a82ad6"></a><!-- doxytag: member="RSVP::processHELLO_TIMER" ref="a5c7ef8c3f1f0a9b7061f499891a82ad6" args="(HelloTimerMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processHELLO_TIMER </td>
          <td>(</td>
          <td class="paramtype">HelloTimerMsg *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a6393538e367792874a6e1a9d9a245ded">processSignallingMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_i_p_address.html">IPAddress</a> peer = msg-&gt;getPeer();

    HelloState_t *h = <a class="code" href="class_r_s_v_p.html#a04c45fcf64189ff23bc0233639956459">findHello</a>(peer);
    ASSERT(h);

    <a class="code" href="class_r_s_v_p_hello_msg.html">RSVPHelloMsg</a> *hMsg = <span class="keyword">new</span> <a class="code" href="class_r_s_v_p_hello_msg.html">RSVPHelloMsg</a>(<span class="stringliteral">&quot;hello message&quot;</span>);

    hMsg-&gt;setSrcInstance(h-&gt;srcInstance);
    hMsg-&gt;setDstInstance(h-&gt;dstInstance);

    hMsg-&gt;setRequest(h-&gt;request);
    hMsg-&gt;setAck(h-&gt;ack);

    <span class="keywordtype">int</span> length = 10;

    <span class="comment">// see comment elsewhere (in TED.cc)</span>
    length /= 10;

    hMsg-&gt;setByteLength(length);

    <a class="code" href="class_r_s_v_p.html#afe54ffd483063082234277edce5e792d">sendToIP</a>(hMsg, peer);

    h-&gt;ack = <span class="keyword">false</span>;

    scheduleAt(simTime() + <a class="code" href="class_r_s_v_p.html#af5bdcd75e4a984969f22119c8cb4d89b">helloInterval</a>, msg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4248b4a0ff4175b4be496ec30aee8672"></a><!-- doxytag: member="RSVP::processHelloMsg" ref="a4248b4a0ff4175b4be496ec30aee8672" args="(RSVPHelloMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processHelloMsg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_r_s_v_p_hello_msg.html">RSVPHelloMsg</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a604c7cdcbec35b1c1facf476ddc27eb9">processRSVPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Received RSVP_HELLO&quot;</span> &lt;&lt; endl;
    <span class="comment">//print(msg);</span>

    <a class="code" href="class_i_p_control_info.html">IPControlInfo</a> *controlInfo = check_and_cast&lt;<a class="code" href="class_i_p_control_info.html">IPControlInfo</a>*&gt;(msg-&gt;getControlInfo());
    <a class="code" href="class_i_p_address.html">IPAddress</a> sender = controlInfo-&gt;getSrcAddr();
    <a class="code" href="class_i_p_address.html">IPAddress</a> peer = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aae88ed1b8900a569352c44f142cbc5a7">primaryAddress</a>(sender);

    <span class="keywordtype">bool</span> request = msg-&gt;getRequest();
    <span class="keywordtype">bool</span> ack = msg-&gt;getAck();

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;hello sender &quot;</span> &lt;&lt; peer;
    <span class="keywordflow">if</span> (request) <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot; REQ&quot;</span>;
    <span class="keywordflow">if</span> (ack) <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot; ACK&quot;</span>;
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; endl;

    <span class="keywordtype">int</span> rcvSrcInstance = msg-&gt;getSrcInstance();
    <span class="keywordtype">int</span> rcvDstInstance = msg-&gt;getDstInstance();

    <span class="keyword">delete</span> msg;

    HelloState_t *h = <a class="code" href="class_r_s_v_p.html#a04c45fcf64189ff23bc0233639956459">findHello</a>(peer);
    ASSERT(h);

    ASSERT(h-&gt;srcInstance);
    ASSERT(rcvSrcInstance);

    <span class="keywordtype">bool</span> failure = <span class="keyword">false</span>;

    <span class="keywordflow">if</span> (h-&gt;srcInstance != rcvDstInstance)
    {
        <span class="keywordflow">if</span> (rcvDstInstance != 0)
        {
            failure = <span class="keyword">true</span>;
        }
        <span class="keywordflow">else</span>
        {
            ASSERT(request);
        }
    }

    <span class="keywordflow">if</span> (h-&gt;dstInstance != rcvSrcInstance)
    {
        <span class="keywordflow">if</span> (h-&gt;dstInstance != 0)
        {
            failure = <span class="keyword">true</span>;
        }
        h-&gt;dstInstance = rcvSrcInstance;
    }

    <span class="keywordflow">if</span> (failure)
    {
        <span class="comment">// mismatch encountered</span>
        h-&gt;srcInstance = ++<a class="code" href="class_r_s_v_p.html#a9cd7607aca27a1351bb82ddc7f37937f">maxSrcInstance</a>;
    }

    <span class="keywordflow">if</span> (failure || !h-&gt;ok)
    {
        h-&gt;ok = <span class="keyword">true</span>;

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;local peer &quot;</span> &lt;&lt; peer &lt;&lt; <span class="stringliteral">&quot; is now considered up and running&quot;</span> &lt;&lt; endl;

        <a class="code" href="class_r_s_v_p.html#a771e852915d4521e65a3d243bdf1a82c">recoveryEvent</a>(peer);

        <span class="comment">// if peer was considered down, we have stopped sending hellos: resume now</span>
        <span class="keywordflow">if</span> (!h-&gt;timer-&gt;isScheduled())
            scheduleAt(simTime(), h-&gt;timer);
    }

    <span class="keywordflow">if</span> (request)
    {
        <span class="comment">// immediately respond to a request with an ack</span>
        h-&gt;ack = <span class="keyword">true</span>;
        h-&gt;request = <span class="keyword">false</span>;

        cancelEvent(h-&gt;timer);
        scheduleAt(simTime(), h-&gt;timer);
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// next message will be regular</span>

        h-&gt;ack = <span class="keyword">false</span>;
        h-&gt;request = <span class="keyword">false</span>;

        ASSERT(h-&gt;timer-&gt;isScheduled());
    }

    cancelEvent(h-&gt;timeout);
    scheduleAt(simTime() + <a class="code" href="class_r_s_v_p.html#a5873d10d15860ed9e24e941f851f4b71">helloTimeout</a>, h-&gt;timeout);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a046faf4019fa1dd31f24ee445236236b"></a><!-- doxytag: member="RSVP::processPATH_NOTIFY" ref="a046faf4019fa1dd31f24ee445236236b" args="(PathNotifyMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processPATH_NOTIFY </td>
          <td>(</td>
          <td class="paramtype">PathNotifyMsg *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a6393538e367792874a6e1a9d9a245ded">processSignallingMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    PathStateBlock_t *psb;

    <span class="keywordflow">switch</span>(msg-&gt;getStatus())
    {
        <span class="keywordflow">case</span> PATH_RETRY:
            <a class="code" href="class_r_s_v_p.html#a820c09dd3002f2309aeaa1f30d092887">createPath</a>(msg-&gt;getSession(), msg-&gt;getSender());
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> PATH_UNFEASIBLE:
        <span class="keywordflow">case</span> PATH_PREEMPTED:
        <span class="keywordflow">case</span> PATH_FAILED:
            psb = <a class="code" href="class_r_s_v_p.html#adda3d6bf44e6f8181f0f2083f243474d">findPSB</a>(msg-&gt;getSession(), msg-&gt;getSender());
            <span class="keywordflow">if</span> (psb)
                <a class="code" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">pathProblem</a>(psb);
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> PATH_CREATED:
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Path successfully established&quot;</span> &lt;&lt; endl;
            <span class="keywordflow">break</span>;


        <span class="keywordflow">default</span>:
            ASSERT(<span class="keyword">false</span>);
    }

    <span class="keyword">delete</span> msg;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaa1b0102445119825a264bf187aca6e9"></a><!-- doxytag: member="RSVP::processPathErrMsg" ref="aaa1b0102445119825a264bf187aca6e9" args="(RSVPPathError *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processPathErrMsg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_r_s_v_p_path_error.html">RSVPPathError</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a604c7cdcbec35b1c1facf476ddc27eb9">processRSVPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Received PATH_ERROR&quot;</span> &lt;&lt; endl;
    <span class="comment">//print(msg);</span>

    <span class="comment">//int lspid = msg-&gt;getLspId();</span>
    <span class="keywordtype">int</span> errCode = msg-&gt;getErrorCode();

    PathStateBlock_t *psb = <a class="code" href="class_r_s_v_p.html#adda3d6bf44e6f8181f0f2083f243474d">findPSB</a>(msg-&gt;getSession(), msg-&gt;<a class="code" href="class_r_s_v_p_path_error.html#ac59648576f1942a8ec7ae2780c6a039d">getSenderTemplate</a>());
    <span class="keywordflow">if</span> (!psb)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;matching PSB not found, ignoring error message&quot;</span> &lt;&lt; endl;
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> (psb-&gt;Previous_Hop_Address != <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;forwarding error message to PHOP (&quot;</span> &lt;&lt; psb-&gt;Previous_Hop_Address &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;

        msg-&gt;removeControlInfo();
        <a class="code" href="class_r_s_v_p.html#afe54ffd483063082234277edce5e792d">sendToIP</a>(msg, psb-&gt;Previous_Hop_Address);
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;error reached ingress router&quot;</span> &lt;&lt; endl;

        <span class="keywordflow">switch</span>(errCode)
        {
            <span class="keywordflow">case</span> <a class="code" href="_r_s_v_p_8cc.html#ade6fa078d09732210f77de2f6be3aba2">PATH_ERR_PREEMPTED</a>:
                <a class="code" href="class_r_s_v_p.html#a472ceb4e889ba0fc93649dff8e5d549a">sendPathNotify</a>(psb-&gt;handler, psb-&gt;Session_Object, psb-&gt;Sender_Template_Object, PATH_PREEMPTED, 0.0);
                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <a class="code" href="_r_s_v_p_8cc.html#aa99604209fc07fe495c4601f85ba8fae">PATH_ERR_UNFEASIBLE</a>:
                <a class="code" href="class_r_s_v_p.html#a472ceb4e889ba0fc93649dff8e5d549a">sendPathNotify</a>(psb-&gt;handler, psb-&gt;Session_Object, psb-&gt;Sender_Template_Object, PATH_UNFEASIBLE, 0.0);
                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <a class="code" href="_r_s_v_p_8cc.html#ac45d25ecca4b9be780471dde70968a11">PATH_ERR_NEXTHOP_FAILED</a>:
                <a class="code" href="class_r_s_v_p.html#a472ceb4e889ba0fc93649dff8e5d549a">sendPathNotify</a>(psb-&gt;handler, psb-&gt;Session_Object, psb-&gt;Sender_Template_Object, PATH_FAILED, 0.0);
                <span class="keywordflow">break</span>;

            <span class="keywordflow">default</span>:
                ASSERT(<span class="keyword">false</span>);
        }

        <span class="keyword">delete</span> msg;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3fa7b4ca1bf18d5afac7664f0ae3584a"></a><!-- doxytag: member="RSVP::processPathMsg" ref="a3fa7b4ca1bf18d5afac7664f0ae3584a" args="(RSVPPathMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processPathMsg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_r_s_v_p_path_msg.html">RSVPPathMsg</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a604c7cdcbec35b1c1facf476ddc27eb9">processRSVPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Received PATH_MESSAGE&quot;</span> &lt;&lt; endl;
    <a class="code" href="class_r_s_v_p.html#a95acc5695ef5d439aec6996abfb98a0c">print</a>(msg);

    <span class="comment">// process ERO *************************************************************</span>

    EroVector ERO = msg-&gt;getERO();

    <span class="keywordflow">while</span>(ERO.size() &gt; 0 &amp;&amp; ERO[0].node == <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>)
    {
        ERO.erase(ERO.begin());
    }

    msg-&gt;setERO(ERO);

    <span class="comment">// create PSB if doesn&#39;t exist yet *****************************************</span>

    PathStateBlock_t *psb = <a class="code" href="class_r_s_v_p.html#adda3d6bf44e6f8181f0f2083f243474d">findPSB</a>(msg-&gt;getSession(), msg-&gt;<a class="code" href="class_r_s_v_p_path_msg.html#a464ac49e22b9c21e971bf15634ea0626">getSenderTemplate</a>());

    <span class="keywordflow">if</span> (!psb)
    {
        psb = <a class="code" href="class_r_s_v_p.html#a4c582acc45b47942f56a34aa35fcfc70">createPSB</a>(msg);
        <span class="keywordflow">if</span> (!psb)
        {
            <a class="code" href="class_r_s_v_p.html#aede65339bca2fcd134158dd9784100e2">sendPathErrorMessage</a>(msg-&gt;getSession(), msg-&gt;<a class="code" href="class_r_s_v_p_path_msg.html#a464ac49e22b9c21e971bf15634ea0626">getSenderTemplate</a>(),
                msg-&gt;<a class="code" href="class_r_s_v_p_path_msg.html#ae076819f0798afd76bd5ab68453fcdb4">getSenderTspec</a>(), msg-&gt;<a class="code" href="class_r_s_v_p_path_msg.html#a3c732fc83aa501ffd914cc1294d2caf0">getNHOP</a>(), <a class="code" href="_r_s_v_p_8cc.html#aa99604209fc07fe495c4601f85ba8fae">PATH_ERR_UNFEASIBLE</a>);
            <span class="keyword">delete</span> msg;
            <span class="keywordflow">return</span>;
        }
        <a class="code" href="class_r_s_v_p.html#a130138413206f03179fc63d56f4937cd">scheduleRefreshTimer</a>(psb, 0.0);

        <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a>(psb-&gt;OutInterface))
        {
            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aff4add6e86b7bc9ea84079aae0bb3e51">linkIndex</a>(psb-&gt;OutInterface);
            <span class="keywordflow">if</span> (!<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[index].state)
            {
                <a class="code" href="class_r_s_v_p.html#aede65339bca2fcd134158dd9784100e2">sendPathErrorMessage</a>(psb, <a class="code" href="_r_s_v_p_8cc.html#ac45d25ecca4b9be780471dde70968a11">PATH_ERR_NEXTHOP_FAILED</a>);
            }
        }
    }

    <span class="comment">// schedule timer&amp;timeout **************************************************</span>

    <a class="code" href="class_r_s_v_p.html#ac4faa2c6f7a952138fb145bc948c79eb">scheduleTimeout</a>(psb);

    <span class="comment">// create RSB if we&#39;re egress and doesn&#39;t exist yet ************************</span>

    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index;
    ResvStateBlock_t *rsb = <a class="code" href="class_r_s_v_p.html#a7741a01ced48d4fbf371cb7b846a27aa">findRSB</a>(msg-&gt;getSession(), msg-&gt;<a class="code" href="class_r_s_v_p_path_msg.html#a464ac49e22b9c21e971bf15634ea0626">getSenderTemplate</a>(), index);

    <span class="keywordflow">if</span> (!rsb &amp;&amp; psb-&gt;OutInterface.isUnspecified())
    {
        ASSERT(ERO.size() == 0);
        rsb = <a class="code" href="class_r_s_v_p.html#af34403ca300fb9425d67e609c7bbf9a3">createEgressRSB</a>(psb);
        ASSERT(rsb);
        <a class="code" href="class_r_s_v_p.html#a269cab6db09df7ab124076afe9515a6f">scheduleCommitTimer</a>(rsb);
    }

    <span class="keywordflow">if</span> (rsb)
        <a class="code" href="class_r_s_v_p.html#a130138413206f03179fc63d56f4937cd">scheduleRefreshTimer</a>(rsb, 0.0);

    <span class="keyword">delete</span> msg;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9d40c6ab5084f41b18645183f85fecc9"></a><!-- doxytag: member="RSVP::processPathTearMsg" ref="a9d40c6ab5084f41b18645183f85fecc9" args="(RSVPPathTear *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processPathTearMsg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_r_s_v_p_path_tear.html">RSVPPathTear</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a604c7cdcbec35b1c1facf476ddc27eb9">processRSVPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Received PATH_TEAR&quot;</span> &lt;&lt; endl;
    <span class="comment">//print(msg);</span>

    <span class="keywordtype">int</span> lspid = msg-&gt;<a class="code" href="class_r_s_v_p_path_tear.html#a29c79a6f53d19934813fc600739b03db">getLspId</a>();

    PathStateBlock_t *psb = <a class="code" href="class_r_s_v_p.html#adda3d6bf44e6f8181f0f2083f243474d">findPSB</a>(msg-&gt;getSession(), msg-&gt;getSenderTemplate());
    <span class="keywordflow">if</span> (!psb)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;received PATH_TEAR for nonexisting lspid=&quot;</span> &lt;&lt; lspid &lt;&lt; endl;
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">return</span>;
    }

    <span class="comment">// ignore message if backup exists and force flag is not set</span>

    <span class="keywordtype">bool</span> modified = <span class="keyword">false</span>;

    <span class="keywordflow">for</span> (PSBVector::iterator it = <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;OutInterface.getInt() != lspid)
            <span class="keywordflow">continue</span>;

        <span class="comment">// merging backup exists</span>

        <span class="keywordflow">if</span> (!msg-&gt;getForce())
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;merging backup tunnel exists and force flag is not set, ignoring teardown&quot;</span> &lt;&lt; endl;
            <span class="keyword">delete</span> msg;
            <span class="keywordflow">return</span>;
        }

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;merging backup must be removed too&quot;</span> &lt;&lt; endl;

        <a class="code" href="class_r_s_v_p.html#a43b1c666eee1f02f7070d7b39e3dea0f">removePSB</a>(&amp;(*it));
        --it;

        modified = <span class="keyword">true</span>;
    }

    <span class="keywordflow">if</span> (modified)
        psb = <a class="code" href="class_r_s_v_p.html#adda3d6bf44e6f8181f0f2083f243474d">findPSB</a>(msg-&gt;getSession(), msg-&gt;getSenderTemplate());

    <span class="comment">// forward path teardown downstream</span>

    <span class="keywordflow">if</span> (psb-&gt;ERO.size() &gt; 0)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;forward teardown downstream&quot;</span> &lt;&lt; endl;

        <a class="code" href="class_r_s_v_p.html#ab1e3e1ec1c7be3d59e249a147f3f3862">sendPathTearMessage</a>(psb-&gt;ERO[0].node, psb-&gt;Session_Object, psb-&gt;Sender_Template_Object,
            <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aa83e78954a200bcb27bb2404bb5b8b25">getInterfaceAddrByPeerAddress</a>(psb-&gt;ERO[0].node), <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>, msg-&gt;getForce());
    }

    <span class="comment">// remove path state block</span>

    <a class="code" href="class_r_s_v_p.html#a43b1c666eee1f02f7070d7b39e3dea0f">removePSB</a>(psb);

    <span class="keyword">delete</span> msg;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5bc9ab7d3a8b3db1c563d7e7adddb8d6"></a><!-- doxytag: member="RSVP::processPSB_TIMEOUT" ref="a5bc9ab7d3a8b3db1c563d7e7adddb8d6" args="(PsbTimeoutMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processPSB_TIMEOUT </td>
          <td>(</td>
          <td class="paramtype">PsbTimeoutMsg *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a6393538e367792874a6e1a9d9a245ded">processSignallingMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    PathStateBlock_t *psb = <a class="code" href="class_r_s_v_p.html#a15d8d2605257b63906833bf6dcb7e7f9">findPsbById</a>(msg-&gt;getId());
    ASSERT(psb);

    <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a>(psb-&gt;OutInterface))
    {
        ASSERT(psb-&gt;OutInterface == <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aa83e78954a200bcb27bb2404bb5b8b25">getInterfaceAddrByPeerAddress</a>(psb-&gt;ERO[0].node));

        <a class="code" href="class_r_s_v_p.html#ab1e3e1ec1c7be3d59e249a147f3f3862">sendPathTearMessage</a>(psb-&gt;ERO[0].node, psb-&gt;Session_Object,
            psb-&gt;Sender_Template_Object, psb-&gt;OutInterface, <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>, <span class="keyword">false</span>);
    }

    <a class="code" href="class_r_s_v_p.html#a43b1c666eee1f02f7070d7b39e3dea0f">removePSB</a>(psb);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a18f4a987254edd684d0d57345c818c81"></a><!-- doxytag: member="RSVP::processPSB_TIMER" ref="a18f4a987254edd684d0d57345c818c81" args="(PsbTimerMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processPSB_TIMER </td>
          <td>(</td>
          <td class="paramtype">PsbTimerMsg *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a6393538e367792874a6e1a9d9a245ded">processSignallingMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    PathStateBlock_t *psb = <a class="code" href="class_r_s_v_p.html#a15d8d2605257b63906833bf6dcb7e7f9">findPsbById</a>(msg-&gt;getId());
    ASSERT(psb);

    <a class="code" href="class_r_s_v_p.html#acc0978a512bc47c6cbeea226904a4e51">refreshPath</a>(psb);
    <a class="code" href="class_r_s_v_p.html#a130138413206f03179fc63d56f4937cd">scheduleRefreshTimer</a>(psb, <a class="code" href="_r_s_v_p_8cc.html#ac11c8def891747729c9d70aa24c51dd6">PSB_REFRESH_INTERVAL</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaebd61f0dcf0f517e95c4b1e81fea967"></a><!-- doxytag: member="RSVP::processResvMsg" ref="aaebd61f0dcf0f517e95c4b1e81fea967" args="(RSVPResvMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processResvMsg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_r_s_v_p_resv_msg.html">RSVPResvMsg</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a604c7cdcbec35b1c1facf476ddc27eb9">processRSVPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Received RESV_MESSAGE&quot;</span> &lt;&lt; endl;
    <a class="code" href="class_r_s_v_p.html#a95acc5695ef5d439aec6996abfb98a0c">print</a>(msg);

    <a class="code" href="class_i_p_address.html">IPAddress</a> OI = msg-&gt;<a class="code" href="class_r_s_v_p_resv_msg.html#a256dcad2154833acf6b0658aef2a9541">getLIH</a>();

    <span class="comment">// find matching PSB for every flow ****************************************</span>

    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m = 0; m &lt; msg-&gt;getFlowDescriptor().size(); m++)
    {

        PathStateBlock_t *psb = <a class="code" href="class_r_s_v_p.html#adda3d6bf44e6f8181f0f2083f243474d">findPSB</a>(msg-&gt;getSession(), (SenderTemplateObj_t&amp;)msg-&gt;getFlowDescriptor()[m].Filter_Spec_Object);
        <span class="keywordflow">if</span> (!psb)
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;matching PSB not found for lspid=&quot;</span> &lt;&lt; msg-&gt;getFlowDescriptor()[m].Filter_Spec_Object.Lsp_Id &lt;&lt; endl;

            <span class="comment">// remove descriptor from message</span>
            msg-&gt;getFlowDescriptor().erase(msg-&gt;getFlowDescriptor().begin() + m);
            --m;
        }
    }

    <span class="keywordflow">if</span> (msg-&gt;getFlowDescriptor().size() == 0)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;no matching PSB found&quot;</span> &lt;&lt; endl;
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">return</span>;
    }

    <span class="comment">// find matching RSB *******************************************************</span>

    ResvStateBlock_t *rsb = NULL;
    <span class="keywordflow">for</span> (RSBVector::iterator it = <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (!(msg-&gt;isInSession(&amp;it-&gt;Session_Object)))
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (it-&gt;Next_Hop_Address != msg-&gt;<a class="code" href="class_r_s_v_p_resv_msg.html#acba305cab60cbda25aabda67c227e8f1">getNHOP</a>())
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">if</span> (it-&gt;OI != msg-&gt;<a class="code" href="class_r_s_v_p_resv_msg.html#a256dcad2154833acf6b0658aef2a9541">getLIH</a>())
            <span class="keywordflow">continue</span>;

        rsb = &amp;(*it);
        <span class="keywordflow">break</span>;
    }

    <span class="keywordflow">if</span> (!rsb)
    {
        rsb = <a class="code" href="class_r_s_v_p.html#ad53a7a49e12f3cc0ff339e20624406fe">createRSB</a>(msg);

        <a class="code" href="class_r_s_v_p.html#a269cab6db09df7ab124076afe9515a6f">scheduleCommitTimer</a>(rsb);

        <span class="comment">// reservation is new, propagate upstream immediately</span>
        <a class="code" href="class_r_s_v_p.html#a130138413206f03179fc63d56f4937cd">scheduleRefreshTimer</a>(rsb, 0.0);
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_r_s_v_p.html#a2d374e27ad177a0e0e0500deaf1affb7">updateRSB</a>(rsb, msg);

    <a class="code" href="class_r_s_v_p.html#ac4faa2c6f7a952138fb145bc948c79eb">scheduleTimeout</a>(rsb);

    <span class="keyword">delete</span> msg;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7e760e4263df7614b1dfbea8e39cc8f3"></a><!-- doxytag: member="RSVP::processRSB_COMMIT_TIMER" ref="a7e760e4263df7614b1dfbea8e39cc8f3" args="(RsbCommitTimerMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processRSB_COMMIT_TIMER </td>
          <td>(</td>
          <td class="paramtype">RsbCommitTimerMsg *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a6393538e367792874a6e1a9d9a245ded">processSignallingMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ResvStateBlock_t *rsb = <a class="code" href="class_r_s_v_p.html#a96e4fae87f154aec8efed1f306864d81">findRsbById</a>(msg-&gt;getId());
    <a class="code" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv</a>(rsb);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7b967a2ab4a53edc0bdd12c8ad3a4c99"></a><!-- doxytag: member="RSVP::processRSB_REFRESH_TIMER" ref="a7b967a2ab4a53edc0bdd12c8ad3a4c99" args="(RsbRefreshTimerMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processRSB_REFRESH_TIMER </td>
          <td>(</td>
          <td class="paramtype">RsbRefreshTimerMsg *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a6393538e367792874a6e1a9d9a245ded">processSignallingMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ResvStateBlock_t *rsb = <a class="code" href="class_r_s_v_p.html#a96e4fae87f154aec8efed1f306864d81">findRsbById</a>(msg-&gt;getId());
    <span class="keywordflow">if</span> (rsb-&gt;commitTimerMsg-&gt;isScheduled())
    {
        <span class="comment">// reschedule after commit</span>
        <a class="code" href="class_r_s_v_p.html#a130138413206f03179fc63d56f4937cd">scheduleRefreshTimer</a>(rsb, 0.0);
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_r_s_v_p.html#a8745c357a38f4ab3b5c39668b5498820">refreshResv</a>(rsb);

        <a class="code" href="class_r_s_v_p.html#a130138413206f03179fc63d56f4937cd">scheduleRefreshTimer</a>(rsb, <a class="code" href="_r_s_v_p_8cc.html#a456bf6eeba2ebcdda8a28d900ae59ddb">RSB_REFRESH_INTERVAL</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2fc38252a7b31028e80b360fc8dc7af3"></a><!-- doxytag: member="RSVP::processRSB_TIMEOUT" ref="a2fc38252a7b31028e80b360fc8dc7af3" args="(RsbTimeoutMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processRSB_TIMEOUT </td>
          <td>(</td>
          <td class="paramtype">RsbTimeoutMsg *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a6393538e367792874a6e1a9d9a245ded">processSignallingMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;RSB TIMEOUT RSB &quot;</span> &lt;&lt; msg-&gt;getId() &lt;&lt; endl;

    ResvStateBlock_t *rsb = <a class="code" href="class_r_s_v_p.html#a96e4fae87f154aec8efed1f306864d81">findRsbById</a>(msg-&gt;getId());

    ASSERT(rsb);
    ASSERT(<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a>(rsb-&gt;OI));

    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; rsb-&gt;FlowDescriptor.size(); i++)
    {
        <a class="code" href="class_r_s_v_p.html#a0a010c3a16c0b7fbc37dec6368d9ad03">removeRsbFilter</a>(rsb, 0);
    }
    <a class="code" href="class_r_s_v_p.html#af0469af2686bf9440e3d7320c57bfb6f">removeRSB</a>(rsb);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a604c7cdcbec35b1c1facf476ddc27eb9"></a><!-- doxytag: member="RSVP::processRSVPMessage" ref="a604c7cdcbec35b1c1facf476ddc27eb9" args="(RSVPMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processRSVPMessage </td>
          <td>(</td>
          <td class="paramtype">RSVPMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a4772469f02e97f0d99a3c00f298322dd">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> kind = msg-&gt;getRsvpKind();
    <span class="keywordflow">switch</span>(kind)
    {
        <span class="keywordflow">case</span> PATH_MESSAGE:
            <a class="code" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">processPathMsg</a>(check_and_cast&lt;RSVPPathMsg*&gt;(msg));
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> RESV_MESSAGE:
            <a class="code" href="class_r_s_v_p.html#aaebd61f0dcf0f517e95c4b1e81fea967">processResvMsg</a>(check_and_cast&lt;RSVPResvMsg*&gt;(msg));
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> PTEAR_MESSAGE:
            <a class="code" href="class_r_s_v_p.html#a9d40c6ab5084f41b18645183f85fecc9">processPathTearMsg</a>(check_and_cast&lt;RSVPPathTear*&gt;(msg));
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> HELLO_MESSAGE:
            <a class="code" href="class_r_s_v_p.html#a4248b4a0ff4175b4be496ec30aee8672">processHelloMsg</a>(check_and_cast&lt;RSVPHelloMsg*&gt;(msg));
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> PERROR_MESSAGE:
            <a class="code" href="class_r_s_v_p.html#aaa1b0102445119825a264bf187aca6e9">processPathErrMsg</a>(check_and_cast&lt;RSVPPathError*&gt;(msg));
            <span class="keywordflow">break</span>;

        <span class="keywordflow">default</span>:
            ASSERT(<span class="keyword">false</span>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6393538e367792874a6e1a9d9a245ded"></a><!-- doxytag: member="RSVP::processSignallingMessage" ref="a6393538e367792874a6e1a9d9a245ded" args="(SignallingMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::processSignallingMessage </td>
          <td>(</td>
          <td class="paramtype">SignallingMsg *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a4772469f02e97f0d99a3c00f298322dd">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> command = msg-&gt;getCommand();
    <span class="keywordflow">switch</span>(command)
    {
        <span class="keywordflow">case</span> MSG_PSB_TIMER:
            <a class="code" href="class_r_s_v_p.html#a18f4a987254edd684d0d57345c818c81">processPSB_TIMER</a>(check_and_cast&lt;PsbTimerMsg*&gt;(msg));
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> MSG_PSB_TIMEOUT:
            <a class="code" href="class_r_s_v_p.html#a5bc9ab7d3a8b3db1c563d7e7adddb8d6">processPSB_TIMEOUT</a>(check_and_cast&lt;PsbTimeoutMsg*&gt;(msg));
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> MSG_RSB_REFRESH_TIMER:
            <a class="code" href="class_r_s_v_p.html#a7b967a2ab4a53edc0bdd12c8ad3a4c99">processRSB_REFRESH_TIMER</a>(check_and_cast&lt;RsbRefreshTimerMsg*&gt;(msg));
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> MSG_RSB_COMMIT_TIMER:
            <a class="code" href="class_r_s_v_p.html#a7e760e4263df7614b1dfbea8e39cc8f3">processRSB_COMMIT_TIMER</a>(check_and_cast&lt;RsbCommitTimerMsg*&gt;(msg));
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> MSG_RSB_TIMEOUT:
            <a class="code" href="class_r_s_v_p.html#a2fc38252a7b31028e80b360fc8dc7af3">processRSB_TIMEOUT</a>(check_and_cast&lt;RsbTimeoutMsg*&gt;(msg));
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> MSG_HELLO_TIMER:
            <a class="code" href="class_r_s_v_p.html#a5c7ef8c3f1f0a9b7061f499891a82ad6">processHELLO_TIMER</a>(check_and_cast&lt;HelloTimerMsg*&gt;(msg));
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> MSG_HELLO_TIMEOUT:
            <a class="code" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">processHELLO_TIMEOUT</a>(check_and_cast&lt;HelloTimeoutMsg*&gt;(msg));
            <span class="keywordflow">break</span>;

        <span class="keywordflow">case</span> MSG_PATH_NOTIFY:
            <a class="code" href="class_r_s_v_p.html#a046faf4019fa1dd31f24ee445236236b">processPATH_NOTIFY</a>(check_and_cast&lt;PathNotifyMsg*&gt;(msg));
            <span class="keywordflow">break</span>;

        <span class="keywordflow">default</span>:
            ASSERT(<span class="keyword">false</span>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7afe215d5b5f46066a7d2db44ac93369"></a><!-- doxytag: member="RSVP::readTrafficFromXML" ref="a7afe215d5b5f46066a7d2db44ac93369" args="(const cXMLElement *traffic)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::readTrafficFromXML </td>
          <td>(</td>
          <td class="paramtype">const cXMLElement *&#160;</td>
          <td class="paramname"><em>traffic</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(<a class="code" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a>);
    ASSERT(!strcmp(<a class="code" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a>-&gt;getTagName(), <span class="stringliteral">&quot;sessions&quot;</span>));
    <a class="code" href="_x_m_l_utils_8cc.html#a10d193d56ab9828e48d984d940cc30c0">checkTags</a>(<a class="code" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a>, <span class="stringliteral">&quot;session&quot;</span>);
    cXMLElementList list = <a class="code" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a>-&gt;getChildrenByTagName(<span class="stringliteral">&quot;session&quot;</span>);
    <span class="keywordflow">for</span> (cXMLElementList::iterator it=list.begin(); it != list.end(); it++)
        <a class="code" href="class_r_s_v_p.html#adada9d53651da0e8c535e7ed47f931fd">readTrafficSessionFromXML</a>(*it);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a14bfd32e0426538ba9b59a18037bb57a"></a><!-- doxytag: member="RSVP::readTrafficRouteFromXML" ref="a14bfd32e0426538ba9b59a18037bb57a" args="(const cXMLElement *route)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EroVector RSVP::readTrafficRouteFromXML </td>
          <td>(</td>
          <td class="paramtype">const cXMLElement *&#160;</td>
          <td class="paramname"><em>route</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#adada9d53651da0e8c535e7ed47f931fd">readTrafficSessionFromXML()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_x_m_l_utils_8cc.html#a10d193d56ab9828e48d984d940cc30c0">checkTags</a>(route, <span class="stringliteral">&quot;node lnode&quot;</span>);

    EroVector ERO;

    <span class="keywordflow">for</span> (cXMLElement *hop = route-&gt;getFirstChild(); hop; hop = hop-&gt;getNextSibling())
    {
        EroObj_t h;
        <span class="keywordflow">if</span> (!strcmp(hop-&gt;getTagName(), <span class="stringliteral">&quot;node&quot;</span>))
        {
            h.L = <span class="keyword">false</span>;
            h.node = <a class="code" href="class_i_p_address_resolver.html">IPAddressResolver</a>().<a class="code" href="class_i_p_address_resolver.html#a7d2ced93d5db2fca43c46b26d25d2e69">resolve</a>(hop-&gt;getNodeValue()).get4();
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(hop-&gt;getTagName(), <span class="stringliteral">&quot;lnode&quot;</span>))
        {
            h.L = <span class="keyword">true</span>;
            h.node = <a class="code" href="class_i_p_address_resolver.html">IPAddressResolver</a>().<a class="code" href="class_i_p_address_resolver.html#a7d2ced93d5db2fca43c46b26d25d2e69">resolve</a>(hop-&gt;getNodeValue()).get4();
        }
        <span class="keywordflow">else</span>
        {
            ASSERT(<span class="keyword">false</span>);
        }
        ERO.push_back(h);
    }

    <span class="keywordflow">return</span> ERO;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adada9d53651da0e8c535e7ed47f931fd"></a><!-- doxytag: member="RSVP::readTrafficSessionFromXML" ref="adada9d53651da0e8c535e7ed47f931fd" args="(const cXMLElement *session)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::readTrafficSessionFromXML </td>
          <td>(</td>
          <td class="paramtype">const cXMLElement *&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#aa8c17ae4390aeedc6b6d1bc6e0743c5f">addSession()</a>, and <a class="el" href="class_r_s_v_p.html#a7afe215d5b5f46066a7d2db44ac93369">readTrafficFromXML()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_x_m_l_utils_8cc.html#a10d193d56ab9828e48d984d940cc30c0">checkTags</a>(session, <span class="stringliteral">&quot;tunnel_id endpoint setup_pri holding_pri paths&quot;</span>);

    traffic_session_t newSession;

    newSession.sobj.Tunnel_Id = <a class="code" href="_x_m_l_utils_8cc.html#a904310d712761c82c65e7975800e817b">getParameterIntValue</a>(session, <span class="stringliteral">&quot;tunnel_id&quot;</span>);
    newSession.sobj.Extended_Tunnel_Id = <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>.<a class="code" href="class_i_p_address.html#a807ca46964a8403cf0c70f0772179524">getInt</a>();
    newSession.sobj.DestAddress = <a class="code" href="_x_m_l_utils_8cc.html#abc530a666bb91e5d1305f0d0fc5525c7">getParameterIPAddressValue</a>(session, <span class="stringliteral">&quot;endpoint&quot;</span>);

    std::vector&lt;traffic_session_t&gt;::iterator sit = <a class="code" href="class_r_s_v_p.html#adbc9840e5bb15c37459aacb83385bdc0">findSession</a>(newSession.sobj);

    <span class="keywordtype">bool</span> merge;

    <span class="keywordflow">if</span> (sit != <a class="code" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a>.end())
    {
        <span class="comment">// session already exits, add new paths</span>

        merge = <span class="keyword">true</span>;

        ASSERT(!<a class="code" href="_x_m_l_utils_8cc.html#a354dec476d4b54e6a7d45e7c02dfdab3">getUniqueChildIfExists</a>(session, <span class="stringliteral">&quot;holding_pri&quot;</span>) || <a class="code" href="_x_m_l_utils_8cc.html#a904310d712761c82c65e7975800e817b">getParameterIntValue</a>(session, <span class="stringliteral">&quot;holding_pri&quot;</span>) == sit-&gt;sobj.holdingPri);
        ASSERT(!<a class="code" href="_x_m_l_utils_8cc.html#a354dec476d4b54e6a7d45e7c02dfdab3">getUniqueChildIfExists</a>(session, <span class="stringliteral">&quot;setup_pri&quot;</span>) || <a class="code" href="_x_m_l_utils_8cc.html#a904310d712761c82c65e7975800e817b">getParameterIntValue</a>(session, <span class="stringliteral">&quot;setup_pri&quot;</span>) == sit-&gt;sobj.setupPri);

        newSession.sobj.setupPri = sit-&gt;sobj.setupPri;
        newSession.sobj.holdingPri = sit-&gt;sobj.holdingPri;

        sit-&gt;sobj = newSession.sobj;
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// session not found, create new</span>

        merge = <span class="keyword">false</span>;

        newSession.sobj.setupPri = <a class="code" href="_x_m_l_utils_8cc.html#a904310d712761c82c65e7975800e817b">getParameterIntValue</a>(session, <span class="stringliteral">&quot;setup_pri&quot;</span>, 7);
        newSession.sobj.holdingPri = <a class="code" href="_x_m_l_utils_8cc.html#a904310d712761c82c65e7975800e817b">getParameterIntValue</a>(session, <span class="stringliteral">&quot;holding_pri&quot;</span>, 7);
    }

    <span class="keyword">const</span> cXMLElement *paths = <a class="code" href="_x_m_l_utils_8cc.html#a8a79ce4f5f5c6998172d2234877ca4ca">getUniqueChild</a>(session, <span class="stringliteral">&quot;paths&quot;</span>);
    <a class="code" href="_x_m_l_utils_8cc.html#a10d193d56ab9828e48d984d940cc30c0">checkTags</a>(paths, <span class="stringliteral">&quot;path&quot;</span>);

    cXMLElementList list = paths-&gt;getChildrenByTagName(<span class="stringliteral">&quot;path&quot;</span>);
    <span class="keywordflow">for</span> (cXMLElementList::iterator it=list.begin(); it != list.end(); it++)
    {
        cXMLElement *path = *it;
        <a class="code" href="_x_m_l_utils_8cc.html#a10d193d56ab9828e48d984d940cc30c0">checkTags</a>(path, <span class="stringliteral">&quot;sender lspid bandwidth max_delay route permanent owner color&quot;</span>);

        <span class="keywordtype">int</span> lspid = <a class="code" href="_x_m_l_utils_8cc.html#a904310d712761c82c65e7975800e817b">getParameterIntValue</a>(path, <span class="stringliteral">&quot;lspid&quot;</span>);;

        std::vector&lt;traffic_path_t&gt;::iterator pit;

        traffic_path_t newPath;

        newPath.sender.SrcAddress = <a class="code" href="_x_m_l_utils_8cc.html#abc530a666bb91e5d1305f0d0fc5525c7">getParameterIPAddressValue</a>(path, <span class="stringliteral">&quot;sender&quot;</span>, <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>);
        newPath.sender.Lsp_Id = lspid;

        <span class="comment">// make sure path doesn&#39;t exist yet</span>

        <span class="keywordflow">if</span> (merge)
        {
            pit = <a class="code" href="class_r_s_v_p.html#a92c0c4053e1f2d4a7fa85fed30d9a49d">findPath</a>(&amp;(*sit), newPath.sender);
            <span class="keywordflow">if</span> (pit != sit-&gt;paths.end())
            {
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;path &quot;</span> &lt;&lt; lspid &lt;&lt; <span class="stringliteral">&quot; already exists in this session, doing nothing&quot;</span> &lt;&lt; endl;
                <span class="keywordflow">continue</span>;
            }
        }
        <span class="keywordflow">else</span>
        {
            pit = <a class="code" href="class_r_s_v_p.html#a92c0c4053e1f2d4a7fa85fed30d9a49d">findPath</a>(&amp;newSession, newPath.sender);
            <span class="keywordflow">if</span> (pit != newSession.paths.end())
            {
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;path &quot;</span> &lt;&lt; lspid &lt;&lt; <span class="stringliteral">&quot; already exists in this session, doing nothing&quot;</span> &lt;&lt; endl;
                <span class="keywordflow">continue</span>;
            }
        }

        <span class="keyword">const</span> <span class="keywordtype">char</span> *str = <a class="code" href="_x_m_l_utils_8cc.html#af497e46a3d73dc71fc4dffbe2b07ad1b">getParameterStrValue</a>(path, <span class="stringliteral">&quot;owner&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
        <span class="keywordflow">if</span> (strlen(str))
        {
            cModule *mod = simulation.getModuleByPath(str);
            newPath.owner = mod-&gt;getId();
        }
        <span class="keywordflow">else</span>
        {
            newPath.owner = getId();
        }

        newPath.permanent = <a class="code" href="_x_m_l_utils_8cc.html#a5245590987c556092552c2e25fafc964">getParameterBoolValue</a>(path, <span class="stringliteral">&quot;permanent&quot;</span>, <span class="keyword">true</span>);
        newPath.color = <a class="code" href="_x_m_l_utils_8cc.html#a904310d712761c82c65e7975800e817b">getParameterIntValue</a>(path, <span class="stringliteral">&quot;color&quot;</span>, 0);

        newPath.tspec.req_bandwidth = <a class="code" href="_x_m_l_utils_8cc.html#a0de17fc8d544d2ea831eff7d563e787f">getParameterDoubleValue</a>(path, <span class="stringliteral">&quot;bandwidth&quot;</span>, 0.0);
        newPath.max_delay = <a class="code" href="_x_m_l_utils_8cc.html#a0de17fc8d544d2ea831eff7d563e787f">getParameterDoubleValue</a>(path, <span class="stringliteral">&quot;max_delay&quot;</span>, 0.0);

        <span class="keyword">const</span> cXMLElement *route = <a class="code" href="_x_m_l_utils_8cc.html#a354dec476d4b54e6a7d45e7c02dfdab3">getUniqueChildIfExists</a>(path, <span class="stringliteral">&quot;route&quot;</span>);
        <span class="keywordflow">if</span> (route)
            newPath.ERO = <a class="code" href="class_r_s_v_p.html#a14bfd32e0426538ba9b59a18037bb57a">readTrafficRouteFromXML</a>(route);

        <span class="keywordflow">if</span> (merge)
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;adding new path into an existing session&quot;</span> &lt;&lt; endl;

            sit-&gt;paths.push_back(newPath);
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;adding new path into new session&quot;</span> &lt;&lt; endl;

            newSession.paths.push_back(newPath);
        }

        <span class="comment">// schedule path creation</span>

        <a class="code" href="class_r_s_v_p.html#a472ceb4e889ba0fc93649dff8e5d549a">sendPathNotify</a>(getId(), newSession.sobj, newPath.sender, PATH_RETRY, 0.0);
    }

    <span class="keywordflow">if</span> (!merge)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;adding new session into database&quot;</span> &lt;&lt; endl;

        <a class="code" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">traffic</a>.push_back(newSession);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a771e852915d4521e65a3d243bdf1a82c"></a><!-- doxytag: member="RSVP::recoveryEvent" ref="a771e852915d4521e65a3d243bdf1a82c" args="(IPAddress peer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::recoveryEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>peer</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a4248b4a0ff4175b4be496ec30aee8672">processHelloMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// called when peer&#39;s operation is restored</span>

    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#aff4add6e86b7bc9ea84079aae0bb3e51">linkIndex</a>(<a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>, peer);
    <span class="keywordtype">bool</span> rtmodified = !<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[index].state;
    <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[index].state = <span class="keyword">true</span>;
    <a class="code" href="class_r_s_v_p.html#ab63d5bdece74e8218d703ca07604dbe6">announceLinkChange</a>(index);

    <span class="comment">// rebuild routing table if link state changed</span>
    <span class="keywordflow">if</span> (rtmodified)
        <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a20dbae0b12fb78bc9771eba4e11f0edc">rebuildRoutingTable</a>();

    <span class="comment">// refresh all paths towards this neighbour</span>
    <span class="keywordflow">for</span> (PSBVector::iterator it = <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;OutInterface != <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a8ab5c356644784262be0ae484395441e">ted</a>[index].local)
            <span class="keywordflow">continue</span>;

        <a class="code" href="class_r_s_v_p.html#a130138413206f03179fc63d56f4937cd">scheduleRefreshTimer</a>(&amp;(*it), 0.0);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="acc0978a512bc47c6cbeea226904a4e51"></a><!-- doxytag: member="RSVP::refreshPath" ref="acc0978a512bc47c6cbeea226904a4e51" args="(PathStateBlock_t *psbEle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::refreshPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>psbEle</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a18f4a987254edd684d0d57345c818c81">processPSB_TIMER()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;refresh path (PSB &quot;</span> &lt;&lt; psbEle-&gt;id &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;

    <a class="code" href="class_i_p_address.html">IPAddress</a>&amp; OI = psbEle-&gt;OutInterface;
    EroVector&amp; ERO = psbEle-&gt;ERO;

    ASSERT(!OI.<a class="code" href="class_i_p_address.html#a7fb3c274d7a8600be890f83c028d5f96">isUnspecified</a>());
    ASSERT(<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a>(OI));

    <a class="code" href="class_r_s_v_p_path_msg.html">RSVPPathMsg</a> *pm = <span class="keyword">new</span> <a class="code" href="class_r_s_v_p_path_msg.html">RSVPPathMsg</a>(<span class="stringliteral">&quot;Path&quot;</span>);

    pm-&gt;setSession(psbEle-&gt;Session_Object);
    pm-&gt;setSenderTemplate(psbEle-&gt;Sender_Template_Object);
    pm-&gt;setSenderTspec(psbEle-&gt;Sender_Tspec_Object);

    RsvpHopObj_t hop;
    hop.Logical_Interface_Handle = OI;
    hop.Next_Hop_Address = <a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>;
    pm-&gt;setHop(hop);

    pm-&gt;setERO(ERO);
    pm-&gt;setColor(psbEle-&gt;color);

    <span class="keywordtype">int</span> length = 85 + (ERO.size() * 5);

    pm-&gt;setByteLength(length);

    <a class="code" href="class_i_p_address.html">IPAddress</a> nextHop = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#ab55f38433f365eb6411ce8d0caf20ca7">getPeerByLocalAddress</a>(OI);

    ASSERT(ERO.size() == 0 ||ERO[0].node.equals(nextHop) || ERO[0].L);

    <a class="code" href="class_r_s_v_p.html#afe54ffd483063082234277edce5e792d">sendToIP</a>(pm, nextHop);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8745c357a38f4ab3b5c39668b5498820"></a><!-- doxytag: member="RSVP::refreshResv" ref="a8745c357a38f4ab3b5c39668b5498820" args="(ResvStateBlock_t *rsbEle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::refreshResv </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>rsbEle</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a7b967a2ab4a53edc0bdd12c8ad3a4c99">processRSB_REFRESH_TIMER()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;refresh reservation (RSB &quot;</span> &lt;&lt; rsbEle-&gt;id &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;

    IPAddressVector phops;

    <span class="keywordflow">for</span> (PSBVector::iterator it = <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;OutInterface != rsbEle-&gt;OI)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (int)rsbEle-&gt;FlowDescriptor.size(); i++)
        {
            <span class="keywordflow">if</span> ((FilterSpecObj_t&amp;)it-&gt;Sender_Template_Object != rsbEle-&gt;FlowDescriptor[i].Filter_Spec_Object)
                <span class="keywordflow">continue</span>;

            <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a>(it-&gt;Previous_Hop_Address))
                <span class="keywordflow">continue</span>; <span class="comment">// IR nothing to refresh</span>

            <span class="keywordflow">if</span> (!<a class="code" href="_utils_8cc.html#a33bdc8b2583dcc9d2a8bfe1ec578352d">find</a>(phops, it-&gt;Previous_Hop_Address))
                phops.push_back(it-&gt;Previous_Hop_Address);
        }

        <span class="keywordflow">for</span> (IPAddressVector::iterator it = phops.begin(); it != phops.end(); it++)
            <a class="code" href="class_r_s_v_p.html#a8745c357a38f4ab3b5c39668b5498820">refreshResv</a>(rsbEle, *it);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af84a7ab872ddde72e4e6394c904285ab"></a><!-- doxytag: member="RSVP::refreshResv" ref="af84a7ab872ddde72e4e6394c904285ab" args="(ResvStateBlock_t *rsbEle, IPAddress PHOP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::refreshResv </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>rsbEle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>PHOP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;refresh reservation (RSB &quot;</span> &lt;&lt; rsbEle-&gt;id &lt;&lt; <span class="stringliteral">&quot;) PHOP &quot;</span> &lt;&lt; PHOP &lt;&lt; endl;

    <a class="code" href="class_r_s_v_p_resv_msg.html">RSVPResvMsg</a> *msg = <span class="keyword">new</span> <a class="code" href="class_r_s_v_p_resv_msg.html">RSVPResvMsg</a>(<span class="stringliteral">&quot;    Resv&quot;</span>);

    FlowDescriptorVector flows;

    msg-&gt;setSession(rsbEle-&gt;Session_Object);

    RsvpHopObj_t hop;
    hop.Logical_Interface_Handle = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a2cbea20c740531cd560319d0e53c1ddf">peerRemoteInterface</a>(PHOP);
    hop.Next_Hop_Address = PHOP;
    msg-&gt;setHop(hop);

    <span class="keywordflow">for</span> (PSBVector::iterator it = <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;Previous_Hop_Address != PHOP)
            <span class="keywordflow">continue</span>;

        <span class="comment">//if (it-&gt;LIH != LIH)</span>
        <span class="comment">//  continue;</span>

        <span class="keywordflow">if</span> (it-&gt;Session_Object != rsbEle-&gt;Session_Object)
            <span class="keywordflow">continue</span>;

        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c = 0; c &lt; rsbEle-&gt;FlowDescriptor.size(); c++)
        {
            <span class="keywordflow">if</span> ((FilterSpecObj_t&amp;)it-&gt;Sender_Template_Object != rsbEle-&gt;FlowDescriptor[c].Filter_Spec_Object)
                <span class="keywordflow">continue</span>;

            ASSERT(rsbEle-&gt;inLabelVector.size() == rsbEle-&gt;FlowDescriptor.size());

            FlowDescriptor_t flow;
            flow.Filter_Spec_Object = (FilterSpecObj_t&amp;)it-&gt;Sender_Template_Object;
            flow.Flowspec_Object = (FlowSpecObj_t&amp;)it-&gt;Sender_Tspec_Object;
            flow.RRO = rsbEle-&gt;FlowDescriptor[c].RRO;
            flow.RRO.push_back(<a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>);
            flow.label = rsbEle-&gt;inLabelVector[c];
            flows.push_back(flow);

            <span class="keywordflow">break</span>;
        }
    }

    msg-&gt;setFlowDescriptor(flows);

    <span class="keywordtype">int</span> fd_length = 0;
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; flows.size(); i++)
        fd_length += 28 + (flows[i].RRO.size() * 4);

    <span class="keywordtype">int</span> length = 34 + fd_length;

    <span class="comment">// see comment elsewhere (in TED.cc)</span>
    length /= 10;

    msg-&gt;setByteLength(length);

    <a class="code" href="class_r_s_v_p.html#afe54ffd483063082234277edce5e792d">sendToIP</a>(msg, PHOP);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a43b1c666eee1f02f7070d7b39e3dea0f"></a><!-- doxytag: member="RSVP::removePSB" ref="a43b1c666eee1f02f7070d7b39e3dea0f" args="(PathStateBlock_t *psb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::removePSB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>psb</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a1578adc0aa64e000a877ab117a3e9060">delSession()</a>, <a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">pathProblem()</a>, <a class="el" href="class_r_s_v_p.html#a9d40c6ab5084f41b18645183f85fecc9">processPathTearMsg()</a>, and <a class="el" href="class_r_s_v_p.html#a5bc9ab7d3a8b3db1c563d7e7adddb8d6">processPSB_TIMEOUT()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(psb);

    <span class="keywordtype">int</span> lspid = psb-&gt;Sender_Template_Object.Lsp_Id;

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing PSB &quot;</span> &lt;&lt; psb-&gt;id &lt;&lt; <span class="stringliteral">&quot; (lspid &quot;</span> &lt;&lt; lspid &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;

    <span class="comment">// remove reservation state if exists **************************************</span>

    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> filterIndex;
    ResvStateBlock_t *rsb = <a class="code" href="class_r_s_v_p.html#a7741a01ced48d4fbf371cb7b846a27aa">findRSB</a>(psb-&gt;Session_Object, psb-&gt;Sender_Template_Object, filterIndex);
    <span class="keywordflow">if</span> (rsb)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;reservation state present, will be removed too&quot;</span> &lt;&lt; endl;

        <a class="code" href="class_r_s_v_p.html#a0a010c3a16c0b7fbc37dec6368d9ad03">removeRsbFilter</a>(rsb, filterIndex);
    }

    <span class="comment">// proceed with actual removal *********************************************</span>

    cancelEvent(psb-&gt;timerMsg);
    cancelEvent(psb-&gt;timeoutMsg);

    <span class="keyword">delete</span> psb-&gt;timerMsg;
    <span class="keyword">delete</span> psb-&gt;timeoutMsg;

    <span class="keywordflow">for</span> (PSBVector::iterator it = <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;id != psb-&gt;id)
            <span class="keywordflow">continue</span>;

        <a class="code" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">PSBList</a>.erase(it);
        <span class="keywordflow">return</span>;
    }
    ASSERT(<span class="keyword">false</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af0469af2686bf9440e3d7320c57bfb6f"></a><!-- doxytag: member="RSVP::removeRSB" ref="af0469af2686bf9440e3d7320c57bfb6f" args="(ResvStateBlock_t *rsb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::removeRSB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>rsb</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv()</a>, and <a class="el" href="class_r_s_v_p.html#a2fc38252a7b31028e80b360fc8dc7af3">processRSB_TIMEOUT()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(rsb);
    ASSERT(rsb-&gt;FlowDescriptor.size() == 0);

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing empty RSB &quot;</span> &lt;&lt; rsb-&gt;id &lt;&lt; endl;

    cancelEvent(rsb-&gt;refreshTimerMsg);
    cancelEvent(rsb-&gt;commitTimerMsg);
    cancelEvent(rsb-&gt;timeoutMsg);

    <span class="keyword">delete</span> rsb-&gt;refreshTimerMsg;
    <span class="keyword">delete</span> rsb-&gt;commitTimerMsg;
    <span class="keyword">delete</span> rsb-&gt;timeoutMsg;

    <span class="keywordflow">if</span> (rsb-&gt;Flowspec_Object.req_bandwidth &gt; 0)
    {
        <span class="comment">// deallocate resources</span>
        <a class="code" href="class_r_s_v_p.html#a58055c8fd6f3b98c57ef68adeaa009e3">allocateResource</a>(rsb-&gt;OI, rsb-&gt;Session_Object, -rsb-&gt;Flowspec_Object.req_bandwidth);
    }

    <span class="keywordflow">for</span> (RSBVector::iterator it = <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.begin(); it != <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.end(); it++)
    {
        <span class="keywordflow">if</span> (it-&gt;id != rsb-&gt;id)
            <span class="keywordflow">continue</span>;

        <a class="code" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSBList</a>.erase(it);
        <span class="keywordflow">return</span>;
    }
    ASSERT(<span class="keyword">false</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0a010c3a16c0b7fbc37dec6368d9ad03"></a><!-- doxytag: member="RSVP::removeRsbFilter" ref="a0a010c3a16c0b7fbc37dec6368d9ad03" args="(ResvStateBlock_t *rsb, unsigned int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::removeRsbFilter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>rsb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a2fc38252a7b31028e80b360fc8dc7af3">processRSB_TIMEOUT()</a>, and <a class="el" href="class_r_s_v_p.html#a43b1c666eee1f02f7070d7b39e3dea0f">removePSB()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(rsb);
    ASSERT(index &lt; rsb-&gt;FlowDescriptor.size());
    ASSERT(rsb-&gt;inLabelVector.size() == rsb-&gt;FlowDescriptor.size());

    <span class="keywordtype">int</span> lspid = rsb-&gt;FlowDescriptor[index].Filter_Spec_Object.Lsp_Id;
    <span class="keywordtype">int</span> inLabel = rsb-&gt;inLabelVector[index];

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;removing filter (lspid=&quot;</span> &lt;&lt; lspid &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;

    <span class="keywordflow">if</span> (inLabel != -1)
        <a class="code" href="class_r_s_v_p.html#ad137623f6252e3398084176dc311885f">lt</a>-&gt;<a class="code" href="class_l_i_b_table.html#aeaf750f1e663ddd1a5a6e76406ad8a14">removeLibEntry</a>(inLabel);

    rsb-&gt;FlowDescriptor.erase(rsb-&gt;FlowDescriptor.begin() + index);
    rsb-&gt;inLabelVector.erase(rsb-&gt;inLabelVector.begin() + index);

    <a class="code" href="class_r_s_v_p.html#a269cab6db09df7ab124076afe9515a6f">scheduleCommitTimer</a>(rsb);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a269cab6db09df7ab124076afe9515a6f"></a><!-- doxytag: member="RSVP::scheduleCommitTimer" ref="a269cab6db09df7ab124076afe9515a6f" args="(ResvStateBlock_t *rsbEle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::scheduleCommitTimer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>rsbEle</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv()</a>, <a class="el" href="class_r_s_v_p.html#a933ffa437ba9f3cef9efdfc5f1ac18a9">preempt()</a>, <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">processPathMsg()</a>, <a class="el" href="class_r_s_v_p.html#aaebd61f0dcf0f517e95c4b1e81fea967">processResvMsg()</a>, <a class="el" href="class_r_s_v_p.html#a0a010c3a16c0b7fbc37dec6368d9ad03">removeRsbFilter()</a>, and <a class="el" href="class_r_s_v_p.html#a2d374e27ad177a0e0e0500deaf1affb7">updateRSB()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(rsbEle);

    <span class="keywordflow">if</span> (rsbEle-&gt;commitTimerMsg-&gt;isScheduled())
        cancelEvent(rsbEle-&gt;commitTimerMsg);

    scheduleAt(simTime(), rsbEle-&gt;commitTimerMsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a130138413206f03179fc63d56f4937cd"></a><!-- doxytag: member="RSVP::scheduleRefreshTimer" ref="a130138413206f03179fc63d56f4937cd" args="(PathStateBlock_t *psbEle, simtime_t delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::scheduleRefreshTimer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>psbEle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a820c09dd3002f2309aeaa1f30d092887">createPath()</a>, <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">processPathMsg()</a>, <a class="el" href="class_r_s_v_p.html#a18f4a987254edd684d0d57345c818c81">processPSB_TIMER()</a>, <a class="el" href="class_r_s_v_p.html#aaebd61f0dcf0f517e95c4b1e81fea967">processResvMsg()</a>, <a class="el" href="class_r_s_v_p.html#a7b967a2ab4a53edc0bdd12c8ad3a4c99">processRSB_REFRESH_TIMER()</a>, <a class="el" href="class_r_s_v_p.html#a771e852915d4521e65a3d243bdf1a82c">recoveryEvent()</a>, and <a class="el" href="class_r_s_v_p.html#a2d374e27ad177a0e0e0500deaf1affb7">updateRSB()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(psbEle);

    <span class="keywordflow">if</span> (psbEle-&gt;OutInterface.isUnspecified())
        <span class="keywordflow">return</span>;

    <span class="keywordflow">if</span> (!<a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#a31051946d209ff61ec712905ffe805c3">isLocalAddress</a>(psbEle-&gt;OutInterface))
        <span class="keywordflow">return</span>;

    <span class="keywordflow">if</span> (psbEle-&gt;timerMsg-&gt;isScheduled())
        cancelEvent(psbEle-&gt;timerMsg);

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling PSB &quot;</span> &lt;&lt; psbEle-&gt;id &lt;&lt; <span class="stringliteral">&quot; refresh &quot;</span> &lt;&lt; (simTime() + delay) &lt;&lt; endl;

    scheduleAt(simTime() + delay, psbEle-&gt;timerMsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a67c62268de3b1946288d7f2c451649b0"></a><!-- doxytag: member="RSVP::scheduleRefreshTimer" ref="a67c62268de3b1946288d7f2c451649b0" args="(ResvStateBlock_t *rsbEle, simtime_t delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::scheduleRefreshTimer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>rsbEle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    ASSERT(rsbEle);

    <span class="keywordflow">if</span> (rsbEle-&gt;refreshTimerMsg-&gt;isScheduled())
        cancelEvent(rsbEle-&gt;refreshTimerMsg);

    scheduleAt(simTime() + delay, rsbEle-&gt;refreshTimerMsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac4faa2c6f7a952138fb145bc948c79eb"></a><!-- doxytag: member="RSVP::scheduleTimeout" ref="ac4faa2c6f7a952138fb145bc948c79eb" args="(PathStateBlock_t *psbEle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::scheduleTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>psbEle</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">processPathMsg()</a>, and <a class="el" href="class_r_s_v_p.html#aaebd61f0dcf0f517e95c4b1e81fea967">processResvMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(psbEle);

    <span class="keywordflow">if</span> (psbEle-&gt;timeoutMsg-&gt;isScheduled())
        cancelEvent(psbEle-&gt;timeoutMsg);

    scheduleAt(simTime() + <a class="code" href="_r_s_v_p_8cc.html#a7efb4d5a346397fc90771fe2f8a78418">PSB_TIMEOUT_INTERVAL</a>, psbEle-&gt;timeoutMsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8d7428629dfacb146e7b6c6608ae21d8"></a><!-- doxytag: member="RSVP::scheduleTimeout" ref="a8d7428629dfacb146e7b6c6608ae21d8" args="(ResvStateBlock_t *rsbEle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::scheduleTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>rsbEle</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    ASSERT(rsbEle);

    <span class="keywordflow">if</span> (rsbEle-&gt;timeoutMsg-&gt;isScheduled())
        cancelEvent(rsbEle-&gt;timeoutMsg);

    scheduleAt(simTime() + <a class="code" href="_r_s_v_p_8cc.html#a5740607a8ddf9dc4102c41cc52e17c04">RSB_TIMEOUT_INTERVAL</a>, rsbEle-&gt;timeoutMsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aede65339bca2fcd134158dd9784100e2"></a><!-- doxytag: member="RSVP::sendPathErrorMessage" ref="aede65339bca2fcd134158dd9784100e2" args="(PathStateBlock_t *psb, int errCode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::sendPathErrorMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_path_state_block__t.html">PathStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>psb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>errCode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv()</a>, <a class="el" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">processHELLO_TIMEOUT()</a>, and <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">processPathMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_r_s_v_p.html#aede65339bca2fcd134158dd9784100e2">sendPathErrorMessage</a>(psb-&gt;Session_Object, psb-&gt;Sender_Template_Object, psb-&gt;Sender_Tspec_Object, psb-&gt;Previous_Hop_Address, errCode);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a39d87f7b6317e6a613fd0dee613ab34e"></a><!-- doxytag: member="RSVP::sendPathErrorMessage" ref="a39d87f7b6317e6a613fd0dee613ab34e" args="(SessionObj_t session, SenderTemplateObj_t sender, SenderTspecObj_t tspec, IPAddress nextHop, int errCode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::sendPathErrorMessage </td>
          <td>(</td>
          <td class="paramtype">SessionObj_t&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SenderTemplateObj_t&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SenderTspecObj_t&#160;</td>
          <td class="paramname"><em>tspec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>nextHop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>errCode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_r_s_v_p_path_error.html">RSVPPathError</a> *msg = <span class="keyword">new</span> <a class="code" href="class_r_s_v_p_path_error.html">RSVPPathError</a>(<span class="stringliteral">&quot;PathErr&quot;</span>);
    msg-&gt;setErrorCode(errCode);
    msg-&gt;setErrorNode(<a class="code" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">routerId</a>);
    msg-&gt;setSession(session);
    msg-&gt;<a class="code" href="class_r_s_v_p_path_error.html#a17794a1cc352ce3b51245b7d40d19809">setSenderTemplate</a>(sender);
    msg-&gt;<a class="code" href="class_r_s_v_p_path_error.html#a3f681c6eec986afee423c8f144c16abe">setSenderTspec</a>(tspec);

    <span class="keywordtype">int</span> length = 52;

    <span class="comment">// see comment elsewhere (in TED.cc)</span>
    length /= 10;

    msg-&gt;setByteLength(length);

    <a class="code" href="class_r_s_v_p.html#afe54ffd483063082234277edce5e792d">sendToIP</a>(msg, nextHop);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a472ceb4e889ba0fc93649dff8e5d549a"></a><!-- doxytag: member="RSVP::sendPathNotify" ref="a472ceb4e889ba0fc93649dff8e5d549a" args="(int handler, const SessionObj_t &amp;session, const SenderTemplateObj_t &amp;sender, int status, simtime_t delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::sendPathNotify </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SessionObj_t &amp;&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SenderTemplateObj_t &amp;&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv()</a>, <a class="el" href="class_r_s_v_p.html#a820c09dd3002f2309aeaa1f30d092887">createPath()</a>, <a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">pathProblem()</a>, <a class="el" href="class_r_s_v_p.html#aaa1b0102445119825a264bf187aca6e9">processPathErrMsg()</a>, and <a class="el" href="class_r_s_v_p.html#adada9d53651da0e8c535e7ed47f931fd">readTrafficSessionFromXML()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (handler &lt; 0)
        <span class="keywordflow">return</span>; <span class="comment">// handler not specified</span>

    cModule *mod = simulation.getModule(handler);

    <span class="keywordflow">if</span> (!mod)
        <span class="keywordflow">return</span>; <span class="comment">// handler no longer exists</span>

    PathNotifyMsg *msg = <span class="keyword">new</span> PathNotifyMsg(<span class="stringliteral">&quot;path notify&quot;</span>);

    msg-&gt;setSession(session);
    msg-&gt;setSender(sender);
    msg-&gt;setStatus(status);

    <span class="keywordflow">if</span> (handler == getId())
        scheduleAt(simTime() + delay, msg);
    <span class="keywordflow">else</span>
        sendDirect(msg, delay, 0, mod, <span class="stringliteral">&quot;from_rsvp&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab1e3e1ec1c7be3d59e249a147f3f3862"></a><!-- doxytag: member="RSVP::sendPathTearMessage" ref="ab1e3e1ec1c7be3d59e249a147f3f3862" args="(IPAddress peerIP, const SessionObj_t &amp;session, const SenderTemplateObj_t &amp;sender, IPAddress LIH, IPAddress NHOP, bool force)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::sendPathTearMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>peerIP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SessionObj_t &amp;&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SenderTemplateObj_t &amp;&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>LIH</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>NHOP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a1578adc0aa64e000a877ab117a3e9060">delSession()</a>, <a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">pathProblem()</a>, <a class="el" href="class_r_s_v_p.html#a9d40c6ab5084f41b18645183f85fecc9">processPathTearMsg()</a>, and <a class="el" href="class_r_s_v_p.html#a5bc9ab7d3a8b3db1c563d7e7adddb8d6">processPSB_TIMEOUT()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_r_s_v_p_path_tear.html">RSVPPathTear</a> *msg = <span class="keyword">new</span> <a class="code" href="class_r_s_v_p_path_tear.html">RSVPPathTear</a>(<span class="stringliteral">&quot;PathTear&quot;</span>);
    msg-&gt;setSenderTemplate(sender);
    msg-&gt;setSession(session);
    RsvpHopObj_t hop;
    hop.Logical_Interface_Handle = LIH;
    hop.Next_Hop_Address = NHOP;
    msg-&gt;setHop(hop);
    msg-&gt;setForce(force);

    <span class="keywordtype">int</span> length = 44;

    msg-&gt;setByteLength(length);

    <a class="code" href="class_r_s_v_p.html#afe54ffd483063082234277edce5e792d">sendToIP</a>(msg, peerIP);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afe54ffd483063082234277edce5e792d"></a><!-- doxytag: member="RSVP::sendToIP" ref="afe54ffd483063082234277edce5e792d" args="(cMessage *msg, IPAddress destAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::sendToIP </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>destAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5c7ef8c3f1f0a9b7061f499891a82ad6">processHELLO_TIMER()</a>, <a class="el" href="class_r_s_v_p.html#aaa1b0102445119825a264bf187aca6e9">processPathErrMsg()</a>, <a class="el" href="class_r_s_v_p.html#acc0978a512bc47c6cbeea226904a4e51">refreshPath()</a>, <a class="el" href="class_r_s_v_p.html#af84a7ab872ddde72e4e6394c904285ab">refreshResv()</a>, <a class="el" href="class_r_s_v_p.html#a39d87f7b6317e6a613fd0dee613ab34e">sendPathErrorMessage()</a>, and <a class="el" href="class_r_s_v_p.html#ab1e3e1ec1c7be3d59e249a147f3f3862">sendPathTearMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_i_p_control_info.html">IPControlInfo</a> *controlInfo = <span class="keyword">new</span> <a class="code" href="class_i_p_control_info.html">IPControlInfo</a>();
    controlInfo-&gt;setDestAddr(destAddr);
    controlInfo-&gt;setProtocol(IP_PROT_RSVP);
    msg-&gt;setControlInfo(controlInfo);

    msg-&gt;addPar(<span class="stringliteral">&quot;color&quot;</span>) = <a class="code" href="_r_s_v_p_packet_8h.html#a332ea993b9048da86ef057aa6b307bce">RSVP_TRAFFIC</a>;

    send(msg, <span class="stringliteral">&quot;ipOut&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a56c68314c8b1e8b82370416d2b2f4785"></a><!-- doxytag: member="RSVP::setupHello" ref="a56c68314c8b1e8b82370416d2b2f4785" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::setupHello </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_r_s_v_p.html#af5bdcd75e4a984969f22119c8cb4d89b">helloInterval</a> = par(<span class="stringliteral">&quot;helloInterval&quot;</span>).doubleValue();
    <a class="code" href="class_r_s_v_p.html#a5873d10d15860ed9e24e941f851f4b71">helloTimeout</a> = par(<span class="stringliteral">&quot;helloTimeout&quot;</span>).doubleValue();

    cStringTokenizer tokenizer(par(<span class="stringliteral">&quot;peers&quot;</span>));
    <span class="keyword">const</span> <span class="keywordtype">char</span> *token;
    <span class="keywordflow">while</span> ((token = tokenizer.nextToken())!=NULL)
    {
        ASSERT(<a class="code" href="class_r_s_v_p.html#a52533534d5e3afbfc42030440071a5d3">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a8ad86ee823d6200b4f558383b39af658">getInterfaceByName</a>(token));

        <a class="code" href="class_i_p_address.html">IPAddress</a> peer = <a class="code" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">tedmod</a>-&gt;<a class="code" href="class_t_e_d.html#ab55f38433f365eb6411ce8d0caf20ca7">getPeerByLocalAddress</a>(<a class="code" href="class_r_s_v_p.html#a52533534d5e3afbfc42030440071a5d3">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a8ad86ee823d6200b4f558383b39af658">getInterfaceByName</a>(token)-&gt;<a class="code" href="class_interface_entry.html#ad47857e772397cc2d00de3a8cf464993">ipv4Data</a>()-&gt;<a class="code" href="class_i_pv4_interface_data.html#aec8ebefd03acad479ac89d31d7228331">getIPAddress</a>());

        HelloState_t h;

        h.timer = <span class="keyword">new</span> HelloTimerMsg(<span class="stringliteral">&quot;hello timer&quot;</span>);
        h.timer-&gt;setPeer(peer);

        h.timeout = <span class="keyword">new</span> HelloTimeoutMsg(<span class="stringliteral">&quot;hello timeout&quot;</span>);
        h.timeout-&gt;setPeer(peer);

        h.peer = peer;

        <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#af5bdcd75e4a984969f22119c8cb4d89b">helloInterval</a> &gt; 0.0)
        {
            <span class="comment">// peer is down until we know he is ok</span>

            h.ok = <span class="keyword">false</span>;
        }
        <span class="keywordflow">else</span>
        {
            <span class="comment">// don&#39;t use HELLO at all, consider all peers running all the time</span>

            h.ok = <span class="keyword">true</span>;
        }

        <a class="code" href="class_r_s_v_p.html#a1070041b2d075e1d4c8cbf18f0fe2faf">HelloList</a>.push_back(h);

        <span class="keywordflow">if</span> (<a class="code" href="class_r_s_v_p.html#af5bdcd75e4a984969f22119c8cb4d89b">helloInterval</a> &gt; 0.0)
        {
            <a class="code" href="class_r_s_v_p.html#ad50bb2638d5ca3d9bc42b3364cffabbb">startHello</a>(peer, exponential(<a class="code" href="class_r_s_v_p.html#af5bdcd75e4a984969f22119c8cb4d89b">helloInterval</a>));
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad50bb2638d5ca3d9bc42b3364cffabbb"></a><!-- doxytag: member="RSVP::startHello" ref="ad50bb2638d5ca3d9bc42b3364cffabbb" args="(IPAddress peer, simtime_t delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::startHello </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_p_address.html">IPAddress</a>&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a56c68314c8b1e8b82370416d2b2f4785">setupHello()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;scheduling hello start in &quot;</span> &lt;&lt; delay &lt;&lt; <span class="stringliteral">&quot; seconds&quot;</span> &lt;&lt; endl;

    HelloState_t *h = <a class="code" href="class_r_s_v_p.html#a04c45fcf64189ff23bc0233639956459">findHello</a>(peer);
    ASSERT(h);

    ASSERT(!h-&gt;timer-&gt;isScheduled());
    ASSERT(!h-&gt;timeout-&gt;isScheduled());
    ASSERT(!h-&gt;ok);

    h-&gt;srcInstance = ++<a class="code" href="class_r_s_v_p.html#a9cd7607aca27a1351bb82ddc7f37937f">maxSrcInstance</a>;
    h-&gt;dstInstance = 0;
    h-&gt;request = <span class="keyword">true</span>;
    h-&gt;ack = <span class="keyword">false</span>;

    scheduleAt(simTime() + delay, h-&gt;timer);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2d374e27ad177a0e0e0500deaf1affb7"></a><!-- doxytag: member="RSVP::updateRSB" ref="a2d374e27ad177a0e0e0500deaf1affb7" args="(ResvStateBlock_t *rsb, RSVPResvMsg *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RSVP::updateRSB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_s_v_p_1_1_resv_state_block__t.html">ResvStateBlock_t</a> *&#160;</td>
          <td class="paramname"><em>rsb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_r_s_v_p_resv_msg.html">RSVPResvMsg</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#aaebd61f0dcf0f517e95c4b1e81fea967">processResvMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(rsb);

    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0; k &lt; msg-&gt;getFlowDescriptor().size(); k++)
    {
        FlowDescriptor_t flow = msg-&gt;getFlowDescriptor()[k];

        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m;
        <span class="keywordflow">for</span> (m = 0; m &lt; rsb-&gt;FlowDescriptor.size(); m++)
        {
            <span class="keywordflow">if</span> (rsb-&gt;FlowDescriptor[m].Filter_Spec_Object == flow.Filter_Spec_Object)
            {
                <span class="comment">// sender found</span>
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sender (lspid=&quot;</span> &lt;&lt; flow.Filter_Spec_Object.Lsp_Id &lt;&lt; <span class="stringliteral">&quot;) found in RSB&quot;</span> &lt;&lt; endl;

                <span class="keywordflow">if</span> (rsb-&gt;FlowDescriptor[m].label != flow.label)
                {
                    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;label modified (new label=&quot;</span>  &lt;&lt; flow.label &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;

                    rsb-&gt;FlowDescriptor[m].label = flow.label;

                    <span class="comment">// label must be updated in lib table</span>

                    <a class="code" href="class_r_s_v_p.html#a269cab6db09df7ab124076afe9515a6f">scheduleCommitTimer</a>(rsb);
                }

                <span class="keywordflow">break</span>;
            }
        }
        <span class="keywordflow">if</span> (m == rsb-&gt;FlowDescriptor.size())
        {
            <span class="comment">// sender not found</span>
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sender (lspid=&quot;</span> &lt;&lt; flow.Filter_Spec_Object.Lsp_Id &lt;&lt; <span class="stringliteral">&quot;) not found in RSB, adding...&quot;</span> &lt;&lt; endl;

            rsb-&gt;FlowDescriptor.push_back(flow);
            rsb-&gt;inLabelVector.push_back(-1);

            <span class="comment">// resv is new and must be forwarded</span>

            <a class="code" href="class_r_s_v_p.html#a269cab6db09df7ab124076afe9515a6f">scheduleCommitTimer</a>(rsb);
            <a class="code" href="class_r_s_v_p.html#a130138413206f03179fc63d56f4937cd">scheduleRefreshTimer</a>(rsb, 0.0);
        }
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="aab8856a7428469eb2467b9a30355b2fd"></a><!-- doxytag: member="RSVP::SimpleClassifier" ref="aab8856a7428469eb2467b9a30355b2fd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="class_simple_classifier.html">SimpleClassifier</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="af5bdcd75e4a984969f22119c8cb4d89b"></a><!-- doxytag: member="RSVP::helloInterval" ref="af5bdcd75e4a984969f22119c8cb4d89b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_r_s_v_p.html#af5bdcd75e4a984969f22119c8cb4d89b">RSVP::helloInterval</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5c7ef8c3f1f0a9b7061f499891a82ad6">processHELLO_TIMER()</a>, and <a class="el" href="class_r_s_v_p.html#a56c68314c8b1e8b82370416d2b2f4785">setupHello()</a>.</p>

</div>
</div>
<a class="anchor" id="a1070041b2d075e1d4c8cbf18f0fe2faf"></a><!-- doxytag: member="RSVP::HelloList" ref="a1070041b2d075e1d4c8cbf18f0fe2faf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_r_s_v_p.html#ab37d8b4656962b40e0e3d4ead1b09652">HelloVector</a> <a class="el" href="class_r_s_v_p.html#a1070041b2d075e1d4c8cbf18f0fe2faf">RSVP::HelloList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a04c45fcf64189ff23bc0233639956459">findHello()</a>, and <a class="el" href="class_r_s_v_p.html#a56c68314c8b1e8b82370416d2b2f4785">setupHello()</a>.</p>

</div>
</div>
<a class="anchor" id="a5873d10d15860ed9e24e941f851f4b71"></a><!-- doxytag: member="RSVP::helloTimeout" ref="a5873d10d15860ed9e24e941f851f4b71" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_r_s_v_p.html#a5873d10d15860ed9e24e941f851f4b71">RSVP::helloTimeout</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a4248b4a0ff4175b4be496ec30aee8672">processHelloMsg()</a>, and <a class="el" href="class_r_s_v_p.html#a56c68314c8b1e8b82370416d2b2f4785">setupHello()</a>.</p>

</div>
</div>
<a class="anchor" id="a52533534d5e3afbfc42030440071a5d3"></a><!-- doxytag: member="RSVP::ift" ref="a52533534d5e3afbfc42030440071a5d3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_interface_table.html">IInterfaceTable</a>* <a class="el" href="class_r_s_v_p.html#a52533534d5e3afbfc42030440071a5d3">RSVP::ift</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize()</a>, and <a class="el" href="class_r_s_v_p.html#a56c68314c8b1e8b82370416d2b2f4785">setupHello()</a>.</p>

</div>
</div>
<a class="anchor" id="ad137623f6252e3398084176dc311885f"></a><!-- doxytag: member="RSVP::lt" ref="ad137623f6252e3398084176dc311885f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_l_i_b_table.html">LIBTable</a>* <a class="el" href="class_r_s_v_p.html#ad137623f6252e3398084176dc311885f">RSVP::lt</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv()</a>, <a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize()</a>, and <a class="el" href="class_r_s_v_p.html#a0a010c3a16c0b7fbc37dec6368d9ad03">removeRsbFilter()</a>.</p>

</div>
</div>
<a class="anchor" id="a18c51012884262a7a68bc2ef3fee90a1"></a><!-- doxytag: member="RSVP::maxPsbId" ref="a18c51012884262a7a68bc2ef3fee90a1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_r_s_v_p.html#a18c51012884262a7a68bc2ef3fee90a1">RSVP::maxPsbId</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a46e933eb87d8a3b105a313a0e48403a3">createIngressPSB()</a>, <a class="el" href="class_r_s_v_p.html#a4c582acc45b47942f56a34aa35fcfc70">createPSB()</a>, and <a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a8df043f6a88c29e65a22c37ec7294ff0"></a><!-- doxytag: member="RSVP::maxRsbId" ref="a8df043f6a88c29e65a22c37ec7294ff0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_r_s_v_p.html#a8df043f6a88c29e65a22c37ec7294ff0">RSVP::maxRsbId</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#af34403ca300fb9425d67e609c7bbf9a3">createEgressRSB()</a>, <a class="el" href="class_r_s_v_p.html#ad53a7a49e12f3cc0ff339e20624406fe">createRSB()</a>, and <a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a9cd7607aca27a1351bb82ddc7f37937f"></a><!-- doxytag: member="RSVP::maxSrcInstance" ref="a9cd7607aca27a1351bb82ddc7f37937f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_r_s_v_p.html#a9cd7607aca27a1351bb82ddc7f37937f">RSVP::maxSrcInstance</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize()</a>, <a class="el" href="class_r_s_v_p.html#a4248b4a0ff4175b4be496ec30aee8672">processHelloMsg()</a>, and <a class="el" href="class_r_s_v_p.html#ad50bb2638d5ca3d9bc42b3364cffabbb">startHello()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f1e35ac657ccaeca38a235d1b4a3414"></a><!-- doxytag: member="RSVP::nb" ref="a0f1e35ac657ccaeca38a235d1b4a3414" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_notification_board.html">NotificationBoard</a>* <a class="el" href="class_r_s_v_p.html#a0f1e35ac657ccaeca38a235d1b4a3414">RSVP::nb</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#ab63d5bdece74e8218d703ca07604dbe6">announceLinkChange()</a>, and <a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="ac6b5ffa8b42538c5c55d308412263bd3"></a><!-- doxytag: member="RSVP::PSBList" ref="ac6b5ffa8b42538c5c55d308412263bd3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_r_s_v_p.html#aa2a110dcc9fd3eb0f59fe5d4be909961">PSBVector</a> <a class="el" href="class_r_s_v_p.html#ac6b5ffa8b42538c5c55d308412263bd3">RSVP::PSBList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a46e933eb87d8a3b105a313a0e48403a3">createIngressPSB()</a>, <a class="el" href="class_r_s_v_p.html#a4c582acc45b47942f56a34aa35fcfc70">createPSB()</a>, <a class="el" href="class_r_s_v_p.html#adda3d6bf44e6f8181f0f2083f243474d">findPSB()</a>, <a class="el" href="class_r_s_v_p.html#a15d8d2605257b63906833bf6dcb7e7f9">findPsbById()</a>, <a class="el" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">processHELLO_TIMEOUT()</a>, <a class="el" href="class_r_s_v_p.html#a9d40c6ab5084f41b18645183f85fecc9">processPathTearMsg()</a>, <a class="el" href="class_r_s_v_p.html#a771e852915d4521e65a3d243bdf1a82c">recoveryEvent()</a>, <a class="el" href="class_r_s_v_p.html#a8745c357a38f4ab3b5c39668b5498820">refreshResv()</a>, and <a class="el" href="class_r_s_v_p.html#a43b1c666eee1f02f7070d7b39e3dea0f">removePSB()</a>.</p>

</div>
</div>
<a class="anchor" id="a469e284ac5acfa70db603d70691b06ef"></a><!-- doxytag: member="RSVP::retryInterval" ref="a469e284ac5acfa70db603d70691b06ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_r_s_v_p.html#a469e284ac5acfa70db603d70691b06ef">RSVP::retryInterval</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a820c09dd3002f2309aeaa1f30d092887">createPath()</a>, <a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize()</a>, and <a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">pathProblem()</a>.</p>

</div>
</div>
<a class="anchor" id="ad26576072a881df7550e35ea94c2f955"></a><!-- doxytag: member="RSVP::routerId" ref="ad26576072a881df7550e35ea94c2f955" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_p_address.html">IPAddress</a> <a class="el" href="class_r_s_v_p.html#ad26576072a881df7550e35ea94c2f955">RSVP::routerId</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv()</a>, <a class="el" href="class_r_s_v_p.html#a46e933eb87d8a3b105a313a0e48403a3">createIngressPSB()</a>, <a class="el" href="class_r_s_v_p.html#a1578adc0aa64e000a877ab117a3e9060">delSession()</a>, <a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize()</a>, <a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">pathProblem()</a>, <a class="el" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">processHELLO_TIMEOUT()</a>, <a class="el" href="class_r_s_v_p.html#aaa1b0102445119825a264bf187aca6e9">processPathErrMsg()</a>, <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">processPathMsg()</a>, <a class="el" href="class_r_s_v_p.html#a9d40c6ab5084f41b18645183f85fecc9">processPathTearMsg()</a>, <a class="el" href="class_r_s_v_p.html#a5bc9ab7d3a8b3db1c563d7e7adddb8d6">processPSB_TIMEOUT()</a>, <a class="el" href="class_r_s_v_p.html#adada9d53651da0e8c535e7ed47f931fd">readTrafficSessionFromXML()</a>, <a class="el" href="class_r_s_v_p.html#a771e852915d4521e65a3d243bdf1a82c">recoveryEvent()</a>, <a class="el" href="class_r_s_v_p.html#acc0978a512bc47c6cbeea226904a4e51">refreshPath()</a>, <a class="el" href="class_r_s_v_p.html#af84a7ab872ddde72e4e6394c904285ab">refreshResv()</a>, and <a class="el" href="class_r_s_v_p.html#a39d87f7b6317e6a613fd0dee613ab34e">sendPathErrorMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a44fd3dc334665b246ce0a555cb35e34f"></a><!-- doxytag: member="RSVP::rpct" ref="a44fd3dc334665b246ce0a555cb35e34f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_r_s_v_p_classifier.html">IRSVPClassifier</a>* <a class="el" href="class_r_s_v_p.html#a44fd3dc334665b246ce0a555cb35e34f">RSVP::rpct</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv()</a>, and <a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a3657146b277de8157c443afc3d986c0e"></a><!-- doxytag: member="RSVP::RSBList" ref="a3657146b277de8157c443afc3d986c0e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_r_s_v_p.html#a0f8968a708f4b7d59fe5d714611df147">RSBVector</a> <a class="el" href="class_r_s_v_p.html#a3657146b277de8157c443afc3d986c0e">RSVP::RSBList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv()</a>, <a class="el" href="class_r_s_v_p.html#af34403ca300fb9425d67e609c7bbf9a3">createEgressRSB()</a>, <a class="el" href="class_r_s_v_p.html#ad53a7a49e12f3cc0ff339e20624406fe">createRSB()</a>, <a class="el" href="class_r_s_v_p.html#a05e7433548bd2ecc502fa40210d85f46">doCACCheck()</a>, <a class="el" href="class_r_s_v_p.html#a7741a01ced48d4fbf371cb7b846a27aa">findRSB()</a>, <a class="el" href="class_r_s_v_p.html#a96e4fae87f154aec8efed1f306864d81">findRsbById()</a>, <a class="el" href="class_r_s_v_p.html#a933ffa437ba9f3cef9efdfc5f1ac18a9">preempt()</a>, <a class="el" href="class_r_s_v_p.html#aaebd61f0dcf0f517e95c4b1e81fea967">processResvMsg()</a>, and <a class="el" href="class_r_s_v_p.html#af0469af2686bf9440e3d7320c57bfb6f">removeRSB()</a>.</p>

</div>
</div>
<a class="anchor" id="a9f89cdfc58368bf8e0c491b7da2dd113"></a><!-- doxytag: member="RSVP::rt" ref="a9f89cdfc58368bf8e0c491b7da2dd113" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_routing_table.html">IRoutingTable</a>* <a class="el" href="class_r_s_v_p.html#a9f89cdfc58368bf8e0c491b7da2dd113">RSVP::rt</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv()</a>, <a class="el" href="class_r_s_v_p.html#a74c8cb3303ae62d7e118cbacacf0c5e0">evalNextHopInterface()</a>, and <a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="ac21c730ad1bba1c6b90cf5b784d1aad5"></a><!-- doxytag: member="RSVP::tedmod" ref="ac21c730ad1bba1c6b90cf5b784d1aad5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_e_d.html">TED</a>* <a class="el" href="class_r_s_v_p.html#ac21c730ad1bba1c6b90cf5b784d1aad5">RSVP::tedmod</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a58055c8fd6f3b98c57ef68adeaa009e3">allocateResource()</a>, <a class="el" href="class_r_s_v_p.html#a5418c3bcb4cf57a5965c6a7067b7f678">commitResv()</a>, <a class="el" href="class_r_s_v_p.html#a4c582acc45b47942f56a34aa35fcfc70">createPSB()</a>, <a class="el" href="class_r_s_v_p.html#a1578adc0aa64e000a877ab117a3e9060">delSession()</a>, <a class="el" href="class_r_s_v_p.html#a05e7433548bd2ecc502fa40210d85f46">doCACCheck()</a>, <a class="el" href="class_r_s_v_p.html#a74c8cb3303ae62d7e118cbacacf0c5e0">evalNextHopInterface()</a>, <a class="el" href="class_r_s_v_p.html#ad55ae7e15d484d73cdfe053442f345ad">initialize()</a>, <a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">pathProblem()</a>, <a class="el" href="class_r_s_v_p.html#a933ffa437ba9f3cef9efdfc5f1ac18a9">preempt()</a>, <a class="el" href="class_r_s_v_p.html#a41999b24ba006f359ce2ee9b4638ee96">processHELLO_TIMEOUT()</a>, <a class="el" href="class_r_s_v_p.html#a4248b4a0ff4175b4be496ec30aee8672">processHelloMsg()</a>, <a class="el" href="class_r_s_v_p.html#a3fa7b4ca1bf18d5afac7664f0ae3584a">processPathMsg()</a>, <a class="el" href="class_r_s_v_p.html#a9d40c6ab5084f41b18645183f85fecc9">processPathTearMsg()</a>, <a class="el" href="class_r_s_v_p.html#a5bc9ab7d3a8b3db1c563d7e7adddb8d6">processPSB_TIMEOUT()</a>, <a class="el" href="class_r_s_v_p.html#a2fc38252a7b31028e80b360fc8dc7af3">processRSB_TIMEOUT()</a>, <a class="el" href="class_r_s_v_p.html#a771e852915d4521e65a3d243bdf1a82c">recoveryEvent()</a>, <a class="el" href="class_r_s_v_p.html#acc0978a512bc47c6cbeea226904a4e51">refreshPath()</a>, <a class="el" href="class_r_s_v_p.html#a8745c357a38f4ab3b5c39668b5498820">refreshResv()</a>, <a class="el" href="class_r_s_v_p.html#a130138413206f03179fc63d56f4937cd">scheduleRefreshTimer()</a>, and <a class="el" href="class_r_s_v_p.html#a56c68314c8b1e8b82370416d2b2f4785">setupHello()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a6fd79a633dacf8dad56e233d613a8f"></a><!-- doxytag: member="RSVP::traffic" ref="a4a6fd79a633dacf8dad56e233d613a8f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="struct_r_s_v_p_1_1traffic__session__t.html">traffic_session_t</a>&gt; <a class="el" href="class_r_s_v_p.html#a4a6fd79a633dacf8dad56e233d613a8f">RSVP::traffic</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_r_s_v_p.html#a820c09dd3002f2309aeaa1f30d092887">createPath()</a>, <a class="el" href="class_r_s_v_p.html#a1578adc0aa64e000a877ab117a3e9060">delSession()</a>, <a class="el" href="class_r_s_v_p.html#adbc9840e5bb15c37459aacb83385bdc0">findSession()</a>, <a class="el" href="class_r_s_v_p.html#aa1c0596a9dfde9005405cbdebbd3a6a9">pathProblem()</a>, and <a class="el" href="class_r_s_v_p.html#adada9d53651da0e8c535e7ed47f931fd">readTrafficSessionFromXML()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_r_s_v_p_8h.html">RSVP.h</a></li>
<li><a class="el" href="_r_s_v_p_8cc.html">RSVP.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_r_s_v_p.html">RSVP</a>      </li>
      <li class="footer">Generated on Fri Nov 18 2011 12:47:14 for INET Framework for OMNeT++/OMNEST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
