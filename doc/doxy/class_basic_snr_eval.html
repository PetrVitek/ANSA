<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: BasicSnrEval Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_basic_snr_eval.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">BasicSnrEval Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="BasicSnrEval" --><!-- doxytag: inherits="ChannelAccess" -->
<p>The basic class for all snrEval modules.  
 <a href="class_basic_snr_eval.html#details">More...</a></p>

<p><code>#include &lt;BasicSnrEval.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BasicSnrEval:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_basic_snr_eval.png" usemap="#BasicSnrEval_map" alt=""/>
  <map id="BasicSnrEval_map" name="BasicSnrEval_map">
<area href="class_channel_access.html" title="Basic class for all physical layers, please don&#39;t touch!!" alt="ChannelAccess" shape="rect" coords="55,112,156,136"/>
<area href="class_basic_module.html" title="Base class for all simple modules of a host that want to have access to the NotificationBoard module..." alt="BasicModule" shape="rect" coords="55,56,156,80"/>
<area href="class_i_notifiable.html" alt="INotifiable" shape="rect" coords="55,0,156,24"/>
<area href="class_snr_eval.html" title="Keeps track of the different snir levels when receiving a packet." alt="SnrEval" shape="rect" coords="55,224,156,248"/>
<area href="class_gilbert_elliot_snr.html" title="Keeps track of the different snir levels when receiving a packet and switches between states GOOD and..." alt="GilbertElliotSnr" shape="rect" coords="0,280,101,304"/>
<area href="class_snr_eval80211.html" title="A SnrEval for the 802.11b protocol." alt="SnrEval80211" shape="rect" coords="111,280,212,304"/>
</map>
 </div></div>

<p><a href="class_basic_snr_eval-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a89445ede6f19960b30f74d17335ee30f">initialize</a> (int)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization of the module and some variables.  <a href="#a89445ede6f19960b30f74d17335ee30f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a63f8fd5fab971fe18a609c1053624dc1">handleMessage</a> (cMessage *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called every time a message arrives.  <a href="#a63f8fd5fab971fe18a609c1053624dc1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a3670766c937b99c04bdcd84663092c7c">calcDuration</a> (cPacket *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calculates the duration of the AirFrame.  <a href="#a3670766c937b99c04bdcd84663092c7c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a1865474b5fc30b052459a3cb2b9d35fa">getChannelNumber</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the channel we're listening on. This version always returns 0 (single radio channel supported)  <a href="#a1865474b5fc30b052459a3cb2b9d35fa"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Handle Messages</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Functions to redefine by the programmer </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a2eec34538f64365af3d19825140dacb8">handleUpperMsg</a> (AirFrame *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill the header fields, redefine for your own needs...  <a href="#a2eec34538f64365af3d19825140dacb8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a6056d3736b5f4440aa95067f1e03386c">handleSelfMsg</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle self messages such as timer...  <a href="#a6056d3736b5f4440aa95067f1e03386c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a58f6bd32dd024e3bf3bdeb84126f3bb9">handleLowerMsgStart</a> (AirFrame *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate Snr Information before buffering.  <a href="#a58f6bd32dd024e3bf3bdeb84126f3bb9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#aacd0c25177016c20be7e0b6090a7f191">handleLowerMsgEnd</a> (AirFrame *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate SnrInfo after buffering and add the PhySnrList to the message.  <a href="#aacd0c25177016c20be7e0b6090a7f191"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Convenience Functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Functions for convenience - NOT to be modified</p>
<p>These are functions taking care of message encapsulation and message sending. Normally you should not need to alter these but should use them to handle message encasulation and sending. They will wirte all necessary information into packet headers and add or strip the appropriate headers for each layer. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a2b3c76b94adf5ef26526d4ac0c8db686">bufferMsg</a> (AirFrame *frame)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffers message for 'transmission time'.  <a href="#a2b3c76b94adf5ef26526d4ac0c8db686"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual AirFrame *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a2319ad5b97819e6a106980dd3cf67cf3">unbufferMsg</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Unbuffers a message after 'transmission time'.  <a href="#a2319ad5b97819e6a106980dd3cf67cf3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a94a474e2deb6ce756900b1b64ba779df">sendUp</a> (AirFrame *, <a class="el" href="_snr_list_8h.html#a241b5e7c9575e932988a55f7a5012a61">SnrList</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a message to the upper layer.  <a href="#a94a474e2deb6ce756900b1b64ba779df"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#ab24fce7973732d213aa991c89de1cf97">sendDown</a> (AirFrame *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a message to the channel.  <a href="#ab24fce7973732d213aa991c89de1cf97"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual AirFrame *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#ad8268ab8f023e50ca32dca40356fa933">encapsMsg</a> (cPacket *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Encapsulates a MAC frame into an Air Frame.  <a href="#ad8268ab8f023e50ca32dca40356fa933"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Abstraction layer</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Factory function to create AirFrame into which a MAC frame is encapsulated.</p>
<p><a class="el" href="class_snr_eval.html" title="Keeps track of the different snir levels when receiving a packet.">SnrEval</a> authors should be able to use their own <a class="el" href="class_snr_eval.html" title="Keeps track of the different snir levels when receiving a packet.">SnrEval</a> packets. The framework does not need to know about them, but must be able to produce new ones. Both goals can be reached by using a factory method.</p>
<p>Overwrite this function in derived classes to use your own AirFrames </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual AirFrame *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#af1205d1afd8805d7f7a0ca16cd9f6e5b">createCapsulePkt</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new AirFrame.  <a href="#af1205d1afd8805d7f7a0ca16cd9f6e5b"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a515b273855ffc377f579922d5eb68dfb">bitrate</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">a parameter that has to be read in from omnetpp.ini  <a href="#a515b273855ffc377f579922d5eb68dfb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a25d3734b058a75c1a42b637db4b65902">headerLength</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">a parameter that has to be read in from omnetpp.ini  <a href="#a25d3734b058a75c1a42b637db4b65902"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#adb9a71c73bd1cb87cc91a4708ecc289f">transmitterPower</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">power used to transmit messages  <a href="#adb9a71c73bd1cb87cc91a4708ecc289f"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a8651e49c751d8e8c488eadf25eba2047">uppergateOut</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">gate id  <a href="#a8651e49c751d8e8c488eadf25eba2047"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_basic_snr_eval.html#a973b2265e5854d65b9ed5e8631b16aa3">uppergateIn</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The basic class for all snrEval modules. </p>
<p>The <a class="el" href="class_basic_snr_eval.html" title="The basic class for all snrEval modules.">BasicSnrEval</a> module provides functionality like en- and decapsulation of messages. If you use the standard message formats everything should work fine. Before a packet is sent some information, e.g. transmission power, can be written to the AirFrame header. If you write your own snrEval, just subclass and redefine the handleUpperMsg function (see description of the function). After receiving a message it can be processed in handleLowerMsgStart. Then it is buffered for the time the transmission would last in reality, and then can be handled again. Again you can redefine the 1. handleLowerMsgStart and 2. handleLowerMsgEnd for your own needs (see description). So, the call of these functions represent the following events: 1. received a message (i.e. transmission startet) 2. message will be handed on to the upper layer (i.e. transmission time is over)</p>
<p>This supports a single radio channel only</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Marc Loebbers </dd></dl>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a2b3c76b94adf5ef26526d4ac0c8db686"></a><!-- doxytag: member="BasicSnrEval::bufferMsg" ref="a2b3c76b94adf5ef26526d4ac0c8db686" args="(AirFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasicSnrEval::bufferMsg </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Buffers message for 'transmission time'. </p>
<p>The packet is put in a buffer for the time the transmission would last in reality. A timer indicates when the transmission is complete. So, look at unbufferMsg to see what happens when the transmission is complete.. </p>

<p>Referenced by <a class="el" href="class_snr_eval.html#adb3de641480fd9d173ed354c1dfa6223">SnrEval::changeChannel()</a>, and <a class="el" href="class_basic_snr_eval.html#a63f8fd5fab971fe18a609c1053624dc1">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// set timer to indicate transmission is complete</span>
    TransmComplete *endRxTimer = <span class="keyword">new</span> TransmComplete(NULL);
    endRxTimer-&gt;setContextPointer(frame);
    frame-&gt;setContextPointer(endRxTimer);
    <span class="comment">// NOTE: use arrivalTime instead of simTime, because we might be calling this</span>
    <span class="comment">// function during a channel change, when we&#39;re picking up ongoing transmissions</span>
    <span class="comment">// on the channel -- and then the message&#39;s arrival time is in the past!</span>
    scheduleAt(frame-&gt;getArrivalTime() + frame-&gt;getDuration(), endRxTimer);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3670766c937b99c04bdcd84663092c7c"></a><!-- doxytag: member="BasicSnrEval::calcDuration" ref="a3670766c937b99c04bdcd84663092c7c" args="(cPacket *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double BasicSnrEval::calcDuration </td>
          <td>(</td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>af</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function calculates the duration of the AirFrame. </p>
<p>Usually the duration is just the frame length divided by the bitrate. However there may be cases (like 802.11) where the header has a different modulation (and thus a different bitrate) than the rest of the message.</p>
<p>Just redefine this function in such a case! </p>

<p>Reimplemented in <a class="el" href="class_snr_eval80211.html#a4839d233ef2b15b59d18b6347316d4b1">SnrEval80211</a>.</p>

<p>Referenced by <a class="el" href="class_basic_snr_eval.html#ad8268ab8f023e50ca32dca40356fa933">encapsMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">double</span> duration;
    duration = (double) af-&gt;getBitLength() / (double) <a class="code" href="class_basic_snr_eval.html#a515b273855ffc377f579922d5eb68dfb" title="a parameter that has to be read in from omnetpp.ini">bitrate</a>;
    <span class="keywordflow">return</span> duration;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af1205d1afd8805d7f7a0ca16cd9f6e5b"></a><!-- doxytag: member="BasicSnrEval::createCapsulePkt" ref="af1205d1afd8805d7f7a0ca16cd9f6e5b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual AirFrame* BasicSnrEval::createCapsulePkt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new AirFrame. </p>

<p>Referenced by <a class="el" href="class_basic_snr_eval.html#ad8268ab8f023e50ca32dca40356fa933">encapsMsg()</a>.</p>
<div class="fragment"><pre class="fragment">                                         {
        <span class="keywordflow">return</span> <span class="keyword">new</span> AirFrame();
    };
</pre></div>
</div>
</div>
<a class="anchor" id="ad8268ab8f023e50ca32dca40356fa933"></a><!-- doxytag: member="BasicSnrEval::encapsMsg" ref="ad8268ab8f023e50ca32dca40356fa933" args="(cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AirFrame * BasicSnrEval::encapsMsg </td>
          <td>(</td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Encapsulates a MAC frame into an Air Frame. </p>
<p>This function encapsulates messages from the upper layer into an AirFrame, copies the type and channel fields, adds the headerLength, sets the pSend (transmitterPower) and returns the AirFrame. </p>

<p>Referenced by <a class="el" href="class_basic_snr_eval.html#a63f8fd5fab971fe18a609c1053624dc1">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    AirFrame *frame = <a class="code" href="class_basic_snr_eval.html#af1205d1afd8805d7f7a0ca16cd9f6e5b" title="Create a new AirFrame.">createCapsulePkt</a>();
    frame-&gt;setName(msg-&gt;getName());
    frame-&gt;setPSend(<a class="code" href="class_basic_snr_eval.html#adb9a71c73bd1cb87cc91a4708ecc289f" title="power used to transmit messages">transmitterPower</a>);
    frame-&gt;setBitLength(<a class="code" href="class_basic_snr_eval.html#a25d3734b058a75c1a42b637db4b65902" title="a parameter that has to be read in from omnetpp.ini">headerLength</a>);
    frame-&gt;setChannelNumber(<a class="code" href="class_basic_snr_eval.html#a1865474b5fc30b052459a3cb2b9d35fa" title="Returns the channel we&#39;re listening on. This version always returns 0 (single radio channel supported...">getChannelNumber</a>());
    frame-&gt;encapsulate(msg);
    frame-&gt;setDuration(<a class="code" href="class_basic_snr_eval.html#a3670766c937b99c04bdcd84663092c7c" title="This function calculates the duration of the AirFrame.">calcDuration</a>(frame));
    frame-&gt;setSenderPos(<a class="code" href="class_channel_access.html#a9e51969a624ff64101cf808514d50d4f" title="Returns the host&#39;s position.">getMyPosition</a>());
    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1865474b5fc30b052459a3cb2b9d35fa"></a><!-- doxytag: member="BasicSnrEval::getChannelNumber" ref="a1865474b5fc30b052459a3cb2b9d35fa" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int BasicSnrEval::getChannelNumber </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the channel we're listening on. This version always returns 0 (single radio channel supported) </p>

<p>Reimplemented in <a class="el" href="class_snr_eval.html#a7e3112193898e920f38094a8782f1861">SnrEval</a>.</p>

<p>Referenced by <a class="el" href="class_basic_snr_eval.html#ad8268ab8f023e50ca32dca40356fa933">encapsMsg()</a>, and <a class="el" href="class_basic_snr_eval.html#a63f8fd5fab971fe18a609c1053624dc1">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> 0;}
</pre></div>
</div>
</div>
<a class="anchor" id="aacd0c25177016c20be7e0b6090a7f191"></a><!-- doxytag: member="BasicSnrEval::handleLowerMsgEnd" ref="aacd0c25177016c20be7e0b6090a7f191" args="(AirFrame *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasicSnrEval::handleLowerMsgEnd </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate SnrInfo after buffering and add the PhySnrList to the message. </p>
<p>Redefine this function if you want to process messages from the channel before they are forwarded to upper layers</p>
<p>This function is called right before a packet is handed on to the upper layer, i.e. right after unbufferMsg. Again you can caluculate some more SNR information if you want.</p>
<p>You have to copy / create the SnrList related to the message and pass it to <a class="el" href="class_basic_snr_eval.html#a94a474e2deb6ce756900b1b64ba779df" title="Sends a message to the upper layer.">sendUp()</a> if you want to pass the message to the decider.</p>
<p>Do not forget to send the message to the upper layer with <a class="el" href="class_basic_snr_eval.html#a94a474e2deb6ce756900b1b64ba779df" title="Sends a message to the upper layer.">sendUp()</a></p>
<p>For a "real" implementaion take a look at <a class="el" href="class_snr_eval.html" title="Keeps track of the different snir levels when receiving a packet.">SnrEval</a></p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="_snr_list_8h.html#a241b5e7c9575e932988a55f7a5012a61" title="List to store SNR information for a message.">SnrList</a>, <a class="el" href="class_snr_eval.html" title="Keeps track of the different snir levels when receiving a packet.">SnrEval</a> </dd></dl>

<p>Reimplemented in <a class="el" href="class_gilbert_elliot_snr.html#a8cce1850da492f871c08ddcb3647b2ed">GilbertElliotSnr</a>, and <a class="el" href="class_snr_eval.html#ae4c093f6dc4dc649070947da6051f3b2">SnrEval</a>.</p>

<p>Referenced by <a class="el" href="class_basic_snr_eval.html#a63f8fd5fab971fe18a609c1053624dc1">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_basic_snr_eval_8cc.html#a27f667d27591f62ecf86a99a79ea8f42">coreEV</a> &lt;&lt; <span class="stringliteral">&quot;in handleLowerMsgEnd\n&quot;</span>;

    <span class="comment">// We need to create a &quot;dummy&quot; snr list that we can pass together</span>
    <span class="comment">// with the message to the decider module so that also the</span>
    <span class="comment">// BasicSnrEval is able to work.</span>
    <a class="code" href="_snr_list_8h.html#a241b5e7c9575e932988a55f7a5012a61" title="List to store SNR information for a message.">SnrList</a> snrList;

    <span class="comment">// However you can take this as a reference how to create your own</span>
    <span class="comment">// snr entries.</span>

    <span class="comment">// Everytime you want to add something to the snr information list</span>
    <span class="comment">// it has to look like this:</span>
    <span class="comment">// 1. create a list entry and fill the fields</span>
    <a class="code" href="struct_snr_list_entry.html" title="struct for SNR information">SnrListEntry</a> listEntry;
    listEntry.<a class="code" href="struct_snr_list_entry.html#a0a91ab67cfd340b315a7badf6da14ce8" title="timestamp for this SNR value">time</a> = simTime();
    listEntry.<a class="code" href="struct_snr_list_entry.html#a9126b6070ee24b0a586a267de6ebc94b" title="the SNR value">snr</a> = 3;          <span class="comment">//just a senseless example</span>

    <span class="comment">// 2. add an entry to the SnrList</span>
    snrList.push_back(listEntry);

    <span class="comment">// 3. pass the message together with the list to the decider</span>
    <a class="code" href="class_basic_snr_eval.html#a94a474e2deb6ce756900b1b64ba779df" title="Sends a message to the upper layer.">sendUp</a>(frame, snrList);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a58f6bd32dd024e3bf3bdeb84126f3bb9"></a><!-- doxytag: member="BasicSnrEval::handleLowerMsgStart" ref="a58f6bd32dd024e3bf3bdeb84126f3bb9" args="(AirFrame *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasicSnrEval::handleLowerMsgStart </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate Snr Information before buffering. </p>
<p>Redefine this function if you want to process messages from the channel before they are forwarded to upper layers</p>
<p>This function is called right after a message is received, i.e. right before it is buffered for 'transmission time'.</p>
<p>Here you should decide whether the message is "really" received or whether it's receive power is so low that it is just treated as noise.</p>
<p>If the energy of the message is high enough to really receive it you should create an snr list (<a class="el" href="_snr_list_8h.html#a241b5e7c9575e932988a55f7a5012a61">SnrList</a>) to be able to store sn(i)r information for that message. Every time a new message arrives you can add a new snr value together with a timestamp to that list. Make sure to store a pointer to the mesage together with the snr information to be able to retrieve it later.</p>
<p>In this function also an initial SNR value can be calculated for this message.</p>
<p>Please take a look at <a class="el" href="class_snr_eval.html" title="Keeps track of the different snir levels when receiving a packet.">SnrEval</a> to see a "real" example.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="_snr_list_8h.html#a241b5e7c9575e932988a55f7a5012a61" title="List to store SNR information for a message.">SnrList</a>, <a class="el" href="class_snr_eval.html" title="Keeps track of the different snir levels when receiving a packet.">SnrEval</a> </dd></dl>

<p>Reimplemented in <a class="el" href="class_gilbert_elliot_snr.html#a7e5d2fb286b5a2a78834a6d5a7ccd392">GilbertElliotSnr</a>, and <a class="el" href="class_snr_eval.html#aa4128b029feeaa5427ad6522fabce2eb">SnrEval</a>.</p>

<p>Referenced by <a class="el" href="class_basic_snr_eval.html#a63f8fd5fab971fe18a609c1053624dc1">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_basic_snr_eval_8cc.html#a27f667d27591f62ecf86a99a79ea8f42">coreEV</a> &lt;&lt; <span class="stringliteral">&quot;in handleLowerMsgStart, receiving frame &quot;</span> &lt;&lt; frame-&gt;getName() &lt;&lt; endl;

    <span class="comment">//calculate the receive power</span>

    <span class="comment">// calculate snr information, like snr=pSend/noise or whatever....</span>

    <span class="comment">// if receive power is actually high enough to be able to read the</span>
    <span class="comment">// message and no other message is currently being received, store</span>
    <span class="comment">// the snr information for the message someweher where you can find</span>
    <span class="comment">// it in handleLowerMsgEnd</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a63f8fd5fab971fe18a609c1053624dc1"></a><!-- doxytag: member="BasicSnrEval::handleMessage" ref="a63f8fd5fab971fe18a609c1053624dc1" args="(cMessage *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasicSnrEval::handleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called every time a message arrives. </p>
<p>The basic handle message function.</p>
<p>Depending on the gate a message arrives handleMessage just calls different handle*Msg functions to further process the message.</p>
<p>Messages from the channel are also buffered here in order to simulate a transmission delay</p>
<p>You should not make any changes in this function but implement all your functionality into the handle*Msg functions called from here.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_basic_snr_eval.html#a2eec34538f64365af3d19825140dacb8" title="Fill the header fields, redefine for your own needs...">handleUpperMsg</a>, <a class="el" href="class_basic_snr_eval.html#a58f6bd32dd024e3bf3bdeb84126f3bb9" title="Calculate Snr Information before buffering.">handleLowerMsgStart</a>, <a class="el" href="class_basic_snr_eval.html#aacd0c25177016c20be7e0b6090a7f191" title="Calculate SnrInfo after buffering and add the PhySnrList to the message.">handleLowerMsgEnd</a>, <a class="el" href="class_basic_snr_eval.html#a6056d3736b5f4440aa95067f1e03386c" title="Handle self messages such as timer...">handleSelfMsg</a> </dd></dl>

<p>Reimplemented in <a class="el" href="class_snr_eval.html#adbb4ecfc99b5b37ce10ca8f4db1ca495">SnrEval</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (msg-&gt;getArrivalGateId() == <a class="code" href="class_basic_snr_eval.html#a973b2265e5854d65b9ed5e8631b16aa3">uppergateIn</a>)
    {
        AirFrame *frame = <a class="code" href="class_basic_snr_eval.html#ad8268ab8f023e50ca32dca40356fa933" title="Encapsulates a MAC frame into an Air Frame.">encapsMsg</a>(<a class="code" href="_i_n_e_t_defs_8h.html#ae5b816f7de3c5248c812bdb6920f4e06">PK</a>(msg));
        <a class="code" href="class_basic_snr_eval.html#a2eec34538f64365af3d19825140dacb8" title="Fill the header fields, redefine for your own needs...">handleUpperMsg</a>(frame);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;isSelfMessage())
    {
        <span class="keywordflow">if</span> (dynamic_cast&lt;TransmComplete *&gt;(msg) != 0)
        {
            <a class="code" href="_basic_snr_eval_8cc.html#a27f667d27591f62ecf86a99a79ea8f42">coreEV</a> &lt;&lt; <span class="stringliteral">&quot;frame is completely received now\n&quot;</span>;

            <span class="comment">// unbuffer the message</span>
            AirFrame *frame = <a class="code" href="class_basic_snr_eval.html#a2319ad5b97819e6a106980dd3cf67cf3" title="Unbuffers a message after &#39;transmission time&#39;.">unbufferMsg</a>(msg);

            <a class="code" href="class_basic_snr_eval.html#aacd0c25177016c20be7e0b6090a7f191" title="Calculate SnrInfo after buffering and add the PhySnrList to the message.">handleLowerMsgEnd</a>(frame);
        }
        <span class="keywordflow">else</span>
            <a class="code" href="class_basic_snr_eval.html#a6056d3736b5f4440aa95067f1e03386c" title="Handle self messages such as timer...">handleSelfMsg</a>(msg);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (check_and_cast&lt;AirFrame *&gt;(msg)-&gt;<a class="code" href="class_basic_snr_eval.html#a1865474b5fc30b052459a3cb2b9d35fa" title="Returns the channel we&#39;re listening on. This version always returns 0 (single radio channel supported...">getChannelNumber</a>() == <a class="code" href="class_basic_snr_eval.html#a1865474b5fc30b052459a3cb2b9d35fa" title="Returns the channel we&#39;re listening on. This version always returns 0 (single radio channel supported...">getChannelNumber</a>())
    {
        <span class="comment">// must be an AirFrame</span>
        AirFrame *frame = (AirFrame *) msg;
        <a class="code" href="class_basic_snr_eval.html#a58f6bd32dd024e3bf3bdeb84126f3bb9" title="Calculate Snr Information before buffering.">handleLowerMsgStart</a>(frame);
        <a class="code" href="class_basic_snr_eval.html#a2b3c76b94adf5ef26526d4ac0c8db686" title="Buffers message for &#39;transmission time&#39;.">bufferMsg</a>(frame);
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;listening to different channel when receiving message -- dropping it\n&quot;</span>;
        <span class="keyword">delete</span> msg;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6056d3736b5f4440aa95067f1e03386c"></a><!-- doxytag: member="BasicSnrEval::handleSelfMsg" ref="a6056d3736b5f4440aa95067f1e03386c" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BasicSnrEval::handleSelfMsg </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle self messages such as timer... </p>
<p>Define this function if you want to process timer or other kinds of self messages </p>

<p>Reimplemented in <a class="el" href="class_gilbert_elliot_snr.html#a16deedca42913461c667c319487eb4a4">GilbertElliotSnr</a>, and <a class="el" href="class_snr_eval.html#ad2d58ffa8f07856cfb6b6a7afc788e51">SnrEval</a>.</p>

<p>Referenced by <a class="el" href="class_basic_snr_eval.html#a63f8fd5fab971fe18a609c1053624dc1">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keyword">delete</span> msg;};
</pre></div>
</div>
</div>
<a class="anchor" id="a2eec34538f64365af3d19825140dacb8"></a><!-- doxytag: member="BasicSnrEval::handleUpperMsg" ref="a2eec34538f64365af3d19825140dacb8" args="(AirFrame *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasicSnrEval::handleUpperMsg </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Fill the header fields, redefine for your own needs... </p>
<p>Redefine this function if you want to process messages from upper layers before they are send to the channel.</p>
<p>The MAC frame is already encapsulated in an AirFrame and all standard header fields are set.</p>
<p>To forward the message to lower layers after processing it please use <a class="el" href="class_basic_snr_eval.html#ab24fce7973732d213aa991c89de1cf97">sendDown</a>. It will take care of decapsulation and anything else needed </p>

<p>Reimplemented in <a class="el" href="class_snr_eval.html#aa001956884b5729fd1d6fabb3013d8ec">SnrEval</a>.</p>

<p>Referenced by <a class="el" href="class_basic_snr_eval.html#a63f8fd5fab971fe18a609c1053624dc1">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_basic_snr_eval.html#ab24fce7973732d213aa991c89de1cf97" title="Sends a message to the channel.">sendDown</a>(frame);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a89445ede6f19960b30f74d17335ee30f"></a><!-- doxytag: member="BasicSnrEval::initialize" ref="a89445ede6f19960b30f74d17335ee30f" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasicSnrEval::initialize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialization of the module and some variables. </p>
<p>First we have to initialize the module from which we derived ours, in this case <a class="el" href="class_channel_access.html" title="Basic class for all physical layers, please don&#39;t touch!!">ChannelAccess</a>.</p>
<p>Then we have to intialize the gates and - if necessary - some own variables.</p>
<p>If you want to use your own AirFrames you have to redefine createCapsulePkt function. </p>

<p>Reimplemented from <a class="el" href="class_channel_access.html#af4c4d6652f6e3d4846cb3d2e826f4bed">ChannelAccess</a>.</p>

<p>Reimplemented in <a class="el" href="class_gilbert_elliot_snr.html#a0886205c3ab74194fb14ccd7495498df">GilbertElliotSnr</a>, <a class="el" href="class_snr_eval.html#a10f81696b873c5acf9b65f04592c9918">SnrEval</a>, and <a class="el" href="class_snr_eval80211.html#a0ebbde9edf4489102ea539ba04c13a3e">SnrEval80211</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_basic_snr_eval.html#a89445ede6f19960b30f74d17335ee30f" title="Initialization of the module and some variables.">ChannelAccess::initialize</a>(stage);

    <a class="code" href="_basic_snr_eval_8cc.html#a27f667d27591f62ecf86a99a79ea8f42">coreEV</a> &lt;&lt; <span class="stringliteral">&quot;Initializing BasicSnrEval, stage=&quot;</span> &lt;&lt; stage &lt;&lt; endl;

    <span class="keywordflow">if</span> (stage == 0)
    {
        gate(<span class="stringliteral">&quot;radioIn&quot;</span>)-&gt;setDeliverOnReceptionStart(<span class="keyword">true</span>);

        <a class="code" href="class_basic_snr_eval.html#a973b2265e5854d65b9ed5e8631b16aa3">uppergateIn</a> = findGate(<span class="stringliteral">&quot;uppergateIn&quot;</span>);
        <a class="code" href="class_basic_snr_eval.html#a8651e49c751d8e8c488eadf25eba2047" title="gate id">uppergateOut</a> = findGate(<span class="stringliteral">&quot;uppergateOut&quot;</span>);

        <a class="code" href="class_basic_snr_eval.html#a25d3734b058a75c1a42b637db4b65902" title="a parameter that has to be read in from omnetpp.ini">headerLength</a> = par(<span class="stringliteral">&quot;headerLength&quot;</span>);
        <a class="code" href="class_basic_snr_eval.html#a515b273855ffc377f579922d5eb68dfb" title="a parameter that has to be read in from omnetpp.ini">bitrate</a> = par(<span class="stringliteral">&quot;bitrate&quot;</span>);

        <a class="code" href="class_basic_snr_eval.html#adb9a71c73bd1cb87cc91a4708ecc289f" title="power used to transmit messages">transmitterPower</a> = par(<span class="stringliteral">&quot;transmitterPower&quot;</span>);

        <span class="comment">// transmitter power CANNOT be greater than in ChannelControl</span>
        <span class="keywordflow">if</span> (<a class="code" href="class_basic_snr_eval.html#adb9a71c73bd1cb87cc91a4708ecc289f" title="power used to transmit messages">transmitterPower</a> &gt; (<span class="keywordtype">double</span>) (<a class="code" href="class_channel_access.html#a0f42b731ff69be4b1193929356e75aff" title="Pointer to the ChannelControl module.">cc</a>-&gt;par(<span class="stringliteral">&quot;pMax&quot;</span>)))
            error(<span class="stringliteral">&quot;transmitterPower cannot be bigger than pMax in ChannelControl!&quot;</span>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab24fce7973732d213aa991c89de1cf97"></a><!-- doxytag: member="BasicSnrEval::sendDown" ref="ab24fce7973732d213aa991c89de1cf97" args="(AirFrame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasicSnrEval::sendDown </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends a message to the channel. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_channel_access.html#a562995b3d9c5b279ed8a55c5221dd7b7" title="Sends a message to all hosts in range.">sendToChannel</a> </dd></dl>

<p>Referenced by <a class="el" href="class_snr_eval.html#aa001956884b5729fd1d6fabb3013d8ec">SnrEval::handleUpperMsg()</a>, and <a class="el" href="class_basic_snr_eval.html#a2eec34538f64365af3d19825140dacb8">handleUpperMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_channel_access.html#a562995b3d9c5b279ed8a55c5221dd7b7" title="Sends a message to all hosts in range.">sendToChannel</a>(msg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a94a474e2deb6ce756900b1b64ba779df"></a><!-- doxytag: member="BasicSnrEval::sendUp" ref="a94a474e2deb6ce756900b1b64ba779df" args="(AirFrame *, SnrList &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasicSnrEval::sendUp </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_snr_list_8h.html#a241b5e7c9575e932988a55f7a5012a61">SnrList</a> &amp;&#160;</td>
          <td class="paramname"><em>list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends a message to the upper layer. </p>
<p>Attach control info to the message and send message to the upper layer.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>AirFrame to pass to the decider </td></tr>
    <tr><td class="paramname">list</td><td>Snr list to attach as control info</td></tr>
  </table>
  </dd>
</dl>
<p>to be called within <a class="el" href="class_basic_snr_eval.html#aacd0c25177016c20be7e0b6090a7f191">handleLowerMsgEnd</a>. </p>

<p>Referenced by <a class="el" href="class_snr_eval.html#ae4c093f6dc4dc649070947da6051f3b2">SnrEval::handleLowerMsgEnd()</a>, <a class="el" href="class_gilbert_elliot_snr.html#a8cce1850da492f871c08ddcb3647b2ed">GilbertElliotSnr::handleLowerMsgEnd()</a>, and <a class="el" href="class_basic_snr_eval.html#aacd0c25177016c20be7e0b6090a7f191">handleLowerMsgEnd()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// create ControlInfo</span>
    SnrControlInfo *cInfo = <span class="keyword">new</span> SnrControlInfo;
    <span class="comment">// attach the list to cInfo</span>
    cInfo-&gt;setSnrList(list);
    <span class="comment">// attach the cInfo to the AirFrame</span>
    msg-&gt;setControlInfo(cInfo);

    send(msg, <a class="code" href="class_basic_snr_eval.html#a8651e49c751d8e8c488eadf25eba2047" title="gate id">uppergateOut</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2319ad5b97819e6a106980dd3cf67cf3"></a><!-- doxytag: member="BasicSnrEval::unbufferMsg" ref="a2319ad5b97819e6a106980dd3cf67cf3" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AirFrame * BasicSnrEval::unbufferMsg </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unbuffers a message after 'transmission time'. </p>
<p>Get the context pointer to the now completely received AirFrame and delete the self message </p>

<p>Referenced by <a class="el" href="class_basic_snr_eval.html#a63f8fd5fab971fe18a609c1053624dc1">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    AirFrame *frame = (AirFrame *) msg-&gt;getContextPointer();
    <span class="comment">//delete the self message</span>
    <span class="keyword">delete</span> msg;

    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a515b273855ffc377f579922d5eb68dfb"></a><!-- doxytag: member="BasicSnrEval::bitrate" ref="a515b273855ffc377f579922d5eb68dfb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_basic_snr_eval.html#a515b273855ffc377f579922d5eb68dfb">BasicSnrEval::bitrate</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>a parameter that has to be read in from omnetpp.ini </p>

<p>Referenced by <a class="el" href="class_snr_eval80211.html#a4839d233ef2b15b59d18b6347316d4b1">SnrEval80211::calcDuration()</a>, <a class="el" href="class_basic_snr_eval.html#a3670766c937b99c04bdcd84663092c7c">calcDuration()</a>, <a class="el" href="class_snr_eval80211.html#a0ebbde9edf4489102ea539ba04c13a3e">SnrEval80211::initialize()</a>, <a class="el" href="class_basic_snr_eval.html#a89445ede6f19960b30f74d17335ee30f">initialize()</a>, and <a class="el" href="class_snr_eval.html#ae590bfa74ed33f72d11857d584979727">SnrEval::setBitrate()</a>.</p>

</div>
</div>
<a class="anchor" id="a25d3734b058a75c1a42b637db4b65902"></a><!-- doxytag: member="BasicSnrEval::headerLength" ref="a25d3734b058a75c1a42b637db4b65902" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_basic_snr_eval.html#a25d3734b058a75c1a42b637db4b65902">BasicSnrEval::headerLength</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>a parameter that has to be read in from omnetpp.ini </p>

<p>Referenced by <a class="el" href="class_snr_eval80211.html#a4839d233ef2b15b59d18b6347316d4b1">SnrEval80211::calcDuration()</a>, <a class="el" href="class_basic_snr_eval.html#ad8268ab8f023e50ca32dca40356fa933">encapsMsg()</a>, <a class="el" href="class_snr_eval80211.html#a0ebbde9edf4489102ea539ba04c13a3e">SnrEval80211::initialize()</a>, and <a class="el" href="class_basic_snr_eval.html#a89445ede6f19960b30f74d17335ee30f">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="adb9a71c73bd1cb87cc91a4708ecc289f"></a><!-- doxytag: member="BasicSnrEval::transmitterPower" ref="adb9a71c73bd1cb87cc91a4708ecc289f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_basic_snr_eval.html#adb9a71c73bd1cb87cc91a4708ecc289f">BasicSnrEval::transmitterPower</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>power used to transmit messages </p>

<p>Referenced by <a class="el" href="class_basic_snr_eval.html#ad8268ab8f023e50ca32dca40356fa933">encapsMsg()</a>, and <a class="el" href="class_basic_snr_eval.html#a89445ede6f19960b30f74d17335ee30f">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a973b2265e5854d65b9ed5e8631b16aa3"></a><!-- doxytag: member="BasicSnrEval::uppergateIn" ref="a973b2265e5854d65b9ed5e8631b16aa3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_basic_snr_eval.html#a973b2265e5854d65b9ed5e8631b16aa3">BasicSnrEval::uppergateIn</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_snr_eval.html#adbb4ecfc99b5b37ce10ca8f4db1ca495">SnrEval::handleMessage()</a>, <a class="el" href="class_basic_snr_eval.html#a63f8fd5fab971fe18a609c1053624dc1">handleMessage()</a>, and <a class="el" href="class_basic_snr_eval.html#a89445ede6f19960b30f74d17335ee30f">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a8651e49c751d8e8c488eadf25eba2047"></a><!-- doxytag: member="BasicSnrEval::uppergateOut" ref="a8651e49c751d8e8c488eadf25eba2047" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_basic_snr_eval.html#a8651e49c751d8e8c488eadf25eba2047">BasicSnrEval::uppergateOut</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>gate id </p>

<p>Referenced by <a class="el" href="class_basic_snr_eval.html#a89445ede6f19960b30f74d17335ee30f">initialize()</a>, and <a class="el" href="class_basic_snr_eval.html#a94a474e2deb6ce756900b1b64ba779df">sendUp()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_basic_snr_eval_8h.html">BasicSnrEval.h</a></li>
<li><a class="el" href="_basic_snr_eval_8cc.html">BasicSnrEval.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_basic_snr_eval.html">BasicSnrEval</a>      </li>
      <li class="footer">Generated on Fri Nov 18 2011 12:47:12 for INET Framework for OMNeT++/OMNEST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
