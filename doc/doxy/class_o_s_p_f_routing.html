<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: OSPFRouting Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_o_s_p_f_routing.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">OSPFRouting Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="OSPFRouting" -->
<p><code>#include &lt;OSPFRouting.h&gt;</code></p>

<p><a href="class_o_s_p_f_routing-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#a308ea62380bcd522116dda0d58800644">OSPFRouting</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#a457db930e04bfd5be7405113756727e9">~OSPFRouting</a> (void)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#af7eb65eaa0b148353d7f4db823d68f4e">numInitStages</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#a757ca2b86873671c421c65e092630f42">initialize</a> (int stage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#acdf1e955f64a259cad0ac496e2c846a2">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#a8d385175d7fb3de98c2f0e1186386ecb">ResolveInterfaceName</a> (const std::string &amp;name) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#af45e8fcdb8a085169c6ebc910778bc40">GetAreaListFromXML</a> (const cXMLElement &amp;routerNode, std::map&lt; std::string, int &gt; &amp;areaList) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#a366e9d2f93bcb10efe24da101a6cf4a8">LoadAreaFromXML</a> (const cXMLElement &amp;asConfig, const std::string &amp;areaID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#a2f4d972b5e0953bdfa621f22a72b8113">LoadInterfaceParameters</a> (const cXMLElement &amp;ifConfig)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#a2f336ded44b9ee2443da70db19ff34f4">LoadExternalRoute</a> (const cXMLElement &amp;externalRouteConfig)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#aaaa7a0595a166970c8c6238b52dacfff">LoadHostRoute</a> (const cXMLElement &amp;hostRouteConfig)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#adb2da70e8f941e2904279f3d176bf0b5">LoadVirtualLink</a> (const cXMLElement &amp;virtualLinkConfig)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#af1b821a07e9e6aa92b95d8b88c351675">LoadConfigFromXML</a> (const char *filename)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_interface_table.html">IInterfaceTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#ad4bdd62bb9e1cdeeb118e986db7faf02">ift</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides access to the interface table.  <a href="#ad4bdd62bb9e1cdeeb118e986db7faf02"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_routing_table.html">IRoutingTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#ad46d802ce8ea2ea455fa710e963f53c8">rt</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides access to the <a class="el" href="class_i_p.html">IP</a> routing table.  <a href="#ad46d802ce8ea2ea455fa710e963f53c8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_s_p_f_1_1_router.html">OSPF::Router</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614">ospfRouter</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Root object of the <a class="el" href="namespace_o_s_p_f.html">OSPF</a> datastructure.  <a href="#a690ee8115e4d30c21e8adb5035ca5614"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>OMNeT++ module class acting as a facade for the <a class="el" href="namespace_o_s_p_f.html">OSPF</a> datastructure. Handles the configuration loading and forwards the OMNeT++ messages(OSPF packets). </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a308ea62380bcd522116dda0d58800644"></a><!-- doxytag: member="OSPFRouting::OSPFRouting" ref="a308ea62380bcd522116dda0d58800644" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OSPFRouting::OSPFRouting </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614" title="Root object of the OSPF datastructure.">ospfRouter</a> = NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a457db930e04bfd5be7405113756727e9"></a><!-- doxytag: member="OSPFRouting::~OSPFRouting" ref="a457db930e04bfd5be7405113756727e9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OSPFRouting::~OSPFRouting </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destructor. Deletes the whole <a class="el" href="namespace_o_s_p_f.html">OSPF</a> datastructure. </p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">delete</span> <a class="code" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614" title="Root object of the OSPF datastructure.">ospfRouter</a>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af45e8fcdb8a085169c6ebc910778bc40"></a><!-- doxytag: member="OSPFRouting::GetAreaListFromXML" ref="af45e8fcdb8a085169c6ebc910778bc40" args="(const cXMLElement &amp;routerNode, std::map&lt; std::string, int &gt; &amp;areaList) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSPFRouting::GetAreaListFromXML </td>
          <td>(</td>
          <td class="paramtype">const cXMLElement &amp;&#160;</td>
          <td class="paramname"><em>routerNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::string, int &gt; &amp;&#160;</td>
          <td class="paramname"><em>areaList</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads a list of <a class="el" href="namespace_o_s_p_f.html">OSPF</a> Areas connected to this router from the config XML. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">routerNode</td><td>[in] XML node describing this router. </td></tr>
    <tr><td class="paramname">areaList</td><td>[out] A hash of <a class="el" href="namespace_o_s_p_f.html">OSPF</a> Areas connected to this router. The hash key is the Area ID. </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="class_o_s_p_f_routing.html#af1b821a07e9e6aa92b95d8b88c351675">LoadConfigFromXML()</a>.</p>
<div class="fragment"><pre class="fragment">{
    cXMLElementList routerConfig = routerNode.getChildren();
    <span class="keywordflow">for</span> (cXMLElementList::iterator routerConfigIt = routerConfig.begin(); routerConfigIt != routerConfig.end(); routerConfigIt++) {
        std::string nodeName = (*routerConfigIt)-&gt;getTagName();
        <span class="keywordflow">if</span> ((nodeName == <span class="stringliteral">&quot;PointToPointInterface&quot;</span>) ||
            (nodeName == <span class="stringliteral">&quot;BroadcastInterface&quot;</span>) ||
            (nodeName == <span class="stringliteral">&quot;NBMAInterface&quot;</span>) ||
            (nodeName == <span class="stringliteral">&quot;PointToMultiPointInterface&quot;</span>))
        {
            std::string areaId = (*routerConfigIt)-&gt;getChildrenByTagName(<span class="stringliteral">&quot;AreaID&quot;</span>)[0]-&gt;getNodeValue();
            <span class="keywordflow">if</span> (areaList.find(areaId) == areaList.end()) {
                areaList[areaId] = 1;
            }
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="acdf1e955f64a259cad0ac496e2c846a2"></a><!-- doxytag: member="OSPFRouting::handleMessage" ref="acdf1e955f64a259cad0ac496e2c846a2" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSPFRouting::handleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Forwards <a class="el" href="namespace_o_s_p_f.html">OSPF</a> messages to the message handler object of the <a class="el" href="namespace_o_s_p_f.html">OSPF</a> datastructure. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>[in] The <a class="el" href="namespace_o_s_p_f.html">OSPF</a> message. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment">{
<span class="comment">//    if (simulation.getEventNumber() == 90591) {</span>
<span class="comment">//        __asm int 3;</span>
<span class="comment">//    }</span>
    <a class="code" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614" title="Root object of the OSPF datastructure.">ospfRouter</a>-&gt;<a class="code" href="class_o_s_p_f_1_1_router.html#ab2b6452dadb00d2970e3432b0b29e17f">GetMessageHandler</a>()-&gt;MessageReceived(msg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a757ca2b86873671c421c65e092630f42"></a><!-- doxytag: member="OSPFRouting::initialize" ref="a757ca2b86873671c421c65e092630f42" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSPFRouting::initialize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>OMNeT++ init method. Runs at stage 2 after interfaces are registered(stage 0) and the routing table is initialized(stage 1). Loads <a class="el" href="namespace_o_s_p_f.html">OSPF</a> configuration information from the config XML. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>[in] The initialization stage. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// we have to wait for stage 2 until interfaces get registered(stage 0)</span>
    <span class="comment">// and routerId gets assigned(stage 3)</span>
    <span class="keywordflow">if</span> (stage == 4)
    {
        <a class="code" href="class_o_s_p_f_routing.html#ad46d802ce8ea2ea455fa710e963f53c8" title="Provides access to the IP routing table.">rt</a> = <a class="code" href="class_routing_table_access.html">RoutingTableAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
        <a class="code" href="class_o_s_p_f_routing.html#ad4bdd62bb9e1cdeeb118e986db7faf02" title="Provides access to the interface table.">ift</a> = <a class="code" href="class_interface_table_access.html">InterfaceTableAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();

        <span class="comment">// Get routerId</span>
        <a class="code" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614" title="Root object of the OSPF datastructure.">ospfRouter</a> = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_router.html">OSPF::Router</a>(<a class="code" href="class_o_s_p_f_routing.html#ad46d802ce8ea2ea455fa710e963f53c8" title="Provides access to the IP routing table.">rt</a>-&gt;<a class="code" href="class_i_routing_table.html#a64a9a5b1414f4da0b7b0a3e079091f62">getRouterId</a>().<a class="code" href="class_i_p_address.html#a807ca46964a8403cf0c70f0772179524">getInt</a>(), <span class="keyword">this</span>);

        <span class="comment">// read the OSPF AS configuration</span>
        <span class="keyword">const</span> <span class="keywordtype">char</span> *fileName = par(<span class="stringliteral">&quot;ospfConfigFile&quot;</span>);
        <span class="keywordflow">if</span> (fileName == NULL || (!strcmp(fileName, <span class="stringliteral">&quot;&quot;</span>)) || !<a class="code" href="class_o_s_p_f_routing.html#af1b821a07e9e6aa92b95d8b88c351675">LoadConfigFromXML</a>(fileName))
            error(<span class="stringliteral">&quot;Error reading AS configuration from file %s&quot;</span>, fileName);

        <a class="code" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614" title="Root object of the OSPF datastructure.">ospfRouter</a>-&gt;<a class="code" href="class_o_s_p_f_1_1_router.html#a41c5b61bcaa1c23247f64d5eebba64b3">AddWatches</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a366e9d2f93bcb10efe24da101a6cf4a8"></a><!-- doxytag: member="OSPFRouting::LoadAreaFromXML" ref="a366e9d2f93bcb10efe24da101a6cf4a8" args="(const cXMLElement &amp;asConfig, const std::string &amp;areaID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSPFRouting::LoadAreaFromXML </td>
          <td>(</td>
          <td class="paramtype">const cXMLElement &amp;&#160;</td>
          <td class="paramname"><em>asConfig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>areaID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads basic configuration information for a given area from the config XML. Reads the configured address ranges, and whether this Area should be handled as a stub Area. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">asConfig</td><td>[in] XML node describing the configuration of the whole Autonomous System. </td></tr>
    <tr><td class="paramname">areaID</td><td>[in] The Area to be added to the <a class="el" href="namespace_o_s_p_f.html">OSPF</a> datastructure. </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="class_o_s_p_f_routing.html#af1b821a07e9e6aa92b95d8b88c351675">LoadConfigFromXML()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::string areaXPath(<span class="stringliteral">&quot;Area[@id=&#39;&quot;</span>);
    areaXPath += areaID;
    areaXPath += <span class="stringliteral">&quot;&#39;]&quot;</span>;

    cXMLElement* areaConfig = asConfig.getElementByPath(areaXPath.c_str());
    <span class="keywordflow">if</span> (areaConfig == NULL) {
        error(<span class="stringliteral">&quot;No configuration for Area ID: %s&quot;</span>, areaID.c_str());
    }
    <span class="keywordflow">else</span> {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;    loading info for Area id = &quot;</span> &lt;&lt; areaID &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
    }

    <a class="code" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a>* area = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a>(<a class="code" href="_o_s_p_fcommon_8h.html#a4f2f8ba751b645157dacc7b6a57f4157">ULongFromAddressString</a>(areaID.c_str()));
    cXMLElementList areaDetails = areaConfig-&gt;getChildren();
    <span class="keywordflow">for</span> (cXMLElementList::iterator arIt = areaDetails.begin(); arIt != areaDetails.end(); arIt++) {
        std::string nodeName = (*arIt)-&gt;getTagName();
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;AddressRange&quot;</span>) {
            <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a> addressRange;
            addressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#a74993d6571119644535ac918c4240722">address</a> = <a class="code" href="_o_s_p_fcommon_8h.html#add192341579a523d6fa090e1f434630e">IPv4AddressFromAddressString</a>((*arIt)-&gt;getChildrenByTagName(<span class="stringliteral">&quot;Address&quot;</span>)[0]-&gt;getNodeValue());
            addressRange.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#a452878c3f507f27d1de9c5b7cda2ae70">mask</a> = <a class="code" href="_o_s_p_fcommon_8h.html#add192341579a523d6fa090e1f434630e">IPv4AddressFromAddressString</a>((*arIt)-&gt;getChildrenByTagName(<span class="stringliteral">&quot;Mask&quot;</span>)[0]-&gt;getNodeValue());
            std::string status = (*arIt)-&gt;getChildrenByTagName(<span class="stringliteral">&quot;Status&quot;</span>)[0]-&gt;getNodeValue();
            <span class="keywordflow">if</span> (status == <span class="stringliteral">&quot;Advertise&quot;</span>) {
                area-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a0e17e1016c0431e17ed1dec9e42eddcf">AddAddressRange</a>(addressRange, <span class="keyword">true</span>);
            } <span class="keywordflow">else</span> {
                area-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a0e17e1016c0431e17ed1dec9e42eddcf">AddAddressRange</a>(addressRange, <span class="keyword">false</span>);
            }
        }
        <span class="keywordflow">if</span> ((nodeName == <span class="stringliteral">&quot;Stub&quot;</span>) &amp;&amp; (areaID != <span class="stringliteral">&quot;0.0.0.0&quot;</span>)) {    <span class="comment">// the backbone cannot be configured as a stub</span>
            area-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a5060a99bf739416c16e7a595b3baa66a">SetExternalRoutingCapability</a>(<span class="keyword">false</span>);
            area-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#a5155ce525d9b42cee7be815bd6019868">SetStubDefaultCost</a>(atoi((*arIt)-&gt;getChildrenByTagName(<span class="stringliteral">&quot;DefaultCost&quot;</span>)[0]-&gt;getNodeValue()));
        }
    }
    <span class="comment">// Add the Area to the router</span>
    <a class="code" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614" title="Root object of the OSPF datastructure.">ospfRouter</a>-&gt;<a class="code" href="class_o_s_p_f_1_1_router.html#aeb3b4bfce0df4171c50b5d174112b130">AddArea</a>(area);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af1b821a07e9e6aa92b95d8b88c351675"></a><!-- doxytag: member="OSPFRouting::LoadConfigFromXML" ref="af1b821a07e9e6aa92b95d8b88c351675" args="(const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OSPFRouting::LoadConfigFromXML </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads the configuration of the <a class="el" href="namespace_o_s_p_f.html">OSPF</a> datastructure from the config XML. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>[in] The path of the XML config file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if the configuration was succesfully loaded. </dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">an</td><td>getError() otherwise. </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="class_o_s_p_f_routing.html#a757ca2b86873671c421c65e092630f42">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    cXMLElement* asConfig = ev.getXMLDocument(filename);
    <span class="keywordflow">if</span> (asConfig == NULL) {
        error(<span class="stringliteral">&quot;Cannot read AS configuration from file: %s&quot;</span>, filename);
    }

    <span class="comment">// load information on this router</span>
    std::string routerXPath(<span class="stringliteral">&quot;Router[@id=&#39;&quot;</span>);
    <a class="code" href="class_i_p_address.html">IPAddress</a> routerId(<a class="code" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614" title="Root object of the OSPF datastructure.">ospfRouter</a>-&gt;<a class="code" href="class_o_s_p_f_1_1_router.html#a12b09f4263d005f7b0cd808502c1de48">GetRouterID</a>());
    routerXPath += routerId.<a class="code" href="class_i_p_address.html#a50f58febbf2ded78b9f6e32e579f5d2b">str</a>();
    routerXPath += <span class="stringliteral">&quot;&#39;]&quot;</span>;

    cXMLElement* routerNode = asConfig-&gt;getElementByPath(routerXPath.c_str());
    <span class="keywordflow">if</span> (routerNode == NULL) {
        error(<span class="stringliteral">&quot;No configuration for Router ID: %s&quot;</span>, routerId.str().c_str());
    }
    <span class="keywordflow">else</span> {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;OSPFRouting: Loading info for Router id = &quot;</span> &lt;&lt; routerId.str() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
    }

    <span class="keywordflow">if</span> (routerNode-&gt;getChildrenByTagName(<span class="stringliteral">&quot;RFC1583Compatible&quot;</span>).size() &gt; 0) {
        <a class="code" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614" title="Root object of the OSPF datastructure.">ospfRouter</a>-&gt;<a class="code" href="class_o_s_p_f_1_1_router.html#ae27ea511ced12487b158e87d4582ea21">SetRFC1583Compatibility</a>(<span class="keyword">true</span>);
    }

    std::map&lt;std::string, int&gt; areaList;
    <a class="code" href="class_o_s_p_f_routing.html#af45e8fcdb8a085169c6ebc910778bc40">GetAreaListFromXML</a>(*routerNode, areaList);

    <span class="comment">// load area information</span>
    <span class="keywordflow">for</span> (std::map&lt;std::string, int&gt;::iterator areaIt = areaList.begin(); areaIt != areaList.end(); areaIt++) {
        <a class="code" href="class_o_s_p_f_routing.html#a366e9d2f93bcb10efe24da101a6cf4a8">LoadAreaFromXML</a>(*asConfig, areaIt-&gt;first);
    }
    <span class="comment">// if the router is an area border router then it MUST be part of the backbone(area 0)</span>
    <span class="keywordflow">if</span> ((areaList.size() &gt; 1) &amp;&amp; (areaList.find(<span class="stringliteral">&quot;0.0.0.0&quot;</span>) == areaList.end())) {
        <a class="code" href="class_o_s_p_f_routing.html#a366e9d2f93bcb10efe24da101a6cf4a8">LoadAreaFromXML</a>(*asConfig, <span class="stringliteral">&quot;0.0.0.0&quot;</span>);
    }

    <span class="comment">// load interface information</span>
    cXMLElementList routerConfig = routerNode-&gt;getChildren();
    <span class="keywordflow">for</span> (cXMLElementList::iterator routerConfigIt = routerConfig.begin(); routerConfigIt != routerConfig.end(); routerConfigIt++) {
        std::string nodeName = (*routerConfigIt)-&gt;getTagName();
        <span class="keywordflow">if</span> ((nodeName == <span class="stringliteral">&quot;PointToPointInterface&quot;</span>) ||
            (nodeName == <span class="stringliteral">&quot;BroadcastInterface&quot;</span>) ||
            (nodeName == <span class="stringliteral">&quot;NBMAInterface&quot;</span>) ||
            (nodeName == <span class="stringliteral">&quot;PointToMultiPointInterface&quot;</span>))
        {
            <a class="code" href="class_o_s_p_f_routing.html#a2f4d972b5e0953bdfa621f22a72b8113">LoadInterfaceParameters</a>(*(*routerConfigIt));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;ExternalInterface&quot;</span>) {
            <a class="code" href="class_o_s_p_f_routing.html#a2f336ded44b9ee2443da70db19ff34f4">LoadExternalRoute</a>(*(*routerConfigIt));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;HostInterface&quot;</span>) {
            <a class="code" href="class_o_s_p_f_routing.html#aaaa7a0595a166970c8c6238b52dacfff">LoadHostRoute</a>(*(*routerConfigIt));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;VirtualLink&quot;</span>) {
            <a class="code" href="class_o_s_p_f_routing.html#adb2da70e8f941e2904279f3d176bf0b5">LoadVirtualLink</a>(*(*routerConfigIt));
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2f336ded44b9ee2443da70db19ff34f4"></a><!-- doxytag: member="OSPFRouting::LoadExternalRoute" ref="a2f336ded44b9ee2443da70db19ff34f4" args="(const cXMLElement &amp;externalRouteConfig)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSPFRouting::LoadExternalRoute </td>
          <td>(</td>
          <td class="paramtype">const cXMLElement &amp;&#160;</td>
          <td class="paramname"><em>externalRouteConfig</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads the configuration information of a route outside of the Autonomous System(external route). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">externalRouteConfig</td><td>[in] XML node describing the parameters of an external route. </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="class_o_s_p_f_routing.html#af1b821a07e9e6aa92b95d8b88c351675">LoadConfigFromXML()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::string               ifName  = externalRouteConfig.getAttribute(<span class="stringliteral">&quot;ifName&quot;</span>);
    <span class="keywordtype">int</span>                       ifIndex = <a class="code" href="class_o_s_p_f_routing.html#a8d385175d7fb3de98c2f0e1186386ecb">ResolveInterfaceName</a>(ifName);
    OSPFASExternalLSAContents asExternalRoute;
    <a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html">OSPF::RoutingTableEntry</a>   externalRoutingEntry; <span class="comment">// only used here to keep the path cost calculation in one place</span>
    <a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html">OSPF::IPv4AddressRange</a>    networkAddress;

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;        loading ExternalInterface &quot;</span> &lt;&lt; ifName &lt;&lt; <span class="stringliteral">&quot; ifIndex[&quot;</span> &lt;&lt; ifIndex &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>;

    cXMLElementList ifDetails = externalRouteConfig.getChildren();
    <span class="keywordflow">for</span> (cXMLElementList::iterator exElemIt = ifDetails.begin(); exElemIt != ifDetails.end(); exElemIt++) {
        std::string nodeName = (*exElemIt)-&gt;getTagName();
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;AdvertisedExternalNetwork&quot;</span>) {
            networkAddress.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#a74993d6571119644535ac918c4240722">address</a> = <a class="code" href="_o_s_p_fcommon_8h.html#add192341579a523d6fa090e1f434630e">IPv4AddressFromAddressString</a>((*exElemIt)-&gt;getChildrenByTagName(<span class="stringliteral">&quot;Address&quot;</span>)[0]-&gt;getNodeValue());
            networkAddress.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#a452878c3f507f27d1de9c5b7cda2ae70">mask</a>    = <a class="code" href="_o_s_p_fcommon_8h.html#add192341579a523d6fa090e1f434630e">IPv4AddressFromAddressString</a>((*exElemIt)-&gt;getChildrenByTagName(<span class="stringliteral">&quot;Mask&quot;</span>)[0]-&gt;getNodeValue());
            asExternalRoute.setNetworkMask(<a class="code" href="_o_s_p_fcommon_8h.html#a4da9e68bb3ffcba090d1b07a5f812ce3">ULongFromIPv4Address</a>(networkAddress.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#a452878c3f507f27d1de9c5b7cda2ae70">mask</a>));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;ExternalInterfaceOutputParameters&quot;</span>) {
            std::string metricType = (*exElemIt)-&gt;getChildrenByTagName(<span class="stringliteral">&quot;ExternalInterfaceOutputType&quot;</span>)[0]-&gt;getNodeValue();
            <span class="keywordtype">int</span>         routeCost  = atoi((*exElemIt)-&gt;getChildrenByTagName(<span class="stringliteral">&quot;ExternalInterfaceOutputCost&quot;</span>)[0]-&gt;getNodeValue());

            asExternalRoute.setRouteCost(routeCost);
            <span class="keywordflow">if</span> (metricType == <span class="stringliteral">&quot;Type2&quot;</span>) {
                asExternalRoute.setE_ExternalMetricType(<span class="keyword">true</span>);
                externalRoutingEntry.<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a06e98e3f9b93ec4c977298a484a107f9">SetType2Cost</a>(routeCost);
                externalRoutingEntry.<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a7ca15b35b5d0c9d2818ba07ef50b7419">SetPathType</a>(<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a32d865d25745b844bcc6100e11dfd254aa63a69910a414a0c0b98c96f51395766">OSPF::RoutingTableEntry::Type2External</a>);
            } <span class="keywordflow">else</span> {
                asExternalRoute.setE_ExternalMetricType(<span class="keyword">false</span>);
                externalRoutingEntry.<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a6e9bfa59d5a79d87894d26e48f08043d">SetCost</a>(routeCost);
                externalRoutingEntry.<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a7ca15b35b5d0c9d2818ba07ef50b7419">SetPathType</a>(<a class="code" href="class_o_s_p_f_1_1_routing_table_entry.html#a32d865d25745b844bcc6100e11dfd254aa222aff0a2b4a30f1a3f2020b697e558">OSPF::RoutingTableEntry::Type1External</a>);
            }
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;ForwardingAddress&quot;</span>) {
            asExternalRoute.setForwardingAddress(<a class="code" href="_o_s_p_fcommon_8h.html#a4f2f8ba751b645157dacc7b6a57f4157">ULongFromAddressString</a>((*exElemIt)-&gt;getNodeValue()));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;ExternalRouteTag&quot;</span>) {
            std::string externalRouteTag = (*exElemIt)-&gt;getNodeValue();
            <span class="keywordtype">char</span>        externalRouteTagValue[4];

            memset(externalRouteTagValue, 0, 4 * <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
            <span class="keywordtype">int</span> externalRouteTagLength = externalRouteTag.length();
            <span class="keywordflow">if</span> ((externalRouteTagLength &gt; 4) &amp;&amp; (externalRouteTagLength &lt;= 10) &amp;&amp; (externalRouteTagLength % 2 == 0) &amp;&amp; (externalRouteTag[0] == <span class="charliteral">&#39;0&#39;</span>) &amp;&amp; (externalRouteTag[1] == <span class="charliteral">&#39;x&#39;</span>)) {
                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = externalRouteTagLength; (i &gt; 2); i -= 2) {
                    externalRouteTagValue[(i - 2) / 2] = <a class="code" href="_o_s_p_fcommon_8h.html#a889a6de7cccb5c78d5bf654ce2351f9f">HexPairToByte</a>(externalRouteTag[i - 1], externalRouteTag[i]);
                }
            }
            asExternalRoute.setExternalRouteTag((externalRouteTagValue[0] &lt;&lt; 24) + (externalRouteTagValue[1] &lt;&lt; 16) + (externalRouteTagValue[2] &lt;&lt; 8) + externalRouteTagValue[3]);
        }
    }
    <span class="comment">// add the external route to the OSPF datastructure</span>
    <a class="code" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614" title="Root object of the OSPF datastructure.">ospfRouter</a>-&gt;<a class="code" href="class_o_s_p_f_1_1_router.html#aed64d2915aba911a976c06f053ecf19f">UpdateExternalRoute</a>(networkAddress.<a class="code" href="struct_o_s_p_f_1_1_i_pv4_address_range.html#a74993d6571119644535ac918c4240722">address</a>, asExternalRoute, ifIndex);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaaa7a0595a166970c8c6238b52dacfff"></a><!-- doxytag: member="OSPFRouting::LoadHostRoute" ref="aaaa7a0595a166970c8c6238b52dacfff" args="(const cXMLElement &amp;hostRouteConfig)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSPFRouting::LoadHostRoute </td>
          <td>(</td>
          <td class="paramtype">const cXMLElement &amp;&#160;</td>
          <td class="paramname"><em>hostRouteConfig</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads the configuration of a host getRoute(a host directly connected to the router). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hostRouteConfig</td><td>[in] XML node describing the parameters of a host route. </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="class_o_s_p_f_routing.html#af1b821a07e9e6aa92b95d8b88c351675">LoadConfigFromXML()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct_o_s_p_f_1_1_host_route_parameters.html">OSPF::HostRouteParameters</a> hostParameters;
    <a class="code" href="namespace_o_s_p_f.html#a8d10c460f2da4aae5dd61d2a082dfc56">OSPF::AreaID</a>              hostArea;

    std::string ifName = hostRouteConfig.getAttribute(<span class="stringliteral">&quot;ifName&quot;</span>);
    hostParameters.<a class="code" href="struct_o_s_p_f_1_1_host_route_parameters.html#ad87d530d4294ea13f03264b82df05baf">ifIndex</a> = <a class="code" href="class_o_s_p_f_routing.html#a8d385175d7fb3de98c2f0e1186386ecb">ResolveInterfaceName</a>(ifName);

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;        loading HostInterface &quot;</span> &lt;&lt; ifName &lt;&lt; <span class="stringliteral">&quot; ifIndex[&quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">short</span><span class="keyword">&gt;</span> (hostParameters.<a class="code" href="struct_o_s_p_f_1_1_host_route_parameters.html#ad87d530d4294ea13f03264b82df05baf">ifIndex</a>) &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>;

    cXMLElementList ifDetails = hostRouteConfig.getChildren();
    <span class="keywordflow">for</span> (cXMLElementList::iterator hostElemIt = ifDetails.begin(); hostElemIt != ifDetails.end(); hostElemIt++) {
        std::string nodeName = (*hostElemIt)-&gt;getTagName();
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;AreaID&quot;</span>) {
            hostArea = <a class="code" href="_o_s_p_fcommon_8h.html#a4f2f8ba751b645157dacc7b6a57f4157">ULongFromAddressString</a>((*hostElemIt)-&gt;getNodeValue());
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;AttachedHost&quot;</span>) {
            hostParameters.<a class="code" href="struct_o_s_p_f_1_1_host_route_parameters.html#aa5fed9620e06e6ae079b51bc5aca8e40">address</a> = <a class="code" href="_o_s_p_fcommon_8h.html#add192341579a523d6fa090e1f434630e">IPv4AddressFromAddressString</a>((*hostElemIt)-&gt;getNodeValue());
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;LinkCost&quot;</span>) {
            hostParameters.<a class="code" href="struct_o_s_p_f_1_1_host_route_parameters.html#aa9a4eb549077183bf19aff1f5672255e">linkCost</a> = atoi((*hostElemIt)-&gt;getNodeValue());
        }
    }
    <span class="comment">// add the host route to the OSPF datastructure.</span>
    <a class="code" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a>* area = <a class="code" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614" title="Root object of the OSPF datastructure.">ospfRouter</a>-&gt;<a class="code" href="class_o_s_p_f_1_1_router.html#af1593be786d4bdd63bb6805d5bdefb50">GetArea</a>(hostArea);
    <span class="keywordflow">if</span> (area != NULL) {
        area-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#aadd71837885c90c5bd658f577464383e">AddHostRoute</a>(hostParameters);

    } <span class="keywordflow">else</span> {
        error(<span class="stringliteral">&quot;Loading HostInterface ifIndex[%d] in Area %d aborted&quot;</span>, hostParameters.<a class="code" href="struct_o_s_p_f_1_1_host_route_parameters.html#ad87d530d4294ea13f03264b82df05baf">ifIndex</a>, hostArea);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2f4d972b5e0953bdfa621f22a72b8113"></a><!-- doxytag: member="OSPFRouting::LoadInterfaceParameters" ref="a2f4d972b5e0953bdfa621f22a72b8113" args="(const cXMLElement &amp;ifConfig)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSPFRouting::LoadInterfaceParameters </td>
          <td>(</td>
          <td class="paramtype">const cXMLElement &amp;&#160;</td>
          <td class="paramname"><em>ifConfig</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads <a class="el" href="namespace_o_s_p_f.html">OSPF</a> configuration information for a router interface. Handles PointToPoint, Broadcast, NBMA and PointToMultiPoint interfaces. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ifConfig</td><td>[in] XML node describing the configuration of an <a class="el" href="namespace_o_s_p_f.html">OSPF</a> interface. </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="class_o_s_p_f_routing.html#af1b821a07e9e6aa92b95d8b88c351675">LoadConfigFromXML()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>* intf          = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>;
    std::string      ifName        = ifConfig.getAttribute(<span class="stringliteral">&quot;ifName&quot;</span>);
    <span class="keywordtype">int</span>              ifIndex       = <a class="code" href="class_o_s_p_f_routing.html#a8d385175d7fb3de98c2f0e1186386ecb">ResolveInterfaceName</a>(ifName);
    std::string      interfaceType = ifConfig.getTagName();

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;        loading &quot;</span> &lt;&lt; interfaceType &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; ifName &lt;&lt; <span class="stringliteral">&quot; ifIndex[&quot;</span> &lt;&lt; ifIndex &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>;

    intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a7c4201bb2f873917dd32fc330daef413">SetIfIndex</a>(ifIndex);
    <span class="keywordflow">if</span> (interfaceType == <span class="stringliteral">&quot;PointToPointInterface&quot;</span>) {
        intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#adcd4b8414def2afd4eee3af284da430d">SetType</a>(<a class="code" href="class_o_s_p_f_1_1_interface.html#a558b3988a38b079460b57f092eacf4aca4dac0c4eca27454daabf38ea32f47775">OSPF::Interface::PointToPoint</a>);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (interfaceType == <span class="stringliteral">&quot;BroadcastInterface&quot;</span>) {
        intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#adcd4b8414def2afd4eee3af284da430d">SetType</a>(<a class="code" href="class_o_s_p_f_1_1_interface.html#a558b3988a38b079460b57f092eacf4aca15decf080ad941585245418cfb9458c9">OSPF::Interface::Broadcast</a>);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (interfaceType == <span class="stringliteral">&quot;NBMAInterface&quot;</span>) {
        intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#adcd4b8414def2afd4eee3af284da430d">SetType</a>(<a class="code" href="class_o_s_p_f_1_1_interface.html#a558b3988a38b079460b57f092eacf4acae26d6f3ee5ee0f7c1ed2f2196c1dfe07">OSPF::Interface::NBMA</a>);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (interfaceType == <span class="stringliteral">&quot;PointToMultiPointInterface&quot;</span>) {
        intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#adcd4b8414def2afd4eee3af284da430d">SetType</a>(<a class="code" href="class_o_s_p_f_1_1_interface.html#a558b3988a38b079460b57f092eacf4aca661d5c29aedcfc3f712b4084e12d51ae">OSPF::Interface::PointToMultiPoint</a>);
    } <span class="keywordflow">else</span> {
        <span class="keyword">delete</span> intf;
        error(<span class="stringliteral">&quot;Loading %s ifIndex[%d] aborted&quot;</span>, interfaceType.c_str(), ifIndex);
    }

    <a class="code" href="namespace_o_s_p_f.html#a8d10c460f2da4aae5dd61d2a082dfc56">OSPF::AreaID</a>    areaID    = 0;
    cXMLElementList ifDetails = ifConfig.getChildren();

    <span class="keywordflow">for</span> (cXMLElementList::iterator ifElemIt = ifDetails.begin(); ifElemIt != ifDetails.end(); ifElemIt++) {
        std::string nodeName = (*ifElemIt)-&gt;getTagName();
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;AreaID&quot;</span>) {
            areaID = <a class="code" href="_o_s_p_fcommon_8h.html#a4f2f8ba751b645157dacc7b6a57f4157">ULongFromAddressString</a>((*ifElemIt)-&gt;getNodeValue());
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#ae0216e64c1bce8a8fdfa68165cb73ae5">SetAreaID</a>(areaID);
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;InterfaceOutputCost&quot;</span>) {
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a5deaa4e5d2b7e75d934c79e3b727e954">SetOutputCost</a>(atoi((*ifElemIt)-&gt;getNodeValue()));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;RetransmissionInterval&quot;</span>) {
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a21654ec08c047a82e4f9ada4253334e3">SetRetransmissionInterval</a>(atoi((*ifElemIt)-&gt;getNodeValue()));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;InterfaceTransmissionDelay&quot;</span>) {
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a5071ff810d8d1698334c3cedaecb95e2">SetTransmissionDelay</a>(atoi((*ifElemIt)-&gt;getNodeValue()));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;RouterPriority&quot;</span>) {
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#ad2b8d0dc855d09bdbd2115a6db6cf00e">SetRouterPriority</a>(atoi((*ifElemIt)-&gt;getNodeValue()));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;HelloInterval&quot;</span>) {
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a293d869360c0365c5975a84e585233aa">SetHelloInterval</a>(atoi((*ifElemIt)-&gt;getNodeValue()));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;RouterDeadInterval&quot;</span>) {
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a689a2f9ca652351f3404c25a8e2acd8f">SetRouterDeadInterval</a>(atoi((*ifElemIt)-&gt;getNodeValue()));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;AuthenticationType&quot;</span>) {
            std::string authenticationType = (*ifElemIt)-&gt;getNodeValue();
            <span class="keywordflow">if</span> (authenticationType == <span class="stringliteral">&quot;SimplePasswordType&quot;</span>) {
                intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a35a3101643696ffe3576162b69bf2bc5">SetAuthenticationType</a>(<a class="code" href="namespace_o_s_p_f.html#a2e0cad18e6b80ee3a427a65a0b395aafa13c53535f35435755bfb2dcf2d709076">OSPF::SimplePasswordType</a>);
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (authenticationType == <span class="stringliteral">&quot;CrytographicType&quot;</span>) {
                intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a35a3101643696ffe3576162b69bf2bc5">SetAuthenticationType</a>(<a class="code" href="namespace_o_s_p_f.html#a2e0cad18e6b80ee3a427a65a0b395aafa2f33878554866e1aa7ef58a8df3d320e">OSPF::CrytographicType</a>);
            } <span class="keywordflow">else</span> {
                intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a35a3101643696ffe3576162b69bf2bc5">SetAuthenticationType</a>(<a class="code" href="namespace_o_s_p_f.html#a2e0cad18e6b80ee3a427a65a0b395aafaa912eb1946419ebf910b2b8322788ca9">OSPF::NullType</a>);
            }
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;AuthenticationKey&quot;</span>) {
            std::string key = (*ifElemIt)-&gt;getNodeValue();
            <a class="code" href="struct_o_s_p_f_1_1_authentication_key_type.html">OSPF::AuthenticationKeyType</a> keyValue;
            memset(keyValue.<a class="code" href="struct_o_s_p_f_1_1_authentication_key_type.html#a09102c74d106ef556c423ea0438aed4a">bytes</a>, 0, 8 * <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
            <span class="keywordtype">int</span> keyLength = key.length();
            <span class="keywordflow">if</span> ((keyLength &gt; 4) &amp;&amp; (keyLength &lt;= 18) &amp;&amp; (keyLength % 2 == 0) &amp;&amp; (key[0] == <span class="charliteral">&#39;0&#39;</span>) &amp;&amp; (key[1] == <span class="charliteral">&#39;x&#39;</span>)) {
                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = keyLength; (i &gt; 2); i -= 2) {
                    keyValue.<a class="code" href="struct_o_s_p_f_1_1_authentication_key_type.html#a09102c74d106ef556c423ea0438aed4a">bytes</a>[(i - 2) / 2] = <a class="code" href="_o_s_p_fcommon_8h.html#a889a6de7cccb5c78d5bf654ce2351f9f">HexPairToByte</a>(key[i - 1], key[i]);
                }
            }
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a5b1fafec8e83e59b39e7ec17c162c9cb">SetAuthenticationKey</a>(keyValue);
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;PollInterval&quot;</span>) {
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a39ab8d1060b5e7eeff0b5bd1e50c1d6a">SetPollInterval</a>(atoi((*ifElemIt)-&gt;getNodeValue()));
        }
        <span class="keywordflow">if</span> ((interfaceType == <span class="stringliteral">&quot;NBMAInterface&quot;</span>) &amp;&amp; (nodeName == <span class="stringliteral">&quot;NBMANeighborList&quot;</span>)) {
            cXMLElementList neighborList = (*ifElemIt)-&gt;getChildren();
            <span class="keywordflow">for</span> (cXMLElementList::iterator neighborIt = neighborList.begin(); neighborIt != neighborList.end(); neighborIt++) {
                std::string neighborNodeName = (*neighborIt)-&gt;getTagName();
                <span class="keywordflow">if</span> (neighborNodeName == <span class="stringliteral">&quot;NBMANeighbor&quot;</span>) {
                    <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>;
                    neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a4fa4de2681d4abe417553d7883869529">SetAddress</a>(<a class="code" href="_o_s_p_fcommon_8h.html#add192341579a523d6fa090e1f434630e">IPv4AddressFromAddressString</a>((*neighborIt)-&gt;getChildrenByTagName(<span class="stringliteral">&quot;NetworkInterfaceAddress&quot;</span>)[0]-&gt;getNodeValue()));
                    neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a870a8aa258b8d1250b5e13c67688898b">SetPriority</a>(atoi((*neighborIt)-&gt;getChildrenByTagName(<span class="stringliteral">&quot;NeighborPriority&quot;</span>)[0]-&gt;getNodeValue()));
                    intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a906b7bb39eaf75d7ccc6e7aaa710c724">AddNeighbor</a>(neighbor);
                }
            }
        }
        <span class="keywordflow">if</span> ((interfaceType == <span class="stringliteral">&quot;PointToMultiPointInterface&quot;</span>) &amp;&amp; (nodeName == <span class="stringliteral">&quot;PointToMultiPointNeighborList&quot;</span>)) {
            cXMLElementList neighborList = (*ifElemIt)-&gt;getChildren();
            <span class="keywordflow">for</span> (cXMLElementList::iterator neighborIt = neighborList.begin(); neighborIt != neighborList.end(); neighborIt++) {
                std::string neighborNodeName = (*neighborIt)-&gt;getTagName();
                <span class="keywordflow">if</span> (neighborNodeName == <span class="stringliteral">&quot;PointToMultiPointNeighbor&quot;</span>) {
                    <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>* neighbor = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>;
                    neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#a4fa4de2681d4abe417553d7883869529">SetAddress</a>(<a class="code" href="_o_s_p_fcommon_8h.html#add192341579a523d6fa090e1f434630e">IPv4AddressFromAddressString</a>((*neighborIt)-&gt;getNodeValue()));
                    intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a906b7bb39eaf75d7ccc6e7aaa710c724">AddNeighbor</a>(neighbor);
                }
            }
        }

    }
    <span class="comment">// add the interface to it&#39;s Area</span>
    <a class="code" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a>* area = <a class="code" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614" title="Root object of the OSPF datastructure.">ospfRouter</a>-&gt;<a class="code" href="class_o_s_p_f_1_1_router.html#af1593be786d4bdd63bb6805d5bdefb50">GetArea</a>(areaID);
    <span class="keywordflow">if</span> (area != NULL) {
        area-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#af8d0698ec928feab6f61f1f48f800d93">AddInterface</a>(intf);
        intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a7efb487b2f5c22c8734c71535f05edb7">ProcessEvent</a>(<a class="code" href="class_o_s_p_f_1_1_interface.html#ae0aca9ab8ca338c25d9afa6e65fc8824a6a25beadf72c89b1677a33bad09e09f1">OSPF::Interface::InterfaceUp</a>); <span class="comment">// notification should come from the blackboard...</span>
    } <span class="keywordflow">else</span> {
        <span class="keyword">delete</span> intf;
        error(<span class="stringliteral">&quot;Loading %s ifIndex[%d] in Area %d aborted&quot;</span>, interfaceType.c_str(), ifIndex, areaID);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="adb2da70e8f941e2904279f3d176bf0b5"></a><!-- doxytag: member="OSPFRouting::LoadVirtualLink" ref="adb2da70e8f941e2904279f3d176bf0b5" args="(const cXMLElement &amp;virtualLinkConfig)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSPFRouting::LoadVirtualLink </td>
          <td>(</td>
          <td class="paramtype">const cXMLElement &amp;&#160;</td>
          <td class="paramname"><em>virtualLinkConfig</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads the configuration of an OSPf virtual link(virtual connection between two backbone routers). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualLinkConfig</td><td>[in] XML node describing the parameters of a virtual link. </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="class_o_s_p_f_routing.html#af1b821a07e9e6aa92b95d8b88c351675">LoadConfigFromXML()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>* intf     = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_interface.html">OSPF::Interface</a>;
    std::string      endPoint = virtualLinkConfig.getAttribute(<span class="stringliteral">&quot;endPointRouterID&quot;</span>);
    <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>*  neighbor = <span class="keyword">new</span> <a class="code" href="class_o_s_p_f_1_1_neighbor.html">OSPF::Neighbor</a>;

    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;        loading VirtualLink to &quot;</span> &lt;&lt; endPoint &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

    intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#adcd4b8414def2afd4eee3af284da430d">SetType</a>(<a class="code" href="class_o_s_p_f_1_1_interface.html#a558b3988a38b079460b57f092eacf4acaf27b340cd6ffc282630c03185294088b">OSPF::Interface::Virtual</a>);
    neighbor-&gt;<a class="code" href="class_o_s_p_f_1_1_neighbor.html#ad91998f47a8916d1000fec1c77befa9d">SetNeighborID</a>(<a class="code" href="_o_s_p_fcommon_8h.html#a4f2f8ba751b645157dacc7b6a57f4157">ULongFromAddressString</a>(endPoint.c_str()));
    intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a906b7bb39eaf75d7ccc6e7aaa710c724">AddNeighbor</a>(neighbor);

    cXMLElementList ifDetails = virtualLinkConfig.getChildren();
    <span class="keywordflow">for</span> (cXMLElementList::iterator ifElemIt = ifDetails.begin(); ifElemIt != ifDetails.end(); ifElemIt++) {
        std::string nodeName = (*ifElemIt)-&gt;getTagName();
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;TransitAreaID&quot;</span>) {
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#ad8a79f289516209fb374cdbe61447a0b">SetTransitAreaID</a>(<a class="code" href="_o_s_p_fcommon_8h.html#a4f2f8ba751b645157dacc7b6a57f4157">ULongFromAddressString</a>((*ifElemIt)-&gt;getNodeValue()));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;RetransmissionInterval&quot;</span>) {
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a21654ec08c047a82e4f9ada4253334e3">SetRetransmissionInterval</a>(atoi((*ifElemIt)-&gt;getNodeValue()));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;InterfaceTransmissionDelay&quot;</span>) {
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a5071ff810d8d1698334c3cedaecb95e2">SetTransmissionDelay</a>(atoi((*ifElemIt)-&gt;getNodeValue()));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;HelloInterval&quot;</span>) {
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a293d869360c0365c5975a84e585233aa">SetHelloInterval</a>(atoi((*ifElemIt)-&gt;getNodeValue()));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;RouterDeadInterval&quot;</span>) {
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a689a2f9ca652351f3404c25a8e2acd8f">SetRouterDeadInterval</a>(atoi((*ifElemIt)-&gt;getNodeValue()));
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;AuthenticationType&quot;</span>) {
            std::string authenticationType = (*ifElemIt)-&gt;getNodeValue();
            <span class="keywordflow">if</span> (authenticationType == <span class="stringliteral">&quot;SimplePasswordType&quot;</span>) {
                intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a35a3101643696ffe3576162b69bf2bc5">SetAuthenticationType</a>(<a class="code" href="namespace_o_s_p_f.html#a2e0cad18e6b80ee3a427a65a0b395aafa13c53535f35435755bfb2dcf2d709076">OSPF::SimplePasswordType</a>);
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (authenticationType == <span class="stringliteral">&quot;CrytographicType&quot;</span>) {
                intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a35a3101643696ffe3576162b69bf2bc5">SetAuthenticationType</a>(<a class="code" href="namespace_o_s_p_f.html#a2e0cad18e6b80ee3a427a65a0b395aafa2f33878554866e1aa7ef58a8df3d320e">OSPF::CrytographicType</a>);
            } <span class="keywordflow">else</span> {
                intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a35a3101643696ffe3576162b69bf2bc5">SetAuthenticationType</a>(<a class="code" href="namespace_o_s_p_f.html#a2e0cad18e6b80ee3a427a65a0b395aafaa912eb1946419ebf910b2b8322788ca9">OSPF::NullType</a>);
            }
        }
        <span class="keywordflow">if</span> (nodeName == <span class="stringliteral">&quot;AuthenticationKey&quot;</span>) {
            std::string key = (*ifElemIt)-&gt;getNodeValue();
            <a class="code" href="struct_o_s_p_f_1_1_authentication_key_type.html">OSPF::AuthenticationKeyType</a> keyValue;
            memset(keyValue.<a class="code" href="struct_o_s_p_f_1_1_authentication_key_type.html#a09102c74d106ef556c423ea0438aed4a">bytes</a>, 0, 8 * <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
            <span class="keywordtype">int</span> keyLength = key.length();
            <span class="keywordflow">if</span> ((keyLength &gt; 4) &amp;&amp; (keyLength &lt;= 18) &amp;&amp; (keyLength % 2 == 0) &amp;&amp; (key[0] == <span class="charliteral">&#39;0&#39;</span>) &amp;&amp; (key[1] == <span class="charliteral">&#39;x&#39;</span>)) {
                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = keyLength; (i &gt; 2); i -= 2) {
                    keyValue.<a class="code" href="struct_o_s_p_f_1_1_authentication_key_type.html#a09102c74d106ef556c423ea0438aed4a">bytes</a>[(i - 2) / 2] = <a class="code" href="_o_s_p_fcommon_8h.html#a889a6de7cccb5c78d5bf654ce2351f9f">HexPairToByte</a>(key[i - 1], key[i]);
                }
            }
            intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#a5b1fafec8e83e59b39e7ec17c162c9cb">SetAuthenticationKey</a>(keyValue);
        }
    }

    <span class="comment">// add the virtual link to the OSPF datastructure.</span>
    <a class="code" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a>* transitArea = <a class="code" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614" title="Root object of the OSPF datastructure.">ospfRouter</a>-&gt;<a class="code" href="class_o_s_p_f_1_1_router.html#af1593be786d4bdd63bb6805d5bdefb50">GetArea</a>(intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#ad5f88b646ecd75f2e99b64513a9ba454">GetAreaID</a>());
    <a class="code" href="class_o_s_p_f_1_1_area.html">OSPF::Area</a>* backbone    = <a class="code" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614" title="Root object of the OSPF datastructure.">ospfRouter</a>-&gt;<a class="code" href="class_o_s_p_f_1_1_router.html#af1593be786d4bdd63bb6805d5bdefb50">GetArea</a>(<a class="code" href="namespace_o_s_p_f.html#adb591659bd229b640cdc32ebaef95222">OSPF::BackboneAreaID</a>);

    <span class="keywordflow">if</span> ((backbone != NULL) &amp;&amp; (transitArea != NULL) &amp;&amp; (transitArea-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#aab71c3614910d8eacb48abd45ef8bff7">GetExternalRoutingCapability</a>())) {
        backbone-&gt;<a class="code" href="class_o_s_p_f_1_1_area.html#af8d0698ec928feab6f61f1f48f800d93">AddInterface</a>(intf);
    } <span class="keywordflow">else</span> {
        <span class="keyword">delete</span> intf;
        error(<span class="stringliteral">&quot;Loading VirtualLink to %s through Area %d aborted&quot;</span>, endPoint.c_str(), intf-&gt;<a class="code" href="class_o_s_p_f_1_1_interface.html#ad5f88b646ecd75f2e99b64513a9ba454">GetAreaID</a>());
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af7eb65eaa0b148353d7f4db823d68f4e"></a><!-- doxytag: member="OSPFRouting::numInitStages" ref="af7eb65eaa0b148353d7f4db823d68f4e" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int OSPFRouting::numInitStages </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> 5;}
</pre></div>
</div>
</div>
<a class="anchor" id="a8d385175d7fb3de98c2f0e1186386ecb"></a><!-- doxytag: member="OSPFRouting::ResolveInterfaceName" ref="a8d385175d7fb3de98c2f0e1186386ecb" args="(const std::string &amp;name) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OSPFRouting::ResolveInterfaceName </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Looks up the interface name in <a class="el" href="class_i_interface_table.html">IInterfaceTable</a>, and returns interfaceId a.k.a ifIndex. </p>

<p>Referenced by <a class="el" href="class_o_s_p_f_routing.html#a2f336ded44b9ee2443da70db19ff34f4">LoadExternalRoute()</a>, <a class="el" href="class_o_s_p_f_routing.html#aaaa7a0595a166970c8c6238b52dacfff">LoadHostRoute()</a>, and <a class="el" href="class_o_s_p_f_routing.html#a2f4d972b5e0953bdfa621f22a72b8113">LoadInterfaceParameters()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_interface_entry.html">InterfaceEntry</a>* ie = <a class="code" href="class_o_s_p_f_routing.html#ad4bdd62bb9e1cdeeb118e986db7faf02" title="Provides access to the interface table.">ift</a>-&gt;<a class="code" href="class_i_interface_table.html#a8ad86ee823d6200b4f558383b39af658">getInterfaceByName</a>(name.c_str());
    <span class="keywordflow">if</span> (!ie)
        opp_error(<span class="stringliteral">&quot;error reading XML config: IInterfaceTable contains no interface named &#39;%s&#39;&quot;</span>, name.c_str());
    <span class="keywordflow">return</span> ie-&gt;<a class="code" href="class_interface_entry.html#adc901fa42c37ce16b5c0785da81106ce">getInterfaceId</a>();
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ad4bdd62bb9e1cdeeb118e986db7faf02"></a><!-- doxytag: member="OSPFRouting::ift" ref="ad4bdd62bb9e1cdeeb118e986db7faf02" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_interface_table.html">IInterfaceTable</a>* <a class="el" href="class_o_s_p_f_routing.html#ad4bdd62bb9e1cdeeb118e986db7faf02">OSPFRouting::ift</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Provides access to the interface table. </p>

<p>Referenced by <a class="el" href="class_o_s_p_f_routing.html#a757ca2b86873671c421c65e092630f42">initialize()</a>, and <a class="el" href="class_o_s_p_f_routing.html#a8d385175d7fb3de98c2f0e1186386ecb">ResolveInterfaceName()</a>.</p>

</div>
</div>
<a class="anchor" id="a690ee8115e4d30c21e8adb5035ca5614"></a><!-- doxytag: member="OSPFRouting::ospfRouter" ref="a690ee8115e4d30c21e8adb5035ca5614" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_s_p_f_1_1_router.html">OSPF::Router</a>* <a class="el" href="class_o_s_p_f_routing.html#a690ee8115e4d30c21e8adb5035ca5614">OSPFRouting::ospfRouter</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Root object of the <a class="el" href="namespace_o_s_p_f.html">OSPF</a> datastructure. </p>

<p>Referenced by <a class="el" href="class_o_s_p_f_routing.html#acdf1e955f64a259cad0ac496e2c846a2">handleMessage()</a>, <a class="el" href="class_o_s_p_f_routing.html#a757ca2b86873671c421c65e092630f42">initialize()</a>, <a class="el" href="class_o_s_p_f_routing.html#a366e9d2f93bcb10efe24da101a6cf4a8">LoadAreaFromXML()</a>, <a class="el" href="class_o_s_p_f_routing.html#af1b821a07e9e6aa92b95d8b88c351675">LoadConfigFromXML()</a>, <a class="el" href="class_o_s_p_f_routing.html#a2f336ded44b9ee2443da70db19ff34f4">LoadExternalRoute()</a>, <a class="el" href="class_o_s_p_f_routing.html#aaaa7a0595a166970c8c6238b52dacfff">LoadHostRoute()</a>, <a class="el" href="class_o_s_p_f_routing.html#a2f4d972b5e0953bdfa621f22a72b8113">LoadInterfaceParameters()</a>, <a class="el" href="class_o_s_p_f_routing.html#adb2da70e8f941e2904279f3d176bf0b5">LoadVirtualLink()</a>, <a class="el" href="class_o_s_p_f_routing.html#a308ea62380bcd522116dda0d58800644">OSPFRouting()</a>, and <a class="el" href="class_o_s_p_f_routing.html#a457db930e04bfd5be7405113756727e9">~OSPFRouting()</a>.</p>

</div>
</div>
<a class="anchor" id="ad46d802ce8ea2ea455fa710e963f53c8"></a><!-- doxytag: member="OSPFRouting::rt" ref="ad46d802ce8ea2ea455fa710e963f53c8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_routing_table.html">IRoutingTable</a>* <a class="el" href="class_o_s_p_f_routing.html#ad46d802ce8ea2ea455fa710e963f53c8">OSPFRouting::rt</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Provides access to the <a class="el" href="class_i_p.html">IP</a> routing table. </p>

<p>Referenced by <a class="el" href="class_o_s_p_f_routing.html#a757ca2b86873671c421c65e092630f42">initialize()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_o_s_p_f_routing_8h.html">OSPFRouting.h</a></li>
<li><a class="el" href="_o_s_p_f_routing_8cc.html">OSPFRouting.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_o_s_p_f_routing.html">OSPFRouting</a>      </li>
      <li class="footer">Generated on Fri Nov 18 2011 12:47:14 for INET Framework for OMNeT++/OMNEST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
