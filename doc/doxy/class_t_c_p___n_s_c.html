<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>INET Framework for OMNeT++/OMNEST: TCP_NSC Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_t_c_p___n_s_c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">TCP_NSC Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="TCP_NSC" -->
<p>Encapsulates a Network Simulation Cradle (NSC) instance.  
 <a href="class_t_c_p___n_s_c.html#details">More...</a></p>

<p><code>#include &lt;TCP_NSC.h&gt;</code></p>

<p><a href="class_t_c_p___n_s_c-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#af1a26965ca43d53e704772628bc448de">TCP_NSC</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#ad00fed74358f52fc7e0f0f787d4ea19e">~TCP_NSC</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a4dd3cdf4c1144ddf096004b969b24652">send_callback</a> (const <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> *, int)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called from the stack when a packet needs to be output to the wire.  <a href="#a4dd3cdf4c1144ddf096004b969b24652"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#af20c41fdfde8337324ef6e155982c3ff">wakeup</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This is called when something interesting happened to a socket.  <a href="#af20c41fdfde8337324ef6e155982c3ff"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#aa78a2f126d46a8c89dff1638b422341e">gettime</a> (unsigned int *, unsigned int *)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#ad3ea3b2335440046cae00957f67706a8">testingS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a0ad6663badb72720c76ce73d43e419ca">logverboseS</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="class_t_c_p___n_s_c.html#a6b9c8876e659fb5478360e9ab0ed81c5ae63fb92c24dc0d5826c7166480992bc6">MAX_SEND_BYTES</a> =  500000
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; int, <br class="typebreak"/>
<a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a818bb7dd57b8c8cb52f65a39ade5d057">TcpAppConnMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="compatibility_8h.html#a0d5a2542b430beb8568bacccd2c657ae">u_int32_t</a>, <br class="typebreak"/>
<a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a200071546b87810ea111a855dd9f597f">Nsc2RemoteMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>, <br class="typebreak"/>
<a class="el" href="compatibility_8h.html#a0d5a2542b430beb8568bacccd2c657ae">u_int32_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#ab748255820ec167d7e20c122b754ff02">Remote2NscMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map<br class="typebreak"/>
&lt; <a class="el" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a>, <br class="typebreak"/>
int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a9c3fbac8d3af6a5df98a30cdd637b1af">SockPair2ConnIdMap</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a868350c3825eb859269f7e37242497b8">initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a90d66a5c32ae0c01b4846284c4c0fa84">handleMessage</a> (cMessage *msgP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a8605ce922fa1b467ab07cbefaf98a4c6">finish</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a6ee2d00754b122f1f5fb96de86706c99">changeAddresses</a> (<a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;connP, const <a class="el" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a> &amp;inetSockPairP, const <a class="el" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a> &amp;nscSockPairP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#afa11ee5b4b6ce245c42111758e52a082">findAppConn</a> (int connIdP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#ad3d96e09f4d4a10981b425987ba0cffc">findConnByInetSockPair</a> (<a class="el" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a> const &amp;sockPairP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a26d4edf1c960861b5747dd9109376d0c">findConnByNscSockPair</a> (<a class="el" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a> const &amp;sockPairP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a844a5315c6d446f11662860d65a105d0">updateDisplayString</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#aeb9f30c246d8f8938c7ae59b37a5a748">removeConnection</a> (int connIdP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a52646ca133abd280a08fd512b4f58285">printConnBrief</a> (<a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;connP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a075c5ce907fe0ed0ad33978faac8d130">loadStack</a> (const char *stacknameP, int bufferSizeP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a271ad2328a421bed7b485f5de7bc0b67">handleAppMessage</a> (cMessage *msgP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#ac6f917f4260a5caca56692640438b86f">handleIpInputMessage</a> (<a class="el" href="class_t_c_p_segment.html">TCPSegment</a> *tcpsegP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#ab95f395174d072737b9f1a3e978fba51">sendToIP</a> (const <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> *dataP, int lenP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#aa2031b4ac770f7491193d9c2200248fa">processAppCommand</a> (<a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;connP, cMessage *msgP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#adf0a1b7347ed79f572fbdb1efb4f95af">process_OPEN_ACTIVE</a> (<a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;connP, <a class="el" href="class_t_c_p_command.html">TCPCommand</a> *tcpCommandP, cMessage *msgP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#adb36ad0b7ab3bbcf962002e097fad318">process_OPEN_PASSIVE</a> (<a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;connP, <a class="el" href="class_t_c_p_command.html">TCPCommand</a> *tcpCommandP, cMessage *msgP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#aa1425441fd6c4c7707df27ed5b854286">process_SEND</a> (<a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;connP, <a class="el" href="class_t_c_p_command.html">TCPCommand</a> *tcpCommandP, cPacket *msgP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a0678225786e01923db1055f865e3edbb">process_CLOSE</a> (<a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;connP, <a class="el" href="class_t_c_p_command.html">TCPCommand</a> *tcpCommandP, cMessage *msgP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a170b19a246e3a73811f5fe229d0195e8">process_ABORT</a> (<a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;connP, <a class="el" href="class_t_c_p_command.html">TCPCommand</a> *tcpCommandP, cMessage *msgP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#af5abf875e10ca43caaaf0bd1a4480b03">process_STATUS</a> (<a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;connP, <a class="el" href="class_t_c_p_command.html">TCPCommand</a> *tcpCommandP, cMessage *msgP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#abe09011e6247d0ab53280b6aff77250f">do_SEND</a> (<a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;connP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#aed2e61f639fca0e833762942ca63a3ce">do_SEND_all</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="compatibility_8h.html#a0d5a2542b430beb8568bacccd2c657ae">u_int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a8f8a91b146256165e3b45b4e53d2b3e5">mapRemote2Nsc</a> (<a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> const &amp;addrP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a47c71c428192ab653849d17a4827b484">mapNsc2Remote</a> (<a class="el" href="compatibility_8h.html#a0d5a2542b430beb8568bacccd2c657ae">u_int32_t</a> nscAddrP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a06436f74df85c1160d13f5b1651d12d9">sendEstablishedMsg</a> (<a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;connP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_t_c_p___n_s_c___send_queue.html">TCP_NSC_SendQueue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a373300c63546728345116867296fd758">createSendQueue</a> (<a class="el" href="_t_c_p_command__m_8h.html#a1468a184833e6ea9e84227a9f92071bb">TCPDataTransferMode</a> transferModeP)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">To be called from <a class="el" href="class_t_c_p_connection.html" title="Manages a TCP connection.">TCPConnection</a>: create a new send queue.  <a href="#a373300c63546728345116867296fd758"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_t_c_p___n_s_c___receive_queue.html">TCP_NSC_ReceiveQueue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a7e5578e9c6aaab262b92a40520e53dca">createReceiveQueue</a> (<a class="el" href="_t_c_p_command__m_8h.html#a1468a184833e6ea9e84227a9f92071bb">TCPDataTransferMode</a> transferModeP)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">To be called from <a class="el" href="class_t_c_p_connection.html" title="Manages a TCP connection.">TCPConnection</a>: create a new receive queue.  <a href="#a7e5578e9c6aaab262b92a40520e53dca"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_c_p___n_s_c.html#a818bb7dd57b8c8cb52f65a39ade5d057">TcpAppConnMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_c_p___n_s_c.html#a9c3fbac8d3af6a5df98a30cdd637b1af">SockPair2ConnIdMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a425e408bf7fe9eafe8d370e2bed0cf88">inetSockPair2ConnIdMapM</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_c_p___n_s_c.html#a9c3fbac8d3af6a5df98a30cdd637b1af">SockPair2ConnIdMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#ad134121b61617fe01773b9af60e4e938">nscSockPair2ConnIdMapM</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_c_p___n_s_c.html#a200071546b87810ea111a855dd9f597f">Nsc2RemoteMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a1a311ff9e5890714bd2f84bbecba77a4">nsc2RemoteMapM</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_c_p___n_s_c.html#ab748255820ec167d7e20c122b754ff02">Remote2NscMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a909bba5b898f3867804e416f39887740">remote2NscMapM</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">INetStack *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a76b137c08eab91b49e56c10364f2ad6f">pNsiTimerM</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#ab8bf66c8a1408c190b1a2e6d17aec46f">isAliveM</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a32861d3a430e27281b1fa1d74d215112">curAddrCounterM</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a3316276b80b6e4d1bfb3290953236a0f">curConnM</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a874db0904059d4d3aa29147215a7bd95">sndNxtVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a76d7065c2a3fe57a9c6fb37efe468701">sndAckVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#acd545a2965dabd007d5333131cb06fac">rcvSeqVector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#aae389b5b6f57b44bd1ddb27d9eb3a2da">rcvAckVector</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a34ac95996f26d95fefc8550ca776b0cc">localInnerIpS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#ad7ff84862db0bf2b85a728b5c445d954">localInnerGwS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#aeddf42ccdbcea0563662d27c251d14a5">localInnerMaskS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a154ce08a411bc499387f3d7df6108090">remoteFirstInnerIpS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#af88cbc0f5ea50eb395fc7dfbaaf12080">stackNameParamNameS</a> = &quot;stackName&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p___n_s_c.html#a92b38e62db4d3cf85d6e25598685c46f">bufferSizeParamNameS</a> = &quot;stackBufferSize&quot;</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Encapsulates a Network Simulation Cradle (NSC) instance. </p>
</div><hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a200071546b87810ea111a855dd9f597f"></a><!-- doxytag: member="TCP_NSC::Nsc2RemoteMap" ref="a200071546b87810ea111a855dd9f597f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="compatibility_8h.html#a0d5a2542b430beb8568bacccd2c657ae">u_int32_t</a>, <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>&gt; <a class="el" href="class_t_c_p___n_s_c.html#a200071546b87810ea111a855dd9f597f">TCP_NSC::Nsc2RemoteMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab748255820ec167d7e20c122b754ff02"></a><!-- doxytag: member="TCP_NSC::Remote2NscMap" ref="ab748255820ec167d7e20c122b754ff02" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="class_i_pv_x_address.html">IPvXAddress</a>, <a class="el" href="compatibility_8h.html#a0d5a2542b430beb8568bacccd2c657ae">u_int32_t</a>&gt; <a class="el" href="class_t_c_p___n_s_c.html#ab748255820ec167d7e20c122b754ff02">TCP_NSC::Remote2NscMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9c3fbac8d3af6a5df98a30cdd637b1af"></a><!-- doxytag: member="TCP_NSC::SockPair2ConnIdMap" ref="a9c3fbac8d3af6a5df98a30cdd637b1af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a>, int&gt; <a class="el" href="class_t_c_p___n_s_c.html#a9c3fbac8d3af6a5df98a30cdd637b1af">TCP_NSC::SockPair2ConnIdMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a818bb7dd57b8c8cb52f65a39ade5d057"></a><!-- doxytag: member="TCP_NSC::TcpAppConnMap" ref="a818bb7dd57b8c8cb52f65a39ade5d057" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;int,<a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a>&gt; <a class="el" href="class_t_c_p___n_s_c.html#a818bb7dd57b8c8cb52f65a39ade5d057">TCP_NSC::TcpAppConnMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a6b9c8876e659fb5478360e9ab0ed81c5"></a><!-- doxytag: member="TCP_NSC::@129" ref="a6b9c8876e659fb5478360e9ab0ed81c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a6b9c8876e659fb5478360e9ab0ed81c5ae63fb92c24dc0d5826c7166480992bc6"></a><!-- doxytag: member="MAX_SEND_BYTES" ref="a6b9c8876e659fb5478360e9ab0ed81c5ae63fb92c24dc0d5826c7166480992bc6" args="" -->MAX_SEND_BYTES</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>
<div class="fragment"><pre class="fragment">{<a class="code" href="class_t_c_p___n_s_c.html#a6b9c8876e659fb5478360e9ab0ed81c5ae63fb92c24dc0d5826c7166480992bc6">MAX_SEND_BYTES</a> = 500000};
</pre></div>
</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af1a26965ca43d53e704772628bc448de"></a><!-- doxytag: member="TCP_NSC::TCP_NSC" ref="af1a26965ca43d53e704772628bc448de" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p___n_s_c.html#af1a26965ca43d53e704772628bc448de">TCP_NSC::TCP_NSC</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">  : <a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a>(<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),
    <a class="code" href="class_t_c_p___n_s_c.html#a76b137c08eab91b49e56c10364f2ad6f">pNsiTimerM</a>(<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),
    <a class="code" href="class_t_c_p___n_s_c.html#ab8bf66c8a1408c190b1a2e6d17aec46f">isAliveM</a>(<span class="keyword">false</span>),
    <a class="code" href="class_t_c_p___n_s_c.html#a32861d3a430e27281b1fa1d74d215112">curAddrCounterM</a>(0),
    <a class="code" href="class_t_c_p___n_s_c.html#a3316276b80b6e4d1bfb3290953236a0f">curConnM</a>(<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),

    <span class="comment">// statistics:</span>
    <a class="code" href="class_t_c_p___n_s_c.html#a874db0904059d4d3aa29147215a7bd95">sndNxtVector</a>(<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),
    <a class="code" href="class_t_c_p___n_s_c.html#a76d7065c2a3fe57a9c6fb37efe468701">sndAckVector</a>(<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),
    <a class="code" href="class_t_c_p___n_s_c.html#acd545a2965dabd007d5333131cb06fac">rcvSeqVector</a>(<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),
    <a class="code" href="class_t_c_p___n_s_c.html#aae389b5b6f57b44bd1ddb27d9eb3a2da">rcvAckVector</a>(<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
{
    <span class="comment">// statistics:</span>
    <span class="keywordflow">if</span> (<span class="keyword">true</span>) <span class="comment">// (getTcpMain()-&gt;recordStatistics)</span>
    {
        <a class="code" href="class_t_c_p___n_s_c.html#a874db0904059d4d3aa29147215a7bd95">sndNxtVector</a> = <span class="keyword">new</span> cOutVector(<span class="stringliteral">&quot;sent seq&quot;</span>);
        <a class="code" href="class_t_c_p___n_s_c.html#a76d7065c2a3fe57a9c6fb37efe468701">sndAckVector</a> = <span class="keyword">new</span> cOutVector(<span class="stringliteral">&quot;sent ack&quot;</span>);
        <a class="code" href="class_t_c_p___n_s_c.html#acd545a2965dabd007d5333131cb06fac">rcvSeqVector</a> = <span class="keyword">new</span> cOutVector(<span class="stringliteral">&quot;rcvd seq&quot;</span>);
        <a class="code" href="class_t_c_p___n_s_c.html#aae389b5b6f57b44bd1ddb27d9eb3a2da">rcvAckVector</a> = <span class="keyword">new</span> cOutVector(<span class="stringliteral">&quot;rcvd ack&quot;</span>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad00fed74358f52fc7e0f0f787d4ea19e"></a><!-- doxytag: member="TCP_NSC::~TCP_NSC" ref="ad00fed74358f52fc7e0f0f787d4ea19e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p___n_s_c.html#ad00fed74358f52fc7e0f0f787d4ea19e">TCP_NSC::~TCP_NSC</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: destructor\n&quot;</span>;
    <a class="code" href="class_t_c_p___n_s_c.html#ab8bf66c8a1408c190b1a2e6d17aec46f">isAliveM</a> = <span class="keyword">false</span>;

    <span class="keywordflow">while</span> (!<a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>.empty())
    {
        TcpAppConnMap::iterator i = <a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>.begin();
        <span class="keyword">delete</span> (*i).second.pNscSocketM;
        <a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>.erase(i);
    }

    <span class="comment">// statistics</span>
    <span class="keyword">delete</span> <a class="code" href="class_t_c_p___n_s_c.html#a874db0904059d4d3aa29147215a7bd95">sndNxtVector</a>;
    <span class="keyword">delete</span> <a class="code" href="class_t_c_p___n_s_c.html#a76d7065c2a3fe57a9c6fb37efe468701">sndAckVector</a>;
    <span class="keyword">delete</span> <a class="code" href="class_t_c_p___n_s_c.html#acd545a2965dabd007d5333131cb06fac">rcvSeqVector</a>;
    <span class="keyword">delete</span> <a class="code" href="class_t_c_p___n_s_c.html#aae389b5b6f57b44bd1ddb27d9eb3a2da">rcvAckVector</a>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a6ee2d00754b122f1f5fb96de86706c99"></a><!-- doxytag: member="TCP_NSC::changeAddresses" ref="a6ee2d00754b122f1f5fb96de86706c99" args="(TCP_NSC_Connection &amp;connP, const TCP_NSC_Connection::SockPair &amp;inetSockPairP, const TCP_NSC_Connection::SockPair &amp;nscSockPairP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#a6ee2d00754b122f1f5fb96de86706c99">TCP_NSC::changeAddresses</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;&#160;</td>
          <td class="paramname"><em>connP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a> &amp;&#160;</td>
          <td class="paramname"><em>inetSockPairP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a> &amp;&#160;</td>
          <td class="paramname"><em>nscSockPairP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#ac6f917f4260a5caca56692640438b86f">handleIpInputMessage()</a>, <a class="el" href="class_t_c_p___n_s_c.html#adf0a1b7347ed79f572fbdb1efb4f95af">process_OPEN_ACTIVE()</a>, <a class="el" href="class_t_c_p___n_s_c.html#adb36ad0b7ab3bbcf962002e097fad318">process_OPEN_PASSIVE()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#ab95f395174d072737b9f1a3e978fba51">sendToIP()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!(connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a> == inetSockPairP))
    {
        <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="stringliteral">&quot;conn:&quot;</span> &lt;&lt; connP &lt;&lt; <span class="stringliteral">&quot; change inetMap from &quot;</span> &lt;&lt; connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a> &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; inetSockPairP &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
        <a class="code" href="class_t_c_p___n_s_c.html#a425e408bf7fe9eafe8d370e2bed0cf88">inetSockPair2ConnIdMapM</a>.erase(connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>);
        connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a> = inetSockPairP;
        <a class="code" href="class_t_c_p___n_s_c.html#a425e408bf7fe9eafe8d370e2bed0cf88">inetSockPair2ConnIdMapM</a>[connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>] = connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a670d06fc927e6c8f52914d3ff03faeb0">connIdM</a>;
    }

    <span class="keywordflow">if</span> (!(connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a168e410d849b0f3f31c1a4a52eba5757">nscSockPairM</a> == nscSockPairP))
    {
        <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="stringliteral">&quot;conn:&quot;</span> &lt;&lt; connP &lt;&lt; <span class="stringliteral">&quot; change nscMap from &quot;</span> &lt;&lt; connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a168e410d849b0f3f31c1a4a52eba5757">nscSockPairM</a> &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; nscSockPairP &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
        <span class="comment">// remove old from map:</span>
        <a class="code" href="class_t_c_p___n_s_c.html#ad134121b61617fe01773b9af60e4e938">nscSockPair2ConnIdMapM</a>.erase(connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a168e410d849b0f3f31c1a4a52eba5757">nscSockPairM</a>);
        <span class="comment">// change addresses:</span>
        connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a168e410d849b0f3f31c1a4a52eba5757">nscSockPairM</a> = nscSockPairP;
        <span class="comment">// and add to map:</span>
        <a class="code" href="class_t_c_p___n_s_c.html#ad134121b61617fe01773b9af60e4e938">nscSockPair2ConnIdMapM</a>[connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a168e410d849b0f3f31c1a4a52eba5757">nscSockPairM</a>] = connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a670d06fc927e6c8f52914d3ff03faeb0">connIdM</a>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7e5578e9c6aaab262b92a40520e53dca"></a><!-- doxytag: member="TCP_NSC::createReceiveQueue" ref="a7e5578e9c6aaab262b92a40520e53dca" args="(TCPDataTransferMode transferModeP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p___n_s_c___receive_queue.html">TCP_NSC_ReceiveQueue</a> * <a class="el" href="class_t_c_p___n_s_c.html#a7e5578e9c6aaab262b92a40520e53dca">TCP_NSC::createReceiveQueue</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_c_p_command__m_8h.html#a1468a184833e6ea9e84227a9f92071bb">TCPDataTransferMode</a>&#160;</td>
          <td class="paramname"><em>transferModeP</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>To be called from <a class="el" href="class_t_c_p_connection.html" title="Manages a TCP connection.">TCPConnection</a>: create a new receive queue. </p>

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a271ad2328a421bed7b485f5de7bc0b67">handleAppMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">switch</span> (transferModeP)
    {
        <span class="keywordflow">case</span> <a class="code" href="_t_c_p_command__m_8h.html#a1468a184833e6ea9e84227a9f92071bba633f00617644924f98c1256cab5c4f29">TCP_TRANSFER_BYTECOUNT</a>:   <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_t_c_p___n_s_c___virtual_data_receive_queue.html" title="Send/Receive queue that manages &quot;virtual bytes&quot;, that is, byte counts only.">TCP_NSC_VirtualDataReceiveQueue</a>();
        <span class="keywordflow">case</span> <a class="code" href="_t_c_p_command__m_8h.html#a1468a184833e6ea9e84227a9f92071bbae7a09dc23e68bcda984a2a3f6ad2ad6d">TCP_TRANSFER_BYTESTREAM</a>:  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_t_c_p___n_s_c___byte_stream_receive_queue.html" title="Receive queue that manages actual bytes.">TCP_NSC_ByteStreamReceiveQueue</a>();
        <span class="keywordflow">case</span> <a class="code" href="_t_c_p_command__m_8h.html#a1468a184833e6ea9e84227a9f92071bba26ac7a560e0eb011625a0d47dbda33e5">TCP_TRANSFER_OBJECT</a>:      <span class="comment">//return new TCP_NSC_MsgBasedReceiveQueue();</span>
        <span class="keywordflow">default</span>: <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Invalid TCP data transfer mode: %d at %s&quot;</span>, transferModeP, this-&gt;getFullPath().c_str());
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a373300c63546728345116867296fd758"></a><!-- doxytag: member="TCP_NSC::createSendQueue" ref="a373300c63546728345116867296fd758" args="(TCPDataTransferMode transferModeP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p___n_s_c___send_queue.html">TCP_NSC_SendQueue</a> * <a class="el" href="class_t_c_p___n_s_c.html#a373300c63546728345116867296fd758">TCP_NSC::createSendQueue</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_c_p_command__m_8h.html#a1468a184833e6ea9e84227a9f92071bb">TCPDataTransferMode</a>&#160;</td>
          <td class="paramname"><em>transferModeP</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>To be called from <a class="el" href="class_t_c_p_connection.html" title="Manages a TCP connection.">TCPConnection</a>: create a new send queue. </p>

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a271ad2328a421bed7b485f5de7bc0b67">handleAppMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">switch</span> (transferModeP)
    {
        <span class="keywordflow">case</span> <a class="code" href="_t_c_p_command__m_8h.html#a1468a184833e6ea9e84227a9f92071bba633f00617644924f98c1256cab5c4f29">TCP_TRANSFER_BYTECOUNT</a>:   <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_t_c_p___n_s_c___virtual_data_send_queue.html" title="Send queue that manages &quot;virtual bytes&quot;, that is, byte counts only.">TCP_NSC_VirtualDataSendQueue</a>();
        <span class="keywordflow">case</span> <a class="code" href="_t_c_p_command__m_8h.html#a1468a184833e6ea9e84227a9f92071bbae7a09dc23e68bcda984a2a3f6ad2ad6d">TCP_TRANSFER_BYTESTREAM</a>:  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_t_c_p___n_s_c___byte_stream_send_queue.html" title="Send queue that manages actual bytes.">TCP_NSC_ByteStreamSendQueue</a>();
        <span class="keywordflow">case</span> <a class="code" href="_t_c_p_command__m_8h.html#a1468a184833e6ea9e84227a9f92071bba26ac7a560e0eb011625a0d47dbda33e5">TCP_TRANSFER_OBJECT</a>:      <span class="comment">//return new TCP_NSC_MsgBasedSendQueue();</span>
        <span class="keywordflow">default</span>: <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Invalid TCP data transfer mode: %d at %s&quot;</span>, transferModeP, this-&gt;getFullPath().c_str());
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="abe09011e6247d0ab53280b6aff77250f"></a><!-- doxytag: member="TCP_NSC::do_SEND" ref="abe09011e6247d0ab53280b6aff77250f" args="(TCP_NSC_Connection &amp;connP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#abe09011e6247d0ab53280b6aff77250f">TCP_NSC::do_SEND</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;&#160;</td>
          <td class="paramname"><em>connP</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aed2e61f639fca0e833762942ca63a3ce"></a><!-- doxytag: member="TCP_NSC::do_SEND_all" ref="aed2e61f639fca0e833762942ca63a3ce" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#aed2e61f639fca0e833762942ca63a3ce">TCP_NSC::do_SEND_all</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a90d66a5c32ae0c01b4846284c4c0fa84">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span> (TcpAppConnMap::iterator j = <a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>.begin(); j != <a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>.end(); ++j)
    {
        <a class="code" href="class_t_c_p___n_s_c___connection.html" title="Encapsulates a Network Simulation Cradle (NSC) instance.">TCP_NSC_Connection</a>&amp; conn = j-&gt;second;
        conn.<a class="code" href="class_t_c_p___n_s_c___connection.html#a19e5fb213290da69e2de7f36347ff6a8">do_SEND</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="afa11ee5b4b6ce245c42111758e52a082"></a><!-- doxytag: member="TCP_NSC::findAppConn" ref="afa11ee5b4b6ce245c42111758e52a082" args="(int connIdP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> * <a class="el" href="class_t_c_p___n_s_c.html#afa11ee5b4b6ce245c42111758e52a082">TCP_NSC::findAppConn</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connIdP</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#ad3d96e09f4d4a10981b425987ba0cffc">findConnByInetSockPair()</a>, <a class="el" href="class_t_c_p___n_s_c.html#a26d4edf1c960861b5747dd9109376d0c">findConnByNscSockPair()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#a271ad2328a421bed7b485f5de7bc0b67">handleAppMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    TcpAppConnMap::iterator i = <a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>.find(connIdP);
    <span class="keywordflow">return</span> i == <a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>.end() ? <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : &amp;(i-&gt;second);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad3d96e09f4d4a10981b425987ba0cffc"></a><!-- doxytag: member="TCP_NSC::findConnByInetSockPair" ref="ad3d96e09f4d4a10981b425987ba0cffc" args="(TCP_NSC_Connection::SockPair const &amp;sockPairP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> * <a class="el" href="class_t_c_p___n_s_c.html#ad3d96e09f4d4a10981b425987ba0cffc">TCP_NSC::findConnByInetSockPair</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a> const &amp;&#160;</td>
          <td class="paramname"><em>sockPairP</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#ac6f917f4260a5caca56692640438b86f">handleIpInputMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    SockPair2ConnIdMap::iterator i = <a class="code" href="class_t_c_p___n_s_c.html#a425e408bf7fe9eafe8d370e2bed0cf88">inetSockPair2ConnIdMapM</a>.find(sockPairP);
    <span class="keywordflow">return</span> i == <a class="code" href="class_t_c_p___n_s_c.html#a425e408bf7fe9eafe8d370e2bed0cf88">inetSockPair2ConnIdMapM</a>.end() ? <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : <a class="code" href="class_t_c_p___n_s_c.html#afa11ee5b4b6ce245c42111758e52a082">findAppConn</a>(i-&gt;second);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a26d4edf1c960861b5747dd9109376d0c"></a><!-- doxytag: member="TCP_NSC::findConnByNscSockPair" ref="a26d4edf1c960861b5747dd9109376d0c" args="(TCP_NSC_Connection::SockPair const &amp;sockPairP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> * <a class="el" href="class_t_c_p___n_s_c.html#a26d4edf1c960861b5747dd9109376d0c">TCP_NSC::findConnByNscSockPair</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a> const &amp;&#160;</td>
          <td class="paramname"><em>sockPairP</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#ab95f395174d072737b9f1a3e978fba51">sendToIP()</a>.</p>
<div class="fragment"><pre class="fragment">{
    SockPair2ConnIdMap::iterator i = <a class="code" href="class_t_c_p___n_s_c.html#ad134121b61617fe01773b9af60e4e938">nscSockPair2ConnIdMapM</a>.find(sockPairP);
    <span class="keywordflow">return</span> i == <a class="code" href="class_t_c_p___n_s_c.html#ad134121b61617fe01773b9af60e4e938">nscSockPair2ConnIdMapM</a>.end() ? <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : <a class="code" href="class_t_c_p___n_s_c.html#afa11ee5b4b6ce245c42111758e52a082">findAppConn</a>(i-&gt;second);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8605ce922fa1b467ab07cbefaf98a4c6"></a><!-- doxytag: member="TCP_NSC::finish" ref="a8605ce922fa1b467ab07cbefaf98a4c6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#a8605ce922fa1b467ab07cbefaf98a4c6">TCP_NSC::finish</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_t_c_p___n_s_c.html#ab8bf66c8a1408c190b1a2e6d17aec46f">isAliveM</a> = <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa78a2f126d46a8c89dff1638b422341e"></a><!-- doxytag: member="TCP_NSC::gettime" ref="aa78a2f126d46a8c89dff1638b422341e" args="(unsigned int *, unsigned int *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#aa78a2f126d46a8c89dff1638b422341e">TCP_NSC::gettime</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>secP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>usecP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef USE_DOUBLE_SIMTIME</span>
<span class="preprocessor"></span>    <span class="keywordtype">double</span> t = simTime().dbl();
    *sec = (<span class="keywordtype">unsigned</span> int)(t);
    *usec = (<span class="keywordtype">unsigned</span> int)((t - *sec) * 1000000 + 0.5);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    simtime_t t = simTime();
    int64 raw = t.raw();
    int64 scale = t.getScale();
    int64 secs = raw / scale;
    int64 usecs = (raw - (secs * scale));

    <span class="comment">//usecs = usecs * 1000000 / scale;</span>
    <span class="keywordflow">if</span> (scale &gt; 1000000) <span class="comment">// scale always 10^n</span>
        usecs /= (scale / 1000000);
    <span class="keywordflow">else</span>
        usecs *= (1000000 / scale);

    *secP = secs;
    *usecP = usecs;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: gettime(&quot;</span> &lt;&lt; *secP &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; *usecP &lt;&lt; <span class="stringliteral">&quot;) called\n&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a271ad2328a421bed7b485f5de7bc0b67"></a><!-- doxytag: member="TCP_NSC::handleAppMessage" ref="a271ad2328a421bed7b485f5de7bc0b67" args="(cMessage *msgP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#a271ad2328a421bed7b485f5de7bc0b67">TCP_NSC::handleAppMessage</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msgP</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a90d66a5c32ae0c01b4846284c4c0fa84">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_t_c_p_command.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPCommand</a> *controlInfo = check_and_cast&lt;<a class="code" href="class_t_c_p_command.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPCommand</a> *&gt;(msgP-&gt;getControlInfo());
    <span class="keywordtype">int</span> connId = controlInfo-&gt;<a class="code" href="class_t_c_p_command.html#a8bd2f6a8d698df01266e6a598355287a">getConnId</a>();

    <a class="code" href="class_t_c_p___n_s_c___connection.html" title="Encapsulates a Network Simulation Cradle (NSC) instance.">TCP_NSC_Connection</a> *conn = <a class="code" href="class_t_c_p___n_s_c.html#afa11ee5b4b6ce245c42111758e52a082">findAppConn</a>(connId);

    <span class="keywordflow">if</span> (!conn)
    {
        <a class="code" href="class_t_c_p_open_command.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPOpenCommand</a> *openCmd = check_and_cast&lt;<a class="code" href="class_t_c_p_open_command.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPOpenCommand</a> *&gt;(controlInfo);

        <span class="comment">// add into appConnMap</span>
        conn = &amp;<a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>[connId];
        conn-&gt;connIdM = connId;
        conn-&gt;appGateIndexM = msgP-&gt;getArrivalGate()-&gt;getIndex();
        conn-&gt;pNscSocketM = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;  <span class="comment">// will be filled in within processAppCommand()</span>

        <a class="code" href="_t_c_p_command__m_8h.html#a1468a184833e6ea9e84227a9f92071bb" title="Enum generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPDataTransferMode</a> transferMode = (<a class="code" href="_t_c_p_command__m_8h.html#a1468a184833e6ea9e84227a9f92071bb" title="Enum generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPDataTransferMode</a>)(openCmd-&gt;<a class="code" href="class_t_c_p_open_command.html#a80ca03562636c5cf08675244ff7f6b95">getDataTransferMode</a>());
        <span class="comment">// create send queue</span>
        conn-&gt;sendQueueM = <a class="code" href="class_t_c_p___n_s_c.html#a373300c63546728345116867296fd758" title="To be called from TCPConnection: create a new send queue.">createSendQueue</a>(transferMode);
        conn-&gt;sendQueueM-&gt;setConnection(conn);

        <span class="comment">// create receive queue</span>
        conn-&gt;receiveQueueM = <a class="code" href="class_t_c_p___n_s_c.html#a7e5578e9c6aaab262b92a40520e53dca" title="To be called from TCPConnection: create a new receive queue.">createReceiveQueue</a>(transferMode);
        conn-&gt;receiveQueueM-&gt;setConnection(conn);

        <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: TCP connection created for &quot;</span> &lt;&lt; msgP &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
    }

    <a class="code" href="class_t_c_p___n_s_c.html#aa2031b4ac770f7491193d9c2200248fa">processAppCommand</a>(*conn, msgP);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac6f917f4260a5caca56692640438b86f"></a><!-- doxytag: member="TCP_NSC::handleIpInputMessage" ref="ac6f917f4260a5caca56692640438b86f" args="(TCPSegment *tcpsegP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#ac6f917f4260a5caca56692640438b86f">TCP_NSC::handleIpInputMessage</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p_segment.html">TCPSegment</a> *&#160;</td>
          <td class="paramname"><em>tcpsegP</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a90d66a5c32ae0c01b4846284c4c0fa84">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// get src/dest addresses</span>
    <a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a> nscSockPair, inetSockPair, inetSockPairAny;

    <span class="keywordflow">if</span> (dynamic_cast&lt;IPv4ControlInfo *&gt;(tcpsegP-&gt;getControlInfo())!=<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="class_i_pv4_control_info.html" title="Control information for sending/receiving packets over IPv4.">IPv4ControlInfo</a> *controlInfo = (<a class="code" href="class_i_pv4_control_info.html" title="Control information for sending/receiving packets over IPv4.">IPv4ControlInfo</a> *)tcpsegP-&gt;removeControlInfo();
        inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a> = controlInfo-&gt;<a class="code" href="class_i_pv4_control_info___base.html#aebb0c14b75707e7678b4871934b56ee7">getSrcAddr</a>();
        inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a> = controlInfo-&gt;<a class="code" href="class_i_pv4_control_info___base.html#ae4a58b74b688001db9cf58f39705102e">getDestAddr</a>();
        <span class="keyword">delete</span> controlInfo;
    }
    <span class="keywordflow">else</span>
    <span class="keywordflow">if</span> (dynamic_cast&lt;IPv6ControlInfo *&gt;(tcpsegP-&gt;getControlInfo())!=<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="class_i_pv6_control_info.html" title="Control information for sending/receiving packets over IPv6.">IPv6ControlInfo</a> *controlInfo = (<a class="code" href="class_i_pv6_control_info.html" title="Control information for sending/receiving packets over IPv6.">IPv6ControlInfo</a> *)tcpsegP-&gt;removeControlInfo();
        inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a> = controlInfo-&gt;<a class="code" href="class_i_pv6_control_info___base.html#a8980bdcd6051ae3fe071bf2c18a0215e">getSrcAddr</a>();
        inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a> = controlInfo-&gt;<a class="code" href="class_i_pv6_control_info___base.html#abd1d2c1cca62a40e351304d8584b4fd7">getDestAddr</a>();
        <span class="keyword">delete</span> controlInfo;

        {
            <span class="comment">// HACK: when IPv6, then correcting the TCPOPTION_MAXIMUM_SEGMENT_SIZE option</span>
            <span class="comment">//       with IP header size difference</span>
            <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> numOptions = tcpsegP-&gt;<a class="code" href="class_t_c_p_segment___base.html#a2db62f2752a3f6a99678227cc5fba74c">getOptionsArraySize</a>();
            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> i=0; i &lt; numOptions; i++)
            {
                <a class="code" href="class_t_c_p_option.html" title="Class generated from transport/tcp_common/TCPSegment.msg by opp_msgc.">TCPOption</a>&amp; option = tcpsegP-&gt;<a class="code" href="class_t_c_p_segment___base.html#a2358acbf0a5fdc1b7b27fd972087dca0">getOptions</a>(i);
                <span class="keywordflow">if</span> (option.<a class="code" href="class_t_c_p_option.html#a6238dc83030805e805f4bf1408ea07c9">getKind</a>() == <a class="code" href="_t_c_p_segment__m_8h.html#aad5daaa0da17557e7745d86d2bf140a0a2284ab19f96a9994ca8082801c427119">TCPOPTION_MAXIMUM_SEGMENT_SIZE</a>)
                {
                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value = option.<a class="code" href="class_t_c_p_option.html#a1875afa2640add4375c000c42b6d38d6">getValues</a>(0);
                    value -= <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structnsc__ipv6hdr.html">nsc_ipv6hdr</a>) - sizeof(struct <a class="code" href="structnsc__iphdr.html">nsc_iphdr</a>);
                    option.<a class="code" href="class_t_c_p_option.html#a779fe2c7b374c64b14527d24eea19996">setValues</a>(0, value);
                    <span class="comment">//tcpsegP-&gt;setOptions(i, option);</span>
                }
            }
        }
    }
    <span class="keywordflow">else</span>
    {
        error(<span class="stringliteral">&quot;(%s)%s arrived without control info&quot;</span>, tcpsegP-&gt;getClassName(), tcpsegP-&gt;getName());
    }

    <span class="comment">// statistics:</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_t_c_p___n_s_c.html#acd545a2965dabd007d5333131cb06fac">rcvSeqVector</a>)
        <a class="code" href="class_t_c_p___n_s_c.html#acd545a2965dabd007d5333131cb06fac">rcvSeqVector</a>-&gt;record(tcpsegP-&gt;<a class="code" href="class_t_c_p_segment___base.html#a0dafe41ef5a4306a4106fdb1e22b19e8">getSequenceNo</a>());

    <span class="keywordflow">if</span> (<a class="code" href="class_t_c_p___n_s_c.html#aae389b5b6f57b44bd1ddb27d9eb3a2da">rcvAckVector</a>)
        <a class="code" href="class_t_c_p___n_s_c.html#aae389b5b6f57b44bd1ddb27d9eb3a2da">rcvAckVector</a>-&gt;record(tcpsegP-&gt;<a class="code" href="class_t_c_p_segment___base.html#a853ab8ce8acfb5da053fa9ca24592ce8">getAckNo</a>());

    inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a> = tcpsegP-&gt;<a class="code" href="class_t_c_p_segment___base.html#aca825ab6ff9fc98f52315c36254a66be">getSrcPort</a>();
    inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a> = tcpsegP-&gt;<a class="code" href="class_t_c_p_segment___base.html#a9120715e275fdb4745fa15b300236d9a">getDestPort</a>();
    nscSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a> = tcpsegP-&gt;<a class="code" href="class_t_c_p_segment___base.html#aca825ab6ff9fc98f52315c36254a66be">getSrcPort</a>();
    nscSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a> = tcpsegP-&gt;<a class="code" href="class_t_c_p_segment___base.html#a9120715e275fdb4745fa15b300236d9a">getDestPort</a>();
    inetSockPairAny.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a> = inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>;

    <span class="comment">// process segment</span>
    <span class="keywordtype">size_t</span> ipHdrLen = <span class="keyword">sizeof</span>(<a class="code" href="structnsc__iphdr.html">nsc_iphdr</a>);
    <span class="keywordtype">size_t</span> <span class="keyword">const</span> maxBufferSize = 4096;
    <span class="keywordtype">char</span> *data = <span class="keyword">new</span> <span class="keywordtype">char</span>[maxBufferSize];
    memset(data, 0, maxBufferSize);
    uint32_t nscSrcAddr = <a class="code" href="class_t_c_p___n_s_c.html#a8f8a91b146256165e3b45b4e53d2b3e5">mapRemote2Nsc</a>(inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a>);
    nscSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a> = <a class="code" href="class_t_c_p___n_s_c.html#a34ac95996f26d95fefc8550ca776b0cc">localInnerIpS</a>;
    nscSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a>.<a class="code" href="class_i_pv_x_address.html#a3ec3ab99e8b3609966747bf3ebb80856" title="Set to an IPv4 address.">set</a>(<a class="code" href="class_i_pv4_address.html" title="IPv4 address.">IPv4Address</a>(nscSrcAddr));

    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: data arrived for interface of stack &quot;</span>
        &lt;&lt; <a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; <span class="stringliteral">&quot;src:&quot;</span>&lt;&lt; inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a> &lt;&lt;<span class="stringliteral">&quot;,dest:&quot;</span>&lt;&lt; inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a> &lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;

    <a class="code" href="structnsc__iphdr.html">nsc_iphdr</a> *ih = (<a class="code" href="structnsc__iphdr.html">nsc_iphdr</a> *)data;
    <a class="code" href="structtcphdr.html">tcphdr</a> *tcph = (<a class="code" href="structtcphdr.html">tcphdr</a> *)(data + ipHdrLen);
    <span class="comment">// set IP header:</span>
    ih-&gt;<a class="code" href="structnsc__iphdr.html#afbad93ddd9fb1dc9d9e667c95fde4df6">version</a> = 4;
    ih-&gt;<a class="code" href="structnsc__iphdr.html#a99423380206a962a6e6fb24040f19d5a">ihl</a> = ipHdrLen/4;
    ih-&gt;<a class="code" href="structnsc__iphdr.html#a492162dc0facb2961846add0898db7f1">tos</a> = 0;
    ih-&gt;<a class="code" href="structnsc__iphdr.html#a7d079db6571c711dc9dea0a4793df5ce">id</a> = <a class="code" href="aodv__uu__omnet_8h.html#a51799f5ebb4c7228ef7e95c247030f42">htons</a>(tcpsegP-&gt;<a class="code" href="class_t_c_p_segment___base.html#a0dafe41ef5a4306a4106fdb1e22b19e8">getSequenceNo</a>());
    ih-&gt;<a class="code" href="structnsc__iphdr.html#a34279bcbbe0735eed0b15ac956102042">frag_off</a> = <a class="code" href="aodv__uu__omnet_8h.html#a51799f5ebb4c7228ef7e95c247030f42">htons</a>(0x4000);   <span class="comment">// don&#39;t fragment, offset = 0;</span>
    ih-&gt;<a class="code" href="structnsc__iphdr.html#a91776f279d140d6316458d07b1c63489">ttl</a> = 64;
    ih-&gt;<a class="code" href="structnsc__iphdr.html#abbe449089d8268fe8e1c1d661dbc5712">protocol</a> = 6;       <span class="comment">// TCP</span>
    ih-&gt;<a class="code" href="structnsc__iphdr.html#a3b494ca51ed77efe377596fe68c810c7">check</a> = 0;
    ih-&gt;<a class="code" href="structnsc__iphdr.html#a05b0dc1351f22c47dcc398c1e996e790">saddr</a> = <a class="code" href="aodv__uu__omnet_8h.html#ae4027a6ad07f13aa12eab285a1b46019">htonl</a>(nscSrcAddr);
    ih-&gt;<a class="code" href="structnsc__iphdr.html#a00531e6e9a1ca5c0214f74b41fa2c2d3">daddr</a> = <a class="code" href="aodv__uu__omnet_8h.html#ae4027a6ad07f13aa12eab285a1b46019">htonl</a>(<a class="code" href="class_t_c_p___n_s_c.html#a34ac95996f26d95fefc8550ca776b0cc">localInnerIpS</a>.<a class="code" href="class_i_pv_x_address.html#a961b38a74371d8aa29d8e6906a071d64" title="Get IPv4 address.">get4</a>().<a class="code" href="class_i_pv4_address.html#ac4abdd5df9c86071f13af7a3f0931237" title="Returns the address as an int.">getInt</a>());

    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: modified to: IP &quot;</span> &lt;&lt; ih-&gt;<a class="code" href="structnsc__iphdr.html#afbad93ddd9fb1dc9d9e667c95fde4df6">version</a> &lt;&lt; <span class="stringliteral">&quot; len &quot;</span> &lt;&lt; ih-&gt;<a class="code" href="structnsc__iphdr.html#a99423380206a962a6e6fb24040f19d5a">ihl</a>
          &lt;&lt; <span class="stringliteral">&quot; protocol &quot;</span> &lt;&lt; (<span class="keywordtype">unsigned</span> int)(ih-&gt;<a class="code" href="structnsc__iphdr.html#abbe449089d8268fe8e1c1d661dbc5712">protocol</a>)
          &lt;&lt; <span class="stringliteral">&quot; saddr &quot;</span> &lt;&lt; (ih-&gt;<a class="code" href="structnsc__iphdr.html#a05b0dc1351f22c47dcc398c1e996e790">saddr</a>)
          &lt;&lt; <span class="stringliteral">&quot; daddr &quot;</span> &lt;&lt; (ih-&gt;<a class="code" href="structnsc__iphdr.html#a00531e6e9a1ca5c0214f74b41fa2c2d3">daddr</a>)
          &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

    <span class="keywordtype">size_t</span> totalTcpLen = maxBufferSize - ipHdrLen;
    <a class="code" href="class_t_c_p___n_s_c___connection.html" title="Encapsulates a Network Simulation Cradle (NSC) instance.">TCP_NSC_Connection</a> *conn;
    conn = <a class="code" href="class_t_c_p___n_s_c.html#ad3d96e09f4d4a10981b425987ba0cffc">findConnByInetSockPair</a>(inetSockPair);

    <span class="keywordflow">if</span> (!conn)
        conn = <a class="code" href="class_t_c_p___n_s_c.html#ad3d96e09f4d4a10981b425987ba0cffc">findConnByInetSockPair</a>(inetSockPairAny);

    totalTcpLen = <a class="code" href="class_t_c_p_serializer.html" title="Converts between TCPSegment and binary (network byte order) TCP header.">TCPSerializer</a>().<a class="code" href="class_t_c_p_serializer.html#a72028a325c7858bfe5f563de21e7ad67" title="Serializes a TCPSegment for transmission on the wire.">serialize</a>(tcpsegP, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)tcph, totalTcpLen);

    <span class="keywordflow">if</span> (conn)
    {
        conn-&gt;<a class="code" href="class_t_c_p___n_s_c___connection.html#a803bc512956f8e807b48a893bc07f034">receiveQueueM</a>-&gt;<a class="code" href="class_t_c_p___n_s_c___receive_queue.html#aee990e6432a840ab8b7d435376a3dd42" title="Called when a TCP segment arrives.">notifyAboutIncomingSegmentProcessing</a>(tcpsegP);
    }

    <span class="comment">// calculate TCP checksum</span>
    tcph-&gt;th_sum = 0;
    tcph-&gt;th_sum = <a class="code" href="class_t_c_p_serializer.html" title="Converts between TCPSegment and binary (network byte order) TCP header.">TCPSerializer</a>().<a class="code" href="class_t_c_p_serializer.html#ac82cd691d5d3086914a27e6344ca8149" title="Calculate checksum with pseudo header.">checksum</a>(tcph, totalTcpLen, nscSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a>, nscSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a>);

    <span class="keywordtype">size_t</span> totalIpLen = ipHdrLen + totalTcpLen;
    ih-&gt;<a class="code" href="structnsc__iphdr.html#a641843176204969f3ffeca6662fb8962">tot_len</a> = <a class="code" href="aodv__uu__omnet_8h.html#a51799f5ebb4c7228ef7e95c247030f42">htons</a>(totalIpLen);
    ih-&gt;<a class="code" href="structnsc__iphdr.html#a3b494ca51ed77efe377596fe68c810c7">check</a> = 0;
    ih-&gt;<a class="code" href="structnsc__iphdr.html#a3b494ca51ed77efe377596fe68c810c7">check</a> = <a class="code" href="class_t_c_p_i_pchecksum.html#af66eba27e438ce5dc9dd1dc26f6c828f">TCPIPchecksum::checksum</a>(ih, ipHdrLen);

    <span class="comment">// receive msg from network</span>

    <a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a>-&gt;if_receive_packet(0, data, totalIpLen);

    <span class="comment">// Attempt to read from sockets</span>
    TcpAppConnMap::iterator j;
    <span class="keywordtype">int</span> changes = 0;

    <span class="keywordflow">for</span> (j = <a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>.begin(); j != <a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>.end(); ++j)
    {
        <a class="code" href="class_t_c_p___n_s_c___connection.html" title="Encapsulates a Network Simulation Cradle (NSC) instance.">TCP_NSC_Connection</a> &amp;c = j-&gt;second;

        <span class="keywordflow">if</span> (c.<a class="code" href="class_t_c_p___n_s_c___connection.html#abb71cce8838dc40d560aec01cf2958a5">pNscSocketM</a> &amp;&amp; c.<a class="code" href="class_t_c_p___n_s_c___connection.html#ad3b47d295adb84e1ab2624fc68d216d1">isListenerM</a>)
        {
            <span class="comment">// accepting socket</span>
            <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: NSC: attempting to accept:\n&quot;</span>;

            INetStreamSocket *sock = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
            <span class="keywordtype">int</span> err;

            err = c.<a class="code" href="class_t_c_p___n_s_c___connection.html#abb71cce8838dc40d560aec01cf2958a5">pNscSocketM</a>-&gt;accept( &amp;sock );

            <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: accept returned &quot;</span> &lt;&lt; err &lt;&lt; <span class="stringliteral">&quot; , sock is &quot;</span> &lt;&lt; sock
                &lt;&lt; <span class="stringliteral">&quot; socket&quot;</span> &lt;&lt; c.<a class="code" href="class_t_c_p___n_s_c___connection.html#abb71cce8838dc40d560aec01cf2958a5">pNscSocketM</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

            <span class="keywordflow">if</span> (sock)
            {
                ASSERT(changes == 0);
                ASSERT(c.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a> == inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a>);
                ++changes;

                <a class="code" href="class_t_c_p___n_s_c___connection.html" title="Encapsulates a Network Simulation Cradle (NSC) instance.">TCP_NSC_Connection</a> *conn;
                <span class="keywordtype">int</span> newConnId = ev.getUniqueNumber();
                <span class="comment">// add into appConnMap</span>
                conn = &amp;<a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>[newConnId];
                conn-&gt;<a class="code" href="class_t_c_p___n_s_c___connection.html#a670d06fc927e6c8f52914d3ff03faeb0">connIdM</a> = newConnId;
                conn-&gt;<a class="code" href="class_t_c_p___n_s_c___connection.html#a27727052f18528beea45ba97ac17dd56">appGateIndexM</a> = c.<a class="code" href="class_t_c_p___n_s_c___connection.html#a27727052f18528beea45ba97ac17dd56">appGateIndexM</a>;
                conn-&gt;<a class="code" href="class_t_c_p___n_s_c___connection.html#abb71cce8838dc40d560aec01cf2958a5">pNscSocketM</a> = sock;

                <span class="comment">// set sockPairs:</span>
                <a class="code" href="class_t_c_p___n_s_c.html#a6ee2d00754b122f1f5fb96de86706c99">changeAddresses</a>(*conn, inetSockPair, nscSockPair);

                <span class="comment">// following code to be kept consistent with initConnection()</span>
                <span class="keyword">const</span> <span class="keywordtype">char</span> *sendQueueClass = c.<a class="code" href="class_t_c_p___n_s_c___connection.html#a73855bad84018833df70d67a76bafac4">sendQueueM</a>-&gt;getClassName();
                conn-&gt;<a class="code" href="class_t_c_p___n_s_c___connection.html#a73855bad84018833df70d67a76bafac4">sendQueueM</a> = check_and_cast&lt;<a class="code" href="class_t_c_p___n_s_c___send_queue.html" title="Abstract base class for TCP_NSC send queues.">TCP_NSC_SendQueue</a> *&gt;(createOne(sendQueueClass));
                conn-&gt;<a class="code" href="class_t_c_p___n_s_c___connection.html#a73855bad84018833df70d67a76bafac4">sendQueueM</a>-&gt;<a class="code" href="class_t_c_p___n_s_c___send_queue.html#a3725b0016361e65cbe60d003f85bbf3c" title="set connection queue, and initialise queue variables.">setConnection</a>(conn);

                <span class="keyword">const</span> <span class="keywordtype">char</span> *receiveQueueClass = c.<a class="code" href="class_t_c_p___n_s_c___connection.html#a803bc512956f8e807b48a893bc07f034">receiveQueueM</a>-&gt;getClassName();
                conn-&gt;<a class="code" href="class_t_c_p___n_s_c___connection.html#a803bc512956f8e807b48a893bc07f034">receiveQueueM</a> = check_and_cast&lt;<a class="code" href="class_t_c_p___n_s_c___receive_queue.html">TCP_NSC_ReceiveQueue</a> *&gt;(createOne(receiveQueueClass));
                conn-&gt;<a class="code" href="class_t_c_p___n_s_c___connection.html#a803bc512956f8e807b48a893bc07f034">receiveQueueM</a>-&gt;<a class="code" href="class_t_c_p___n_s_c___receive_queue.html#a8626fba0d2e427126e27ee420ae034ef" title="Add a connection queue.">setConnection</a>(conn);
                <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: NSC: got accept!\n&quot;</span>;

                <a class="code" href="class_t_c_p___n_s_c.html#a06436f74df85c1160d13f5b1651d12d9">sendEstablishedMsg</a>(*conn);
            }
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c.<a class="code" href="class_t_c_p___n_s_c___connection.html#abb71cce8838dc40d560aec01cf2958a5">pNscSocketM</a> &amp;&amp; c.<a class="code" href="class_t_c_p___n_s_c___connection.html#abb71cce8838dc40d560aec01cf2958a5">pNscSocketM</a>-&gt;is_connected() ) <span class="comment">// not listener</span>
        {
            <span class="keywordtype">bool</span> hasData = <span class="keyword">false</span>;
            <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: NSC: attempting to read from socket &quot;</span> &lt;&lt; c.<a class="code" href="class_t_c_p___n_s_c___connection.html#abb71cce8838dc40d560aec01cf2958a5">pNscSocketM</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

            <span class="keywordflow">if</span> ((!c.<a class="code" href="class_t_c_p___n_s_c___connection.html#a15c353c571f24e4c02e8319aeb4851ed">sentEstablishedM</a>) &amp;&amp; c.<a class="code" href="class_t_c_p___n_s_c___connection.html#abb71cce8838dc40d560aec01cf2958a5">pNscSocketM</a>-&gt;is_connected())
            {
                ASSERT(changes == 0);
                hasData = <span class="keyword">true</span>;
                <a class="code" href="class_t_c_p___n_s_c.html#a6ee2d00754b122f1f5fb96de86706c99">changeAddresses</a>(c, inetSockPair, nscSockPair);
                <a class="code" href="class_t_c_p___n_s_c.html#a06436f74df85c1160d13f5b1651d12d9">sendEstablishedMsg</a>(c);
            }

            <span class="keywordflow">while</span> (<span class="keyword">true</span>)
            {
                <span class="keyword">static</span> <span class="keywordtype">char</span> buf[4096];

                <span class="keywordtype">int</span> buflen = <span class="keyword">sizeof</span>(buf);

                <span class="keywordtype">int</span> err = c.<a class="code" href="class_t_c_p___n_s_c___connection.html#abb71cce8838dc40d560aec01cf2958a5">pNscSocketM</a>-&gt;read_data(buf, &amp;buflen);

                <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: NSC: read: err &quot;</span> &lt;&lt; err &lt;&lt; <span class="stringliteral">&quot; , buflen &quot;</span> &lt;&lt; buflen &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

                <span class="keywordflow">if</span> (err == 0 &amp;&amp; buflen &gt; 0)
                {
                    ASSERT(changes == 0);
                    <span class="keywordflow">if</span> (!hasData)
                        <a class="code" href="class_t_c_p___n_s_c.html#a6ee2d00754b122f1f5fb96de86706c99">changeAddresses</a>(c, inetSockPair, nscSockPair);

                    hasData = <span class="keyword">true</span>;
                    c.<a class="code" href="class_t_c_p___n_s_c___connection.html#a803bc512956f8e807b48a893bc07f034">receiveQueueM</a>-&gt;<a class="code" href="class_t_c_p___n_s_c___receive_queue.html#a46f03c5e1726f2149404cca60e97bbac" title="The method called when data received from NSC The method should set status of the data in queue to re...">enqueueNscData</a>(buf, buflen);
<span class="comment">/*</span>
<span class="comment">                    struct sockaddr_in peerAddr,sockAddr;</span>
<span class="comment">                    size_t peerAddrLen=sizeof(peerAddr),sockAddrLen=sizeof(sockAddr);</span>
<span class="comment">                    c.pNscSocketM-&gt;getpeername((sockaddr*)&amp;peerAddr, &amp;peerAddrLen);</span>
<span class="comment">                    c.pNscSocketM-&gt;getsockname((sockaddr*)&amp;sockAddr, &amp;sockAddrLen);</span>
<span class="comment">*/</span>
                }
                <span class="keywordflow">else</span>
                    <span class="keywordflow">break</span>;
            }

            <span class="keywordflow">if</span> (hasData)
            {
                cPacket *dataMsg;

                <span class="keywordflow">while</span> (<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != (dataMsg = c.<a class="code" href="class_t_c_p___n_s_c___connection.html#a803bc512956f8e807b48a893bc07f034">receiveQueueM</a>-&gt;<a class="code" href="class_t_c_p___n_s_c___receive_queue.html#a20aeabe1c060d3d36a12ab5bb70fdf8c" title="Should create a packet to be passed up to the app, up to (but NOT including) the given sequence no (u...">extractBytesUpTo</a>()))
                {
                    <a class="code" href="class_t_c_p_connect_info.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPConnectInfo</a> *tcpConnectInfo = <span class="keyword">new</span> <a class="code" href="class_t_c_p_connect_info.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPConnectInfo</a>();
                    tcpConnectInfo-&gt;<a class="code" href="class_t_c_p_command.html#a4c843a0c691ac1bbbfc1307553131de3">setConnId</a>(c.<a class="code" href="class_t_c_p___n_s_c___connection.html#a670d06fc927e6c8f52914d3ff03faeb0">connIdM</a>);
                    tcpConnectInfo-&gt;<a class="code" href="class_t_c_p_connect_info.html#a88c615df6ba91e13c4dbd8e551b148fe">setLocalAddr</a>(c.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a>);
                    tcpConnectInfo-&gt;<a class="code" href="class_t_c_p_connect_info.html#a1cbcc49cfccade9bea7acbe7f4da0751">setRemoteAddr</a>(c.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a>);
                    tcpConnectInfo-&gt;<a class="code" href="class_t_c_p_connect_info.html#a0aebf300f8134eae08fee10bac3454f5">setLocalPort</a>(c.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a>);
                    tcpConnectInfo-&gt;<a class="code" href="class_t_c_p_connect_info.html#ac055daa817b6d40678a32208b22258c4">setRemotePort</a>(c.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a>);
                    dataMsg-&gt;setControlInfo(tcpConnectInfo);
                    <span class="comment">// send Msg to Application layer:</span>
                    send(dataMsg, <span class="stringliteral">&quot;appOut&quot;</span>, c.<a class="code" href="class_t_c_p___n_s_c___connection.html#a27727052f18528beea45ba97ac17dd56">appGateIndexM</a>);
                }

                ++changes;
                <a class="code" href="class_t_c_p___n_s_c.html#a6ee2d00754b122f1f5fb96de86706c99">changeAddresses</a>(c, inetSockPair, nscSockPair);
            }
        }
    }

    <span class="comment">/*</span>
<span class="comment">    ...</span>
<span class="comment">    NSC: process segment (data,len); should call removeConnection() if socket has</span>
<span class="comment">    closed and completely done</span>
<span class="comment"></span>
<span class="comment">    XXX: probably need to poll sockets to see if they are closed.</span>
<span class="comment">    ...</span>
<span class="comment">    */</span>

    <span class="keyword">delete</span> [] data;
    <span class="keyword">delete</span> tcpsegP;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a90d66a5c32ae0c01b4846284c4c0fa84"></a><!-- doxytag: member="TCP_NSC::handleMessage" ref="a90d66a5c32ae0c01b4846284c4c0fa84" args="(cMessage *msgP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#a90d66a5c32ae0c01b4846284c4c0fa84">TCP_NSC::handleMessage</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msgP</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (msgP-&gt;isSelfMessage())
    {
        <span class="comment">// timer expired</span>
        <span class="comment">/*</span>
<span class="comment">        ...</span>
<span class="comment">        NSC timer processing</span>
<span class="comment">        ...</span>
<span class="comment">           Timers are ordinary cMessage objects that are started by</span>
<span class="comment">           scheduleAt(simTime()+timeout, msg), and can be cancelled</span>
<span class="comment">           via cancelEvent(msg); when they expire (fire) they are delivered</span>
<span class="comment">           to the module via handleMessage(), i.e. they end up here.</span>
<span class="comment">        */</span>
        <span class="keywordflow">if</span> (msgP == <a class="code" href="class_t_c_p___n_s_c.html#a76b137c08eab91b49e56c10364f2ad6f">pNsiTimerM</a> )
        { <span class="comment">// nsc_nsi_timer</span>
            <a class="code" href="class_t_c_p___n_s_c.html#aed2e61f639fca0e833762942ca63a3ce">do_SEND_all</a>();

            <a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a>-&gt;increment_ticks();

            <a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a>-&gt;timer_interrupt();

            scheduleAt(msgP-&gt;getArrivalTime() + 1.0 / (double)<a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a>-&gt;get_hz(), msgP);
        }
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msgP-&gt;arrivedOn(<span class="stringliteral">&quot;ipIn&quot;</span>) || msgP-&gt;arrivedOn(<span class="stringliteral">&quot;ipv6In&quot;</span>))
    {
        <span class="keywordflow">if</span> (<span class="keyword">false</span>
#ifdef WITH_IPv4
                || dynamic_cast&lt;ICMPMessage *&gt;(msgP)
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="preprocessor">#ifdef WITH_IPv6</span>
<span class="preprocessor"></span>                || <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_i_c_m_pv6_message.html" title="Class generated from networklayer/icmpv6/ICMPv6Message.msg by opp_msgc.">ICMPv6Message</a> *<span class="keyword">&gt;</span>(msgP)
#endif
            )
        {
            <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="stringliteral">&quot;ICMP error received -- discarding\n&quot;</span>; <span class="comment">// FIXME can ICMP packets really make it up to TCP???</span>
            <span class="keyword">delete</span> msgP;
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: handle msg: &quot;</span> &lt;&lt; msgP-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
            <span class="comment">// must be a TCPSegment</span>
            <a class="code" href="class_t_c_p_segment.html" title="Represents a TCP segment.">TCPSegment</a> *tcpseg = check_and_cast&lt;<a class="code" href="class_t_c_p_segment.html" title="Represents a TCP segment.">TCPSegment</a> *&gt;(msgP);
            <a class="code" href="class_t_c_p___n_s_c.html#ac6f917f4260a5caca56692640438b86f">handleIpInputMessage</a>(tcpseg);
        }
    }
    <span class="keywordflow">else</span> <span class="comment">// must be from app</span>
    {
        <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: handle msg: &quot;</span> &lt;&lt; msgP-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
        <a class="code" href="class_t_c_p___n_s_c.html#a271ad2328a421bed7b485f5de7bc0b67">handleAppMessage</a>(msgP);
    }

    <span class="keywordflow">if</span> (ev.isGUI())
        <a class="code" href="class_t_c_p___n_s_c.html#a844a5315c6d446f11662860d65a105d0">updateDisplayString</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a868350c3825eb859269f7e37242497b8"></a><!-- doxytag: member="TCP_NSC::initialize" ref="a868350c3825eb859269f7e37242497b8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#a868350c3825eb859269f7e37242497b8">TCP_NSC::initialize</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: initialize\n&quot;</span>;

    <span class="keyword">const</span> <span class="keywordtype">char</span> *q;
    q = par(<span class="stringliteral">&quot;sendQueueClass&quot;</span>);

    <span class="keywordflow">if</span> (*q != <span class="charliteral">&#39;\0&#39;</span>)
        error(<span class="stringliteral">&quot;Don&#39;t use obsolete sendQueueClass = \&quot;%s\&quot; parameter&quot;</span>, q);

    q = par(<span class="stringliteral">&quot;receiveQueueClass&quot;</span>);

    <span class="keywordflow">if</span> (*q != <span class="charliteral">&#39;\0&#39;</span>)
        error(<span class="stringliteral">&quot;Don&#39;t use obsolete receiveQueueClass = \&quot;%s\&quot; parameter&quot;</span>, q);

    WATCH_MAP(<a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>);

    cModule *netw = simulation.getSystemModule();
    <a class="code" href="class_t_c_p___n_s_c.html#ad3ea3b2335440046cae00957f67706a8">testingS</a> = netw-&gt;hasPar(<span class="stringliteral">&quot;testing&quot;</span>) &amp;&amp; netw-&gt;par(<span class="stringliteral">&quot;testing&quot;</span>).boolValue();
    <a class="code" href="class_t_c_p___n_s_c.html#a0ad6663badb72720c76ce73d43e419ca">logverboseS</a> = !<a class="code" href="class_t_c_p___n_s_c.html#ad3ea3b2335440046cae00957f67706a8">testingS</a> &amp;&amp; netw-&gt;hasPar(<span class="stringliteral">&quot;logverbose&quot;</span>) &amp;&amp; netw-&gt;par(<span class="stringliteral">&quot;logverbose&quot;</span>).boolValue();

    <span class="keyword">const</span> <span class="keywordtype">char</span>* stackName = this-&gt;par(<a class="code" href="class_t_c_p___n_s_c.html#af88cbc0f5ea50eb395fc7dfbaaf12080">stackNameParamNameS</a>).stringValue();

    <span class="keywordtype">int</span> bufferSize = (int)(this-&gt;par(<a class="code" href="class_t_c_p___n_s_c.html#a92b38e62db4d3cf85d6e25598685c46f">bufferSizeParamNameS</a>).longValue());

    <a class="code" href="class_t_c_p___n_s_c.html#a075c5ce907fe0ed0ad33978faac8d130">loadStack</a>(stackName, bufferSize);
    <a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a>-&gt;if_attach(<a class="code" href="class_t_c_p___n_s_c.html#a34ac95996f26d95fefc8550ca776b0cc">localInnerIpS</a>.<a class="code" href="class_i_pv_x_address.html#a27e3ec9ec324d86c1874a03db4788a92" title="Returns the string representation of the address (e.g.">str</a>().c_str(), <a class="code" href="class_t_c_p___n_s_c.html#aeddf42ccdbcea0563662d27c251d14a5">localInnerMaskS</a>.<a class="code" href="class_i_pv_x_address.html#a27e3ec9ec324d86c1874a03db4788a92" title="Returns the string representation of the address (e.g.">str</a>().c_str(), 1500);
    <a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a>-&gt;add_default_gateway(<a class="code" href="class_t_c_p___n_s_c.html#ad7ff84862db0bf2b85a728b5c445d954">localInnerGwS</a>.<a class="code" href="class_i_pv_x_address.html#a27e3ec9ec324d86c1874a03db4788a92" title="Returns the string representation of the address (e.g.">str</a>().c_str());

    <a class="code" href="class_t_c_p___n_s_c.html#ab8bf66c8a1408c190b1a2e6d17aec46f">isAliveM</a> = <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a075c5ce907fe0ed0ad33978faac8d130"></a><!-- doxytag: member="TCP_NSC::loadStack" ref="a075c5ce907fe0ed0ad33978faac8d130" args="(const char *stacknameP, int bufferSizeP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#a075c5ce907fe0ed0ad33978faac8d130">TCP_NSC::loadStack</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>stacknameP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufferSizeP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a868350c3825eb859269f7e37242497b8">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">void</span> *handle = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    FCreateStack create = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: Loading stack &quot;</span> &lt;&lt; stacknameP &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

    handle = dlopen(stacknameP, RTLD_NOW);

    <span class="keywordflow">if</span> (!handle)
    {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;The loading of &#39;%s&#39; NSC stack is unsuccessful: %s. Check the LD_LIBRARY_PATH or stackname!&quot;</span>, stacknameP, dlerror());
    }

    create = (FCreateStack)dlsym(handle, <span class="stringliteral">&quot;nsc_create_stack&quot;</span>);

    <span class="keywordflow">if</span> (!create)
    {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;The &#39;%s&#39; NSC stack creation unsuccessful: %s&quot;</span>, stacknameP, dlerror());
    }

    <a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a> = create(<span class="keyword">this</span>, <span class="keyword">this</span>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);

    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="stringliteral">&quot;TCP_NSC &quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; has stack &quot;</span> &lt;&lt; <a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="stringliteral">&quot;TCP_NSC &quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;Initializing stack, name=&quot;</span> &lt;&lt; pStackM-&gt;get_name() &lt;&lt; endl;

    pStackM-&gt;init(pStackM-&gt;get_hz());

    pStackM-&gt;buffer_size(bufferSizeP);

    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="stringliteral">&quot;TCP_NSC &quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;Stack initialized, name=&quot;</span> &lt;&lt; pStackM-&gt;get_name() &lt;&lt; endl;

    <span class="comment">// set timer for 1.0 / pStackM-&gt;get_hz()</span>
    <a class="code" href="class_t_c_p___n_s_c.html#a76b137c08eab91b49e56c10364f2ad6f">pNsiTimerM</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;nsc_nsi_timer&quot;</span>);
    scheduleAt(1.0 / (<span class="keywordtype">double</span>)pStackM-&gt;get_hz(), <a class="code" href="class_t_c_p___n_s_c.html#a76b137c08eab91b49e56c10364f2ad6f">pNsiTimerM</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a47c71c428192ab653849d17a4827b484"></a><!-- doxytag: member="TCP_NSC::mapNsc2Remote" ref="a47c71c428192ab653849d17a4827b484" args="(u_int32_t nscAddrP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> const &amp; <a class="el" href="class_t_c_p___n_s_c.html#a47c71c428192ab653849d17a4827b484">TCP_NSC::mapNsc2Remote</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="compatibility_8h.html#a0d5a2542b430beb8568bacccd2c657ae">u_int32_t</a>&#160;</td>
          <td class="paramname"><em>nscAddrP</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#ab95f395174d072737b9f1a3e978fba51">sendToIP()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Nsc2RemoteMap::iterator i = <a class="code" href="class_t_c_p___n_s_c.html#a1a311ff9e5890714bd2f84bbecba77a4">nsc2RemoteMapM</a>.find(nscAddrP);

    <span class="keywordflow">if</span> (i != <a class="code" href="class_t_c_p___n_s_c.html#a1a311ff9e5890714bd2f84bbecba77a4">nsc2RemoteMapM</a>.end())
        <span class="keywordflow">return</span> i-&gt;second;

    ASSERT(0);
    exit(1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8f8a91b146256165e3b45b4e53d2b3e5"></a><!-- doxytag: member="TCP_NSC::mapRemote2Nsc" ref="a8f8a91b146256165e3b45b4e53d2b3e5" args="(IPvXAddress const &amp;addrP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="class_t_c_p___n_s_c.html#a8f8a91b146256165e3b45b4e53d2b3e5">TCP_NSC::mapRemote2Nsc</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> const &amp;&#160;</td>
          <td class="paramname"><em>addrP</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#ac6f917f4260a5caca56692640438b86f">handleIpInputMessage()</a>, <a class="el" href="class_t_c_p___n_s_c.html#adf0a1b7347ed79f572fbdb1efb4f95af">process_OPEN_ACTIVE()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#adb36ad0b7ab3bbcf962002e097fad318">process_OPEN_PASSIVE()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Remote2NscMap::iterator i = <a class="code" href="class_t_c_p___n_s_c.html#a909bba5b898f3867804e416f39887740">remote2NscMapM</a>.find(addrP);
    <span class="keywordflow">if</span> (i != <a class="code" href="class_t_c_p___n_s_c.html#a909bba5b898f3867804e416f39887740">remote2NscMapM</a>.end())
    {
        <span class="keywordflow">return</span> i-&gt;second;
    }

    <span class="comment">// get first free remote NSC IP</span>
    uint32_t ret = <a class="code" href="class_t_c_p___n_s_c.html#a154ce08a411bc499387f3d7df6108090">remoteFirstInnerIpS</a>.<a class="code" href="class_i_pv_x_address.html#a961b38a74371d8aa29d8e6906a071d64" title="Get IPv4 address.">get4</a>().<a class="code" href="class_i_pv4_address.html#ac4abdd5df9c86071f13af7a3f0931237" title="Returns the address as an int.">getInt</a>();
    Nsc2RemoteMap::iterator j;
    <span class="keywordflow">for</span> ( j = <a class="code" href="class_t_c_p___n_s_c.html#a1a311ff9e5890714bd2f84bbecba77a4">nsc2RemoteMapM</a>.begin(); j != <a class="code" href="class_t_c_p___n_s_c.html#a1a311ff9e5890714bd2f84bbecba77a4">nsc2RemoteMapM</a>.end(); j++)
    {
        <span class="keywordflow">if</span> (j-&gt;first &gt; ret)
            <span class="keywordflow">break</span>;
        ret = j-&gt;first + 1;
    }

    <span class="comment">// add new pair to maps</span>
    <a class="code" href="class_t_c_p___n_s_c.html#a909bba5b898f3867804e416f39887740">remote2NscMapM</a>[addrP] = ret;
    <a class="code" href="class_t_c_p___n_s_c.html#a1a311ff9e5890714bd2f84bbecba77a4">nsc2RemoteMapM</a>[ret] = addrP;
    ASSERT( <a class="code" href="class_t_c_p___n_s_c.html#a909bba5b898f3867804e416f39887740">remote2NscMapM</a>.find(addrP) != <a class="code" href="class_t_c_p___n_s_c.html#a909bba5b898f3867804e416f39887740">remote2NscMapM</a>.end() );
    ASSERT( <a class="code" href="class_t_c_p___n_s_c.html#a1a311ff9e5890714bd2f84bbecba77a4">nsc2RemoteMapM</a>.find(ret) != <a class="code" href="class_t_c_p___n_s_c.html#a1a311ff9e5890714bd2f84bbecba77a4">nsc2RemoteMapM</a>.end() );
    <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52646ca133abd280a08fd512b4f58285"></a><!-- doxytag: member="TCP_NSC::printConnBrief" ref="a52646ca133abd280a08fd512b4f58285" args="(TCP_NSC_Connection &amp;connP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#a52646ca133abd280a08fd512b4f58285">TCP_NSC::printConnBrief</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;&#160;</td>
          <td class="paramname"><em>connP</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#aa2031b4ac770f7491193d9c2200248fa">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: connId=&quot;</span> &lt;&lt; connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a670d06fc927e6c8f52914d3ff03faeb0">connIdM</a> &lt;&lt; <span class="stringliteral">&quot; appGateIndex=&quot;</span> &lt;&lt; connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a27727052f18528beea45ba97ac17dd56">appGateIndexM</a>;
    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="stringliteral">&quot; nscsocket=&quot;</span> &lt;&lt; connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#abb71cce8838dc40d560aec01cf2958a5">pNscSocketM</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a170b19a246e3a73811f5fe229d0195e8"></a><!-- doxytag: member="TCP_NSC::process_ABORT" ref="a170b19a246e3a73811f5fe229d0195e8" args="(TCP_NSC_Connection &amp;connP, TCPCommand *tcpCommandP, cMessage *msgP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#a170b19a246e3a73811f5fe229d0195e8">TCP_NSC::process_ABORT</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;&#160;</td>
          <td class="paramname"><em>connP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_c_p_command.html">TCPCommand</a> *&#160;</td>
          <td class="paramname"><em>tcpCommandP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msgP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#aa2031b4ac770f7491193d9c2200248fa">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: process_ABORT()\n&quot;</span>;

    <span class="keyword">delete</span> tcpCommandP;
    <span class="keyword">delete</span> msgP;

    connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a54bed71f5b9bafa1cfcea9a7c1c33ba1">abort</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0678225786e01923db1055f865e3edbb"></a><!-- doxytag: member="TCP_NSC::process_CLOSE" ref="a0678225786e01923db1055f865e3edbb" args="(TCP_NSC_Connection &amp;connP, TCPCommand *tcpCommandP, cMessage *msgP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#a0678225786e01923db1055f865e3edbb">TCP_NSC::process_CLOSE</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;&#160;</td>
          <td class="paramname"><em>connP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_c_p_command.html">TCPCommand</a> *&#160;</td>
          <td class="paramname"><em>tcpCommandP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msgP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#aa2031b4ac770f7491193d9c2200248fa">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: process_CLOSE()\n&quot;</span>;

    <span class="keyword">delete</span> tcpCommandP;
    <span class="keyword">delete</span> msgP;

    connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a0d673e78daf20c615a165083b85de391">close</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="adf0a1b7347ed79f572fbdb1efb4f95af"></a><!-- doxytag: member="TCP_NSC::process_OPEN_ACTIVE" ref="adf0a1b7347ed79f572fbdb1efb4f95af" args="(TCP_NSC_Connection &amp;connP, TCPCommand *tcpCommandP, cMessage *msgP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#adf0a1b7347ed79f572fbdb1efb4f95af">TCP_NSC::process_OPEN_ACTIVE</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;&#160;</td>
          <td class="paramname"><em>connP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_c_p_command.html">TCPCommand</a> *&#160;</td>
          <td class="paramname"><em>tcpCommandP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msgP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#aa2031b4ac770f7491193d9c2200248fa">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_t_c_p_open_command.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPOpenCommand</a> *openCmd = check_and_cast&lt;<a class="code" href="class_t_c_p_open_command.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPOpenCommand</a> *&gt;(tcpCommandP);

    <a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a> inetSockPair, nscSockPair;
    inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a> = openCmd-&gt;<a class="code" href="class_t_c_p_open_command.html#a8df2394c15fc7fb872491275d9db03b4">getLocalAddr</a>();
    inetSockPair.remoteM.ipAddrM = openCmd-&gt;<a class="code" href="class_t_c_p_open_command.html#a9e602467cc21c7c3a2ea9aae64f1319e">getRemoteAddr</a>();
    inetSockPair.localM.portM = openCmd-&gt;<a class="code" href="class_t_c_p_open_command.html#a8d1ced9e8f5355c77266673e7a2fc35f">getLocalPort</a>();
    inetSockPair.remoteM.portM = openCmd-&gt;<a class="code" href="class_t_c_p_open_command.html#a4d1170bbd04519d8b8f37677ba512f35">getRemotePort</a>();

    <span class="keywordflow">if</span> (inetSockPair.remoteM.ipAddrM.isUnspecified() || inetSockPair.remoteM.portM == -1)
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Error processing command OPEN_ACTIVE: remote address and port must be specified&quot;</span>);

    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: OPEN: &quot;</span>
        &lt;&lt; inetSockPair.localM.ipAddrM &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; inetSockPair.localM.portM &lt;&lt; <span class="stringliteral">&quot; --&gt; &quot;</span>
        &lt;&lt; inetSockPair.remoteM.ipAddrM &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; inetSockPair.remoteM.portM &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

    <span class="comment">// insert to map:</span>
    uint32_t nscRemoteAddr = <a class="code" href="class_t_c_p___n_s_c.html#a8f8a91b146256165e3b45b4e53d2b3e5">mapRemote2Nsc</a>(inetSockPair.remoteM.ipAddrM);

    ASSERT(<a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a>);

    nscSockPair.localM.portM = inetSockPair.localM.portM;
    <span class="keywordflow">if</span> (nscSockPair.localM.portM == -1)
        nscSockPair.localM.portM = 0; <span class="comment">// NSC uses 0 to mean &quot;not specified&quot;</span>
    nscSockPair.remoteM.ipAddrM.set(<a class="code" href="class_i_pv4_address.html" title="IPv4 address.">IPv4Address</a>(nscRemoteAddr));
    nscSockPair.remoteM.portM = inetSockPair.remoteM.portM;

    <a class="code" href="class_t_c_p___n_s_c.html#a6ee2d00754b122f1f5fb96de86706c99">changeAddresses</a>(connP, inetSockPair, nscSockPair);

    ASSERT(!<a class="code" href="class_t_c_p___n_s_c.html#a3316276b80b6e4d1bfb3290953236a0f">curConnM</a>);
    <a class="code" href="class_t_c_p___n_s_c.html#a3316276b80b6e4d1bfb3290953236a0f">curConnM</a> = &amp;connP;
    connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac1fbcd2067efa6181636016f90660097">connect</a>(*<a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a>, inetSockPair, nscSockPair);
    <a class="code" href="class_t_c_p___n_s_c.html#a3316276b80b6e4d1bfb3290953236a0f">curConnM</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

    <span class="comment">// and add to map:</span>
    <span class="comment">// TODO sendToIp already set the addresses.</span>
    <span class="comment">//changeAddresses(connP, inetSockPair, nscSockPair);</span>

    <span class="keyword">delete</span> tcpCommandP;
    <span class="keyword">delete</span> msgP;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adb36ad0b7ab3bbcf962002e097fad318"></a><!-- doxytag: member="TCP_NSC::process_OPEN_PASSIVE" ref="adb36ad0b7ab3bbcf962002e097fad318" args="(TCP_NSC_Connection &amp;connP, TCPCommand *tcpCommandP, cMessage *msgP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#adb36ad0b7ab3bbcf962002e097fad318">TCP_NSC::process_OPEN_PASSIVE</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;&#160;</td>
          <td class="paramname"><em>connP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_c_p_command.html">TCPCommand</a> *&#160;</td>
          <td class="paramname"><em>tcpCommandP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msgP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#aa2031b4ac770f7491193d9c2200248fa">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    ASSERT(<a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a>);

    <a class="code" href="class_t_c_p_open_command.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPOpenCommand</a> *openCmd = check_and_cast&lt;<a class="code" href="class_t_c_p_open_command.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPOpenCommand</a> *&gt;(tcpCommandP);

    <span class="keywordflow">if</span> (!openCmd-&gt;<a class="code" href="class_t_c_p_open_command.html#a719c5eb06ab9b7a819285fd2052aac9c">getFork</a>())
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;TCP_NSC supports Forking mode only&quot;</span>);


    <a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a> inetSockPair, nscSockPair;
    inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a> = openCmd-&gt;<a class="code" href="class_t_c_p_open_command.html#a8df2394c15fc7fb872491275d9db03b4">getLocalAddr</a>();
    inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a> = openCmd-&gt;<a class="code" href="class_t_c_p_open_command.html#a9e602467cc21c7c3a2ea9aae64f1319e">getRemoteAddr</a>();
    inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a> = openCmd-&gt;<a class="code" href="class_t_c_p_open_command.html#a8d1ced9e8f5355c77266673e7a2fc35f">getLocalPort</a>();
    inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a> = openCmd-&gt;<a class="code" href="class_t_c_p_open_command.html#a4d1170bbd04519d8b8f37677ba512f35">getRemotePort</a>();

    uint32_t nscRemoteAddr = inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a>.<a class="code" href="class_i_pv_x_address.html#aa3534408a9aa5e4cb3fc141597d0ed1e" title="True if the structure has not been assigned any address yet.">isUnspecified</a>()
            ? <a class="code" href="aodv__uu__omnet_8h.html#ac317b3e903719ba02894f1710f7f2439">ntohl</a>(<a class="code" href="inet_8h.html#a5d1940045dc2e7de552f3d4ff13a74ab">INADDR_ANY</a>)
            : <a class="code" href="class_t_c_p___n_s_c.html#a8f8a91b146256165e3b45b4e53d2b3e5">mapRemote2Nsc</a>(inetSockPair.remoteM.ipAddrM); <span class="comment">// Don&#39;t remove! It&#39;s insert remoteAddr into MAP.</span>

    (<a class="code" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a>)nscRemoteAddr; <span class="comment">// Eliminate &quot;unused variable&quot; warning.</span>

    <span class="keywordflow">if</span> (inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a> == -1)
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Error processing command OPEN_PASSIVE: local port must be specified&quot;</span>);

    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;Starting to listen on: &quot;</span> &lt;&lt; inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a> &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

    <span class="comment">/*</span>
<span class="comment">    ...</span>
<span class="comment">    NSC: process passive open request</span>
<span class="comment">    ...</span>
<span class="comment">    */</span>
    nscSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a> = inetSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a>;

    <a class="code" href="class_t_c_p___n_s_c.html#a6ee2d00754b122f1f5fb96de86706c99">changeAddresses</a>(connP, inetSockPair, nscSockPair);

    ASSERT(!<a class="code" href="class_t_c_p___n_s_c.html#a3316276b80b6e4d1bfb3290953236a0f">curConnM</a>);
    <a class="code" href="class_t_c_p___n_s_c.html#a3316276b80b6e4d1bfb3290953236a0f">curConnM</a> = &amp;connP;
    connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#ab41f239eb4d68348369a4b0f316f0ca3">listen</a>(*<a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a>, inetSockPair, nscSockPair);
    <a class="code" href="class_t_c_p___n_s_c.html#a3316276b80b6e4d1bfb3290953236a0f">curConnM</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

    <a class="code" href="class_t_c_p___n_s_c.html#a6ee2d00754b122f1f5fb96de86706c99">changeAddresses</a>(connP, inetSockPair, nscSockPair);

    <span class="keyword">delete</span> openCmd;
    <span class="keyword">delete</span> msgP;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa1425441fd6c4c7707df27ed5b854286"></a><!-- doxytag: member="TCP_NSC::process_SEND" ref="aa1425441fd6c4c7707df27ed5b854286" args="(TCP_NSC_Connection &amp;connP, TCPCommand *tcpCommandP, cPacket *msgP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#aa1425441fd6c4c7707df27ed5b854286">TCP_NSC::process_SEND</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;&#160;</td>
          <td class="paramname"><em>connP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_c_p_command.html">TCPCommand</a> *&#160;</td>
          <td class="paramname"><em>tcpCommandP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msgP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#aa2031b4ac770f7491193d9c2200248fa">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_t_c_p_send_command.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPSendCommand</a> *sendCommand = check_and_cast&lt;<a class="code" href="class_t_c_p_send_command.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPSendCommand</a> *&gt;(tcpCommandP);
    <span class="keyword">delete</span> sendCommand;

    connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a32173a591065aba27f939ef16fcdb583">send</a>(msgP);

    connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a19e5fb213290da69e2de7f36347ff6a8">do_SEND</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="af5abf875e10ca43caaaf0bd1a4480b03"></a><!-- doxytag: member="TCP_NSC::process_STATUS" ref="af5abf875e10ca43caaaf0bd1a4480b03" args="(TCP_NSC_Connection &amp;connP, TCPCommand *tcpCommandP, cMessage *msgP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#af5abf875e10ca43caaaf0bd1a4480b03">TCP_NSC::process_STATUS</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;&#160;</td>
          <td class="paramname"><em>connP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_c_p_command.html">TCPCommand</a> *&#160;</td>
          <td class="paramname"><em>tcpCommandP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msgP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#aa2031b4ac770f7491193d9c2200248fa">processAppCommand()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">delete</span> tcpCommandP; <span class="comment">// but we&#39;ll reuse msg for reply</span>

    <a class="code" href="class_t_c_p_status_info.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPStatusInfo</a> *statusInfo = <span class="keyword">new</span> <a class="code" href="class_t_c_p_status_info.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPStatusInfo</a>();

    <span class="comment">/*</span>
<span class="comment">    ...</span>
<span class="comment">    NSC: fill in status if possible</span>
<span class="comment"></span>
<span class="comment">         Still more work to do here. Some of this needs to be implemented on</span>
<span class="comment">         the NSC side, which is fairly trivial, just updating the get_var</span>
<span class="comment">         function for each stack.</span>
<span class="comment">    ...</span>
<span class="comment">    */</span>

    <span class="keywordtype">char</span> result[512];

    ASSERT(connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#abb71cce8838dc40d560aec01cf2958a5">pNscSocketM</a>);

    connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#abb71cce8838dc40d560aec01cf2958a5">pNscSocketM</a>-&gt;get_var(<span class="stringliteral">&quot;cwnd_&quot;</span>, result, <span class="keyword">sizeof</span>(result));
    statusInfo-&gt;<a class="code" href="class_t_c_p_status_info.html#a7bad64c3d88a5150d2309feb6b84e98d">setSnd_wnd</a>(atoi(result));

    statusInfo-&gt;<a class="code" href="class_t_c_p_status_info.html#a7ff9fc644d45db5c26bf9f4fdc4ab3d2">setLocalAddr</a>(connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a>);
    statusInfo-&gt;<a class="code" href="class_t_c_p_status_info.html#aa47c84165605360f5201d75f374dc5a7">setRemoteAddr</a>(connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a>);
    statusInfo-&gt;<a class="code" href="class_t_c_p_status_info.html#a22548d30e15e8a6fecef3a829c1e1800">setLocalPort</a>(connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a>);
    statusInfo-&gt;<a class="code" href="class_t_c_p_status_info.html#abfa134c8b8cab03ddef409b590fc9d9f">setRemotePort</a>(connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a>);
    <span class="comment">//connP.pNscSocketM-&gt;get_var(&quot;ssthresh_&quot;, result, sizeof(result));</span>
    <span class="comment">//connP.pNscSocketM-&gt;get_var(&quot;rxtcur_&quot;, result, sizeof(result));</span>


<span class="comment">/* other TCP model:</span>
<span class="comment">    statusInfo-&gt;setState(fsm.getState());</span>
<span class="comment">    statusInfo-&gt;setStateName(stateName(fsm.getState()));</span>
<span class="comment"></span>
<span class="comment"></span>
<span class="comment">    statusInfo-&gt;setSnd_mss(state-&gt;snd_mss);</span>
<span class="comment">    statusInfo-&gt;setSnd_una(state-&gt;snd_una);</span>
<span class="comment">    statusInfo-&gt;setSnd_nxt(state-&gt;snd_nxt);</span>
<span class="comment">    statusInfo-&gt;setSnd_max(state-&gt;snd_max);</span>
<span class="comment">    statusInfo-&gt;setSnd_wnd(state-&gt;snd_wnd);</span>
<span class="comment">    statusInfo-&gt;setSnd_up(state-&gt;snd_up);</span>
<span class="comment">    statusInfo-&gt;setSnd_wl1(state-&gt;snd_wl1);</span>
<span class="comment">    statusInfo-&gt;setSnd_wl2(state-&gt;snd_wl2);</span>
<span class="comment">    statusInfo-&gt;setIss(state-&gt;iss);</span>
<span class="comment">    statusInfo-&gt;setRcv_nxt(state-&gt;rcv_nxt);</span>
<span class="comment">    statusInfo-&gt;setRcv_wnd(state-&gt;rcv_wnd);</span>
<span class="comment">    statusInfo-&gt;setRcv_up(state-&gt;rcv_up);</span>
<span class="comment">    statusInfo-&gt;setIrs(state-&gt;irs);</span>
<span class="comment">    statusInfo-&gt;setFin_ack_rcvd(state-&gt;fin_ack_rcvd);</span>
<span class="comment">*/</span>

    msgP-&gt;setControlInfo(statusInfo);
    msgP-&gt;setKind(<a class="code" href="_t_c_p_command__m_8h.html#a68611fc79dbc74e8744d74b746cd956babe4b456d5340a1c5d9ed0b0384409159">TCP_I_STATUS</a>);
    send(msgP, <span class="stringliteral">&quot;appOut&quot;</span>, connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a27727052f18528beea45ba97ac17dd56">appGateIndexM</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa2031b4ac770f7491193d9c2200248fa"></a><!-- doxytag: member="TCP_NSC::processAppCommand" ref="aa2031b4ac770f7491193d9c2200248fa" args="(TCP_NSC_Connection &amp;connP, cMessage *msgP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#aa2031b4ac770f7491193d9c2200248fa">TCP_NSC::processAppCommand</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;&#160;</td>
          <td class="paramname"><em>connP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msgP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a271ad2328a421bed7b485f5de7bc0b67">handleAppMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_t_c_p___n_s_c.html#a52646ca133abd280a08fd512b4f58285">printConnBrief</a>(connP);

    <span class="comment">// first do actions</span>
    <a class="code" href="class_t_c_p_command.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPCommand</a> *tcpCommand = (<a class="code" href="class_t_c_p_command.html" title="Class generated from transport/contract/TCPCommand.msg by opp_msgc.">TCPCommand</a> *)(msgP-&gt;removeControlInfo());

    <span class="keywordflow">switch</span> (msgP-&gt;getKind())
    {
        <span class="keywordflow">case</span> <a class="code" href="_t_c_p_command__m_8h.html#a3a8aac9b74215a1768eeaa375c3cc7d6a9cf8b93f6f9a392ec92dc8c0735d0099">TCP_C_OPEN_ACTIVE</a>: <a class="code" href="class_t_c_p___n_s_c.html#adf0a1b7347ed79f572fbdb1efb4f95af">process_OPEN_ACTIVE</a>(connP, tcpCommand, msgP); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_t_c_p_command__m_8h.html#a3a8aac9b74215a1768eeaa375c3cc7d6a973f05e12deb1f283795b6eedc476cb8">TCP_C_OPEN_PASSIVE</a>: <a class="code" href="class_t_c_p___n_s_c.html#adb36ad0b7ab3bbcf962002e097fad318">process_OPEN_PASSIVE</a>(connP, tcpCommand, msgP); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_t_c_p_command__m_8h.html#a3a8aac9b74215a1768eeaa375c3cc7d6a5551d7ad54c2f8afd61355444ec620a6">TCP_C_SEND</a>: <a class="code" href="class_t_c_p___n_s_c.html#aa1425441fd6c4c7707df27ed5b854286">process_SEND</a>(connP, tcpCommand, check_and_cast&lt;cPacket*&gt;(msgP)); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_t_c_p_command__m_8h.html#a3a8aac9b74215a1768eeaa375c3cc7d6aa18cb807579ad3b72293d3023883ba0a">TCP_C_CLOSE</a>: <a class="code" href="class_t_c_p___n_s_c.html#a0678225786e01923db1055f865e3edbb">process_CLOSE</a>(connP, tcpCommand, msgP); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_t_c_p_command__m_8h.html#a3a8aac9b74215a1768eeaa375c3cc7d6a50eccd3eb23bdd7758a5e67a5e36c533">TCP_C_ABORT</a>: <a class="code" href="class_t_c_p___n_s_c.html#a170b19a246e3a73811f5fe229d0195e8">process_ABORT</a>(connP, tcpCommand, msgP); <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="_t_c_p_command__m_8h.html#a3a8aac9b74215a1768eeaa375c3cc7d6a77c74858a4d11f1ac6bcfc26e20a44e2">TCP_C_STATUS</a>: <a class="code" href="class_t_c_p___n_s_c.html#af5abf875e10ca43caaaf0bd1a4480b03">process_STATUS</a>(connP, tcpCommand, msgP); <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>: <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Wrong command from app: %d&quot;</span>, msgP-&gt;getKind());
    }

    <span class="comment">/*</span>
<span class="comment">    ...</span>
<span class="comment">    NSC: should call removeConnection(connP.connIdM) if socket has been destroyed</span>
<span class="comment">    ...</span>
<span class="comment">    */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="aeb9f30c246d8f8938c7ae59b37a5a748"></a><!-- doxytag: member="TCP_NSC::removeConnection" ref="aeb9f30c246d8f8938c7ae59b37a5a748" args="(int connIdP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#aeb9f30c246d8f8938c7ae59b37a5a748">TCP_NSC::removeConnection</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connIdP</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    TcpAppConnMap::iterator i = <a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>.find(connIdP);
    <span class="keywordflow">if</span> (i != <a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>.end())
        <a class="code" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">tcpAppConnMapM</a>.erase(i);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4dd3cdf4c1144ddf096004b969b24652"></a><!-- doxytag: member="TCP_NSC::send_callback" ref="a4dd3cdf4c1144ddf096004b969b24652" args="(const void *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#a4dd3cdf4c1144ddf096004b969b24652">TCP_NSC::send_callback</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> *&#160;</td>
          <td class="paramname"><em>dataP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>datalenP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called from the stack when a packet needs to be output to the wire. </p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="class_t_c_p___n_s_c.html#ab8bf66c8a1408c190b1a2e6d17aec46f">isAliveM</a>)
        <span class="keywordflow">return</span>;

    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: NSC: send_callback(&quot;</span> &lt;&lt; dataP &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; datalenP &lt;&lt; <span class="stringliteral">&quot;) called\n&quot;</span>;

    <a class="code" href="class_t_c_p___n_s_c.html#ab95f395174d072737b9f1a3e978fba51">sendToIP</a>(dataP, datalenP);

    <span class="comment">// comment from nsc.cc:</span>
    <span class="comment">//   New method: if_send_finish. This should be called by the nic</span>
    <span class="comment">//   driver code when there is space in it&#39;s queue. Unfortunately</span>
    <span class="comment">//   we don&#39;t know whether that is the case from here, so we just</span>
    <span class="comment">//   call it immediately for now. **THIS IS INCORRECT**. It should</span>
    <span class="comment">//   only be called when a space becomes free in the nic queue.</span>
    <a class="code" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">pStackM</a>-&gt;if_send_finish(0);    <span class="comment">// XXX: hardcoded inerface id</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a06436f74df85c1160d13f5b1651d12d9"></a><!-- doxytag: member="TCP_NSC::sendEstablishedMsg" ref="a06436f74df85c1160d13f5b1651d12d9" args="(TCP_NSC_Connection &amp;connP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#a06436f74df85c1160d13f5b1651d12d9">TCP_NSC::sendEstablishedMsg</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a> &amp;&#160;</td>
          <td class="paramname"><em>connP</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#ac6f917f4260a5caca56692640438b86f">handleIpInputMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    cMessage *msg = connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a1025dc6ad4095fd711c7fdea664921ca">createEstablishedMsg</a>();

    <span class="keywordflow">if</span> (msg)
    {
        send(msg, <span class="stringliteral">&quot;appOut&quot;</span>, connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a27727052f18528beea45ba97ac17dd56">appGateIndexM</a>);
        connP.<a class="code" href="class_t_c_p___n_s_c___connection.html#a15c353c571f24e4c02e8319aeb4851ed">sentEstablishedM</a> = <span class="keyword">true</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab95f395174d072737b9f1a3e978fba51"></a><!-- doxytag: member="TCP_NSC::sendToIP" ref="ab95f395174d072737b9f1a3e978fba51" args="(const void *dataP, int lenP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#ab95f395174d072737b9f1a3e978fba51">TCP_NSC::sendToIP</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> *&#160;</td>
          <td class="paramname"><em>dataP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lenP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a4dd3cdf4c1144ddf096004b969b24652">send_callback()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_i_pv_x_address.html" title="Stores an IPv4 or an IPv6 address.">IPvXAddress</a> src, dest;
    <span class="keyword">const</span> <a class="code" href="structnsc__iphdr.html">nsc_iphdr</a> *iph = (<span class="keyword">const</span> <a class="code" href="structnsc__iphdr.html">nsc_iphdr</a> *)dataP;

    <span class="keywordtype">int</span> ipHdrLen = 4 * iph-&gt;<a class="code" href="structnsc__iphdr.html#a99423380206a962a6e6fb24040f19d5a">ihl</a>;
    ASSERT(ipHdrLen &lt;= lenP);
    <span class="keywordtype">int</span> totalLen = <a class="code" href="aodv__uu__omnet_8h.html#ada37feda716b4ba89cf9dba34288141d">ntohs</a>(iph-&gt;<a class="code" href="structnsc__iphdr.html#a641843176204969f3ffeca6662fb8962">tot_len</a>);
    ASSERT(totalLen == lenP);
    <a class="code" href="structtcphdr.html">tcphdr</a> <span class="keyword">const</span> *tcph = (<a class="code" href="structtcphdr.html">tcphdr</a> <span class="keyword">const</span>*)(((<span class="keyword">const</span> <span class="keywordtype">char</span> *)(iph)) + ipHdrLen);

        <span class="comment">// XXX add some info (seqNo, len, etc)</span>

    <a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html">TCP_NSC_Connection::SockPair</a> nscSockPair;
    <a class="code" href="class_t_c_p___n_s_c___connection.html" title="Encapsulates a Network Simulation Cradle (NSC) instance.">TCP_NSC_Connection</a> *conn;

    nscSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a>.<a class="code" href="class_i_pv_x_address.html#a3ec3ab99e8b3609966747bf3ebb80856" title="Set to an IPv4 address.">set</a>(<a class="code" href="class_i_pv4_address.html" title="IPv4 address.">IPv4Address</a>(<a class="code" href="aodv__uu__omnet_8h.html#ac317b3e903719ba02894f1710f7f2439">ntohl</a>(iph-&gt;<a class="code" href="structnsc__iphdr.html#a05b0dc1351f22c47dcc398c1e996e790">saddr</a>)));
    nscSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a> = <a class="code" href="aodv__uu__omnet_8h.html#ada37feda716b4ba89cf9dba34288141d">ntohs</a>(tcph-&gt;<a class="code" href="structtcphdr.html#ae5c47c843c9dc71c25dce52df167d47c">th_sport</a>);
    nscSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a>.<a class="code" href="class_i_pv_x_address.html#a3ec3ab99e8b3609966747bf3ebb80856" title="Set to an IPv4 address.">set</a>(<a class="code" href="class_i_pv4_address.html" title="IPv4 address.">IPv4Address</a>(<a class="code" href="aodv__uu__omnet_8h.html#ac317b3e903719ba02894f1710f7f2439">ntohl</a>(iph-&gt;<a class="code" href="structnsc__iphdr.html#a00531e6e9a1ca5c0214f74b41fa2c2d3">daddr</a>)));
    nscSockPair.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#a25f3921e02ed2c54ae4da64a55142005">portM</a> = <a class="code" href="aodv__uu__omnet_8h.html#ada37feda716b4ba89cf9dba34288141d">ntohs</a>(tcph-&gt;<a class="code" href="structtcphdr.html#ac347d4aa4da2cc2e09d6668e69c40023">th_dport</a>);

    <span class="keywordflow">if</span> (<a class="code" href="class_t_c_p___n_s_c.html#a3316276b80b6e4d1bfb3290953236a0f">curConnM</a>)
    {
        <a class="code" href="class_t_c_p___n_s_c.html#a6ee2d00754b122f1f5fb96de86706c99">changeAddresses</a>(*<a class="code" href="class_t_c_p___n_s_c.html#a3316276b80b6e4d1bfb3290953236a0f">curConnM</a>, <a class="code" href="class_t_c_p___n_s_c.html#a3316276b80b6e4d1bfb3290953236a0f">curConnM</a>-&gt;<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>, nscSockPair);
        conn = <a class="code" href="class_t_c_p___n_s_c.html#a3316276b80b6e4d1bfb3290953236a0f">curConnM</a>;
    }
    <span class="keywordflow">else</span>
    {
        conn = <a class="code" href="class_t_c_p___n_s_c.html#a26d4edf1c960861b5747dd9109376d0c">findConnByNscSockPair</a>(nscSockPair);
    }

    <a class="code" href="class_t_c_p_segment.html" title="Represents a TCP segment.">TCPSegment</a> *tcpseg;

    <span class="keywordflow">if</span> (conn)
    {
        tcpseg = conn-&gt;<a class="code" href="class_t_c_p___n_s_c___connection.html#a73855bad84018833df70d67a76bafac4">sendQueueM</a>-&gt;<a class="code" href="class_t_c_p___n_s_c___send_queue.html#a1af3799e52fba7caeaf301fd90ee73b5" title="Called when the TCP wants to send or retransmit data, it constructs a TCP segment which contains the ...">createSegmentWithBytes</a>(tcph, totalLen-ipHdrLen);
        src = conn-&gt;<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#a9e9534fcc4d898a6a32e884da030db03">localM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a>;
        dest = conn-&gt;<a class="code" href="class_t_c_p___n_s_c___connection.html#ac2ae5be0f6d35e40975092681a405c5a">inetSockPairM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_pair.html#accb8d21c8d11bcad1d7a26fe03f52886">remoteM</a>.<a class="code" href="class_t_c_p___n_s_c___connection_1_1_sock_addr.html#aa3178df4208b1efe5c88100f2cd3e5e4">ipAddrM</a>;
    }
    <span class="keywordflow">else</span>
    {
        tcpseg = <span class="keyword">new</span> <a class="code" href="class_t_c_p_segment.html" title="Represents a TCP segment.">TCPSegment</a>(<span class="stringliteral">&quot;tcp-segment&quot;</span>);

        <a class="code" href="class_t_c_p_serializer.html" title="Converts between TCPSegment and binary (network byte order) TCP header.">TCPSerializer</a>().<a class="code" href="class_t_c_p_serializer.html#a7194cfc789c92b81cf5f521cdddade48" title="Puts a packet sniffed from the wire into a TCPSegment.">parse</a>((<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)tcph, totalLen-ipHdrLen, tcpseg, <span class="keyword">true</span>);
        dest = <a class="code" href="class_t_c_p___n_s_c.html#a47c71c428192ab653849d17a4827b484">mapNsc2Remote</a>(<a class="code" href="aodv__uu__omnet_8h.html#ac317b3e903719ba02894f1710f7f2439">ntohl</a>(iph-&gt;<a class="code" href="structnsc__iphdr.html#a00531e6e9a1ca5c0214f74b41fa2c2d3">daddr</a>));
    }

    ASSERT(tcpseg);

    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: Sending: conn=&quot;</span> &lt;&lt; conn &lt;&lt; <span class="stringliteral">&quot;, data: &quot;</span> &lt;&lt; dataP &lt;&lt; <span class="stringliteral">&quot; of len &quot;</span> &lt;&lt; lenP &lt;&lt; <span class="stringliteral">&quot; from &quot;</span> &lt;&lt; src
       &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; dest &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

    <span class="keyword">const</span> <span class="keywordtype">char</span>* output;

    <span class="keywordflow">if</span> (!dest.isIPv6())
    {
        <span class="comment">// send over IPv4</span>
        <a class="code" href="class_i_pv4_control_info.html" title="Control information for sending/receiving packets over IPv4.">IPv4ControlInfo</a> *controlInfo = <span class="keyword">new</span> <a class="code" href="class_i_pv4_control_info.html" title="Control information for sending/receiving packets over IPv4.">IPv4ControlInfo</a>();
        controlInfo-&gt;<a class="code" href="class_i_pv4_control_info___base.html#a6ddcce49c451a0fcc1149d8e6511e534">setProtocol</a>(<a class="code" href="_i_p_protocol_id__m_8h.html#a4297c2f400ba53cf6866e6d45bc81b70a69fd8777dfd279b247a88b6eec793bd7">IP_PROT_TCP</a>);
        controlInfo-&gt;<a class="code" href="class_i_pv4_control_info___base.html#a3d6ed870000e7aa80cb24ef2a2cdf34d">setSrcAddr</a>(src.<a class="code" href="class_i_pv_x_address.html#a961b38a74371d8aa29d8e6906a071d64" title="Get IPv4 address.">get4</a>());
        controlInfo-&gt;<a class="code" href="class_i_pv4_control_info___base.html#a51ff5ef6365b560939f817cb9ed22a05">setDestAddr</a>(dest.get4());
        tcpseg-&gt;setControlInfo(controlInfo);

        output = <span class="stringliteral">&quot;ipOut&quot;</span>;
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// send over IPv6</span>
        <a class="code" href="class_i_pv6_control_info.html" title="Control information for sending/receiving packets over IPv6.">IPv6ControlInfo</a> *controlInfo = <span class="keyword">new</span> <a class="code" href="class_i_pv6_control_info.html" title="Control information for sending/receiving packets over IPv6.">IPv6ControlInfo</a>();
        controlInfo-&gt;<a class="code" href="class_i_pv6_control_info___base.html#a95b27ccb8d018e7387cdbcd512791e30">setProtocol</a>(<a class="code" href="_i_p_protocol_id__m_8h.html#a4297c2f400ba53cf6866e6d45bc81b70a69fd8777dfd279b247a88b6eec793bd7">IP_PROT_TCP</a>);
        controlInfo-&gt;<a class="code" href="class_i_pv6_control_info___base.html#a319cf2aaec7229cc010ae83ab6e18604">setSrcAddr</a>(src.<a class="code" href="class_i_pv_x_address.html#a733678e1e28f88c954cfce854af576c6" title="Get IPv6 address.">get6</a>());
        controlInfo-&gt;<a class="code" href="class_i_pv6_control_info___base.html#a061a09229c1cb5c450e90fda062d278f">setDestAddr</a>(dest.get6());
        tcpseg-&gt;setControlInfo(controlInfo);

        output = <span class="stringliteral">&quot;ipv6Out&quot;</span>;
    }

    <span class="keywordflow">if</span> (conn)
    {
        conn-&gt;<a class="code" href="class_t_c_p___n_s_c___connection.html#a803bc512956f8e807b48a893bc07f034">receiveQueueM</a>-&gt;<a class="code" href="class_t_c_p___n_s_c___receive_queue.html#a1a0e793a69e8ac17181cbc611c688f8b" title="notify the queue about output messages">notifyAboutSending</a>(tcpseg);
    }

    <span class="comment">// record seq (only if we do send data) and ackno</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_t_c_p___n_s_c.html#a874db0904059d4d3aa29147215a7bd95">sndNxtVector</a> &amp;&amp; tcpseg-&gt;<a class="code" href="class_t_c_p_segment___base.html#a7d9f010b71e3bfa267873ab21195fb73">getPayloadLength</a>()!=0)
        <a class="code" href="class_t_c_p___n_s_c.html#a874db0904059d4d3aa29147215a7bd95">sndNxtVector</a>-&gt;record(tcpseg-&gt;<a class="code" href="class_t_c_p_segment___base.html#a0dafe41ef5a4306a4106fdb1e22b19e8">getSequenceNo</a>());

    <span class="keywordflow">if</span> (<a class="code" href="class_t_c_p___n_s_c.html#a76d7065c2a3fe57a9c6fb37efe468701">sndAckVector</a>)
        <a class="code" href="class_t_c_p___n_s_c.html#a76d7065c2a3fe57a9c6fb37efe468701">sndAckVector</a>-&gt;record(tcpseg-&gt;<a class="code" href="class_t_c_p_segment___base.html#a853ab8ce8acfb5da053fa9ca24592ce8">getAckNo</a>());

    send(tcpseg, output);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a844a5315c6d446f11662860d65a105d0"></a><!-- doxytag: member="TCP_NSC::updateDisplayString" ref="a844a5315c6d446f11662860d65a105d0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#a844a5315c6d446f11662860d65a105d0">TCP_NSC::updateDisplayString</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a90d66a5c32ae0c01b4846284c4c0fa84">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//...</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="af20c41fdfde8337324ef6e155982c3ff"></a><!-- doxytag: member="TCP_NSC::wakeup" ref="af20c41fdfde8337324ef6e155982c3ff" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="timer__queue_8h.html#a07640d68b3fdfaa5c48a36265e8f10b8">void</a> <a class="el" href="class_t_c_p___n_s_c.html#af20c41fdfde8337324ef6e155982c3ff">TCP_NSC::wakeup</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is called when something interesting happened to a socket. </p>
<p>Perhaps a socket can now be written to or read from or something. We cannot directly do things like read or write from the socket, because this is not what happens in the real FreeBSD: it normally puts the application or thread blocking on the socket in question on the run queue.</p>
<p>To simulate this behaviour we wait a very small amount of time (this is sort of simulating processing delay) then call wakeup_expire. The important thing is that we return here and actually do the reading/writing at a later time. </p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="class_t_c_p___n_s_c.html#ab8bf66c8a1408c190b1a2e6d17aec46f">isAliveM</a>)
        <span class="keywordflow">return</span>;

    <a class="code" href="_t_c_p___n_s_c_8cc.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: wakeup() called\n&quot;</span>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a92b38e62db4d3cf85d6e25598685c46f"></a><!-- doxytag: member="TCP_NSC::bufferSizeParamNameS" ref="a92b38e62db4d3cf85d6e25598685c46f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * <a class="el" href="class_t_c_p___n_s_c.html#a92b38e62db4d3cf85d6e25598685c46f">TCP_NSC::bufferSizeParamNameS</a> = &quot;stackBufferSize&quot;<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a868350c3825eb859269f7e37242497b8">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a32861d3a430e27281b1fa1d74d215112"></a><!-- doxytag: member="TCP_NSC::curAddrCounterM" ref="a32861d3a430e27281b1fa1d74d215112" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_t_c_p___n_s_c.html#a32861d3a430e27281b1fa1d74d215112">TCP_NSC::curAddrCounterM</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3316276b80b6e4d1bfb3290953236a0f"></a><!-- doxytag: member="TCP_NSC::curConnM" ref="a3316276b80b6e4d1bfb3290953236a0f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p___n_s_c___connection.html">TCP_NSC_Connection</a>* <a class="el" href="class_t_c_p___n_s_c.html#a3316276b80b6e4d1bfb3290953236a0f">TCP_NSC::curConnM</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#adf0a1b7347ed79f572fbdb1efb4f95af">process_OPEN_ACTIVE()</a>, <a class="el" href="class_t_c_p___n_s_c.html#adb36ad0b7ab3bbcf962002e097fad318">process_OPEN_PASSIVE()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#ab95f395174d072737b9f1a3e978fba51">sendToIP()</a>.</p>

</div>
</div>
<a class="anchor" id="a425e408bf7fe9eafe8d370e2bed0cf88"></a><!-- doxytag: member="TCP_NSC::inetSockPair2ConnIdMapM" ref="a425e408bf7fe9eafe8d370e2bed0cf88" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p___n_s_c.html#a9c3fbac8d3af6a5df98a30cdd637b1af">SockPair2ConnIdMap</a> <a class="el" href="class_t_c_p___n_s_c.html#a425e408bf7fe9eafe8d370e2bed0cf88">TCP_NSC::inetSockPair2ConnIdMapM</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a6ee2d00754b122f1f5fb96de86706c99">changeAddresses()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#ad3d96e09f4d4a10981b425987ba0cffc">findConnByInetSockPair()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8bf66c8a1408c190b1a2e6d17aec46f"></a><!-- doxytag: member="TCP_NSC::isAliveM" ref="ab8bf66c8a1408c190b1a2e6d17aec46f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_t_c_p___n_s_c.html#ab8bf66c8a1408c190b1a2e6d17aec46f">TCP_NSC::isAliveM</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a8605ce922fa1b467ab07cbefaf98a4c6">finish()</a>, <a class="el" href="class_t_c_p___n_s_c.html#a868350c3825eb859269f7e37242497b8">initialize()</a>, <a class="el" href="class_t_c_p___n_s_c.html#a4dd3cdf4c1144ddf096004b969b24652">send_callback()</a>, <a class="el" href="class_t_c_p___n_s_c.html#af20c41fdfde8337324ef6e155982c3ff">wakeup()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#ad00fed74358f52fc7e0f0f787d4ea19e">~TCP_NSC()</a>.</p>

</div>
</div>
<a class="anchor" id="ad7ff84862db0bf2b85a728b5c445d954"></a><!-- doxytag: member="TCP_NSC::localInnerGwS" ref="ad7ff84862db0bf2b85a728b5c445d954" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> <a class="el" href="class_t_c_p___n_s_c.html#ad7ff84862db0bf2b85a728b5c445d954">TCP_NSC::localInnerGwS</a><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a868350c3825eb859269f7e37242497b8">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a34ac95996f26d95fefc8550ca776b0cc"></a><!-- doxytag: member="TCP_NSC::localInnerIpS" ref="a34ac95996f26d95fefc8550ca776b0cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> <a class="el" href="class_t_c_p___n_s_c.html#a34ac95996f26d95fefc8550ca776b0cc">TCP_NSC::localInnerIpS</a><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#ac6f917f4260a5caca56692640438b86f">handleIpInputMessage()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#a868350c3825eb859269f7e37242497b8">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="aeddf42ccdbcea0563662d27c251d14a5"></a><!-- doxytag: member="TCP_NSC::localInnerMaskS" ref="aeddf42ccdbcea0563662d27c251d14a5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> <a class="el" href="class_t_c_p___n_s_c.html#aeddf42ccdbcea0563662d27c251d14a5">TCP_NSC::localInnerMaskS</a><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a868350c3825eb859269f7e37242497b8">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ad6663badb72720c76ce73d43e419ca"></a><!-- doxytag: member="TCP_NSC::logverboseS" ref="a0ad6663badb72720c76ce73d43e419ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_t_c_p___n_s_c.html#a0ad6663badb72720c76ce73d43e419ca">TCP_NSC::logverboseS</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a868350c3825eb859269f7e37242497b8">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a1a311ff9e5890714bd2f84bbecba77a4"></a><!-- doxytag: member="TCP_NSC::nsc2RemoteMapM" ref="a1a311ff9e5890714bd2f84bbecba77a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p___n_s_c.html#a200071546b87810ea111a855dd9f597f">Nsc2RemoteMap</a> <a class="el" href="class_t_c_p___n_s_c.html#a1a311ff9e5890714bd2f84bbecba77a4">TCP_NSC::nsc2RemoteMapM</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a47c71c428192ab653849d17a4827b484">mapNsc2Remote()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#a8f8a91b146256165e3b45b4e53d2b3e5">mapRemote2Nsc()</a>.</p>

</div>
</div>
<a class="anchor" id="ad134121b61617fe01773b9af60e4e938"></a><!-- doxytag: member="TCP_NSC::nscSockPair2ConnIdMapM" ref="ad134121b61617fe01773b9af60e4e938" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p___n_s_c.html#a9c3fbac8d3af6a5df98a30cdd637b1af">SockPair2ConnIdMap</a> <a class="el" href="class_t_c_p___n_s_c.html#ad134121b61617fe01773b9af60e4e938">TCP_NSC::nscSockPair2ConnIdMapM</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a6ee2d00754b122f1f5fb96de86706c99">changeAddresses()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#a26d4edf1c960861b5747dd9109376d0c">findConnByNscSockPair()</a>.</p>

</div>
</div>
<a class="anchor" id="a76b137c08eab91b49e56c10364f2ad6f"></a><!-- doxytag: member="TCP_NSC::pNsiTimerM" ref="a76b137c08eab91b49e56c10364f2ad6f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_t_c_p___n_s_c.html#a76b137c08eab91b49e56c10364f2ad6f">TCP_NSC::pNsiTimerM</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a90d66a5c32ae0c01b4846284c4c0fa84">handleMessage()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#a075c5ce907fe0ed0ad33978faac8d130">loadStack()</a>.</p>

</div>
</div>
<a class="anchor" id="ac367c2a6a2cb4162f32ff2aff822b7c6"></a><!-- doxytag: member="TCP_NSC::pStackM" ref="ac367c2a6a2cb4162f32ff2aff822b7c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INetStack* <a class="el" href="class_t_c_p___n_s_c.html#ac367c2a6a2cb4162f32ff2aff822b7c6">TCP_NSC::pStackM</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#ac6f917f4260a5caca56692640438b86f">handleIpInputMessage()</a>, <a class="el" href="class_t_c_p___n_s_c.html#a90d66a5c32ae0c01b4846284c4c0fa84">handleMessage()</a>, <a class="el" href="class_t_c_p___n_s_c.html#a868350c3825eb859269f7e37242497b8">initialize()</a>, <a class="el" href="class_t_c_p___n_s_c.html#a075c5ce907fe0ed0ad33978faac8d130">loadStack()</a>, <a class="el" href="class_t_c_p___n_s_c.html#adf0a1b7347ed79f572fbdb1efb4f95af">process_OPEN_ACTIVE()</a>, <a class="el" href="class_t_c_p___n_s_c.html#adb36ad0b7ab3bbcf962002e097fad318">process_OPEN_PASSIVE()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#a4dd3cdf4c1144ddf096004b969b24652">send_callback()</a>.</p>

</div>
</div>
<a class="anchor" id="aae389b5b6f57b44bd1ddb27d9eb3a2da"></a><!-- doxytag: member="TCP_NSC::rcvAckVector" ref="aae389b5b6f57b44bd1ddb27d9eb3a2da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector* <a class="el" href="class_t_c_p___n_s_c.html#aae389b5b6f57b44bd1ddb27d9eb3a2da">TCP_NSC::rcvAckVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#ac6f917f4260a5caca56692640438b86f">handleIpInputMessage()</a>, <a class="el" href="class_t_c_p___n_s_c.html#af1a26965ca43d53e704772628bc448de">TCP_NSC()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#ad00fed74358f52fc7e0f0f787d4ea19e">~TCP_NSC()</a>.</p>

</div>
</div>
<a class="anchor" id="acd545a2965dabd007d5333131cb06fac"></a><!-- doxytag: member="TCP_NSC::rcvSeqVector" ref="acd545a2965dabd007d5333131cb06fac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector* <a class="el" href="class_t_c_p___n_s_c.html#acd545a2965dabd007d5333131cb06fac">TCP_NSC::rcvSeqVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#ac6f917f4260a5caca56692640438b86f">handleIpInputMessage()</a>, <a class="el" href="class_t_c_p___n_s_c.html#af1a26965ca43d53e704772628bc448de">TCP_NSC()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#ad00fed74358f52fc7e0f0f787d4ea19e">~TCP_NSC()</a>.</p>

</div>
</div>
<a class="anchor" id="a909bba5b898f3867804e416f39887740"></a><!-- doxytag: member="TCP_NSC::remote2NscMapM" ref="a909bba5b898f3867804e416f39887740" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p___n_s_c.html#ab748255820ec167d7e20c122b754ff02">Remote2NscMap</a> <a class="el" href="class_t_c_p___n_s_c.html#a909bba5b898f3867804e416f39887740">TCP_NSC::remote2NscMapM</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a8f8a91b146256165e3b45b4e53d2b3e5">mapRemote2Nsc()</a>.</p>

</div>
</div>
<a class="anchor" id="a154ce08a411bc499387f3d7df6108090"></a><!-- doxytag: member="TCP_NSC::remoteFirstInnerIpS" ref="a154ce08a411bc499387f3d7df6108090" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_i_pv_x_address.html">IPvXAddress</a> <a class="el" href="class_t_c_p___n_s_c.html#a154ce08a411bc499387f3d7df6108090">TCP_NSC::remoteFirstInnerIpS</a><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a8f8a91b146256165e3b45b4e53d2b3e5">mapRemote2Nsc()</a>.</p>

</div>
</div>
<a class="anchor" id="a76d7065c2a3fe57a9c6fb37efe468701"></a><!-- doxytag: member="TCP_NSC::sndAckVector" ref="a76d7065c2a3fe57a9c6fb37efe468701" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector* <a class="el" href="class_t_c_p___n_s_c.html#a76d7065c2a3fe57a9c6fb37efe468701">TCP_NSC::sndAckVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#ab95f395174d072737b9f1a3e978fba51">sendToIP()</a>, <a class="el" href="class_t_c_p___n_s_c.html#af1a26965ca43d53e704772628bc448de">TCP_NSC()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#ad00fed74358f52fc7e0f0f787d4ea19e">~TCP_NSC()</a>.</p>

</div>
</div>
<a class="anchor" id="a874db0904059d4d3aa29147215a7bd95"></a><!-- doxytag: member="TCP_NSC::sndNxtVector" ref="a874db0904059d4d3aa29147215a7bd95" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector* <a class="el" href="class_t_c_p___n_s_c.html#a874db0904059d4d3aa29147215a7bd95">TCP_NSC::sndNxtVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#ab95f395174d072737b9f1a3e978fba51">sendToIP()</a>, <a class="el" href="class_t_c_p___n_s_c.html#af1a26965ca43d53e704772628bc448de">TCP_NSC()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#ad00fed74358f52fc7e0f0f787d4ea19e">~TCP_NSC()</a>.</p>

</div>
</div>
<a class="anchor" id="af88cbc0f5ea50eb395fc7dfbaaf12080"></a><!-- doxytag: member="TCP_NSC::stackNameParamNameS" ref="af88cbc0f5ea50eb395fc7dfbaaf12080" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * <a class="el" href="class_t_c_p___n_s_c.html#af88cbc0f5ea50eb395fc7dfbaaf12080">TCP_NSC::stackNameParamNameS</a> = &quot;stackName&quot;<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a868350c3825eb859269f7e37242497b8">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a4463b0d07dd5afadb9c2712daf198c12"></a><!-- doxytag: member="TCP_NSC::tcpAppConnMapM" ref="a4463b0d07dd5afadb9c2712daf198c12" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p___n_s_c.html#a818bb7dd57b8c8cb52f65a39ade5d057">TcpAppConnMap</a> <a class="el" href="class_t_c_p___n_s_c.html#a4463b0d07dd5afadb9c2712daf198c12">TCP_NSC::tcpAppConnMapM</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#aed2e61f639fca0e833762942ca63a3ce">do_SEND_all()</a>, <a class="el" href="class_t_c_p___n_s_c.html#afa11ee5b4b6ce245c42111758e52a082">findAppConn()</a>, <a class="el" href="class_t_c_p___n_s_c.html#a271ad2328a421bed7b485f5de7bc0b67">handleAppMessage()</a>, <a class="el" href="class_t_c_p___n_s_c.html#ac6f917f4260a5caca56692640438b86f">handleIpInputMessage()</a>, <a class="el" href="class_t_c_p___n_s_c.html#a868350c3825eb859269f7e37242497b8">initialize()</a>, <a class="el" href="class_t_c_p___n_s_c.html#aeb9f30c246d8f8938c7ae59b37a5a748">removeConnection()</a>, and <a class="el" href="class_t_c_p___n_s_c.html#ad00fed74358f52fc7e0f0f787d4ea19e">~TCP_NSC()</a>.</p>

</div>
</div>
<a class="anchor" id="ad3ea3b2335440046cae00957f67706a8"></a><!-- doxytag: member="TCP_NSC::testingS" ref="ad3ea3b2335440046cae00957f67706a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_t_c_p___n_s_c.html#ad3ea3b2335440046cae00957f67706a8">TCP_NSC::testingS</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p___n_s_c.html#a868350c3825eb859269f7e37242497b8">initialize()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_t_c_p___n_s_c_8h.html">TCP_NSC.h</a></li>
<li><a class="el" href="_t_c_p___n_s_c_8cc.html">TCP_NSC.cc</a></li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_t_c_p___n_s_c.html">TCP_NSC</a>      </li>

    <li class="footer">Generated on Tue Aug 7 2012 16:01:31 for INET Framework for OMNeT++/OMNEST by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
