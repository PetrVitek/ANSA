<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>INET Framework for OMNeT++/OMNEST: Mac80211 Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_mac80211.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-types">Private Types</a>  </div>
  <div class="headertitle">
<div class="title">Mac80211 Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="Mac80211" --><!-- doxytag: inherits="WirelessMacBase,INotifiable" -->
<p>An implementation of the 802.11b MAC.  
 <a href="class_mac80211.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Mac80211:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_mac80211.png" usemap="#Mac80211_map" alt=""/>
  <map id="Mac80211_map" name="Mac80211_map">
<area href="class_wireless_mac_base.html" alt="WirelessMacBase" shape="rect" coords="0,0,113,24"/>
<area href="class_i_notifiable.html" alt="INotifiable" shape="rect" coords="123,0,236,24"/>
</map>
 </div></div>

<p><a href="class_mac80211-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a8b1273f60ad9725e9d657c729740899a">Mac80211</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a7b58cb4d498feea3ea287b72de4b7313">~Mac80211</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#afff07fb51cb6f8d89794b31e57a70d82">numInitStages</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization of the module and some variables.  <a href="#afff07fb51cb6f8d89794b31e57a70d82"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#ab81dae24d79c2ef010301e2c219966c1">initialize</a> (int)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization of the module and some variables.  <a href="#ab81dae24d79c2ef010301e2c219966c1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#ae3078154ed54cde61d44b7bd227b75be">registerInterface</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Register the interface in <a class="el" href="class_i_interface_table.html">IInterfaceTable</a>.  <a href="#ae3078154ed54cde61d44b7bd227b75be"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a45135e1a304c496b8c51fef88145e7c0">receiveChangeNotification</a> (int category, const cPolymorphic *details)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the <a class="el" href="class_notification_board.html">NotificationBoard</a> whenever a change occurs we're interested in.  <a href="#a45135e1a304c496b8c51fef88145e7c0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a990af33f857669759da0cbeebd1c2431">handleSelfMsg</a> (cMessage *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle self messages such as timer...  <a href="#a990af33f857669759da0cbeebd1c2431"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#ad7bce39f2c4cc648b6571ae5bc622103">handleUpperMsg</a> (cPacket *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle packets from upper layer.  <a href="#ad7bce39f2c4cc648b6571ae5bc622103"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#aa2fe838bd226e9efb04477d87d3fbfab">handleCommand</a> (cMessage *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle commands from upper layer.  <a href="#aa2fe838bd226e9efb04477d87d3fbfab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#aba69300333bac6d93a3a28224037aade">handleLowerMsg</a> (cPacket *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle packets from lower layer.  <a href="#aba69300333bac6d93a3a28224037aade"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a0a87fa1791117ef1dd1841ba217e4245">handleEndContentionTimer</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">handle end of contention  <a href="#a0a87fa1791117ef1dd1841ba217e4245"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a50acb267ae4092cea8399a10d10aab37">handleMsgNotForMe</a> (<a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">handle a message that is not for me or errornous  <a href="#a50acb267ae4092cea8399a10d10aab37"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#aa0b767642d86d3b66f1d3258065fe5ae">handleMsgForMe</a> (<a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">handle a message that was meant for me  <a href="#aa0b767642d86d3b66f1d3258065fe5ae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#adfcf8b7a5e1db233a1bd717cecaf49bd">handleBroadcastMsg</a> (<a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#ac6e3ffa0213257e6f4336295bc6c52b6">handleEndTransmissionTimer</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">handle the end of a transmission...  <a href="#ac6e3ffa0213257e6f4336295bc6c52b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a7d36a55827a7ea91b2539c86d79349af">handleEndSifsTimer</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">handle end of SIFS  <a href="#a7d36a55827a7ea91b2539c86d79349af"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#ab5fcba8c7a3878ac59195a483ba35a12">handleTimeoutTimer</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">handle time out  <a href="#ab5fcba8c7a3878ac59195a483ba35a12"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a23a142d65d7a0dcba4a60c0f509ab5b9">handleNavTimer</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">NAV timer expired, the exchange of messages of other stations is done.  <a href="#a23a142d65d7a0dcba4a60c0f509ab5b9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a98ad0d3935d620b33302e5230b395685">handleRTSframe</a> (<a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#ab0844f9dbcece750c9a58ca9f0a73fe1">handleDATAframe</a> (<a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a50cb85360462eb7d256ec8a0b493ca44">handleACKframe</a> (<a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#ae1e17af7dddc261d7947d48a1f4d0e21">handleCTSframe</a> (<a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a0bc84e36d3aaf65af29a5aded9d0ef50">sendDATAframe</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">send data frame  <a href="#a0bc84e36d3aaf65af29a5aded9d0ef50"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a1c404a5176db493c2fefb71537783607">sendACKframe</a> (<a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">send Acknoledgement  <a href="#a1c404a5176db493c2fefb71537783607"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a1fd59a589e53facb68c13be84521a49e">sendCTSframe</a> (<a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">send CTS frame  <a href="#a1fd59a589e53facb68c13be84521a49e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a3104750758ab171b20ffcfeae0079a78">sendRTSframe</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">send RTS frame  <a href="#a3104750758ab171b20ffcfeae0079a78"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a26b30d048980b56d79c04e859bfce009">sendBROADCASTframe</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">send broadcast frame  <a href="#a26b30d048980b56d79c04e859bfce009"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a008b57947b7d9287bb34b1e67094ebb8">encapsMsg</a> (cPacket *netw)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">encapsulate packet  <a href="#a008b57947b7d9287bb34b1e67094ebb8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a5c369fe6fc9f0d0b491d242810714b2c">decapsulateAndSendUp</a> (<a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *frame)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">decapsulate packet and send to higher layer  <a href="#a5c369fe6fc9f0d0b491d242810714b2c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a7945493d4537fd28f78d4b2daca8ff57">buildDATAframe</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">build a data frame  <a href="#a7945493d4537fd28f78d4b2daca8ff57"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a1103d3632c895143607133688783042f">buildACKframe</a> (<a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">build an ACK  <a href="#a1103d3632c895143607133688783042f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a4ad0c06b8940a8fc5463d29d8fda423d">buildCTSframe</a> (<a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">build a CTS frame  <a href="#a4ad0c06b8940a8fc5463d29d8fda423d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a94fc835cfeeacad4375aa46f0facb915">buildRTSframe</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">build an RTS frame  <a href="#a94fc835cfeeacad4375aa46f0facb915"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#aa6aae4c20516ad33fb889336d27e8dab">buildBROADCASTframe</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">build a broadcast frame  <a href="#aa6aae4c20516ad33fb889336d27e8dab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#ab3030c86acac78401f877a61cefcdad6">beginNewCycle</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">start a new contention period  <a href="#ab3030c86acac78401f877a61cefcdad6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a897651c7f7dd8d9ed2f583db0e4550e5">computeBackoff</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute a backoff value.  <a href="#a897651c7f7dd8d9ed2f583db0e4550e5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a2eaddea39a3799f7c2de9e62cef339cd">computeContentionWindow</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute a new contention window.  <a href="#a2eaddea39a3799f7c2de9e62cef339cd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a72e78257babff863ca8749b2bb1a97f4">testMaxAttempts</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if maximum number of retries to transmit is exceeded.  <a href="#a72e78257babff863ca8749b2bb1a97f4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a106323e58027710125c0963c5cda3a88">computeTimeout</a> (<a class="el" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250e">_802_11frameType</a> type, simtime_t last_frame_duration)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">return a timeOut value for a certain type of frame  <a href="#a106323e58027710125c0963c5cda3a88"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a">computePacketDuration</a> (int bits)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">computes the duration of a transmission over the physical channel  <a href="#a0ddb885ea2fc455ad3076a9b9327147a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713">setState</a> (<a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447">State</a> <a class="el" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c">state</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the state, and produces a log message in between.  <a href="#a9fc6eb078e53740d354f8ea7b9d94713"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#ade8a90e665191333e610b60bad4a32a1">stateName</a> (<a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447">State</a> <a class="el" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c">state</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Produce a readable name of the given state.  <a href="#ade8a90e665191333e610b60bad4a32a1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a5f781f421a39d163f2baed01473801f8">timerTypeName</a> (int type)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Produce a readable name of the given timer type.  <a href="#a5f781f421a39d163f2baed01473801f8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a7e80a017fe350632553db643c0033acc">pktTypeName</a> (int type)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Produce a readable name of the given packet type.  <a href="#a7e80a017fe350632553db643c0033acc"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_m_a_c_address.html">MACAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a575be19d3e428551aa4e3ecfb48fcf49">myMacAddr</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">mac address  <a href="#a575be19d3e428551aa4e3ecfb48fcf49"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a2d31f97b0662b8e37f090c3b996cec82">timeout</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer used for time-outs after the transmission of a RTS, a CTS, or a DATA packet.  <a href="#a2d31f97b0662b8e37f090c3b996cec82"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a35efb0198d0085a341aba515bec9146f">nav</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer used for the defer time of a node. Also called NAV : networks allocation vector.  <a href="#a35efb0198d0085a341aba515bec9146f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4">contention</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer used for contention periods.  <a href="#aea1b09528a5051a1d08ec029177b8ef4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#abe4522bcfe2b0a6d4275fe2be9226142">endTransmission</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer used to indicate the end of the transmission of an ACK or a BROADCAST packet.  <a href="#abe4522bcfe2b0a6d4275fe2be9226142"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4">endSifs</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer used to indicate the end of a SIFS.  <a href="#acbbc0f188ff710bbf60a5b64f2ce4dd4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#aba0a45a5ae60f3330f57655096b1364e">EIFS</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">extended interframe space  <a href="#aba0a45a5ae60f3330f57655096b1364e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a8aa2e915f41c451a2c83de8aab09594c">BW</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable to store the current backoff value.  <a href="#a8aa2e915f41c451a2c83de8aab09594c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447">State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c">state</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Current state of the MAC.  <a href="#a56fa75f3eb056ae29b1a4b8da0035d8c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449">RadioState::State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a1c357b92c014552612da4d21f2d1387b">radioState</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Current state of the radio (kept updated by <a class="el" href="class_mac80211.html#a45135e1a304c496b8c51fef88145e7c0" title="Called by the NotificationBoard whenever a change occurs we&#39;re interested in.">receiveChangeNotification()</a>)  <a href="#a1c357b92c014552612da4d21f2d1387b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a9df7f8967859f0870597e866677c8af5">maxQueueSize</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximal number of packets in the queue; should be set in the omnetpp.ini.  <a href="#a9df7f8967859f0870597e866677c8af5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a5d8e9b53c8d6cb0116feed506d843e18">nextIsBroadcast</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Boolean used to know if the next packet is a broadcast packet.  <a href="#a5d8e9b53c8d6cb0116feed506d843e18"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_mac80211.html#a565ab82077f95d80ec44a4a4fed08ab9">MacPktList</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50">fromUpperLayer</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffering of messages from upper layer.  <a href="#a969e8e3a592dffccea28596c61b2af50"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a2e6f9111bcd385f606abf94da7e8b44e">retryCounter</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of frame transmission attempt.  <a href="#a2e6f9111bcd385f606abf94da7e8b44e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#aa04ef4245cd9721019b4e0b2d3164ec2">tryWithoutBackoff</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">If there's a new packet to send and the channel is free, no backoff is needed.  <a href="#aa04ef4245cd9721019b4e0b2d3164ec2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#ad0d07dd20d64f623bba85ab34a708d34">rtsCts</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">true if Rts/Cts is used, false if not; can be set in omnetpp.ini  <a href="#ad0d07dd20d64f623bba85ab34a708d34"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#ab9f0ea820748af6d640569fc76f39659">delta</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Very small value used in timer scheduling in order to avoid multiple changements of state in the same simulation time.  <a href="#ab9f0ea820748af6d640569fc76f39659"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a126c9db5a54bafa6ad74eb3ee24bd936">bitrate</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The bitrate should be set in omnetpp.ini; be sure to use a valid 802.11 bitrate.  <a href="#a126c9db5a54bafa6ad74eb3ee24bd936"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#afa01e3d776f586cab65b6cf45eac59d9">broadcastBackoff</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Should be set in the omnetpp.ini.  <a href="#afa01e3d776f586cab65b6cf45eac59d9"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a381307739876ed0d015352b95bd93186">timerType</a> { <br/>
&#160;&#160;<a class="el" href="class_mac80211.html#a381307739876ed0d015352b95bd93186a317269d758fc1f055750d43926abbb2f">TIMEOUT</a>, 
<a class="el" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ad2d7f908db1dc3ed72e451dad336d654">NAV</a>, 
<a class="el" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ab091712e64b8b82a904b5819b44c0ce2">CONTENTION</a>, 
<a class="el" href="class_mac80211.html#a381307739876ed0d015352b95bd93186a6aa35f51fc3714f21930242d9a802471">END_TRANSMISSION</a>, 
<br/>
&#160;&#160;<a class="el" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ae116234508b0af14c6e33ff5627eef0a">END_SIFS</a>
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447">State</a> { <br/>
&#160;&#160;<a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447abe0abc1112335ff66c1eef6bd95371e4">WFDATA</a> =  0, 
<a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a4cfe7a25808b0e110d662483abec7256">QUIET</a> =  1, 
<a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a8904ce43407ca530f7fe83d63c558e28">IDLE</a> =  2, 
<a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447ae138f38743ca77f1300a24d4d79786fe">CONTEND</a> =  3, 
<br/>
&#160;&#160;<a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447accc67a0993941984c4f6b49c633c2ad8">WFCTS</a> =  4, 
<a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a50a717bfadf9a3fdd634d77950607278">WFACK</a> =  5, 
<a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447aa1070f3c837e8dc4d7890536f7cfbaf9">BUSY</a> =  6
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::list&lt; <a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mac80211.html#a565ab82077f95d80ec44a4a4fed08ab9">MacPktList</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>An implementation of the 802.11b MAC. </p>
<p>For more info, see the NED file.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>David Raguin </dd></dl>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00040">40</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>
</div><hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a565ab82077f95d80ec44a4a4fed08ab9"></a><!-- doxytag: member="Mac80211::MacPktList" ref="a565ab82077f95d80ec44a4a4fed08ab9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::list&lt;<a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a>*&gt; <a class="el" href="class_mac80211.html#a565ab82077f95d80ec44a4a4fed08ab9">Mac80211::MacPktList</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00042">42</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

</div>
</div>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a7ff0b8b49d1a93feae6f808caf5fe447"></a><!-- doxytag: member="Mac80211::State" ref="a7ff0b8b49d1a93feae6f808caf5fe447" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447">Mac80211::State</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Definition of the states </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a7ff0b8b49d1a93feae6f808caf5fe447abe0abc1112335ff66c1eef6bd95371e4"></a><!-- doxytag: member="WFDATA" ref="a7ff0b8b49d1a93feae6f808caf5fe447abe0abc1112335ff66c1eef6bd95371e4" args="" -->WFDATA</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7ff0b8b49d1a93feae6f808caf5fe447a4cfe7a25808b0e110d662483abec7256"></a><!-- doxytag: member="QUIET" ref="a7ff0b8b49d1a93feae6f808caf5fe447a4cfe7a25808b0e110d662483abec7256" args="" -->QUIET</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7ff0b8b49d1a93feae6f808caf5fe447a8904ce43407ca530f7fe83d63c558e28"></a><!-- doxytag: member="IDLE" ref="a7ff0b8b49d1a93feae6f808caf5fe447a8904ce43407ca530f7fe83d63c558e28" args="" -->IDLE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7ff0b8b49d1a93feae6f808caf5fe447ae138f38743ca77f1300a24d4d79786fe"></a><!-- doxytag: member="CONTEND" ref="a7ff0b8b49d1a93feae6f808caf5fe447ae138f38743ca77f1300a24d4d79786fe" args="" -->CONTEND</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7ff0b8b49d1a93feae6f808caf5fe447accc67a0993941984c4f6b49c633c2ad8"></a><!-- doxytag: member="WFCTS" ref="a7ff0b8b49d1a93feae6f808caf5fe447accc67a0993941984c4f6b49c633c2ad8" args="" -->WFCTS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7ff0b8b49d1a93feae6f808caf5fe447a50a717bfadf9a3fdd634d77950607278"></a><!-- doxytag: member="WFACK" ref="a7ff0b8b49d1a93feae6f808caf5fe447a50a717bfadf9a3fdd634d77950607278" args="" -->WFACK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7ff0b8b49d1a93feae6f808caf5fe447aa1070f3c837e8dc4d7890536f7cfbaf9"></a><!-- doxytag: member="BUSY" ref="a7ff0b8b49d1a93feae6f808caf5fe447aa1070f3c837e8dc4d7890536f7cfbaf9" args="" -->BUSY</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00054">54</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>
<div class="fragment"><pre class="fragment">               {
      <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447abe0abc1112335ff66c1eef6bd95371e4">WFDATA</a> = 0, <span class="comment">// waiting for data packet</span>
      <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a4cfe7a25808b0e110d662483abec7256">QUIET</a> = 1,  <span class="comment">// waiting for the communication between two other nodes to end</span>
      <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a8904ce43407ca530f7fe83d63c558e28">IDLE</a> = 2,   <span class="comment">// no packet to send, no packet receiving</span>
      <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447ae138f38743ca77f1300a24d4d79786fe">CONTEND</a> = 3,<span class="comment">// contention state (battle for the channel)</span>
      <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447accc67a0993941984c4f6b49c633c2ad8">WFCTS</a> = 4,  <span class="comment">// RTS sent, waiting for CTS</span>
      <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a50a717bfadf9a3fdd634d77950607278">WFACK</a> = 5,  <span class="comment">// DATA packet sent, waiting for ACK</span>
      <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447aa1070f3c837e8dc4d7890536f7cfbaf9">BUSY</a> = 6    <span class="comment">// during transmission of an ACK or a BROADCAST packet</span>
    };
</pre></div>
</div>
</div>
<a class="anchor" id="a381307739876ed0d015352b95bd93186"></a><!-- doxytag: member="Mac80211::timerType" ref="a381307739876ed0d015352b95bd93186" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_mac80211.html#a381307739876ed0d015352b95bd93186">Mac80211::timerType</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Definition of the timer types </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a381307739876ed0d015352b95bd93186a317269d758fc1f055750d43926abbb2f"></a><!-- doxytag: member="TIMEOUT" ref="a381307739876ed0d015352b95bd93186a317269d758fc1f055750d43926abbb2f" args="" -->TIMEOUT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a381307739876ed0d015352b95bd93186ad2d7f908db1dc3ed72e451dad336d654"></a><!-- doxytag: member="NAV" ref="a381307739876ed0d015352b95bd93186ad2d7f908db1dc3ed72e451dad336d654" args="" -->NAV</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a381307739876ed0d015352b95bd93186ab091712e64b8b82a904b5819b44c0ce2"></a><!-- doxytag: member="CONTENTION" ref="a381307739876ed0d015352b95bd93186ab091712e64b8b82a904b5819b44c0ce2" args="" -->CONTENTION</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a381307739876ed0d015352b95bd93186a6aa35f51fc3714f21930242d9a802471"></a><!-- doxytag: member="END_TRANSMISSION" ref="a381307739876ed0d015352b95bd93186a6aa35f51fc3714f21930242d9a802471" args="" -->END_TRANSMISSION</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a381307739876ed0d015352b95bd93186ae116234508b0af14c6e33ff5627eef0a"></a><!-- doxytag: member="END_SIFS" ref="a381307739876ed0d015352b95bd93186ae116234508b0af14c6e33ff5627eef0a" args="" -->END_SIFS</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00045">45</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>
<div class="fragment"><pre class="fragment">                   {
      <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186a317269d758fc1f055750d43926abbb2f">TIMEOUT</a>,
      <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ad2d7f908db1dc3ed72e451dad336d654">NAV</a>,
      <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ab091712e64b8b82a904b5819b44c0ce2">CONTENTION</a>,
      <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186a6aa35f51fc3714f21930242d9a802471">END_TRANSMISSION</a>,
      <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ae116234508b0af14c6e33ff5627eef0a">END_SIFS</a>
    };
</pre></div>
</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8b1273f60ad9725e9d657c729740899a"></a><!-- doxytag: member="Mac80211::Mac80211" ref="a8b1273f60ad9725e9d657c729740899a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_mac80211.html#a8b1273f60ad9725e9d657c729740899a">Mac80211::Mac80211</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00031">31</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_mac80211.html#a2d31f97b0662b8e37f090c3b996cec82" title="Timer used for time-outs after the transmission of a RTS, a CTS, or a DATA packet.">timeout</a> = <a class="code" href="class_mac80211.html#a35efb0198d0085a341aba515bec9146f" title="Timer used for the defer time of a node. Also called NAV : networks allocation vector.">nav</a> = <a class="code" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4" title="Timer used for contention periods.">contention</a> = <a class="code" href="class_mac80211.html#abe4522bcfe2b0a6d4275fe2be9226142" title="Timer used to indicate the end of the transmission of an ACK or a BROADCAST packet.">endTransmission</a> = <a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a> = NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7b58cb4d498feea3ea287b72de4b7313"></a><!-- doxytag: member="Mac80211::~Mac80211" ref="a7b58cb4d498feea3ea287b72de4b7313" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_mac80211.html#a7b58cb4d498feea3ea287b72de4b7313">Mac80211::~Mac80211</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00036">36</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    cancelAndDelete(<a class="code" href="class_mac80211.html#a2d31f97b0662b8e37f090c3b996cec82" title="Timer used for time-outs after the transmission of a RTS, a CTS, or a DATA packet.">timeout</a>);
    cancelAndDelete(<a class="code" href="class_mac80211.html#a35efb0198d0085a341aba515bec9146f" title="Timer used for the defer time of a node. Also called NAV : networks allocation vector.">nav</a>);
    cancelAndDelete(<a class="code" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4" title="Timer used for contention periods.">contention</a>);
    cancelAndDelete(<a class="code" href="class_mac80211.html#abe4522bcfe2b0a6d4275fe2be9226142" title="Timer used to indicate the end of the transmission of an ACK or a BROADCAST packet.">endTransmission</a>);
    cancelAndDelete(<a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a>);
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ab3030c86acac78401f877a61cefcdad6"></a><!-- doxytag: member="Mac80211::beginNewCycle" ref="ab3030c86acac78401f877a61cefcdad6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#ab3030c86acac78401f877a61cefcdad6">Mac80211::beginNewCycle</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>start a new contention period </p>
<p>Start a new contention period if the channel is free and if there's a packet to send. Called at the end of a deferring period, a busy period, or after a failure. Called by the HandleMsgForMe(), HandleTimer() HandleUpperMsg(), and, without RTS/CTS, by <a class="el" href="class_mac80211.html#a50acb267ae4092cea8399a10d10aab37" title="handle a message that is not for me or errornous">handleMsgNotForMe()</a>. </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00799">799</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00449">handleACKframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00488">handleBroadcastMsg()</a>, <a class="el" href="_mac80211_8cc_source.html#l00604">handleEndTransmissionTimer()</a>, <a class="el" href="_mac80211_8cc_source.html#l00208">handleLowerMsg()</a>, <a class="el" href="_mac80211_8cc_source.html#l00285">handleMsgNotForMe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00548">handleNavTimer()</a>, <a class="el" href="_mac80211_8cc_source.html#l00561">handleTimeoutTimer()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00142">handleUpperMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;beginning new contention cycle\n&quot;</span>;

    <span class="comment">// before trying to send one more time a packet, test if the</span>
    <span class="comment">// maximum retry limit is reached. If it is the case, then</span>
    <span class="comment">// delete the packet and send the next packet.</span>
    <a class="code" href="class_mac80211.html#a72e78257babff863ca8749b2bb1a97f4" title="Test if maximum number of retries to transmit is exceeded.">testMaxAttempts</a>();

    <span class="keywordflow">if</span> (!<a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.empty())
    {

        <span class="comment">// look if the next packet is unicast or broadcast</span>
        <a class="code" href="class_mac80211.html#a5d8e9b53c8d6cb0116feed506d843e18" title="Boolean used to know if the next packet is a broadcast packet.">nextIsBroadcast</a> = (((<a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *) <a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.front())-&gt;getDestAddr().isBroadcast());

        <span class="comment">// print(&quot;next is broadcast = &quot;&lt;&lt;nextIsBroadcast);</span>

        <span class="comment">// if the channel is free then wait a random time and transmit</span>
        <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a1c357b92c014552612da4d21f2d1387b" title="Current state of the radio (kept updated by receiveChangeNotification())">radioState</a> == <a class="code" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449aeb600ab2fbbbbc2d12d874edb9320ec0">RadioState::IDLE</a>)
        {
            <span class="comment">// if channel is idle AND I was not the last one that transmitted</span>
            <span class="comment">// data: no backoff</span>
            <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#aa04ef4245cd9721019b4e0b2d3164ec2" title="If there&#39;s a new packet to send and the channel is free, no backoff is needed.">tryWithoutBackoff</a>)
            {
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;trying to send without backoff...\n&quot;</span>;
                scheduleAt(simTime() + <a class="code" href="_ieee80211_consts_8h.html#a48db305f0a645cc92737c0384b248cde">DIFS</a>, <a class="code" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4" title="Timer used for contention periods.">contention</a>);
            }
            <span class="keywordflow">else</span>
            {
                <span class="comment">// backoff!</span>
                scheduleAt(simTime() + <a class="code" href="class_mac80211.html#a897651c7f7dd8d9ed2f583db0e4550e5" title="Compute a backoff value.">computeBackoff</a>() + <a class="code" href="_ieee80211_consts_8h.html#a48db305f0a645cc92737c0384b248cde">DIFS</a>, <a class="code" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4" title="Timer used for contention periods.">contention</a>);
            }
        }
        <a class="code" href="class_mac80211.html#aa04ef4245cd9721019b4e0b2d3164ec2" title="If there&#39;s a new packet to send and the channel is free, no backoff is needed.">tryWithoutBackoff</a> = <span class="keyword">false</span>;

        <span class="comment">// else wait until the channel gets free; the state is now contend</span>
        <a class="code" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713" title="Sets the state, and produces a log message in between.">setState</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447ae138f38743ca77f1300a24d4d79786fe">CONTEND</a>);
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_mac80211.html#aa04ef4245cd9721019b4e0b2d3164ec2" title="If there&#39;s a new packet to send and the channel is free, no backoff is needed.">tryWithoutBackoff</a> = <span class="keyword">false</span>;
        <a class="code" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713" title="Sets the state, and produces a log message in between.">setState</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a8904ce43407ca530f7fe83d63c558e28">IDLE</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1103d3632c895143607133688783042f"></a><!-- doxytag: member="Mac80211::buildACKframe" ref="a1103d3632c895143607133688783042f" args="(Mac80211Pkt *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> * <a class="el" href="class_mac80211.html#a1103d3632c895143607133688783042f">Mac80211::buildACKframe</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td>
          <td class="paramname"><em>af</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>build an ACK </p>
<p>Build an ACK frame. Called by <a class="el" href="class_mac80211.html#a1c404a5176db493c2fefb71537783607" title="send Acknoledgement">sendACKframe()</a> </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00727">727</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00641">sendACKframe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *frame = <span class="keyword">new</span> <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a>(<span class="stringliteral">&quot;wlan-ack&quot;</span>);
    frame-&gt;setKind(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea41246e9c8691b7e33bc79b345e06b48e">ACK</a>);
    frame-&gt;setBitLength(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>);

    <span class="comment">// the dest address must be the src adress of the RTS or the DATA</span>
    <span class="comment">// packet received. The src adress is the adress of the node</span>
    frame-&gt;<a class="code" href="class_mac_pkt.html#af35fb96b69c16b94fd7b6c592a8e3405">setSrcAddr</a>(<a class="code" href="class_mac80211.html#a575be19d3e428551aa4e3ecfb48fcf49" title="mac address">myMacAddr</a>);
    frame-&gt;<a class="code" href="class_mac_pkt.html#a0d1850f2ddce0f706f381127009e3802">setDestAddr</a>(af-&gt;<a class="code" href="class_mac_pkt.html#a9e164ec2891b32433e33b052c5c1babc">getSrcAddr</a>());
    frame-&gt;<a class="code" href="class_mac80211_pkt.html#aabdb5fec5f203e9ba50a01d14cd7b023">setDuration</a>(0);

    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa6aae4c20516ad33fb889336d27e8dab"></a><!-- doxytag: member="Mac80211::buildBROADCASTframe" ref="aa6aae4c20516ad33fb889336d27e8dab" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> * <a class="el" href="class_mac80211.html#aa6aae4c20516ad33fb889336d27e8dab">Mac80211::buildBROADCASTframe</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>build a broadcast frame </p>
<p>Build a BROADCAST frame. Called <a class="el" href="class_mac80211.html#a26b30d048980b56d79c04e859bfce009" title="send broadcast frame">sendBROADCASTframe()</a> </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00783">783</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00693">sendBROADCASTframe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// send a copy of the frame in front of the queue</span>
    <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *frame = (<a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *) (<a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.front())-&gt;dup();
    frame-&gt;setKind(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea78386e426adecb3fd26350119a3cb7c2">BROADCAST</a>);
    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4ad0c06b8940a8fc5463d29d8fda423d"></a><!-- doxytag: member="Mac80211::buildCTSframe" ref="a4ad0c06b8940a8fc5463d29d8fda423d" args="(Mac80211Pkt *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> * <a class="el" href="class_mac80211.html#a4ad0c06b8940a8fc5463d29d8fda423d">Mac80211::buildCTSframe</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td>
          <td class="paramname"><em>af</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>build a CTS frame </p>
<p>Build a CTS frame. Called by <a class="el" href="class_mac80211.html#a1fd59a589e53facb68c13be84521a49e" title="send CTS frame">sendCTSframe()</a> </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00765">765</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00678">sendCTSframe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *frame = <span class="keyword">new</span> <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a>(<span class="stringliteral">&quot;wlan-cts&quot;</span>);
    frame-&gt;setKind(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea97dc7d7bbe8a217f4bc934b4a868c521">CTS</a>);
    frame-&gt;setBitLength(<a class="code" href="_ieee80211_consts_8h.html#a615c2db16153273956d34e0a7b4a46cf">LENGTH_CTS</a>);

    <span class="comment">// the dest adress must be the src adress of the RTS received. The</span>
    <span class="comment">// src adress is the adress of the node</span>
    frame-&gt;<a class="code" href="class_mac_pkt.html#af35fb96b69c16b94fd7b6c592a8e3405">setSrcAddr</a>(<a class="code" href="class_mac80211.html#a575be19d3e428551aa4e3ecfb48fcf49" title="mac address">myMacAddr</a>);
    frame-&gt;<a class="code" href="class_mac_pkt.html#a0d1850f2ddce0f706f381127009e3802">setDestAddr</a>(af-&gt;<a class="code" href="class_mac_pkt.html#a9e164ec2891b32433e33b052c5c1babc">getSrcAddr</a>());
    frame-&gt;<a class="code" href="class_mac80211_pkt.html#aabdb5fec5f203e9ba50a01d14cd7b023">setDuration</a>(af-&gt;<a class="code" href="class_mac80211_pkt.html#a09e39966710115add8cdc1b774313570">getDuration</a>() - <a class="code" href="_ieee80211_consts_8h.html#a302795c4c8b76861bfc0ca2ec2c7d171">SIFS</a> - <a class="code" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a" title="computes the duration of a transmission over the physical channel">computePacketDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a615c2db16153273956d34e0a7b4a46cf">LENGTH_CTS</a>));

    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7945493d4537fd28f78d4b2daca8ff57"></a><!-- doxytag: member="Mac80211::buildDATAframe" ref="a7945493d4537fd28f78d4b2daca8ff57" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> * <a class="el" href="class_mac80211.html#a7945493d4537fd28f78d4b2daca8ff57">Mac80211::buildDATAframe</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>build a data frame </p>
<p>Build a DATA frame. Called by <a class="el" href="class_mac80211.html#a0bc84e36d3aaf65af29a5aded9d0ef50" title="send data frame">sendDATAframe()</a> </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00709">709</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00619">sendDATAframe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// build a copy of the frame in front of the queue</span>
    <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *frame = (<a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *) (<a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.front())-&gt;dup();
    frame-&gt;<a class="code" href="class_mac_pkt.html#af35fb96b69c16b94fd7b6c592a8e3405">setSrcAddr</a>(<a class="code" href="class_mac80211.html#a575be19d3e428551aa4e3ecfb48fcf49" title="mac address">myMacAddr</a>);
    frame-&gt;setKind(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea9d7d6f31868d66330397c967c4afd2d2">DATA</a>);
    <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#ad0d07dd20d64f623bba85ab34a708d34" title="true if Rts/Cts is used, false if not; can be set in omnetpp.ini">rtsCts</a>)
        frame-&gt;<a class="code" href="class_mac80211_pkt.html#aabdb5fec5f203e9ba50a01d14cd7b023">setDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a302795c4c8b76861bfc0ca2ec2c7d171">SIFS</a> + <a class="code" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a" title="computes the duration of a transmission over the physical channel">computePacketDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>));
    <span class="keywordflow">else</span>
        frame-&gt;<a class="code" href="class_mac80211_pkt.html#aabdb5fec5f203e9ba50a01d14cd7b023">setDuration</a>(0);

    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a94fc835cfeeacad4375aa46f0facb915"></a><!-- doxytag: member="Mac80211::buildRTSframe" ref="a94fc835cfeeacad4375aa46f0facb915" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> * <a class="el" href="class_mac80211.html#a94fc835cfeeacad4375aa46f0facb915">Mac80211::buildRTSframe</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>build an RTS frame </p>
<p>Build a RTS frame. Called by <a class="el" href="class_mac80211.html#a3104750758ab171b20ffcfeae0079a78" title="send RTS frame">sendRTSframe()</a> </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00746">746</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00659">sendRTSframe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *frame = <span class="keyword">new</span> <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a>(<span class="stringliteral">&quot;wlan-rts&quot;</span>);
    frame-&gt;setKind(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250eae58caa68ff8b6e4838007985c7e3ae66">RTS</a>);
    frame-&gt;setBitLength(<a class="code" href="_ieee80211_consts_8h.html#a994032d4c974294f5a24e0e3160d90f4">LENGTH_RTS</a>);

    <span class="comment">// the src adress and dest address are copied in the frame in the queue (frame to be sent)</span>
    frame-&gt;<a class="code" href="class_mac_pkt.html#af35fb96b69c16b94fd7b6c592a8e3405">setSrcAddr</a>(((<a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *) <a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.front())-&gt;getSrcAddr());
    frame-&gt;<a class="code" href="class_mac_pkt.html#a0d1850f2ddce0f706f381127009e3802">setDestAddr</a>(((<a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *) <a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.front())-&gt;getDestAddr());
    frame-&gt;<a class="code" href="class_mac80211_pkt.html#aabdb5fec5f203e9ba50a01d14cd7b023">setDuration</a>(3 * <a class="code" href="_ieee80211_consts_8h.html#a302795c4c8b76861bfc0ca2ec2c7d171">SIFS</a> + <a class="code" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a" title="computes the duration of a transmission over the physical channel">computePacketDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a615c2db16153273956d34e0a7b4a46cf">LENGTH_CTS</a>) +
                       <a class="code" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a" title="computes the duration of a transmission over the physical channel">computePacketDuration</a>(<a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.front()-&gt;getBitLength()) +
                       <a class="code" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a" title="computes the duration of a transmission over the physical channel">computePacketDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>));

    <span class="keywordflow">return</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a897651c7f7dd8d9ed2f583db0e4550e5"></a><!-- doxytag: member="Mac80211::computeBackoff" ref="a897651c7f7dd8d9ed2f583db0e4550e5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_mac80211.html#a897651c7f7dd8d9ed2f583db0e4550e5">Mac80211::computeBackoff</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute a backoff value. </p>
<p>Compute the backoff value. </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00847">847</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00799">beginNewCycle()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00285">handleMsgNotForMe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// the MAC has won the previous contention. We have to compute a new</span>
    <span class="comment">// backoff window</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a8aa2e915f41c451a2c83de8aab09594c" title="Variable to store the current backoff value.">BW</a> == 0) {
        <span class="keywordtype">int</span> CW = <a class="code" href="class_mac80211.html#a2eaddea39a3799f7c2de9e62cef339cd" title="Compute a new contention window.">computeContentionWindow</a>();
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;generating backoff for CW: &quot;</span> &lt;&lt; CW &lt;&lt; endl;
        <a class="code" href="class_mac80211.html#a8aa2e915f41c451a2c83de8aab09594c" title="Variable to store the current backoff value.">BW</a> = intrand(CW + 1) * <a class="code" href="_ieee80211_consts_8h.html#ac168f3508b776571f17ccfaba704dd2c">ST</a>;
    }
    <span class="comment">// CW is the contention window (see the function). ST is the</span>
    <span class="comment">// slot time.  else we take the old value of BW, in order to give a</span>
    <span class="comment">// bigger priority to a node which has lost a previous contention</span>
    <span class="comment">// period.</span>
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;backing off for: &quot;</span> &lt;&lt; <a class="code" href="class_mac80211.html#a8aa2e915f41c451a2c83de8aab09594c" title="Variable to store the current backoff value.">BW</a> + <a class="code" href="_ieee80211_consts_8h.html#a48db305f0a645cc92737c0384b248cde">DIFS</a> &lt;&lt; endl;
    <span class="keywordflow">return</span> <a class="code" href="class_mac80211.html#a8aa2e915f41c451a2c83de8aab09594c" title="Variable to store the current backoff value.">BW</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2eaddea39a3799f7c2de9e62cef339cd"></a><!-- doxytag: member="Mac80211::computeContentionWindow" ref="a2eaddea39a3799f7c2de9e62cef339cd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_mac80211.html#a2eaddea39a3799f7c2de9e62cef339cd">Mac80211::computeContentionWindow</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute a new contention window. </p>
<p>Compute the contention window with the binary backoff algorithm. Use the variable counter (attempts to transmit packet), the constant values CWmax (contention window maximum) and m (parameter for the initial backoff window, usally m=7). Called by <a class="el" href="class_mac80211.html#a897651c7f7dd8d9ed2f583db0e4550e5" title="Compute a backoff value.">computeBackoff()</a> </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00871">871</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00847">computeBackoff()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// the next packet is an unicast packet</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_mac80211.html#a5d8e9b53c8d6cb0116feed506d843e18" title="Boolean used to know if the next packet is a broadcast packet.">nextIsBroadcast</a>)
    {
        <span class="keywordtype">int</span> cw = (<a class="code" href="_ieee80211_consts_8h.html#a104d9aa9c5a73eeecc9799c60b238289">CW_MIN</a> + 1) * (1 &lt;&lt; (<a class="code" href="class_mac80211.html#a2e6f9111bcd385f606abf94da7e8b44e" title="Number of frame transmission attempt.">retryCounter</a> - 1)) - 1;
        <span class="comment">// return the calculated value or CWmax if the maximal value is reached</span>
        <span class="keywordflow">if</span> (cw &lt;= <a class="code" href="_ieee80211_consts_8h.html#a785c5f49538e2a36c5d3b31253740014">CW_MAX</a>)
            <span class="keywordflow">return</span> cw;
        <span class="keywordflow">else</span>
            <span class="keywordflow">return</span> <a class="code" href="_ieee80211_consts_8h.html#a785c5f49538e2a36c5d3b31253740014">CW_MAX</a>;
    }

    <span class="comment">// the next packet is broadcast : the contention window must be maximal</span>
    <span class="keywordflow">else</span>
        <span class="keywordflow">return</span> <a class="code" href="class_mac80211.html#afa01e3d776f586cab65b6cf45eac59d9" title="Should be set in the omnetpp.ini.">broadcastBackoff</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0ddb885ea2fc455ad3076a9b9327147a"></a><!-- doxytag: member="Mac80211::computePacketDuration" ref="a0ddb885ea2fc455ad3076a9b9327147a" args="(int bits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a">Mac80211::computePacketDuration</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bits</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>computes the duration of a transmission over the physical channel </p>
<p>Computes the duration of the transmission of a frame over the physical channel. 'bits' should be the total length of the MAC packet in bits. </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l01001">1001</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00765">buildCTSframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00709">buildDATAframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00746">buildRTSframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00972">computeTimeout()</a>, <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>, <a class="el" href="_mac80211_8cc_source.html#l00641">sendACKframe()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00693">sendBROADCASTframe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> bits / <a class="code" href="class_mac80211.html#a126c9db5a54bafa6ad74eb3ee24bd936" title="The bitrate should be set in omnetpp.ini; be sure to use a valid 802.11 bitrate.">bitrate</a> + <a class="code" href="_ieee80211_consts_8h.html#a0ecba1599d2ee7a3f33cf1970abdb90a">PHY_HEADER_LENGTH</a> / <a class="code" href="_ieee80211_consts_8h.html#a0454abde1a622bc79c2528d728e466ef">BITRATE_HEADER</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a106323e58027710125c0963c5cda3a88"></a><!-- doxytag: member="Mac80211::computeTimeout" ref="a106323e58027710125c0963c5cda3a88" args="(_802_11frameType type, simtime_t last_frame_duration)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_mac80211.html#a106323e58027710125c0963c5cda3a88">Mac80211::computeTimeout</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250e">_802_11frameType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&#160;</td>
          <td class="paramname"><em>last_frame_duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return a timeOut value for a certain type of frame </p>
<p>Return a time-out value for a type of frame. Called by SendRTSframe, sendCTSframe, etc. </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00972">972</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00678">sendCTSframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00619">sendDATAframe()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00659">sendRTSframe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    simtime_t time_out = 0;
    <span class="keywordflow">switch</span> (type)
    {
    <span class="keywordflow">case</span> <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250eae58caa68ff8b6e4838007985c7e3ae66">RTS</a>:
        time_out = <a class="code" href="_ieee80211_consts_8h.html#a302795c4c8b76861bfc0ca2ec2c7d171">SIFS</a> + <a class="code" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a" title="computes the duration of a transmission over the physical channel">computePacketDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a994032d4c974294f5a24e0e3160d90f4">LENGTH_RTS</a>) + <a class="code" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a" title="computes the duration of a transmission over the physical channel">computePacketDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a615c2db16153273956d34e0a7b4a46cf">LENGTH_CTS</a>) + <a class="code" href="class_mac80211.html#ab9f0ea820748af6d640569fc76f39659" title="Very small value used in timer scheduling in order to avoid multiple changements of state in the same...">delta</a>;
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea97dc7d7bbe8a217f4bc934b4a868c521">CTS</a>:
        time_out = last_frame_duration - <a class="code" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a" title="computes the duration of a transmission over the physical channel">computePacketDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>) - 2 * <a class="code" href="_ieee80211_consts_8h.html#a302795c4c8b76861bfc0ca2ec2c7d171">SIFS</a> + <a class="code" href="class_mac80211.html#ab9f0ea820748af6d640569fc76f39659" title="Very small value used in timer scheduling in order to avoid multiple changements of state in the same...">delta</a>;
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea9d7d6f31868d66330397c967c4afd2d2">DATA</a>:
        time_out =
            <a class="code" href="_ieee80211_consts_8h.html#a302795c4c8b76861bfc0ca2ec2c7d171">SIFS</a> + <a class="code" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a" title="computes the duration of a transmission over the physical channel">computePacketDuration</a>(<a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.front()-&gt;getBitLength()) + <a class="code" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a" title="computes the duration of a transmission over the physical channel">computePacketDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>) +
            delta + 0.1;
        <span class="comment">//XXX: I have added some time here, because propagation delay of AirFrames caused problems</span>
        <span class="comment">// the timeout periods should be carefully revised with special care for the deltas?! --Levy</span>
        <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Unused frame type was given when calling computeTimeout(), this should not happen!\n&quot;</span>;
    }
    <span class="keywordflow">return</span> time_out;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5c369fe6fc9f0d0b491d242810714b2c"></a><!-- doxytag: member="Mac80211::decapsulateAndSendUp" ref="a5c369fe6fc9f0d0b491d242810714b2c" args="(Mac80211Pkt *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a5c369fe6fc9f0d0b491d242810714b2c">Mac80211::decapsulateAndSendUp</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>decapsulate packet and send to higher layer </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00194">194</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00488">handleBroadcastMsg()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00428">handleDATAframe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    cPacket *msg = frame-&gt;decapsulate();
    <span class="comment">// FIXME TBD set control info</span>
    <span class="keyword">delete</span> frame;
    <a class="code" href="class_wireless_mac_base.html#a5454ec5040663e5af4ddb00f525a3caf" title="Sends a message to the upper layer.">sendUp</a>(msg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a008b57947b7d9287bb34b1e67094ebb8"></a><!-- doxytag: member="Mac80211::encapsMsg" ref="a008b57947b7d9287bb34b1e67094ebb8" args="(cPacket *netw)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> * <a class="el" href="class_mac80211.html#a008b57947b7d9287bb34b1e67094ebb8">Mac80211::encapsMsg</a> </td>
          <td>(</td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>netw</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>encapsulate packet </p>
<p>Encapsulates the received network-layer packet into a <a class="el" href="class_mac_pkt.html">MacPkt</a> and set all needed header fields. </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00175">175</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00142">handleUpperMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *pkt = <span class="keyword">new</span> <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a>(netw-&gt;getName());
    pkt-&gt;setBitLength(272);        <span class="comment">// headerLength, including final CRC-field</span>

    <span class="comment">// copy dest address from the control info</span>
    <a class="code" href="class_ieee802_ctrl.html">Ieee802Ctrl</a> *ctrl = check_and_cast&lt;<a class="code" href="class_ieee802_ctrl.html">Ieee802Ctrl</a> *&gt;(netw-&gt;removeControlInfo());
    pkt-&gt;<a class="code" href="class_mac_pkt.html#a0d1850f2ddce0f706f381127009e3802">setDestAddr</a>(ctrl-&gt;<a class="code" href="class_ieee802_ctrl.html#a44abf8e022b465968d9d0aa6bd08d626">getDest</a>());
    <span class="keyword">delete</span> ctrl;

    <span class="comment">// set the src address to own mac address (nic module getId())</span>
    pkt-&gt;<a class="code" href="class_mac_pkt.html#af35fb96b69c16b94fd7b6c592a8e3405">setSrcAddr</a>(<a class="code" href="class_mac80211.html#a575be19d3e428551aa4e3ecfb48fcf49" title="mac address">myMacAddr</a>);

    <span class="comment">// encapsulate the network packet</span>
    pkt-&gt;encapsulate(netw);

    <span class="keywordflow">return</span> pkt;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a50cb85360462eb7d256ec8a0b493ca44"></a><!-- doxytag: member="Mac80211::handleACKframe" ref="a50cb85360462eb7d256ec8a0b493ca44" args="(Mac80211Pkt *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a50cb85360462eb7d256ec8a0b493ca44">Mac80211::handleACKframe</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td>
          <td class="paramname"><em>af</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handle a frame which is expected to be an ACK.Called by HandleMsgForMe(MAcawFrame* af) </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00449">449</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00351">handleMsgForMe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;handling Ack frame\n&quot;</span>;

    <span class="comment">// cancel time-out event</span>
    cancelEvent(<a class="code" href="class_mac80211.html#a2d31f97b0662b8e37f090c3b996cec82" title="Timer used for time-outs after the transmission of a RTS, a CTS, or a DATA packet.">timeout</a>);

    <span class="comment">// the transmission is acknowledged : initialize long_retry_counter</span>
    <a class="code" href="class_mac80211.html#a2e6f9111bcd385f606abf94da7e8b44e" title="Number of frame transmission attempt.">retryCounter</a> = 1;

    <span class="comment">// removes the acknowledged packet from the queue</span>
    <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *temp = <a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.front();
    <a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.pop_front();
    <span class="keyword">delete</span> temp;

    <span class="comment">// if thre&#39;s a packet to send and if the channel is free then start a new contention period</span>
    <a class="code" href="class_mac80211.html#ab3030c86acac78401f877a61cefcdad6" title="start a new contention period">beginNewCycle</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="adfcf8b7a5e1db233a1bd717cecaf49bd"></a><!-- doxytag: member="Mac80211::handleBroadcastMsg" ref="adfcf8b7a5e1db233a1bd717cecaf49bd" args="(Mac80211Pkt *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#adfcf8b7a5e1db233a1bd717cecaf49bd">Mac80211::handleBroadcastMsg</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td>
          <td class="paramname"><em>af</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handle a broadcast packet. This packet is simply passed to the upper layer. No acknowledgement is needed. Called by handleLowerMsg(Mac80211Pkt *af) </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00488">488</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00208">handleLowerMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;handle broadcast\n&quot;</span>;
    <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a> == <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447aa1070f3c837e8dc4d7890536f7cfbaf9">BUSY</a>)
        error(<span class="stringliteral">&quot;logic error: node is currently transmitting, can not receive &quot;</span>
              <span class="stringliteral">&quot;(does the physical layer do its job correctly?)&quot;</span>);

    <a class="code" href="class_mac80211.html#a5c369fe6fc9f0d0b491d242810714b2c" title="decapsulate packet and send to higher layer">decapsulateAndSendUp</a>(af);
    <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a> == <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447ae138f38743ca77f1300a24d4d79786fe">CONTEND</a>)
        <a class="code" href="class_mac80211.html#ab3030c86acac78401f877a61cefcdad6" title="start a new contention period">beginNewCycle</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa2fe838bd226e9efb04477d87d3fbfab"></a><!-- doxytag: member="Mac80211::handleCommand" ref="aa2fe838bd226e9efb04477d87d3fbfab" args="(cMessage *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#aa2fe838bd226e9efb04477d87d3fbfab">Mac80211::handleCommand</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle commands from upper layer. </p>

<p>Implements <a class="el" href="class_wireless_mac_base.html#a2a5fd20a6064b4754954638bc93f8d8d">WirelessMacBase</a>.</p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00132">132</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// no commands supported by Mac80211</span>
    error(<span class="stringliteral">&quot;Non-packet message arrived from higher layer: (%s)%s&quot;</span>, msg-&gt;getClassName(), msg-&gt;getName());
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae1e17af7dddc261d7947d48a1f4d0e21"></a><!-- doxytag: member="Mac80211::handleCTSframe" ref="ae1e17af7dddc261d7947d48a1f4d0e21" args="(Mac80211Pkt *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#ae1e17af7dddc261d7947d48a1f4d0e21">Mac80211::handleCTSframe</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td>
          <td class="paramname"><em>af</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handle a CTS frame. Called by HandleMsgForMe(Mac80211Pkt* af) </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00472">472</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00351">handleMsgForMe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// cancel time-out event</span>
    cancelEvent(<a class="code" href="class_mac80211.html#a2d31f97b0662b8e37f090c3b996cec82" title="Timer used for time-outs after the transmission of a RTS, a CTS, or a DATA packet.">timeout</a>);

    <span class="comment">// wait a short interframe space</span>
    <a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a>-&gt;setContextPointer(af);
    scheduleAt(simTime() + <a class="code" href="_ieee80211_consts_8h.html#a302795c4c8b76861bfc0ca2ec2c7d171">SIFS</a>, <a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab0844f9dbcece750c9a58ca9f0a73fe1"></a><!-- doxytag: member="Mac80211::handleDATAframe" ref="ab0844f9dbcece750c9a58ca9f0a73fe1" args="(Mac80211Pkt *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#ab0844f9dbcece750c9a58ca9f0a73fe1">Mac80211::handleDATAframe</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td>
          <td class="paramname"><em>af</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handle a frame which expected to be a DATA frame. Called by HandleMsgForMe() </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00428">428</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00351">handleMsgForMe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#ad0d07dd20d64f623bba85ab34a708d34" title="true if Rts/Cts is used, false if not; can be set in omnetpp.ini">rtsCts</a>)
        cancelEvent(<a class="code" href="class_mac80211.html#a2d31f97b0662b8e37f090c3b996cec82" title="Timer used for time-outs after the transmission of a RTS, a CTS, or a DATA packet.">timeout</a>);  <span class="comment">// cancel time-out event</span>

    <span class="comment">// make a copy</span>
    <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *copy = (<a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *) af-&gt;<a class="code" href="class_mac80211_pkt.html#a776e1a1cbb1ffe3ab3de3021c98dcf73">dup</a>();

    <span class="comment">// pass the packet to the upper layer</span>
    <a class="code" href="class_mac80211.html#a5c369fe6fc9f0d0b491d242810714b2c" title="decapsulate packet and send to higher layer">decapsulateAndSendUp</a>(af);

    <span class="comment">// wait a short interframe space</span>
    <a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a>-&gt;setContextPointer(copy);
    scheduleAt(simTime() + <a class="code" href="_ieee80211_consts_8h.html#a302795c4c8b76861bfc0ca2ec2c7d171">SIFS</a>, <a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0a87fa1791117ef1dd1841ba217e4245"></a><!-- doxytag: member="Mac80211::handleEndContentionTimer" ref="a0a87fa1791117ef1dd1841ba217e4245" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a0a87fa1791117ef1dd1841ba217e4245">Mac80211::handleEndContentionTimer</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>handle end of contention </p>
<p>The node has won the contention, and is now allowed to send an RTS/DATA or Broadcast packet. The backoff value is deleted and will be newly computed in the next contention period </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00506">506</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00242">handleSelfMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;end contention period\n&quot;</span>;

    <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a> != <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447ae138f38743ca77f1300a24d4d79786fe">CONTEND</a>)
        error(<span class="stringliteral">&quot;logic error: expiration of the contention timer outside of CONTEND state, should not happen&quot;</span>);

    <span class="comment">// the node has won the channel, the backoff window is deleted and</span>
    <span class="comment">// will be new calculated in the next contention period</span>
    <a class="code" href="class_mac80211.html#a8aa2e915f41c451a2c83de8aab09594c" title="Variable to store the current backoff value.">BW</a> = 0;
    <span class="comment">// unicast packet</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_mac80211.html#a5d8e9b53c8d6cb0116feed506d843e18" title="Boolean used to know if the next packet is a broadcast packet.">nextIsBroadcast</a>)
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#ad0d07dd20d64f623bba85ab34a708d34" title="true if Rts/Cts is used, false if not; can be set in omnetpp.ini">rtsCts</a>)
        {
            <span class="comment">// send a RTS</span>
            <a class="code" href="class_mac80211.html#a3104750758ab171b20ffcfeae0079a78" title="send RTS frame">sendRTSframe</a>();
            <a class="code" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713" title="Sets the state, and produces a log message in between.">setState</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447accc67a0993941984c4f6b49c633c2ad8">WFCTS</a>);
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_mac80211.html#a0bc84e36d3aaf65af29a5aded9d0ef50" title="send data frame">sendDATAframe</a>();
            <a class="code" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713" title="Sets the state, and produces a log message in between.">setState</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a50a717bfadf9a3fdd634d77950607278">WFACK</a>);
        }

        <span class="comment">// broadcast packet</span>
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_mac80211.html#a26b30d048980b56d79c04e859bfce009" title="send broadcast frame">sendBROADCASTframe</a>();

        <span class="comment">// removes the packet from the queue without waiting for an acknowledgement</span>
        <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *temp = <a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.front();
        <a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.pop_front();
        <span class="keyword">delete</span>(temp);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7d36a55827a7ea91b2539c86d79349af"></a><!-- doxytag: member="Mac80211::handleEndSifsTimer" ref="a7d36a55827a7ea91b2539c86d79349af" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a7d36a55827a7ea91b2539c86d79349af">Mac80211::handleEndSifsTimer</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>handle end of SIFS </p>
<p>Handle the end sifs timer. Then sends a CTS, a DATA, or an ACK frame </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00576">576</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00242">handleSelfMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *frame = (<a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *) <a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a>-&gt;getContextPointer();

    <span class="keywordflow">switch</span> (frame-&gt;getKind())
    {
    <span class="keywordflow">case</span> <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250eae58caa68ff8b6e4838007985c7e3ae66">RTS</a>:
        <a class="code" href="class_mac80211.html#a1fd59a589e53facb68c13be84521a49e" title="send CTS frame">sendCTSframe</a>(frame);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea97dc7d7bbe8a217f4bc934b4a868c521">CTS</a>:
        <a class="code" href="class_mac80211.html#a0bc84e36d3aaf65af29a5aded9d0ef50" title="send data frame">sendDATAframe</a>();
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea9d7d6f31868d66330397c967c4afd2d2">DATA</a>:
        <a class="code" href="class_mac80211.html#a1c404a5176db493c2fefb71537783607" title="send Acknoledgement">sendACKframe</a>(frame);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
        error(<span class="stringliteral">&quot;logic error: end sifs timer when previously received packet is not RTS/CTS/DATA&quot;</span>);
    }

    <span class="comment">// don&#39;t need previous frame any more</span>
    <span class="keyword">delete</span> frame;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac6e3ffa0213257e6f4336295bc6c52b6"></a><!-- doxytag: member="Mac80211::handleEndTransmissionTimer" ref="ac6e3ffa0213257e6f4336295bc6c52b6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#ac6e3ffa0213257e6f4336295bc6c52b6">Mac80211::handleEndTransmissionTimer</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>handle the end of a transmission... </p>
<p>Handle the end of transmission timer (end of the transmission of an ACK or a broadcast packet). Called by HandleTimer(cMessage* msg) </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00604">604</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00242">handleSelfMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;transmission of ACK/BROADCAST is over\n&quot;</span>;
    <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a> != <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447aa1070f3c837e8dc4d7890536f7cfbaf9">BUSY</a>)
        error(<span class="stringliteral">&quot;logic error: expiration of the end transmission timer outside the BUSY state, should not happen&quot;</span>);

    <span class="comment">// if there&#39;s a packet to send and if the channel is free, then start a new contention period</span>
    <a class="code" href="class_mac80211.html#ab3030c86acac78401f877a61cefcdad6" title="start a new contention period">beginNewCycle</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="aba69300333bac6d93a3a28224037aade"></a><!-- doxytag: member="Mac80211::handleLowerMsg" ref="aba69300333bac6d93a3a28224037aade" args="(cPacket *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#aba69300333bac6d93a3a28224037aade">Mac80211::handleLowerMsg</a> </td>
          <td>(</td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle packets from lower layer. </p>
<p>Handle all messages from lower layer. Checks the destination MAC adress of the packet. Then calls one of the three functions : <a class="el" href="class_mac80211.html#a50acb267ae4092cea8399a10d10aab37" title="handle a message that is not for me or errornous">handleMsgNotForMe()</a>, <a class="el" href="class_mac80211.html#adfcf8b7a5e1db233a1bd717cecaf49bd">handleBroadcastMsg()</a>, or <a class="el" href="class_mac80211.html#aa0b767642d86d3b66f1d3258065fe5ae" title="handle a message that was meant for me">handleMsgForMe()</a>. Called by <a class="el" href="class_wireless_mac_base.html#aa0117d9f5b465c487b6b4e7bd78eeab6" title="Called every time a message arrives.">handleMessage()</a>. </p>

<p>Implements <a class="el" href="class_wireless_mac_base.html#ab1db1fa4fd9ecec9d8fa1a38a9a365e1">WirelessMacBase</a>.</p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00208">208</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *af = check_and_cast&lt;<a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&gt;(msg);

    <span class="comment">// end of the reception</span>
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;frame &quot;</span> &lt;&lt; af &lt;&lt; <span class="stringliteral">&quot; received, kind = &quot;</span> &lt;&lt; <a class="code" href="class_mac80211.html#a7e80a017fe350632553db643c0033acc" title="Produce a readable name of the given packet type.">pktTypeName</a>(af-&gt;getKind()) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

    <span class="keywordflow">switch</span> (af-&gt;getKind())
    {
    <span class="keywordflow">case</span> <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ead5384d1822c72da119100438c5051831">COLLISION</a>: <span class="comment">// packet lost or bit error</span>
        <span class="keyword">delete</span> af;
        <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a> == <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447ae138f38743ca77f1300a24d4d79786fe">CONTEND</a>)
            <a class="code" href="class_mac80211.html#ab3030c86acac78401f877a61cefcdad6" title="start a new contention period">beginNewCycle</a>();
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea46f67b4287ec5f32a482fe2245acb694">BITERROR</a>:
        <a class="code" href="class_mac80211.html#a50acb267ae4092cea8399a10d10aab37" title="handle a message that is not for me or errornous">handleMsgNotForMe</a>(af);
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea78386e426adecb3fd26350119a3cb7c2">BROADCAST</a>: <span class="comment">// broadcast packet</span>
        <a class="code" href="class_mac80211.html#adfcf8b7a5e1db233a1bd717cecaf49bd">handleBroadcastMsg</a>(af);
        <span class="keywordflow">break</span>;

    <span class="keywordflow">default</span>: <span class="comment">// other packet</span>
        <span class="keywordflow">if</span> (af-&gt;<a class="code" href="class_mac_pkt.html#a4be021c42528e2ce233fc55d4c625df2">getDestAddr</a>() == <a class="code" href="class_mac80211.html#a575be19d3e428551aa4e3ecfb48fcf49" title="mac address">myMacAddr</a>)  <span class="comment">// FIXME verify broadcast dest addr works!</span>
            <a class="code" href="class_mac80211.html#aa0b767642d86d3b66f1d3258065fe5ae" title="handle a message that was meant for me">handleMsgForMe</a>(af);
        <span class="keywordflow">else</span>
            <a class="code" href="class_mac80211.html#a50acb267ae4092cea8399a10d10aab37" title="handle a message that is not for me or errornous">handleMsgNotForMe</a>(af);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa0b767642d86d3b66f1d3258065fe5ae"></a><!-- doxytag: member="Mac80211::handleMsgForMe" ref="aa0b767642d86d3b66f1d3258065fe5ae" args="(Mac80211Pkt *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#aa0b767642d86d3b66f1d3258065fe5ae">Mac80211::handleMsgForMe</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td>
          <td class="paramname"><em>af</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>handle a message that was meant for me </p>
<p>Handle a packet for the node. The result of this reception is a function of the type of the received message (RTS,CTS,DATA, or ACK), and of the current state of the MAC (WFDATA, CONTEND, IDLE, WFCTS, or WFACK). Called by <a class="el" href="class_mac80211.html#aba69300333bac6d93a3a28224037aade" title="Handle packets from lower layer.">handleLowerMsg()</a> </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00351">351</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00208">handleLowerMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;handle msg for me in state = &quot;</span> &lt;&lt; <a class="code" href="class_mac80211.html#ade8a90e665191333e610b60bad4a32a1" title="Produce a readable name of the given state.">stateName</a>(<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a>) &lt;&lt; <span class="stringliteral">&quot; with type = &quot;</span> &lt;&lt; <a class="code" href="class_mac80211.html#a7e80a017fe350632553db643c0033acc" title="Produce a readable name of the given packet type.">pktTypeName</a>(af-&gt;getKind()) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;

    <span class="keywordflow">switch</span> (<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a>)
    {
    <span class="keywordflow">case</span> <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a8904ce43407ca530f7fe83d63c558e28">IDLE</a>:     <span class="comment">// waiting for the end of the contention period</span>
    <span class="keywordflow">case</span> <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447ae138f38743ca77f1300a24d4d79786fe">CONTEND</a>:  <span class="comment">// or waiting for RTS</span>

        <span class="comment">// RTS or DATA accepted</span>
        <span class="keywordflow">if</span> (af-&gt;getKind() == <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250eae58caa68ff8b6e4838007985c7e3ae66">RTS</a>)
            <a class="code" href="class_mac80211.html#a98ad0d3935d620b33302e5230b395685">handleRTSframe</a>(af);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (af-&gt;getKind() == <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea9d7d6f31868d66330397c967c4afd2d2">DATA</a>)
            <a class="code" href="class_mac80211.html#ab0844f9dbcece750c9a58ca9f0a73fe1">handleDATAframe</a>(af);
        <span class="keywordflow">else</span>
            <span class="comment">// TODO: what if a late ACK has arrived?</span>
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;in handleMsgForMe() IDLE/CONTEND, strange message, darf das?\n&quot;</span>;
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447abe0abc1112335ff66c1eef6bd95371e4">WFDATA</a>:  <span class="comment">// waiting for DATA</span>

        <span class="keywordflow">if</span> (af-&gt;getKind() == <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea9d7d6f31868d66330397c967c4afd2d2">DATA</a>)
            <a class="code" href="class_mac80211.html#ab0844f9dbcece750c9a58ca9f0a73fe1">handleDATAframe</a>(af);
        <span class="keywordflow">else</span>
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;in handleMsgForMe() WFDATA, strange message, darf das?\n&quot;</span>;
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a50a717bfadf9a3fdd634d77950607278">WFACK</a>:  <span class="comment">// waiting for ACK</span>

        <span class="keywordflow">if</span> (af-&gt;getKind() == <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea41246e9c8691b7e33bc79b345e06b48e">ACK</a>)
            <a class="code" href="class_mac80211.html#a50cb85360462eb7d256ec8a0b493ca44">handleACKframe</a>(af);
        <span class="keywordflow">else</span>
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;in handleMsgForMe() WFACK, strange message, darf das?\n&quot;</span>;
        <span class="keyword">delete</span> af;
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447accc67a0993941984c4f6b49c633c2ad8">WFCTS</a>:  <span class="comment">// The MAC is waiting for CTS</span>

        <span class="keywordflow">if</span> (af-&gt;getKind() == <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea97dc7d7bbe8a217f4bc934b4a868c521">CTS</a>)
            <a class="code" href="class_mac80211.html#ae1e17af7dddc261d7947d48a1f4d0e21">handleCTSframe</a>(af);
        <span class="keywordflow">else</span>
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;in handleMsgForMe() WFCTS, strange message, darf das?\n&quot;</span>;
        <span class="keywordflow">break</span>;


    <span class="keywordflow">case</span> <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a4cfe7a25808b0e110d662483abec7256">QUIET</a>: <span class="comment">// the node is currently deferring.</span>

        <span class="comment">// cannot handle any packet with its MAC adress</span>
        <span class="keyword">delete</span> af;
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447aa1070f3c837e8dc4d7890536f7cfbaf9">BUSY</a>: <span class="comment">// currently transmitting an ACK or a BROADCAST packet</span>
        error(<span class="stringliteral">&quot;logic error: node is currently transmitting, can not receive &quot;</span>
              <span class="stringliteral">&quot;(does the physical layer do its job correctly?)&quot;</span>);
        <span class="keywordflow">break</span>;

    <span class="keywordflow">default</span>:
        error(<span class="stringliteral">&quot;unknown state %d&quot;</span>, <a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a50acb267ae4092cea8399a10d10aab37"></a><!-- doxytag: member="Mac80211::handleMsgNotForMe" ref="a50acb267ae4092cea8399a10d10aab37" args="(Mac80211Pkt *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a50acb267ae4092cea8399a10d10aab37">Mac80211::handleMsgNotForMe</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td>
          <td class="paramname"><em>af</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>handle a message that is not for me or errornous </p>
<p>Handle all ACKs,RTS, CTS, or DATA not for the node. If RTS/CTS is used the node must stay quiet until the current handshake between the two communicating nodes is over. This is done by scheduling the timer message nav (Network Allocation Vector). Without RTS/CTS a new contention is started. If an error occured the node must defer for EIFS. Called by <a class="el" href="class_mac80211.html#aba69300333bac6d93a3a28224037aade" title="Handle packets from lower layer.">handleLowerMsg()</a> </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00285">285</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00208">handleLowerMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;handle msg not for me\n&quot;</span>;

    <span class="comment">// if this packet  can not be correctly read</span>
    <span class="keywordflow">if</span> (af-&gt;getKind() == <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea46f67b4287ec5f32a482fe2245acb694">BITERROR</a>)
        af-&gt;<a class="code" href="class_mac80211_pkt.html#aabdb5fec5f203e9ba50a01d14cd7b023">setDuration</a>(<a class="code" href="class_mac80211.html#aba0a45a5ae60f3330f57655096b1364e" title="extended interframe space">EIFS</a>);

    <span class="comment">// if the duration of the packet is null, then do nothing (to avoid</span>
    <span class="comment">// the unuseful scheduling of a self message)</span>
    <span class="keywordflow">if</span> (af-&gt;<a class="code" href="class_mac80211_pkt.html#a09e39966710115add8cdc1b774313570">getDuration</a>() != 0)
    {

        <span class="comment">// the node is already deferring</span>
        <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a> == <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a4cfe7a25808b0e110d662483abec7256">QUIET</a>)
        {
            <span class="comment">// the current value of the NAV is not sufficient</span>
            <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a35efb0198d0085a341aba515bec9146f" title="Timer used for the defer time of a node. Also called NAV : networks allocation vector.">nav</a>-&gt;getArrivalTime() &lt; simTime() + af-&gt;<a class="code" href="class_mac80211_pkt.html#a09e39966710115add8cdc1b774313570">getDuration</a>())
            {
                cancelEvent(<a class="code" href="class_mac80211.html#a35efb0198d0085a341aba515bec9146f" title="Timer used for the defer time of a node. Also called NAV : networks allocation vector.">nav</a>);
                scheduleAt(simTime() + af-&gt;<a class="code" href="class_mac80211_pkt.html#a09e39966710115add8cdc1b774313570">getDuration</a>(), <a class="code" href="class_mac80211.html#a35efb0198d0085a341aba515bec9146f" title="Timer used for the defer time of a node. Also called NAV : networks allocation vector.">nav</a>);
                <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;NAV timer started for: &quot;</span> &lt;&lt; af-&gt;<a class="code" href="class_mac80211_pkt.html#a09e39966710115add8cdc1b774313570">getDuration</a>() &lt;&lt; <span class="stringliteral">&quot; State QUIET\n&quot;</span>;
            }
        }

        <span class="comment">// other states</span>
        <span class="keywordflow">else</span>
        {
            <span class="comment">// if the MAC wait for another frame, it can delete its time out</span>
            <span class="comment">// (exchange is aborted)</span>
            <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a2d31f97b0662b8e37f090c3b996cec82" title="Timer used for time-outs after the transmission of a RTS, a CTS, or a DATA packet.">timeout</a>-&gt;isScheduled())
                cancelEvent(<a class="code" href="class_mac80211.html#a2d31f97b0662b8e37f090c3b996cec82" title="Timer used for time-outs after the transmission of a RTS, a CTS, or a DATA packet.">timeout</a>);

            <span class="comment">// is state == WFCTS or WFACK, the data transfer has failed ...</span>

            <span class="comment">// the node must defer for the time of the transmission</span>
            scheduleAt(simTime() + af-&gt;<a class="code" href="class_mac80211_pkt.html#a09e39966710115add8cdc1b774313570">getDuration</a>(), <a class="code" href="class_mac80211.html#a35efb0198d0085a341aba515bec9146f" title="Timer used for the defer time of a node. Also called NAV : networks allocation vector.">nav</a>);
            <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;NAV timer started, not QUIET: &quot;</span> &lt;&lt; af-&gt;<a class="code" href="class_mac80211_pkt.html#a09e39966710115add8cdc1b774313570">getDuration</a>() &lt;&lt; endl;
            <a class="code" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713" title="Sets the state, and produces a log message in between.">setState</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a4cfe7a25808b0e110d662483abec7256">QUIET</a>);

        }
    }
    <span class="keywordflow">if</span> (!<a class="code" href="class_mac80211.html#ad0d07dd20d64f623bba85ab34a708d34" title="true if Rts/Cts is used, false if not; can be set in omnetpp.ini">rtsCts</a>)
    {                           <span class="comment">// todo: Nachgucken: was passiert bei Error ohne rtsCts!</span>
        <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a> == <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447ae138f38743ca77f1300a24d4d79786fe">CONTEND</a>)
        {
            <span class="keywordflow">if</span> (af-&gt;getKind() == <a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea46f67b4287ec5f32a482fe2245acb694">BITERROR</a>)
            {
                <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4" title="Timer used for contention periods.">contention</a>-&gt;isScheduled())
                    cancelEvent(<a class="code" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4" title="Timer used for contention periods.">contention</a>);
                scheduleAt(simTime() + <a class="code" href="class_mac80211.html#a897651c7f7dd8d9ed2f583db0e4550e5" title="Compute a backoff value.">computeBackoff</a>() + <a class="code" href="class_mac80211.html#aba0a45a5ae60f3330f57655096b1364e" title="extended interframe space">EIFS</a>, <a class="code" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4" title="Timer used for contention periods.">contention</a>);
            }
            <span class="keywordflow">else</span>
                <a class="code" href="class_mac80211.html#ab3030c86acac78401f877a61cefcdad6" title="start a new contention period">beginNewCycle</a>();
        }
    }
    <span class="keyword">delete</span> af;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a23a142d65d7a0dcba4a60c0f509ab5b9"></a><!-- doxytag: member="Mac80211::handleNavTimer" ref="a23a142d65d7a0dcba4a60c0f509ab5b9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a23a142d65d7a0dcba4a60c0f509ab5b9">Mac80211::handleNavTimer</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>NAV timer expired, the exchange of messages of other stations is done. </p>
<p>Handle the NAV timer (end of a defering period). Called by HandleTimer(cMessage* msg) </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00548">548</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00242">handleSelfMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a> != <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a4cfe7a25808b0e110d662483abec7256">QUIET</a>)
        error(<span class="stringliteral">&quot;logic error: expiration of the NAV timer outside of the state QUIET, should not happen&quot;</span>);

    <span class="comment">// if there&#39;s a packet to send and if the channel is free, then start a new contention period</span>
    <a class="code" href="class_mac80211.html#ab3030c86acac78401f877a61cefcdad6" title="start a new contention period">beginNewCycle</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a98ad0d3935d620b33302e5230b395685"></a><!-- doxytag: member="Mac80211::handleRTSframe" ref="a98ad0d3935d620b33302e5230b395685" args="(Mac80211Pkt *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a98ad0d3935d620b33302e5230b395685">Mac80211::handleRTSframe</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td>
          <td class="paramname"><em>af</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Handle aframe wich is expected to be an RTS. Called by HandleMsgForMe() </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00416">416</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00351">handleMsgForMe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// wait a short interframe space</span>
    <a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a>-&gt;setContextPointer(af);
    scheduleAt(simTime() + <a class="code" href="_ieee80211_consts_8h.html#a302795c4c8b76861bfc0ca2ec2c7d171">SIFS</a>, <a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a990af33f857669759da0cbeebd1c2431"></a><!-- doxytag: member="Mac80211::handleSelfMsg" ref="a990af33f857669759da0cbeebd1c2431" args="(cMessage *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a990af33f857669759da0cbeebd1c2431">Mac80211::handleSelfMsg</a> </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle self messages such as timer... </p>
<p>handle timers </p>

<p>Implements <a class="el" href="class_wireless_mac_base.html#a1c7f3c2581f66d7de17af4a730ae0c4d">WirelessMacBase</a>.</p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00242">242</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;processing self message with type = &quot;</span> &lt;&lt; <a class="code" href="class_mac80211.html#a5f781f421a39d163f2baed01473801f8" title="Produce a readable name of the given timer type.">timerTypeName</a>(msg-&gt;getKind()) &lt;&lt; endl;

    <span class="keywordflow">switch</span> (msg-&gt;getKind())
    {
    <span class="keywordflow">case</span> <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ae116234508b0af14c6e33ff5627eef0a">END_SIFS</a>:
        <a class="code" href="class_mac80211.html#a7d36a55827a7ea91b2539c86d79349af" title="handle end of SIFS">handleEndSifsTimer</a>();   <span class="comment">// noch zu betrachten</span>
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186a6aa35f51fc3714f21930242d9a802471">END_TRANSMISSION</a>:
        <a class="code" href="class_mac80211.html#ac6e3ffa0213257e6f4336295bc6c52b6" title="handle the end of a transmission...">handleEndTransmissionTimer</a>();   <span class="comment">// noch zu betrachten</span>
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ab091712e64b8b82a904b5819b44c0ce2">CONTENTION</a>:
        <a class="code" href="class_mac80211.html#a0a87fa1791117ef1dd1841ba217e4245" title="handle end of contention">handleEndContentionTimer</a>();
        <span class="keywordflow">break</span>;

        <span class="comment">// the MAC was waiting for a CTS, a DATA, or an ACK packet but the timer has expired.</span>
    <span class="keywordflow">case</span> <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186a317269d758fc1f055750d43926abbb2f">TIMEOUT</a>:
        <a class="code" href="class_mac80211.html#ab5fcba8c7a3878ac59195a483ba35a12" title="handle time out">handleTimeoutTimer</a>();   <span class="comment">// noch zu betrachten..</span>
        <span class="keywordflow">break</span>;

        <span class="comment">// the MAC was waiting because an other communication had won the channel. This communication is now over</span>
    <span class="keywordflow">case</span> <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ad2d7f908db1dc3ed72e451dad336d654">NAV</a>:
        <a class="code" href="class_mac80211.html#a23a142d65d7a0dcba4a60c0f509ab5b9" title="NAV timer expired, the exchange of messages of other stations is done.">handleNavTimer</a>();       <span class="comment">// noch zu betrachten...</span>
        <span class="keywordflow">break</span>;

    <span class="keywordflow">default</span>:
        error(<span class="stringliteral">&quot;unknown timer type&quot;</span>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab5fcba8c7a3878ac59195a483ba35a12"></a><!-- doxytag: member="Mac80211::handleTimeoutTimer" ref="ab5fcba8c7a3878ac59195a483ba35a12" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#ab5fcba8c7a3878ac59195a483ba35a12">Mac80211::handleTimeoutTimer</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>handle time out </p>
<p>Handle the time out timer. Called by handleTimer(cMessage* msg) </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00561">561</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00242">handleSelfMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// if (state == WFCTS || state == WFACK)testMaxAttempts();</span>

    <span class="comment">// if there&#39;s a packet to send and if the channel is free then</span>
    <span class="comment">// start a new contention period</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a> != <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a4cfe7a25808b0e110d662483abec7256">QUIET</a>)
        <a class="code" href="class_mac80211.html#ab3030c86acac78401f877a61cefcdad6" title="start a new contention period">beginNewCycle</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad7bce39f2c4cc648b6571ae5bc622103"></a><!-- doxytag: member="Mac80211::handleUpperMsg" ref="ad7bce39f2c4cc648b6571ae5bc622103" args="(cPacket *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#ad7bce39f2c4cc648b6571ae5bc622103">Mac80211::handleUpperMsg</a> </td>
          <td>(</td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle packets from upper layer. </p>
<p>This implementation does not support fragmentation, so it is tested if the maximum length of the MPDU is exceeded. </p>

<p>Implements <a class="el" href="class_wireless_mac_base.html#ab44661d865472b3799cbe4b086e131b9">WirelessMacBase</a>.</p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00142">142</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (msg-&gt;getByteLength() &gt; 2312)
        error(<span class="stringliteral">&quot;packet from higher layer (%s)%s is too long for 802.11b, %d bytes (fragmentation is not supported yet)&quot;</span>,
              msg-&gt;getClassName(), msg-&gt;getName(), (int)(msg-&gt;getByteLength()));

    <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a9df7f8967859f0870597e866677c8af5" title="Maximal number of packets in the queue; should be set in the omnetpp.ini.">maxQueueSize</a> &amp;&amp; (<span class="keywordtype">int</span>)<a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.size() == <a class="code" href="class_mac80211.html#a9df7f8967859f0870597e866677c8af5" title="Maximal number of packets in the queue; should be set in the omnetpp.ini.">maxQueueSize</a>)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;packet &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot; received from higher layer but MAC queue is full, deleting\n&quot;</span>;
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *mac = <a class="code" href="class_mac80211.html#a008b57947b7d9287bb34b1e67094ebb8" title="encapsulate packet">encapsMsg</a>(msg);
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;packet &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot; received from higher layer, dest=&quot;</span> &lt;&lt; mac-&gt;<a class="code" href="class_mac_pkt.html#a4be021c42528e2ce233fc55d4c625df2">getDestAddr</a>() &lt;&lt; <span class="stringliteral">&quot;, encapsulated\n&quot;</span>;

    <a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.push_back(mac);
    <span class="comment">// If the MAC is in the IDLE state, then start a new contention period</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a> == <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a8904ce43407ca530f7fe83d63c558e28">IDLE</a> &amp;&amp; !<a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a>-&gt;isScheduled())
    {
        <a class="code" href="class_mac80211.html#aa04ef4245cd9721019b4e0b2d3164ec2" title="If there&#39;s a new packet to send and the channel is free, no backoff is needed.">tryWithoutBackoff</a> = <span class="keyword">true</span>;
        <a class="code" href="class_mac80211.html#ab3030c86acac78401f877a61cefcdad6" title="start a new contention period">beginNewCycle</a>();
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;enqueued, will be transmitted later\n&quot;</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab81dae24d79c2ef010301e2c219966c1"></a><!-- doxytag: member="Mac80211::initialize" ref="ab81dae24d79c2ef010301e2c219966c1" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#ab81dae24d79c2ef010301e2c219966c1">Mac80211::initialize</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialization of the module and some variables. </p>

<p>Reimplemented from <a class="el" href="class_wireless_mac_base.html#a74866aacf342c21cd220d959698d87af">WirelessMacBase</a>.</p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00045">45</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_mac80211.html#ab81dae24d79c2ef010301e2c219966c1" title="Initialization of the module and some variables.">WirelessMacBase::initialize</a>(stage);

    <span class="keywordflow">if</span> (stage == 0)
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Initializing stage 0\n&quot;</span>;
        <a class="code" href="class_mac80211.html#a9df7f8967859f0870597e866677c8af5" title="Maximal number of packets in the queue; should be set in the omnetpp.ini.">maxQueueSize</a> = par(<span class="stringliteral">&quot;maxQueueSize&quot;</span>);

        <span class="comment">// subscribe for the information of the carrier sense</span>
        <a class="code" href="class_wireless_mac_base.html#a779ea8a0af7e4ef85c5faa85d6a281ed" title="Cached pointer to the NotificationBoard module.">nb</a>-&gt;<a class="code" href="class_notification_board.html#aeb02a282e6c807c1cb064a28e8409ff2">subscribe</a>(<span class="keyword">this</span>, <a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55baa6e69ccdaad903262ac00b89b6208a69">NF_RADIOSTATE_CHANGED</a>);

        <span class="comment">// timers</span>
        <a class="code" href="class_mac80211.html#a2d31f97b0662b8e37f090c3b996cec82" title="Timer used for time-outs after the transmission of a RTS, a CTS, or a DATA packet.">timeout</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;timeout&quot;</span>, <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186a317269d758fc1f055750d43926abbb2f">TIMEOUT</a>);
        <a class="code" href="class_mac80211.html#a35efb0198d0085a341aba515bec9146f" title="Timer used for the defer time of a node. Also called NAV : networks allocation vector.">nav</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;NAV&quot;</span>, <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ad2d7f908db1dc3ed72e451dad336d654">NAV</a>);
        <a class="code" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4" title="Timer used for contention periods.">contention</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;contention&quot;</span>, <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ab091712e64b8b82a904b5819b44c0ce2">CONTENTION</a>);
        <a class="code" href="class_mac80211.html#abe4522bcfe2b0a6d4275fe2be9226142" title="Timer used to indicate the end of the transmission of an ACK or a BROADCAST packet.">endTransmission</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;transmission&quot;</span>, <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186a6aa35f51fc3714f21930242d9a802471">END_TRANSMISSION</a>);
        <a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;end SIFS&quot;</span>, <a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ae116234508b0af14c6e33ff5627eef0a">END_SIFS</a>);

        <a class="code" href="class_mac80211.html#a8aa2e915f41c451a2c83de8aab09594c" title="Variable to store the current backoff value.">BW</a> = 0;
        <a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a> = <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a8904ce43407ca530f7fe83d63c558e28">IDLE</a>;
        <a class="code" href="class_mac80211.html#a2e6f9111bcd385f606abf94da7e8b44e" title="Number of frame transmission attempt.">retryCounter</a> = 1;
        <a class="code" href="class_mac80211.html#afa01e3d776f586cab65b6cf45eac59d9" title="Should be set in the omnetpp.ini.">broadcastBackoff</a> = par(<span class="stringliteral">&quot;broadcastBackoff&quot;</span>);
        <a class="code" href="class_mac80211.html#ad0d07dd20d64f623bba85ab34a708d34" title="true if Rts/Cts is used, false if not; can be set in omnetpp.ini">rtsCts</a> = par(<span class="stringliteral">&quot;rtsCts&quot;</span>);
        <a class="code" href="class_mac80211.html#a126c9db5a54bafa6ad74eb3ee24bd936" title="The bitrate should be set in omnetpp.ini; be sure to use a valid 802.11 bitrate.">bitrate</a> = par(<span class="stringliteral">&quot;bitrate&quot;</span>);
        <a class="code" href="class_mac80211.html#ab9f0ea820748af6d640569fc76f39659" title="Very small value used in timer scheduling in order to avoid multiple changements of state in the same...">delta</a> = 1E-9; <span class="comment">//XXX it&#39;s rather &quot;epsilon&quot;, but this delta business looks a bit dodgy a solution anyway</span>

        <a class="code" href="class_mac80211.html#a1c357b92c014552612da4d21f2d1387b" title="Current state of the radio (kept updated by receiveChangeNotification())">radioState</a> = <a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a8904ce43407ca530f7fe83d63c558e28">RadioState::IDLE</a>; <span class="comment">// until 1st receiveChangeNotification()</span>

        <a class="code" href="class_mac80211.html#aba0a45a5ae60f3330f57655096b1364e" title="extended interframe space">EIFS</a> = <a class="code" href="_ieee80211_consts_8h.html#a302795c4c8b76861bfc0ca2ec2c7d171">SIFS</a> + <a class="code" href="_ieee80211_consts_8h.html#a48db305f0a645cc92737c0384b248cde">DIFS</a> + <a class="code" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a" title="computes the duration of a transmission over the physical channel">computePacketDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>);
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;SIFS: &quot;</span> &lt;&lt; <a class="code" href="_ieee80211_consts_8h.html#a302795c4c8b76861bfc0ca2ec2c7d171">SIFS</a> &lt;&lt; <span class="stringliteral">&quot; DIFS: &quot;</span> &lt;&lt; <a class="code" href="_ieee80211_consts_8h.html#a48db305f0a645cc92737c0384b248cde">DIFS</a> &lt;&lt; <span class="stringliteral">&quot; EIFS: &quot;</span> &lt;&lt; <a class="code" href="class_mac80211.html#aba0a45a5ae60f3330f57655096b1364e" title="extended interframe space">EIFS</a> &lt;&lt; endl;

        <span class="comment">// get registered in IInterfaceTable</span>
        <a class="code" href="class_mac80211.html#ae3078154ed54cde61d44b7bd227b75be" title="Register the interface in IInterfaceTable.">registerInterface</a>();

        WATCH(<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a>);
        WATCH(<a class="code" href="class_mac80211.html#a1c357b92c014552612da4d21f2d1387b" title="Current state of the radio (kept updated by receiveChangeNotification())">radioState</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="afff07fb51cb6f8d89794b31e57a70d82"></a><!-- doxytag: member="Mac80211::numInitStages" ref="afff07fb51cb6f8d89794b31e57a70d82" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int <a class="el" href="class_mac80211.html#afff07fb51cb6f8d89794b31e57a70d82">Mac80211::numInitStages</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialization of the module and some variables. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00070">70</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> 2;}
</pre></div>
</div>
</div>
<a class="anchor" id="a7e80a017fe350632553db643c0033acc"></a><!-- doxytag: member="Mac80211::pktTypeName" ref="a7e80a017fe350632553db643c0033acc" args="(int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * <a class="el" href="class_mac80211.html#a7e80a017fe350632553db643c0033acc">Mac80211::pktTypeName</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Produce a readable name of the given packet type. </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l01040">1040</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00208">handleLowerMsg()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00351">handleMsgForMe()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#define CASE(x) case x: s=#x; break</span>
<span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *s = <span class="stringliteral">&quot;???&quot;</span>;
    <span class="keywordflow">switch</span> (type)
    {
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186a317269d758fc1f055750d43926abbb2f">TIMEOUT</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea9d7d6f31868d66330397c967c4afd2d2">DATA</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea78386e426adecb3fd26350119a3cb7c2">BROADCAST</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250eae58caa68ff8b6e4838007985c7e3ae66">RTS</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea97dc7d7bbe8a217f4bc934b4a868c521">CTS</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea41246e9c8691b7e33bc79b345e06b48e">ACK</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea9ec72957f3d528f3f305bc5b98150b59">ACKRTS</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250eae00de8094e37dcde8ebe30e410e07246">BEGIN_RECEPTION</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea46f67b4287ec5f32a482fe2245acb694">BITERROR</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ead5384d1822c72da119100438c5051831">COLLISION</a>);
    }
    <span class="keywordflow">return</span> s;
<span class="preprocessor">#undef CASE</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a45135e1a304c496b8c51fef88145e7c0"></a><!-- doxytag: member="Mac80211::receiveChangeNotification" ref="a45135e1a304c496b8c51fef88145e7c0" args="(int category, const cPolymorphic *details)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a45135e1a304c496b8c51fef88145e7c0">Mac80211::receiveChangeNotification</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cPolymorphic *&#160;</td>
          <td class="paramname"><em>details</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called by the <a class="el" href="class_notification_board.html">NotificationBoard</a> whenever a change occurs we're interested in. </p>
<p>Handle change nofitications. In this layer it is usually information about the radio channel, i.e. if it is IDLE etc. </p>

<p>Implements <a class="el" href="class_i_notifiable.html#a67d757190e1128eaec8f0a8e51ed38f6">INotifiable</a>.</p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00914">914</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;receiveChangeNotification(%s, %s)&quot;</span>, <a class="code" href="_notifier_consts_8cc.html#a6808a262fcec2a310a9e7ed7d75c029f">notificationCategoryName</a>(category),
                 details?details-&gt;info().c_str() : <span class="stringliteral">&quot;n/a&quot;</span>);
    <a class="code" href="_notifier_consts_8cc.html#a68fd4b933fae636048bb9ee52fd922e5">printNotificationBanner</a>(category, details);

    <span class="keywordflow">if</span> (category == <a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55baa6e69ccdaad903262ac00b89b6208a69">NF_RADIOSTATE_CHANGED</a>)
    {
        <span class="comment">// update the local copy of the radio state</span>
        <a class="code" href="class_mac80211.html#a1c357b92c014552612da4d21f2d1387b" title="Current state of the radio (kept updated by receiveChangeNotification())">radioState</a> = check_and_cast&lt;<a class="code" href="class_radio_state.html">RadioState</a> *&gt;(details)-&gt;getState();

        <span class="comment">// NOTE: we may be invoked during INIT STAGE 1 too, when SnrEval notifies us</span>
        <span class="comment">// about the initial radio state. This function has to work correctly</span>
        <span class="comment">// even when called during initialization phase!</span>

        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;** Radio state update in &quot;</span> &lt;&lt; getClassName() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; details-&gt;info()
           &lt;&lt; <span class="stringliteral">&quot; (at T=&quot;</span> &lt;&lt; simTime() &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;

        <span class="comment">// beginning of a reception</span>
        <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a1c357b92c014552612da4d21f2d1387b" title="Current state of the radio (kept updated by receiveChangeNotification())">radioState</a> == <a class="code" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449ab9ff1508b0f4aac00ec13bd9e9335c4b">RadioState::RECV</a>)
        {
            <span class="comment">// if there&#39;s a contention period</span>
            <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4" title="Timer used for contention periods.">contention</a>-&gt;isScheduled())
            {
                <span class="comment">// update the backoff window in order to give higher priority in</span>
                <span class="comment">// the next battle</span>
                <span class="keywordflow">if</span> (simTime() - <a class="code" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4" title="Timer used for contention periods.">contention</a>-&gt;getSendingTime() &gt;= <a class="code" href="_ieee80211_consts_8h.html#a48db305f0a645cc92737c0384b248cde">DIFS</a>)
                {
                    <a class="code" href="class_mac80211.html#a8aa2e915f41c451a2c83de8aab09594c" title="Variable to store the current backoff value.">BW</a> = <a class="code" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4" title="Timer used for contention periods.">contention</a>-&gt;getArrivalTime() - simTime();
                    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Backoff window made smaller, new BW: &quot;</span> &lt;&lt; <a class="code" href="class_mac80211.html#a8aa2e915f41c451a2c83de8aab09594c" title="Variable to store the current backoff value.">BW</a> &lt;&lt; endl;
                }
                cancelEvent(<a class="code" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4" title="Timer used for contention periods.">contention</a>);
            }

            <span class="comment">// if there&#39;s a SIFS period</span>
            <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a>-&gt;isScheduled())
            {
                <span class="comment">// delete the previously received frame</span>
                <span class="keyword">delete</span> (<a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *)<a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a>-&gt;getContextPointer();

                <span class="comment">// cancel the next transmission</span>
                cancelEvent(<a class="code" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4" title="Timer used to indicate the end of a SIFS.">endSifs</a>);

                <span class="comment">// state in now IDLE or CONTEND</span>
                <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.empty())
                    <a class="code" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713" title="Sets the state, and produces a log message in between.">setState</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a8904ce43407ca530f7fe83d63c558e28">IDLE</a>);
                <span class="keywordflow">else</span>
                    <a class="code" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713" title="Sets the state, and produces a log message in between.">setState</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447ae138f38743ca77f1300a24d4d79786fe">CONTEND</a>);
            }
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae3078154ed54cde61d44b7bd227b75be"></a><!-- doxytag: member="Mac80211::registerInterface" ref="ae3078154ed54cde61d44b7bd227b75be" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#ae3078154ed54cde61d44b7bd227b75be">Mac80211::registerInterface</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register the interface in <a class="el" href="class_i_interface_table.html">IInterfaceTable</a>. </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00086">86</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_interface_entry.html">InterfaceEntry</a> *e = <span class="keyword">new</span> <a class="code" href="class_interface_entry.html">InterfaceEntry</a>();

    <span class="comment">// interface name: NetworkInterface module&#39;s name without special characters ([])</span>
    <span class="keywordtype">char</span> *interfaceName = <span class="keyword">new</span> <span class="keywordtype">char</span>[strlen(getParentModule()-&gt;getFullName()) + 1];
    <span class="keywordtype">char</span> *d = interfaceName;
    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">char</span> *s = getParentModule()-&gt;getFullName(); *s; s++)
        <span class="keywordflow">if</span> (isalnum(*s))
            *d++ = *s;
    *d = <span class="charliteral">&#39;\0&#39;</span>;

    e-&gt;<a class="code" href="class_interface_entry.html#af9ca0c7af3a0f45e7d7102e6cc2b089e">setName</a>(interfaceName);
    <span class="keyword">delete</span> [] interfaceName;

    <span class="keyword">const</span> <span class="keywordtype">char</span> *addrstr = par(<span class="stringliteral">&quot;address&quot;</span>);
    <span class="keywordflow">if</span> (!strcmp(addrstr, <span class="stringliteral">&quot;auto&quot;</span>))
    {
        <span class="comment">// assign automatic address</span>
        <a class="code" href="class_mac80211.html#a575be19d3e428551aa4e3ecfb48fcf49" title="mac address">myMacAddr</a> = <a class="code" href="class_m_a_c_address.html#a020d8e71aa50506e2b29a15833fedfd9">MACAddress::generateAutoAddress</a>();

        <span class="comment">// change module parameter from &quot;auto&quot; to concrete address</span>
        par(<span class="stringliteral">&quot;address&quot;</span>).setStringValue(<a class="code" href="class_mac80211.html#a575be19d3e428551aa4e3ecfb48fcf49" title="mac address">myMacAddr</a>.<a class="code" href="class_m_a_c_address.html#a5eed6450abcdd795b2a3d59828a29802">str</a>().c_str());
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_mac80211.html#a575be19d3e428551aa4e3ecfb48fcf49" title="mac address">myMacAddr</a>.<a class="code" href="class_m_a_c_address.html#a8098d36b9f4a40ef61e1a3cb62cb27dd">setAddress</a>(addrstr);
    }
    e-&gt;<a class="code" href="class_interface_entry.html#ac10c228cc65a2c799c798ca75de593dc">setMACAddress</a>(<a class="code" href="class_mac80211.html#a575be19d3e428551aa4e3ecfb48fcf49" title="mac address">myMacAddr</a>);

    <span class="comment">// generate interface identifier for IPv6</span>
    e-&gt;<a class="code" href="class_interface_entry.html#a7fad57b268a57abe1de80d30299d4c45">setInterfaceToken</a>(<a class="code" href="class_mac80211.html#a575be19d3e428551aa4e3ecfb48fcf49" title="mac address">myMacAddr</a>.<a class="code" href="class_m_a_c_address.html#af646c7d6a3dbe4a94465fd3ec144f08f">formInterfaceIdentifier</a>());

    <span class="comment">// MTU on 802.11 = ?</span>
    e-&gt;<a class="code" href="class_interface_entry.html#aaebcf5970e29877b0a4b68ddaaaf540f">setMtu</a>(par(<span class="stringliteral">&quot;mtu&quot;</span>));            <span class="comment">// FIXME</span>

    <span class="comment">// capabilities</span>
    e-&gt;<a class="code" href="class_interface_entry.html#a6f9c79da187d1d56c028b616f3be28fe">setBroadcast</a>(<span class="keyword">true</span>);
    e-&gt;<a class="code" href="class_interface_entry.html#a0b9fca7071b37185a18b6693c3502f69">setMulticast</a>(<span class="keyword">true</span>);
    e-&gt;<a class="code" href="class_interface_entry.html#af207b6ea20ecd9bedd4acfae50a3500f">setPointToPoint</a>(<span class="keyword">false</span>);

    <span class="comment">// add</span>
    <a class="code" href="class_i_interface_table.html">IInterfaceTable</a> *ift = <a class="code" href="class_interface_table_access.html">InterfaceTableAccess</a>().<a class="code" href="class_module_access.html#a44956ddb52973612afbba0eeecf8bb66">get</a>();
    ift-&gt;<a class="code" href="class_i_interface_table.html#a2159ab6dc917bd6f1b2061980bbdf107">addInterface</a>(e, <span class="keyword">this</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1c404a5176db493c2fefb71537783607"></a><!-- doxytag: member="Mac80211::sendACKframe" ref="a1c404a5176db493c2fefb71537783607" args="(Mac80211Pkt *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a1c404a5176db493c2fefb71537783607">Mac80211::sendACKframe</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td>
          <td class="paramname"><em>af</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send Acknoledgement </p>
<p>Send an ACK frame.Called by HandleEndSifsTimer() </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00641">641</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00576">handleEndSifsTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// the MAC must wait the end of the transmission before beginning an</span>
    <span class="comment">// other contention period</span>
    scheduleAt(simTime() + <a class="code" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a" title="computes the duration of a transmission over the physical channel">computePacketDuration</a>(<a class="code" href="_ieee80211_consts_8h.html#a91dfe4eeae95a6cf191fe0cfddeac182">LENGTH_ACK</a>) + <a class="code" href="class_mac80211.html#ab9f0ea820748af6d640569fc76f39659" title="Very small value used in timer scheduling in order to avoid multiple changements of state in the same...">delta</a>, <a class="code" href="class_mac80211.html#abe4522bcfe2b0a6d4275fe2be9226142" title="Timer used to indicate the end of the transmission of an ACK or a BROADCAST packet.">endTransmission</a>);

    <span class="comment">// send ACK frame</span>
    <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_mac80211.html#a1103d3632c895143607133688783042f" title="build an ACK">buildACKframe</a>(af));
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sent ACK frame!\n&quot;</span>;

    <span class="comment">// update state and display</span>
    <a class="code" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713" title="Sets the state, and produces a log message in between.">setState</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447aa1070f3c837e8dc4d7890536f7cfbaf9">BUSY</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a26b30d048980b56d79c04e859bfce009"></a><!-- doxytag: member="Mac80211::sendBROADCASTframe" ref="a26b30d048980b56d79c04e859bfce009" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a26b30d048980b56d79c04e859bfce009">Mac80211::sendBROADCASTframe</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send broadcast frame </p>
<p>Send a BROADCAST frame.Called by handleContentionTimer() </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00693">693</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00506">handleEndContentionTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// the MAC must wait the end of the transmission before beginning any</span>
    <span class="comment">// other contention period</span>
    scheduleAt(simTime() + <a class="code" href="class_mac80211.html#a0ddb885ea2fc455ad3076a9b9327147a" title="computes the duration of a transmission over the physical channel">computePacketDuration</a>(<a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.front()-&gt;getBitLength()), <a class="code" href="class_mac80211.html#abe4522bcfe2b0a6d4275fe2be9226142" title="Timer used to indicate the end of the transmission of an ACK or a BROADCAST packet.">endTransmission</a>);
    <span class="comment">// send ACK frame</span>
    <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_mac80211.html#aa6aae4c20516ad33fb889336d27e8dab" title="build a broadcast frame">buildBROADCASTframe</a>());

    <span class="comment">// update state and display</span>
    <a class="code" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713" title="Sets the state, and produces a log message in between.">setState</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447aa1070f3c837e8dc4d7890536f7cfbaf9">BUSY</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1fd59a589e53facb68c13be84521a49e"></a><!-- doxytag: member="Mac80211::sendCTSframe" ref="a1fd59a589e53facb68c13be84521a49e" args="(Mac80211Pkt *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a1fd59a589e53facb68c13be84521a49e">Mac80211::sendCTSframe</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211_pkt.html">Mac80211Pkt</a> *&#160;</td>
          <td class="paramname"><em>af</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send CTS frame </p>
<p>Send a CTS frame.Called by HandleEndSifsTimer() </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00678">678</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00576">handleEndSifsTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// schedule time-out</span>
    scheduleAt(simTime() + <a class="code" href="class_mac80211.html#a106323e58027710125c0963c5cda3a88" title="return a timeOut value for a certain type of frame">computeTimeout</a>(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea97dc7d7bbe8a217f4bc934b4a868c521">CTS</a>, af-&gt;<a class="code" href="class_mac80211_pkt.html#a09e39966710115add8cdc1b774313570">getDuration</a>()), <a class="code" href="class_mac80211.html#a2d31f97b0662b8e37f090c3b996cec82" title="Timer used for time-outs after the transmission of a RTS, a CTS, or a DATA packet.">timeout</a>);

    <span class="comment">// send CTS frame</span>
    <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_mac80211.html#a4ad0c06b8940a8fc5463d29d8fda423d" title="build a CTS frame">buildCTSframe</a>(af));

    <span class="comment">// update state and display</span>
    <a class="code" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713" title="Sets the state, and produces a log message in between.">setState</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447abe0abc1112335ff66c1eef6bd95371e4">WFDATA</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0bc84e36d3aaf65af29a5aded9d0ef50"></a><!-- doxytag: member="Mac80211::sendDATAframe" ref="a0bc84e36d3aaf65af29a5aded9d0ef50" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a0bc84e36d3aaf65af29a5aded9d0ef50">Mac80211::sendDATAframe</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send data frame </p>
<p>Send a DATA frame. Called by HandleEndSifsTimer() or <a class="el" href="class_mac80211.html#a0a87fa1791117ef1dd1841ba217e4245" title="handle end of contention">handleEndContentionTimer()</a> </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00619">619</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00506">handleEndContentionTimer()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00576">handleEndSifsTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;sending data frame\n&quot;</span>;

    <span class="comment">// schedule time out</span>
    scheduleAt(simTime() + <a class="code" href="class_mac80211.html#a106323e58027710125c0963c5cda3a88" title="return a timeOut value for a certain type of frame">computeTimeout</a>(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250ea9d7d6f31868d66330397c967c4afd2d2">DATA</a>, 0), <a class="code" href="class_mac80211.html#a2d31f97b0662b8e37f090c3b996cec82" title="Timer used for time-outs after the transmission of a RTS, a CTS, or a DATA packet.">timeout</a>);

    <span class="keywordflow">if</span> (!<a class="code" href="class_mac80211.html#ad0d07dd20d64f623bba85ab34a708d34" title="true if Rts/Cts is used, false if not; can be set in omnetpp.ini">rtsCts</a>)
        <span class="comment">// retryCounter incremented</span>
        <a class="code" href="class_mac80211.html#a2e6f9111bcd385f606abf94da7e8b44e" title="Number of frame transmission attempt.">retryCounter</a>++;

    <span class="comment">// send DATA frame</span>
    <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_mac80211.html#a7945493d4537fd28f78d4b2daca8ff57" title="build a data frame">buildDATAframe</a>());

    <span class="comment">// update state and display</span>
    <a class="code" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713" title="Sets the state, and produces a log message in between.">setState</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a50a717bfadf9a3fdd634d77950607278">WFACK</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3104750758ab171b20ffcfeae0079a78"></a><!-- doxytag: member="Mac80211::sendRTSframe" ref="a3104750758ab171b20ffcfeae0079a78" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a3104750758ab171b20ffcfeae0079a78">Mac80211::sendRTSframe</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send RTS frame </p>
<p>Send a RTS frame.Called by handleContentionTimer() </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00659">659</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00506">handleEndContentionTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// schedule time-out</span>
    scheduleAt(simTime() + <a class="code" href="class_mac80211.html#a106323e58027710125c0963c5cda3a88" title="return a timeOut value for a certain type of frame">computeTimeout</a>(<a class="code" href="_consts80211_8h.html#ad70ed57eb996b190fc586f309107250eae58caa68ff8b6e4838007985c7e3ae66">RTS</a>, 0), <a class="code" href="class_mac80211.html#a2d31f97b0662b8e37f090c3b996cec82" title="Timer used for time-outs after the transmission of a RTS, a CTS, or a DATA packet.">timeout</a>);

    <span class="comment">// long_retry_counter incremented</span>
    <a class="code" href="class_mac80211.html#a2e6f9111bcd385f606abf94da7e8b44e" title="Number of frame transmission attempt.">retryCounter</a>++;

    <span class="comment">// send RTS frame</span>
    <a class="code" href="class_wireless_mac_base.html#a97af424876ed4fc77702d183f38dc83c" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="class_mac80211.html#a94fc835cfeeacad4375aa46f0facb915" title="build an RTS frame">buildRTSframe</a>());

    <span class="comment">// update state and display</span>
    <a class="code" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713" title="Sets the state, and produces a log message in between.">setState</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447accc67a0993941984c4f6b49c633c2ad8">WFCTS</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9fc6eb078e53740d354f8ea7b9d94713"></a><!-- doxytag: member="Mac80211::setState" ref="a9fc6eb078e53740d354f8ea7b9d94713" args="(State state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a9fc6eb078e53740d354f8ea7b9d94713">Mac80211::setState</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447">State</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the state, and produces a log message in between. </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l01061">1061</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00799">beginNewCycle()</a>, <a class="el" href="_mac80211_8cc_source.html#l00506">handleEndContentionTimer()</a>, <a class="el" href="_mac80211_8cc_source.html#l00285">handleMsgNotForMe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00914">receiveChangeNotification()</a>, <a class="el" href="_mac80211_8cc_source.html#l00641">sendACKframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00693">sendBROADCASTframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00678">sendCTSframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00619">sendDATAframe()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00659">sendRTSframe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a>==newState)
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;staying in state &quot;</span> &lt;&lt; <a class="code" href="class_mac80211.html#ade8a90e665191333e610b60bad4a32a1" title="Produce a readable name of the given state.">stateName</a>(<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
    <span class="keywordflow">else</span>
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;state &quot;</span> &lt;&lt; <a class="code" href="class_mac80211.html#ade8a90e665191333e610b60bad4a32a1" title="Produce a readable name of the given state.">stateName</a>(<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a>) &lt;&lt; <span class="stringliteral">&quot; --&gt; &quot;</span> &lt;&lt; <a class="code" href="class_mac80211.html#ade8a90e665191333e610b60bad4a32a1" title="Produce a readable name of the given state.">stateName</a>(newState) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
    <a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a> = newState;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ade8a90e665191333e610b60bad4a32a1"></a><!-- doxytag: member="Mac80211::stateName" ref="ade8a90e665191333e610b60bad4a32a1" args="(State state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * <a class="el" href="class_mac80211.html#ade8a90e665191333e610b60bad4a32a1">Mac80211::stateName</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447">State</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Produce a readable name of the given state. </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l01006">1006</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00351">handleMsgForMe()</a>, and <a class="el" href="_mac80211_8cc_source.html#l01061">setState()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#define CASE(x) case x: s=#x; break</span>
<span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *s = <span class="stringliteral">&quot;???&quot;</span>;
    <span class="keywordflow">switch</span> (<a class="code" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c" title="Current state of the MAC.">state</a>)
    {
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447abe0abc1112335ff66c1eef6bd95371e4">WFDATA</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a4cfe7a25808b0e110d662483abec7256">QUIET</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a8904ce43407ca530f7fe83d63c558e28">IDLE</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447ae138f38743ca77f1300a24d4d79786fe">CONTEND</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447accc67a0993941984c4f6b49c633c2ad8">WFCTS</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447a50a717bfadf9a3fdd634d77950607278">WFACK</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447aa1070f3c837e8dc4d7890536f7cfbaf9">BUSY</a>);
    }
    <span class="keywordflow">return</span> s;
<span class="preprocessor">#undef CASE</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a72e78257babff863ca8749b2bb1a97f4"></a><!-- doxytag: member="Mac80211::testMaxAttempts" ref="a72e78257babff863ca8749b2bb1a97f4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_mac80211.html#a72e78257babff863ca8749b2bb1a97f4">Mac80211::testMaxAttempts</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Test if maximum number of retries to transmit is exceeded. </p>
<p>Test if the maximal retry limit is reached, and delete the frame to send in this case. </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l00895">895</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00799">beginNewCycle()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_mac80211.html#a2e6f9111bcd385f606abf94da7e8b44e" title="Number of frame transmission attempt.">retryCounter</a> &gt; <a class="code" href="_ieee80211_consts_8h.html#ad862aa3dc4895082a85ebc53f5bec08e">RETRY_LIMIT</a>)
    {
        <span class="comment">// initialize counter</span>
        <a class="code" href="class_mac80211.html#a2e6f9111bcd385f606abf94da7e8b44e" title="Number of frame transmission attempt.">retryCounter</a> = 1;
        <span class="comment">// reportLost(fromUpperLayer.front());</span>

        <span class="comment">// delete the frame to transmit</span>
        <a class="code" href="class_mac80211_pkt.html">Mac80211Pkt</a> *temp = <a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.front();
        <a class="code" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50" title="Buffering of messages from upper layer.">fromUpperLayer</a>.pop_front();
        <span class="keyword">delete</span>(temp);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5f781f421a39d163f2baed01473801f8"></a><!-- doxytag: member="Mac80211::timerTypeName" ref="a5f781f421a39d163f2baed01473801f8" args="(int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * <a class="el" href="class_mac80211.html#a5f781f421a39d163f2baed01473801f8">Mac80211::timerTypeName</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Produce a readable name of the given timer type. </p>

<p>Definition at line <a class="el" href="_mac80211_8cc_source.html#l01024">1024</a> of file <a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00242">handleSelfMsg()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#define CASE(x) case x: s=#x; break</span>
<span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *s = <span class="stringliteral">&quot;???&quot;</span>;
    <span class="keywordflow">switch</span> (type)
    {
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186a317269d758fc1f055750d43926abbb2f">TIMEOUT</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ad2d7f908db1dc3ed72e451dad336d654">NAV</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ab091712e64b8b82a904b5819b44c0ce2">CONTENTION</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186a6aa35f51fc3714f21930242d9a802471">END_TRANSMISSION</a>);
        <a class="code" href="_ansa_ether_m_a_c_8cc.html#a60cc06bef97da802b8522d258ac4fe89">CASE</a>(<a class="code" href="class_mac80211.html#a381307739876ed0d015352b95bd93186ae116234508b0af14c6e33ff5627eef0a">END_SIFS</a>);
    }
    <span class="keywordflow">return</span> s;
<span class="preprocessor">#undef CASE</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a126c9db5a54bafa6ad74eb3ee24bd936"></a><!-- doxytag: member="Mac80211::bitrate" ref="a126c9db5a54bafa6ad74eb3ee24bd936" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_mac80211.html#a126c9db5a54bafa6ad74eb3ee24bd936">Mac80211::bitrate</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The bitrate should be set in omnetpp.ini; be sure to use a valid 802.11 bitrate. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00248">248</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l01001">computePacketDuration()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="afa01e3d776f586cab65b6cf45eac59d9"></a><!-- doxytag: member="Mac80211::broadcastBackoff" ref="afa01e3d776f586cab65b6cf45eac59d9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_mac80211.html#afa01e3d776f586cab65b6cf45eac59d9">Mac80211::broadcastBackoff</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Should be set in the omnetpp.ini. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00251">251</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00871">computeContentionWindow()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a8aa2e915f41c451a2c83de8aab09594c"></a><!-- doxytag: member="Mac80211::BW" ref="a8aa2e915f41c451a2c83de8aab09594c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_mac80211.html#a8aa2e915f41c451a2c83de8aab09594c">Mac80211::BW</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Variable to store the current backoff value. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00214">214</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00847">computeBackoff()</a>, <a class="el" href="_mac80211_8cc_source.html#l00506">handleEndContentionTimer()</a>, <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00914">receiveChangeNotification()</a>.</p>

</div>
</div>
<a class="anchor" id="aea1b09528a5051a1d08ec029177b8ef4"></a><!-- doxytag: member="Mac80211::contention" ref="aea1b09528a5051a1d08ec029177b8ef4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_mac80211.html#aea1b09528a5051a1d08ec029177b8ef4">Mac80211::contention</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer used for contention periods. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00201">201</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00799">beginNewCycle()</a>, <a class="el" href="_mac80211_8cc_source.html#l00285">handleMsgNotForMe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>, <a class="el" href="_mac80211_8cc_source.html#l00031">Mac80211()</a>, <a class="el" href="_mac80211_8cc_source.html#l00914">receiveChangeNotification()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00036">~Mac80211()</a>.</p>

</div>
</div>
<a class="anchor" id="ab9f0ea820748af6d640569fc76f39659"></a><!-- doxytag: member="Mac80211::delta" ref="ab9f0ea820748af6d640569fc76f39659" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_mac80211.html#ab9f0ea820748af6d640569fc76f39659">Mac80211::delta</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Very small value used in timer scheduling in order to avoid multiple changements of state in the same simulation time. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00244">244</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00972">computeTimeout()</a>, <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00641">sendACKframe()</a>.</p>

</div>
</div>
<a class="anchor" id="aba0a45a5ae60f3330f57655096b1364e"></a><!-- doxytag: member="Mac80211::EIFS" ref="aba0a45a5ae60f3330f57655096b1364e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_mac80211.html#aba0a45a5ae60f3330f57655096b1364e">Mac80211::EIFS</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>extended interframe space </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00211">211</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00285">handleMsgNotForMe()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="acbbc0f188ff710bbf60a5b64f2ce4dd4"></a><!-- doxytag: member="Mac80211::endSifs" ref="acbbc0f188ff710bbf60a5b64f2ce4dd4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_mac80211.html#acbbc0f188ff710bbf60a5b64f2ce4dd4">Mac80211::endSifs</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer used to indicate the end of a SIFS. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00208">208</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00472">handleCTSframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00428">handleDATAframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00576">handleEndSifsTimer()</a>, <a class="el" href="_mac80211_8cc_source.html#l00416">handleRTSframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00142">handleUpperMsg()</a>, <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>, <a class="el" href="_mac80211_8cc_source.html#l00031">Mac80211()</a>, <a class="el" href="_mac80211_8cc_source.html#l00914">receiveChangeNotification()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00036">~Mac80211()</a>.</p>

</div>
</div>
<a class="anchor" id="abe4522bcfe2b0a6d4275fe2be9226142"></a><!-- doxytag: member="Mac80211::endTransmission" ref="abe4522bcfe2b0a6d4275fe2be9226142" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_mac80211.html#abe4522bcfe2b0a6d4275fe2be9226142">Mac80211::endTransmission</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer used to indicate the end of the transmission of an ACK or a BROADCAST packet. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00205">205</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>, <a class="el" href="_mac80211_8cc_source.html#l00031">Mac80211()</a>, <a class="el" href="_mac80211_8cc_source.html#l00641">sendACKframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00693">sendBROADCASTframe()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00036">~Mac80211()</a>.</p>

</div>
</div>
<a class="anchor" id="a969e8e3a592dffccea28596c61b2af50"></a><!-- doxytag: member="Mac80211::fromUpperLayer" ref="a969e8e3a592dffccea28596c61b2af50" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_mac80211.html#a565ab82077f95d80ec44a4a4fed08ab9">MacPktList</a> <a class="el" href="class_mac80211.html#a969e8e3a592dffccea28596c61b2af50">Mac80211::fromUpperLayer</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Buffering of messages from upper layer. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00230">230</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00799">beginNewCycle()</a>, <a class="el" href="_mac80211_8cc_source.html#l00783">buildBROADCASTframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00709">buildDATAframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00746">buildRTSframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00972">computeTimeout()</a>, <a class="el" href="_mac80211_8cc_source.html#l00449">handleACKframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00506">handleEndContentionTimer()</a>, <a class="el" href="_mac80211_8cc_source.html#l00142">handleUpperMsg()</a>, <a class="el" href="_mac80211_8cc_source.html#l00914">receiveChangeNotification()</a>, <a class="el" href="_mac80211_8cc_source.html#l00693">sendBROADCASTframe()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00895">testMaxAttempts()</a>.</p>

</div>
</div>
<a class="anchor" id="a9df7f8967859f0870597e866677c8af5"></a><!-- doxytag: member="Mac80211::maxQueueSize" ref="a9df7f8967859f0870597e866677c8af5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_mac80211.html#a9df7f8967859f0870597e866677c8af5">Mac80211::maxQueueSize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Maximal number of packets in the queue; should be set in the omnetpp.ini. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00224">224</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00142">handleUpperMsg()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a575be19d3e428551aa4e3ecfb48fcf49"></a><!-- doxytag: member="Mac80211::myMacAddr" ref="a575be19d3e428551aa4e3ecfb48fcf49" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_a_c_address.html">MACAddress</a> <a class="el" href="class_mac80211.html#a575be19d3e428551aa4e3ecfb48fcf49">Mac80211::myMacAddr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>mac address </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00188">188</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00727">buildACKframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00765">buildCTSframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00709">buildDATAframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00175">encapsMsg()</a>, <a class="el" href="_mac80211_8cc_source.html#l00208">handleLowerMsg()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00086">registerInterface()</a>.</p>

</div>
</div>
<a class="anchor" id="a35efb0198d0085a341aba515bec9146f"></a><!-- doxytag: member="Mac80211::nav" ref="a35efb0198d0085a341aba515bec9146f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_mac80211.html#a35efb0198d0085a341aba515bec9146f">Mac80211::nav</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer used for the defer time of a node. Also called NAV : networks allocation vector. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00198">198</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00285">handleMsgNotForMe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>, <a class="el" href="_mac80211_8cc_source.html#l00031">Mac80211()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00036">~Mac80211()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d8e9b53c8d6cb0116feed506d843e18"></a><!-- doxytag: member="Mac80211::nextIsBroadcast" ref="a5d8e9b53c8d6cb0116feed506d843e18" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_mac80211.html#a5d8e9b53c8d6cb0116feed506d843e18">Mac80211::nextIsBroadcast</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Boolean used to know if the next packet is a broadcast packet. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00227">227</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00799">beginNewCycle()</a>, <a class="el" href="_mac80211_8cc_source.html#l00871">computeContentionWindow()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00506">handleEndContentionTimer()</a>.</p>

</div>
</div>
<a class="anchor" id="a1c357b92c014552612da4d21f2d1387b"></a><!-- doxytag: member="Mac80211::radioState" ref="a1c357b92c014552612da4d21f2d1387b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_radio_state.html#a9b2ff8c4d3f1cdb73af0a9fcea0d5449">RadioState::State</a> <a class="el" href="class_mac80211.html#a1c357b92c014552612da4d21f2d1387b">Mac80211::radioState</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Current state of the radio (kept updated by <a class="el" href="class_mac80211.html#a45135e1a304c496b8c51fef88145e7c0" title="Called by the NotificationBoard whenever a change occurs we&#39;re interested in.">receiveChangeNotification()</a>) </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00220">220</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00799">beginNewCycle()</a>, <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00914">receiveChangeNotification()</a>.</p>

</div>
</div>
<a class="anchor" id="a2e6f9111bcd385f606abf94da7e8b44e"></a><!-- doxytag: member="Mac80211::retryCounter" ref="a2e6f9111bcd385f606abf94da7e8b44e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_mac80211.html#a2e6f9111bcd385f606abf94da7e8b44e">Mac80211::retryCounter</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of frame transmission attempt. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00233">233</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00871">computeContentionWindow()</a>, <a class="el" href="_mac80211_8cc_source.html#l00449">handleACKframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>, <a class="el" href="_mac80211_8cc_source.html#l00619">sendDATAframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00659">sendRTSframe()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00895">testMaxAttempts()</a>.</p>

</div>
</div>
<a class="anchor" id="ad0d07dd20d64f623bba85ab34a708d34"></a><!-- doxytag: member="Mac80211::rtsCts" ref="ad0d07dd20d64f623bba85ab34a708d34" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_mac80211.html#ad0d07dd20d64f623bba85ab34a708d34">Mac80211::rtsCts</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>true if Rts/Cts is used, false if not; can be set in omnetpp.ini </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00240">240</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00709">buildDATAframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00428">handleDATAframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00506">handleEndContentionTimer()</a>, <a class="el" href="_mac80211_8cc_source.html#l00285">handleMsgNotForMe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00619">sendDATAframe()</a>.</p>

</div>
</div>
<a class="anchor" id="a56fa75f3eb056ae29b1a4b8da0035d8c"></a><!-- doxytag: member="Mac80211::state" ref="a56fa75f3eb056ae29b1a4b8da0035d8c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_mac80211.html#a7ff0b8b49d1a93feae6f808caf5fe447">State</a> <a class="el" href="class_mac80211.html#a56fa75f3eb056ae29b1a4b8da0035d8c">Mac80211::state</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Current state of the MAC. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00217">217</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00488">handleBroadcastMsg()</a>, <a class="el" href="_mac80211_8cc_source.html#l00506">handleEndContentionTimer()</a>, <a class="el" href="_mac80211_8cc_source.html#l00604">handleEndTransmissionTimer()</a>, <a class="el" href="_mac80211_8cc_source.html#l00208">handleLowerMsg()</a>, <a class="el" href="_mac80211_8cc_source.html#l00351">handleMsgForMe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00285">handleMsgNotForMe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00548">handleNavTimer()</a>, <a class="el" href="_mac80211_8cc_source.html#l00561">handleTimeoutTimer()</a>, <a class="el" href="_mac80211_8cc_source.html#l00142">handleUpperMsg()</a>, <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>, and <a class="el" href="_mac80211_8cc_source.html#l01061">setState()</a>.</p>

</div>
</div>
<a class="anchor" id="a2d31f97b0662b8e37f090c3b996cec82"></a><!-- doxytag: member="Mac80211::timeout" ref="a2d31f97b0662b8e37f090c3b996cec82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="class_mac80211.html#a2d31f97b0662b8e37f090c3b996cec82">Mac80211::timeout</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer used for time-outs after the transmission of a RTS, a CTS, or a DATA packet. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00194">194</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00449">handleACKframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00472">handleCTSframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00428">handleDATAframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00285">handleMsgNotForMe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00045">initialize()</a>, <a class="el" href="_mac80211_8cc_source.html#l00031">Mac80211()</a>, <a class="el" href="_mac80211_8cc_source.html#l00678">sendCTSframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00619">sendDATAframe()</a>, <a class="el" href="_mac80211_8cc_source.html#l00659">sendRTSframe()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00036">~Mac80211()</a>.</p>

</div>
</div>
<a class="anchor" id="aa04ef4245cd9721019b4e0b2d3164ec2"></a><!-- doxytag: member="Mac80211::tryWithoutBackoff" ref="aa04ef4245cd9721019b4e0b2d3164ec2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_mac80211.html#aa04ef4245cd9721019b4e0b2d3164ec2">Mac80211::tryWithoutBackoff</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If there's a new packet to send and the channel is free, no backoff is needed. </p>

<p>Definition at line <a class="el" href="_mac80211_8h_source.html#l00237">237</a> of file <a class="el" href="_mac80211_8h_source.html">Mac80211.h</a>.</p>

<p>Referenced by <a class="el" href="_mac80211_8cc_source.html#l00799">beginNewCycle()</a>, and <a class="el" href="_mac80211_8cc_source.html#l00142">handleUpperMsg()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_mac80211_8h_source.html">Mac80211.h</a></li>
<li><a class="el" href="_mac80211_8cc_source.html">Mac80211.cc</a></li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_mac80211.html">Mac80211</a>      </li>

    <li class="footer">Generated on Wed Aug 29 2012 21:13:09 for INET Framework for OMNeT++/OMNEST by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
