<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: TCPSACKRexmitQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_t_c_p_s_a_c_k_rexmit_queue.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">TCPSACKRexmitQueue Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="TCPSACKRexmitQueue" -->
<p><code>#include &lt;TCPSACKRexmitQueue.h&gt;</code></p>

<p><a href="class_t_c_p_s_a_c_k_rexmit_queue-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t_c_p_s_a_c_k_rexmit_queue_1_1_region.html">Region</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::list&lt; <a class="el" href="struct_t_c_p_s_a_c_k_rexmit_queue_1_1_region.html">Region</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a781aa79dc8c63e63e3c63862acc2a2e7">RexmitQueue</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a0bf1372385f41f2546fccab62c7f9a2d">TCPSACKRexmitQueue</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a2d307d6697c2059f8e31638254cc6b1c">~TCPSACKRexmitQueue</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a76c212912f59518e0b05a79c494ac0e2">setConnection</a> (<a class="el" href="class_t_c_p_connection.html">TCPConnection</a> *_conn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a342033845eaaf7a565c82fb70718ca0e">init</a> (uint32 seqNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ad2f55eea975ad487c30ce421de967424">str</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#af2d58fd127e40c421dde848d242f9e39">info</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a70457a2096dfd6e0f6dcf172bd9488cd">getBufferStartSeq</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#aab51c929cca62ab481aebf24ecaff747">getBufferEndSeq</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a07b77209c59eb50fce9751418039ed64">discardUpTo</a> (uint32 seqNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a6eb4b2c4417dfff97a1734c9a43fca76">enqueueSentData</a> (uint32 fromSeqNum, uint32 toSeqNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#abd0309b9f592a452399c73174bbd94cf">setSackedBit</a> (uint32 fromSeqNum, uint32 toSeqNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#af9d8cbda22d7ae05a8d367d69ec23127">getSackedBit</a> (uint32 seqNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ab06b7b8f9c9084d258bc14375a2f3b39">getQueueLength</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a56303d12ec8a593e9f4f58dabbb79d8d">getHighestSackedSeqNum</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a375f04cfa1ff9d8f044864332cc2fbaf">getHighestRexmittedSeqNum</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a8c83d42828fe0c5477981025d6d105fb">checkRexmitQueueForSackedOrRexmittedSegments</a> (uint32 fromSeq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#adfa5c6f04f91b16f9c98258f6ede0052">resetSackedBit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#afe96b5040346953484decf38ab2644e5">resetRexmittedBit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a9e3ff65826298ce1b2000bbd0bc04957">getTotalAmountOfSackedBytes</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ab41d57345e37e6db6d9e7a0db5ae0580">getAmountOfSackedBytes</a> (uint32 seqNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a54be5e710f72ed92239d5e20b0729b97">getNumOfDiscontiguousSacks</a> (uint32 seqNum)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_c_p_connection.html">TCPConnection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a0dcb9791b18a4c26ed38ad6593c2d470">conn</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a781aa79dc8c63e63e3c63862acc2a2e7">RexmitQueue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Retransmission data for SACK. </p>
</div><hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a781aa79dc8c63e63e3c63862acc2a2e7"></a><!-- doxytag: member="TCPSACKRexmitQueue::RexmitQueue" ref="a781aa79dc8c63e63e3c63862acc2a2e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::list&lt;<a class="el" href="struct_t_c_p_s_a_c_k_rexmit_queue_1_1_region.html">Region</a>&gt; <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a781aa79dc8c63e63e3c63862acc2a2e7">TCPSACKRexmitQueue::RexmitQueue</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0bf1372385f41f2546fccab62c7f9a2d"></a><!-- doxytag: member="TCPSACKRexmitQueue::TCPSACKRexmitQueue" ref="a0bf1372385f41f2546fccab62c7f9a2d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TCPSACKRexmitQueue::TCPSACKRexmitQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ctor </p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a0dcb9791b18a4c26ed38ad6593c2d470">conn</a> = NULL;
    <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a> = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a> = 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2d307d6697c2059f8e31638254cc6b1c"></a><!-- doxytag: member="TCPSACKRexmitQueue::~TCPSACKRexmitQueue" ref="a2d307d6697c2059f8e31638254cc6b1c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TCPSACKRexmitQueue::~TCPSACKRexmitQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Virtual dtor. </p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">while</span> (!<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.empty())
        <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.pop_front();
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a8c83d42828fe0c5477981025d6d105fb"></a><!-- doxytag: member="TCPSACKRexmitQueue::checkRexmitQueueForSackedOrRexmittedSegments" ref="a8c83d42828fe0c5477981025d6d105fb" args="(uint32 fromSeq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 TCPSACKRexmitQueue::checkRexmitQueueForSackedOrRexmittedSegments </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>fromSeq</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks rexmit queue for sacked of rexmitted segments and returns a certain offset (contiguous sacked or rexmitted region) to forward snd-&gt;nxt. It is called before retransmitting data. </p>

<p>Referenced by <a class="el" href="class_t_c_p_connection.html#af71155c4fad49ea52907d840463a06d5">TCPConnection::sendSegment()</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32 counter = 0;

    <span class="keywordflow">if</span> (fromSeqNum==0 || <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.empty() || !(<a class="code" href="_t_c_p_segment_8h.html#a55ef269e8ae44948c1d1f1cbe14bc92b">seqLE</a>(<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a>,fromSeqNum) &amp;&amp; <a class="code" href="_t_c_p_segment_8h.html#a55ef269e8ae44948c1d1f1cbe14bc92b">seqLE</a>(fromSeqNum,<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a>)))
        <span class="keywordflow">return</span> counter;

    RexmitQueue::iterator i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
    <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end())
    {
        <span class="comment">// search for fromSeqNum (snd_nxt)</span>
        <span class="keywordflow">if</span> (i-&gt;beginSeqNum == fromSeqNum)
            <span class="keywordflow">break</span>;
        <span class="keywordflow">else</span>
            i++;
    }

    <span class="comment">// search for adjacent sacked/rexmitted regions</span>
    <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end())
    {
        <span class="keywordflow">if</span> (i-&gt;sacked || i-&gt;rexmitted)
        {
            counter = counter + (i-&gt;endSeqNum - i-&gt;beginSeqNum);

            <span class="comment">// adjacent regions?</span>
            uint32 tmp = i-&gt;endSeqNum;
            i++;
            <span class="keywordflow">if</span> (i-&gt;beginSeqNum != tmp)
                <span class="keywordflow">break</span>;
        }
        <span class="keywordflow">else</span>
            <span class="keywordflow">break</span>;
    }
    <span class="keywordflow">return</span> counter;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a07b77209c59eb50fce9751418039ed64"></a><!-- doxytag: member="TCPSACKRexmitQueue::discardUpTo" ref="a07b77209c59eb50fce9751418039ed64" args="(uint32 seqNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TCPSACKRexmitQueue::discardUpTo </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>seqNum</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Tells the queue that bytes up to (but NOT including) seqNum have been transmitted and ACKed, so they can be removed from the queue. </p>

<p>Referenced by <a class="el" href="class_t_c_p_connection.html#ac1144f5ca6e960176d6e623998cb7456">TCPConnection::processAckInEstabEtc()</a>, <a class="el" href="class_t_c_p_connection.html#a4d240ca8f36aa37a29b8bcc44ec052cd">TCPConnection::processRstInSynReceived()</a>, and <a class="el" href="class_t_c_p_connection.html#a12b903f9e148f5c26f926dcdc8107c86">TCPConnection::processSegmentInSynSent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.empty())
        <span class="keywordflow">return</span>;

    ASSERT(<a class="code" href="_t_c_p_segment_8h.html#a55ef269e8ae44948c1d1f1cbe14bc92b">seqLE</a>(<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a>,seqNum) &amp;&amp; <a class="code" href="_t_c_p_segment_8h.html#a55ef269e8ae44948c1d1f1cbe14bc92b">seqLE</a>(seqNum,<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a>));
    <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a> = seqNum;

    RexmitQueue::iterator i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
    <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end()) <span class="comment">// discard/delete regions from rexmit queue, which have been acked</span>
    {
        <span class="keywordflow">if</span> (<a class="code" href="_t_c_p_segment_8h.html#aa2e84a0093c6f222b12a4b443c7278eb">seqLess</a>(i-&gt;beginSeqNum,<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a>))
            i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.erase(i);
        <span class="keywordflow">else</span>
            i++;
    }

    <span class="comment">// update begin and end of rexmit queue</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.empty())
        <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a> = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a> = 0;
    <span class="keywordflow">else</span>
    {
        i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
        <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a> = i-&gt;beginSeqNum;
        i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end();
        <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a> = i-&gt;endSeqNum;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6eb4b2c4417dfff97a1734c9a43fca76"></a><!-- doxytag: member="TCPSACKRexmitQueue::enqueueSentData" ref="a6eb4b2c4417dfff97a1734c9a43fca76" args="(uint32 fromSeqNum, uint32 toSeqNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TCPSACKRexmitQueue::enqueueSentData </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>fromSeqNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>toSeqNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Inserts sent data to the rexmit queue. </p>

<p>Referenced by <a class="el" href="class_t_c_p_connection.html#af71155c4fad49ea52907d840463a06d5">TCPConnection::sendSegment()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;

    <a class="code" href="_t_c_p_8h.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="stringliteral">&quot;rexmitQ: &quot;</span> &lt;&lt; <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ad2f55eea975ad487c30ce421de967424">str</a>() &lt;&lt; <span class="stringliteral">&quot; enqueueSentData [&quot;</span> &lt;&lt; fromSeqNum &lt;&lt; <span class="stringliteral">&quot;..&quot;</span> &lt;&lt; toSeqNum &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;

    Region region;
    region.beginSeqNum = fromSeqNum;
    region.endSeqNum = toSeqNum;
    region.sacked = <span class="keyword">false</span>;
    region.rexmitted = <span class="keyword">false</span>;

    <span class="keywordflow">if</span> (<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ab06b7b8f9c9084d258bc14375a2f3b39">getQueueLength</a>()==0)
    {
        <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a> = fromSeqNum;
        <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a> = toSeqNum;
        <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.push_back(region);
<span class="comment">//        tcpEV &lt;&lt; &quot;rexmitQ: rexmitQLength=&quot; &lt;&lt; getQueueLength() &lt;&lt; &quot;\n&quot;;</span>
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> (<a class="code" href="_t_c_p_segment_8h.html#a55ef269e8ae44948c1d1f1cbe14bc92b">seqLE</a>(<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a>,fromSeqNum) &amp;&amp; <a class="code" href="_t_c_p_segment_8h.html#a55ef269e8ae44948c1d1f1cbe14bc92b">seqLE</a>(toSeqNum,<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a>))
    {
        <span class="comment">// Search for region in queue!</span>
        RexmitQueue::iterator i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
        <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end())
        {
            <span class="keywordflow">if</span> (i-&gt;beginSeqNum == fromSeqNum &amp;&amp; i-&gt;endSeqNum == toSeqNum)
            {
                i-&gt;rexmitted = <span class="keyword">true</span>; <span class="comment">// set rexmitted bit</span>
                found = <span class="keyword">true</span>;
            }
            i++;
        }
    }

    <span class="keywordflow">if</span> (!found)
    {
        <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a> = toSeqNum;
        <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.push_back(region);
    }
<span class="comment">//    tcpEV &lt;&lt; &quot;rexmitQ: rexmitQLength=&quot; &lt;&lt; getQueueLength() &lt;&lt; &quot;\n&quot;;</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab41d57345e37e6db6d9e7a0db5ae0580"></a><!-- doxytag: member="TCPSACKRexmitQueue::getAmountOfSackedBytes" ref="ab41d57345e37e6db6d9e7a0db5ae0580" args="(uint32 seqNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 TCPSACKRexmitQueue::getAmountOfSackedBytes </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>seqNum</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns amount of sacked bytes above seqNum. </p>

<p>Referenced by <a class="el" href="class_t_c_p_connection.html#a261dc1ebd41e03d655b112f2b82b3f08">TCPConnection::isLost()</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32 bytes = 0;
    uint32 counter = 0;

    <span class="keywordflow">if</span> (<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.empty() || <a class="code" href="_t_c_p_segment_8h.html#af4745b9cf95eb5b78d8ae6c3c8429cfc">seqGE</a>(seqNum,<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a>))
        <span class="keywordflow">return</span> counter;

    RexmitQueue::iterator i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
    <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end() &amp;&amp; <a class="code" href="_t_c_p_segment_8h.html#aa2e84a0093c6f222b12a4b443c7278eb">seqLess</a>(i-&gt;beginSeqNum, seqNum)) <span class="comment">// search for seqNum</span>
    {
        i++;
        <span class="keywordflow">if</span> (i-&gt;beginSeqNum == seqNum)
            <span class="keywordflow">break</span>;
    }

    ASSERT(<a class="code" href="_t_c_p_segment_8h.html#a55ef269e8ae44948c1d1f1cbe14bc92b">seqLE</a>(seqNum,i-&gt;beginSeqNum) || <a class="code" href="_t_c_p_segment_8h.html#af4745b9cf95eb5b78d8ae6c3c8429cfc">seqGE</a>(seqNum,--i-&gt;endSeqNum));

    <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end())
    {
        <span class="keywordflow">if</span> (i-&gt;sacked)
        {
            counter++;
            bytes = bytes + (i-&gt;endSeqNum - i-&gt;beginSeqNum);
        }
        i++;
    }
    <span class="keywordflow">return</span> bytes;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aab51c929cca62ab481aebf24ecaff747"></a><!-- doxytag: member="TCPSACKRexmitQueue::getBufferEndSeq" ref="aab51c929cca62ab481aebf24ecaff747" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 TCPSACKRexmitQueue::getBufferEndSeq </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the sequence number of the last byte stored in the buffer plus one. (The first byte of the next send operation would get this sequence number.) </p>

<p>Referenced by <a class="el" href="class_t_c_p_connection.html#a4d240ca8f36aa37a29b8bcc44ec052cd">TCPConnection::processRstInSynReceived()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a70457a2096dfd6e0f6dcf172bd9488cd"></a><!-- doxytag: member="TCPSACKRexmitQueue::getBufferStartSeq" ref="a70457a2096dfd6e0f6dcf172bd9488cd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 TCPSACKRexmitQueue::getBufferStartSeq </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the sequence number of the first byte stored in the buffer. </p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a375f04cfa1ff9d8f044864332cc2fbaf"></a><!-- doxytag: member="TCPSACKRexmitQueue::getHighestRexmittedSeqNum" ref="a375f04cfa1ff9d8f044864332cc2fbaf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 TCPSACKRexmitQueue::getHighestRexmittedSeqNum </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the highest sequence number rexmitted by data sender. </p>

<p>Referenced by <a class="el" href="class_t_c_p_connection.html#ae8d9450252219a54062112f6d8688309">TCPConnection::nextSeg()</a>, <a class="el" href="class_t_c_p_connection.html#a8ae68910942bd1ea6558ae7849ae22ea">TCPConnection::retransmitOneSegment()</a>, <a class="el" href="class_t_c_p_connection.html#a0238c323366884c6598d7d92d21f69ab">TCPConnection::sendData()</a>, <a class="el" href="class_t_c_p_connection.html#ac922b39992f510ef7803067e675d80f1">TCPConnection::sendSegmentDuringLossRecoveryPhase()</a>, and <a class="el" href="class_t_c_p_connection.html#a728bea28fa24566bb22935f0de7c4655">TCPConnection::setPipe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32 tmp_highest_rexmitted = 0;

    RexmitQueue::iterator i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
    <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end())
    {
        <span class="keywordflow">if</span> (i-&gt;rexmitted)
            tmp_highest_rexmitted = i-&gt;endSeqNum;
        i++;
    }
    <span class="keywordflow">return</span> tmp_highest_rexmitted;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a56303d12ec8a593e9f4f58dabbb79d8d"></a><!-- doxytag: member="TCPSACKRexmitQueue::getHighestSackedSeqNum" ref="a56303d12ec8a593e9f4f58dabbb79d8d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 TCPSACKRexmitQueue::getHighestSackedSeqNum </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the highest sequence number sacked by data receiver. </p>

<p>Referenced by <a class="el" href="class_t_c_p_connection.html#ae8d9450252219a54062112f6d8688309">TCPConnection::nextSeg()</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32 tmp_highest_sacked = 0;

    RexmitQueue::iterator i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
    <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end())
    {
        <span class="keywordflow">if</span> (i-&gt;sacked)
            tmp_highest_sacked = i-&gt;endSeqNum;
        i++;
    }
    <span class="keywordflow">return</span> tmp_highest_sacked;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a54be5e710f72ed92239d5e20b0729b97"></a><!-- doxytag: member="TCPSACKRexmitQueue::getNumOfDiscontiguousSacks" ref="a54be5e710f72ed92239d5e20b0729b97" args="(uint32 seqNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 TCPSACKRexmitQueue::getNumOfDiscontiguousSacks </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>seqNum</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of discontiguous sacked regions (SACKed sequences) above seqNum. </p>

<p>Referenced by <a class="el" href="class_t_c_p_connection.html#a261dc1ebd41e03d655b112f2b82b3f08">TCPConnection::isLost()</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32 counter = 0;

    <span class="keywordflow">if</span> (<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.empty() || <a class="code" href="_t_c_p_segment_8h.html#af4745b9cf95eb5b78d8ae6c3c8429cfc">seqGE</a>(seqNum,<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a>))
        <span class="keywordflow">return</span> counter;

    RexmitQueue::iterator i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
    <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end() &amp;&amp; <a class="code" href="_t_c_p_segment_8h.html#aa2e84a0093c6f222b12a4b443c7278eb">seqLess</a>(i-&gt;beginSeqNum, seqNum)) <span class="comment">// search for seqNum</span>
    {
        i++;
        <span class="keywordflow">if</span> (i-&gt;beginSeqNum == seqNum)
            <span class="keywordflow">break</span>;
    }

    ASSERT(<a class="code" href="_t_c_p_segment_8h.html#a55ef269e8ae44948c1d1f1cbe14bc92b">seqLE</a>(seqNum,i-&gt;beginSeqNum) || <a class="code" href="_t_c_p_segment_8h.html#af4745b9cf95eb5b78d8ae6c3c8429cfc">seqGE</a>(seqNum,--i-&gt;endSeqNum));

    <span class="comment">// search for discontiguous sacked regions</span>
    <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end())
    {
        <span class="keywordflow">if</span> (i-&gt;sacked)
        {
            counter++;
            uint32 tmp = i-&gt;endSeqNum;
            i++;
            <span class="keywordflow">while</span> (i-&gt;sacked &amp;&amp; i-&gt;beginSeqNum == tmp &amp;&amp; i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end()) <span class="comment">// adjacent sacked regions?</span>
            {
                tmp = i-&gt;endSeqNum;
                i++;
            }
        }
        <span class="keywordflow">else</span>
            i++;
    }
    <span class="keywordflow">return</span> counter;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab06b7b8f9c9084d258bc14375a2f3b39"></a><!-- doxytag: member="TCPSACKRexmitQueue::getQueueLength" ref="ab06b7b8f9c9084d258bc14375a2f3b39" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 TCPSACKRexmitQueue::getQueueLength </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the number of blocks currently buffered in queue. </p>

<p>Referenced by <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a6eb4b2c4417dfff97a1734c9a43fca76">enqueueSentData()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.size();
}
</pre></div>
</div>
</div>
<a class="anchor" id="af9d8cbda22d7ae05a8d367d69ec23127"></a><!-- doxytag: member="TCPSACKRexmitQueue::getSackedBit" ref="af9d8cbda22d7ae05a8d367d69ec23127" args="(uint32 seqNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TCPSACKRexmitQueue::getSackedBit </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>seqNum</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns SackedBit value of seqNum. </p>

<p>Referenced by <a class="el" href="class_t_c_p_connection.html#ae8d9450252219a54062112f6d8688309">TCPConnection::nextSeg()</a>, and <a class="el" href="class_t_c_p_connection.html#a728bea28fa24566bb22935f0de7c4655">TCPConnection::setPipe()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;

    <span class="keywordflow">if</span> (<a class="code" href="_t_c_p_segment_8h.html#a55ef269e8ae44948c1d1f1cbe14bc92b">seqLE</a>(<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a>,seqNum))
    {
        RexmitQueue::iterator i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
        <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end())
        {
            <span class="keywordflow">if</span> (i-&gt;beginSeqNum == seqNum) <span class="comment">// Search for region in queue!</span>
            {
                found = i-&gt;sacked;
                <span class="keywordflow">break</span>;
            }
            i++;
        }
    }
    <span class="keywordflow">return</span> found;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9e3ff65826298ce1b2000bbd0bc04957"></a><!-- doxytag: member="TCPSACKRexmitQueue::getTotalAmountOfSackedBytes" ref="a9e3ff65826298ce1b2000bbd0bc04957" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 TCPSACKRexmitQueue::getTotalAmountOfSackedBytes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns total amount of sacked bytes. Corresponds to update() function from RFC 3517. </p>

<p>Referenced by <a class="el" href="class_t_c_p_connection.html#a33b50078727564bd2c4e7e906e2f1648">TCPConnection::processSACKOption()</a>.</p>
<div class="fragment"><pre class="fragment">{
    uint32 bytes = 0;
    uint32 counter = 0;

    RexmitQueue::iterator i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
    <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end())
    {
        <span class="keywordflow">if</span> (i-&gt;sacked)
        {
            counter++;
            bytes = bytes + (i-&gt;endSeqNum - i-&gt;beginSeqNum);
        }
        i++;
    }
    <span class="keywordflow">return</span> bytes;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af2d58fd127e40c421dde848d242f9e39"></a><!-- doxytag: member="TCPSACKRexmitQueue::info" ref="af2d58fd127e40c421dde848d242f9e39" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TCPSACKRexmitQueue::info </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Prints the current rexmitQueue status for debug purposes. </p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ad2f55eea975ad487c30ce421de967424">str</a>();
    RexmitQueue::iterator i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
    <a class="code" href="_i_n_e_t_defs_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> j = 1;
    <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end())
    {
        <a class="code" href="_t_c_p_8h.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot;. region: [&quot;</span> &lt;&lt; i-&gt;beginSeqNum &lt;&lt; <span class="stringliteral">&quot;..&quot;</span> &lt;&lt; i-&gt;endSeqNum &lt;&lt; <span class="stringliteral">&quot;) \t sacked=&quot;</span> &lt;&lt; i-&gt;sacked &lt;&lt; <span class="stringliteral">&quot;\t rexmitted=&quot;</span> &lt;&lt; i-&gt;rexmitted &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
        i++;
        j++;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a342033845eaaf7a565c82fb70718ca0e"></a><!-- doxytag: member="TCPSACKRexmitQueue::init" ref="a342033845eaaf7a565c82fb70718ca0e" args="(uint32 seqNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TCPSACKRexmitQueue::init </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>seqNum</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize the object. The startSeq parameter tells what sequence number the first byte of app data should get. This is usually ISS+1 because SYN consumes one byte in the sequence number space.</p>
<p><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a342033845eaaf7a565c82fb70718ca0e">init()</a> may be called more than once; every call flushes the existing contents of the queue. </p>

<p>Referenced by <a class="el" href="class_t_c_p_connection.html#a585bbcdd70565eb01b6bfe17a1487c78">TCPConnection::selectInitialSeqNum()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a> = seqNum;
    <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a> = seqNum;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afe96b5040346953484decf38ab2644e5"></a><!-- doxytag: member="TCPSACKRexmitQueue::resetRexmittedBit" ref="afe96b5040346953484decf38ab2644e5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TCPSACKRexmitQueue::resetRexmittedBit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called when REXMIT timer expired. Resets rexmitted bit of all segments in rexmit queue. </p>

<p>Referenced by <a class="el" href="class_t_c_p_base_alg.html#ac8a305a437d4eafd1689204e50af8870">TCPBaseAlg::processRexmitTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    RexmitQueue::iterator i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
    <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end())
    {
        i-&gt;rexmitted = <span class="keyword">false</span>; <span class="comment">// reset rexmitted bit</span>
        i++;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="adfa5c6f04f91b16f9c98258f6ede0052"></a><!-- doxytag: member="TCPSACKRexmitQueue::resetSackedBit" ref="adfa5c6f04f91b16f9c98258f6ede0052" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TCPSACKRexmitQueue::resetSackedBit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called when REXMIT timer expired. Resets sacked bit of all segments in rexmit queue. </p>

<p>Referenced by <a class="el" href="class_t_c_p_base_alg.html#ac8a305a437d4eafd1689204e50af8870">TCPBaseAlg::processRexmitTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    RexmitQueue::iterator i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
    <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end())
    {
        i-&gt;sacked = <span class="keyword">false</span>; <span class="comment">// reset sacked bit</span>
        i++;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a76c212912f59518e0b05a79c494ac0e2"></a><!-- doxytag: member="TCPSACKRexmitQueue::setConnection" ref="a76c212912f59518e0b05a79c494ac0e2" args="(TCPConnection *_conn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void TCPSACKRexmitQueue::setConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_c_p_connection.html">TCPConnection</a> *&#160;</td>
          <td class="paramname"><em>_conn</em></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the connection that owns this queue. </p>

<p>Referenced by <a class="el" href="class_t_c_p_connection.html#a1d5624dcbc77e79d142f6a886b3e788d">TCPConnection::cloneListeningConnection()</a>, and <a class="el" href="class_t_c_p_connection.html#a69caa8ea0ffbe8d9f73f935aac1b29d9">TCPConnection::initConnection()</a>.</p>
<div class="fragment"><pre class="fragment">{<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a0dcb9791b18a4c26ed38ad6593c2d470">conn</a> = _conn;}
</pre></div>
</div>
</div>
<a class="anchor" id="abd0309b9f592a452399c73174bbd94cf"></a><!-- doxytag: member="TCPSACKRexmitQueue::setSackedBit" ref="abd0309b9f592a452399c73174bbd94cf" args="(uint32 fromSeqNum, uint32 toSeqNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TCPSACKRexmitQueue::setSackedBit </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>fromSeqNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>toSeqNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called when data sender received selective acknowledgments. Tells the queue which bytes have been transmitted and SACKed, so they can be skipped if retransmitting segments as long as REXMIT timer did not expired. </p>

<p>Referenced by <a class="el" href="class_t_c_p_connection.html#a33b50078727564bd2c4e7e906e2f1648">TCPConnection::processSACKOption()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;

    <span class="keywordflow">if</span> (<a class="code" href="_t_c_p_segment_8h.html#a55ef269e8ae44948c1d1f1cbe14bc92b">seqLE</a>(toSeqNum,<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a>))
    {
        RexmitQueue::iterator i = <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.begin();
        <span class="keywordflow">while</span> (i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end())
        {
            <span class="keywordflow">if</span> (i-&gt;beginSeqNum == fromSeqNum &amp;&amp; <a class="code" href="_t_c_p_segment_8h.html#af4745b9cf95eb5b78d8ae6c3c8429cfc">seqGE</a>(toSeqNum, i-&gt;endSeqNum)) <span class="comment">// Search for LE of region in queue!</span>
            {
                i-&gt;sacked = <span class="keyword">true</span>; <span class="comment">// set sacked bit</span>
                found = <span class="keyword">true</span>;
                i++;
                <span class="keywordflow">while</span> (<a class="code" href="_t_c_p_segment_8h.html#af4745b9cf95eb5b78d8ae6c3c8429cfc">seqGE</a>(toSeqNum, i-&gt;endSeqNum) &amp;&amp; i!=<a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">rexmitQueue</a>.end()) <span class="comment">// Search for RE of region in queue!</span>
                {
                    i-&gt;sacked = <span class="keyword">true</span>; <span class="comment">// set sacked bit</span>
                    i++;
                }
            }
            <span class="keywordflow">else</span>
                i++;
        }
    }

    <span class="keywordflow">if</span> (!found)
        <a class="code" href="_t_c_p_8h.html#a601325e92d65fe658c80eab711e12304">tcpEV</a> &lt;&lt; <span class="stringliteral">&quot;FAILED to set sacked bit for region: [&quot;</span> &lt;&lt; fromSeqNum &lt;&lt; <span class="stringliteral">&quot;..&quot;</span> &lt;&lt; toSeqNum &lt;&lt; <span class="stringliteral">&quot;). Not found in retransmission queue.\n&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad2f55eea975ad487c30ce421de967424"></a><!-- doxytag: member="TCPSACKRexmitQueue::str" ref="ad2f55eea975ad487c30ce421de967424" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string TCPSACKRexmitQueue::str </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a string for debug purposes. </p>

<p>Referenced by <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a6eb4b2c4417dfff97a1734c9a43fca76">enqueueSentData()</a>, and <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#af2d58fd127e40c421dde848d242f9e39">info()</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::stringstream out;
    out &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">begin</a> &lt;&lt; <span class="stringliteral">&quot;..&quot;</span> &lt;&lt; <a class="code" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">end</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;
    <span class="keywordflow">return</span> out.str();
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a30eef9065593a675b29a696fa7ca3ae4"></a><!-- doxytag: member="TCPSACKRexmitQueue::begin" ref="a30eef9065593a675b29a696fa7ca3ae4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a30eef9065593a675b29a696fa7ca3ae4">TCPSACKRexmitQueue::begin</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a8c83d42828fe0c5477981025d6d105fb">checkRexmitQueueForSackedOrRexmittedSegments()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a07b77209c59eb50fce9751418039ed64">discardUpTo()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a6eb4b2c4417dfff97a1734c9a43fca76">enqueueSentData()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a70457a2096dfd6e0f6dcf172bd9488cd">getBufferStartSeq()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#af9d8cbda22d7ae05a8d367d69ec23127">getSackedBit()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a342033845eaaf7a565c82fb70718ca0e">init()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ad2f55eea975ad487c30ce421de967424">str()</a>, and <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a0bf1372385f41f2546fccab62c7f9a2d">TCPSACKRexmitQueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a0dcb9791b18a4c26ed38ad6593c2d470"></a><!-- doxytag: member="TCPSACKRexmitQueue::conn" ref="a0dcb9791b18a4c26ed38ad6593c2d470" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p_connection.html">TCPConnection</a>* <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a0dcb9791b18a4c26ed38ad6593c2d470">TCPSACKRexmitQueue::conn</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a0bf1372385f41f2546fccab62c7f9a2d">TCPSACKRexmitQueue()</a>.</p>

</div>
</div>
<a class="anchor" id="ac55cc23bb0a9903e374fd66794317ca6"></a><!-- doxytag: member="TCPSACKRexmitQueue::end" ref="ac55cc23bb0a9903e374fd66794317ca6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ac55cc23bb0a9903e374fd66794317ca6">TCPSACKRexmitQueue::end</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a8c83d42828fe0c5477981025d6d105fb">checkRexmitQueueForSackedOrRexmittedSegments()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a07b77209c59eb50fce9751418039ed64">discardUpTo()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a6eb4b2c4417dfff97a1734c9a43fca76">enqueueSentData()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ab41d57345e37e6db6d9e7a0db5ae0580">getAmountOfSackedBytes()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#aab51c929cca62ab481aebf24ecaff747">getBufferEndSeq()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a54be5e710f72ed92239d5e20b0729b97">getNumOfDiscontiguousSacks()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a342033845eaaf7a565c82fb70718ca0e">init()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#abd0309b9f592a452399c73174bbd94cf">setSackedBit()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ad2f55eea975ad487c30ce421de967424">str()</a>, and <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a0bf1372385f41f2546fccab62c7f9a2d">TCPSACKRexmitQueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a5cc1ca7db78dbb6e1454a87ba62bdd8e"></a><!-- doxytag: member="TCPSACKRexmitQueue::rexmitQueue" ref="a5cc1ca7db78dbb6e1454a87ba62bdd8e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a781aa79dc8c63e63e3c63862acc2a2e7">RexmitQueue</a> <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a5cc1ca7db78dbb6e1454a87ba62bdd8e">TCPSACKRexmitQueue::rexmitQueue</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a8c83d42828fe0c5477981025d6d105fb">checkRexmitQueueForSackedOrRexmittedSegments()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a07b77209c59eb50fce9751418039ed64">discardUpTo()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a6eb4b2c4417dfff97a1734c9a43fca76">enqueueSentData()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ab41d57345e37e6db6d9e7a0db5ae0580">getAmountOfSackedBytes()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a375f04cfa1ff9d8f044864332cc2fbaf">getHighestRexmittedSeqNum()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a56303d12ec8a593e9f4f58dabbb79d8d">getHighestSackedSeqNum()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a54be5e710f72ed92239d5e20b0729b97">getNumOfDiscontiguousSacks()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#ab06b7b8f9c9084d258bc14375a2f3b39">getQueueLength()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#af9d8cbda22d7ae05a8d367d69ec23127">getSackedBit()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a9e3ff65826298ce1b2000bbd0bc04957">getTotalAmountOfSackedBytes()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#af2d58fd127e40c421dde848d242f9e39">info()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#afe96b5040346953484decf38ab2644e5">resetRexmittedBit()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#adfa5c6f04f91b16f9c98258f6ede0052">resetSackedBit()</a>, <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#abd0309b9f592a452399c73174bbd94cf">setSackedBit()</a>, and <a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html#a2d307d6697c2059f8e31638254cc6b1c">~TCPSACKRexmitQueue()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_t_c_p_s_a_c_k_rexmit_queue_8h.html">TCPSACKRexmitQueue.h</a></li>
<li><a class="el" href="_t_c_p_s_a_c_k_rexmit_queue_8cc.html">TCPSACKRexmitQueue.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_t_c_p_s_a_c_k_rexmit_queue.html">TCPSACKRexmitQueue</a>      </li>
      <li class="footer">Generated on Fri Nov 18 2011 12:47:16 for INET Framework for OMNeT++/OMNEST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
