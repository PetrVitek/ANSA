<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>INET Framework for OMNeT++/OMNEST: EtherMAC2 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_ether_m_a_c2.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">EtherMAC2 Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="EtherMAC2" --><!-- doxytag: inherits="EtherMACBase" -->
<p><code>#include &lt;EtherMAC2.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for EtherMAC2:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_ether_m_a_c2.png" usemap="#EtherMAC2_map" alt=""/>
  <map id="EtherMAC2_map" name="EtherMAC2_map">
<area href="class_ether_m_a_c_base.html" alt="EtherMACBase" shape="rect" coords="0,56,99,80"/>
<area href="class_i_notifiable.html" alt="INotifiable" shape="rect" coords="0,0,99,24"/>
</map>
 </div></div>

<p><a href="class_ether_m_a_c2-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c2.html#a062b706683fc189ef801d2de575f9104">EtherMAC2</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c2.html#a3cba3d7dffc3ce909e15fca2f4dc2df0">initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c2.html#ae8f4a803a71b228788f9de004fd5684f">initializeTxrate</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c2.html#afe9ce9d3adc1c3c1e03bf1e70e63e384">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c2.html#a45173ef5b47b8bfc5364029ddfc6ef97">startFrameTransmission</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c2.html#ae2282425df57f971c00bb3fad7222334">processFrameFromUpperLayer</a> (EtherFrame *frame)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c2.html#affe85a14532305b2b2a438f93a927594">processMsgFromNetwork</a> (cPacket *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c2.html#a6f1d75e8d33527ebe1d6d1682cd21c5a">handleEndIFGPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c2.html#ae923bc088641c0c99075fbfd91fddc57">handleEndTxPeriod</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ether_m_a_c2.html#a4fef0959987ad6c1c6da607ae6773331">updateHasSubcribers</a> ()</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A simplified version of <a class="el" href="class_ether_m_a_c.html">EtherMAC</a>. Since modern Ethernets typically operate over duplex links where's no contention, the original CSMA/CD algorithm is no longer needed. This simplified implementation doesn't contain CSMA/CD, frames are just simply queued and sent out one by one. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a062b706683fc189ef801d2de575f9104"></a><!-- doxytag: member="EtherMAC2::EtherMAC2" ref="a062b706683fc189ef801d2de575f9104" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EtherMAC2::EtherMAC2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a6f1d75e8d33527ebe1d6d1682cd21c5a"></a><!-- doxytag: member="EtherMAC2::handleEndIFGPeriod" ref="a6f1d75e8d33527ebe1d6d1682cd21c5a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC2::handleEndIFGPeriod </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#aa74e941ddd6ec84cba15b515a8637da0">EtherMACBase</a>.</p>

<p>Referenced by <a class="el" href="class_ether_m_a_c2.html#afe9ce9d3adc1c3c1e03bf1e70e63e384">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c2.html#a6f1d75e8d33527ebe1d6d1682cd21c5a">EtherMACBase::handleEndIFGPeriod</a>();

    <a class="code" href="class_ether_m_a_c2.html#a45173ef5b47b8bfc5364029ddfc6ef97">startFrameTransmission</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae923bc088641c0c99075fbfd91fddc57"></a><!-- doxytag: member="EtherMAC2::handleEndTxPeriod" ref="ae923bc088641c0c99075fbfd91fddc57" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC2::handleEndTxPeriod </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#aeef682be2263580f2bc857f326494ad7">EtherMACBase</a>.</p>

<p>Referenced by <a class="el" href="class_ether_m_a_c2.html#afe9ce9d3adc1c3c1e03bf1e70e63e384">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a302d966ed62ce375d5a3e320b2131ecd">hasSubscribers</a>)
    {
        <span class="comment">// fire notification</span>
        <a class="code" href="class_ether_m_a_c_base.html#acb06f2e60542cb3128065506b52d0806">notifDetails</a>.<a class="code" href="class_tx_notif_details.html#a13390b6f2e423838865ae60d3c85e8f3">setPacket</a>((cPacket *)<a class="code" href="class_ether_m_a_c_base.html#af821fd79d625be2536582fb50f4eadd9">txQueue</a>.front());
        <a class="code" href="class_ether_m_a_c_base.html#a60ced9495a8ce5a79d8cadd89aeafde9">nb</a>-&gt;<a class="code" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba56008b8da6a282b976bc88936bf4af10">NF_PP_TX_END</a>, &amp;<a class="code" href="class_ether_m_a_c_base.html#acb06f2e60542cb3128065506b52d0806">notifDetails</a>);
    }

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#aab5753d09b37edd82c1a853b8363d7b1">checkAndScheduleEndPausePeriod</a>())
        <span class="keywordflow">return</span>;

    <a class="code" href="class_ether_m_a_c2.html#ae923bc088641c0c99075fbfd91fddc57">EtherMACBase::handleEndTxPeriod</a>();

    <a class="code" href="class_ether_m_a_c_base.html#a1badd37f8bafc8901b37402dbe3184f2">beginSendFrames</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="afe9ce9d3adc1c3c1e03bf1e70e63e384"></a><!-- doxytag: member="EtherMAC2::handleMessage" ref="afe9ce9d3adc1c3c1e03bf1e70e63e384" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC2::handleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="class_ether_m_a_c_base.html#ace95f162bb4a264cded6f61154885b04">connected</a>)
        <a class="code" href="class_ether_m_a_c_base.html#ad8e6457ae8bd03c5699d6dc2cc8e3f48">processMessageWhenNotConnected</a>(msg);
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a3ab55f66782d6fae503fd9c062896dc7">disabled</a>)
        <a class="code" href="class_ether_m_a_c_base.html#a2a0702c1998d2bb5ea7e7129e6762c8b">processMessageWhenDisabled</a>(msg);
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;isSelfMessage())
    {
        <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Self-message &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot; received\n&quot;</span>;

        <span class="keywordflow">if</span> (msg == <a class="code" href="class_ether_m_a_c_base.html#a9b054b17bf4311eae452c82b7345129c">endTxMsg</a>)
            <a class="code" href="class_ether_m_a_c2.html#ae923bc088641c0c99075fbfd91fddc57">handleEndTxPeriod</a>();
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg == <a class="code" href="class_ether_m_a_c_base.html#aff45e7c294f90d4c381091e69227e409">endIFGMsg</a>)
            <a class="code" href="class_ether_m_a_c2.html#a6f1d75e8d33527ebe1d6d1682cd21c5a">handleEndIFGPeriod</a>();
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg == <a class="code" href="class_ether_m_a_c_base.html#ae21daac2e0436b82e7c3bcd7ff673d71">endPauseMsg</a>)
            <a class="code" href="class_ether_m_a_c_base.html#ae6b022b3261a68de11dd41fdcaf26adf">handleEndPausePeriod</a>();
        <span class="keywordflow">else</span>
            error(<span class="stringliteral">&quot;Unknown self message received!&quot;</span>);
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">if</span> (msg-&gt;getArrivalGate() == gate(<span class="stringliteral">&quot;upperLayerIn&quot;</span>))
            <a class="code" href="class_ether_m_a_c2.html#ae2282425df57f971c00bb3fad7222334">processFrameFromUpperLayer</a>(check_and_cast&lt;EtherFrame *&gt;(msg));
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getArrivalGate() == gate(<span class="stringliteral">&quot;phys$i&quot;</span>))
            <a class="code" href="class_ether_m_a_c2.html#affe85a14532305b2b2a438f93a927594">processMsgFromNetwork</a>(check_and_cast&lt;EtherFrame *&gt;(msg));
        <span class="keywordflow">else</span>
            error(<span class="stringliteral">&quot;Message received from unknown gate!&quot;</span>);
    }

    <span class="keywordflow">if</span> (ev.isGUI())  <a class="code" href="class_ether_m_a_c_base.html#a34f2526399ce9f2acc43eb80998f59bc">updateDisplayString</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3cba3d7dffc3ce909e15fca2f4dc2df0"></a><!-- doxytag: member="EtherMAC2::initialize" ref="a3cba3d7dffc3ce909e15fca2f4dc2df0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC2::initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#aeaef7b8c1c293ee6fa53e1786b7966ab">EtherMACBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c2.html#a3cba3d7dffc3ce909e15fca2f4dc2df0">EtherMACBase::initialize</a>();

    <a class="code" href="class_ether_m_a_c_base.html#ad33267145e8bb8bec8ccdaf1b4419a40">duplexMode</a> = <span class="keyword">true</span>;
    <a class="code" href="class_ether_m_a_c_base.html#abf74598139ff3d6b072bdafdaea84a63">calculateParameters</a>();

    <a class="code" href="class_ether_m_a_c_base.html#a1badd37f8bafc8901b37402dbe3184f2">beginSendFrames</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae8f4a803a71b228788f9de004fd5684f"></a><!-- doxytag: member="EtherMAC2::initializeTxrate" ref="ae8f4a803a71b228788f9de004fd5684f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC2::initializeTxrate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="class_ether_m_a_c_base.html#a330aa19d171b33014ef6f26f05116b84">EtherMACBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// if we&#39;re connected, find the gate with transmission rate</span>
    <a class="code" href="class_ether_m_a_c_base.html#a82f73bf45cef382be21dcc17c512e644">txrate</a> = 0;

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#ace95f162bb4a264cded6f61154885b04">connected</a>)
    {
        <span class="comment">// obtain txrate from channel. As a side effect, this also asserts</span>
        <span class="comment">// that the other end is an EtherMAC2, since normal EtherMAC</span>
        <span class="comment">// insists that the connection has *no* datarate set.</span>
        <span class="comment">// if we&#39;re connected, get the gate with transmission rate</span>
        cChannel *datarateChannel = <a class="code" href="class_ether_m_a_c_base.html#aa83bcb5c4f6024e598c2bbbd2f7773bf">physOutGate</a>-&gt;getTransmissionChannel();
        <a class="code" href="class_ether_m_a_c_base.html#a82f73bf45cef382be21dcc17c512e644">txrate</a> = datarateChannel-&gt;par(<span class="stringliteral">&quot;datarate&quot;</span>).doubleValue();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae2282425df57f971c00bb3fad7222334"></a><!-- doxytag: member="EtherMAC2::processFrameFromUpperLayer" ref="ae2282425df57f971c00bb3fad7222334" args="(EtherFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC2::processFrameFromUpperLayer </td>
          <td>(</td>
          <td class="paramtype">EtherFrame *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#ada0ba5f016929f0b6e1cfc36ea00d739">EtherMACBase</a>.</p>

<p>Referenced by <a class="el" href="class_ether_m_a_c2.html#afe9ce9d3adc1c3c1e03bf1e70e63e384">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c2.html#ae2282425df57f971c00bb3fad7222334">EtherMACBase::processFrameFromUpperLayer</a>(frame);

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a1b69935f2d60c8df93d459b82da99dfc">transmitState</a> == <a class="code" href="_ether_m_a_c_base_8h.html#a743f3e7b25f8aea548d06e5ae9f574bd">TX_IDLE_STATE</a>)
        <a class="code" href="class_ether_m_a_c2.html#a45173ef5b47b8bfc5364029ddfc6ef97">startFrameTransmission</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="affe85a14532305b2b2a438f93a927594"></a><!-- doxytag: member="EtherMAC2::processMsgFromNetwork" ref="affe85a14532305b2b2a438f93a927594" args="(cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC2::processMsgFromNetwork </td>
          <td>(</td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_ether_m_a_c_base.html#a5ead8d1f0c2dcbe9a39b1c04c9730adc">EtherMACBase</a>.</p>

<p>Referenced by <a class="el" href="class_ether_m_a_c2.html#afe9ce9d3adc1c3c1e03bf1e70e63e384">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c2.html#affe85a14532305b2b2a438f93a927594">EtherMACBase::processMsgFromNetwork</a>(msg);
    EtherFrame *frame = check_and_cast&lt;EtherFrame *&gt;(msg);

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a302d966ed62ce375d5a3e320b2131ecd">hasSubscribers</a>)
    {
        <span class="comment">// fire notification</span>
        <a class="code" href="class_ether_m_a_c_base.html#acb06f2e60542cb3128065506b52d0806">notifDetails</a>.<a class="code" href="class_tx_notif_details.html#a13390b6f2e423838865ae60d3c85e8f3">setPacket</a>(frame);
        <a class="code" href="class_ether_m_a_c_base.html#a60ced9495a8ce5a79d8cadd89aeafde9">nb</a>-&gt;<a class="code" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55bac5728eed9d45bec1189b26d79aeff5b8">NF_PP_RX_END</a>, &amp;<a class="code" href="class_ether_m_a_c_base.html#acb06f2e60542cb3128065506b52d0806">notifDetails</a>);
    }

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a7e6f1c067a846e4b696539cb7495d820">checkDestinationAddress</a>(frame))
        <a class="code" href="class_ether_m_a_c_base.html#a08b5bf7bcb012584912397eb8fcae7fd">frameReceptionComplete</a>(frame);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a45173ef5b47b8bfc5364029ddfc6ef97"></a><!-- doxytag: member="EtherMAC2::startFrameTransmission" ref="a45173ef5b47b8bfc5364029ddfc6ef97" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC2::startFrameTransmission </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="class_ether_m_a_c2.html#a6f1d75e8d33527ebe1d6d1682cd21c5a">handleEndIFGPeriod()</a>, and <a class="el" href="class_ether_m_a_c2.html#ae2282425df57f971c00bb3fad7222334">processFrameFromUpperLayer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    EtherFrame *origFrame = (EtherFrame *)<a class="code" href="class_ether_m_a_c_base.html#af821fd79d625be2536582fb50f4eadd9">txQueue</a>.front();
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Transmitting a copy of frame &quot;</span> &lt;&lt; origFrame &lt;&lt; endl;

    EtherFrame *frame = (EtherFrame *) origFrame-&gt;dup();
    frame-&gt;addByteLength(<a class="code" href="_ethernet_8h.html#a7d9c5baa3aead7d06ae791833bde0d88">PREAMBLE_BYTES</a>+<a class="code" href="_ethernet_8h.html#ad9ee8ec9d34ff29becf20068ee649edd">SFD_BYTES</a>);

    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a302d966ed62ce375d5a3e320b2131ecd">hasSubscribers</a>)
    {
        <span class="comment">// fire notification</span>
        <a class="code" href="class_ether_m_a_c_base.html#acb06f2e60542cb3128065506b52d0806">notifDetails</a>.<a class="code" href="class_tx_notif_details.html#a13390b6f2e423838865ae60d3c85e8f3">setPacket</a>(frame);
        <a class="code" href="class_ether_m_a_c_base.html#a60ced9495a8ce5a79d8cadd89aeafde9">nb</a>-&gt;<a class="code" href="class_notification_board.html#a2bb0a5aa0cb272a9b15cb5a58a253fcc">fireChangeNotification</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba3fc715010607b5a5d604735808bcd508">NF_PP_TX_BEGIN</a>, &amp;<a class="code" href="class_ether_m_a_c_base.html#acb06f2e60542cb3128065506b52d0806">notifDetails</a>);
    }

    <span class="comment">// fill in src address if not set</span>
    <span class="keywordflow">if</span> (frame-&gt;getSrc().isUnspecified())
        frame-&gt;setSrc(<a class="code" href="class_ether_m_a_c_base.html#aebb1b775724f697d509aa9594d590ffc">address</a>);

    <span class="comment">// send</span>
    <a class="code" href="_i_n_e_t_defs_8h.html#a650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">&quot;Starting transmission of &quot;</span> &lt;&lt; frame &lt;&lt; endl;
    send(frame, <a class="code" href="class_ether_m_a_c_base.html#aa83bcb5c4f6024e598c2bbbd2f7773bf">physOutGate</a>);
    <a class="code" href="class_ether_m_a_c_base.html#a53f70dc888b2e24464d524581de3f8f3">scheduleEndTxPeriod</a>(frame);

    <span class="comment">// update burst variables</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_ether_m_a_c_base.html#a2d3576698535f9092562070198820198">frameBursting</a>)
    {
        <a class="code" href="class_ether_m_a_c_base.html#a84c2b0ce05482d8dc50182d880f30d58">bytesSentInBurst</a> = frame-&gt;getByteLength();
        <a class="code" href="class_ether_m_a_c_base.html#ac375b2d52a008a9d67cc5a39d1142f94">framesSentInBurst</a>++;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4fef0959987ad6c1c6da607ae6773331"></a><!-- doxytag: member="EtherMAC2::updateHasSubcribers" ref="a4fef0959987ad6c1c6da607ae6773331" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EtherMAC2::updateHasSubcribers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="class_ether_m_a_c_base.html#ad217a66f7ba42eb71b960a63305f8ba6">EtherMACBase</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_ether_m_a_c_base.html#a302d966ed62ce375d5a3e320b2131ecd">hasSubscribers</a> = <a class="code" href="class_ether_m_a_c_base.html#a60ced9495a8ce5a79d8cadd89aeafde9">nb</a>-&gt;<a class="code" href="class_notification_board.html#a668821c8867857ed47a4adaaa99248f8">hasSubscribers</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba3fc715010607b5a5d604735808bcd508">NF_PP_TX_BEGIN</a>) ||
                     <a class="code" href="class_ether_m_a_c_base.html#a60ced9495a8ce5a79d8cadd89aeafde9">nb</a>-&gt;<a class="code" href="class_notification_board.html#a668821c8867857ed47a4adaaa99248f8">hasSubscribers</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba56008b8da6a282b976bc88936bf4af10">NF_PP_TX_END</a>) ||
                     <a class="code" href="class_ether_m_a_c_base.html#a60ced9495a8ce5a79d8cadd89aeafde9">nb</a>-&gt;<a class="code" href="class_notification_board.html#a668821c8867857ed47a4adaaa99248f8">hasSubscribers</a>(<a class="code" href="_notifier_consts_8h.html#a06fc87d81c62e9abb8790b6e5713c55bac5728eed9d45bec1189b26d79aeff5b8">NF_PP_RX_END</a>);
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_ether_m_a_c2_8h.html">EtherMAC2.h</a></li>
<li><a class="el" href="_ether_m_a_c2_8cc.html">EtherMAC2.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_ether_m_a_c2.html">EtherMAC2</a>      </li>
      <li class="footer">Generated on Fri Nov 18 2011 12:47:12 for INET Framework for OMNeT++/OMNEST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
